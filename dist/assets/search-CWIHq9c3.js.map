{"version":3,"file":"search-CWIHq9c3.js","sources":["../../src/components/mixins/search.js"],"sourcesContent":["/*\n * Set of functions to facilitate usage of a search field in order to filter\n * list.\n */\nexport const searchMixin = {\n  methods: {\n    removeSearchQuery(searchQuery) {\n      this.removeShotSearch(searchQuery).catch(console.error)\n    },\n\n    focusSearchField(options) {\n      this.searchField?.focus(options)\n    },\n\n    confirmBuildFilter(query) {\n      this.modals.isBuildFilterDisplayed = false\n      this.searchField.setValue(query)\n      this.setSearchInUrl(query)\n      this.onSearchChange()\n    },\n\n    onSearchChange(clearSelection = true) {\n      if (!this.searchField) return\n      const searchQuery = this.searchField.getValue() || ''\n      this.setSearchInUrl(searchQuery)\n      if (clearSelection) {\n        setTimeout(this.clearSelection, 10)\n      }\n    },\n\n    applySearch(search, force = true) {\n      if (search === this.searchField?.getValue() && !force) return\n      this.searchField?.setValue(search)\n      const setSearchFunction = `set${this.entityTypeName}Search`\n      if (this[setSearchFunction]) {\n        this[setSearchFunction](search || '')\n      }\n      if (this.resizeHeaders) this.resizeHeaders()\n    },\n\n    applySearchFromUrl(force = true) {\n      let searchQuery = ''\n      if (this.$route.query.search && this.$route.query.search.length > 0) {\n        searchQuery = `${this.$route.query.search}`\n      }\n      this.applySearch(searchQuery, force)\n    },\n\n    setSearchFromUrl() {\n      const searchQuery = this.searchField?.getValue()\n      const searchFromUrl = this.$route.query.search\n      if (!searchQuery && searchFromUrl) {\n        this.searchField?.setValue(searchFromUrl)\n      }\n    },\n\n    setSearchInUrl(query) {\n      const searchQuery = query || this.searchField?.getValue()\n      this.$router.push({\n        query: {\n          ...this.$route.query,\n          search: searchQuery || undefined\n        }\n      })\n    }\n  },\n\n  watch: {\n    $route(newRoute, previousRoute) {\n      if (newRoute.query.episode_id !== previousRoute.query.episode_id) {\n        this.clearSelection()\n      } else {\n        if (\n          !this.$route.query ||\n          !this.type ||\n          previousRoute.query.task_id !== newRoute.query.task_id\n        ) {\n          if (\n            newRoute.query.task_id &&\n            previousRoute.query.task_id !== newRoute.query.task_id\n          ) {\n            const listName = `${this.type}-list`\n            if (this.clearSelection) {\n              this.clearSelection()\n            }\n            this.$refs[listName]?.selectTaskFromQuery()\n          }\n          return\n        }\n\n        const search = this.$route.query.search\n        const searchTextVariable = `${this.type}SearchText`\n        if (search !== this[searchTextVariable]) {\n          this.applySearchFromUrl()\n          if (this.clearSelection) {\n            this.clearSelection()\n          }\n        }\n      }\n    }\n  }\n}\n"],"names":["searchMixin","searchQuery","options","query","clearSelection","search","force","setSearchFunction","searchFromUrl","newRoute","previousRoute","listName","searchTextVariable"],"mappings":"AAIY,MAACA,EAAc,CACzB,QAAS,CACP,kBAAkBC,EAAa,CAC7B,KAAK,iBAAiBA,CAAW,EAAE,MAAM,QAAQ,KAAK,CACxD,EAEA,iBAAiBC,EAAS,CACxB,KAAK,aAAa,MAAMA,CAAO,CACjC,EAEA,mBAAmBC,EAAO,CACxB,KAAK,OAAO,uBAAyB,GACrC,KAAK,YAAY,SAASA,CAAK,EAC/B,KAAK,eAAeA,CAAK,EACzB,KAAK,eAAc,CACrB,EAEA,eAAeC,EAAiB,GAAM,CACpC,GAAI,CAAC,KAAK,YAAa,OACvB,MAAMH,EAAc,KAAK,YAAY,SAAQ,GAAM,GACnD,KAAK,eAAeA,CAAW,EAC3BG,GACF,WAAW,KAAK,eAAgB,EAAE,CAEtC,EAEA,YAAYC,EAAQC,EAAQ,GAAM,CAChC,GAAID,IAAW,KAAK,aAAa,SAAQ,GAAM,CAACC,EAAO,OACvD,KAAK,aAAa,SAASD,CAAM,EACjC,MAAME,EAAoB,MAAM,KAAK,cAAc,SAC/C,KAAKA,CAAiB,GACxB,KAAKA,CAAiB,EAAEF,GAAU,EAAE,EAElC,KAAK,eAAe,KAAK,cAAa,CAC5C,EAEA,mBAAmBC,EAAQ,GAAM,CAC/B,IAAIL,EAAc,GACd,KAAK,OAAO,MAAM,QAAU,KAAK,OAAO,MAAM,OAAO,OAAS,IAChEA,EAAc,GAAG,KAAK,OAAO,MAAM,MAAM,IAE3C,KAAK,YAAYA,EAAaK,CAAK,CACrC,EAEA,kBAAmB,CACjB,MAAML,EAAc,KAAK,aAAa,SAAQ,EACxCO,EAAgB,KAAK,OAAO,MAAM,OACpC,CAACP,GAAeO,GAClB,KAAK,aAAa,SAASA,CAAa,CAE5C,EAEA,eAAeL,EAAO,CACpB,MAAMF,EAAcE,GAAS,KAAK,aAAa,SAAQ,EACvD,KAAK,QAAQ,KAAK,CAChB,MAAO,CACL,GAAG,KAAK,OAAO,MACf,OAAQF,GAAe,MACjC,CACA,CAAO,CACH,CACJ,EAEE,MAAO,CACL,OAAOQ,EAAUC,EAAe,CAC9B,GAAID,EAAS,MAAM,aAAeC,EAAc,MAAM,WACpD,KAAK,eAAc,MACd,CACL,GACE,CAAC,KAAK,OAAO,OACb,CAAC,KAAK,MACNA,EAAc,MAAM,UAAYD,EAAS,MAAM,QAC/C,CACA,GACEA,EAAS,MAAM,SACfC,EAAc,MAAM,UAAYD,EAAS,MAAM,QAC/C,CACA,MAAME,EAAW,GAAG,KAAK,IAAI,QACzB,KAAK,gBACP,KAAK,eAAc,EAErB,KAAK,MAAMA,CAAQ,GAAG,oBAAmB,CAC3C,CACA,MACF,CAEA,MAAMN,EAAS,KAAK,OAAO,MAAM,OAC3BO,EAAqB,GAAG,KAAK,IAAI,aACnCP,IAAW,KAAKO,CAAkB,IACpC,KAAK,mBAAkB,EACnB,KAAK,gBACP,KAAK,eAAc,EAGzB,CACF,CACJ,CACA"}