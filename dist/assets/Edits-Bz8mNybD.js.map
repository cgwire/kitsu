{"version":3,"file":"Edits-Bz8mNybD.js","sources":["../../src/components/modals/EditHistoryModal.vue","../../src/assets/illustrations/empty_edit.png","../../src/components/lists/EditList.vue","../../src/components/pages/Edits.vue"],"sourcesContent":["<template>\n  <div\n    :class=\"{\n      modal: true,\n      'is-active': active\n    }\"\n  >\n    <div class=\"modal-background\" @click=\"$emit('cancel')\"></div>\n\n    <div class=\"modal-content\">\n      <div class=\"box content\">\n        <h1 class=\"title\">\n          {{ $t('edits.history') }}\n        </h1>\n\n        <table class=\"table\" ref=\"headerWrapper\">\n          <thead class=\"table-header\">\n            <tr>\n              <th class=\"date\">{{ $t('main.date') }}</th>\n              <th class=\"name\">{{ $t('edits.fields.name') }}</th>\n              <th class=\"person table-filler\">\n                {{ $t('edits.fields.person') }}\n              </th>\n            </tr>\n          </thead>\n        </table>\n\n        <div class=\"table-body\" v-if=\"!isLoading\">\n          <table class=\"table\">\n            <tbody class=\"table-body\">\n              <tr\n                class=\"edit-version\"\n                :key=\"version.id\"\n                v-for=\"version in versions\"\n              >\n                <td class=\"date\">\n                  {{ formatDate(version.created_at) }}\n                </td>\n                <td class=\"name\">\n                  {{ version.name }}\n                </td>\n                <td class=\"person table-filler\">\n                  {{ getPersonFullName(version.person_id) }}\n                </td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n\n        <table-info :is-loading=\"isLoading\" :is-error=\"isError\" />\n\n        <div class=\"has-text-right modal-footer\">\n          <button @click=\"$emit('cancel')\" class=\"button is-link\">\n            {{ $t('main.cancel') }}\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapGetters, mapActions } from 'vuex'\n\nimport { modalMixin } from '@/components/modals/base_modal'\n\nimport { formatDate } from '@/lib/time'\n\nimport TableInfo from '@/components/widgets/TableInfo.vue'\n\nexport default {\n  name: 'edit-history-modal',\n\n  mixins: [modalMixin],\n\n  components: {\n    TableInfo\n  },\n\n  props: {\n    active: {\n      type: Boolean,\n      default: false\n    },\n    edit: {\n      type: Object,\n      default: () => {}\n    }\n  },\n\n  emits: ['cancel'],\n\n  data() {\n    return {\n      isError: false,\n      isLoading: false,\n      versions: []\n    }\n  },\n\n  mounted() {\n    this.reset()\n  },\n\n  computed: {\n    ...mapGetters(['personMap'])\n  },\n\n  methods: {\n    ...mapActions(['loadEditHistory']),\n\n    formatDate(dateString) {\n      return formatDate(dateString)\n    },\n\n    getPersonFullName(personId) {\n      const person = this.personMap.get(personId)\n      return person ? person.full_name : ''\n    },\n\n    loadData() {\n      this.isError = false\n      this.isLoading = true\n      return this.loadEditHistory(this.edit.id)\n        .then(versions => {\n          this.versions = versions\n          this.isLoading = false\n        })\n        .catch(err => {\n          console.error(err)\n          this.isLoading = false\n          this.isError = true\n        })\n    },\n\n    reset() {\n      this.versions = []\n      this.isError = false\n      this.isLoading = false\n    }\n  },\n\n  watch: {\n    active() {\n      if (this.active) {\n        this.reset()\n        this.loadData()\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.dark {\n  .table {\n    th {\n      color: $white;\n    }\n  }\n\n  .table tr:nth-child(odd) {\n    color: $white-grey;\n    background: #36393f;\n  }\n\n  .table tr:nth-child(even) {\n    color: $white-grey;\n    background: #46494f;\n  }\n}\n\n.modal .table {\n  margin-bottom: 0;\n}\n\n.modal-footer {\n  margin-top: 1em;\n}\n\n.table tr .date {\n  min-width: 160px;\n  max-width: 160px;\n  width: 160px;\n}\n\n.name {\n  min-width: 160px;\n  width: 160px;\n}\n\ntd.person {\n  font-size: 0.8em;\n  padding-top: 0.9em;\n}\n\n.table-filler {\n  width: 100%;\n}\n</style>\n","export default \"__VITE_ASSET__DZd97Yfi__\"","<template>\n  <div class=\"data-list\">\n    <div class=\"datatable-wrapper\" ref=\"body\" @scroll.passive=\"onBodyScroll\">\n      <table-header-menu\n        ref=\"headerMenu\"\n        :is-minimized=\"hiddenColumns[lastHeaderMenuDisplayed]\"\n        :is-edit-allowed=\"isCurrentUserManager\"\n        :is-sticked=\"stickedColumns[lastHeaderMenuDisplayed]\"\n        @minimize-clicked=\"onMinimizeColumnToggled()\"\n        @delete-all-clicked=\"onDeleteAllTasksClicked()\"\n        @sort-by-clicked=\"onSortByTaskTypeClicked()\"\n        @select-column=\"onSelectColumn('edit')\"\n        @toggle-stick=\"stickColumnClicked()\"\n      />\n\n      <table-metadata-header-menu\n        ref=\"headerMetadataMenu\"\n        :is-edit-allowed=\"\n          isMetadataColumnEditAllowed(lastMetadaDataHeaderMenuDisplayed)\n        \"\n        :is-sticked=\"stickedColumns[lastMetadaDataHeaderMenuDisplayed]\"\n        @edit-clicked=\"onEditMetadataClicked()\"\n        @delete-clicked=\"onDeleteMetadataClicked()\"\n        @sort-by-clicked=\"onSortByMetadataClicked()\"\n        @toggle-stick=\"metadataStickColumnClicked($event)\"\n      />\n\n      <table class=\"datatable\">\n        <thead class=\"datatable-head\" id=\"datatable-edit\" v-columns-resizable>\n          <tr>\n            <th scope=\"col\" class=\"episode\" ref=\"th-episode\" v-if=\"isTVShow\">\n              {{ $t('edits.fields.episode') }}\n            </th>\n            <th\n              scope=\"col\"\n              class=\"name edit-name datatable-row-header\"\n              ref=\"th-edit\"\n            >\n              <div class=\"flexrow\">\n                <span class=\"flexrow-item\">\n                  {{ $t('edits.fields.name') }}\n                </span>\n                <button-simple\n                  class=\"is-small flexrow-item\"\n                  icon=\"plus\"\n                  :text=\"''\"\n                  @click=\"onAddMetadataClicked\"\n                  v-if=\"\n                    (isCurrentUserManager || isCurrentUserSupervisor) &&\n                    !isLoading\n                  \"\n                />\n              </div>\n            </th>\n\n            <th scope=\"col\" class=\"resolution\" v-if=\"displaySettings.showInfos\">\n              {{ $t('shots.fields.resolution') }}\n            </th>\n\n            <template v-if=\"displaySettings.showInfos\">\n              <metadata-header\n                :ref=\"`editor-${j}`\"\n                :key=\"descriptor.id\"\n                :descriptor=\"descriptor\"\n                :left=\"\n                  offsets['editor-' + j] ? `${offsets['editor-' + j]}px` : '0'\n                \"\n                is-stick\n                :style=\"{\n                  'z-index': 1001\n                }\"\n                @show-metadata-header-menu=\"\n                  event => showMetadataHeaderMenu(descriptor.id, event)\n                \"\n                v-for=\"(descriptor, j) in stickedVisibleMetadataDescriptors\"\n              />\n            </template>\n            <template v-if=\"!isLoading\">\n              <validation-header\n                :ref=\"`validation-${columnIndexInGrid}`\"\n                :key=\"columnId\"\n                :hidden-columns=\"hiddenColumns\"\n                :column-id=\"columnId\"\n                :validation-style=\"getValidationStyle(columnId)\"\n                :left=\"\n                  offsets['validation-' + columnIndexInGrid]\n                    ? `${offsets['validation-' + columnIndexInGrid]}px`\n                    : '0'\n                \"\n                type=\"edits\"\n                is-stick\n                @show-header-menu=\"\n                  event => showHeaderMenu(columnId, columnIndexInGrid, event)\n                \"\n                v-for=\"(\n                  columnId, columnIndexInGrid\n                ) in stickedDisplayedValidationColumns\"\n              />\n            </template>\n\n            <th\n              scope=\"col\"\n              class=\"description selectable\"\n              v-if=\"\n                !isCurrentUserClient &&\n                displaySettings.showInfos &&\n                isEditDescription\n              \"\n            >\n              {{ $t('edits.fields.description') }}\n            </th>\n\n            <template v-if=\"displaySettings.showInfos\">\n              <metadata-header\n                :key=\"descriptor.id\"\n                :descriptor=\"descriptor\"\n                @show-metadata-header-menu=\"\n                  event => showMetadataHeaderMenu(descriptor.id, event)\n                \"\n                v-for=\"descriptor in nonStickedVisibleMetadataDescriptors\"\n              />\n            </template>\n            <th\n              scope=\"col\"\n              class=\"time-spent\"\n              ref=\"th-spent\"\n              v-if=\"\n                !isCurrentUserClient &&\n                displaySettings.showInfos &&\n                isEditTime &&\n                metadataDisplayHeaders.timeSpent\n              \"\n            >\n              {{ $t('edits.fields.time_spent') }}\n            </th>\n            <th\n              scope=\"col\"\n              class=\"estimation\"\n              :title=\"$t('main.estimation')\"\n              ref=\"th-spent\"\n              v-if=\"\n                !isCurrentUserClient &&\n                displaySettings.showInfos &&\n                isEditEstimation &&\n                metadataDisplayHeaders.estimation\n              \"\n            >\n              {{ $t('main.estimation_short') }}\n            </th>\n\n            <template v-if=\"!isLoading\">\n              <validation-header\n                :key=\"columnId\"\n                :hidden-columns=\"hiddenColumns\"\n                :column-id=\"columnId\"\n                :validation-style=\"getValidationStyle(columnId)\"\n                type=\"edits\"\n                @show-header-menu=\"\n                  event => {\n                    showHeaderMenu(columnId, columnIndexInGrid, event)\n                  }\n                \"\n                v-for=\"(\n                  columnId, columnIndexInGrid\n                ) in nonStickedDisplayedValidationColumns\"\n              />\n            </template>\n            <th scope=\"col\" class=\"actions\" ref=\"actionsSection\">\n              <button-simple\n                :class=\"{\n                  'is-small': true,\n                  highlighted: isEmptyTask\n                }\"\n                icon=\"plus\"\n                :text=\"$t('tasks.create_tasks')\"\n                @click=\"$emit('create-tasks')\"\n                v-if=\"\n                  isCurrentUserManager &&\n                  displayedEdits.length > 0 &&\n                  !isLoading\n                \"\n              />\n\n              <table-metadata-selector-menu\n                :descriptors=\"editMetadataDescriptors\"\n                :exclude=\"{\n                  timeSpent: !isEditTime,\n                  estimation: !isEditEstimation\n                }\"\n                namespace=\"edits\"\n                v-model=\"metadataDisplayHeaders\"\n                v-show=\"columnSelectorDisplayed\"\n                v-if=\"displaySettings.showInfos\"\n              />\n\n              <button-simple\n                class=\"is-small is-pulled-right mr05\"\n                icon=\"down\"\n                @click=\"toggleColumnSelector\"\n                v-if=\"\n                  editMetadataDescriptors.length > 0 &&\n                  displaySettings.showInfos\n                \"\n              />\n            </th>\n          </tr>\n        </thead>\n        <tbody class=\"datatable-body\">\n          <template v-if=\"!isLoading && isListVisible\">\n            <tr\n              class=\"datatable-row\"\n              scope=\"row\"\n              :key=\"edit.id\"\n              :class=\"{ canceled: edit.canceled }\"\n              v-for=\"(edit, i) in displayedEdits\"\n            >\n              <td class=\"episode\" v-if=\"isTVShow\">\n                <div class=\"flexrow\">\n                  <input\n                    type=\"checkbox\"\n                    class=\"mr1\"\n                    :checked=\"selectedEdits.has(edit.id) || null\"\n                    @input=\"event => toggleLine(edit, event)\"\n                    v-if=\"isCurrentUserManager\"\n                  />\n                  {{\n                    episodeMap.get(edit.parent_id)\n                      ? episodeMap.get(edit.parent_id).name\n                      : '-'\n                  }}\n                </div>\n              </td>\n              <th\n                :class=\"{\n                  'datatable-row-header': true,\n                  'edit-name': true,\n                  name: true,\n                  bold: !edit.canceled\n                }\"\n              >\n                <div class=\"flexrow\">\n                  <input\n                    type=\"checkbox\"\n                    class=\"mr1\"\n                    :checked=\"selectedEdits.has(edit.id) || null\"\n                    @input=\"event => toggleLine(edit, event)\"\n                    v-if=\"!isTVShow && isCurrentUserManager\"\n                  />\n                  <entity-thumbnail\n                    :entity=\"edit\"\n                    :width=\"displaySettings.bigThumbnails ? 150 : 50\"\n                    :height=\"displaySettings.bigThumbnails ? 100 : 33\"\n                    :empty-width=\"displaySettings.bigThumbnails ? 150 : 50\"\n                    :empty-height=\"displaySettings.bigThumbnails ? 100 : 34\"\n                  />\n                  <router-link\n                    tabindex=\"-1\"\n                    :title=\"edit.full_name\"\n                    :to=\"editPath(edit.id)\"\n                    v-if=\"!isCurrentUserClient\"\n                  >\n                    {{ edit.name }}\n                  </router-link>\n                  <template v-else>\n                    {{ edit.name }}\n                  </template>\n                </div>\n              </th>\n\n              <td class=\"resolution\" v-if=\"displaySettings.showInfos\">\n                <input\n                  :class=\"{\n                    'input-editor': true,\n                    error: !isValidResolution(edit)\n                  }\"\n                  :value=\"\n                    getMetadataFieldValue({ field_name: 'resolution' }, edit)\n                  \"\n                  @input=\"\n                    event =>\n                      onMetadataFieldChanged(\n                        edit,\n                        { field_name: 'resolution' },\n                        event\n                      )\n                  \"\n                  @keyup.ctrl=\"\n                    event =>\n                      onInputKeyUp(event, getIndex(i, k), descriptorLength)\n                  \"\n                  v-if=\"isCurrentUserManager\"\n                />\n                <span class=\"metadata-value selectable\" v-else>\n                  {{\n                    getMetadataFieldValue({ field_name: 'resolution' }, edit)\n                  }}\n                </span>\n              </td>\n\n              <!-- Metadata stick -->\n              <td\n                :ref=\"`editor-${i}-${j}`\"\n                class=\"metadata-descriptor datatable-row-header\"\n                :title=\"edit.data ? edit.data[descriptor.field_name] : ''\"\n                :style=\"{\n                  'z-index': 1000 - i, // Need for combo to be above the next cell\n                  left: offsets['editor-' + j]\n                    ? `${offsets['editor-' + j]}px`\n                    : '0'\n                }\"\n                :key=\"edit.id + '-' + descriptor.id\"\n                v-for=\"(descriptor, j) in stickedVisibleMetadataDescriptors\"\n              >\n                <metadata-input\n                  :entity=\"edit\"\n                  :descriptor=\"descriptor\"\n                  :indexes=\"{ i, j }\"\n                  @metadata-changed=\"$emit('metadata-changed', $event)\"\n                />\n              </td>\n\n              <template v-if=\"!isLoading\">\n                <validation-cell\n                  :ref=\"`validation-${i}-${j}`\"\n                  :key=\"columnId + '-' + edit.id\"\n                  :class=\"{\n                    'validation-cell': !hiddenColumns[columnId],\n                    'hidden-validation-cell': hiddenColumns[columnId],\n                    'datatable-row-header': true\n                  }\"\n                  :contact-sheet=\"displaySettings.contactSheetMode\"\n                  :column=\"taskTypeMap.get(columnId)\"\n                  :column-y=\"j\"\n                  :entity=\"edit\"\n                  :is-assignees=\"displaySettings.showAssignations\"\n                  :is-static=\"true\"\n                  :left=\"\n                    offsets['validation-' + j]\n                      ? `${offsets['validation-' + j]}px`\n                      : '0'\n                  \"\n                  :minimized=\"hiddenColumns[columnId]\"\n                  :row-x=\"i\"\n                  :selected=\"isSelected(i, j)\"\n                  :sticked=\"true\"\n                  :task-test=\"taskMap.get(edit.validations.get(columnId))\"\n                  @select=\"infos => onTaskSelected(infos, true)\"\n                  @unselect=\"infos => onTaskUnselected(infos, true)\"\n                  v-for=\"(columnId, j) in stickedDisplayedValidationColumns\"\n                />\n              </template>\n\n              <description-cell\n                class=\"description\"\n                :entry=\"edit\"\n                :editable=\"isCurrentUserManager\"\n                @description-changed=\"\n                  value => onDescriptionChanged(edit, value)\n                \"\n                v-if=\"\n                  !isCurrentUserClient &&\n                  displaySettings.showInfos &&\n                  isEditDescription\n                \"\n              />\n\n              <!-- other Metadata cells -->\n              <template v-if=\"displaySettings.showInfos\">\n                <td\n                  class=\"metadata-descriptor\"\n                  :title=\"edit.data ? edit.data[descriptor.field_name] : ''\"\n                  :key=\"edit.id + '-' + descriptor.id\"\n                  v-for=\"(\n                    descriptor, j\n                  ) in nonStickedVisibleMetadataDescriptors\"\n                >\n                  <metadata-input\n                    :entity=\"edit\"\n                    :descriptor=\"descriptor\"\n                    :indexes=\"{ i, j }\"\n                    @metadata-changed=\"$emit('metadata-changed', $event)\"\n                  />\n                </td>\n              </template>\n\n              <td\n                class=\"time-spent selectable\"\n                v-if=\"\n                  !isCurrentUserClient &&\n                  displaySettings.showInfos &&\n                  isEditTime &&\n                  metadataDisplayHeaders.timeSpent\n                \"\n              >\n                {{ formatDuration(edit.timeSpent) }}\n              </td>\n\n              <td\n                class=\"estimation selectable\"\n                v-if=\"\n                  !isCurrentUserClient &&\n                  displaySettings.showInfos &&\n                  isEditEstimation &&\n                  metadataDisplayHeaders.estimation\n                \"\n              >\n                {{ formatDuration(edit.estimation) }}\n              </td>\n\n              <template v-if=\"!isLoading\">\n                <validation-cell\n                  :ref=\"`validation-${i}-${\n                    j + stickedDisplayedValidationColumns.length\n                  }`\"\n                  :class=\"{\n                    'validation-cell': !hiddenColumns[columnId],\n                    'hidden-validation-cell': hiddenColumns[columnId]\n                  }\"\n                  :contact-sheet=\"displaySettings.contactSheetMode\"\n                  :key=\"`${columnId}-${edit.id}`\"\n                  :column=\"taskTypeMap.get(columnId)\"\n                  :entity=\"edit\"\n                  :task-test=\"\n                    taskMap.get(\n                      edit.validations ? edit.validations.get(columnId) : null\n                    )\n                  \"\n                  :minimized=\"hiddenColumns[columnId]\"\n                  :selected=\"\n                    isSelected(i, j + stickedDisplayedValidationColumns.length)\n                  \"\n                  :row-x=\"i\"\n                  :column-y=\"j\"\n                  :is-assignees=\"displaySettings.showAssignations\"\n                  @select=\"onTaskSelected\"\n                  @unselect=\"onTaskUnselected\"\n                  v-for=\"(columnId, j) in nonStickedDisplayedValidationColumns\"\n                />\n              </template>\n              <row-actions-cell\n                :entry=\"edit\"\n                :hide-history=\"false\"\n                @delete-clicked=\"$emit('delete-clicked', edit)\"\n                @edit-clicked=\"$emit('edit-clicked', edit)\"\n                @history-clicked=\"$emit('edit-history', edit)\"\n                @restore-clicked=\"$emit('restore-clicked', edit)\"\n                v-if=\"isCurrentUserManager\"\n              />\n              <td class=\"actions\" v-else></td>\n            </tr>\n          </template>\n        </tbody>\n      </table>\n    </div>\n\n    <table-info :is-loading=\"isLoading\" :is-error=\"isError\" />\n\n    <div\n      class=\"has-text-centered\"\n      v-if=\"isEmptyList && !isCurrentUserClient && !isLoading\"\n    >\n      <p class=\"info\">\n        <img src=\"../../assets/illustrations/empty_edit.png\" />\n      </p>\n      <p class=\"info\">{{ $t('edits.empty_list') }}</p>\n      <button-simple\n        class=\"level-item big-button\"\n        :text=\"$t('edits.new_edits')\"\n        @click=\"$emit('add-edits')\"\n      />\n    </div>\n    <div\n      class=\"has-text-centered\"\n      v-if=\"isEmptyList && isCurrentUserClient && !isLoading\"\n    >\n      <p class=\"info\">\n        <img src=\"../../assets/illustrations/empty_edit.png\" />\n      </p>\n      <p class=\"info\">{{ $t('edits.empty_list_client') }}</p>\n    </div>\n\n    <p class=\"has-text-centered nb-edits\" v-if=\"!isEmptyList && !isLoading\">\n      {{ displayedEditsLength }}\n      {{ $tc('edits.number', displayedEditsLength) }}\n      <span v-if=\"displayedEditsTimeSpent > 0 || displayedEditsEstimation > 0\">\n        ({{ formatDuration(displayedEditsTimeSpent) }}\n        {{\n          isDurationInHours\n            ? $tc(\n                'main.hours_spent',\n                formatDuration(displayedEditsTimeSpent, false)\n              )\n            : $tc(\n                'main.days_spent',\n                formatDuration(displayedEditsTimeSpent, false)\n              )\n        }},\n        {{ formatDuration(displayedEditsEstimation) }}\n        {{\n          isDurationInHours\n            ? $tc(\n                'main.hours_estimated',\n                formatDuration(displayedEditsEstimation, false)\n              )\n            : $tc(\n                'main.man_days',\n                formatDuration(displayedEditsEstimation, false)\n              )\n        }})\n      </span>\n    </p>\n  </div>\n</template>\n\n<script>\nimport { mapGetters, mapActions } from 'vuex'\n\nimport preferences from '@/lib/preferences'\nimport { range } from '@/lib/time'\n\nimport { descriptorMixin } from '@/components/mixins/descriptors'\nimport { domMixin } from '@/components/mixins/dom'\nimport { entityListMixin } from '@/components/mixins/entity_list'\nimport { formatListMixin } from '@/components/mixins/format'\nimport { selectionListMixin } from '@/components/mixins/selection'\n\nimport ButtonSimple from '@/components/widgets/ButtonSimple.vue'\nimport DescriptionCell from '@/components/cells/DescriptionCell.vue'\nimport EntityThumbnail from '@/components/widgets/EntityThumbnail.vue'\nimport MetadataHeader from '@/components/cells/MetadataHeader.vue'\nimport MetadataInput from '@/components/cells/MetadataInput.vue'\nimport RowActionsCell from '@/components/cells/RowActionsCell.vue'\nimport TableMetadataHeaderMenu from '@/components/widgets/TableMetadataHeaderMenu.vue'\nimport TableMetadataSelectorMenu from '@/components/widgets/TableMetadataSelectorMenu.vue'\nimport TableHeaderMenu from '@/components/widgets/TableHeaderMenu.vue'\nimport TableInfo from '@/components/widgets/TableInfo.vue'\nimport ValidationCell from '@/components/cells/ValidationCell.vue'\nimport ValidationHeader from '@/components/cells/ValidationHeader.vue'\n\nexport default {\n  name: 'edit-list',\n\n  mixins: [\n    descriptorMixin,\n    domMixin,\n    formatListMixin,\n    entityListMixin,\n    selectionListMixin\n  ],\n\n  props: {\n    displayedEdits: {\n      type: Array,\n      default: () => []\n    },\n    displaySettings: {\n      type: Object,\n      default: () => {}\n    },\n    isError: {\n      type: Boolean,\n      default: false\n    },\n    isLoading: {\n      type: Boolean,\n      default: false\n    },\n    validationColumns: {\n      type: Array,\n      default: () => []\n    },\n    departmentFilter: {\n      type: Array,\n      default: () => []\n    }\n  },\n\n  emits: [\n    'add-edits',\n    'create-tasks',\n    'delete-clicked',\n    'edit-clicked',\n    'edit-history',\n    'metadata-changed',\n    'restore-clicked',\n    'scroll'\n  ],\n\n  data() {\n    return {\n      type: 'edit',\n      hiddenColumns: {},\n      lastHeaderMenuDisplayed: null,\n      lastMetadaDataHeaderMenuDisplayed: null,\n      lastHeaderMenuDisplayedIndexInGrid: null,\n      lastSelectedEdit: null,\n      lastSelection: null,\n      metadataDisplayHeaders: {\n        estimation: true,\n        timeSpent: true\n      },\n      offsets: {},\n      stickedColumns: {}\n    }\n  },\n\n  components: {\n    ButtonSimple,\n    DescriptionCell,\n    EntityThumbnail,\n    MetadataHeader,\n    MetadataInput,\n    RowActionsCell,\n    TableHeaderMenu,\n    TableMetadataHeaderMenu,\n    TableMetadataSelectorMenu,\n    TableInfo,\n    ValidationCell,\n    ValidationHeader\n  },\n\n  computed: {\n    ...mapGetters([\n      'edits',\n      'episodes',\n      'currentProduction',\n      'episodeMap',\n      'currentEpisode',\n      'displayedEditsEstimation',\n      'displayedEditsCount',\n      'displayedEditsLength',\n      'displayedEditsTimeSpent',\n      'isCurrentUserAdmin',\n      'isCurrentUserManager',\n      'isCurrentUserSupervisor',\n      'isCurrentUserClient',\n      'isSingleEpisode',\n      'isEditDescription',\n      'isEditEstimation',\n      'isEditTime',\n      'isTVShow',\n      'nbSelectedTasks',\n      'selectedEdits',\n      'edits',\n      'editFilledColumns',\n      'editMap',\n      'editMetadataDescriptors',\n      'editSearchText',\n      'editSelectionGrid',\n      'selectedTasks',\n      'taskMap',\n      'taskTypeMap',\n      'user'\n    ]),\n\n    isEmptyList() {\n      return (\n        this.displayedEdits.length &&\n        this.displayedEdits[0].length === 0 &&\n        !this.isLoading &&\n        !this.isError &&\n        (!this.editSearchText || this.editSearchText.length === 0)\n      )\n    },\n\n    isEmptyTask() {\n      return (\n        !this.isEmptyList &&\n        !this.isLoading &&\n        this.validationColumns &&\n        this.validationColumns.length === 0\n      )\n    },\n\n    isListVisible() {\n      return !this.isLoading && !this.isError && this.displayedEditsCount > 0\n    },\n\n    displayedValidationColumns() {\n      return this.validationColumns.filter(columnId => {\n        return (\n          this.editFilledColumns[columnId] &&\n          (!this.hiddenColumns[columnId] || this.displaySettings.showInfos)\n        )\n      })\n    },\n\n    metadataDescriptors() {\n      return this.editMetadataDescriptors\n    },\n\n    localStorageStickKey() {\n      return `stick-edits-${this.currentProduction?.id}`\n    }\n  },\n\n  methods: {\n    ...mapActions(['displayMoreEdits', 'setEditSelection']),\n\n    isSelected(lineIndex, columnIndex) {\n      return this.editSelectionGrid[lineIndex][columnIndex]\n    },\n\n    toggleLine(edit, event) {\n      const selected = event.target.checked\n      const editsToSelect = [edit]\n      if (selected && this.shiftKeyPressed && this.lastSelectedEdit) {\n        const editsFlatten = this.displayedEdits.flat()\n        let startEditIndex = editsFlatten.findIndex(\n          displayedEdit => displayedEdit.id === this.lastSelectedEdit.id\n        )\n        let endEditIndex = editsFlatten.findIndex(\n          displayedEdit => displayedEdit.id === edit.id\n        )\n        if (startEditIndex > endEditIndex) {\n          ;[startEditIndex, endEditIndex] = [endEditIndex, startEditIndex]\n        }\n        if (startEditIndex >= 0 && endEditIndex >= 0) {\n          range(startEditIndex, endEditIndex).forEach(index => {\n            editsToSelect.push(editsFlatten[index])\n          })\n        }\n      }\n      if (selected) {\n        this.lastSelectedEdit = edit\n      }\n      editsToSelect.forEach(edit => {\n        this.setEditSelection({ edit, selected })\n      })\n    },\n\n    onBodyScroll(event) {\n      if (!this.$refs.body) return\n      const position = event.target\n      this.$emit('scroll', position.scrollTop)\n      const maxHeight =\n        this.$refs.body.scrollHeight - this.$refs.body.offsetHeight\n      if (maxHeight < position.scrollTop + 100) {\n        this.loadMoreEdits()\n      }\n    },\n\n    loadMoreEdits() {\n      this.displayMoreEdits()\n    },\n\n    editPath(editId) {\n      return this.getPath('edit', editId)\n    },\n\n    getPath(section, editId) {\n      const route = {\n        name: section,\n        params: {\n          production_id: this.currentProduction?.id\n        }\n      }\n\n      if (this.isTVShow && this.currentEpisode) {\n        route.name = `episode-${section}`\n        route.params.episode_id = this.currentEpisode.id\n      }\n\n      if (editId) {\n        route.params.edit_id = editId\n      }\n\n      return route\n    },\n\n    onInputKeyUp(event, i, j) {\n      const listWidth = this.visibleMetadataDescriptors.length + 4\n      const listHeight = this.displayedEditsCount\n      this.keyMetadataNavigation(listWidth, listHeight, i, j, event.key)\n      return this.pauseEvent(event)\n    },\n\n    toggleStickedColumns(columnId) {\n      const sticked = !this.stickedColumns[columnId]\n      this.stickedColumns = {\n        ...this.stickedColumns,\n        [columnId]: sticked\n      }\n      preferences.setObjectPreference(\n        this.localStorageStickKey,\n        this.stickedColumns\n      )\n    },\n\n    stickColumnClicked() {\n      this.toggleStickedColumns(this.lastHeaderMenuDisplayed)\n      this.showHeaderMenu()\n    },\n\n    metadataStickColumnClicked(event) {\n      this.toggleStickedColumns(this.lastMetadaDataHeaderMenuDisplayed)\n      this.showMetadataHeaderMenu(this.lastMetadaDataHeaderMenuDisplayed, event)\n    },\n\n    updateOffsets() {\n      if (this.isLoading) {\n        return\n      }\n      this.$nextTick(() => {\n        let offset = this.$refs['th-edit'].clientWidth\n        this.offsets = {}\n\n        if (this.displaySettings.showInfos) {\n          for (\n            let metadataCol = 0;\n            metadataCol < this.stickedVisibleMetadataDescriptors.length;\n            metadataCol++\n          ) {\n            this.offsets[`editor-${metadataCol}`] = offset\n            offset += this.$refs[`editor-${metadataCol}`][0].$el.clientWidth\n          }\n        }\n        for (\n          let validationCol = 0;\n          validationCol < this.stickedDisplayedValidationColumns.length;\n          validationCol++\n        ) {\n          this.offsets[`validation-${validationCol}`] = offset\n          offset += this.$refs[`validation-${validationCol}`][0].$el.clientWidth\n        }\n      })\n    }\n  },\n\n  watch: {\n    displayedEdits() {\n      this.$options.lineIndex = {}\n    },\n\n    validationColumns() {\n      this.initHiddenColumns(this.validationColumns, this.hiddenColumns)\n    },\n\n    stickedColumns() {\n      this.updateOffsets()\n    },\n\n    isLoading() {\n      this.updateOffsets()\n    }\n  },\n\n  mounted() {\n    this.stickedColumns =\n      preferences.getObjectPreference(this.localStorageStickKey) || {}\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.project {\n  min-width: 60px;\n  width: 60px;\n}\n\n.actions {\n  min-width: 160px;\n  position: sticky;\n}\n\nth.actions {\n  padding: 0.4em;\n}\n\n.name {\n  min-width: 100px;\n  width: 100px;\n}\n\n.bold {\n  font-weight: bold;\n}\n\n.name a {\n  color: inherit;\n}\n\n.name.edit-name {\n  min-width: 110px;\n  width: 110px;\n}\n\n.episode {\n  min-width: 100px;\n  width: 100px;\n}\n\n.description {\n  min-width: 200px;\n  max-width: 200px;\n  width: 200px;\n}\n\n.validation-cell {\n  min-width: 150px;\n  max-width: 150px;\n  width: 150px;\n}\n\n.estimation,\n.time-spent {\n  min-width: 70px;\n  max-width: 70px;\n  width: 70px;\n}\n\ntd.name {\n  font-size: 1.2em;\n}\n\n.canceled {\n  text-decoration: line-through;\n}\n\nspan.thumbnail-empty {\n  display: block;\n  width: 50px;\n  height: 30px;\n  background: #f3f3f3;\n}\n\n.info {\n  margin-top: 2em;\n}\n\n.info img {\n  max-width: 80vh;\n}\n\n.datatable-row th.name {\n  font-size: 1.1em;\n  padding: 6px;\n}\n\n.dark {\n  th .input-editor,\n  td .select select,\n  td .input-editor {\n    color: $white;\n\n    option {\n      background: $dark-grey-light;\n      color: $white;\n    }\n\n    &:focus,\n    &:active,\n    &:hover {\n      background: $dark-grey-light;\n    }\n  }\n}\n\nth .input-editor,\ntd .input-editor {\n  color: $grey-strong;\n  height: 100%;\n  padding: 0.5rem;\n  width: 100%;\n  background: transparent;\n  border: 1px solid transparent;\n  z-index: 100;\n\n  &:active,\n  &:focus,\n  &:hover {\n    background: transparent;\n    background: white;\n  }\n\n  &:active,\n  &:focus {\n    border: 1px solid $green;\n  }\n\n  &:hover {\n    border: 1px solid $light-green;\n  }\n\n  &:invalid {\n    color: $red;\n  }\n}\n\ninput[type='number']::-webkit-outer-spin-button,\ninput[type='number']::-webkit-inner-spin-button {\n  -webkit-appearance: none;\n  margin: 0;\n}\n\ninput[type='number'] {\n  -moz-appearance: textfield;\n}\n\n// Metadata cell CSS\n\ntd.metadata-descriptor {\n  height: 3.1rem;\n  max-width: 120px;\n  padding: 0;\n}\n\ntd .select {\n  color: $grey-strong;\n  margin: 0;\n  height: 100%;\n  width: 100%;\n  border: 1px solid transparent;\n\n  &::after {\n    border-color: transparent;\n  }\n\n  &:active,\n  &:focus,\n  &:hover {\n    &::after {\n      border-color: $green;\n    }\n  }\n\n  select {\n    color: $grey-strong;\n    height: 100%;\n    width: 100%;\n    background: transparent;\n    border-radius: 0;\n    border: 1px solid transparent;\n\n    &:focus {\n      border: 1px solid $green;\n      background: white;\n    }\n\n    &:hover {\n      background: transparent;\n      background: white;\n      border: 1px solid $light-green;\n    }\n  }\n}\n\n.metadata-value {\n  padding: 0.5rem 0.75rem;\n}\n\n.resolution {\n  min-width: 110px;\n  max-width: 110px;\n  width: 110px;\n}\n\ntd.resolution {\n  height: 3.1rem;\n  padding: 0;\n}\n</style>\n","<template>\n  <div class=\"columns fixed-page\">\n    <div class=\"column main-column\">\n      <div class=\"edits page\">\n        <div class=\"edit-list-header page-header\">\n          <div class=\"flexrow mb1\">\n            <search-field\n              ref=\"edit-search-field\"\n              :can-save=\"true\"\n              @change=\"onSearchChange\"\n              @enter=\"applySearch(searchField.getValue())\"\n              @save=\"saveSearchQuery\"\n              placeholder=\"ex: e01 edit=wip\"\n            />\n            <button-simple\n              class=\"flexrow-item\"\n              :title=\"$t('entities.build_filter.title')\"\n              icon=\"filter\"\n              @click=\"() => (modals.isBuildFilterDisplayed = true)\"\n            />\n            <div class=\"filler\"></div>\n            <combobox-department\n              class=\"combobox-department flexrow-item\"\n              :selectable-departments=\"selectableDepartments('Edit')\"\n              :display-all-and-my-departments=\"true\"\n              :width=\"230\"\n              rounded\n              v-model=\"selectedDepartment\"\n              v-if=\"departments.length > 0\"\n            />\n            <div class=\"flexrow flexrow-item\" v-if=\"!isCurrentUserClient\">\n              <combobox-display-options\n                class=\"flexrow-item\"\n                :type=\"type\"\n                v-model=\"displaySettings\"\n              />\n            </div>\n            <div class=\"flexrow\" v-if=\"isCurrentUserManager\">\n              <button-simple\n                class=\"flexrow-item\"\n                :title=\"$t('entities.thumbnails.title')\"\n                icon=\"import-files\"\n                @click=\"showAddThumbnailsModal\"\n              />\n              <button-simple\n                class=\"flexrow-item\"\n                :title=\"$t('main.csv.import_file')\"\n                icon=\"import\"\n                @click=\"showImportModal\"\n              />\n              <button-simple\n                class=\"flexrow-item\"\n                icon=\"export\"\n                :title=\"$t('main.csv.export_file')\"\n                @click=\"onExportClick\"\n              />\n              <button-simple\n                class=\"flexrow-item\"\n                :text=\"$t('edits.new_edit')\"\n                icon=\"plus\"\n                @click=\"showNewModal\"\n              />\n            </div>\n          </div>\n\n          <div class=\"query-list\">\n            <search-query-list\n              :queries=\"editSearchQueries\"\n              type=\"edit\"\n              @remove-search=\"removeSearchQuery\"\n              v-if=\"!isEditsLoading && !initialLoading\"\n            />\n          </div>\n        </div>\n\n        <sorting-info\n          :sorting=\"editSorting\"\n          @clear-sorting=\"onChangeSortClicked(null)\"\n          v-if=\"editSorting?.length\"\n        />\n        <edit-list\n          ref=\"edit-list\"\n          :displayed-edits=\"displayedEdits\"\n          :is-loading=\"isEditsLoading || initialLoading\"\n          :is-error=\"isEditsLoadingError\"\n          :validation-columns=\"editValidationColumns\"\n          :department-filter=\"departmentFilter\"\n          :display-settings=\"displaySettings\"\n          @add-metadata=\"onAddMetadataClicked\"\n          @change-sort=\"onChangeSortClicked\"\n          @create-tasks=\"showCreateTasksModal\"\n          @delete-all-tasks=\"onDeleteAllTasksClicked\"\n          @delete-clicked=\"onDeleteClicked\"\n          @delete-metadata=\"onDeleteMetadataClicked\"\n          @edit-clicked=\"onEditClicked\"\n          @edit-metadata=\"onEditMetadataClicked\"\n          @field-changed=\"onFieldChanged\"\n          @metadata-changed=\"onMetadataChanged\"\n          @restore-clicked=\"onRestoreClicked\"\n          @scroll=\"saveScrollPosition\"\n          @edit-history=\"showEditHistoryModal\"\n          @keep-task-panel-open=\"onKeepTaskPanelOpenChanged\"\n        />\n      </div>\n    </div>\n\n    <div\n      id=\"side-column\"\n      class=\"column side-column\"\n      v-show=\"isTaskSidePanelOpen\"\n    >\n      <task-info\n        :task=\"selectedTasks.values().next().value\"\n        entity-type=\"Edit\"\n        with-actions\n      />\n    </div>\n\n    <edit-edit-modal\n      :active=\"modals.isNewDisplayed\"\n      :is-loading=\"loading.edit\"\n      :is-error=\"errors.edit\"\n      :edit-to-edit=\"editToEdit\"\n      @cancel=\"modals.isNewDisplayed = false\"\n      @confirm=\"confirmEditEdit\"\n    />\n\n    <delete-modal\n      ref=\"delete-edit-modal\"\n      :active=\"modals.isDeleteDisplayed\"\n      :is-loading=\"loading.del\"\n      :is-error=\"errors.del\"\n      :text=\"deleteText()\"\n      :error-text=\"$t('edits.delete_error')\"\n      @cancel=\"modals.isDeleteDisplayed = false\"\n      @confirm=\"confirmDeleteEdit\"\n    />\n\n    <delete-modal\n      ref=\"restore-edit-modal\"\n      :active=\"modals.isRestoreDisplayed\"\n      :is-loading=\"loading.restore\"\n      :is-error=\"errors.restore\"\n      :text=\"restoreText()\"\n      :error-text=\"$t('edits.restore_error')\"\n      @cancel=\"modals.isRestoreDisplayed = false\"\n      @confirm=\"confirmRestoreEdit\"\n    />\n\n    <delete-modal\n      ref=\"delete-metadata-modal\"\n      :active=\"modals.isDeleteMetadataDisplayed\"\n      :is-loading=\"loading.deleteMetadata\"\n      :is-error=\"errors.deleteMetadata\"\n      @cancel=\"modals.isDeleteMetadataDisplayed = false\"\n      :text=\"$t('productions.metadata.delete_text')\"\n      :error-text=\"$t('productions.metadata.delete_error')\"\n      @confirm=\"confirmDeleteMetadata\"\n    />\n\n    <hard-delete-modal\n      ref=\"delete-all-tasks-modal\"\n      :active=\"modals.isDeleteAllTasksDisplayed\"\n      :is-loading=\"loading.deleteAllTasks\"\n      :is-error=\"errors.deleteAllTasks\"\n      :text=\"deleteAllTasksText()\"\n      :error-text=\"$t('tasks.delete_all_error')\"\n      :lock-text=\"deleteAllTasksLockText\"\n      :selection-option=\"true\"\n      @cancel=\"modals.isDeleteAllTasksDisplayed = false\"\n      @confirm=\"confirmDeleteAllTasks\"\n    />\n\n    <import-render-modal\n      :active=\"modals.isImportRenderDisplayed\"\n      :is-loading=\"loading.importing\"\n      :is-error=\"errors.importing\"\n      :import-error=\"errors.importingError\"\n      :parsed-csv=\"parsedCSV\"\n      :form-data=\"editsCsvFormData\"\n      :columns=\"renderColumns\"\n      :data-matchers=\"dataMatchers\"\n      :database=\"filteredEdits\"\n      @reupload=\"resetImport\"\n      @cancel=\"hideImportRenderModal\"\n      @confirm=\"uploadImportFile\"\n    />\n\n    <import-modal\n      ref=\"import-modal\"\n      :active=\"modals.isImportDisplayed\"\n      :is-loading=\"loading.importing\"\n      :is-error=\"errors.importing\"\n      :form-data=\"editsCsvFormData\"\n      :columns=\"dataMatchers\"\n      :optional-columns=\"optionalColumns\"\n      :generic-columns=\"genericColumns\"\n      @cancel=\"hideImportModal\"\n      @confirm=\"renderImport\"\n    />\n\n    <create-tasks-modal\n      :active=\"modals.isCreateTasksDisplayed\"\n      :is-loading=\"loading.creatingTasks\"\n      :is-loading-stay=\"loading.creatingTasksStay\"\n      :is-error=\"errors.creatingTasks\"\n      :title=\"$t('tasks.create_tasks_edit')\"\n      :text=\"$t('tasks.create_tasks_edit_explaination')\"\n      :error-text=\"$t('tasks.create_tasks_edit_failed')\"\n      @cancel=\"hideCreateTasksModal\"\n      @confirm=\"confirmCreateTasks\"\n      @confirm-and-stay=\"confirmCreateTasksAndStay\"\n    />\n\n    <add-metadata-modal\n      :active=\"modals.isAddMetadataDisplayed\"\n      :is-loading=\"loading.addMetadata\"\n      :is-error=\"errors.addMetadata\"\n      :descriptor-to-edit=\"descriptorToEdit\"\n      entity-type=\"Edit\"\n      @cancel=\"closeMetadataModal\"\n      @confirm=\"confirmAddMetadata\"\n    />\n\n    <add-thumbnails-modal\n      ref=\"add-thumbnails-modal\"\n      active\n      entity-type=\"Edit\"\n      :parent=\"isTVShow ? 'edits_tvshow' : 'edits'\"\n      :is-loading=\"loading.addThumbnails\"\n      :is-error=\"errors.addThumbnails\"\n      @cancel=\"hideAddThumbnailsModal\"\n      @confirm=\"confirmAddThumbnails\"\n      v-if=\"modals.isAddThumbnailsDisplayed\"\n    />\n\n    <edit-history-modal\n      :active=\"modals.isEditHistoryDisplayed\"\n      :edit=\"historyEdit\"\n      @cancel=\"hideEditHistoryModal\"\n    />\n\n    <build-filter-modal\n      ref=\"build-filter-modal\"\n      :active=\"modals.isBuildFilterDisplayed\"\n      entity-type=\"edit\"\n      @cancel=\"modals.isBuildFilterDisplayed = false\"\n      @confirm=\"confirmBuildFilter\"\n    />\n  </div>\n</template>\n\n<script>\nimport moment from 'moment'\nimport { mapGetters, mapActions } from 'vuex'\n\nimport csv from '@/lib/csv'\nimport func from '@/lib/func'\nimport { sortByName } from '@/lib/sorting'\nimport stringHelpers from '@/lib/string'\n\nimport { searchMixin } from '@/components/mixins/search'\nimport { entitiesMixin } from '@/components/mixins/entities'\n\nimport AddMetadataModal from '@/components/modals/AddMetadataModal.vue'\nimport AddThumbnailsModal from '@/components/modals/AddThumbnailsModal.vue'\nimport BuildFilterModal from '@/components/modals/BuildFilterModal.vue'\nimport ButtonSimple from '@/components/widgets/ButtonSimple.vue'\nimport ComboboxDepartment from '@/components/widgets/ComboboxDepartment.vue'\nimport ComboboxDisplayOptions from '@/components/widgets/ComboboxDisplayOptions.vue'\nimport CreateTasksModal from '@/components/modals/CreateTasksModal.vue'\nimport DeleteModal from '@/components/modals/DeleteModal.vue'\nimport EditEditModal from '@/components/modals/EditEditModal.vue'\nimport ImportRenderModal from '@/components/modals/ImportRenderModal.vue'\nimport ImportModal from '@/components/modals/ImportModal.vue'\nimport HardDeleteModal from '@/components/modals/HardDeleteModal.vue'\nimport SearchField from '@/components/widgets/SearchField.vue'\nimport SearchQueryList from '@/components/widgets/SearchQueryList.vue'\nimport SortingInfo from '@/components/widgets/SortingInfo.vue'\nimport EditHistoryModal from '@/components/modals/EditHistoryModal.vue'\nimport EditList from '@/components/lists/EditList.vue'\nimport TaskInfo from '@/components/sides/TaskInfo.vue'\n\nexport default {\n  name: 'edits',\n\n  mixins: [searchMixin, entitiesMixin],\n\n  components: {\n    AddMetadataModal,\n    AddThumbnailsModal,\n    BuildFilterModal,\n    ButtonSimple,\n    ComboboxDepartment,\n    ComboboxDisplayOptions,\n    CreateTasksModal,\n    DeleteModal,\n    EditEditModal,\n    ImportModal,\n    HardDeleteModal,\n    ImportRenderModal,\n    SearchField,\n    SearchQueryList,\n    SortingInfo,\n    EditHistoryModal,\n    EditList,\n    TaskInfo\n  },\n\n  data() {\n    return {\n      type: 'edit',\n      contactSheetMode: false,\n      deleteAllTasksLockText: null,\n      descriptorToEdit: {},\n      departmentFilter: [],\n      editToDelete: null,\n      editToEdit: null,\n      editToRestore: null,\n      formData: null,\n      genericColumns: [\n        'Metadata column name (text value)',\n        'Task type name (task status name value)',\n        'Task type name + comment (text value)'\n      ],\n      historyEdit: {},\n      initialLoading: true,\n      optionalColumns: ['Description'],\n      pageName: 'Edits',\n      parsedCSV: [],\n      selectedDepartment: 'ALL',\n      taskTypeForTaskDeletion: null,\n      modals: {\n        isAddMetadataDisplayed: false,\n        isAddThumbnailsDisplayed: false,\n        isBuildFilterDisplayed: false,\n        isCreateTasksDisplayed: false,\n        isDeleteDisplayed: false,\n        isDeleteMetadataDisplayed: false,\n        isDeleteAllTasksDisplayed: false,\n        isImportRenderDisplayed: false,\n        isImportDisplayed: false,\n        isNewDisplayed: false,\n        isRestoreDisplayed: false,\n        isEditHistoryDisplayed: false\n      },\n      loading: {\n        addMetadata: false,\n        addThumbnails: false,\n        creatingTasks: false,\n        creatingTasksStay: false,\n        deleteAllTasks: false,\n        deleteMetadata: false,\n        edit: false,\n        del: false,\n        importing: false,\n        restore: false,\n        savingSearch: false,\n        stay: false\n      },\n      errors: {\n        addMetadata: false,\n        deleteMetadata: false,\n        creatingTasks: false,\n        deleteAllTasks: false,\n        importing: false,\n        importingError: null\n      }\n    }\n  },\n\n  beforeUnmount() {\n    this.clearSelectedEdits()\n  },\n\n  created() {\n    this.setLastProductionScreen('edits')\n  },\n\n  mounted() {\n    if (this.editSearchText.length > 0) {\n      this.$refs['edit-search-field']?.setValue(this.editSearchText)\n    }\n    this.$refs['edit-list']?.setScrollPosition(this.editListScrollPosition)\n    const finalize = () => {\n      if (this.$refs['edit-list']) {\n        this.applySearchFromUrl()\n        this.$refs['edit-list'].setScrollPosition(this.editListScrollPosition)\n        this.$refs['edit-list'].selectTaskFromQuery()\n      }\n    }\n\n    if (\n      this.editMap.size < 2 ||\n      (this.editValidationColumns.length > 0 &&\n        !this.editMap.get(this.editMap.keys().next().value).validations)\n    ) {\n      setTimeout(() => {\n        this.loadEdits().then(() => {\n          setTimeout(() => {\n            this.initialLoading = false\n            finalize()\n          }, 200)\n        })\n      }, 0)\n    } else {\n      if (!this.isEditsLoading) this.initialLoading = false\n      finalize()\n    }\n  },\n\n  computed: {\n    ...mapGetters([\n      'currentEpisode',\n      'currentProduction',\n      'displayedEdits',\n      'departmentMap',\n      'departments',\n      'editMap',\n      'editFilledColumns',\n      'editsCsvFormData',\n      'editSearchQueries',\n      'editSearchText',\n      'editValidationColumns',\n      'editListScrollPosition',\n      'editSorting',\n      'episodeMap',\n      'episodes',\n      'openProductions',\n      'isCurrentUserClient',\n      'isCurrentUserManager',\n      'isEditDescription',\n      'isEditEstimation',\n      'isEditTime',\n      'isEditsLoading',\n      'isEditsLoadingError',\n      'isLongEditList',\n      'isShowAssignations',\n      'isTVShow',\n      'productionEditTaskTypes',\n      'selectedEdits',\n      'taskTypeMap',\n      'user'\n    ]),\n\n    searchField() {\n      return this.$refs['edit-search-field']\n    },\n\n    addThumbnailsModal() {\n      return this.$refs['add-thumbnails-modal']\n    },\n\n    renderColumns() {\n      const collection = [...this.dataMatchers, ...this.optionalColumns]\n\n      this.productionEditTaskTypes.forEach(item => {\n        collection.push(item.name)\n        collection.push(`${item.name} comment`)\n      })\n      return collection\n    },\n\n    dataMatchers() {\n      return this.isTVShow ? ['Episode', 'Name'] : ['Name']\n    },\n\n    filteredEdits() {\n      const edits = {}\n      this.displayedEdits.forEach(edit => {\n        let editKey = ''\n        if (\n          this.isTVShow &&\n          edit.episode_id &&\n          this.episodeMap.has(edit.episode_id)\n        ) {\n          editKey += this.episodeMap.get(edit.episode_id).name\n        }\n        editKey += `${edit.name}`\n        edits[editKey] = true\n      })\n      return edits\n    },\n\n    metadataDescriptors() {\n      return this.editMetadataDescriptors\n    }\n  },\n\n  methods: {\n    ...mapActions([\n      'addMetadataDescriptor',\n      'createTasks',\n      'changeEditSort',\n      'clearSelectedEdits',\n      'commentTaskWithPreview',\n      'deleteAllEditTasks',\n      'deleteEdit',\n      'deleteMetadataDescriptor',\n      'editEdit',\n      'getEditsCsvLines',\n      'hideAssignations',\n      'loadEpisodes',\n      'loadEdits',\n      'newEdit',\n      'removeEditSearch',\n      'restoreEdit',\n      'saveEditSearch',\n      'setLastProductionScreen',\n      'setPreview',\n      'setEditSearch',\n      'showAssignations',\n      'uploadEditFile'\n    ]),\n\n    confirmAddMetadata(form) {\n      this.loading.addMetadata = true\n      form.entity_type = 'Edit'\n      this.addMetadataDescriptor(form)\n        .then(() => {\n          this.loading.addMetadata = false\n          this.modals.isAddMetadataDisplayed = false\n        })\n        .catch(err => {\n          console.error(err)\n          this.loading.addMetadata = false\n          this.errors.addMetadata = true\n        })\n    },\n\n    closeMetadataModal() {\n      this.modals.isAddMetadataDisplayed = false\n    },\n\n    confirmDeleteMetadata() {\n      this.errors.deleteMetadata = false\n      this.loading.deleteMetadata = true\n      this.deleteMetadataDescriptor(this.descriptorIdToDelete)\n        .then(() => {\n          this.errors.deleteMetadata = false\n          this.loading.deleteMetadata = false\n          this.modals.isDeleteMetadataDisplayed = false\n        })\n        .catch(err => {\n          console.error(err)\n          this.errors.deleteMetadata = true\n          this.loading.deleteMetadata = false\n        })\n    },\n\n    onAddMetadataClicked() {\n      this.descriptorToEdit = {}\n      this.modals.isAddMetadataDisplayed = true\n    },\n\n    onDeleteMetadataClicked(descriptorId) {\n      this.descriptorIdToDelete = descriptorId\n      this.modals.isDeleteMetadataDisplayed = true\n    },\n\n    onDeleteClicked(edit) {\n      this.editToDelete = edit\n      this.modals.isDeleteDisplayed = true\n    },\n\n    showNewModal() {\n      this.editToEdit = {}\n      this.modals.isNewDisplayed = true\n    },\n\n    onEditClicked(edit) {\n      this.editToEdit = edit\n      this.modals.isNewDisplayed = true\n    },\n\n    onRestoreClicked(edit) {\n      this.editToRestore = edit\n      this.modals.isRestoreDisplayed = true\n    },\n\n    onEditMetadataClicked(descriptorId) {\n      this.descriptorToEdit = this.currentProduction.descriptors.find(\n        d => d.id === descriptorId\n      )\n      this.modals.isAddMetadataDisplayed = true\n    },\n\n    confirmEditEdit(form) {\n      let action = 'newEdit'\n      this.loading.edit = true\n      this.errors.edit = false\n      if (this.editToEdit && this.editToEdit.id) {\n        action = 'editEdit'\n        form.id = this.editToEdit.id\n      }\n      this[action](form)\n        .then(form => {\n          this.loading.edit = false\n          this.modals.isNewDisplayed = false\n          this.applySearchFromUrl(false)\n        })\n        .catch(err => {\n          console.error(err)\n          this.loading.edit = false\n          this.errors.edit = true\n        })\n    },\n\n    confirmDeleteAllTasks(selectionOnly) {\n      const taskTypeId = this.taskTypeForTaskDeletion.id\n      const projectId = this.currentProduction.id\n      this.errors.deleteAllTasks = false\n      this.loading.deleteAllTasks = true\n      this.deleteAllEditTasks({ projectId, taskTypeId, selectionOnly })\n        .then(() => {\n          this.loading.deleteAllTasks = false\n          this.modals.isDeleteAllTasksDisplayed = false\n        })\n        .catch(err => {\n          console.error(err)\n          this.loading.deleteAllTasks = false\n          this.errors.deleteAllTasks = true\n        })\n    },\n\n    confirmDeleteEdit() {\n      this.loading.del = true\n      this.errors.del = false\n      this.deleteEdit(this.editToDelete)\n        .then(() => {\n          this.loading.del = false\n          this.modals.isDeleteDisplayed = false\n        })\n        .catch(err => {\n          console.error(err)\n          this.loading.del = false\n          this.errors.del = true\n        })\n    },\n\n    confirmRestoreEdit() {\n      this.loading.restore = true\n      this.errors.restore = false\n      this.restoreEdit(this.editToRestore)\n        .then(() => {\n          this.loading.restore = false\n          this.modals.isRestoreDisplayed = false\n        })\n        .catch(err => {\n          console.error(err)\n          this.loading.restore = false\n          this.errors.restore = true\n        })\n    },\n\n    confirmAddThumbnails(forms) {\n      const addPreview = form => {\n        this.addThumbnailsModal?.markLoading(form.task.entity_id)\n        return this.commentTaskWithPreview({\n          taskId: form.task.id,\n          commentText: '',\n          taskStatusId: form.task.task_status_id,\n          form\n        })\n          .then(({ newComment, preview }) => {\n            return this.setPreview({\n              taskId: form.task.id,\n              entityId: form.task.entity_id,\n              previewId: preview.id\n            })\n          })\n          .then(() => {\n            this.addThumbnailsModal?.markUploaded(form.task.entity_id)\n          })\n      }\n      this.loading.addThumbnails = true\n      func.runPromiseMapAsSeries(forms, addPreview).then(() => {\n        this.loading.addThumbnails = false\n        this.modals.isAddThumbnailsDisplayed = false\n      })\n    },\n\n    confirmCreateTasks({ form, selectionOnly }) {\n      this.loading.creatingTasks = true\n      this.runTasksCreation(form, selectionOnly)\n        .then(() => {\n          this.reset()\n          this.hideCreateTasksModal()\n          this.loading.creatingTasks = false\n        })\n        .catch(err => {\n          this.errors.creatingTasks = true\n          console.error(err)\n        })\n    },\n\n    confirmCreateTasksAndStay({ form, selectionOnly }) {\n      this.loading.creatingTasksStay = true\n      this.runTasksCreation(form, selectionOnly)\n        .then(() => {\n          this.reset()\n          this.loading.creatingTasksStay = false\n        })\n        .catch(err => {\n          this.errors.creatingTasks = true\n          console.error(err)\n        })\n    },\n\n    runTasksCreation(form, selectionOnly) {\n      this.errors.creatingTasks = false\n      return this.createTasks({\n        type: 'edits',\n        task_type_id: form.task_type_id,\n        project_id: this.currentProduction.id,\n        selectionOnly\n      })\n    },\n\n    reset() {\n      this.initialLoading = true\n      this.loadEdits(err => {\n        if (err) console.error(err)\n        this.initialLoading = false\n      })\n    },\n\n    resetEditModal() {\n      const form = { name: '' }\n      if (this.openProductions.length > 0) {\n        form.production_id = this.openProductions[0].id\n      }\n      this.editToEdit = form\n    },\n\n    deleteText() {\n      const edit = this.editToDelete\n      if (edit && (edit.canceled || !edit.tasks || edit.tasks.length === 0)) {\n        return this.$t('edits.delete_text', { name: edit.name })\n      } else if (edit) {\n        return this.$t('edits.cancel_text', { name: edit.name })\n      }\n      return ''\n    },\n\n    deleteAllTasksText() {\n      const taskType = this.taskTypeForTaskDeletion\n      if (taskType) {\n        return this.$t('tasks.delete_all_text', { name: taskType.name })\n      }\n      return ''\n    },\n\n    restoreText() {\n      const edit = this.editToRestore\n      if (edit) {\n        return this.$t('edits.restore_text', { name: edit.name })\n      }\n      return ''\n    },\n\n    renderImport(data, mode) {\n      this.loading.importing = true\n      this.errors.importing = false\n      this.formData = data\n      if (mode === 'file') {\n        data = data.get('file')\n      }\n      csv.processCSV(data).then(results => {\n        this.parsedCSV = results\n        this.hideImportModal()\n        this.loading.importing = false\n        this.showImportRenderModal()\n      })\n    },\n\n    uploadImportFile(data, toUpdate) {\n      const formData = new FormData()\n      const filename = 'import.csv'\n      const csvContent = csv.turnEntriesToCsvString(data)\n      const file = new File([csvContent], filename, { type: 'text/csv' })\n\n      formData.append('file', file)\n\n      this.loading.importing = true\n      this.errors.importing = false\n      this.$store.commit('EDIT_CSV_FILE_SELECTED', formData)\n\n      this.uploadEditFile(toUpdate)\n        .then(() => {\n          this.loadEpisodes().catch(console.error)\n          this.hideImportRenderModal()\n          this.loadEdits()\n        })\n        .catch(err => {\n          console.error(err)\n          this.loading.importingError = err\n          this.errors.importing = true\n        })\n        .finally(() => {\n          this.loading.importing = false\n        })\n    },\n\n    resetImport() {\n      this.errors.importing = false\n      this.hideImportRenderModal()\n      this.$store.commit('EDIT_CSV_FILE_SELECTED', null)\n      this.$refs['import-modal'].reset()\n      this.showImportModal()\n    },\n\n    onDeleteAllTasksClicked(taskTypeId) {\n      const taskType = this.taskTypeMap.get(taskTypeId)\n      this.taskTypeForTaskDeletion = taskType\n      this.deleteAllTasksLockText = taskType.name\n      this.modals.isDeleteAllTasksDisplayed = true\n    },\n\n    onSearchChange(clearSelection = true) {\n      if (!this.searchField) return\n      const searchQuery = this.searchField.getValue() || ''\n      this.setSearchInUrl()\n      if (searchQuery.length !== 1 && !this.isLongEditList) {\n        this.applySearch(searchQuery)\n      }\n      if (clearSelection) {\n        this.clearSelection()\n      }\n    },\n\n    saveScrollPosition(scrollPosition) {\n      this.$store.commit('SET_EDIT_LIST_SCROLL_POSITION', scrollPosition)\n    },\n\n    saveSearchQuery(searchQuery) {\n      if (this.loading.savingSearch) {\n        return\n      }\n      this.loading.savingSearch = true\n      this.saveEditSearch(searchQuery)\n        .catch(console.error)\n        .finally(() => {\n          this.loading.savingSearch = false\n        })\n    },\n\n    removeSearchQuery(searchQuery) {\n      this.removeEditSearch(searchQuery).catch(console.error)\n    },\n\n    getPath(section) {\n      const route = {\n        name: section,\n        params: {\n          production_id: this.currentProduction.id\n        }\n      }\n      if (this.isTVShow && this.currentEpisode) {\n        route.name = `episode-${section}`\n        route.params.episode_id = this.currentEpisode.id\n      }\n      return route\n    },\n\n    showEditHistoryModal(edit) {\n      this.historyEdit = edit\n      this.modals.isEditHistoryDisplayed = true\n    },\n\n    hideEditHistoryModal() {\n      this.modals.isEditHistoryDisplayed = false\n    },\n\n    onExportClick() {\n      this.getEditsCsvLines().then(editLines => {\n        const nameData = [\n          moment().format('YYYY-MM-DD'),\n          'kitsu',\n          this.currentProduction.name,\n          this.$t('edits.title')\n        ]\n        if (this.currentEpisode) {\n          nameData.splice(3, 0, this.currentEpisode.name)\n        }\n        const name = stringHelpers.slugify(nameData.join('_'))\n        const headers = [\n          this.$t('edits.fields.name'),\n          this.$t('edits.fields.description')\n        ]\n        if (this.currentEpisode) {\n          headers.splice(0, 0, 'Episode')\n        }\n        sortByName([...this.currentProduction.descriptors])\n          .filter(d => d.entity_type === 'Edit')\n          .forEach(descriptor => {\n            headers.push(descriptor.name)\n          })\n        if (this.isEditTime) {\n          headers.push(this.$t('edits.fields.time_spent'))\n        }\n        if (this.isEditEstimation) {\n          headers.push(this.$t('main.estimation_short'))\n        }\n        this.editValidationColumns.forEach(taskTypeId => {\n          headers.push(this.taskTypeMap.get(taskTypeId).name)\n          headers.push('Assignations')\n        })\n        csv.buildCsvFile(name, [headers].concat(editLines))\n      })\n    },\n\n    onChangeSortClicked(sortInfo) {\n      this.changeEditSort(sortInfo)\n    },\n\n    async onFieldChanged({ entry, fieldName, value }) {\n      const data = {\n        id: entry.id,\n        description: entry.description,\n        [fieldName]: value\n      }\n      await this.editEdit(data)\n      this.applySearchFromUrl(false)\n    },\n\n    async onMetadataChanged({ entry, descriptor, value }) {\n      const data = {\n        id: entry.id,\n        data: {\n          [descriptor.field_name]: value\n        }\n      }\n      await this.editEdit(data)\n      this.applySearchFromUrl(false)\n    }\n  },\n\n  watch: {\n    currentProduction() {\n      this.$refs['edit-search-field']?.setValue('')\n      this.$store.commit('SET_EDIT_LIST_SCROLL_POSITION', 0)\n      this.initialLoading = true\n      if (!this.isTVShow) this.reset()\n    },\n\n    currentEpisode() {\n      this.$refs['edit-search-field']?.setValue('')\n      this.$store.commit('SET_EDIT_LIST_SCROLL_POSITION', 0)\n      if (this.isTVShow && this.currentEpisode) this.reset()\n    },\n\n    currentSection() {\n      if (\n        (this.isTVShow && this.edits.length === 0) ||\n        this.edits[0].episode_id !== this.currentEpisode.id\n      ) {\n        this.$refs['edit-search-field'].setValue('')\n        this.$store.commit('SET_EDIT_LIST_SCROLL_POSITION', 0)\n        this.reset()\n      }\n    },\n\n    isEditsLoading() {\n      if (!this.isEditsLoading) {\n        let searchQuery = ''\n        if (this.$route.query.search && this.$route.query.search.length > 0) {\n          searchQuery = `${this.$route.query.search}`\n        }\n        this.initialLoading = false\n        this.$refs['edit-search-field'].setValue(searchQuery)\n        this.$nextTick(() => {\n          this.applySearch(searchQuery)\n        })\n        if (this.$refs['edit-list']) {\n          this.$refs['edit-list'].setScrollPosition(this.editListScrollPosition)\n        }\n      }\n    }\n  },\n\n  head() {\n    if (this.isTVShow) {\n      return {\n        title: `${\n          this.currentProduction ? this.currentProduction.name : ''\n        } - ${\n          this.currentEpisode\n            ? this.currentEpisode.name || this.$t('main.all')\n            : ''\n        } | ${this.$t('edits.title')} - Kitsu`\n      }\n    }\n    return {\n      title: `${this.currentProduction.name} ${this.$t('edits.title')} - Kitsu`\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.data-list {\n  margin-top: 0;\n}\n\n.page-header {\n  margin-bottom: 1em;\n}\n\n.level {\n  align-items: flex-start;\n}\n\n.flexcolumn {\n  align-items: flex-start;\n}\n\n.edits {\n  display: flex;\n  flex-direction: column;\n}\n\n.columns {\n  display: flex;\n  flex-direction: row;\n  padding: 0;\n}\n\n.column {\n  overflow-y: auto;\n  padding: 0;\n}\n\n.combobox-department {\n  margin-bottom: 0;\n}\n</style>\n"],"names":["_sfc_main","modalMixin","TableInfo","mapGetters","mapActions","dateString","formatDate","personId","person","versions","err","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_createElementBlock","_normalizeClass","$props","_createElementVNode","_ctx","_toDisplayString","_hoisted_4","$data","_createCommentVNode","_openBlock","_hoisted_9","_Fragment","_renderList","version","$options","_createVNode","_component_table_info","_imports_0","descriptorMixin","domMixin","formatListMixin","entityListMixin","selectionListMixin","ButtonSimple","DescriptionCell","EntityThumbnail","MetadataHeader","MetadataInput","RowActionsCell","TableHeaderMenu","TableMetadataHeaderMenu","TableMetadataSelectorMenu","ValidationCell","ValidationHeader","columnId","lineIndex","columnIndex","edit","event","selected","editsToSelect","editsFlatten","startEditIndex","displayedEdit","endEditIndex","range","index","position","editId","section","route","i","j","listWidth","listHeight","sticked","preferences","offset","metadataCol","validationCol","_hoisted_16","_hoisted_18","_hoisted_20","_hoisted_21","_hoisted_26","_hoisted_28","_cache","args","_component_table_header_menu","_component_table_metadata_header_menu","$event","_withDirectives","_createBlock","_component_button_simple","descriptor","_component_metadata_header","columnIndexInGrid","_component_validation_header","_component_table_metadata_selector_menu","_createTextVNode","_component_entity_thumbnail","_component_router_link","_withCtx","_hoisted_17","_withModifiers","_hoisted_19","_normalizeStyle","_component_metadata_input","_component_validation_cell","infos","_component_description_cell","value","_hoisted_22","_hoisted_23","_component_row_actions_cell","_hoisted_24","_hoisted_25","_hoisted_27","_hoisted_29","_hoisted_30","searchMixin","entitiesMixin","AddMetadataModal","AddThumbnailsModal","BuildFilterModal","ComboboxDepartment","ComboboxDisplayOptions","CreateTasksModal","DeleteModal","EditEditModal","ImportModal","HardDeleteModal","ImportRenderModal","SearchField","SearchQueryList","SortingInfo","EditHistoryModal","EditList","TaskInfo","finalize","collection","item","edits","editKey","form","descriptorId","d","action","selectionOnly","taskTypeId","projectId","forms","addPreview","newComment","preview","func","taskType","data","mode","csv","results","toUpdate","formData","filename","csvContent","file","clearSelection","searchQuery","scrollPosition","editLines","nameData","moment","name","stringHelpers","headers","sortByName","sortInfo","entry","fieldName","_component_search_field","_component_combobox_department","_component_combobox_display_options","_component_search_query_list","_component_sorting_info","_component_edit_list","_component_task_info","_component_edit_edit_modal","_component_delete_modal","_component_hard_delete_modal","_component_import_render_modal","_component_import_modal","_component_create_tasks_modal","_component_add_metadata_modal","_component_add_thumbnails_modal","_component_edit_history_modal","_component_build_filter_modal"],"mappings":"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"}