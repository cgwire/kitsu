{"version":3,"file":"Schedule-BRfI1kcB.js","sources":["../../src/components/modals/EditMilestoneModal.vue","../../src/components/widgets/Schedule.vue"],"sourcesContent":["<template>\n  <div\n    :class=\"{\n      modal: true,\n      'is-active': active\n    }\"\n  >\n    <div class=\"modal-background\" @click=\"$emit('cancel')\"></div>\n\n    <div class=\"modal-content\">\n      <div class=\"box content\">\n        <h1 class=\"title\" v-if=\"!isEdit\">\n          {{ $t('schedule.milestone.add_milestone') }}:\n          {{ milestoneToEdit.date.format('YYYY-MM-DD') }}\n        </h1>\n        <h1 class=\"title\" v-else>\n          {{ $t('schedule.milestone.edit_milestone') }}:\n          {{ milestoneToEdit.date.format('YYYY-MM-DD') }}\n        </h1>\n        <text-field\n          ref=\"nameField\"\n          :label=\"$t('schedule.milestone.name')\"\n          :maxlength=\"40\"\n          v-model.trim=\"form.name\"\n          @enter=\"confirm\"\n          v-focus\n        />\n        <button-simple\n          class=\"button is-link error\"\n          :text=\"$t('schedule.milestone.delete_milestone')\"\n          @click=\"$emit('remove-milestone', milestoneToEdit)\"\n          v-if=\"isEdit\"\n        />\n        <modal-footer\n          :error-text=\"$t('schedule.milestone.error')\"\n          :is-error=\"isError\"\n          :is-loading=\"isLoading\"\n          :is-disabled=\"!isFormFilled\"\n          @confirm=\"confirm\"\n          @cancel=\"$emit('cancel')\"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n/*\n * Modal used to edit and create milestones.\n */\nimport { modalMixin } from '@/components/modals/base_modal'\n\nimport ButtonSimple from '@/components/widgets/ButtonSimple.vue'\nimport ModalFooter from '@/components/modals/ModalFooter.vue'\nimport TextField from '@/components/widgets/TextField.vue'\n\nexport default {\n  name: 'edit-milestone-modal',\n\n  mixins: [modalMixin],\n\n  components: {\n    ButtonSimple,\n    ModalFooter,\n    TextField\n  },\n\n  props: {\n    active: {\n      type: Boolean,\n      default: false\n    },\n    milestoneToEdit: {\n      type: Object,\n      default: () => {}\n    },\n    isLoading: {\n      type: Boolean,\n      default: false\n    },\n    isError: {\n      type: Boolean,\n      default: false\n    }\n  },\n\n  emits: ['cancel', 'confirm', 'remove-milestone'],\n\n  data() {\n    return {\n      form: {\n        name: ''\n      }\n    }\n  },\n\n  mounted() {\n    this.reset()\n    this.$nextTick(() => {\n      this.$refs.nameField.focus()\n    })\n  },\n\n  computed: {\n    isEdit() {\n      return this.milestoneToEdit.id !== undefined\n    },\n\n    isFormFilled() {\n      return this.form.name.length > 0\n    }\n  },\n\n  methods: {\n    confirm() {\n      return this.$emit('confirm', this.form)\n    },\n\n    reset() {\n      this.form = {\n        id: this.milestoneToEdit.id || undefined,\n        name: this.milestoneToEdit.name || '',\n        date: this.milestoneToEdit.date\n      }\n    }\n  },\n\n  watch: {\n    active() {\n      if (this.active) {\n        this.reset()\n        setTimeout(() => {\n          this.$refs.nameField.focus()\n        }, 1000)\n      }\n    }\n  }\n}\n</script>\n","<template>\n  <div class=\"schedule-wrapper\">\n    <div\n      ref=\"schedule\"\n      class=\"schedule unselectable\"\n      :class=\"`zoom-level-${zoomLevel}`\"\n    >\n      <div\n        ref=\"entity-list\"\n        class=\"entities\"\n        @mousedown=\"startBrowsingY\"\n        @touchstart=\"startBrowsingY\"\n        v-show=\"!hideEntities\"\n      >\n        <div\n          class=\"total-man-days\"\n          :class=\"{\n            'without-milestones': !withMilestones\n          }\"\n        >\n          <div class=\"actions\">\n            <button\n              class=\"button is-small is-link\"\n              :title=\"$t('main.expand_all')\"\n              @click=\"$emit('expand-all')\"\n              v-if=\"showExpandAll\"\n            >\n              <list-chevrons-up-down-icon :size=\"15\" />\n            </button>\n          </div>\n          <span class=\"total-value\" v-if=\"!hideManDays\">\n            {{ formatDuration(totalManDays) }} {{ $t('schedule.md') }}\n          </span>\n        </div>\n\n        <div\n          class=\"entity-name-list\"\n          :class=\"{\n            'without-milestones': !withMilestones\n          }\"\n        >\n          <div\n            :key=\"`entity-${rootElement.id}`\"\n            class=\"timeline-element\"\n            v-for=\"rootElement in hierarchy\"\n          >\n            <div\n              class=\"entity-line entity-name flexrow root\"\n              :class=\"{\n                expanded: rootElement.expanded\n              }\"\n              :style=\"entityLineStyle(rootElement, true, true)\"\n              v-show=\"!hideRoot\"\n            >\n              <span\n                class=\"expand flexrow-item\"\n                :style=\"{\n                  color: isDarkTheme ? '#EEE' : '#999',\n                  'margin-top': '4px'\n                }\"\n                @click=\"expandRootElement(rootElement)\"\n              >\n                <chevron-right-icon v-if=\"!rootElement.expanded\" />\n                <chevron-down-icon v-else />\n              </span>\n              <span class=\"avatar flexrow-item\" v-if=\"rootElement.avatar\">\n                <production-name\n                  :production=\"rootElement\"\n                  :only-avatar=\"true\"\n                  :size=\"30\"\n                  v-if=\"rootElement.type === 'Project'\"\n                />\n                <people-avatar\n                  :person=\"rootElement\"\n                  :is-link=\"false\"\n                  :font-size=\"14\"\n                  :size=\"28\"\n                  v-else\n                />\n              </span>\n              <span\n                class=\"filler flexrow-item root-element-name ellipsis\"\n                :style=\"{\n                  'border-left': rootElement.avatar\n                    ? null\n                    : `4px solid ${rootElement.color}`\n                }\"\n                :title=\"rootElement.name\"\n              >\n                {{ rootElement.name }}\n              </span>\n              <department-name\n                class=\"ml05\"\n                :department=\"departmentMap.get(departmentId)\"\n                :key=\"departmentId\"\n                no-padding\n                only-dot\n                v-for=\"departmentId in rootElement.departments\"\n              />\n              <router-link\n                class=\"root-element-link flexrow-item\"\n                :title=\"rootElement.name\"\n                :to=\"rootElement.route\"\n                v-if=\"rootElement.route\"\n              >\n                <link-icon :size=\"12\" v-if=\"rootElement.route\" />\n              </router-link>\n              <input\n                class=\"man-day-input flexrow-item mr1\"\n                type=\"number\"\n                step=\"any\"\n                placeholder=\"0\"\n                @input=\"\n                  $emit('estimation-changed', {\n                    days: $event.target.valueAsNumber || 0,\n                    item: rootElement,\n                    daysOff: rootElement.daysOff\n                  })\n                \"\n                v-if=\"\n                  !rootElement.avatar && rootElement.editable && !hideManDays\n                \"\n                :value=\"formatDuration(rootElement.man_days, false)\"\n              />\n              <span\n                class=\"man-days-unit flexrow-item\"\n                v-if=\"\n                  !rootElement.avatar && rootElement.editable && !hideManDays\n                \"\n              >\n                {{ $t('schedule.md') }}\n              </span>\n              <span\n                class=\"man-days-unit flexrow-item\"\n                v-if=\"\n                  (rootElement.avatar || !rootElement.editable) && !hideManDays\n                \"\n              >\n                {{ formatDuration(rootElement.man_days) }}\n                {{ $t('schedule.md') }}\n              </span>\n            </div>\n\n            <div\n              class=\"children\"\n              :class=\"{ mb0: hideRoot }\"\n              :style=\"childrenStyle(rootElement, multiline, true)\"\n              v-if=\"rootElement.expanded\"\n            >\n              <div class=\"children-loader\" v-if=\"rootElement.loading\">\n                <spinner class=\"child-spinner\" :size=\"20\" />\n              </div>\n              <template v-else-if=\"subchildren\">\n                <div\n                  :key=\"childElement.id\"\n                  :style=\"childNameStyle(rootElement, index)\"\n                  class=\"child\"\n                  v-for=\"(childElement, index) in rootElement.children\"\n                >\n                  <div class=\"child-name\">\n                    <span\n                      class=\"entity-line entity-name child-line\"\n                      style=\"background: none\"\n                    >\n                      <span class=\"filler\">\n                        {{ childElement.name }}\n                      </span>\n                    </span>\n                  </div>\n                  <div\n                    :key=\"personId\"\n                    v-for=\"[personId] in childElement.children\"\n                    :style=\"{\n                      height: `${40 * getNbLines(childElement.children.get(personId))}px`\n                    }\"\n                    class=\"subchild-label\"\n                  >\n                    <people-avatar\n                      :person=\"rootElement.people[personId]\"\n                      :is-link=\"false\"\n                      :font-size=\"14\"\n                      :size=\"28\"\n                    />\n                    {{ rootElement.people[personId].full_name }}\n                  </div>\n                </div>\n              </template>\n              <template v-else-if=\"!multiline\">\n                <div\n                  class=\"child-name\"\n                  :key=\"`entity-${childElement.id}`\"\n                  v-for=\"(childElement, j) in rootElement.children\"\n                >\n                  <div\n                    class=\"entity-line entity-name child-line flexrow\"\n                    :style=\"childNameStyle(rootElement, j)\"\n                  >\n                    <router-link\n                      class=\"filler flexrow-item child-element-name ellipsis-2-lines\"\n                      :title=\"childElement.name\"\n                      :to=\"childElement.route\"\n                      v-if=\"childElement.route\"\n                    >\n                      {{ childElement.name }}\n                    </router-link>\n                    <span\n                      class=\"filler flexrow-item ellipsis-2-lines\"\n                      :title=\"childElement.name\"\n                      v-else\n                    >\n                      {{ childElement.name }}\n                    </span>\n                    <span\n                      class=\"flexrow flexrow-item man-days-unit-wrapper\"\n                      v-if=\"childElement.editable && !hideManDays\"\n                    >\n                      <input\n                        class=\"flexrow-item man-days-unit\"\n                        type=\"number\"\n                        min=\"0\"\n                        placeholder=\"0\"\n                        step=\"any\"\n                        @input=\"\n                          onChildEstimationChanged(\n                            $event,\n                            childElement,\n                            rootElement\n                          )\n                        \"\n                        :value=\"formatDuration(childElement.man_days, false)\"\n                      />\n                      {{ $t('schedule.md') }}\n                    </span>\n                    <span class=\"man-days-unit flexrow-item\" v-else>\n                      {{ formatDuration(childElement.man_days) }}\n                      {{ $t('schedule.md') }}\n                    </span>\n                  </div>\n                </div>\n              </template>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"timeline\" ref=\"timeline\">\n        <div\n          ref=\"timeline-header\"\n          class=\"timeline-header\"\n          :class=\"{\n            'without-milestones': !withMilestones\n          }\"\n          @mousedown=\"startBrowsingX\"\n          @touchstart=\"startBrowsingX\"\n          v-if=\"zoomLevel > 0\"\n        >\n          <div\n            class=\"day\"\n            :class=\"{\n              'without-milestones': !withMilestones,\n              'new-week': day.newWeek\n            }\"\n            :key=\"`header-${day.text}-${index}`\"\n            v-for=\"(day, index) in daysAvailable\"\n          >\n            <div\n              class=\"milestone pointer\"\n              @click=\"showEditMilestoneModal(day, currentMilestones[day.text])\"\n              v-if=\"currentMilestones[day.text] && withMilestones\"\n            >\n              <div class=\"milestone-tooltip\">\n                {{ currentMilestones[day.text].name }}\n              </div>\n              <div class=\"bull\">&bull;</div>\n            </div>\n            <div class=\"milestone\" v-else-if=\"withMilestones\">\n              <div class=\"bull\">&nbsp;</div>\n            </div>\n\n            <div\n              :class=\"{\n                'with-milestones': withMilestones && isCurrentUserManager,\n                'date-widget': true\n              }\"\n            >\n              <div class=\"date-name\">\n                <span class=\"month-name\" v-if=\"day.newMonth\">\n                  {{ day.monthText }}\n                </span>\n                <span class=\"week-number\" v-if=\"day.newWeek\">\n                  {{ day.weekNumber }}\n                </span>\n                <div :class=\"dayClass(day, index)\">\n                  <span v-if=\"zoomLevel > 2\"> {{ day.dayText }} / </span>\n                  <span class=\"day-number\">\n                    <briefcase-icon\n                      class=\"day-off-icon\"\n                      :size=\"14\"\n                      v-if=\"day.off\"\n                    />\n                    {{ day.dayNumber }}\n                  </span>\n                </div>\n              </div>\n              <div\n                class=\"add-milestone\"\n                :title=\"addMilestoneTitle(day)\"\n                @click=\"\n                  showEditMilestoneModal(day, currentMilestones[day.text])\n                \"\n                v-if=\"withMilestones && isCurrentUserManager\"\n              >\n                <span class=\"button\">\n                  <edit-icon :size=\"10\" v-if=\"currentMilestones[day.text]\" />\n                  <plus-icon :size=\"12\" :stroke-width=\"3\" v-else />\n                </span>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div\n          ref=\"timeline-header\"\n          class=\"timeline-header\"\n          :class=\"{\n            'without-milestones': !withMilestones\n          }\"\n          @mousedown=\"startBrowsingX\"\n          @touchstart=\"startBrowsingX\"\n          v-else\n        >\n          <div\n            class=\"day week\"\n            :class=\"{\n              'without-milestones': !withMilestones\n            }\"\n            :key=\"`header-${week.weekText}-${index}`\"\n            :title=\"week.label\"\n            v-for=\"(week, index) in weeksAvailable\"\n          >\n            <div\n              :class=\"{\n                'hidden-milestones': withMilestones\n              }\"\n            >\n              <div class=\"date-name\">\n                <span class=\"month-name\" v-if=\"week.newMonth\">\n                  {{ week.monthText }}\n                </span>\n                <span class=\"week-number\"> &nbsp; </span>\n                <div :class=\"dayClass(week, index)\">\n                  <span class=\"day-number\">\n                    {{ week.weekNumber }}\n                  </span>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div\n          ref=\"timeline-content-wrapper\"\n          class=\"timeline-content-wrapper\"\n          @scroll.passive=\"onTimelineScroll\"\n        >\n          <div\n            ref=\"timeline-content\"\n            class=\"timeline-content\"\n            :style=\"timelineStyle\"\n            @mousedown=\"startBrowsing\"\n            @touchstart=\"startBrowsing\"\n          >\n            <div\n              ref=\"timeline-sub-start\"\n              class=\"sub-zone\"\n              :style=\"timelineSubStartStyle\"\n              v-if=\"subStartDate\"\n            ></div>\n\n            <div\n              ref=\"timeline-sub-end\"\n              class=\"sub-zone\"\n              :style=\"timelineSubEndStyle\"\n              v-if=\"subEndDate\"\n            ></div>\n\n            <div\n              ref=\"timeline-today-position\"\n              class=\"timeline-position today\"\n              :style=\"timelineTodayPositionStyle\"\n            ></div>\n            <div\n              ref=\"timeline-position\"\n              class=\"timeline-position\"\n              :style=\"timelinePositionStyle\"\n              v-show=\"!isChangeDates\"\n            ></div>\n            <template v-if=\"withMilestones && !isWeekMode\">\n              <div\n                class=\"milestone-vertical-line\"\n                :style=\"milestoneLineStyle(milestone)\"\n                :key=\"`milestone-${milestone.date}`\"\n                v-for=\"milestone in Object.values(currentMilestones)\"\n              ></div>\n            </template>\n            <div\n              class=\"timeline-element\"\n              :data-id=\"rootElement.id\"\n              :key=\"`entity-line-${rootElement.id}`\"\n              v-for=\"rootElement in hierarchy\"\n            >\n              <div\n                class=\"day-off\"\n                :class=\"{\n                  'day-off-sub-zone':\n                    subStartDate?.diff(dayOff.date, 'days') > 0 ||\n                    subEndDate?.diff(dayOff.date, 'days') < 0\n                }\"\n                :key=\"`dayoff-${dayOff.id}-${index}`\"\n                :style=\"dayOffStyle(dayOff)\"\n                :title=\"dayOff.description\"\n                v-for=\"(dayOff, index) in getDayOffRange(rootElement.daysOff)\"\n              >\n                <briefcase-icon class=\"day-off-icon\" :size=\"14\" />\n              </div>\n              <div\n                class=\"entity-line root-element\"\n                :style=\"entityLineStyle(rootElement, true)\"\n                v-show=\"!hideRoot\"\n              >\n                <div\n                  class=\"timebar-wrapper\"\n                  :class=\"{\n                    thinner: multiline\n                  }\"\n                  :title=\"`${rootElement.name} (${rootElement.startDate?.format('YYYY-MM-DD')} - ${rootElement.endDate?.format('YYYY-MM-DD')})`\"\n                  :style=\"timebarStyle(rootElement, true)\"\n                >\n                  <div\n                    class=\"timebar\"\n                    v-show=\"isVisible(rootElement)\"\n                    @click=\"$emit('root-element-selected', rootElement)\"\n                    v-if=\"rootElement.editable\"\n                  >\n                    <div\n                      class=\"timebar-left-hand\"\n                      @mousedown=\"moveTimebarLeftSide(rootElement, $event)\"\n                      @touchstart=\"moveTimebarLeftSide(rootElement, $event)\"\n                    ></div>\n                    <div\n                      class=\"timebar-center\"\n                      @mousedown=\"moveTimebar(rootElement, $event)\"\n                      @touchstart=\"moveTimebar(rootElement, $event)\"\n                    ></div>\n                    <div\n                      class=\"timebar-right-hand\"\n                      @mousedown=\"moveTimebarRightSide(rootElement, $event)\"\n                      @touchstart=\"moveTimebarRightSide(rootElement, $event)\"\n                    ></div>\n                  </div>\n                </div>\n              </div>\n\n              <div\n                class=\"children\"\n                :style=\"childrenStyle(rootElement, multiline)\"\n                v-if=\"rootElement.expanded && rootElement.loading\"\n              >\n                <div class=\"children-loader\">\n                  <spinner class=\"child-spinner\" :size=\"20\" />\n                </div>\n              </div>\n\n              <div\n                class=\"children\"\n                :class=\"{ 'drop-item-target': reassignable && multiline }\"\n                :data-root-element-id=\"rootElement.id\"\n                :style=\"childrenStyle(rootElement, multiline)\"\n                v-else-if=\"rootElement.expanded\"\n                @dragenter=\"onTaskDragEnter($event, rootElement)\"\n                @dragover=\"onTaskDragOver\"\n                @dragleave=\"onTaskDragLeave\"\n                @drop=\"onTaskDrop($event, rootElement)\"\n              >\n                <div\n                  class=\"entity-line child-line hidden\"\n                  v-if=\"invertLinesColor\"\n                >\n                  <!-- to invert odd/event line color -->\n                </div>\n                <div\n                  class=\"entity-line child-line\"\n                  :class=\"{ multiline }\"\n                  :key=\"`entity-line-${childElement.id}`\"\n                  :style=\"{\n                    ...(multiline && timelineMultilineStyle(childElement)),\n                    ...(subchildren && timelineSubchildrenStyle(childElement))\n                  }\"\n                  v-for=\"childElement in rootElement.children\"\n                  v-show=\"!rootElement.loading\"\n                >\n                  <template v-if=\"withStatuses\">\n                    <span\n                      class=\"status-date status-date-wip\"\n                      :class=\"{\n                        'status-date-gap':\n                          childElement.real_start_date.slice(0, 10) ===\n                            childElement.end_date?.slice(0, 10) ||\n                          childElement.real_start_date.slice(0, 10) ===\n                            childElement.done_date?.slice(0, 10)\n                      }\"\n                      :style=\"dateStatusStyle(childElement.real_start_date)\"\n                      :title=\"statuses.wip.name\"\n                      v-if=\"childElement.real_start_date\"\n                    >\n                    </span>\n                    <span\n                      class=\"status-date status-date-wfa\"\n                      :class=\"{\n                        'status-date-gap':\n                          childElement.end_date.slice(0, 10) ===\n                            childElement.real_start_date?.slice(0, 10) ||\n                          childElement.end_date.slice(0, 10) ===\n                            childElement.done_date?.slice(0, 10)\n                      }\"\n                      :style=\"dateStatusStyle(childElement.end_date)\"\n                      :title=\"statuses.wfa.name\"\n                      v-if=\"childElement.end_date\"\n                    >\n                    </span>\n                    <span\n                      class=\"status-date status-date-done\"\n                      :class=\"{\n                        'status-date-gap':\n                          childElement.done_date.slice(0, 10) ===\n                            childElement.real_start_date?.slice(0, 10) ||\n                          childElement.done_date.slice(0, 10) ===\n                            childElement.end_date?.slice(0, 10)\n                      }\"\n                      :style=\"dateStatusStyle(childElement.done_date)\"\n                      :title=\"statuses.done.name\"\n                      v-if=\"childElement.done_date\"\n                    >\n                    </span>\n                  </template>\n\n                  <template v-if=\"withTimesheets && rootElement.timesheet\">\n                    <div\n                      class=\"timesheet\"\n                      :style=\"\n                        timesheetStyle(\n                          timesheet,\n                          childElement,\n                          rootElement,\n                          withEstimations\n                        )\n                      \"\n                      :title=\"`${formatDuration(timesheet.duration)} ${isDurationInHours ? $tc('main.hours_spent', formatDuration(timesheet.duration, false)) : $tc('main.days_spent', formatDuration(timesheet.duration, false))}`\"\n                      :key=\"timesheet.id\"\n                      v-for=\"timesheet in rootElement.timesheet.filter(\n                        ({ task_id }) => task_id === childElement.id\n                      )\"\n                    ></div>\n                  </template>\n\n                  <div\n                    class=\"timebar timebar-ghost timebar-ghost-before\"\n                    :title=\"`${childElement.previousElement.name} (${childElement.previousElement.startDate.format('YYYY-MM-DD')} - ${childElement.previousElement.endDate.format('YYYY-MM-DD')})`\"\n                    :class=\"{\n                      'with-timesheets': withTimesheets\n                    }\"\n                    :style=\"\n                      timebarChildStyle(\n                        childElement.previousElement,\n                        rootElement,\n                        multiline,\n                        50\n                      )\n                    \"\n                    v-if=\"withGhosts && childElement.previousElement\"\n                  ></div>\n\n                  <div\n                    class=\"timebar timebar-ghost timebar-ghost-after\"\n                    :title=\"`${childElement.nextElement.name} (${childElement.nextElement.startDate.format('YYYY-MM-DD')} - ${childElement.nextElement.endDate.format('YYYY-MM-DD')})`\"\n                    :class=\"{\n                      'with-timesheets': withTimesheets\n                    }\"\n                    :style=\"\n                      timebarChildStyle(\n                        childElement.nextElement,\n                        rootElement,\n                        multiline,\n                        50\n                      )\n                    \"\n                    v-if=\"withGhosts && childElement.nextElement\"\n                  ></div>\n\n                  <div\n                    class=\"timebar\"\n                    :class=\"{\n                      selected: isSelected(childElement),\n                      'timebar-subchildren': subchildren,\n                      'with-timesheets': withTimesheets,\n                      invalid: isOverlapping(childElement)\n                    }\"\n                    :title=\"`${multiline && childElement.project_name ? `${childElement.project_name} - ` : ''}${childElement.name} (${childElement.startDate.format('YYYY-MM-DD')} - ${childElement.endDate.format('YYYY-MM-DD')})`\"\n                    :style=\"\n                      timebarChildStyle(\n                        childElement,\n                        rootElement,\n                        multiline,\n                        withTimesheets && 25,\n                        isDarkTheme ? 'black' : 'white'\n                      )\n                    \"\n                    v-show=\"subchildren || isVisible(childElement)\"\n                    @click=\"$emit('item-selected', rootElement, childElement)\"\n                    v-if=\"withEstimations\"\n                  >\n                    <div\n                      class=\"timebar-left-hand\"\n                      @mousedown=\"moveTimebarLeftSide(childElement, $event)\"\n                      @touchstart=\"moveTimebarLeftSide(childElement, $event)\"\n                      v-if=\"\n                        !isChangeDates &&\n                        selection.length === 1 &&\n                        isSelected(childElement) &&\n                        childElement.editable &&\n                        !childElement.unresizable\n                      \"\n                    ></div>\n                    <div\n                      class=\"timebar-center\"\n                      :class=\"{\n                        ellipsis: multiline || subchildren,\n                        'has-text-centered': subchildren\n                      }\"\n                      @mousedown=\"moveTimebar(childElement, $event)\"\n                      @touchstart=\"moveTimebar(childElement, $event)\"\n                    >\n                      <template v-if=\"multiline && childElement.project_name\">\n                        <b>{{ childElement.project_name }}</b>\n                        <br />\n                      </template>\n                      <template v-if=\"multiline || subchildren\">\n                        {{ childElement.name }}\n                      </template>\n                    </div>\n                    <div\n                      class=\"timebar-right-hand\"\n                      @mousedown=\"moveTimebarRightSide(childElement, $event)\"\n                      @touchstart=\"moveTimebarRightSide(childElement, $event)\"\n                      v-if=\"\n                        !isChangeDates &&\n                        selection.length === 1 &&\n                        isSelected(childElement) &&\n                        childElement.editable &&\n                        !childElement.unresizable\n                      \"\n                    ></div>\n                  </div>\n\n                  <div\n                    v-if=\"subchildren && childElement.children.size\"\n                    class=\"subchildren\"\n                  >\n                    <div\n                      :key=\"personId\"\n                      v-for=\"[personId, subchild] in childElement.children\"\n                      :style=\"{\n                        height: `${40 * getNbLines(subchild)}px`\n                      }\"\n                      class=\"subchild\"\n                      :class=\"{ 'drop-item-target': reassignable }\"\n                      :data-entity-type-id=\"childElement.object_id\"\n                      :data-person-id=\"personId\"\n                    >\n                      <div\n                        class=\"day-off\"\n                        :key=\"`dayoff-${dayOff.id}-${index}`\"\n                        :style=\"dayOffStyle(dayOff)\"\n                        :title=\"dayOff.description\"\n                        v-for=\"(dayOff, index) in getDayOffRange(\n                          rootElement.people[personId].daysOff\n                        )\"\n                      >\n                        <briefcase-icon class=\"day-off-icon\" :size=\"14\" />\n                      </div>\n                      <div\n                        class=\"timebar\"\n                        :class=\"{ selected: isSelected(task) }\"\n                        :key=\"index\"\n                        :style=\"timebarSubchildStyle(task, rootElement)\"\n                        :title=\"timebarSubchildTitle(task)\"\n                        v-for=\"(task, index) in subchild\"\n                      >\n                        <div\n                          class=\"timebar-left-hand\"\n                          @mousedown=\"moveTimebarLeftSide(task, $event)\"\n                          @touchstart=\"moveTimebarLeftSide(task, $event)\"\n                          v-if=\"\n                            !isChangeDates &&\n                            selection.length === 1 &&\n                            isSelected(task) &&\n                            task.editable &&\n                            !task.unresizable\n                          \"\n                        ></div>\n                        <div\n                          class=\"timebar-center ellipsis\"\n                          @mousedown=\"moveTimebar(task, $event)\"\n                          @touchstart=\"moveTimebar(task, $event)\"\n                          @click=\"\n                            $emit(\n                              'task-selected',\n                              rootElement,\n                              childElement,\n                              task,\n                              selection\n                            )\n                          \"\n                        >\n                          {{ task.entity.name }}\n                        </div>\n                        <div\n                          class=\"timebar-right-hand\"\n                          @mousedown=\"moveTimebarRightSide(task, $event)\"\n                          @touchstart=\"moveTimebarRightSide(task, $event)\"\n                          v-if=\"\n                            !isChangeDates &&\n                            selection.length === 1 &&\n                            isSelected(task) &&\n                            task.editable &&\n                            !task.unresizable\n                          \"\n                        ></div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <edit-milestone-modal\n      active\n      :is-loading=\"loading.edit\"\n      :is-error=\"errors.edit\"\n      :milestone-to-edit=\"milestoneToEdit\"\n      @confirm=\"confirmEditMilestone\"\n      @cancel=\"hideEditMilestoneModal\"\n      @remove-milestone=\"removeMilestone\"\n      v-if=\"withMilestones && modals.edit\"\n    />\n  </div>\n</template>\n\n<script>\n/*\n * Component to facilitate the build of schedule pages.\n */\nimport {\n  BriefcaseIcon,\n  ChevronDownIcon,\n  ChevronRightIcon,\n  EditIcon,\n  LinkIcon,\n  ListChevronsUpDownIcon,\n  PlusIcon\n} from 'lucide-vue-next'\nimport moment from 'moment-timezone'\nimport { mapGetters, mapActions } from 'vuex'\n\nimport { domMixin } from '@/components/mixins/dom'\nimport { formatListMixin } from '@/components/mixins/format'\n\nimport colors from '@/lib/colors'\nimport {\n  addBusinessDays,\n  daysToMinutes,\n  formatFullDate,\n  getBusinessDays,\n  getDayOffRange,\n  minutesToDays,\n  parseDate\n} from '@/lib/time'\n\nimport DepartmentName from '@/components/widgets/DepartmentName.vue'\nimport EditMilestoneModal from '@/components/modals/EditMilestoneModal.vue'\nimport PeopleAvatar from '@/components/widgets/PeopleAvatar.vue'\nimport ProductionName from '@/components/widgets/ProductionName.vue'\nimport Spinner from '@/components/widgets/Spinner.vue'\n\nexport default {\n  name: 'schedule',\n\n  mixins: [domMixin, formatListMixin],\n\n  components: {\n    BriefcaseIcon,\n    ChevronDownIcon,\n    ChevronRightIcon,\n    DepartmentName,\n    EditIcon,\n    EditMilestoneModal,\n    LinkIcon,\n    ListChevronsUpDownIcon,\n    PeopleAvatar,\n    PlusIcon,\n    ProductionName,\n    Spinner\n  },\n\n  data() {\n    return {\n      currentElement: null,\n      selection: [],\n      isBrowsingX: false,\n      isBrowsingY: false,\n      isChangeDates: false,\n      isChangeStartDate: false,\n      isChangeEndDate: false,\n      milestoneToEdit: {\n        date: moment()\n      },\n      errors: {\n        edit: false\n      },\n      modals: {\n        edit: false\n      },\n      loading: {\n        edit: false\n      },\n      domEvents: [\n        ['mousemove', this.onMouseMove],\n        ['touchmove', this.onMouseMove],\n        ['mouseup', this.stopBrowsing],\n        ['mouseleave', this.stopBrowsing],\n        ['touchend', this.stopBrowsing],\n        ['touchcancel', this.stopBrowsing],\n        ['resize', this.resetScheduleSize]\n      ]\n    }\n  },\n\n  props: {\n    daysOff: {\n      type: Array,\n      default: () => []\n    },\n    draggedItems: {\n      type: Array,\n      default: () => []\n    },\n    endDate: {\n      type: Object,\n      required: true\n    },\n    isError: {\n      type: Boolean,\n      default: false\n    },\n    isLoading: {\n      type: Boolean,\n      default: true\n    },\n    hideEntities: {\n      type: Boolean,\n      default: false\n    },\n    hideManDays: {\n      type: Boolean,\n      default: false\n    },\n    hierarchy: {\n      default: () => [],\n      type: Array\n    },\n    invertLinesColor: {\n      type: Boolean,\n      default: false\n    },\n    showExpandAll: {\n      type: Boolean,\n      default: false\n    },\n    subEndDate: {\n      type: Object,\n      default: null\n    },\n    subStartDate: {\n      type: Object,\n      default: null\n    },\n    startDate: {\n      type: Object,\n      required: true\n    },\n    isEstimationLinked: {\n      type: Boolean,\n      default: false\n    },\n    withMilestones: {\n      type: Boolean,\n      default: true\n    },\n    withEstimations: {\n      type: Boolean,\n      default: true\n    },\n    withGhosts: {\n      type: Boolean,\n      default: false\n    },\n    withStatuses: {\n      type: Boolean,\n      default: false\n    },\n    withTimesheets: {\n      type: Boolean,\n      default: false\n    },\n    hideRoot: {\n      type: Boolean,\n      default: false\n    },\n    zoomLevel: {\n      type: Number,\n      default: 2\n    },\n    multiline: {\n      type: Boolean,\n      default: false\n    },\n    subchildren: {\n      type: Boolean,\n      default: false\n    },\n    reassignable: {\n      type: Boolean,\n      default: false\n    },\n    type: {\n      type: String,\n      validator: value => ['prev', 'real'].includes(value)\n    }\n  },\n\n  emits: [\n    'estimation-changed',\n    'expand-all',\n    'item-assign',\n    'item-changed',\n    'item-drop',\n    'item-selected',\n    'item-unassign',\n    'root-element-expanded',\n    'root-element-selected',\n    'scroll',\n    'task-selected',\n    'task-unselected'\n  ],\n\n  mounted() {\n    this.resetScheduleSize()\n    this.addEvents(this.domEvents)\n  },\n\n  beforeUnmount() {\n    this.removeEvents(this.domEvents)\n    document.body.style.cursor = 'default'\n  },\n\n  computed: {\n    ...mapGetters([\n      'currentProduction',\n      'departmentMap',\n      'isCurrentUserManager',\n      'isDarkTheme',\n      'milestones',\n      'openProductions',\n      'organisation',\n      'taskMap',\n      'taskStatuses'\n    ]),\n\n    statuses() {\n      return {\n        wip: this.taskStatuses.find(status => status.is_wip) ?? {},\n        wfa: this.taskStatuses.find(status => status.is_feedback_request) ?? {},\n        done: this.taskStatuses.find(status => status.is_done) ?? {}\n      }\n    },\n\n    currentMilestones() {\n      const localMilestones = {}\n      Object.keys(this.milestones).forEach(key => {\n        if (this.displayedDaysIndex[key]) {\n          localMilestones[key] = this.milestones[key]\n        }\n      })\n      return localMilestones\n    },\n\n    cellWidth() {\n      const cellWidthByLevel = [20, 20, 40, 60, 120]\n      return cellWidthByLevel[this.zoomLevel] || 20\n    },\n\n    daysAvailable() {\n      const days = []\n      let day = this.startDate.clone().utc().startOf('day')\n      const endDate = this.endDate.clone().utc().startOf('day')\n      const daysOff = this.getDayOffRange(this.daysOff).map(\n        dayOff => dayOff.date\n      )\n\n      while (day.isSameOrBefore(endDate)) {\n        day.off = daysOff.includes(day.toISOString().slice(0, 10))\n        day.newWeek = day.isoWeekday() === 1\n        day.newMonth = day.date() === 1\n        day.weekend = [6, 7].includes(day.isoWeekday())\n        day.weekNumber = day.week()\n        day.text = day.format('YYYY-MM-DD')\n        day.monthText = day.format('MMMM YY')\n        day.dayNumber = day.format('DD')\n        day.dayText = day.format('ddd')[0]\n        days.push(day)\n        day = day.clone().add(1, 'days')\n      }\n\n      // always show month and week number at start of schedule\n      if (days.length) {\n        const indexNextMonth = days.findIndex(day => day.newMonth)\n        if (indexNextMonth >= 5 || indexNextMonth === -1) {\n          days[0].newMonth = true\n        }\n        const indexNextWeek = days.findIndex(day => day.newWeek)\n        if (indexNextWeek === -1) {\n          days[0].newWeek = true\n        }\n      }\n      return days\n    },\n\n    weeksAvailable() {\n      const weeks = []\n      if (this.daysAvailable.length < 1) return []\n      const startDate = this.daysAvailable[0]\n      const endDate = this.daysAvailable[this.daysAvailable.length - 1]\n      const day = startDate.clone().add(-1, 'days')\n      let dayDate = day.toDate()\n      const endDayDate = endDate.clone().add(7, 'days').toDate()\n      dayDate.weekday = day.isoWeekday()\n      dayDate.monthday = day.month()\n      dayDate.week = day.week()\n\n      while (dayDate < endDayDate) {\n        const nextDay = new Date(Number(dayDate))\n        nextDay.setDate(dayDate.getDate() + 1) // Add 1 day\n        if (nextDay.isoweekday > 7) {\n          nextDay.isoweekday = 1\n          nextDay.newWeek = true\n        }\n        nextDay.monthday = dayDate.monthday + 1\n        if (nextDay.getMonth() !== dayDate.getMonth()) {\n          nextDay.newMonth = true\n          nextDay.monthday = 1\n        }\n        const momentDay = parseDate(moment(nextDay).format('YYYY-MM-DD'))\n        if (momentDay.isoWeekday() === 1) {\n          momentDay.weekText = momentDay.format('YYYY-MM-DD')\n          momentDay.label = `${momentDay.weekText} to ${momentDay\n            .clone()\n            .add(6, 'days')\n            .format('YYYY-MM-DD')}`\n          momentDay.weekNumber = momentDay.week()\n          momentDay.newMonth =\n            weeks.length === 0 ||\n            momentDay.month() !== weeks[weeks.length - 1].month()\n          momentDay.monthText = momentDay.format('MMMM YY')\n          weeks.push(momentDay)\n        }\n        dayDate = nextDay\n      }\n      return weeks\n    },\n\n    displayedDays() {\n      return this.daysAvailable\n    },\n\n    displayedDaysIndex() {\n      let index = 0\n      const dayIndex = {}\n      this.displayedDays.forEach(d => {\n        dayIndex[d.text] = index\n        index++\n      })\n      return dayIndex\n    },\n\n    displayedWeeksIndex() {\n      let index = 0\n      const weekIndex = {}\n      this.weeksAvailable.forEach(w => {\n        weekIndex[w.weekText] = index\n        index++\n      })\n      return weekIndex\n    },\n\n    isRealSchedule() {\n      return this.type === 'real'\n    },\n\n    totalManDays() {\n      return this.hierarchy.reduce(\n        (acc, timeElement) => acc + (timeElement.man_days || 0),\n        0\n      )\n    },\n\n    // References\n\n    entityList() {\n      return this.$refs['entity-list']\n    },\n\n    schedule() {\n      return this.$refs.schedule\n    },\n\n    timeline() {\n      return this.$refs.timeline\n    },\n\n    timelineContent() {\n      return this.$refs['timeline-content']\n    },\n\n    timelineContentWrapper() {\n      return this.$refs['timeline-content-wrapper']\n    },\n\n    timelineHeader() {\n      return this.$refs['timeline-header']\n    },\n\n    timelinePosition() {\n      return this.$refs['timeline-position']\n    },\n\n    // Styles\n\n    timelineStyle() {\n      const firstDay = this.daysAvailable[0]\n      const multiplier = firstDay ? -1 * (firstDay.isoWeekday() - 1) : 0\n      return {\n        'background-position-x': `${multiplier * this.cellWidth}px`\n      }\n    },\n\n    timelinePositionStyle() {\n      return { width: `${this.cellWidth}px` }\n    },\n\n    timelineTodayPositionStyle() {\n      const today = moment().utc(true)\n      const isVisible =\n        today.isAfter(this.startDate) && today.isBefore(this.endDate)\n      return {\n        width: `${this.cellWidth}px`,\n        left: `${this.getTimebarLeft({ startDate: today }) - 3}px`,\n        display: isVisible ? 'block' : 'none'\n      }\n    },\n\n    timelineSubStartStyle() {\n      const diff = Math.max(this.dateDiff(this.startDate, this.subStartDate), 0)\n      return {\n        left: 0,\n        width: `${this.cellWidth * diff}px`\n      }\n    },\n\n    timelineSubEndStyle() {\n      const diff = Math.max(\n        this.dateDiff(this.subEndDate, this.endDate) - 1, // end date must available\n        0\n      )\n      return {\n        right: 0,\n        width: `${this.cellWidth * diff}px`\n      }\n    },\n\n    dayAfterEndDate() {\n      return this.endDate.clone().add(1, 'days')\n    },\n\n    isWeekMode() {\n      return this.zoomLevel === 0\n    },\n\n    unitOfTime() {\n      return this.zoomLevel > 0 ? 'days' : 'weeks'\n    }\n  },\n\n  methods: {\n    ...mapActions(['deleteMilestone', 'loadMilestones', 'saveMilestone']),\n\n    getDayOffRange,\n\n    getNbSubChildren(children) {\n      if (!children) return 0\n\n      return Object.values(children).reduce((acc, subChildren) => {\n        return acc + subChildren.length\n      }, 0)\n    },\n\n    getNbLines(items = []) {\n      const values = items.map(item => item.line || 0)\n      return values.length ? Math.max(...values) + 1 : 1\n    },\n\n    refreshAllItemPositions() {\n      this.hierarchy.forEach(rootElement => {\n        if (rootElement.expanded) {\n          this.refreshItemPositions(rootElement)\n        }\n      })\n    },\n\n    refreshItemPositions(rootElement) {\n      if (!rootElement?.children) {\n        return\n      }\n\n      if (this.multiline) {\n        setItemPositions(rootElement.children, this.unitOfTime)\n      }\n\n      if (this.subchildren) {\n        rootElement.children.forEach(childElement => {\n          if (childElement.children) {\n            childElement.children.forEach(subchildElement => {\n              setItemPositions(subchildElement, this.unitOfTime)\n            })\n          } else {\n            setItemPositions(childElement, this.unitOfTime)\n          }\n        })\n      }\n    },\n\n    refreshManDays(rootElement) {\n      if (this.hideManDays || !rootElement?.children?.length) {\n        return\n      }\n\n      rootElement.man_days = rootElement.children.reduce(\n        (acc, child) => acc + (child.man_days || 0),\n        0\n      )\n    },\n\n    isVisible(timeElement) {\n      const isStartDateOk = timeElement.startDate.isSameOrAfter(this.startDate)\n      const isEndDateOk = timeElement.endDate.isSameOrBefore(\n        this.dayAfterEndDate\n      )\n      return isStartDateOk && isEndDateOk\n    },\n\n    resetScheduleSize() {\n      if (this.timelineContent) {\n        if (this.zoomLevel > 0) {\n          this.timelineContent.style.width = `${this.displayedDays.length * this.cellWidth}px`\n        } else {\n          this.timelineContent.style.width = `${this.weeksAvailable.length * this.cellWidth}px`\n        }\n      }\n    },\n\n    onMouseMove(event) {\n      if (this.isChangeStartDate) {\n        this.changeStartDate(event)\n      } else if (this.isChangeEndDate) {\n        this.changeEndDate(event)\n      } else if (this.isChangeDates) {\n        this.changeDates(event)\n      } else {\n        if (this.isBrowsingX) this.scrollScheduleLeft(event)\n        if (this.isBrowsingY) this.scrollScheduleTop(event)\n      }\n\n      this.updatePositionBarPosition(event)\n    },\n\n    onChildEstimationChanged(event, childElement, rootElement) {\n      const estimation = event.target.valueAsNumber || 0\n      if (this.isEstimationLinked) {\n        childElement.man_days = daysToMinutes(this.organisation, estimation)\n        childElement.estimation = childElement.man_days\n        this.refreshManDays(rootElement)\n\n        if (estimation > 0) {\n          childElement.endDate = addBusinessDays(\n            childElement.startDate,\n            estimation - 1,\n            rootElement.daysOff\n          )\n        }\n      }\n      this.$emit('estimation-changed', {\n        taskId: childElement.id,\n        days: estimation,\n        item: childElement,\n        daysOff: rootElement.daysOff\n      })\n    },\n\n    updatePositionBarPosition(event) {\n      if (!this.timelineContentWrapper || !this.timelinePosition) return\n\n      const cursorX =\n        this.getClientX(event) -\n        this.timelineContentWrapper.getBoundingClientRect().left\n\n      if (cursorX <= 0 || cursorX >= this.timelineContentWrapper.offsetWidth)\n        return\n\n      const left =\n        Math.floor(\n          (this.timelineContentWrapper.scrollLeft + cursorX) / this.cellWidth\n        ) * this.cellWidth\n      this.timelinePosition.style.left = `${left}px`\n    },\n\n    isValidItemDates(startDate, endDate) {\n      return (\n        startDate &&\n        endDate &&\n        startDate.isSameOrAfter(this.startDate.clone().add(-1, 'hour')) &&\n        endDate.isSameOrBefore(this.endDate.clone().add(1, 'day')) &&\n        startDate.isSameOrBefore(endDate) &&\n        endDate.isSameOrAfter(startDate)\n      )\n    },\n\n    getDisplayedDaysIndex(date) {\n      const dateString = date.format('YYYY-MM-DD')\n      return this.displayedDaysIndex[dateString]\n    },\n\n    getDisplayedWeeksIndex(date) {\n      const dateString = date.startOf('isoweek').format('YYYY-MM-DD')\n      return this.displayedWeeksIndex[dateString]\n    },\n\n    resetDroppableTargets() {\n      this.schedule?.querySelectorAll('.droppable').forEach(element => {\n        element.classList.remove('droppable')\n      })\n    },\n\n    changeDates(event) {\n      if (!this.isSelected(this.currentElement)) {\n        // avoid side effect if item unselected\n        return\n      }\n\n      const change =\n        this.getClientX(event) - this.initialClientX - this.cellWidth / 2\n      const dayChange = Math.ceil(change / this.cellWidth)\n\n      if (this.reassignable) {\n        let target = event.target\n        while (target && !target.classList?.contains('drop-item-target')) {\n          target = target.parentNode\n        }\n        if (!target) {\n          this.resetDroppableTargets()\n        }\n        const currentRootElement = this.currentElement.parentElement\n        if (\n          this.subchildren &&\n          target &&\n          target.dataset.personId &&\n          target.dataset.entityTypeId &&\n          !this.currentElement.assignees?.includes(target.dataset.personId)\n        ) {\n          // check rights\n          if (\n            target.dataset.personId === 'unassigned' ||\n            target.dataset.entityTypeId !== this.currentElement.entity_type_id\n          ) {\n            return\n          }\n\n          target.classList.add('droppable')\n\n          this.selection.forEach(item => {\n            // update item assignation in element hierarchy\n            const previousAssigneeId = item.assignees[0]\n            const newAssigneeId = target.dataset.personId\n            item.assignees = item.assignees.filter(\n              assigneeId => assigneeId !== previousAssigneeId\n            )\n            item.assignees.push(newAssigneeId)\n\n            this.$emit('item-unassign', item, previousAssigneeId)\n            this.$emit('item-assign', item, newAssigneeId)\n            this.refreshItemPositions(currentRootElement)\n          })\n        } else if (\n          !this.subchildren &&\n          target &&\n          target.dataset.rootElementId &&\n          currentRootElement.id !== target.dataset.rootElementId\n        ) {\n          const newRootElement = this.hierarchy.find(\n            rootElement => rootElement.id === target.dataset.rootElementId\n          )\n          this.selection.forEach(item => {\n            if (!this.checkUserIsAllowed(item, newRootElement)) {\n              return\n            }\n            target.classList.add('droppable')\n            // update assignation in element hierarchy\n            const previousRootElement = item.parentElement\n            item.parentElement = newRootElement\n            previousRootElement.children = previousRootElement.children.filter(\n              ({ id }) => id !== item.id\n            )\n            newRootElement.children = newRootElement.children.filter(\n              ({ id }) => id !== item.id\n            )\n            newRootElement.children.push(item)\n            this.$emit('item-unassign', item, previousRootElement)\n            this.$emit('item-assign', item, newRootElement)\n            this.refreshItemPositions(previousRootElement)\n          })\n          this.refreshItemPositions(newRootElement)\n        }\n      }\n\n      if (this.lastStartDate.isBefore(this.startDate)) {\n        this.lastStartDate = this.startDate.clone()\n      }\n\n      if (this.lastEndDate.isBefore(this.startDate)) {\n        this.lastEndDate = this.startDate.clone().add(1, 'days')\n      }\n\n      const startDate = this.lastStartDate\n      const endDate = this.lastEndDate\n      if (!this.isWeekMode) {\n        const startDateIndex = this.getDisplayedDaysIndex(startDate)\n        const endDateIndex = this.getDisplayedDaysIndex(endDate)\n        const length = endDateIndex - startDateIndex\n        let currentIndex = this.getDisplayedDaysIndex(startDate)\n\n        currentIndex += dayChange\n        if (currentIndex < 0) currentIndex = 0\n\n        const newStartDate = this.displayedDays[currentIndex]\n        if (newStartDate) {\n          const newEndDate = this.displayedDays[currentIndex + length]\n          const dateDiff = newStartDate.diff(this.currentElement.startDate)\n          if (dateDiff && this.isValidItemDates(newStartDate, newEndDate)) {\n            // update all selected items\n            this.selection.forEach(item => {\n              item.startDate = item.startDate.clone().add(dateDiff)\n              item.endDate = item.endDate.clone().add(dateDiff)\n            })\n            if (this.multiline || this.subchildren) {\n              const parentElements = [\n                ...new Set(this.selection.map(item => item.parentElement))\n              ]\n              parentElements.forEach(this.refreshItemPositions)\n            }\n          }\n        }\n      } else {\n        const startDateIndex = this.getDisplayedWeeksIndex(startDate)\n        const endDateIndex = this.getDisplayedWeeksIndex(endDate)\n        const length = endDateIndex - startDateIndex\n        let currentIndex = this.getDisplayedWeeksIndex(startDate)\n        currentIndex += dayChange\n        if (currentIndex < 0) currentIndex = 0\n        const newStartDate = this.weeksAvailable[currentIndex]\n        if (newStartDate) {\n          const newEndDate = this.weeksAvailable[currentIndex + length]\n          if (this.isValidItemDates(newStartDate, newEndDate)) {\n            this.currentElement.startDate = newStartDate\n            this.currentElement.endDate = newEndDate\n          }\n        }\n      }\n    },\n\n    changeStartDate(event) {\n      const change =\n        this.getClientX(event) - this.initialClientX + this.cellWidth / 2\n      const dayChange = Math.floor(change / this.cellWidth)\n\n      const startDate = this.lastStartDate\n      const endDate = this.currentElement.endDate\n      let currentIndex, endDateIndex\n      if (this.isWeekMode) {\n        currentIndex = this.getDisplayedWeeksIndex(startDate)\n        endDateIndex = this.getDisplayedWeeksIndex(endDate)\n      } else {\n        currentIndex = this.getDisplayedDaysIndex(startDate)\n        endDateIndex = this.getDisplayedDaysIndex(endDate)\n      }\n      currentIndex += dayChange\n      if (currentIndex > endDateIndex) currentIndex = endDateIndex\n      if (currentIndex < 0) currentIndex = 0\n\n      const newStartDate = this.isWeekMode\n        ? this.weeksAvailable[currentIndex]\n        : this.displayedDays[currentIndex]\n\n      if (\n        !newStartDate.isSame(this.currentElement.startDate) &&\n        this.isValidItemDates(newStartDate, this.currentElement.endDate)\n      ) {\n        this.currentElement.startDate = newStartDate.clone()\n        this.updateItemEstimation(this.currentElement)\n        this.refreshItemPositions(this.currentElement.parentElement)\n        this.resetSelection([this.currentElement])\n      }\n    },\n\n    changeEndDate(event) {\n      const change =\n        this.getClientX(event) - this.initialClientX + this.cellWidth / 2\n      const dayChange = Math.ceil(change / this.cellWidth)\n\n      if (this.currentElement.startDate.isBefore(this.startDate)) {\n        this.currentElement.startDate = this.startDate.clone()\n      }\n\n      if (this.currentElement.endDate.isBefore(this.startDate)) {\n        this.currentElement.endDate = this.startDate.clone().add(1, 'days')\n      }\n\n      if (this.lastEndDate.isBefore(this.startDate)) {\n        this.lastEndDate = this.startDate.clone().add(1, 'days')\n      }\n\n      const startDate = this.currentElement.startDate\n      const endDate = this.lastEndDate\n      let startDateIndex, currentIndex\n      if (this.isWeekMode) {\n        startDateIndex = this.getDisplayedWeeksIndex(startDate)\n        currentIndex = this.getDisplayedWeeksIndex(endDate)\n      } else {\n        startDateIndex = this.getDisplayedDaysIndex(startDate)\n        currentIndex = this.getDisplayedDaysIndex(endDate)\n      }\n\n      currentIndex += dayChange - 1\n      if (currentIndex < startDateIndex) currentIndex = startDateIndex\n      if (this.isWeekMode) {\n        if (currentIndex > this.displayedWeeksIndex.length) {\n          currentIndex = this.displayedWeeksIndex.length - 1\n        }\n      } else {\n        if (currentIndex > this.displayedDaysIndex.length) {\n          currentIndex = this.displayedDaysIndex.length - 1\n        }\n      }\n\n      const newEndDate = this.isWeekMode\n        ? this.weeksAvailable[currentIndex]\n        : this.displayedDays[currentIndex]\n      if (\n        newEndDate &&\n        !newEndDate.isSame(this.currentElement.endDate) &&\n        this.isValidItemDates(this.currentElement.startDate, newEndDate)\n      ) {\n        this.currentElement.endDate = newEndDate.clone()\n        this.updateItemEstimation(this.currentElement)\n        this.refreshItemPositions(this.currentElement.parentElement)\n        this.resetSelection([this.currentElement])\n      }\n    },\n\n    updateItemEstimation(item) {\n      if (this.isEstimationLinked) {\n        const estimation = getBusinessDays(\n          item.startDate,\n          item.endDate,\n          item.parentElement?.daysOff\n        )\n        item.estimation = daysToMinutes(this.organisation, estimation)\n      }\n    },\n\n    updateSelection(item, event) {\n      const isCtrlKey = event.ctrlKey || event.metaKey\n\n      if (this.isSelected(item)) {\n        if (isCtrlKey) {\n          this.removeFromSelection(item)\n        }\n      } else {\n        if (!isCtrlKey) {\n          this.resetSelection()\n        }\n        this.addToSelection(item)\n      }\n    },\n\n    isOverlapping(item) {\n      return (\n        this.withGhosts &&\n        ((item.previousElement &&\n          item.startDate.isSameOrBefore(item.previousElement.endDate)) ||\n          (item.nextElement &&\n            item.endDate.isSameOrAfter(item.nextElement.startDate)))\n      )\n    },\n\n    isSelected(item) {\n      return this.selection.some(({ id }) => id === item.id)\n    },\n\n    addToSelection(itemToAdd) {\n      this.selection.push(itemToAdd)\n    },\n\n    removeFromSelection(itemToRemove) {\n      this.selection = this.selection.filter(item => item !== itemToRemove)\n    },\n\n    resetSelection(value) {\n      this.selection = value || []\n    },\n\n    moveTimebar(timeElement, event) {\n      event.preventDefault() // avoid scroll of schedule on touch\n      if (\n        !this.isChangeStartDate &&\n        !this.isChangeEndDate &&\n        timeElement.editable\n      ) {\n        this.isChangeDates = true\n        this.isChangeStartDate = false\n        this.isChangeEndDate = false\n        this.currentElement = timeElement\n        this.lastStartDate = timeElement.startDate.clone()\n        this.lastEndDate = timeElement.endDate.clone()\n        this.initialClientX = this.getClientX(event)\n        document.body.style.cursor = this.reassignable\n          ? 'all-scroll'\n          : 'ew-resize'\n\n        this.updateSelection(timeElement, event)\n      }\n    },\n\n    moveTimebarLeftSide(timeElement, event) {\n      event.preventDefault() // avoid scroll of schedule on touch\n      if (\n        !this.isChangeDates &&\n        !this.isChangeEndDate &&\n        timeElement.editable\n      ) {\n        this.isChangeDates = false\n        this.isChangeStartDate = true\n        this.isChangeEndDate = false\n        this.currentElement = timeElement\n        if (!timeElement.endDate) {\n          timeElement.endDate = timeElement.startDate.clone().add(1, 'days')\n        }\n        this.lastStartDate = timeElement.startDate.clone()\n        this.lastEndDate = timeElement.endDate.clone()\n        this.initialClientX = this.getClientX(event)\n        document.body.style.cursor = 'w-resize'\n\n        this.updateSelection(timeElement, event)\n      }\n    },\n\n    moveTimebarRightSide(timeElement, event) {\n      event.preventDefault() // avoid scroll of schedule on touch\n      if (\n        !this.isChangeDates &&\n        !this.isChangeStartDate &&\n        timeElement.editable\n      ) {\n        this.isChangeDates = false\n        this.isChangeStartDate = false\n        this.isChangeEndDate = true\n        this.currentElement = timeElement\n        if (!timeElement.endDate) {\n          timeElement.endDate = timeElement.startDate.clone().add(1, 'days')\n        }\n        this.lastStartDate = timeElement.startDate.clone()\n        this.lastEndDate = timeElement.endDate.clone()\n        this.initialClientX = this.getClientX(event)\n        document.body.style.cursor = 'e-resize'\n\n        this.updateSelection(timeElement, event)\n      }\n    },\n\n    onTimelineScroll(event) {\n      if (!event?.target) return\n      const position = event.target\n      const newTop = position.scrollTop\n      this.entityList.scrollTop = newTop\n      const newLeft = position.scrollLeft\n      this.timelineHeader.scrollLeft = newLeft\n\n      this.$emit('scroll', { top: position.scrollTop })\n    },\n\n    setScrollPosition(top) {\n      this.timelineContentWrapper.scrollTop = top\n      this.entityList.scrollTop = top\n    },\n\n    scrollScheduleLeft(event) {\n      if (!this.timelineContentWrapper) return\n      const previousLeft = this.timelineContentWrapper.scrollLeft\n      const movementX =\n        event.movementX || this.getClientX(event) - this.initialClientX\n      const newLeft = previousLeft - movementX\n      this.initialClientX = this.getClientX(event)\n      this.timelineContentWrapper.scrollLeft = newLeft\n      this.timelineHeader.scrollLeft = newLeft\n    },\n\n    scrollScheduleTop(event) {\n      if (!this.timelineContentWrapper) return\n      const previousTop = this.timelineContentWrapper.scrollTop\n      const movementY =\n        event.movementY || this.getClientY(event) - this.initialClientY\n      const newTop = previousTop - movementY\n      this.initialClientY = this.getClientY(event)\n      this.setScrollPosition(newTop)\n    },\n\n    scrollToToday() {\n      const today = moment()\n      this.scrollToDate(today)\n    },\n\n    scrollToDate(date) {\n      setTimeout(() => {\n        if (\n          this.schedule &&\n          date.isAfter(this.startDate) &&\n          date.isBefore(this.endDate)\n        ) {\n          const datePosition = this.getTimebarLeft({ startDate: date }) - 5\n          const newLeft = datePosition - (this.schedule.offsetWidth / 2 - 300)\n          this.timelineContentWrapper.scrollLeft = newLeft\n          if (this.timelineHeader) {\n            this.timelineHeader.scrollLeft = newLeft\n          }\n        }\n      }, 10)\n    },\n\n    startBrowsing(event) {\n      if (\n        !this.isChangeStartDate &&\n        !this.isChangeEndDate &&\n        !this.isChangeDates\n      ) {\n        document.body.style.cursor = 'grabbing'\n        this.isBrowsingX = true\n        this.isBrowsingY = true\n        this.initialClientX = this.getClientX(event)\n        this.initialClientY = this.getClientY(event)\n      }\n    },\n\n    startBrowsingX(event) {\n      document.body.style.cursor = 'grabbing'\n      this.isBrowsingX = true\n      this.initialClientX = this.getClientX(event)\n    },\n\n    startBrowsingY(event) {\n      document.body.style.cursor = 'grabbing'\n      this.isBrowsingY = true\n      this.initialClientY = this.getClientY(event)\n    },\n\n    stopBrowsing(event) {\n      document.body.style.cursor = 'default'\n      if (this.currentElement) {\n        if (this.initialClientX !== this.getClientX(event)) {\n          // on moving or resizing selected items\n          this.selection.forEach(item => {\n            this.$emit('item-changed', item)\n            this.refreshItemPositions(item.parentElement)\n            this.refreshManDays(item.parentElement)\n          })\n          // clear selection after moving a single item\n          if (this.isChangeDates && this.selection.length === 1) {\n            this.resetSelection()\n          }\n        } else {\n          // reset multi-selection when clicking on a single item\n          const isCtrlKey = event.ctrlKey || event.metaKey\n          if (this.isChangeDates && this.selection.length > 1 && !isCtrlKey) {\n            this.resetSelection([this.currentElement])\n          }\n        }\n      } else {\n        // clear the selection when clicking outside an item\n        let target = event.target\n        while (target && target !== this.timeline) {\n          target = target.parentNode\n        }\n        if (target) {\n          this.resetSelection()\n          this.$emit('task-unselected')\n        }\n      }\n      this.resetDroppableTargets()\n      this.isChangeStartDate = false\n      this.isChangeEndDate = false\n      this.isChangeDates = false\n      this.isBrowsingX = false\n      this.isBrowsingY = false\n      this.initialClientX = null\n      this.initialClientY = null\n      this.currentElement = null\n    },\n\n    // Helpers\n\n    dateDiff(startDate, endDate, unitOfTime = 'days') {\n      if (\n        startDate.isSame(endDate) ||\n        !startDate.isValid() ||\n        !endDate.isValid()\n      ) {\n        return 0\n      }\n      const first = startDate.clone().utc().startOf('day')\n      const last = endDate.clone().utc().endOf('day')\n      const diff = last.diff(first, unitOfTime)\n      return diff\n    },\n\n    // Styles\n\n    dayClass(day, index = 0) {\n      return {\n        'day-name': true,\n        'new-week': day.newWeek || false,\n        'new-month': day.newMonth || index === 0 || false,\n        weekend: day.weekend || false,\n        'day-name-off': day.off || false\n      }\n    },\n\n    dayOffStyle(dayOff) {\n      return {\n        left: `${this.getLeftPosition(dayOff.date)}px`,\n        width: `${this.cellWidth - 1}px`\n      }\n    },\n\n    dateStatusStyle(date) {\n      return {\n        left: `${this.getLeftPosition(date) + this.cellWidth / 2 - 3}px`\n      }\n    },\n\n    getLeftPosition(date) {\n      const startDate = moment.utc(date)\n      const startDiff = this.dateDiff(\n        this.startDate,\n        startDate,\n        this.unitOfTime\n      )\n      return startDiff * this.cellWidth + 1\n    },\n\n    entityLineStyle(\n      timeElement,\n      root = false,\n      header = false,\n      expanded = false\n    ) {\n      const style = {}\n      let color = timeElement.color\n      if (root) {\n        // is a person\n        color = this.isDarkTheme ? '#222' : '#EEF'\n      }\n      if (root) {\n        style['border-left'] = `1px solid ${color}`\n        style['border-top'] = `1px solid ${color}`\n        if (!expanded) {\n          style['border-bottom'] = `1px solid ${color}`\n        }\n        if (header) {\n          style.background = color\n        }\n      }\n      if (timeElement.expanded) {\n        style['margin-bottom'] = '0'\n      }\n      style['border-left'] = `1px solid ${color}`\n      style.color = this.isDarkTheme ? '#EEE' : '#111'\n      if (!this.isDarkTheme) {\n        style['border-color'] = '#BBE'\n      }\n      return style\n    },\n\n    timebarStyle(timeElement, root = false) {\n      const style = {\n        left: `${this.getTimebarLeft(timeElement)}px`,\n        width: `${this.getTimebarWidth(timeElement)}px`,\n        cursor: timeElement.editable\n          ? !root && this.reassignable\n            ? 'all-scroll'\n            : 'ew-resize'\n          : 'default'\n      }\n      if (root) {\n        style['background-color'] = timeElement.color\n      }\n      return style\n    },\n\n    timelineMultilineStyle(timeElement) {\n      return {\n        top: `${timeElement.line * 40 + 5}px`,\n        left: `${this.getTimebarLeft(timeElement)}px`\n      }\n    },\n\n    timelineSubchildrenStyle(timeElement) {\n      const children = Array.from(timeElement.children.values())\n      const nbLines = children.reduce(\n        (acc, subChildren) => acc + this.getNbLines(subChildren),\n        0\n      )\n      const marginBottom = children.length * 10\n      return {\n        height: `${40 + 40 * nbLines + marginBottom + 2}px`,\n        'padding-top': '13px'\n      }\n    },\n\n    timebarChildStyle(\n      timeElement,\n      rootElement,\n      multiline = false,\n      opacityPercentage = 0,\n      opacityColor = 'transparent'\n    ) {\n      const elementColor = timeElement.color || rootElement.color\n      return {\n        left: !multiline && `${this.getTimebarLeft(timeElement)}px`,\n        width: `${this.getTimebarWidth(timeElement)}px`,\n        cursor: timeElement.editable\n          ? this.reassignable\n            ? 'all-scroll'\n            : 'ew-resize'\n          : 'default',\n        background: opacityPercentage\n          ? `color-mix(in srgb, ${elementColor}, ${opacityColor} ${opacityPercentage}%)` // lighter color\n          : elementColor\n      }\n    },\n\n    timesheetStyle(timesheet, timeElement, rootElement, withEstimations) {\n      return {\n        top: withEstimations ? '7px' : '18px',\n        left: `${this.getTimebarLeft(timesheet, true)}px`,\n        width: `${this.getTimebarWidth(timesheet)}px`,\n        background: timesheet.color || timeElement.color || rootElement.color\n      }\n    },\n\n    timebarSubchildStyle(timeElement, rootElement) {\n      const color = timeElement.color || rootElement.color\n      const isSelected = this.isSelected(timeElement)\n      return {\n        left: `${this.getTimebarLeft(timeElement)}px`,\n        width: `${this.getTimebarWidth(timeElement)}px`,\n        cursor: timeElement.editable\n          ? this.reassignable\n            ? 'all-scroll'\n            : 'ew-resize'\n          : 'default',\n        top: `${5 + 38 * timeElement.line}px`,\n        background: `color-mix(in srgb, ${color} ${isSelected ? 80 : 40}%, transparent)`,\n        'box-shadow': `inset 0 0 1px 2px ${isSelected ? 'var(--background-selected)' : color}`\n      }\n    },\n\n    timebarSubchildTitle(task) {\n      const name = task.entity.name\n      const startDate = task.startDate.format('YYYY-MM-DD')\n      const endDate = task.endDate.format('YYYY-MM-DD')\n      const duration = this.isRealSchedule\n        ? this.formatDuration(task.duration)\n        : this.formatDuration(task.estimation)\n      return `${name} (${startDate} - ${endDate}) ${duration} ${this.$t('schedule.md')}`\n    },\n\n    getTimebarLeft(timeElement) {\n      const startDate = timeElement.startDate || this.startDate\n      const startDiff = this.dateDiff(\n        this.startDate,\n        startDate,\n        this.unitOfTime\n      )\n      return startDiff * this.cellWidth + 3\n    },\n\n    getTimebarWidth(timeElement) {\n      const startDate = timeElement.startDate || this.startDate\n      let endDate =\n        timeElement.endDate ||\n        (timeElement.startDate &&\n          timeElement.startDate.clone().add(1, 'days')) ||\n        this.startDate.clone().add(1, 'days')\n\n      if (\n        timeElement.man_days > 0 &&\n        !timeElement.end_date &&\n        !timeElement.endDate\n      ) {\n        const days = Math.ceil(timeElement.man_days)\n        endDate = addBusinessDays(startDate, days - 1)\n      }\n\n      const lengthDiff = this.dateDiff(startDate, endDate, this.unitOfTime)\n      if (lengthDiff > 0) {\n        return (lengthDiff + 1) * this.cellWidth - 6\n      } else {\n        return this.cellWidth - 4\n      }\n    },\n\n    // Children\n\n    expandRootElement(rootElement) {\n      if (rootElement.expanded) {\n        // clear selected items when collapsing the root element\n        this.selection.forEach(item => {\n          const taskRootElementId =\n            item.parentElement?.parentElement?.id || item.parentElement?.id\n          if (taskRootElementId === rootElement.id) {\n            this.removeFromSelection(item)\n          }\n        })\n      }\n\n      this.$emit(\n        'root-element-expanded',\n        rootElement,\n        this.multiline || this.subchildren\n          ? this.refreshItemPositions\n          : undefined\n      )\n    },\n\n    childNameStyle(rootElement, index) {\n      const isOdd = index % 2 === 0\n      const level = isOdd ? 0.7 : 0.9\n      return {\n        background: colors.fadeColor(rootElement.color, level)\n      }\n    },\n\n    childrenStyle(rootElement, isMultiline = false, setBackground = false) {\n      const style = {\n        'border-bottom': `1px solid ${rootElement.color}`,\n        'border-left': `1px solid ${rootElement.color}`\n      }\n      if (isMultiline) {\n        const nbLines = this.getNbLines(rootElement.children)\n        style.height = `${40 * nbLines + 10}px`\n\n        if (setBackground) {\n          style.background = colors.fadeColor(rootElement.color, 0.7)\n        }\n      }\n      return style\n    },\n\n    // Milestones\n\n    showEditMilestoneModal(day, milestone) {\n      if (this.isCurrentUserManager) {\n        this.modals.edit = true\n        if (milestone) {\n          this.milestoneToEdit = {\n            ...milestone,\n            date: parseDate(milestone.date)\n          }\n        } else {\n          this.milestoneToEdit = { date: day }\n        }\n      }\n    },\n\n    hideEditMilestoneModal() {\n      this.modals.edit = false\n    },\n\n    confirmEditMilestone(milestone) {\n      this.loading.edit = true\n      this.saveMilestone(milestone)\n        .then(() => {\n          this.modals.edit = false\n        })\n        .catch(err => {\n          console.error(err)\n          this.errors.edit = true\n        })\n        .finally(() => {\n          this.loading.edit = false\n        })\n    },\n\n    removeMilestone(milestone) {\n      this.loading.edit = true\n      this.deleteMilestone(milestone)\n        .then(() => {\n          this.modals.edit = false\n        })\n        .catch(err => {\n          console.error(err)\n          this.errors.edit = true\n        })\n        .finally(() => {\n          this.loading.edit = false\n        })\n    },\n\n    milestoneLineStyle(milestone) {\n      const startDate = parseDate(this.startDate.format('YYYY-MM-DD'))\n      const milestoneDate = parseDate(milestone.date)\n      if (startDate.isSameOrBefore(milestoneDate)) {\n        const lengthDiff = this.dateDiff(\n          startDate,\n          milestoneDate,\n          this.unitOfTime\n        )\n        return {\n          left: `${(lengthDiff + 0.5) * this.cellWidth}px`\n        }\n      } else {\n        return {\n          display: 'none'\n        }\n      }\n    },\n\n    addMilestoneTitle(day) {\n      return `${this.$t('schedule.milestone.add_milestone')} ${day.format('YYYY-MM-DD')}`\n    },\n\n    checkUserIsAllowed(item, person) {\n      if (!item) {\n        return false\n      }\n      const production = this.openProductions.find(\n        ({ id }) => id === item.project_id\n      )\n      const isTeamMember = production.team.includes(person.id)\n      const isDepartmentMember =\n        !person.departments.length ||\n        !item.department ||\n        person.departments.includes(item.department.id)\n      return isTeamMember && isDepartmentMember\n    },\n\n    onTaskDragEnter(event, rootElement) {\n      // HACK: the getData doesn't work on dragEnter, we use a \"task-type-*\" data key instead (key must be lowercase)\n      const draggedItemTaskType = event.dataTransfer.types.find(\n        dataKey => dataKey === `task-type-${rootElement.task_type_id}`\n      )\n      if (!draggedItemTaskType) {\n        const item = this.draggedItems?.[0]\n        const isAllowed = this.checkUserIsAllowed(item, rootElement)\n        if (!isAllowed) {\n          return\n        }\n      }\n      event.currentTarget.classList.add('droppable')\n    },\n\n    onTaskDragOver(event) {\n      event.preventDefault()\n    },\n\n    onTaskDragLeave(event) {\n      event.target.classList.remove('droppable')\n    },\n\n    onTaskDrop(event, rootElement) {\n      event.target.classList.remove('droppable')\n\n      let item = this.draggedItems?.[0]\n      if (!item) {\n        const entityId = event.dataTransfer.getData('entityId')\n        const taskTypeId = event.dataTransfer.getData('taskTypeId')\n        if (!entityId || taskTypeId !== rootElement.task_type_id) {\n          return // invalid task type\n        }\n        item = { entity_id: entityId }\n      } else if (!this.checkUserIsAllowed(item, rootElement)) {\n        return // invalid user rights\n      }\n\n      const position =\n        this.timelineContentWrapper.scrollLeft +\n        this.getClientX(event) -\n        300 -\n        this.cellWidth * 1.5\n      const dayPosition = Math.floor(position / this.cellWidth)\n      const dropDate = this.startDate.clone().add(dayPosition, 'days')\n      const startDate = addBusinessDays(dropDate, 0, rootElement.daysOff)\n      const endDate = item.estimation\n        ? addBusinessDays(\n            startDate,\n            minutesToDays(this.organisation, item.estimation) - 1,\n            rootElement.daysOff\n          )\n        : startDate\n\n      // convert to schedule item\n      item.full_entity_name = `${item.entity_type_name} / ${item.entity_name}`\n      item.start_date = startDate.format('YYYY-MM-DD')\n      item.due_date = endDate.format('YYYY-MM-DD')\n      item.parentElement = rootElement\n\n      this.$emit(\n        'item-drop',\n        item,\n        rootElement,\n        this.multiline ? this.refreshItemPositions : undefined\n      )\n    },\n\n    exportData() {\n      return {\n        header: this.daysAvailable,\n        hierarchy: this.hierarchy\n      }\n    }\n  },\n\n  watch: {\n    startDate() {\n      this.resetScheduleSize()\n    },\n    endDate() {\n      this.resetScheduleSize()\n    },\n    zoomLevel() {\n      this.resetScheduleSize()\n      this.refreshAllItemPositions()\n      this.onTimelineScroll(null, { scrollTop: 0, scrollLeft: 0 })\n    },\n    isLoading() {\n      this.$nextTick(this.resetScheduleSize)\n    },\n    height() {\n      this.$nextTick(this.resetScheduleSize)\n    },\n    currentElement() {\n      if (this.currentElement && this.currentElement.task_type_id) {\n        const task = this.taskMap.get(this.currentElement.id)\n        if (task) {\n          this.$store.commit('UPDATE_TASK', {\n            task,\n            updatedAt: formatFullDate(moment())\n          })\n        }\n      }\n    },\n    currentProduction: {\n      immediate: true,\n      handler() {\n        if (this.withMilestones) {\n          this.loadMilestones(this.currentProduction)\n        }\n      }\n    }\n  }\n}\n\n/**\n * Set the position of items in the schedule, avoiding collisions.\n * Add a `line` attribute to each item.\n *\n * @param {Array<Object>} items - The list of items to position.\n * @param {Moment.unitOfTime} unitOfTime - A unit of time (eg. 'days', 'weeks', 'months', ...).\n * @returns {Array<Object>} The list of items with updated positions.\n */\nconst setItemPositions = (items, unitOfTime = 'days') => {\n  if (!items?.length) {\n    return\n  }\n  const attributeName = 'line'\n  const matrix = []\n  const minDate = moment\n    .min(items.map(item => item.startDate))\n    .clone()\n    .startOf(unitOfTime)\n  const maxDate = moment\n    .max(items.map(item => item.endDate))\n    .clone()\n    .endOf(unitOfTime)\n  const nbColumns = maxDate.diff(minDate, unitOfTime) + 1\n\n  items.forEach(item => {\n    const start = item.startDate\n      .clone()\n      .startOf(unitOfTime)\n      .diff(minDate, unitOfTime)\n    const end = item.endDate.clone().endOf(unitOfTime).diff(minDate, unitOfTime)\n    const line = getFreeLinePosition(item.id, start, end, matrix)\n    item[attributeName] = line\n  })\n\n  function getFreeLinePosition(value, start, end, matrix, line = 0) {\n    for (let index = start; index <= end; index++) {\n      // if empty line\n      if (!matrix[line]) {\n        matrix.push(Array(nbColumns).fill(0))\n        index = end\n      }\n      // if collision on line\n      else if (matrix[line][index]) {\n        // go to next line\n        return getFreeLinePosition(value, start, end, matrix, line + 1)\n      }\n      // if no collision for the whole item\n      if (index === end) {\n        // save item in matrix\n        matrix[line].fill(value, start, end + 1)\n        return line\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.dark {\n  .entities {\n    background: inherit;\n  }\n\n  .schedule.zoom-level-0 {\n    .timeline-content {\n      background-image: url('@/assets/background/schedule-dark-1.svg');\n    }\n  }\n\n  .schedule.zoom-level-1 {\n    .timeline-content {\n      background-image: url('@/assets/background/schedule-dark-1-weekend.svg');\n    }\n  }\n\n  .schedule.zoom-level-2 {\n    .timeline-content {\n      background-image: url('@/assets/background/schedule-dark-2-weekend.svg');\n    }\n  }\n\n  .schedule.zoom-level-3 {\n    .timeline-content {\n      background-image: url('@/assets/background/schedule-dark-3-weekend.svg');\n    }\n  }\n\n  .schedule.zoom-level-4 {\n    .timeline-content {\n      background-image: url('@/assets/background/schedule-dark-4-weekend.svg');\n    }\n  }\n\n  .child-element-name {\n    color: $white;\n  }\n\n  .timeline {\n    .timeline-header {\n      background: transparent;\n      color: $white;\n\n      .day {\n        .day-number {\n          color: $white;\n        }\n\n        .day-name {\n          margin: 0;\n          padding-bottom: 0;\n          &.new-month,\n          &.new-week {\n            border-left: 2px solid $white;\n          }\n        }\n\n        .month-name {\n          background: $dark-grey-2;\n          border-left: 2px solid $white;\n          color: $white;\n        }\n      }\n    }\n\n    .timeline-content-wrapper {\n      .timeline-content {\n        .entity-line.child-line {\n          .timebar {\n            color: $dark-grey;\n          }\n        }\n\n        .milestone-vertical-line {\n          border-left: 1px dashed $white;\n        }\n      }\n    }\n  }\n\n  .expand,\n  .man-day-input {\n    color: $white;\n  }\n\n  .total-man-days {\n    background: $dark-grey-2;\n    color: $white;\n  }\n\n  .entity-name {\n    .man-days-unit {\n      color: $white;\n    }\n  }\n\n  .child-name .entity-name span {\n    color: $white;\n  }\n\n  .milestone {\n    .milestone-tooltip {\n      background: $dark-grey-lighter;\n      border: 1px solid $dark-grey;\n      box-shadow: 0 2px 2px 0 $dark-grey-strong;\n    }\n    .milestone-tooltip:after,\n    .milestone-tooltip:before {\n      border-color: transparent;\n      border-top-color: $dark-grey-lighter;\n    }\n  }\n}\n\n.schedule-wrapper {\n  position: relative;\n  height: 100%;\n}\n\n.schedule {\n  position: absolute;\n  top: 0;\n  right: 0;\n  left: 0;\n  bottom: 0;\n  height: 100%;\n  overflow: hidden;\n  display: flex;\n  flex-direction: row;\n}\n\n.entities {\n  background: $white;\n  min-width: 300px;\n  padding-bottom: 20px; //hack due to custom scrollbar\n  overflow: hidden;\n  z-index: 2;\n\n  .entity-line {\n    max-width: 300px;\n    min-width: 300px;\n  }\n}\n\n.status-date {\n  position: absolute;\n  top: 2px;\n  width: 4px;\n  height: 36px;\n  z-index: 100;\n\n  .dark & {\n    box-shadow: $grey 0 0 1px 1px;\n  }\n\n  &-wip {\n    background-color: blue;\n    text-align: left;\n\n    &.status-date-gap {\n      transform: translateX(calc(-100% - 2px));\n    }\n  }\n  &-wfa {\n    background-color: purple;\n    text-align: center;\n  }\n  &-done {\n    background-color: green;\n    text-align: right;\n\n    &.status-date-gap {\n      transform: translateX(calc(100% + 2px));\n    }\n  }\n}\n\n.entity-name-list {\n  padding-top: 85px;\n\n  &.without-milestones {\n    padding-top: 55px;\n  }\n}\n\n.entity-line {\n  font-size: 1.2em;\n  height: 40px;\n  margin-bottom: 10px;\n  padding: 0.5em;\n\n  .flexrow-item {\n    margin: 0;\n\n    &.mr1 {\n      margin-right: 0.5em;\n    }\n  }\n\n  .expand {\n    color: $white;\n    cursor: pointer;\n    margin-right: 0.5em;\n  }\n\n  .root-element-link,\n  .root-element-link + * {\n    margin-left: 0.5em;\n  }\n\n  &.child-line {\n    height: 40px;\n    margin-bottom: 0;\n    font-size: 1em;\n\n    &:not(.multiline) {\n      &:nth-child(odd) {\n        background: rgba(200, 200, 200, 0.2);\n      }\n    }\n  }\n}\n\n.timeline {\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  padding-top: 0;\n\n  .timeline-header {\n    white-space: nowrap;\n    position: relative;\n    margin-left: 2px;\n    padding-right: 20px; //hack due to custom scrollbar\n    padding-bottom: 0;\n    overflow: hidden;\n    z-index: 0;\n    min-height: 85px;\n\n    &.without-milestones {\n      min-height: 54px;\n    }\n\n    .day {\n      display: inline-block;\n      font-size: 0.8em;\n\n      &.without-milestones {\n        margin-top: 17px;\n      }\n\n      &.week {\n        margin-top: 8px;\n      }\n\n      &.without-milestones.week {\n        margin-top: 20px;\n      }\n\n      .week-number {\n        color: $grey;\n        display: inline-block;\n        font-size: 0.8em;\n        padding-left: 3px;\n      }\n\n      .day-name {\n        color: $grey;\n        padding-left: 1px;\n        text-align: center;\n        text-transform: uppercase;\n\n        &.new-week {\n          border-left: 2px solid black;\n\n          .zoom-level-1 & {\n            border-left: none;\n          }\n        }\n      }\n\n      .day-number {\n        color: black;\n        padding-top: 0.5em;\n      }\n\n      .day-off-icon {\n        color: $white;\n        position: absolute;\n        top: -1px;\n        z-index: 10000;\n      }\n\n      .month-name {\n        background: $white;\n        border-left: 2px solid black;\n        bottom: 0;\n        color: black;\n        font-size: 0.9em;\n        padding-bottom: 24px;\n        padding-left: 0.5em;\n        top: 10px;\n        text-transform: uppercase;\n        position: absolute;\n        z-index: -1;\n      }\n    }\n  }\n\n  .timeline-content-wrapper {\n    margin-left: 2px;\n    overflow: auto;\n\n    .timeline-content {\n      position: relative;\n      overflow: hidden;\n\n      .timeline-position {\n        visibility: hidden;\n        position: absolute;\n        left: 0;\n        top: 0;\n        bottom: 0;\n        background: rgba(200, 255, 200, 0.3);\n        z-index: 100;\n\n        &.today {\n          visibility: visible;\n          background: rgba(255, 200, 255, 0.3);\n        }\n      }\n\n      .timeline-element {\n        position: relative;\n      }\n\n      .milestone-vertical-line {\n        position: absolute;\n        left: 0;\n        top: 0;\n        bottom: 0;\n        width: 1px;\n        border-left: 1px dashed black;\n        margin-left: -0.5px;\n        z-index: 100;\n      }\n\n      .entity-line {\n        width: 100%;\n        position: relative;\n\n        &.multiline {\n          position: absolute;\n          width: auto;\n\n          .timebar {\n            display: flex;\n            align-items: center;\n            height: calc(100% - 3px);\n            padding: 2px;\n            overflow: hidden;\n            white-space: nowrap;\n            text-overflow: ellipsis;\n          }\n        }\n\n        .timebar {\n          position: absolute;\n          top: 0;\n          height: 14px;\n          border-radius: 0.2em;\n          display: flex;\n          z-index: 101;\n\n          &.selected {\n            box-shadow: 0 0 0 3px var(--background-selected);\n          }\n\n          .timebar-center {\n            width: 100%;\n          }\n\n          .timebar-left-hand {\n            cursor: w-resize;\n            width: 30px;\n          }\n\n          .timebar-right-hand {\n            cursor: e-resize;\n            width: 30px;\n          }\n        }\n\n        .subchildren .subchild .timebar {\n          position: absolute;\n          color: var(--text-strong);\n          height: 34px;\n          line-height: 34px;\n          font-size: 12px;\n          padding: 0 5px;\n          white-space: nowrap;\n        }\n\n        .timebar-wrapper {\n          .timebar {\n            width: 100%;\n            height: 100%;\n          }\n        }\n        &.child-line {\n          padding: 0;\n\n          &.multiline .timebar {\n            top: 0;\n            font-size: 0.8em;\n          }\n\n          .timebar {\n            position: relative;\n            overflow: initial;\n            background: rgba(0, 0, 50, 0.2);\n            top: 13px;\n            font-size: 0.6em;\n\n            &.invalid {\n              box-shadow: 0 0 4px 2px $red;\n            }\n\n            &.with-timesheets {\n              top: 18px;\n            }\n\n            &.timebar-ghost {\n              position: absolute;\n\n              &-before {\n                margin-top: -7px;\n              }\n              &-after {\n                margin-top: 7px;\n              }\n            }\n\n            &.timebar-subchildren {\n              top: 0;\n              height: 20px;\n              font-size: 12px;\n              font-weight: 600;\n            }\n          }\n\n          .timebar-left-hand,\n          .timebar-right-hand {\n            position: absolute;\n            top: 0;\n            bottom: 0;\n            width: 20px;\n          }\n          .timebar-left-hand {\n            left: -12px;\n          }\n          .timebar-right-hand {\n            right: -12px;\n          }\n\n          .timesheet {\n            position: absolute;\n            height: 6px;\n            border-radius: 2px;\n            z-index: 101;\n            transition: top 0.2s;\n          }\n        }\n      }\n    }\n\n    .timeline-content:hover {\n      .timeline-position {\n        visibility: visible;\n      }\n    }\n  }\n}\n\n.zoom-level-0 {\n  .timeline-content {\n    background-image: url('@/assets/background/schedule-white-1.svg');\n  }\n  .day {\n    width: 20px;\n  }\n  .milestone-tooltip {\n    left: 10px;\n  }\n}\n\n.zoom-level-1 {\n  .timeline-content {\n    background-image: url('@/assets/background/schedule-white-1-weekend.svg');\n  }\n  .day {\n    width: 20px;\n  }\n  .milestone-tooltip {\n    left: 10px;\n  }\n}\n\n.schedule.zoom-level-2 {\n  .timeline-content {\n    background-image: url('@/assets/background/schedule-white-2-weekend.svg');\n  }\n  .day {\n    width: 40px;\n  }\n  .milestone-tooltip {\n    left: 20px;\n  }\n}\n\n.schedule.zoom-level-3 {\n  .timeline-content {\n    background-image: url('@/assets/background/schedule-white-3-weekend.svg');\n  }\n  .day {\n    width: 60px;\n  }\n  .milestone-tooltip {\n    left: 30px;\n  }\n}\n\n.schedule.zoom-level-4 {\n  .timeline-content {\n    background-image: url('@/assets/background/schedule-white-4-weekend.svg');\n  }\n  .day {\n    width: 120px;\n  }\n  .milestone-tooltip {\n    left: 60px;\n  }\n}\n\n.entity-name {\n  display: flex;\n  align-items: center;\n  line-height: 1.1em;\n\n  &.root {\n    border-top-left-radius: 10px;\n    border-bottom-left-radius: 10px;\n  }\n\n  &.root.expanded {\n    border-bottom-left-radius: 0;\n  }\n\n  input {\n    width: 30px;\n    text-align: right;\n    background: transparent;\n    margin-right: 0.2em;\n    font-size: 1.1em;\n  }\n\n  .man-days-unit {\n    color: $dark-grey;\n    font-size: 0.8em;\n    margin-right: 0.3em;\n    display: inline;\n  }\n\n  .avatar {\n    margin: 0;\n    padding: 0;\n  }\n}\n\n.child-name .entity-name span.man-days-unit-wrapper {\n  padding-left: 0;\n  width: 60px;\n  text-align: right;\n}\n\n.children-loader {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.children {\n  position: relative;\n  margin-bottom: 1em;\n  min-height: 40px;\n}\n.timeline-element:last-child .children {\n  margin-bottom: 0;\n}\n\n.child {\n  padding-bottom: 1px;\n  padding-top: 1px;\n}\n\n.child-name .entity-name span {\n  color: $dark-grey;\n  padding-left: 2.5em;\n\n  .filler {\n    margin: 0;\n  }\n}\n\n.total-man-days {\n  display: flex;\n  align-items: flex-end;\n  justify-content: space-between;\n  position: absolute;\n  background: $white;\n  height: 85px;\n  min-width: 300px;\n  padding-bottom: 2px;\n  padding-left: 5px;\n  padding-right: 5px;\n  z-index: 2;\n\n  .actions .button {\n    opacity: 0.5;\n\n    &:hover {\n      opacity: 1;\n    }\n  }\n\n  .total-value {\n    font-size: 20px;\n  }\n\n  &.without-milestones {\n    padding-top: 20px;\n    height: 54px;\n  }\n}\n\n.child-spinner {\n  font-size: 10px;\n  margin: 15px 10px;\n}\n\n.milestone {\n  min-height: 48px;\n  text-align: center;\n\n  .day.new-week & {\n    transform: translateY(16.5px);\n  }\n\n  .flexrow-item {\n    margin-left: 5px;\n    margin-right: 0;\n  }\n\n  .bull {\n    font-size: 20px;\n    line-height: 10px;\n  }\n\n  .milestone-tooltip {\n    visibility: hidden;\n    display: inline-block;\n    border: 1px solid #eee;\n    border-radius: 5px;\n    box-shadow: 0 2px 2px 0 #eee;\n    font-size: 0.8em;\n    font-weight: bold;\n    padding: 2px 5px;\n    position: relative;\n    border: 1px solid #eee;\n    min-width: 100px;\n    text-align: center;\n    top: -5px;\n    background: $white;\n    z-index: 100;\n    transform: translateX(-50%);\n  }\n\n  &:hover {\n    .milestone-tooltip {\n      visibility: visible;\n    }\n  }\n\n  .milestone-tooltip:after,\n  .milestone-tooltip:before {\n    top: 100%;\n    left: 50%;\n    border: solid transparent;\n    content: ' ';\n    height: 0;\n    width: 0;\n    position: absolute;\n    pointer-events: none;\n  }\n\n  .milestone-tooltip:after {\n    border-color: rgba(255, 255, 255, 0);\n    border-top-color: $white;\n    border-width: 5px;\n    margin-left: -5px;\n  }\n  .milestone-tooltip:before {\n    border-color: rgba(238, 238, 238, 0);\n    border-top-color: #eeeeee;\n    border-width: 6px;\n    margin-left: -6px;\n  }\n}\n\n.root-element-name {\n  padding-left: 10px;\n  white-space: nowrap;\n\n  color: #222;\n\n  .dark & {\n    color: $white;\n  }\n}\n\n.child-element-name {\n  padding-left: 10px;\n  color: $grey-strong;\n}\n\n.date-widget {\n  height: 20px;\n  padding-top: 3px;\n\n  .add-milestone {\n    display: none;\n    cursor: pointer;\n    text-align: center;\n\n    .button {\n      background: black;\n      border: none;\n      color: $white;\n      height: 20px;\n      margin-top: -2px;\n      padding: 0;\n      width: 20px;\n    }\n  }\n\n  &.with-milestones:hover {\n    .add-milestone {\n      background: $light-green-light;\n      display: block;\n    }\n\n    .day-name {\n      display: none;\n    }\n  }\n}\n\n.hidden-milestones {\n  margin-top: 43px;\n}\n\n.timebar-wrapper {\n  position: absolute;\n  height: 30px;\n  top: 4px;\n  padding: 0;\n  border-radius: 4px;\n\n  &.thinner {\n    height: 14px;\n    top: 14px;\n  }\n}\n\n.day-off {\n  position: absolute;\n  width: 19px;\n  height: 100%;\n  line-height: 40px;\n  text-align: center;\n  color: $dark-grey-light;\n  background-color: #f0f0f0;\n\n  .dark & {\n    color: $white;\n    background-color: #43474d;\n  }\n\n  &.day-off-sub-zone {\n    background-color: initial;\n  }\n\n  .day-off-icon {\n    position: absolute;\n    left: 0;\n    top: 15px;\n    width: 100%;\n    z-index: 100;\n  }\n}\n\n.day-name-off,\n.weekend {\n  background-color: rgba(200, 200, 200, 0.3);\n\n  .dark & {\n    background-color: rgba(200, 200, 200, 0.1);\n  }\n}\n\ninput::-webkit-outer-spin-button,\ninput::-webkit-inner-spin-button {\n  -webkit-appearance: none;\n  margin: 0;\n}\n\ninput[type='number'] {\n  -moz-appearance: textfield;\n}\n\n.dark {\n  .sub-zone {\n    opacity: 0.8;\n  }\n}\n.sub-zone {\n  background: $black;\n  position: absolute;\n  opacity: 0.4;\n  top: 0;\n  bottom: 0;\n}\n\n.droppable {\n  background-color: rgba(var(--background-selectable-rgb), 0.5) !important;\n\n  * {\n    pointer-events: none;\n  }\n}\n\n.subchildren {\n  margin-top: 7px;\n}\n\n.subchild-label {\n  display: flex;\n  padding: 5px 5px 5px 15px;\n  margin-left: 40px;\n  margin-bottom: 10px;\n  align-items: center;\n  gap: 10px;\n  border-top-left-radius: 15px;\n  border-bottom-left-radius: 15px;\n  font-weight: 600;\n  color: var(--text);\n}\n\n.subchild {\n  position: relative;\n}\n\n.subchild + .subchild {\n  margin-top: 10px;\n}\n\n.subchild,\n.subchild-label {\n  box-shadow: 0 0 1px 0 $dark-grey-lighter;\n\n  .dark & {\n    box-shadow: 0 0 1px 0 $white;\n  }\n}\n\n.subchild-label:nth-child(even),\n.subchild:nth-child(odd) {\n  background-color: rgba(0, 0, 0, 0.15);\n}\n\n.subchild-label:nth-child(odd),\n.subchild:nth-child(even) {\n  background-color: rgba(0, 0, 0, 0.05);\n}\n\n.subchild {\n  .day-off {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    margin-left: -1px;\n\n    .day-off-icon {\n      position: initial;\n    }\n  }\n\n  &:nth-child(odd) {\n    .day-off {\n      background-color: #c4c4c4;\n\n      .dark & {\n        background-color: #515357;\n      }\n    }\n  }\n\n  &:nth-child(even) {\n    .day-off {\n      background-color: #e2e2e2;\n\n      .dark & {\n        background-color: #414349;\n      }\n    }\n  }\n}\n</style>\n"],"names":["_sfc_main","modalMixin","ButtonSimple","ModalFooter","TextField","_hoisted_1","_hoisted_2","_createElementBlock","_normalizeClass","$props","_createElementVNode","_ctx","$options","_hoisted_4","_toDisplayString","_hoisted_3","_createVNode","_component_text_field","$data","_cache","$event","_createBlock","_component_button_simple","_createCommentVNode","_component_modal_footer","domMixin","formatListMixin","BriefcaseIcon","ChevronDownIcon","ChevronRightIcon","DepartmentName","EditIcon","EditMilestoneModal","LinkIcon","ListChevronsUpDownIcon","PeopleAvatar","PlusIcon","ProductionName","Spinner","moment","value","mapGetters","status","localMilestones","key","days","day","endDate","daysOff","dayOff","indexNextMonth","weeks","startDate","dayDate","endDayDate","nextDay","momentDay","parseDate","index","dayIndex","d","weekIndex","w","acc","timeElement","firstDay","today","isVisible","diff","mapActions","getDayOffRange","children","subChildren","items","values","item","rootElement","setItemPositions","childElement","subchildElement","child","isStartDateOk","isEndDateOk","event","estimation","daysToMinutes","addBusinessDays","cursorX","left","date","dateString","element","change","dayChange","target","currentRootElement","previousAssigneeId","newAssigneeId","assigneeId","newRootElement","previousRootElement","id","startDateIndex","length","currentIndex","newStartDate","newEndDate","dateDiff","endDateIndex","getBusinessDays","isCtrlKey","itemToAdd","itemToRemove","position","newTop","newLeft","top","previousLeft","movementX","previousTop","movementY","unitOfTime","first","root","header","expanded","style","color","nbLines","marginBottom","multiline","opacityPercentage","opacityColor","elementColor","timesheet","withEstimations","isSelected","task","name","duration","lengthDiff","level","colors","isMultiline","setBackground","milestone","err","milestoneDate","person","isTeamMember","isDepartmentMember","dataKey","entityId","taskTypeId","dayPosition","dropDate","minutesToDays","formatFullDate","attributeName","matrix","minDate","nbColumns","start","end","line","getFreeLinePosition","_hoisted_5","_hoisted_7","_hoisted_8","_hoisted_12","_hoisted_14","_hoisted_15","_hoisted_17","_hoisted_20","_hoisted_21","_hoisted_23","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_33","_hoisted_34","_hoisted_35","_hoisted_36","_hoisted_37","_hoisted_38","_hoisted_39","_hoisted_40","_hoisted_41","_hoisted_42","_hoisted_44","_hoisted_45","_hoisted_46","_hoisted_47","_hoisted_48","_hoisted_49","_hoisted_50","_hoisted_51","_hoisted_52","_hoisted_53","_hoisted_55","_hoisted_56","_hoisted_57","_hoisted_58","_hoisted_59","_hoisted_60","_openBlock","args","_component_list_chevrons_up_down_icon","_Fragment","_renderList","_normalizeStyle","_component_chevron_down_icon","_component_chevron_right_icon","_hoisted_6","_component_production_name","_component_people_avatar","departmentId","_component_department_name","_component_router_link","_withCtx","_component_link_icon","_hoisted_9","_hoisted_10","_hoisted_11","_component_spinner","_hoisted_13","personId","_createTextVNode","j","_hoisted_16","_hoisted_18","_hoisted_19","_hoisted_22","_hoisted_24","_hoisted_25","_hoisted_26","_component_briefcase_icon","_component_edit_icon","_component_plus_icon","week","_hoisted_32","_vShow","_hoisted_43","task_id","_hoisted_54","subchild","_component_edit_milestone_modal"],"mappings":"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"}