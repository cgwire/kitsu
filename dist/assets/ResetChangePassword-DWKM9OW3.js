import{_ as g,m as C,cU as v,r as u,j as k,c,o as l,e as s,l as a,t as r,b6 as _,bu as m,f as h,d as L,n as S,a2 as d,w as y,cY as E}from"./index-DxngxtIo.js";const P={name:"reset-change-password",components:{LockIcon:v},data(){return{password:"",password2:"",isLoading:!1,isError:!1,isFormError:!1,isSuccess:!1,secondsLeft:5}},mounted(){this.$store.commit("LOGIN_SUCCESS"),this.isLoading=!1,this.isError=!1,this.secondsLeft=5},methods:{...C(["resetChangePassword"]),confirmResetChangePassword(){this.isFormError=!1,this.isError=!1,E.isPasswordValid(this.password,this.password2)?(this.isLoading=!0,this.isSuccess=!1,this.resetChangePassword({email:this.$route.query.email,token:this.$route.query.token,password:this.password,password2:this.password2}).then(()=>{this.isLoading=!1,this.isSuccess=!0;const e=setInterval(()=>{this.secondsLeft--,this.secondsLeft===0&&(this.$router.push({name:"login"}),clearInterval(e))},1e3)}).catch(()=>{this.isLoading=!1,this.isError=!0,this.isSuccess=!1})):this.isFormError=!0}},head(){return{title:this.$t("login.reset_change_password_title")}}},R={class:"hero is-fullheight"},b={class:"container has-text-centered"},V={class:"box has-text-left"},I={class:"has-text-centered"},F={class:"title"},N={class:"field mt2"},U={class:"control has-icon"},z=["placeholder"],B={class:"icon"},D={class:"control has-icon"},K=["placeholder"],q={class:"icon"},j={class:"control"},x={class:"has-text-centered"},A={key:0},G={key:1};function M(e,t,O,T,o,n){const p=u("lock-icon"),f=u("router-link"),w=k("focus");return l(),c("div",R,[s("div",b,[s("div",V,[s("div",I,[s("h1",F,r(e.$t("login.reset_change_password_title")),1)]),s("div",N,[s("p",U,[a(s("input",{class:"input is-medium email",type:"password",autocomplete:"new-password",placeholder:e.$t("login.fields.password"),onKeyup:t[0]||(t[0]=m((...i)=>n.confirmResetChangePassword&&n.confirmResetChangePassword(...i),["enter"])),"onUpdate:modelValue":t[1]||(t[1]=i=>o.password=i)},null,40,z),[[_,o.password],[w]]),s("span",B,[h(p,{size:20})])]),s("p",D,[a(s("input",{class:"input is-medium email",type:"password",autocomplete:"new-password",placeholder:e.$t("login.fields.password2"),onKeyup:t[2]||(t[2]=m((...i)=>n.confirmResetChangePassword&&n.confirmResetChangePassword(...i),["enter"])),"onUpdate:modelValue":t[3]||(t[3]=i=>o.password2=i)},null,40,K),[[_,o.password2]]),s("span",q,[h(p,{size:20})])])]),s("p",j,[o.isSuccess?L("",!0):(l(),c("a",{key:0,class:S({"main-button":!0,"is-fullwidth":!0,"is-loading":o.isLoading}),onClick:t[4]||(t[4]=(...i)=>n.confirmResetChangePassword&&n.confirmResetChangePassword(...i))},r(e.$t("login.reset_change_password")),3))]),a(s("p",{class:"error"},r(e.$t("login.reset_change_password_form_failed")),513),[[d,o.isFormError]]),a(s("p",{class:"error"},r(e.$t("login.reset_change_password_failed")),513),[[d,o.isError]]),a(s("p",{class:"success"},r(e.$t("login.reset_change_password_succeed")),513),[[d,o.isSuccess]]),a(s("p",{class:"has-text-centered mt2 mb2"},r(e.$t("login.redirecting",{secondsLeft:o.secondsLeft})),513),[[d,o.isSuccess]]),s("p",x,[h(f,{to:{name:"login"}},{default:y(()=>[o.isSuccess?(l(),c("span",A,r(e.$t("login.back_to_login")),1)):(l(),c("span",G,r(e.$t("login.login_page")),1))]),_:1})])])])])}const $=g(P,[["render",M],["__scopeId","data-v-72181b0f"]]);export{$ as default};
//# sourceMappingURL=ResetChangePassword-DWKM9OW3.js.map
