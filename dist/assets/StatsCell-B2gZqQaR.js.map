{"version":3,"file":"StatsCell-B2gZqQaR.js","sources":["../../src/components/cells/StatsCell.vue"],"sourcesContent":["<template>\n  <td class=\"validation\">\n    <div class=\"flexrow\" v-if=\"displayMode === 'pie'\">\n      <pie-chart\n        class=\"flexrow-item\"\n        width=\"70px\"\n        height=\"50px\"\n        :legend=\"false\"\n        :colors=\"colors\"\n        :data=\"selectedData\"\n      />\n      <span\n        class=\"tag flexrow-item\"\n        :style=\"{ 'background-color': labelColor }\"\n        v-if=\"label\"\n      >\n        {{ label }}\n      </span>\n    </div>\n    <div v-else>\n      <div :key=\"data[0]\" v-for=\"data in selectedData\">\n        <template v-if=\"data[0]\">\n          <span class=\"stats-name\" :style=\"{ color: data[2] }\">\n            {{ data[0] }}\n          </span>\n          <span> : </span>\n          <span class=\"stats-value\">\n            {{ data[1] }} ({{ percent(data[1]) }}%)\n          </span>\n        </template>\n      </div>\n      <span\n        class=\"tag flexrow-item\"\n        :style=\"{ 'background-color': labelColor }\"\n        v-if=\"label\"\n      >\n        {{ label }}\n      </span>\n    </div>\n  </td>\n</template>\n\n<script>\n/**\n * Components to display statistics as a pie or as text depending on the\n * selected display mode. Stats are based on count data (nb of shots or assets)\n * or on frames data (sum of shot frames) depending on the selected count mode.\n * Data format:\n * [['name', count, 'color'], ...  ]\n */\nexport default {\n  name: 'stats-cell',\n\n  props: {\n    colors: {\n      type: Array,\n      required: true\n    },\n    countMode: {\n      type: String,\n      default: 'count'\n    },\n    data: {\n      type: Array,\n      default: () => []\n    },\n    displayMode: {\n      type: String,\n      default: 'pie'\n    },\n    framesData: {\n      type: Array,\n      default: () => []\n    },\n    label: {\n      type: String,\n      default: ''\n    },\n    labelColor: {\n      type: String,\n      default: '#e67e22'\n    }\n  },\n\n  computed: {\n    selectedData() {\n      if (this.countMode === 'frames') {\n        return this.framesData\n      } else {\n        return this.data\n      }\n    },\n\n    total() {\n      return this.selectedData.reduce((acc, entry) => {\n        if (entry[1]) {\n          return acc + entry[1]\n        } else {\n          return acc\n        }\n      }, 0)\n    }\n  },\n\n  methods: {\n    percent(value) {\n      let percent = 0\n      if (this.total > 0) {\n        percent = (value / this.total) * 100\n      }\n      return percent.toFixed(2)\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.stats-name {\n  text-transform: uppercase;\n}\n\n.tag {\n  background: $orange-carrot;\n  color: white;\n  cursor: default;\n  font-weight: bold;\n  text-transform: uppercase;\n}\n</style>\n"],"names":["_sfc_main","acc","entry","value","percent","_hoisted_1","_hoisted_4","_openBlock","_createElementBlock","$props","_hoisted_2","_createVNode","_component_pie_chart","$options","_normalizeStyle","_createCommentVNode","_hoisted_3","_Fragment","_renderList","data","_createElementVNode","_cache","_toDisplayString"],"mappings":"yGAkDA,MAAKA,EAAU,CACb,KAAM,aAEN,MAAO,CACL,OAAQ,CACN,KAAM,MACN,SAAU,EACX,EACD,UAAW,CACT,KAAM,OACN,QAAS,OACV,EACD,KAAM,CACJ,KAAM,MACN,QAAS,IAAM,CAAA,CAChB,EACD,YAAa,CACX,KAAM,OACN,QAAS,KACV,EACD,WAAY,CACV,KAAM,MACN,QAAS,IAAM,CAAA,CAChB,EACD,MAAO,CACL,KAAM,OACN,QAAS,EACV,EACD,WAAY,CACV,KAAM,OACN,QAAS,SACX,CACD,EAED,SAAU,CACR,cAAe,CACb,OAAI,KAAK,YAAc,SACd,KAAK,WAEL,KAAK,IAEf,EAED,OAAQ,CACN,OAAO,KAAK,aAAa,OAAO,CAACC,EAAKC,IAChCA,EAAM,CAAC,EACFD,EAAMC,EAAM,CAAC,EAEbD,EAER,CAAC,CACN,CACD,EAED,QAAS,CACP,QAAQE,EAAO,CACb,IAAIC,EAAU,EACd,OAAI,KAAK,MAAQ,IACfA,EAAWD,EAAQ,KAAK,MAAS,KAE5BC,EAAQ,QAAQ,CAAC,CAC1B,CACF,CACF,EAhHMC,EAAA,CAAA,MAAM,YAAY,KADxB,IAAA,EAES,MAAM,cAFf,IAAA,CAAA,EA0BgBC,EAAA,CAAA,MAAM,aAAa,iDAzBjC,OAAAC,EAAA,EAAAC,EAsCK,KAtCLH,EAsCK,CArCwBI,EAAW,cAAA,OAAtCF,IAAAC,EAgBM,MAhBNE,EAgBM,CAfJC,EAOEC,EAAA,CANA,MAAM,eACN,MAAM,OACN,OAAO,OACN,OAAQ,GACR,OAAQH,EAAM,OACd,KAAMI,EAAY,wCAKbJ,EAAK,WAHbD,EAMO,OAAA,CAjBb,IAAA,EAYQ,MAAM,mBACL,MAbTM,sBAasCL,EAAU,UAAA,CAAA,KAGrCA,EAAK,KAAA,EAAA,CAAA,GAhBhBM,EAAA,GAAA,EAAA,MAmBIR,IAAAC,EAmBM,MAtCVQ,EAAA,EAoBMT,EAAA,EAAA,EAAAC,EAUMS,EA9BZ,KAAAC,EAoByCL,EAAY,aAApBM,QAA3BX,EAUM,MAAA,CAVA,IAAKW,EAAI,CAAA,IACGA,EAAI,CAAA,GAApBZ,EAAA,EAAAC,EAQWS,GA7BnB,IAAA,CAAA,EAAA,CAsBUG,EAEO,OAAA,CAFD,MAAM,aAAc,MAtBpCN,SAsBoDK,EAAI,CAAA,CAAA,CAAA,KACzCA,EAAI,CAAA,CAAA,EAAA,CAAA,EAETE,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAD,EAAgB,YAAV,MAAG,EAAA,GACTA,EAEO,OAFPd,EAEOgB,EADFH,EAAI,CAAA,CAAA,EAAM,KAAEG,EAAGT,EAAO,QAACM,EAAI,CAAA,CAAA,CAAA,EAAO,MACvC,CAAA,QA5BVJ,EAAA,GAAA,EAAA,YAkCcN,EAAK,WAHbD,EAMO,OAAA,CArCb,IAAA,EAgCQ,MAAM,mBACL,MAjCTM,sBAiCsCL,EAAU,UAAA,CAAA,KAGrCA,EAAK,KAAA,EAAA,CAAA,GApChBM,EAAA,GAAA,EAAA"}