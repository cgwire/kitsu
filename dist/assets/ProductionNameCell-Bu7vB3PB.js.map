{"version":3,"file":"ProductionNameCell-Bu7vB3PB.js","sources":["../../src/components/cells/ProductionNameCell.vue"],"sourcesContent":["<template>\n  <div class=\"flexrow production-name\" :title=\"productionInfo\" v-if=\"entry\">\n    <router-link\n      class=\"flexrow flexrow-item\"\n      :to=\"productionRoute\"\n      v-if=\"isLink\"\n    >\n      <div\n        class=\"flexrow-item avatar has-text-centered\"\n        :style=\"style\"\n        v-if=\"withAvatar\"\n      >\n        <template v-if=\"!entry.has_avatar\">\n          {{ generatedAvatar }}\n        </template>\n        <img :src=\"thumbnailPath\" v-else />\n      </div>\n      <span class=\"flexrow-item\" v-if=\"!onlyAvatar\">\n        {{ entry.name }}\n      </span>\n    </router-link>\n    <div class=\"flexrow flexrow-item\" v-else>\n      <div\n        class=\"flexrow-item avatar has-text-centered\"\n        :style=\"style\"\n        v-if=\"withAvatar\"\n      >\n        <template v-if=\"!entry.has_avatar\">\n          {{ generatedAvatar }}\n        </template>\n        <img :src=\"thumbnailPath\" v-else />\n      </div>\n      <span class=\"flexrow-item\" v-if=\"!onlyAvatar\">\n        {{ entry.name }}\n      </span>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex'\n\nimport colors from '@/lib/colors.js'\n\nexport default {\n  name: 'production-name-cell',\n\n  props: {\n    entry: {\n      default: () => {},\n      type: Object\n    },\n    size: {\n      default: 40,\n      type: Number\n    },\n    onlyAvatar: {\n      default: false,\n      type: Boolean\n    },\n    withAvatar: {\n      default: true,\n      type: Boolean\n    },\n    lastProductionScreen: {\n      default: 'assets',\n      type: String\n    },\n    isTooltip: {\n      default: false,\n      type: Boolean\n    },\n    isLink: {\n      default: true,\n      type: Boolean\n    }\n  },\n\n  computed: {\n    ...mapGetters(['isCurrentUserClient']),\n\n    generatedAvatar() {\n      const firstLetter = this.entry.name?.[0] || 'P'\n      return firstLetter.toUpperCase()\n    },\n\n    productionRoute() {\n      return this.sectionPath(this.entry, this.lastProductionScreen)\n    },\n\n    productionInfo() {\n      if (!this.isTooltip) {\n        return ''\n      }\n      const fps = this.entry?.fps\n      const ratio = this.entry?.ratio\n      const resolution = this.entry?.resolution\n      const infos = []\n      if (fps) {\n        infos.push(`${this.$t('productions.fields.fps')}: ${fps}`)\n      }\n      if (ratio) {\n        infos.push(`${this.$t('productions.fields.ratio')}: ${ratio}`)\n      }\n      if (resolution) {\n        infos.push(`${this.$t('productions.fields.resolution')}: ${resolution}`)\n      }\n      return infos.join(' - ')\n    },\n\n    style() {\n      return {\n        background: colors.fromString(this.entry.name),\n        width: `${this.size}px`,\n        height: `${this.size}px`,\n        'font-size': `${this.size - 15}px`,\n        'line-height': `${this.size}px`\n      }\n    },\n\n    thumbnailPath() {\n      const lastUpdate = this.entry.updated_at || this.entry.created_at\n      const timestamp = Date.parse(lastUpdate)\n      return `/api/pictures/thumbnails/projects/${this.entry.id}.png?t=${timestamp}`\n    }\n  },\n\n  methods: {\n    sectionPath(production, section) {\n      const routeName = this.isCurrentUserClient\n        ? 'playlists'\n        : production.homepage || section\n      const route = {\n        name: routeName,\n        params: {\n          production_id: production.id\n        },\n        query: {}\n      }\n      if (production.production_type === 'tvshow') {\n        if (routeName !== 'episodes') {\n          route.name = `episode-${routeName}`\n        }\n        if (\n          !['edits', 'episodes'].includes(routeName) &&\n          production.first_episode_id\n        ) {\n          route.params.episode_id = production.first_episode_id\n        } else {\n          route.params.episode_id = 'all'\n        }\n      } else if (\n        production.production_type === 'shots' &&\n        routeName === 'assets'\n      ) {\n        route.name = 'shots'\n      } else if (\n        production.production_type === 'assets' &&\n        ['shots', 'sequences'].includes(routeName)\n      ) {\n        route.name = 'assets'\n      }\n      const isEntityPage = [\n        'assets',\n        'shots',\n        'edits',\n        'sequences',\n        'episodes'\n      ].includes(routeName)\n      if (isEntityPage) {\n        route.query.search = ''\n      }\n      return route\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.production-name a {\n  color: inherit;\n}\n\n.avatar {\n  border-radius: 12px;\n  img {\n    border-radius: 12px;\n  }\n}\n</style>\n"],"names":["_sfc_main","mapGetters","fps","ratio","resolution","infos","colors","lastUpdate","timestamp","production","section","routeName","route","_hoisted_1","_hoisted_2","_hoisted_5","$props","_createElementBlock","$options","_createBlock","_component_router_link","_withCtx","_normalizeStyle","_openBlock","_Fragment","_createTextVNode","_toDisplayString","_createCommentVNode","_hoisted_3","_hoisted_4","_hoisted_6"],"mappings":"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"}