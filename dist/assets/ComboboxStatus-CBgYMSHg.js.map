{"version":3,"file":"ComboboxStatus-CBgYMSHg.js","sources":["../../src/components/widgets/ComboboxStatus.vue"],"sourcesContent":["<template>\n  <div\n    :class=\"{\n      field: withMargin,\n      'field--narrow': narrow\n    }\"\n  >\n    <label class=\"label\" v-if=\"label.length > 0\">\n      {{ label }}\n    </label>\n    <div class=\"status-combo\" :style=\"comboStyles\">\n      <div class=\"flexrow\" @click=\"toggleStatusList\">\n        <div class=\"selected-status-line flexrow-item\">\n          <span\n            class=\"tag\"\n            :style=\"{\n              background: backgroundColor(currentStatus),\n              color: color(currentStatus)\n            }\"\n            :title=\"currentStatus.name\"\n            v-if=\"currentStatus\"\n          >\n            {{ currentStatus.short_name }}\n          </span>\n        </div>\n        <chevron-down-icon\n          :class=\"{\n            'down-icon': true,\n            'flexrow-item': true,\n            white: colorOnly\n          }\"\n        />\n      </div>\n      <div\n        ref=\"select\"\n        :class=\"{\n          big: big,\n          'select-input': true,\n          'open-top': openTop\n        }\"\n        v-if=\"showStatusList\"\n      >\n        <div\n          :key=\"status.id\"\n          class=\"status-line\"\n          @click=\"selectStatus(status)\"\n          v-for=\"status in sortedTaskStatusList\"\n        >\n          <span\n            class=\"tag\"\n            :style=\"{\n              background: backgroundColor(status),\n              color: color(status)\n            }\"\n            :title=\"status.name\"\n          >\n            {{ status.short_name }}\n          </span>\n        </div>\n      </div>\n    </div>\n    <combobox-mask :displayed=\"showStatusList\" @click=\"toggleStatusList\" />\n  </div>\n</template>\n\n<script>\nimport { ChevronDownIcon } from 'lucide-vue-next'\nimport { mapGetters } from 'vuex'\n\nimport colors from '@/lib/colors'\nimport { sortTaskStatuses } from '@/lib/sorting'\n\nimport ComboboxMask from '@/components/widgets/ComboboxMask.vue'\n\nexport default {\n  name: 'combobox-status',\n\n  components: {\n    ChevronDownIcon,\n    ComboboxMask\n  },\n\n  emits: ['update:modelValue'],\n\n  data() {\n    return {\n      showStatusList: false\n    }\n  },\n\n  props: {\n    big: {\n      default: false,\n      type: Boolean\n    },\n    colorOnly: {\n      default: false,\n      type: Boolean\n    },\n    label: {\n      default: '',\n      type: String\n    },\n    taskStatusList: {\n      default: () => [],\n      type: Array\n    },\n    modelValue: {\n      default: '',\n      type: String\n    },\n    narrow: {\n      default: false,\n      type: Boolean\n    },\n    withMargin: {\n      default: true,\n      type: Boolean\n    },\n    addPlaceholder: {\n      default: false,\n      type: Boolean\n    },\n    openTop: {\n      default: false,\n      type: Boolean\n    },\n    productionId: {\n      default: '',\n      type: String\n    }\n  },\n\n  computed: {\n    ...mapGetters(['isDarkTheme', 'productionMap', 'taskStatusMap']),\n\n    sortedTaskStatusList() {\n      if (this.productionId) {\n        const production = this.productionMap.get(this.productionId)\n        return sortTaskStatuses(this.taskStatusList, production)\n      } else {\n        return this.taskStatusList\n      }\n    },\n\n    currentStatus() {\n      if (this.modelValue) {\n        return this.taskStatusMap.get(this.modelValue)\n      } else if (this.addPlaceholder) {\n        return {\n          short_name: '+ add status',\n          color: '#999'\n        }\n      } else {\n        return this.taskStatusList[0]\n      }\n    },\n\n    comboStyles() {\n      return {\n        width: this.big ? '150px' : '120px',\n        background: this.colorOnly\n          ? this.backgroundColor(this.currentStatus)\n          : this.isDarkTheme\n            ? '#36393F'\n            : '#FEFEFE',\n        color: this.colorOnly ? this.color(this.currentStatus) : 'inherit',\n        'border-top-left-radius': this.colorOnly ? '20px' : '10px',\n        'border-top-right-radius': this.colorOnly ? '0px' : '10px',\n        'border-bottom-left-radius': this.showStatusList\n          ? '0'\n          : this.colorOnly\n            ? '20px'\n            : '10px',\n        'border-bottom-right-radius': this.showStatusList\n          ? '0'\n          : this.colorOnly\n            ? '0px'\n            : '10px'\n      }\n    }\n  },\n\n  methods: {\n    selectStatus(status) {\n      this.$emit('update:modelValue', status.id)\n      this.showStatusList = false\n    },\n\n    backgroundColor(taskStatus) {\n      if ((!taskStatus || taskStatus.name === 'Todo') && !this.isDarkTheme) {\n        return '#ECECEC'\n      } else if (\n        (!taskStatus || taskStatus.name === 'Todo') &&\n        this.isDarkTheme\n      ) {\n        return '#5F626A'\n      } else if (this.isDarkTheme) {\n        return colors.darkenColor(taskStatus.color)\n      } else {\n        return taskStatus.color\n      }\n    },\n\n    color(taskStatus) {\n      if (!taskStatus || taskStatus.name !== 'Todo' || this.isDarkTheme) {\n        return 'white'\n      } else {\n        return '#333'\n      }\n    },\n\n    toggleStatusList() {\n      this.showStatusList = !this.showStatusList\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.dark {\n  .select-input,\n  .status-line,\n  .status-combo {\n    background: $dark-grey-light;\n    border-color: $dark-grey;\n  }\n\n  .status-line:hover {\n    background: $dark-purple;\n  }\n}\n\n.status-combo {\n  background: var(--background);\n  min-width: 120px;\n  width: 120px;\n  border: 1px solid $light-grey-light;\n  user-select: none;\n  cursor: pointer;\n  margin: 0;\n  margin-top: 1px;\n  vertical-align: middle;\n  position: relative;\n}\n\n.status-combo:hover {\n  border: 1px solid $green;\n}\n\n.field--narrow .status-combo {\n  padding: 0;\n  margin: 0;\n  border-radius: 0;\n}\n\n.selected-status-line {\n  text-transform: uppercase;\n  flex: 1;\n}\n\n.status-line {\n  background: $white;\n  cursor: pointer;\n  margin: 0;\n  text-transform: uppercase;\n\n  &:hover {\n    background: $purple;\n  }\n}\n\n.down-icon {\n  width: 15px;\n  min-width: 15px;\n  margin-right: 0.4em;\n  color: $green;\n  cursor: pointer;\n}\n\n.select-input {\n  background: $white;\n  width: 120px;\n  position: absolute;\n  border: 1px solid $light-grey-light;\n  border-bottom-left-radius: 10px;\n  border-bottom-right-radius: 10px;\n  z-index: 300;\n  margin-left: -1px;\n  max-height: 180px;\n  top: 38px;\n  left: 0;\n  overflow-y: auto;\n\n  &.big {\n    width: 150px;\n  }\n\n  &.open-top {\n    top: auto;\n    bottom: 41px;\n  }\n}\n\n.field--narrow {\n  .select-input {\n    top: 33px;\n  }\n}\n\n.field .label {\n  padding-top: 5px;\n}\n\n.down-icon.white {\n  color: $white;\n  margin-right: 0.8em;\n}\n</style>\n"],"names":["_sfc_main","ChevronDownIcon","ComboboxMask","mapGetters","production","sortTaskStatuses","status","taskStatus","colors","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_createElementBlock","_normalizeClass","$props","_hoisted_1","_toDisplayString","_createCommentVNode","_createElementVNode","_normalizeStyle","$options","args","_createVNode","_component_chevron_down_icon","$data","_openBlock","_Fragment","_renderList","$event","_component_combobox_mask"],"mappings":"sJA0EA,MAAKA,EAAU,CACb,KAAM,kBAEN,WAAY,CACV,gBAAAC,EACA,aAAAC,GAGF,MAAO,CAAC,mBAAmB,EAE3B,MAAO,CACL,MAAO,CACL,eAAgB,EAClB,CACF,EAEA,MAAO,CACL,IAAK,CACH,QAAS,GACT,KAAM,SAER,UAAW,CACT,QAAS,GACT,KAAM,SAER,MAAO,CACL,QAAS,GACT,KAAM,QAER,eAAgB,CACd,QAAS,IAAM,CAAA,EACf,KAAM,OAER,WAAY,CACV,QAAS,GACT,KAAM,QAER,OAAQ,CACN,QAAS,GACT,KAAM,SAER,WAAY,CACV,QAAS,GACT,KAAM,SAER,eAAgB,CACd,QAAS,GACT,KAAM,SAER,QAAS,CACP,QAAS,GACT,KAAM,SAER,aAAc,CACZ,QAAS,GACT,KAAM,MACR,GAGF,SAAU,CACR,GAAGC,EAAW,CAAC,cAAe,gBAAiB,eAAe,CAAC,EAE/D,sBAAuB,CACrB,GAAI,KAAK,aAAc,CACrB,MAAMC,EAAa,KAAK,cAAc,IAAI,KAAK,YAAY,EAC3D,OAAOC,EAAiB,KAAK,eAAgBD,CAAU,CACzD,KACE,QAAO,KAAK,cAEhB,EAEA,eAAgB,CACd,OAAI,KAAK,WACA,KAAK,cAAc,IAAI,KAAK,UAAU,EACpC,KAAK,eACP,CACL,WAAY,eACZ,MAAO,MACT,EAEO,KAAK,eAAe,CAAC,CAEhC,EAEA,aAAc,CACZ,MAAO,CACL,MAAO,KAAK,IAAM,QAAU,QAC5B,WAAY,KAAK,UACb,KAAK,gBAAgB,KAAK,aAAa,EACvC,KAAK,YACH,UACA,UACN,MAAO,KAAK,UAAY,KAAK,MAAM,KAAK,aAAa,EAAI,UACzD,yBAA0B,KAAK,UAAY,OAAS,OACpD,0BAA2B,KAAK,UAAY,MAAQ,OACpD,4BAA6B,KAAK,eAC9B,IACA,KAAK,UACH,OACA,OACN,6BAA8B,KAAK,eAC/B,IACA,KAAK,UACH,MACA,MACR,CACF,GAGF,QAAS,CACP,aAAaE,EAAQ,CACnB,KAAK,MAAM,oBAAqBA,EAAO,EAAE,EACzC,KAAK,eAAiB,EACxB,EAEA,gBAAgBC,EAAY,CAC1B,OAAK,CAACA,GAAcA,EAAW,OAAS,SAAW,CAAC,KAAK,YAChD,WAEN,CAACA,GAAcA,EAAW,OAAS,SACpC,KAAK,YAEE,UACE,KAAK,YACPC,EAAO,YAAYD,EAAW,KAAK,EAEnCA,EAAW,KAEtB,EAEA,MAAMA,EAAY,CAChB,MAAI,CAACA,GAAcA,EAAW,OAAS,QAAU,KAAK,YAC7C,QAEA,MAEX,EAEA,kBAAmB,CACjB,KAAK,eAAiB,CAAC,KAAK,cAC9B,CACF,CACF,KAxNA,IAAA,EAOW,MAAM,SAKJE,EAAA,CAAA,MAAM,mCAAmC,EAZtDC,EAAA,CAAA,OAAA,EAAAC,EAAA,CAAA,SAAA,EAAAC,EAAA,CAAA,OAAA,yFACEC,EA6DM,MAAA,CA5DH,MAFLC,EAAA,OAE2BC,EAAA,2BAAmCA,EAAA,WAK/BA,EAAA,MAAM,OAAM,OAAvCF,EAEQ,QAFRG,EAEQC,EADHF,EAAA,KAAK,EAAA,CAAA,GARdG,EAAA,GAAA,EAAA,EAUIC,EAkDM,MAAA,CAlDD,MAAM,eAAgB,MAV/BC,EAUsCC,EAAA,WAAW,IAC3CF,EAqBM,MAAA,CArBD,MAAM,UAAW,4BAAOE,EAAA,kBAAAA,EAAA,iBAAA,GAAAC,CAAA,KAC3BH,EAYM,MAZNV,EAYM,CAJIY,EAAA,mBAPRR,EAUO,OAAA,CAvBjB,IAAA,EAcY,MAAM,MACL,MAfbO,EAAA,CAegD,WAAAC,EAAA,gBAAgBA,EAAA,aAAa,EAAwB,MAAAA,EAAA,MAAMA,EAAA,aAAa,IAI3G,MAAOA,EAAA,cAAc,QAGnBA,EAAA,cAAc,UAAU,EAAA,GAtBvCX,CAAA,GAAAQ,EAAA,GAAA,EAAA,IAyBQK,EAMEC,EAAA,CALC,MA1BXV,EAAA,wCA0BwGC,EAAA,iCAc1FU,EAAA,oBAPRZ,EA0BM,MAAA,CA3DZ,IAAA,EAkCQ,IAAI,SACH,MAnCTC,EAAA,KAmCiCC,EAAA,iCAA2DA,EAAA,aAOpFW,EAAA,EAAA,EAAAb,EAgBMc,EAAA,KA1DdC,EA8C2BP,EAAA,qBAAVf,QAJTO,EAgBM,MAAA,CAfH,IAAKP,EAAO,GACb,MAAM,cACL,QAAKuB,GAAER,EAAA,aAAaf,CAAM,IAG3Ba,EASO,OAAA,CARL,MAAM,MACL,MAlDbC,EAAA,CAkDgD,WAAAC,EAAA,gBAAgBf,CAAM,EAAwB,MAAAe,EAAA,MAAMf,CAAM,IAI7F,MAAOA,EAAO,QAEZA,EAAO,UAAU,EAAA,GAxDhCM,CAAA,CAAA,EAAA,EAAAD,CAAA,eAAAO,EAAA,GAAA,EAAA,MA6DIK,EAAuEO,EAAA,CAAvD,UAAWL,EAAA,eAAiB,QAAOJ,EAAA"}