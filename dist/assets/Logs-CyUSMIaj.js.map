{"version":3,"file":"Logs-CyUSMIaj.js","sources":["../../src/components/pages/logs/Events.vue","../../src/components/lists/PreviewFileList.vue","../../src/components/pages/logs/PreviewFiles.vue","../../src/components/pages/Logs.vue"],"sourcesContent":["<template>\n  <div class=\"mt1\">\n    <div class=\"flexrow\">\n      <date-field\n        class=\"flexrow-item\"\n        :can-delete=\"false\"\n        :max-date=\"today\"\n        :label=\"$t('logs.current_date_label')\"\n        v-model=\"currentDate\"\n      />\n      <people-field\n        class=\"flexrow-item field\"\n        :label=\"$t('main.user')\"\n        :people=\"people\"\n        v-model=\"selectedPerson\"\n      />\n      <button-simple\n        class=\"flexrow-item small\"\n        icon=\"refresh\"\n        @click=\"loadDayEvents\"\n      />\n      <span class=\"flexrow-item nb-events\">\n        {{ filteredEvents.length }} {{ $t('logs.events') }}\n      </span>\n    </div>\n\n    <div class=\"mt2 empty\" v-if=\"!isLoading && !filteredEvents.length\">\n      {{ $t('logs.empty_list') }}\n    </div>\n    <div class=\"has-text-centered\" v-if=\"isLoading\">\n      <spinner />\n    </div>\n    <div class=\"log-list\" v-else>\n      <div\n        class=\"event-line\"\n        :key=\"event.id\"\n        @click=\"selectLine(event)\"\n        v-for=\"event in displayedEvents\"\n      >\n        <span class=\"date tag mr1\">{{ event.date }} </span>\n        <span\n          class=\"type tag\"\n          :title=\"event.type\"\n          :data-status=\"event.shortType\"\n        >\n          {{ event.shortType }}\n        </span>\n        <span class=\"name tag mr1\">{{ event.name }}</span>\n        <ul v-if=\"selectedEvents[event.id]\" @click.stop>\n          <li class=\"flexrow\">\n            <span class=\"key\">user</span>\n            <people-avatar\n              class=\"flexrow-item\"\n              :size=\"20\"\n              :font-size=\"10\"\n              :person=\"personMap.get(event.user_id)\"\n              v-if=\"event.user_id\"\n            />\n            <people-name\n              class=\"flexrow-item\"\n              :person=\"personMap.get(event.user_id)\"\n              with-link\n              v-if=\"event.user_id\"\n            />\n          </li>\n          <li\n            :key=\"`${event.id}-${key}`\"\n            v-for=\"key in Object.keys(event.data).sort()\"\n          >\n            <span class=\"key\">{{ key }}</span>\n            <a :href=\"getLink(event, key)\" v-if=\"isLink(key)\">\n              {{ event.data[key] }}\n            </a>\n            <template v-else>{{ event.data[key] }}</template>\n          </li>\n        </ul>\n      </div>\n      <div class=\"has-text-centered mt1\" v-if=\"hasMoreEvents\">\n        <button-simple\n          :text=\"$t('main.load_more')\"\n          @click=\"displayLimit += PAGE_SIZE\"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapGetters, mapActions } from 'vuex'\nimport moment from 'moment'\n\nimport { formatFullDateWithRevertedTimezone } from '@/lib/time'\nimport { timeMixin } from '@/components/mixins/time'\n\nimport ButtonSimple from '@/components/widgets/ButtonSimple.vue'\nimport DateField from '@/components/widgets/DateField.vue'\nimport PeopleAvatar from '@/components/widgets/PeopleAvatar.vue'\nimport PeopleField from '@/components/widgets/PeopleField.vue'\nimport PeopleName from '@/components/widgets/PeopleName.vue'\nimport Spinner from '@/components/widgets/Spinner.vue'\n\nexport default {\n  name: 'events',\n\n  mixins: [timeMixin],\n\n  components: {\n    ButtonSimple,\n    DateField,\n    PeopleAvatar,\n    PeopleField,\n    PeopleName,\n    Spinner\n  },\n\n  data() {\n    const PAGE_SIZE = 1000\n    return {\n      PAGE_SIZE,\n      currentDate: new Date(),\n      events: [],\n      isLoading: true,\n      selectedEvents: {},\n      selectedPerson: null,\n      displayLimit: PAGE_SIZE\n    }\n  },\n\n  mounted() {\n    this.loadDayEvents()\n  },\n\n  computed: {\n    ...mapGetters(['people', 'personMap', 'user']),\n\n    today() {\n      return moment().toDate()\n    },\n\n    filteredEvents() {\n      let events = this.events\n      if (this.selectedPerson) {\n        events = events.filter(\n          event => event.user_id === this.selectedPerson.id\n        )\n      }\n      return events\n    },\n\n    displayedEvents() {\n      return this.filteredEvents.slice(0, this.displayLimit)\n    },\n\n    hasMoreEvents() {\n      return this.filteredEvents.length > this.displayLimit\n    }\n  },\n\n  methods: {\n    ...mapActions(['loadEvents']),\n\n    loadDayEvents() {\n      const before = moment(this.currentDate).add(1, 'days')\n      const after = moment(this.currentDate)\n      this.selectedEvents = {}\n      this.displayLimit = this.PAGE_SIZE\n      this.isLoading = true\n      this.loadEvents({\n        after: formatFullDateWithRevertedTimezone(after, this.timezone),\n        before: formatFullDateWithRevertedTimezone(before, this.timezone)\n      })\n        .then(events => {\n          this.events = events.map(event => {\n            const [name, type] = event.name.split(':')\n            return {\n              id: event.id,\n              date: this.formatDate(event.created_at),\n              data: event.data,\n              name,\n              shortType: type.substring(0, 3),\n              type,\n              user_id: event.user_id\n            }\n          })\n        })\n        .catch(err => {\n          console.error(err)\n        })\n        .finally(() => {\n          this.isLoading = false\n        })\n    },\n\n    selectLine(event) {\n      this.selectedEvents[event.id] = !this.selectedEvents[event.id]\n    },\n\n    isLink(key) {\n      const linkKeys = ['project_id', 'task_id']\n      return linkKeys.includes(key)\n    },\n\n    getLink(event, key) {\n      const productionId = event.data.project_id\n      const entityType = key.substring(0, key.length - 3)\n      if (entityType === 'project') {\n        return `/productions/${productionId}/news-feed`\n      } else {\n        const entityId = event.data[key]\n        return `/productions/${productionId}/${entityType}s/${entityId}`\n      }\n    }\n  },\n\n  watch: {\n    currentDate() {\n      this.loadDayEvents()\n    }\n  },\n\n  head() {\n    return {\n      title: `${this.$t('logs.title')} - Kitsu`\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.dark {\n  .tag {\n    color: $white;\n    background: $dark-grey;\n  }\n\n  .nb-events {\n    color: $white;\n  }\n}\n\n.empty {\n  color: var(--text);\n  font-style: italic;\n}\n\n.log-list {\n  display: flex;\n  flex-direction: column;\n  margin-bottom: 2em;\n}\n\n.event-line {\n  cursor: pointer;\n  padding: 0.25em;\n  border-radius: 4px;\n  transition: background 0.2s ease;\n\n  &:hover {\n    background: var(--background-selectable);\n  }\n\n  .tag {\n    border-radius: 4px;\n  }\n\n  .date {\n    font-weight: 500;\n    min-width: 140px;\n  }\n\n  .type {\n    text-transform: uppercase;\n    min-width: 50px;\n  }\n\n  .type[data-status='new'] {\n    color: white;\n    background: $green;\n  }\n\n  .type[data-status='upd'] {\n    color: white;\n    background: $blue;\n  }\n\n  .type[data-status='add'] {\n    color: white;\n    background: $dark-purple;\n  }\n\n  .type[data-status='del'] {\n    color: white;\n    background: $red;\n  }\n\n  .type[data-status='sta'] {\n    color: white;\n    background: $pink;\n  }\n\n  .type[data-status='set'] {\n    background: $purple;\n  }\n\n  ul {\n    cursor: default;\n    color: var(--text);\n    border-left: 3px solid $light-grey;\n    list-style-type: none;\n    margin: 1em 1em 2em 0.2em;\n    padding-left: 1em;\n\n    .key {\n      font-weight: 500;\n      width: 170px;\n      display: inline-block;\n    }\n\n    a {\n      color: var(--text);\n\n      &:hover {\n        text-decoration: underline;\n      }\n    }\n  }\n}\n</style>\n","<template>\n  <div class=\"data-list\">\n    <div style=\"overflow: hidden\">\n      <table class=\"datatable\" ref=\"headerWrapper\">\n        <thead class=\"datatable-head\">\n          <tr class=\"datatable-row-header\">\n            <th class=\"date\">\n              {{ $t('logs.preview_files.date') }}\n            </th>\n            <th class=\"production\">\n              {{ $t('logs.preview_files.production') }}\n            </th>\n            <th class=\"entity-name\">\n              {{ $t('logs.preview_files.entity_name') }}\n            </th>\n            <th class=\"task-type\">\n              {{ $t('logs.preview_files.task_type_id') }}\n            </th>\n            <th class=\"revision\">\n              {{ $t('logs.preview_files.revision') }}\n            </th>\n            <th class=\"status\">\n              {{ $t('logs.preview_files.status') }}\n            </th>\n            <th class=\"end-cell\"></th>\n          </tr>\n        </thead>\n      </table>\n    </div>\n\n    <table-info :is-loading=\"isLoading\" :is-error=\"isError\" />\n\n    <div @scroll.passive=\"onBodyScroll\" v-if=\"previewFiles.length > 0\">\n      <table class=\"datatable\">\n        <tbody class=\"datatable-body\">\n          <tr\n            :key=\"previewFile.id\"\n            class=\"datatable-row\"\n            @click=\"redirectToTask(previewFile)\"\n            v-for=\"previewFile in previewFiles\"\n          >\n            <td class=\"date\">\n              {{ formatDate(previewFile.created_at) }}\n            </td>\n            <td class=\"production\">\n              <production-name-cell\n                :entry=\"productionMap.get(previewFile.project_id)\"\n              />\n            </td>\n            <td class=\"entity-name\">\n              {{ previewFile.full_entity_name }}\n            </td>\n            <task-type-cell\n              class=\"task-type\"\n              :task-type=\"taskTypeMap.get(previewFile.task_type_id)\"\n            />\n            <td class=\"revision\">\n              {{ previewFile.revision }}\n            </td>\n            <td class=\"status\" :data-status=\"previewFile.status\">\n              {{ previewFile.status }}\n            </td>\n            <td class=\"end-cell has-text-right\">\n              <button-simple\n                class=\"mark-broken-button\"\n                :text=\"$t('logs.preview_files.mark_broken')\"\n                @click.stop=\"$emit('mark-broken-clicked', previewFile.id)\"\n                v-if=\"previewFile.status === 'processing'\"\n              />\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapGetters, mapActions } from 'vuex'\n\nimport { formatListMixin } from '@/components/mixins/format'\nimport { getTaskPath } from '@/lib/path'\n\nimport ButtonSimple from '@/components/widgets/ButtonSimple.vue'\nimport TableInfo from '@/components/widgets/TableInfo.vue'\nimport ProductionNameCell from '@/components/cells/ProductionNameCell.vue'\nimport TaskTypeCell from '@/components/cells/TaskTypeCell.vue'\n\nexport default {\n  name: 'preview-file-list',\n\n  mixins: [formatListMixin],\n\n  components: {\n    ButtonSimple,\n    ProductionNameCell,\n    TableInfo,\n    TaskTypeCell\n  },\n\n  props: {\n    previewFiles: {\n      type: Array,\n      default: () => []\n    },\n    isLoading: {\n      type: Boolean,\n      default: false\n    },\n    isError: {\n      type: Boolean,\n      default: false\n    }\n  },\n\n  emits: ['mark-broken-clicked'],\n\n  computed: {\n    ...mapGetters(['productionMap', 'taskTypeMap'])\n  },\n\n  methods: {\n    ...mapActions(['loadTask']),\n\n    onBodyScroll(event) {\n      const position = event.target\n      this.$refs.headerWrapper.style.left = `-${position.scrollLeft}px`\n    },\n\n    async redirectToTask(previewFile) {\n      const task = await this.loadTask({ taskId: previewFile.task_id })\n      return this.$router.push(\n        getTaskPath(\n          task,\n          task.project,\n          task.project.production_type === 'tvshow',\n          task.episode,\n          this.taskTypeMap\n        )\n      )\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.date {\n  max-width: 150px;\n  width: 150px;\n}\n\n.production {\n  max-width: 300px;\n  width: 300px;\n}\n\n.entity-name {\n  max-width: 300px;\n  width: 300px;\n  word-break: break-word;\n}\n\n.task-type {\n  max-width: 200px;\n  width: 200px;\n  overflow: auto hidden;\n}\n\n.revision {\n  max-width: 80px;\n  width: 80px;\n}\n\n.status {\n}\n\n.datatable-head {\n  th {\n    border: 0;\n  }\n}\n\ntr:first-child {\n  td:first-child {\n    border-top-left-radius: 10px;\n  }\n  td:last-child {\n    border-top-right-radius: 10px;\n  }\n}\n\ntr:last-child {\n  td:first-child {\n    border-bottom-left-radius: 10px;\n  }\n  td:last-child {\n    border-bottom-right-radius: 10px;\n  }\n}\n\ntr {\n  cursor: pointer;\n}\n\ntd.status {\n  text-transform: uppercase;\n  font-weight: 500;\n}\n\ntd.status[data-status='broken'] {\n  color: red;\n}\n\ntd.status[data-status='processing'] {\n}\n</style>\n","<template>\n  <div class=\"mt1\">\n    <p class=\"flexrow\">\n      <em class=\"flexrow-item\">{{ $t('logs.preview_files.explanation') }}</em>\n      <span class=\"filler\"></span>\n      <button-simple class=\"flexrow-item\" icon=\"refresh\" @click=\"reload\" />\n    </p>\n    <template v-if=\"previewFiles.length === 0 && !previewFilesLoading\">\n      <p class=\"empty\">{{ $t('logs.preview_files.empty_list') }}</p>\n    </template>\n    <template v-else>\n      <preview-file-list\n        :preview-files=\"previewFiles\"\n        :is-loading=\"previewFilesLoading\"\n        @mark-broken-clicked=\"markBrokenClicked\"\n      />\n    </template>\n  </div>\n</template>\n\n<script>\nimport { mapActions, mapGetters } from 'vuex'\n\nimport { timeMixin } from '@/components/mixins/time'\n\nimport ButtonSimple from '@/components/widgets/ButtonSimple.vue'\nimport PreviewFileList from '@/components/lists/PreviewFileList.vue'\n\nexport default {\n  name: 'preview-files',\n\n  mixins: [timeMixin],\n\n  components: {\n    ButtonSimple,\n    PreviewFileList\n  },\n\n  data() {\n    return {\n      previewFilesLoading: true,\n      previewFiles: []\n    }\n  },\n\n  computed: {\n    ...mapGetters(['personMap', 'taskTypeMap', 'user']),\n\n    displayedPreviewFiles() {\n      return this.previewFiles.filter(\n        previewFile => previewFile.status !== 'ready'\n      )\n    }\n  },\n\n  methods: {\n    ...mapActions(['getRunningPreviewFiles', 'markPreviewFileAsBroken']),\n\n    async reload() {\n      this.previewFiles = []\n      this.previewFilesLoading = true\n      this.previewFiles = await this.getRunningPreviewFiles()\n      this.previewFilesLoading = false\n    },\n\n    async markBrokenClicked(previewFileId) {\n      const previewFile = this.previewFiles.find(p => p.id === previewFileId)\n      previewFile.status = 'broken'\n      await this.markPreviewFileAsBroken(previewFileId)\n    }\n  },\n\n  mounted() {\n    this.reload()\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.dark {\n  .tag {\n    color: $white;\n    background: $dark-grey;\n  }\n}\n.tag {\n  border-radius: 4px;\n}\n\nem {\n  color: var(--text);\n}\n\n.date {\n  font-weight: 500;\n}\n\n.status {\n  text-transform: uppercase;\n  min-width: 50px;\n}\n\n.status[data-status='broken'] {\n  color: white;\n  background: $dark-red;\n}\n\n.status[data-status='processing'] {\n  color: white;\n  background: $blue;\n}\n\n.empty {\n  color: var(--text);\n  font-size: 1.2em;\n  font-weight: 500;\n  text-align: center;\n  margin-top: 1em;\n}\n</style>\n","<template>\n  <div class=\"logs fixed-page\">\n    <div class=\"tabs logs-tabs\">\n      <ul>\n        <li :class=\"{ 'is-active': isActiveTab('events') }\">\n          <a @click=\"activeTab = 'events'\">\n            {{ $t('logs.title') }}\n          </a>\n        </li>\n        <li :class=\"{ 'is-active': isActiveTab('preview_files') }\">\n          <a @click=\"activeTab = 'preview_files'\">\n            {{ $t('logs.preview_files.title') }}\n          </a>\n        </li>\n      </ul>\n    </div>\n    <events v-if=\"isActiveTab('events')\" />\n    <preview-files v-if=\"isActiveTab('preview_files')\" />\n  </div>\n</template>\n\n<script>\nimport Events from '@/components/pages/logs/Events.vue'\nimport PreviewFiles from '@/components/pages/logs/PreviewFiles.vue'\n\nexport default {\n  name: 'logs',\n\n  components: {\n    Events,\n    PreviewFiles\n  },\n\n  data() {\n    return {\n      activeTab: 'events'\n    }\n  },\n\n  mounted() {\n    if (this.$route.query.tab) {\n      this.activeTab = this.$route.query.tab\n    }\n  },\n\n  methods: {\n    isActiveTab(tab) {\n      return this.activeTab === tab\n    }\n  },\n\n  watch: {\n    activeTab() {\n      if (this.$route.query.tab !== this.activeTab) {\n        this.$router.push({\n          query: {\n            tab: this.activeTab\n          }\n        })\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.fixed-page {\n  margin-top: 60px;\n  padding: 2em;\n  overflow: scroll;\n}\n\n.tabs.logs-tabs {\n  overflow: visible;\n  ul {\n    margin-left: 0;\n  }\n}\n</style>\n"],"names":["_sfc_main","timeMixin","ButtonSimple","DateField","PeopleAvatar","PeopleField","PeopleName","Spinner","mapGetters","moment","events","event","mapActions","before","after","formatFullDateWithRevertedTimezone","name","type","err","key","productionId","entityType","entityId","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_openBlock","_createElementBlock","_createElementVNode","_createVNode","_component_date_field","$options","_ctx","$data","_cache","$event","_component_people_field","_component_button_simple","_toDisplayString","_hoisted_4","_createCommentVNode","_hoisted_5","_component_spinner","_hoisted_6","_Fragment","_renderList","_withModifiers","_createBlock","_component_people_avatar","_component_people_name","_createTextVNode","_hoisted_14","formatListMixin","ProductionNameCell","TableInfo","TaskTypeCell","position","previewFile","task","getTaskPath","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_component_table_info","$props","args","_component_production_name_cell","_component_task_type_cell","PreviewFileList","previewFileId","p","_component_preview_file_list","Events","PreviewFiles","tab","_normalizeClass","_component_events","_component_preview_files"],"mappings":"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"}