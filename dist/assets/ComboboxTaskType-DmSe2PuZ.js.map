{"version":3,"file":"ComboboxTaskType-DmSe2PuZ.js","sources":["../../src/components/widgets/ComboboxTaskType.vue"],"sourcesContent":["<template>\n  <div :class=\"{ field: withMargin }\">\n    <label class=\"label\" v-if=\"label.length > 0\">\n      {{ label }}\n    </label>\n    <div class=\"task-type-combo\" :class=\"{ disabled, shy }\">\n      <div class=\"flexrow selector\" @click=\"toggleTaskTypeList\">\n        <div class=\"selected-task-type-line flexrow-item\">\n          <task-type-name :task-type=\"currentTaskType\" v-if=\"currentTaskType\" />\n        </div>\n        <chevron-down-icon class=\"ml05 down-icon flexrow-item\" />\n      </div>\n      <teleport to=\"body\">\n        <div\n          class=\"select-input\"\n          :class=\"[{ 'open-top': openTop }, { dark: isDarkTheme }]\"\n          :style=\"tooltipStyle\"\n          v-if=\"showTaskTypeList\"\n        >\n          <div\n            class=\"task-type-line\"\n            :key=\"taskType.id\"\n            @click=\"!disabled && selectTaskType(taskType)\"\n            v-for=\"taskType in taskTypeList\"\n          >\n            <task-type-name :task-type=\"taskType\" />\n          </div>\n        </div>\n      </teleport>\n    </div>\n    <combobox-mask :displayed=\"showTaskTypeList\" @click=\"toggleTaskTypeList\" />\n  </div>\n</template>\n\n<script>\nimport { ChevronDownIcon } from 'lucide-vue-next'\nimport { mapGetters } from 'vuex'\n\nimport ComboboxMask from '@/components/widgets/ComboboxMask.vue'\nimport TaskTypeName from '@/components/widgets/TaskTypeName.vue'\n\nexport default {\n  name: 'combobox-task-type',\n\n  components: {\n    ChevronDownIcon,\n    ComboboxMask,\n    TaskTypeName\n  },\n\n  emits: ['change', 'update:modelValue'],\n\n  data() {\n    return {\n      showTaskTypeList: false,\n      tooltipPosition: { top: 0, left: 0 }\n    }\n  },\n\n  props: {\n    disabled: {\n      default: false,\n      type: Boolean\n    },\n    label: {\n      default: '',\n      type: String\n    },\n    taskTypeList: {\n      default: () => [],\n      type: Array\n    },\n    modelValue: {\n      default: '',\n      type: String\n    },\n    shy: {\n      default: false,\n      type: Boolean\n    },\n    addPlaceholder: {\n      default: false,\n      type: Boolean\n    },\n    placeholder: {\n      type: String\n    },\n    openTop: {\n      default: false,\n      type: Boolean\n    },\n    withMargin: {\n      default: true,\n      type: Boolean\n    }\n  },\n\n  computed: {\n    ...mapGetters(['taskTypeMap', 'isDarkTheme']),\n\n    currentTaskType() {\n      if (this.modelValue) {\n        return this.taskTypeMap.get(this.modelValue)\n      } else if (this.addPlaceholder) {\n        return {\n          name: this.placeholder ?? this.defaultPlaceholder,\n          color: '#E5E5E5',\n          id: ''\n        }\n      } else {\n        return this.taskTypeList[0]\n      }\n    },\n\n    defaultPlaceholder() {\n      return this.$t('task_types.add_task_type_placeholder')\n    },\n\n    tooltipStyle() {\n      return {\n        top: this.tooltipPosition.top + 'px',\n        left: this.tooltipPosition.left + 'px'\n      }\n    }\n  },\n\n  methods: {\n    selectTaskType(taskType) {\n      this.$emit('update:modelValue', taskType.id)\n      this.$emit('change', taskType.id)\n      this.showTaskTypeList = false\n    },\n\n    toggleTaskTypeList(event) {\n      if (this.disabled) {\n        return\n      }\n\n      this.showTaskTypeList = !this.showTaskTypeList\n\n      if (!this.showTaskTypeList) {\n        return\n      }\n\n      const curDiv = event.currentTarget\n      const rect = curDiv.getBoundingClientRect()\n      const scrollTop = window.pageYOffset || document.documentElement.scrollTop\n      const scrollLeft =\n        window.pageXOffset || document.documentElement.scrollLeft\n      this.tooltipPosition = {\n        top: rect.top + scrollTop + 35,\n        left: rect.left + scrollLeft\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.dark {\n  .task-type-line:hover {\n    background: $dark-purple;\n  }\n}\n\n.task-type-combo {\n  background: var(--background);\n  min-width: 200px;\n  width: 200px;\n  border: 1px solid var(--border);\n  user-select: none;\n  cursor: pointer;\n  border-radius: 10px;\n  margin: 0;\n  padding: 0.15em;\n  position: relative;\n\n  &.disabled {\n    pointer-events: none;\n    cursor: not-allowed;\n    opacity: 0.6;\n  }\n\n  &:hover {\n    border: 1px solid $green;\n  }\n}\n\n.selected-task-type-line {\n  background: var(--background);\n  flex: 1;\n  margin: 0;\n  padding: 0.4em;\n  max-width: calc(100% - 27px);\n\n  .task-type-name {\n    align-content: center;\n    white-space: normal;\n  }\n}\n\n.task-type-line {\n  background: var(--background);\n  cursor: pointer;\n  padding: 0.4em;\n  margin: 0;\n\n  &:hover {\n    background: $purple;\n  }\n}\n\n.down-icon {\n  width: 15px;\n  min-width: 15px;\n  margin-right: 0.4em;\n  color: $green;\n  cursor: pointer;\n\n  .disabled & {\n    color: $grey;\n  }\n}\n\n.select-input {\n  background: $white;\n  border: 1px solid var(--border);\n  margin-left: -1px;\n  max-height: 200px;\n  overflow-y: auto;\n  position: absolute;\n  width: 195px;\n  z-index: 1000;\n\n  &.open-top {\n    bottom: 41px;\n  }\n}\n\n.task-type-combo.shy {\n  background: transparent;\n  min-width: 100%;\n  width: 100%;\n  border: 1px solid transparent;\n  border-radius: 5px;\n\n  .down-icon {\n    opacity: 0;\n  }\n\n  .selected-task-type-line,\n  .selected-task-type {\n    background: transparent;\n  }\n\n  &:hover {\n    background: var(--background);\n    border: 1px solid var(--border-alt);\n    .down-icon {\n      opacity: 1;\n    }\n  }\n}\n\n.field .label {\n  padding-top: 5px;\n}\n\n.task-type-name.no-link {\n  cursor: inherit;\n}\n</style>\n"],"names":["_sfc_main","ChevronDownIcon","ComboboxMask","TaskTypeName","mapGetters","taskType","event","rect","scrollTop","scrollLeft","_hoisted_2","_hoisted_3","_createElementBlock","_normalizeClass","$props","_hoisted_1","_toDisplayString","_createCommentVNode","_createElementVNode","$options","args","_createBlock","_component_task_type_name","_createVNode","_component_chevron_down_icon","_Teleport","$data","_ctx","_normalizeStyle","_openBlock","_Fragment","_renderList","$event","_component_combobox_mask"],"mappings":"0LAyCA,MAAKA,EAAU,CACb,KAAM,qBAEN,WAAY,CACV,gBAAAC,EACA,aAAAC,EACA,aAAAC,GAGF,MAAO,CAAC,SAAU,mBAAmB,EAErC,MAAO,CACL,MAAO,CACL,iBAAkB,GAClB,gBAAiB,CAAE,IAAK,EAAG,KAAM,CAAA,CACnC,CACF,EAEA,MAAO,CACL,SAAU,CACR,QAAS,GACT,KAAM,SAER,MAAO,CACL,QAAS,GACT,KAAM,QAER,aAAc,CACZ,QAAS,IAAM,CAAA,EACf,KAAM,OAER,WAAY,CACV,QAAS,GACT,KAAM,QAER,IAAK,CACH,QAAS,GACT,KAAM,SAER,eAAgB,CACd,QAAS,GACT,KAAM,SAER,YAAa,CACX,KAAM,QAER,QAAS,CACP,QAAS,GACT,KAAM,SAER,WAAY,CACV,QAAS,GACT,KAAM,OACR,GAGF,SAAU,CACR,GAAGC,EAAW,CAAC,cAAe,aAAa,CAAC,EAE5C,iBAAkB,CAChB,OAAI,KAAK,WACA,KAAK,YAAY,IAAI,KAAK,UAAU,EAClC,KAAK,eACP,CACL,KAAM,KAAK,aAAe,KAAK,mBAC/B,MAAO,UACP,GAAI,EACN,EAEO,KAAK,aAAa,CAAC,CAE9B,EAEA,oBAAqB,CACnB,OAAO,KAAK,GAAG,sCAAsC,CACvD,EAEA,cAAe,CACb,MAAO,CACL,IAAK,KAAK,gBAAgB,IAAM,KAChC,KAAM,KAAK,gBAAgB,KAAO,IACpC,CACF,GAGF,QAAS,CACP,eAAeC,EAAU,CACvB,KAAK,MAAM,oBAAqBA,EAAS,EAAE,EAC3C,KAAK,MAAM,SAAUA,EAAS,EAAE,EAChC,KAAK,iBAAmB,EAC1B,EAEA,mBAAmBC,EAAO,CAOxB,GANI,KAAK,WAIT,KAAK,iBAAmB,CAAC,KAAK,iBAE1B,CAAC,KAAK,kBACR,OAIF,MAAMC,EADSD,EAAM,cACD,sBAAqB,EACnCE,EAAY,OAAO,aAAe,SAAS,gBAAgB,UAC3DC,EACJ,OAAO,aAAe,SAAS,gBAAgB,WACjD,KAAK,gBAAkB,CACrB,IAAKF,EAAK,IAAMC,EAAY,GAC5B,KAAMD,EAAK,KAAOE,CACpB,CACF,CACF,CACF,KA3JA,IAAA,EAEW,MAAM,SAKJC,EAAA,CAAA,MAAM,sCAAsC,EAPzDC,EAAA,CAAA,SAAA,+GACEC,EA8BM,MAAA,CA9BA,MADRC,SACwBC,EAAA,UAAU,CAAA,IACHA,EAAA,MAAM,OAAM,OAAvCF,EAEQ,QAFRG,EAEQC,EADHF,EAAA,KAAK,EAAA,CAAA,GAHdG,EAAA,GAAA,EAAA,EAKIC,EAwBM,MAAA,CAxBD,MALTL,EAAA,CAKe,kBAAiB,CAAA,SAAWC,EAAA,aAAUA,EAAA,IAAG,CAAA,IAClDI,EAKM,MAAA,CALD,MAAM,mBAAoB,4BAAOC,EAAA,oBAAAA,EAAA,mBAAA,GAAAC,CAAA,KACpCF,EAEM,MAFNR,EAEM,CAD+CS,EAAA,qBAAnDE,EAAsEC,EAAA,CARhF,IAAA,EAQ2B,YAAWH,EAAA,wCARtCF,EAAA,GAAA,EAAA,IAUQM,EAAyDC,EAAA,CAAtC,MAAM,6BAA6B,CAAA,SAExDH,EAgBWI,EAAA,CAhBD,GAAG,MAAM,EAAA,CAKTC,EAAA,sBAJRd,EAcM,MAAA,CA3Bd,IAAA,EAcU,MAdVC,EAAA,CAcgB,eAAc,CAAA,CAAA,WACGC,EAAA,OAAO,QAAYa,EAAA,WAAW,CAAA,CAAA,CAAA,EACpD,MAhBXC,EAgBkBT,EAAA,YAAY,KAGpBU,EAAA,EAAA,EAAAjB,EAOMkB,EAAA,KA1BhBC,EAuB+BjB,EAAA,aAAZT,QAJTO,EAOM,MAAA,CANJ,MAAM,iBACL,IAAKP,EAAS,GACd,QAAK2B,GAAA,CAAGlB,EAAA,UAAYK,EAAA,eAAed,CAAQ,IAG5CkB,EAAwCD,EAAA,CAAvB,YAAWjB,CAAQ,EAAA,KAAA,EAAA,CAAA,WAAA,CAAA,CAzBhD,EAAA,EAAAM,CAAA,eAAAM,EAAA,GAAA,EAAA,SA8BIM,EAA2EU,EAAA,CAA3D,UAAWP,EAAA,iBAAmB,QAAOP,EAAA"}