{"version":3,"file":"video-Yn96Kb74.js","sources":["../../src/lib/video.js"],"sourcesContent":["/*\n * Make sure that given time matches a frame in the video\n */\nexport const roundToFrame = (time, fps) => {\n  const frameFactor = Math.round((1 / fps) * 10000) / 10000\n  const frameNumber = Math.round(time / frameFactor)\n  let roundedTime = frameNumber * frameFactor\n  roundedTime = Math.round(roundedTime * 10000) / 10000\n  return roundedTime\n}\n\nexport const ceilToFrame = (time, fps) => {\n  const frameFactor = Math.round((1 / fps) * 10000) / 10000\n  const frameNumber = Math.ceil(time / frameFactor)\n  let roundedTime = frameNumber * frameFactor\n  roundedTime = Math.ceil(roundedTime * 10000) / 10000\n  return roundedTime\n}\n\nexport const floorToFrame = (time, fps) => {\n  const frameFactor = Math.round((1 / fps) * 10000) / 10000\n  const frameNumber = Math.floor(time / frameFactor)\n  let roundedTime = frameNumber * frameFactor\n  roundedTime = Math.floor(roundedTime * 10000) / 10000\n  return roundedTime\n}\n\n/*\n * Turn a frame number into seconds depending on context.\n */\nexport const frameToSeconds = (nbFrames, production, shot) => {\n  let fps = 25\n  if (shot && shot.fps) fps = shot.fps\n  if (production && production.fps) fps = production.fps\n  return Math.round((nbFrames / fps) * 1000) / 1000\n}\n\n/*\n * Display time in a timecode format.\n */\nexport const formatTime = (rawTime, fps) => {\n  if (rawTime < 0) rawTime = 0\n\n  const time = new Date(1000 * rawTime).toISOString()\n  const milliseconds = parseInt(time.substring(20, 23))\n  const frameDuration = Math.round((1 / fps) * 10000) / 10000\n  const frame = `${Math.round(milliseconds / (1000 * frameDuration))}`.padStart(\n    2,\n    '0'\n  )\n  try {\n    return `${time.substr(11, 8)}:${frame}`\n  } catch (err) {\n    console.error(err)\n    return '00:00:00:00'\n  }\n}\n\n/**\n * Get timecode from frame number.\n */\nexport const formatToTimecode = (frame, fps = 25) => {\n  if (!frame || frame < 0) frame = 0\n  const hours = Math.floor(frame / fps / 3600)\n    .toString()\n    .padStart(2, '0')\n  const minutes = Math.floor((frame - hours * fps * 3600) / fps / 60)\n    .toString()\n    .padStart(2, '0')\n  const seconds = Math.floor(\n    (frame - hours * fps * 3600 - minutes * fps * 60) / fps\n  )\n    .toString()\n    .padStart(2, '0')\n  const frames = (frame % fps).toString().padStart(2, '0')\n  return `${hours}:${minutes}:${seconds}:${frames}`\n}\n\n/*\n * Convert frame to a frame string.\n */\nexport const formatFrame = frame => {\n  if (frame < 0) frame = 0\n  return `${frame}`.padStart(3, '0')\n}\n"],"names":["roundToFrame","time","fps","frameFactor","roundedTime","ceilToFrame","floorToFrame","frameToSeconds","nbFrames","production","shot","formatTime","rawTime","milliseconds","frameDuration","frame","err","formatToTimecode","hours","minutes","seconds","frames","formatFrame"],"mappings":"AAGY,MAACA,EAAe,CAACC,EAAMC,IAAQ,CACzC,MAAMC,EAAc,KAAK,MAAO,EAAID,EAAO,GAAK,EAAI,IAEpD,IAAIE,EADgB,KAAK,MAAMH,EAAOE,CAAW,EACjBA,EAChC,OAAAC,EAAc,KAAK,MAAMA,EAAc,GAAK,EAAI,IACzCA,CACT,EAEaC,EAAc,CAACJ,EAAMC,IAAQ,CACxC,MAAMC,EAAc,KAAK,MAAO,EAAID,EAAO,GAAK,EAAI,IAEpD,IAAIE,EADgB,KAAK,KAAKH,EAAOE,CAAW,EAChBA,EAChC,OAAAC,EAAc,KAAK,KAAKA,EAAc,GAAK,EAAI,IACxCA,CACT,EAEaE,EAAe,CAACL,EAAMC,IAAQ,CACzC,MAAMC,EAAc,KAAK,MAAO,EAAID,EAAO,GAAK,EAAI,IAEpD,IAAIE,EADgB,KAAK,MAAMH,EAAOE,CAAW,EACjBA,EAChC,OAAAC,EAAc,KAAK,MAAMA,EAAc,GAAK,EAAI,IACzCA,CACT,EAKaG,EAAiB,CAACC,EAAUC,EAAYC,IAAS,CAC5D,IAAIR,EAAM,GACV,OAAIQ,GAAQA,EAAK,MAAKR,EAAMQ,EAAK,KAC7BD,GAAcA,EAAW,MAAKP,EAAMO,EAAW,KAC5C,KAAK,MAAOD,EAAWN,EAAO,GAAI,EAAI,GAC/C,EAKaS,EAAa,CAACC,EAASV,IAAQ,CACtCU,EAAU,IAAGA,EAAU,GAE3B,MAAMX,EAAO,IAAI,KAAK,IAAOW,CAAO,EAAE,YAAW,EAC3CC,EAAe,SAASZ,EAAK,UAAU,GAAI,EAAE,CAAC,EAC9Ca,EAAgB,KAAK,MAAO,EAAIZ,EAAO,GAAK,EAAI,IAChDa,EAAQ,GAAG,KAAK,MAAMF,GAAgB,IAAOC,EAAc,CAAC,GAAG,SACnE,EACA,GACJ,EACE,GAAI,CACF,MAAO,GAAGb,EAAK,OAAO,GAAI,CAAC,CAAC,IAAIc,CAAK,EACvC,OAASC,EAAK,CACZ,eAAQ,MAAMA,CAAG,EACV,aACT,CACF,EAKaC,EAAmB,CAACF,EAAOb,EAAM,KAAO,EAC/C,CAACa,GAASA,EAAQ,KAAGA,EAAQ,GACjC,MAAMG,EAAQ,KAAK,MAAMH,EAAQb,EAAM,IAAI,EACxC,SAAQ,EACR,SAAS,EAAG,GAAG,EACZiB,EAAU,KAAK,OAAOJ,EAAQG,EAAQhB,EAAM,MAAQA,EAAM,EAAE,EAC/D,SAAQ,EACR,SAAS,EAAG,GAAG,EACZkB,EAAU,KAAK,OAClBL,EAAQG,EAAQhB,EAAM,KAAOiB,EAAUjB,EAAM,IAAMA,CACxD,EACK,SAAQ,EACR,SAAS,EAAG,GAAG,EACZmB,GAAUN,EAAQb,GAAK,WAAW,SAAS,EAAG,GAAG,EACvD,MAAO,GAAGgB,CAAK,IAAIC,CAAO,IAAIC,CAAO,IAAIC,CAAM,EACjD,EAKaC,EAAcP,IACrBA,EAAQ,IAAGA,EAAQ,GAChB,GAAGA,CAAK,GAAG,SAAS,EAAG,GAAG"}