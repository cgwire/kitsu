import{aL as l,R as c,T as d,m as n,g as r,n as i,X as u,bp as p,b9 as _,bq as f,br as h,bs as m,ap as v,bt as C,a8 as g}from"./index-a3f257ca.js";const y={name:"production-list",props:{entries:{type:Array,default:()=>[]},isError:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1}},data(){return{}},components:{ProductionNameCell:l,RowActionsCell:c,TableInfo:d},computed:{...n(["openProductions","lastProductionScreen"]),closedProductions(){return this.entries.filter(s=>s.project_status_name==="Closed")}},methods:{...r([]),getStatusLocale(s){return{Active:"productions.status.open",Open:"productions.status.open",Closed:"productions.status.closed"}[s]}}};var P=function(){var t=this,e=t._self._c;return e("div",{staticClass:"data-list"},[e("div",{staticClass:"datatable-wrapper"},[e("table",{staticClass:"datatable multi-section"},[e("thead",{staticClass:"datatable-head"},[e("tr",[e("th",{staticClass:"name datatable-row-header",attrs:{scope:"col"}},[t._v(" "+t._s(t.$t("productions.fields.name"))+" ")]),e("th",{staticClass:"type",attrs:{scope:"col"}},[t._v(" "+t._s(t.$t("productions.fields.type"))+" ")]),e("th",{staticClass:"style",attrs:{scope:"col"}},[t._v(" "+t._s(t.$t("productions.fields.style"))+" ")]),e("th",{staticClass:"fps",attrs:{scope:"col"}},[t._v(t._s(t.$t("productions.fields.fps")))]),e("th",{staticClass:"ratio",attrs:{scope:"col"}},[t._v(" "+t._s(t.$t("productions.fields.ratio"))+" ")]),e("th",{staticClass:"resolution",attrs:{scope:"col"}},[t._v(" "+t._s(t.$t("productions.fields.resolution"))+" ")]),e("th",{staticClass:"actions",attrs:{scope:"col"}})])]),e("tbody",{staticClass:"datatable-body"},[e("tr",{staticClass:"datatable-type-header"},[e("th",{attrs:{scope:"rowgroup",colspan:"6"}},[e("span",{staticClass:"datatable-row-header"},[t._v(" "+t._s(t.$t("productions.status.open"))+" ")])])]),t._l(t.openProductions,function(o){return e("tr",{key:o.id,staticClass:"datatable-row"},[e("th",{staticClass:"name datatable-row-header",attrs:{scope:"row"}},[e("production-name-cell",{attrs:{"with-avatar":!0,entry:o,"last-production-screen":t.lastProductionScreen}})],1),e("td",{staticClass:"type"},[t._v(" "+t._s(t.$t("productions.type."+(o.production_type||"short")))+" ")]),e("td",{staticClass:"style"},[t._v(" "+t._s(t.$t("productions.style."+(o.production_style||"2d3d")))+" ")]),e("td",{staticClass:"fps"},[t._v(" "+t._s(o.fps)+" ")]),e("td",{staticClass:"ratio"},[t._v(" "+t._s(o.ratio)+" ")]),e("td",{staticClass:"resolution"},[t._v(" "+t._s(o.resolution)+" ")]),e("row-actions-cell",{attrs:{"entry-id":o.id,"hide-delete":!0},on:{"edit-clicked":function(a){return t.$emit("edit-clicked",o)}}})],1)})],2),t.closedProductions.length>0?e("tbody",[e("tr",{staticClass:"datatable-type-header"},[e("th",{attrs:{scope:"rowgroup",colspan:"6"}},[e("span",{staticClass:"datatable-row-header"},[t._v(" "+t._s(t.$t("productions.status.closed"))+" ")])])]),t._l(t.closedProductions,function(o){return e("tr",{key:o.id,staticClass:"datatable-row"},[e("th",{staticClass:"name datatable-row-header",attrs:{scope:"row"}},[e("production-name-cell",{attrs:{"with-avatar":!0,entry:o,"last-production-screen":t.lastProductionScreen,"is-link":!1}})],1),e("td",{staticClass:"type"},[t._v(" "+t._s(t.$t("productions.type."+(o.production_type||"short")))+" ")]),e("td",{staticClass:"style"},[t._v(" "+t._s(t.$t("productions.style."+(o.production_style||"2d3d")))+" ")]),e("td",{staticClass:"fps"},[t._v(" "+t._s(o.fps)+" ")]),e("td",{staticClass:"ratio"},[t._v(" "+t._s(o.ratio)+" ")]),e("td",{staticClass:"resolution"},[t._v(" "+t._s(o.resolution)+" ")]),e("row-actions-cell",{attrs:{"entry-id":o.id},on:{"edit-clicked":function(a){return t.$emit("edit-clicked",o)},"delete-clicked":function(a){return t.$emit("delete-clicked",o)}}})],1)})],2):t._e()])]),e("table-info",{attrs:{"is-loading":t.isLoading,"is-error":t.isError}}),e("p",{staticClass:"has-text-centered nb-productions"},[t._v(" "+t._s(t.entries.length)+" "+t._s(t.$tc("productions.number",t.entries.length))+" ")])],1)},b=[],$=i(y,P,b,!1,null,"0eec60e6",null,null);const w=$.exports;const x={name:"button-link",components:{DownloadIcon:u,EditIcon:p,PlusIcon:_,RotateCcwIcon:f,TrashIcon:h,UploadIcon:m},props:{text:{default:"",type:String},title:{default:"",type:String},path:{default:""},icon:{default:"",type:String},isResponsive:{default:!1,type:Boolean}},computed:{isText(){return this.text&&this.text.length>0}}};var D=function(){var t=this,e=t._self._c;return e("router-link",{staticClass:"button",attrs:{title:t.title,to:t.path}},[t.icon.length>0&&t.icon.startsWith("fa")?e("span",{staticClass:"icon is-small"},[e("i",{class:"fa "+t.icon})]):t._e(),t.icon==="plus"?e("plus-icon",{class:{icon:!0,"is-small":!0,"only-icon":!t.isText}}):t._e(),t.icon==="download"?e("download-icon",{class:{icon:!0,"is-small":!0,"only-icon":!t.isText}}):t._e(),t.icon==="upload"?e("upload-icon",{class:{icon:!0,"is-small":!0,"only-icon":!t.isText}}):t._e(),t.icon==="edit"?e("edit-icon",{class:{icon:!0,"is-small":!0,"only-icon":!t.isText}}):t._e(),t.icon==="delete"?e("trash-icon",{class:{icon:!0,"is-small":!0,"only-icon":!t.isText}}):t._e(),t.icon==="restore"?e("rotate-ccw-icon",{class:{icon:!0,"is-small":!0,"only-icon":!t.isText}}):t._e(),t.isText?e("span",{class:{text:!0,"is-hidden-touch":t.isResponsive}},[t._v(" "+t._s(t.text)+" ")]):t._e()],1)},T=[],k=i(x,D,T,!1,null,"0f99564c",null,null);const E=k.exports;const L={name:"productions",components:{ButtonLink:E,HardDeleteModal:v,EditProductionModal:C,PageTitle:g,ProductionList:w},data(){return{errors:{del:!1,edit:!1},loading:{del:!1,edit:!1},modals:{isNewDisplayed:!1,isDeleteDisplayed:!1},productionToDelete:null,productionToEdit:null,choices:[]}},computed:{...n(["isProductionsLoading","isProductionsLoadingError","productionAvatarFormData","productions"]),currentLockText(){var s;return((s=this.productionToDelete)==null?void 0:s.name)||""}},created(){this.loadProductions()},methods:{...r(["deleteProduction","loadProductions","storeProductionPicture","uploadProductionAvatar"]),confirmEditProduction(s){let t="newProduction";const e=this.productionToEdit&&this.productionToEdit.id;e&&(t="editProduction",s.id=this.productionToEdit.id),this.loading.edit=!0,this.errors.edit=!1,this.$store.dispatch(t,s).then(()=>e&&this.productionAvatarFormData?this.uploadProductionAvatar(s.id):Promise.resolve()).then(()=>{this.modals.isNewDisplayed=!1,this.loading.edit=!1}).catch(o=>{console.error(o),this.loading.edit=!1,this.errors.edit=!0})},confirmDeleteProduction(){this.loading.del=!0,this.errors.del=!1,this.deleteProduction(this.productionToDelete).then(()=>{this.modals.isDeleteDisplayed=!1,this.loading.del=!1}).catch(s=>{console.error(s),this.errors.del=!0,this.loading.del=!1})},deleteText(){const s=this.productionToDelete;return s?this.$t("productions.delete_text",{name:s.name}):""},onEditClicked(s){this.productionToEdit=s,this.modals.isNewDisplayed=!0},onDeleteClicked(s){this.productionToDelete=s,this.modals.isDeleteDisplayed=!0},onNewClicked(s){this.productionToEdit={},this.modals.isNewDisplayed=!0},onProductionPictureSelected(s){this.storeProductionPicture(s)}},watch:{},metaInfo(){return{title:`${this.$t("productions.title")} - Kitsu`}}};var S=function(){var t=this,e=t._self._c;return e("div",{staticClass:"productions page fixed-page"},[e("div",{staticClass:"level page-header"},[e("div",{staticClass:"level-left"},[e("page-title",{attrs:{text:t.$t("productions.title")}})],1),e("div",{staticClass:"level-right"},[e("div",{staticClass:"level-item"},[e("button-link",{staticClass:"level-item",attrs:{text:t.$t("productions.new_production"),icon:"plus",path:{name:"new-production"}}})],1)])]),e("production-list",{attrs:{entries:t.productions,"is-loading":t.isProductionsLoading,"is-error":t.isProductionsLoadingError},on:{"delete-clicked":t.onDeleteClicked,"edit-clicked":t.onEditClicked}}),e("edit-production-modal",{attrs:{active:t.modals.isNewDisplayed,"is-loading":t.loading.edit,"is-error":t.errors.edit,"production-to-edit":t.productionToEdit},on:{cancel:function(o){t.modals.isNewDisplayed=!1},fileselected:t.onProductionPictureSelected,confirm:t.confirmEditProduction}}),e("hard-delete-modal",{attrs:{active:t.modals.isDeleteDisplayed,"is-loading":t.loading.del,"is-error":t.errors.del,text:t.deleteText(),"error-text":t.$t("productions.delete_error"),"lock-text":t.currentLockText},on:{cancel:function(o){t.modals.isDeleteDisplayed=!1},confirm:t.confirmDeleteProduction}})],1)},A=[],I=i(L,S,A,!1,null,"b0fff3bb",null,null);const R=I.exports;export{R as default};
//# sourceMappingURL=Productions-04dbba5f.js.map
