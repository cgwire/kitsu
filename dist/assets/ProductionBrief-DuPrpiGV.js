import{_ as p,aq as m,m as h,a as g,bq as _,B as b,r as a,c as t,o as i,e as d,t as c,f as l,d as k,bs as x,ai as y}from"./index-D4XQA-49.js";const B={name:"production-brief",components:{ButtonSimple:b,TextareaField:_},data(){return{brief:"",isEditing:!1,isLoading:!1,errors:{editBrief:!1}}},computed:{...g(["currentProduction","isCurrentUserManager"]),textarea(){return this.$refs.textarea}},mounted(){this.brief=this.currentProduction?.description},methods:{...h(["editProduction"]),openEditing(){this.isCurrentUserManager&&(this.isEditing=!0,this.$nextTick(()=>{this.textarea.focus()}))},async editBrief(){this.isLoading=!0,this.errors.editBrief=!1;try{await this.editProduction({id:this.currentProduction.id,description:this.brief}),this.isEditing=!1}catch{this.errors.editBrief=!0}this.isLoading=!1},renderMarkdown:m}},P={class:"production-brief"},v={key:0},E=["innerHTML"],L={key:1,class:"box has-text-right"},M={key:0,class:"error mt1 has-text-right"};function C(r,n,V,w,e,s){const u=a("textarea-field"),f=a("button-simple");return i(),t("div",P,[e.isEditing?(i(),t("div",L,[l(u,{class:"editor",ref:"textarea","input-class":"textarea",onKeyup:x(y(s.editBrief,["ctrl"]),["enter"]),modelValue:e.brief,"onUpdate:modelValue":n[1]||(n[1]=o=>e.brief=o)},null,8,["onKeyup","modelValue"]),e.errors.editBrief?(i(),t("p",M,c(r.$t("productions.brief.edit_error")),1)):k("",!0),d("p",null,[l(f,{"is-primary":!0,"is-loading":e.isLoading,disabled:e.isLoading,text:r.$t("main.save"),onClick:s.editBrief},null,8,["is-loading","disabled","text","onClick"])])])):(i(),t("div",{key:0,class:"box",onDblclick:n[0]||(n[0]=(...o)=>s.openEditing&&s.openEditing(...o))},[r.currentProduction?.description?(i(),t("div",{key:1,class:"content",innerHTML:s.renderMarkdown(r.currentProduction.description)},null,8,E)):(i(),t("div",v,[d("p",null,c(r.$t("productions.brief.empty")),1)]))],32))])}const K=p(B,[["render",C],["__scopeId","data-v-a60df982"]]);export{K as P};
//# sourceMappingURL=ProductionBrief-DuPrpiGV.js.map
