{"version":3,"file":"BuildFilterModal-C18AF9bI.js","sources":["../../src/components/mixins/descriptors.js","../../src/components/widgets/ComboboxTag.vue","../../src/components/widgets/MetadataField.vue","../../src/components/modals/BuildFilterModal.vue"],"sourcesContent":["/*\n * Set of function to facilitate the display and edition of metadata in\n * entity lists.\n */\nimport { mapGetters } from 'vuex'\n\nexport const descriptorMixin = {\n  emits: [\n    'add-metadata',\n    'change-sort',\n    'delete-metadata',\n    'edit-metadata',\n    'metadata-changed'\n  ],\n\n  computed: {\n    ...mapGetters([\n      'isCurrentUserSupervisor',\n      'selectedAssets',\n      'selectedShots',\n      'selectedEdits',\n      'user'\n    ]),\n\n    descriptorLength() {\n      if (this.shotMetadataDescriptors.length !== undefined) {\n        return this.shotMetadataDescriptors.length\n      }\n      if (this.assetMetadataDescriptors.length !== undefined) {\n        return this.assetMetadataDescriptors.length\n      }\n      if (this.editMetadataDescriptors.length !== undefined) {\n        return this.editMetadataDescriptors.length\n      }\n      return 0\n    }\n  },\n\n  methods: {\n    onAddMetadataClicked() {\n      this.$emit('add-metadata')\n    },\n\n    emitMetadataChanged(entry, descriptor, value) {\n      this.$emit('metadata-changed', {\n        entry,\n        descriptor,\n        value\n      })\n    },\n\n    onMetadataFieldChanged(entry, descriptor, event) {\n      let value\n      if (typeof event === 'string') {\n        value = event\n      } else if (!event.target.validity.valid) {\n        return\n      } else if (descriptor.data_type === 'boolean') {\n        value = event.target.checked ? 'true' : 'false'\n      } else if (descriptor.data_type === 'number') {\n        value = !isNaN(event.target.valueAsNumber)\n          ? event.target.valueAsNumber\n          : null\n      } else {\n        value = event.target.value\n      }\n\n      if (this.selectedShots.has(entry.id)) {\n        // if the line is selected, also modify the cells of the other selected\n        // lines.\n        this.selectedShots.forEach(shot => {\n          this.emitMetadataChanged(shot, descriptor, value)\n        })\n      } else if (this.selectedAssets.has(entry.id)) {\n        // if the line is selected, also modify the cells of the other selected\n        // lines.\n        this.selectedAssets.forEach(asset => {\n          this.emitMetadataChanged(asset, descriptor, value)\n        })\n      } else if (this.selectedEdits.has(entry.id)) {\n        // if the line is selected, also modify the cells of the other selected\n        // lines.\n        this.selectedEdits.forEach(edit => {\n          this.emitMetadataChanged(edit, descriptor, value)\n        })\n      } else if (this.selectedEpisodes && this.selectedEpisodes.has(entry.id)) {\n        // if the line is selected, also modify the cells of the other selected\n        // lines.\n        this.selectedEpisodes.forEach(episode => {\n          this.emitMetadataChanged(episode, descriptor, value)\n        })\n      } else {\n        this.emitMetadataChanged(entry, descriptor, value)\n      }\n    },\n\n    onMetadataChecklistChanged(entry, descriptor, option, event) {\n      const values = this.getMetadataChecklistValues(descriptor, entry)\n      values[option] = event.target.checked\n      event.target.value = JSON.stringify(values)\n      this.onMetadataFieldChanged(entry, descriptor, event)\n    },\n\n    onSortByMetadataClicked() {\n      const columnId = this.lastMetadaDataHeaderMenuDisplayed\n      const column = this.currentProduction.descriptors.find(\n        d => d.id === columnId\n      )\n      this.$emit('change-sort', {\n        type: 'metadata',\n        column: column.field_name,\n        name: column.name,\n        data_type: column.data_type\n      })\n      this.showMetadataHeaderMenu()\n    },\n\n    onEditMetadataClicked() {\n      this.$emit('edit-metadata', this.lastMetadaDataHeaderMenuDisplayed)\n      this.showMetadataHeaderMenu()\n    },\n\n    onDeleteMetadataClicked() {\n      this.$emit('delete-metadata', this.lastMetadaDataHeaderMenuDisplayed)\n      this.showMetadataHeaderMenu()\n    },\n\n    showMetadataHeaderMenu(columnId, event) {\n      const headerMenuEl = this.$refs.headerMetadataMenu.$el\n      if (headerMenuEl.className === 'header-menu') {\n        headerMenuEl.className = 'header-menu hidden'\n      } else {\n        headerMenuEl.className = 'header-menu'\n        const headerElement = event.srcElement.parentNode.parentNode\n        const headerBox = headerElement.getBoundingClientRect()\n        const left = headerBox.left - 3\n        const top = headerBox.bottom + 11\n        const width = Math.max(100, headerBox.width - 1)\n        headerMenuEl.style.left = left + 'px'\n        headerMenuEl.style.top = top + 'px'\n        headerMenuEl.style.width = width + 'px'\n      }\n      this.lastMetadaDataHeaderMenuDisplayed = columnId\n    },\n\n    getDescriptorChoicesOptions(descriptor, emptyChoice = true) {\n      const values = descriptor.choices.map(c => ({ label: c, value: c }))\n      if (emptyChoice) {\n        values.unshift({ label: '', value: '' })\n      }\n      return values\n    },\n\n    getMetadataFieldValue(descriptor, entity) {\n      if (\n        entity.data &&\n        descriptor.field_name in entity.data &&\n        entity.data[descriptor.field_name] != null\n      ) {\n        return entity.data[descriptor.field_name]\n      } else if (\n        entity.entity_data &&\n        descriptor.field_name in entity.entity_data &&\n        entity.entity_data[descriptor.field_name] != null\n      ) {\n        return entity.entity_data[descriptor.field_name]\n      } else {\n        return ''\n      }\n    },\n\n    getDescriptorChecklistValues(descriptor) {\n      const values = descriptor.choices.reduce((result, choice) => {\n        if (choice && typeof choice === 'string' && choice.startsWith('[x] ')) {\n          result.push({ text: choice.slice(4), checked: true })\n        } else if (\n          choice &&\n          typeof choice === 'string' &&\n          choice.startsWith('[ ] ')\n        ) {\n          result.push({ text: choice.slice(4), checked: false })\n        }\n        return result\n      }, [])\n      return values.length === descriptor.choices.length ? values : []\n    },\n\n    getMetadataChecklistValues(descriptor, entity) {\n      let values\n      try {\n        values = JSON.parse(this.getMetadataFieldValue(descriptor, entity))\n      } catch {\n        values = {}\n      }\n      this.getDescriptorChecklistValues(descriptor).forEach(function (option) {\n        if (!(option.text in values)) {\n          values[option.text] = option.checked\n        }\n      })\n      return values\n    },\n\n    isSupervisorInDepartments(departments = []) {\n      if (!Array.isArray(departments)) {\n        departments = [departments]\n      }\n      return (\n        this.isCurrentUserSupervisor &&\n        (this.user.departments.length === 0 ||\n          this.user.departments.some(department =>\n            departments.includes(department)\n          ))\n      )\n    },\n\n    /*\n     * Determine what is the next input by building a reference key and\n     * retrieve it from the main reference array.\n     * The next input is determined from the arrow key used. If the key is\n     * not an arrow nothing is done.\n     */\n    keyMetadataNavigation(listWidth, listHeight, i, j, key) {\n      if (key === 'ArrowDown') {\n        i = i + 1\n        if (i >= listHeight) i = 0\n      } else if (key === 'ArrowLeft') {\n        j = j - 1\n        if (j < 0) j = listWidth - 1\n      } else if (key === 'ArrowRight') {\n        j = j + 1\n        if (j >= listWidth) j = 0\n      } else if (key === 'ArrowUp') {\n        i = i - 1\n        if (i < 0) i = listHeight - 1\n      } else {\n        return\n      }\n      const ref = `editor-${i}-${j}`\n      if (this.$refs[ref][0]) {\n        const input = this.$refs[ref][0]\n        input.focus()\n      }\n    }\n  }\n}\n","<template>\n  <div :class=\"{ field: withMargin }\">\n    <label class=\"label\" v-if=\"label.length > 0\">\n      {{ label }}\n    </label>\n    <div\n      :class=\"{\n        combo: true,\n        thin: thin,\n        reversed: isReversed,\n        open: showList,\n        shy: shy\n      }\"\n      ref=\"select\"\n    >\n      <div class=\"flexrow\" @click=\"toggleList\" :title=\"renderedValue\">\n        <div class=\"selected-line flexrow-item ellipsis\">\n          {{ renderedValue }}\n        </div>\n        <chevron-down-icon class=\"down-icon flexrow-item\" />\n      </div>\n      <div class=\"select-input\" v-if=\"showList\">\n        <div\n          :key=\"option.id\"\n          class=\"option-line flexrow\"\n          @click=\"!disabled && selectOption(option)\"\n          v-for=\"option in optionList\"\n        >\n          <input\n            type=\"checkbox\"\n            class=\"mr05\"\n            :checked=\"isChecked(option)\"\n            :disabled=\"disabled\"\n          />\n          {{ getOptionLabel(option) }}\n        </div>\n      </div>\n    </div>\n    <div\n      @click=\"toggleList\"\n      :class=\"{\n        'c-mask': true,\n        'is-active': showList\n      }\"\n    ></div>\n  </div>\n</template>\n\n<script>\nimport { ChevronDownIcon } from 'lucide-vue-next'\n\nimport { sortByValue } from '@/lib/sorting'\n\nexport default {\n  name: 'combobox-tag',\n\n  components: {\n    ChevronDownIcon\n  },\n\n  emits: ['change', 'update:modelValue'],\n\n  data() {\n    return {\n      showList: false\n    }\n  },\n\n  props: {\n    disabled: {\n      default: false,\n      type: Boolean\n    },\n    label: {\n      default: '',\n      type: String\n    },\n    options: {\n      default: () => [],\n      type: Array\n    },\n    modelValue: {\n      default: '',\n      type: String\n    },\n    localeKeyPrefix: {\n      default: '',\n      type: String\n    },\n    isReversed: {\n      default: false,\n      type: Boolean\n    },\n    shy: {\n      default: false,\n      type: Boolean\n    },\n    thin: {\n      default: false,\n      type: Boolean\n    },\n    withMargin: {\n      default: true,\n      type: Boolean\n    }\n  },\n\n  computed: {\n    optionList() {\n      const sortedOptions = sortByValue([...this.options])\n      if (this.isReversed) {\n        sortedOptions.reverse()\n      }\n      return sortedOptions\n    },\n\n    renderedValue() {\n      return this.modelValue.split(',').filter(Boolean).sort().join(', ')\n    }\n  },\n\n  methods: {\n    selectOption(option) {\n      let values = this.modelValue.split(',').filter(Boolean)\n      if (values.includes(option.value)) {\n        values.splice(values.indexOf(option.value), 1)\n      } else {\n        values = this.optionList\n          .filter(\n            oldOption =>\n              this.isChecked(oldOption) || oldOption.value === option.value\n          )\n          .map(oldOption => oldOption.value)\n      }\n      const value = values.join(',')\n      this.$emit('update:modelValue', value)\n      this.$emit('change', value)\n    },\n\n    toggleList() {\n      if (this.showList) {\n        this.lastScrollPosition = this.$refs.select.scrollTop\n      }\n      this.showList = !this.showList\n      if (this.showList) {\n        this.$nextTick(() => {\n          this.$refs.select?.scrollTo({ top: this.lastScrollPosition, left: 0 })\n        })\n      }\n    },\n\n    getOptionLabel(option) {\n      if (this.localeKeyPrefix && option.label) {\n        return this.$t(this.localeKeyPrefix + option.label.toLowerCase())\n      }\n      return option.label\n    },\n\n    isChecked(option) {\n      const values = this.modelValue.split(',')\n      return values.includes(option.value)\n    }\n  },\n\n  watch: {\n    showList() {\n      if (this.showList) {\n        this.$nextTick(() => {\n          if (!this.$refs.select?.children) return\n          let list = null\n          for (const child of this.$refs.select.children) {\n            if (child.className !== 'flexrow') {\n              list = child\n            }\n          }\n          list?.scrollTo({ top: this.optionList.length * 60 })\n        })\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.dark {\n  .select-input,\n  .selected-line,\n  .option-line,\n  .combo {\n    color: var(--text);\n    background: $dark-grey-light;\n    border-color: $dark-grey;\n  }\n\n  .option-line:hover {\n    background: $dark-purple;\n  }\n}\n\n.combo {\n  background: $white;\n  border: 1px solid $light-grey-light;\n  border-radius: 10px;\n  user-select: none;\n  cursor: pointer;\n  display: inline-block;\n  margin: 0;\n  margin-top: 1px;\n  width: 100%;\n  padding: 0.5em;\n  position: relative;\n  vertical-align: middle;\n\n  &.open {\n    border-bottom-left-radius: 0;\n    border-bottom-right-radius: 0;\n  }\n\n  &.shy {\n    background: transparent;\n    min-width: 100%;\n    width: 100%;\n    border: 1px solid transparent;\n    border-radius: 5px;\n\n    .down-icon {\n      opacity: 0;\n    }\n\n    .selected-line {\n      background: transparent;\n    }\n\n    &:hover {\n      background: var(--background);\n      border: 1px solid var(--border-alt);\n      .down-icon {\n        opacity: 1;\n      }\n    }\n  }\n}\n\n.combo:hover {\n  border: 1px solid $green;\n}\n\n.selected-line {\n  flex: 1;\n  white-space: nowrap;\n}\n\n.option-line {\n  background: $white;\n  border-bottom: 1px solid $light-grey-light;\n  cursor: pointer;\n  margin: 0;\n  padding: 0.5em;\n  min-width: 150px;\n  width: inherit;\n\n  &:hover {\n    background: $purple;\n  }\n}\n\n.down-icon {\n  width: 15px;\n  min-width: 15px;\n  margin-right: 0.4em;\n  color: $green;\n  cursor: pointer;\n}\n\n.select-input {\n  background: var(--background);\n  border: 1px solid $light-grey-light;\n  border-bottom-left-radius: 1em;\n  border-bottom-right-radius: 1em;\n  left: 0;\n  margin-left: -1px;\n  max-height: 180px;\n  overflow-x: hidden;\n  overflow-y: auto;\n  position: absolute;\n  min-width: 150px;\n  top: 38px;\n  z-index: 2000;\n\n  .option-line {\n    padding-right: 27px;\n    white-space: nowrap;\n  }\n}\n\n.c-mask {\n  z-index: 199;\n}\n\n.field .label {\n  padding-top: 5px;\n}\n\n.thin {\n  height: 30px;\n  padding: 3px 0 3px 10px;\n  margin-bottom: 3px;\n\n  .select-input {\n    top: 29px;\n  }\n}\n\n.reversed {\n  &.open {\n    border-top-left-radius: 0;\n    border-top-right-radius: 0;\n    border-bottom-left-radius: 1em;\n    border-bottom-right-radius: 1em;\n  }\n\n  .select-input {\n    border-top-left-radius: 1em;\n    border-top-right-radius: 1em;\n    border-bottom-left-radius: 0;\n    border-bottom-right-radius: 0;\n    height: 180px;\n    top: -180px;\n  }\n}\n</style>\n","<template>\n  <!-- checklist field -->\n  <div\n    class=\"field\"\n    v-if=\"\n      descriptor.data_type === 'checklist' && descriptorChecklistValues.length\n    \"\n    :key=\"`${descriptor.id}-checklist-wrapper`\"\n  >\n    <label class=\"label\" :key=\"`${descriptor.id}-${descriptor.name}`\">\n      {{ descriptor.name }}\n    </label>\n    <div\n      class=\"checkbox-wrapper\"\n      :key=\"`${descriptor.id}-${i}-${option.text}-wrapper`\"\n      v-for=\"(option, i) in descriptorChecklistValues\"\n    >\n      <input\n        type=\"checkbox\"\n        @change=\"\n          event => onMetadataCheckboxChanged(option.text, event.target.checked)\n        \"\n        :id=\"`${descriptor.id}-${i}-${option.text}-checkbox`\"\n        :checked=\"metadataChecklistValues[option.text]\"\n        :disabled=\"!isEditable\"\n        :style=\"[isEditable ? { cursor: 'pointer' } : { cursor: 'auto' }]\"\n      />\n      <label\n        class=\"checkbox-label\"\n        :for=\"`${descriptor.id}-${i}-${option.text}-checkbox`\"\n        :style=\"[isEditable ? { cursor: 'pointer' } : { cursor: 'auto' }]\"\n      >\n        <span>{{ option.text }}</span>\n      </label>\n    </div>\n  </div>\n  <!-- list field -->\n  <combobox\n    v-else-if=\"descriptor.data_type === 'list'\"\n    :label=\"label ?? descriptor.name\"\n    :options=\"getDescriptorChoicesOptions(descriptor)\"\n    :model-value=\"modelValue\"\n    @enter=\"onEnter\"\n    @update:model-value=\"updateValue\"\n  />\n  <!-- boolean field -->\n  <combobox-boolean\n    :label=\"label ?? descriptor.name\"\n    :model-value=\"modelValue === 'true' ? modelValue : 'false'\"\n    @enter=\"onEnter\"\n    @update:model-value=\"updateValue\"\n    v-else-if=\"descriptor.data_type === 'boolean'\"\n  />\n  <!-- tag list field -->\n  <combobox-tag\n    :label=\"label ?? descriptor.name\"\n    :options=\"getDescriptorChoicesOptions(descriptor, false)\"\n    :model-value=\"modelValue\"\n    @enter=\"onEnter\"\n    @update:model-value=\"updateValue\"\n    v-else-if=\"descriptor.data_type === 'taglist'\"\n  />\n  <!-- number or text field-->\n  <text-field\n    :label=\"label ?? descriptor.name\"\n    :type=\"descriptor.data_type\"\n    :model-value=\"modelValue\"\n    :min=\"null\"\n    @enter=\"onEnter\"\n    @update:model-value=\"updateValue\"\n    v-else\n  />\n</template>\n\n<script>\nimport { mapGetters } from 'vuex'\n\nimport { descriptorMixin } from '@/components/mixins/descriptors'\n\nimport Combobox from '@/components/widgets/Combobox.vue'\nimport ComboboxBoolean from '@/components/widgets/ComboboxBoolean.vue'\nimport ComboboxTag from '@/components/widgets/ComboboxTag.vue'\nimport TextField from '@/components/widgets/TextField.vue'\n\nexport default {\n  name: 'metadata-field',\n\n  mixins: [descriptorMixin],\n\n  components: {\n    Combobox,\n    ComboboxBoolean,\n    ComboboxTag,\n    TextField\n  },\n\n  props: {\n    descriptor: {\n      type: Object,\n      required: true\n    },\n    entity: {\n      type: Object,\n      required: true\n    },\n    label: {\n      type: String\n    },\n    modelValue: {\n      type: [Number, String, Object],\n      default: ''\n    }\n  },\n\n  emits: ['enter', 'update:modelValue'],\n\n  computed: {\n    ...mapGetters(['isCurrentUserManager', 'isCurrentUserSupervisor', 'user']),\n\n    descriptorChecklistValues() {\n      return this.getDescriptorChecklistValues(this.descriptor)\n    },\n\n    metadataChecklistValues() {\n      return this.getMetadataChecklistValues(this.descriptor, this.entity)\n    },\n\n    isEditable() {\n      return Boolean(\n        this.isCurrentUserManager ||\n        this.isSupervisorInDepartments(this.descriptor.departments)\n      )\n    }\n  },\n\n  methods: {\n    updateValue(value) {\n      this.$emit('update:modelValue', value)\n    },\n\n    onEnter() {\n      this.$emit('enter')\n    },\n\n    onMetadataCheckboxChanged(option, value) {\n      const values = this.metadataChecklistValues\n      values[option] = value\n      this.updateValue(JSON.stringify(values))\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.checkbox-wrapper {\n  display: flex;\n  align-items: center;\n  white-space: nowrap;\n}\n\n.checkbox-label {\n  display: inline-flex;\n  position: relative;\n  padding-left: 0.5rem;\n  padding-right: 0.5rem;\n  white-space: normal;\n  cursor: pointer;\n}\n</style>\n","<template>\n  <div\n    :class=\"{\n      modal: true,\n      'is-active': active\n    }\"\n  >\n    <div @click=\"$emit('cancel')\" class=\"modal-background\"></div>\n\n    <div class=\"modal-content\">\n      <div class=\"box content\">\n        <h1 class=\"title\">\n          {{ $t('entities.build_filter.title') }}\n        </h1>\n\n        <combobox\n          class=\"flexrow-item\"\n          :options=\"general.unionOptions\"\n          locale-key-prefix=\"entities.build_filter.\"\n          v-model=\"union\"\n        />\n\n        <h3 class=\"subtitle\" v-if=\"isAssets\">\n          {{ $t('entities.build_filter.asset_type') }}\n        </h3>\n\n        <div class=\"flexrow asset-type-filter\" v-if=\"isAssets\">\n          <combobox\n            class=\"flexrow-item\"\n            :options=\"general.operatorOptions\"\n            locale-key-prefix=\"entities.build_filter.\"\n            v-model=\"assetTypeFilters.operator\"\n          />\n          <combobox\n            class=\"flexrow-item\"\n            :options=\"assetTypeOptions\"\n            v-model=\"assetTypeFilters.value\"\n          />\n        </div>\n\n        <h3 class=\"subtitle\">\n          {{ $t('entities.build_filter.status') }}\n        </h3>\n\n        <div\n          class=\"flexrow task-type-filter\"\n          :key=\"`task-type-${i}`\"\n          v-for=\"(taskTypeFilter, i) in taskTypeFilters.values\"\n        >\n          <combobox-task-type\n            class=\"flexrow-item\"\n            :task-type-list=\"taskTypeList\"\n            v-model=\"taskTypeFilter.id\"\n          />\n          <combobox\n            class=\"flexrow-item\"\n            :options=\"general.taskTypeOperatorOptions\"\n            @update:model-value=\"onTaskTypeOperatorChanged(taskTypeFilter)\"\n            locale-key-prefix=\"entities.build_filter.\"\n            v-model=\"taskTypeFilter.operator\"\n          />\n          <div class=\"flexrow-item flexrow value-column\">\n            <combobox-status\n              class=\"flexrow-item\"\n              :key=\"`task-type-value-${i}-${index}`\"\n              :task-status-list=\"taskStatuses\"\n              v-model=\"taskTypeFilter.values[index]\"\n              v-for=\"(statusId, index) in taskTypeFilter.values\"\n            />\n            <button-simple\n              class=\"mt05\"\n              icon=\"plus\"\n              @click=\"addInTaskTypeFilter(taskTypeFilter)\"\n              v-if=\"taskTypeFilter.operator === 'in'\"\n            />\n          </div>\n          <button-simple\n            class=\"mt05\"\n            icon=\"minus\"\n            @click=\"removeTaskTypeFilter(taskTypeFilter)\"\n          />\n        </div>\n        <div class=\"add-button\">\n          <button-simple\n            :disabled=\"!taskTypeList.length\"\n            icon=\"plus\"\n            @click=\"addTaskTypeFilter\"\n          />\n        </div>\n\n        <div class=\"mt2\" v-if=\"descriptorOptions.length > 0\">\n          <h3 class=\"subtitle\">\n            {{ $t('entities.build_filter.descriptor') }}\n          </h3>\n\n          <div\n            class=\"flexrow descriptor-filter\"\n            :key=\"`descriptor-${i}`\"\n            v-for=\"(descriptorFilter, i) in metadataDescriptorFilters.values\"\n          >\n            <combobox\n              class=\"flexrow-item\"\n              :options=\"descriptorOptions\"\n              @update:model-value=\"\n                filterId => onDescriptorChanged(descriptorFilter, filterId)\n              \"\n              v-model=\"descriptorFilter.id\"\n            />\n\n            <combobox\n              class=\"flexrow-item\"\n              :options=\"general.checklistOptions\"\n              locale-key-prefix=\"entities.build_filter.\"\n              v-model=\"descriptorFilter.values[0].checked\"\n              v-if=\"descriptorFilter.is_checklist\"\n            />\n            <combobox\n              class=\"flexrow-item\"\n              :options=\"general.booleanOptions\"\n              locale-key-prefix=\"entities.build_filter.\"\n              v-model=\"descriptorFilter.values[0]\"\n              v-else-if=\"\n                getDescriptor(descriptorFilter.id).data_type === 'boolean'\n              \"\n            />\n            <combobox\n              class=\"flexrow-item\"\n              :options=\"general.operatorOptions\"\n              locale-key-prefix=\"entities.build_filter.\"\n              @update:model-value=\"\n                operator => onOperatorChanged(operator, descriptorFilter)\n              \"\n              v-model=\"descriptorFilter.operator\"\n              v-else\n            />\n\n            <div\n              class=\"flexrow-item flexrow value-column\"\n              v-if=\"getDescriptor(descriptorFilter.id).data_type !== 'boolean'\"\n            >\n              <template v-for=\"(value, index) in descriptorFilter.values\">\n                <metadata-field\n                  class=\"flexrow-item\"\n                  label=\"\"\n                  :descriptor=\"getDescriptor(descriptorFilter.id)\"\n                  :entity=\"{}\"\n                  :key=\"`descriptor-value-field-${index}`\"\n                  v-model=\"descriptorFilter.values[index]\"\n                  v-if=\"getDescriptor(descriptorFilter.id).choices.length === 0\"\n                />\n                <combobox\n                  class=\"flexrow-item\"\n                  :key=\"`descriptor-value-combobox-checklist-${index}`\"\n                  :options=\"\n                    getDescriptorChoiceOptions(\n                      descriptorFilter.id,\n                      descriptorFilter.is_checklist\n                    )\n                  \"\n                  v-model=\"descriptorFilter.values[index].text\"\n                  v-else-if=\"descriptorFilter.is_checklist\"\n                />\n                <combobox\n                  class=\"flexrow-item\"\n                  :key=\"`descriptor-value-combobox-${index}`\"\n                  :options=\"\n                    getDescriptorChoiceOptions(\n                      descriptorFilter.id,\n                      descriptorFilter.is_checklist\n                    )\n                  \"\n                  v-model=\"descriptorFilter.values[index]\"\n                  v-else\n                />\n              </template>\n              <button-simple\n                class=\"mt05\"\n                icon=\"plus\"\n                @click=\"addInDescriptorFilter(descriptorFilter)\"\n                v-if=\"descriptorFilter.operator === 'in'\"\n              />\n            </div>\n            <button-simple\n              class=\"mt05\"\n              icon=\"minus\"\n              @click=\"removeDescriptorFilter(descriptorFilter)\"\n            />\n          </div>\n          <div class=\"add-button\">\n            <button-simple icon=\"plus\" @click=\"addDescriptorFilter\" />\n          </div>\n        </div>\n\n        <h3 class=\"subtitle\" v-if=\"!isCurrentUserVendor\">\n          {{ $t('entities.build_filter.assignation') }}\n        </h3>\n\n        <div class=\"flexrow assignation-filter\" v-if=\"!isCurrentUserVendor\">\n          <combobox\n            class=\"flexrow-item\"\n            :options=\"assignation.options\"\n            locale-key-prefix=\"entities.build_filter.\"\n            v-model=\"assignation.value\"\n          />\n\n          <div class=\"flexcolumn\">\n            <template\n              v-if=\"['assignedto', '-assignedto'].includes(assignation.value)\"\n            >\n              <people-field\n                class=\"flexrow-item\"\n                :people=\"team\"\n                v-model=\"assignation.person\"\n              />\n              <span class=\"flexrow-item mt05 mb05\">\n                {{ $t('main.on') }}\n              </span>\n            </template>\n\n            <combobox-task-type\n              class=\"flexrow-item\"\n              :task-type-list=\"\n                ['assigned', 'unassigned'].includes(assignation.value)\n                  ? taskTypeList\n                  : taskTypeListWithAll\n              \"\n              v-model=\"assignation.taskTypeId\"\n              v-if=\"\n                [\n                  'assigned',\n                  'unassigned',\n                  'assignedto',\n                  '-assignedto'\n                ].includes(assignation.value)\n              \"\n            />\n          </div>\n        </div>\n\n        <h3 class=\"subtitle\">\n          {{ $t('entities.build_filter.thumbnail') }}\n        </h3>\n\n        <combobox\n          :options=\"hasThumbnail.options\"\n          locale-key-prefix=\"entities.build_filter.\"\n          v-model=\"hasThumbnail.value\"\n        />\n\n        <h3 class=\"subtitle flexrow-item mt2\">\n          {{ $t('task_types.fields.priority') }}\n        </h3>\n        <div class=\"flexrow\">\n          <combobox-task-type\n            class=\"flexrow-item\"\n            :task-type-list=\"taskTypeListWithAll\"\n            open-top\n            v-model=\"priority.taskTypeId\"\n          />\n          <combobox-styled\n            class=\"flexrow-item\"\n            :options=\"priorityOptions\"\n            locale-key-prefix=\"tasks.\"\n            v-model=\"priority.value\"\n            v-show=\"priority.taskTypeId !== ''\"\n          />\n        </div>\n        <h3 class=\"subtitle flexrow-item mt2\" v-if=\"isAssets && !isAssetsOnly\">\n          {{ $t('assets.fields.ready_for') }}\n        </h3>\n        <div class=\"flexrow\" v-if=\"isAssets && !isAssetsOnly\">\n          <combobox-task-type\n            class=\"flexrow-item\"\n            :task-type-list=\"readyForTaskTypeList\"\n            open-top\n            v-model=\"readyFor.taskTypeId\"\n          />\n        </div>\n\n        <h3 class=\"subtitle flexrow-item mt2\" v-if=\"isShots\">\n          {{ $t('entities.build_filter.is_assets_ready') }}\n        </h3>\n        <div class=\"flexrow\" v-if=\"isShots\">\n          <combobox-task-type\n            class=\"flexrow-item\"\n            :task-type-list=\"taskTypeList\"\n            open-top\n            v-model=\"isAssetsReady.taskTypeId\"\n          />\n\n          <combobox\n            class=\"flexrow-item\"\n            :options=\"isAssetsReady.options\"\n            locale-key-prefix=\"entities.build_filter.\"\n            v-model=\"isAssetsReady.value\"\n          />\n        </div>\n\n        <modal-footer\n          :error-text=\"$t('entities.thumbnails.error')\"\n          @confirm=\"applyFilter\"\n          @cancel=\"$emit('cancel')\"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex'\n\nimport { modalMixin } from '@/components/modals/base_modal'\nimport { getFilters } from '@/lib/filtering'\nimport { sortPeople } from '@/lib/sorting'\nimport { descriptorMixin } from '@/components/mixins/descriptors'\n\nimport ButtonSimple from '@/components/widgets/ButtonSimple.vue'\nimport Combobox from '@/components/widgets/Combobox.vue'\nimport ComboboxStatus from '@/components/widgets/ComboboxStatus.vue'\nimport ComboboxStyled from '@/components/widgets/ComboboxStyled.vue'\nimport ComboboxTaskType from '@/components/widgets/ComboboxTaskType.vue'\nimport MetadataField from '@/components/widgets/MetadataField.vue'\nimport ModalFooter from '@/components/modals/ModalFooter.vue'\nimport PeopleField from '@/components/widgets/PeopleField.vue'\n\nimport { v4 as uuidv4 } from 'uuid'\n\nexport default {\n  name: 'build-filter-modal',\n\n  mixins: [modalMixin, descriptorMixin],\n\n  components: {\n    ButtonSimple,\n    Combobox,\n    ComboboxStatus,\n    ComboboxStyled,\n    ComboboxTaskType,\n    MetadataField,\n    ModalFooter,\n    PeopleField\n  },\n\n  props: {\n    active: {\n      type: Boolean,\n      default: false\n    },\n    entityType: {\n      type: String,\n      default: 'asset'\n    }\n  },\n\n  emits: ['cancel', 'confirm'],\n\n  data() {\n    return {\n      assetTypeFilters: {\n        operator: '=',\n        value: ''\n      },\n      assignation: {\n        person: null,\n        taskTypeId: '',\n        value: 'nofilter',\n        options: [\n          { label: 'no_filter', value: 'nofilter' },\n          { label: 'assigned_to', value: 'assignedto' },\n          { label: 'not_assigned_to', value: '-assignedto' },\n          { label: 'assignation_exists_for', value: 'assigned' },\n          { label: 'no_assignation_for', value: 'unassigned' }\n        ]\n      },\n      general: {\n        operatorOptions: [\n          { label: 'equal', value: '=' },\n          { label: 'not_equal', value: '=-' },\n          { label: 'in', value: 'in' }\n        ],\n        booleanOptions: [\n          { label: 'checked', value: 'true' },\n          { label: 'not_checked', value: '-true' }\n        ],\n        checklistOptions: [\n          { label: 'checked', value: true },\n          { label: 'not_checked', value: false }\n        ],\n        taskTypeOperatorOptions: [\n          { label: 'equal', value: '=' },\n          { label: 'not_equal', value: '=-' },\n          { label: 'in', value: 'in' }\n        ],\n        unionOptions: [\n          { label: 'union_and', value: 'and' },\n          { label: 'union_or', value: 'or' }\n        ]\n      },\n      hasThumbnail: {\n        value: 'nofilter',\n        options: [\n          { label: 'no_filter', value: 'nofilter' },\n          { label: 'with_thumbnail', value: 'withthumbnail' },\n          { label: 'without_thumbnail', value: '-withthumbnail' }\n        ]\n      },\n      priorityOptions: [\n        { label: 'priority.normal', value: '0' },\n        { label: 'priority.high', value: '1' },\n        { label: 'priority.very_high', value: '2' },\n        { label: 'priority.emergency', value: '3' }\n      ],\n      priority: {\n        taskTypeId: '',\n        value: '-1'\n      },\n      readyFor: {\n        taskTypeId: ''\n      },\n      isAssetsReady: {\n        value: 'nofilter',\n        taskTypeId: '',\n        options: [\n          { label: 'no_filter', value: 'nofilter' },\n          { label: 'assets_ready', value: 'assetsready' },\n          { label: 'assets_not_ready', value: '-assetsready' }\n        ]\n      },\n      metadataDescriptorFilters: {\n        values: []\n      },\n      taskTypeFilters: {\n        values: []\n      },\n      union: 'and'\n    }\n  },\n\n  mounted() {\n    this.reset()\n    this.setFiltersFromCurrentQuery()\n  },\n\n  computed: {\n    ...mapGetters([\n      'assetMetadataDescriptors',\n      'assetTypeMap',\n      'assetSearchText',\n      'assetValidationColumns',\n      'currentProduction',\n      'editSearchText',\n      'editMetadataDescriptors',\n      'editValidationColumns',\n      'episodeSearchText',\n      'episodeMetadataDescriptors',\n      'episodeValidationColumns',\n      'isCurrentUserVendor',\n      'people',\n      'personMap',\n      'productionAssetTypes',\n      'productionTaskStatuses',\n      'productionTaskTypes',\n      'productionShotTaskTypes',\n      'sequenceSearchText',\n      'sequenceMetadataDescriptors',\n      'sequenceValidationColumns',\n      'shotMetadataDescriptors',\n      'shotSearchText',\n      'shotValidationColumns',\n      'taskTypeMap',\n      'taskStatusMap'\n    ]),\n\n    isAssets() {\n      return this.entityType === 'asset'\n    },\n    isShots() {\n      return this.entityType === 'shot'\n    },\n\n    isAssetsOnly() {\n      return this.currentProduction?.production_type === 'assets'\n    },\n\n    assetTypeOptions() {\n      return [\n        { label: this.$t('entities.build_filter.all_types'), value: '-' },\n        ...this.productionAssetTypes\n          .filter(assetType => assetType !== undefined)\n          .map(assetType => ({\n            label: assetType.name,\n            value: assetType.id\n          }))\n      ]\n    },\n\n    taskStatuses() {\n      return this.productionTaskStatuses.filter(status => !status.for_concept)\n    },\n\n    taskTypeListWithAll() {\n      return [\n        {\n          id: '',\n          color: '#999',\n          name: this.$t('main.all')\n        }\n      ].concat(this.taskTypeList)\n    },\n\n    taskTypeList() {\n      return this[`${this.entityType}ValidationColumns`].map(taskTypeId =>\n        this.taskTypeMap.get(taskTypeId)\n      )\n    },\n\n    readyForTaskTypeList() {\n      return [\n        {\n          id: '',\n          color: '#999',\n          name: this.$t('news.all')\n        }\n      ].concat(this.productionShotTaskTypes)\n    },\n\n    team() {\n      return sortPeople(\n        this.currentProduction.team\n          .map(personId => this.personMap.get(personId))\n          .filter(person => person && !person.is_bot)\n      )\n    },\n\n    descriptorOptions() {\n      return this.metadataDescriptors.map(descriptor => ({\n        label: descriptor.name,\n        value: descriptor.id\n      }))\n    },\n\n    metadataDescriptors() {\n      return this[`${this.entityType}MetadataDescriptors`]\n    }\n  },\n\n  methods: {\n    applyFilter() {\n      const query = this.buildFilter()\n      this.$emit('confirm', query)\n    },\n\n    buildFilter() {\n      let query = ''\n      query = this.applyAssetTypeChoice(query)\n      query = this.applyTaskTypeChoice(query)\n      query = this.applyDescriptorChoice(query)\n      query = this.applyAssignationChoice(query)\n      query = this.applyThumbnailChoice(query)\n      query = this.applyPriorityChoice(query)\n      query = this.applyReadyForChoice(query)\n      query = this.applyAssetsReadyChoice(query)\n      query = this.applyUnionChoice(query)\n      return query.trim()\n    },\n\n    applyAssetTypeChoice(query) {\n      const value = this.assetTypeFilters.value\n      if (value && value !== '-') {\n        let operator = '=['\n        if (this.assetTypeFilters.operator === '=-') operator = '=[-'\n        const assetType = this.assetTypeMap.get(value)\n        query += ` type${operator}${assetType.name}]`\n      }\n      return query\n    },\n\n    applyTaskTypeChoice(query) {\n      this.taskTypeFilters.values.forEach(taskTypeFilter => {\n        let operator = '=['\n        if (taskTypeFilter.operator === '=-') operator = '=[-'\n        const taskType = this.taskTypeMap.get(taskTypeFilter.id)\n        const value = taskTypeFilter.values\n          .map(statusId => {\n            return this.taskStatusMap.get(statusId).short_name\n          })\n          .join(',')\n        query += ` [${taskType.name}]${operator}${value}]`\n      })\n      return query\n    },\n\n    applyDescriptorChoice(query) {\n      this.metadataDescriptorFilters.values.forEach(descriptorFilter => {\n        let operator = '=['\n        let value\n        if (descriptorFilter.is_checklist) {\n          value = descriptorFilter.values[0].text\n          value += descriptorFilter.values[0].checked ? ':true' : ':false'\n        } else {\n          if (descriptorFilter.operator === '=-') operator = '=[-'\n          const values = descriptorFilter.values\n          if (values.length === 0 || values[0] === '') {\n            const options = this.getDescriptorChoiceOptions(\n              descriptorFilter.id,\n              descriptorFilter.is_checklist\n            )\n            value = options[0]?.value ?? ''\n          } else {\n            value = descriptorFilter.values.join(',')\n          }\n        }\n        const descriptor = this.getDescriptor(descriptorFilter.id)\n        query += ` [${descriptor.name}]${operator}${value}]`\n      })\n      return query\n    },\n\n    applyAssignationChoice(query) {\n      if (this.assignation.value !== 'nofilter') {\n        if (this.assignation.person) {\n          let value = this.assignation.person.name\n          const taskType = this.taskTypeMap.get(this.assignation.taskTypeId)\n          if (this.assignation.value === '-assignedto') value = `-${value}`\n          if (taskType) {\n            query += ` assignedto[${taskType.name}]=[${value}]`\n          } else {\n            query += ` assignedto[]=[${value}]`\n          }\n        } else if (this.assignation.taskTypeId) {\n          const taskType = this.taskTypeMap.get(this.assignation.taskTypeId)\n          const value =\n            this.assignation.value === 'assigned' ? 'assigned' : 'unassigned'\n          query += ` [${taskType.name}]=${value}`\n        }\n      }\n      return query\n    },\n\n    applyThumbnailChoice(query) {\n      if (this.hasThumbnail.value !== 'nofilter') {\n        query += ` ${this.hasThumbnail.value}`\n      }\n      return query\n    },\n\n    applyPriorityChoice(query) {\n      if (this.priority.taskTypeId !== '' && this.priority.value !== '-1') {\n        const taskType = this.taskTypeMap.get(this.priority.taskTypeId)\n        const value = this.priority.value\n        query += ` priority-[${taskType.name.toLowerCase()}]=${value}`\n      }\n      return query\n    },\n\n    applyReadyForChoice(query) {\n      if (this.readyFor.taskTypeId !== '') {\n        const taskType = this.taskTypeMap.get(this.readyFor.taskTypeId)\n        query += ` readyfor=[${taskType.name.toLowerCase()}]`\n      }\n      return query\n    },\n\n    applyAssetsReadyChoice(query) {\n      if (this.isAssetsReady.value !== 'nofilter') {\n        if (this.isAssetsReady.taskTypeId.length === 0) {\n          this.isAssetsReady.taskTypeId = this.taskTypeList[0].id\n        }\n        const taskType = this.taskTypeMap.get(this.isAssetsReady.taskTypeId)\n        const operator = this.isAssetsReady.value === 'assetsready' ? '' : '-'\n        query += ` assetsready=[${operator}${taskType.name}]`\n      }\n      return query\n    },\n\n    applyUnionChoice(query) {\n      if (this.union === 'or') {\n        query = `+(${query.trim()})`\n      }\n      return query\n    },\n\n    // Task types\n\n    addTaskTypeFilter() {\n      const filter = {\n        localId: uuidv4(),\n        id: this.taskTypeList[0].id,\n        operator: '=',\n        values: [this.taskStatuses[0].id]\n      }\n      this.taskTypeFilters.values.push(filter)\n      return filter\n    },\n\n    addInTaskTypeFilter(taskTypeFilter) {\n      taskTypeFilter.values.push(this.taskStatuses[0].id)\n    },\n\n    removeTaskTypeFilter(taskTypeFilter) {\n      this.taskTypeFilters.values = this.taskTypeFilters.values.filter(\n        f => f.localId !== taskTypeFilter.localId\n      )\n    },\n\n    addInDescriptorFilter(descriptorFilter) {\n      const descriptor = this.getDescriptor(descriptorFilter.id)\n      const value = descriptor.choices.length ? descriptor.choices[0] : ''\n      descriptorFilter.values.push(value)\n    },\n\n    // Descriptors\n\n    onDescriptorChanged(descriptorFilter, filter) {\n      const descriptor = this.getDescriptor(filter)\n\n      descriptorFilter.is_checklist = false\n      if (descriptor.choices.length > 0) {\n        const checklistValues = this.getDescriptorChecklistValues(descriptor)\n        if (checklistValues.length > 0) {\n          descriptorFilter.is_checklist = true\n          descriptorFilter.values = [checklistValues[0]]\n          descriptorFilter.operator = '='\n        } else {\n          descriptorFilter.values = [descriptor.choices[0]]\n        }\n      } else if (descriptor.data_type === 'boolean') {\n        descriptorFilter.values = ['-true']\n      } else {\n        descriptorFilter.values = ['']\n      }\n    },\n\n    addDescriptorFilter() {\n      const descriptor = this.getDescriptor(this.descriptorOptions[0].value)\n      const values = []\n      let isChecklist = false\n      if (descriptor.choices.length > 0) {\n        const checklistValues = this.getDescriptorChecklistValues(descriptor)\n        if (checklistValues.length > 0) {\n          isChecklist = true\n          values.push({\n            ...checklistValues[0],\n            checked: true\n          })\n        } else {\n          values.push(descriptor.choices[0])\n        }\n      } else if (descriptor.data_type === 'boolean') {\n        values.push('-true')\n      } else {\n        values.push('')\n      }\n      const filter = {\n        localId: uuidv4(),\n        id: this.descriptorOptions[0].value,\n        operator: '=',\n        values,\n        is_checklist: isChecklist\n      }\n      this.metadataDescriptorFilters.values.push(filter)\n      return filter\n    },\n\n    removeDescriptorFilter(descriptorFilter) {\n      this.metadataDescriptorFilters.values =\n        this.metadataDescriptorFilters.values.filter(\n          f => f.localId !== descriptorFilter.localId\n        )\n    },\n\n    getDescriptor(descriptorId) {\n      return this.metadataDescriptors.find(d => d.id === descriptorId)\n    },\n\n    getDescriptorChoiceOptions(descriptorId, isChecklist) {\n      const descriptor = this.getDescriptor(descriptorId)\n      if (!isChecklist) {\n        return descriptor.choices.map(choice => ({\n          label: choice,\n          value: choice\n        }))\n      } else {\n        return this.getDescriptorChecklistValues(descriptor).map(choice => ({\n          label: choice.text,\n          value: choice.text\n        }))\n      }\n    },\n\n    onOperatorChanged(operator, descriptorFilter) {\n      if (operator !== 'in') {\n        descriptorFilter.values = [descriptorFilter.values[0]]\n      }\n    },\n\n    // Helpers to set filters from search query\n\n    setFiltersFromCurrentQuery() {\n      const searchQuery = this[`${this.entityType}SearchText`]\n      if (searchQuery) {\n        const filters = getFilters({\n          entryIndex: [], // entry list is not needed,\n          assetTypes: this.productionAssetTypes,\n          taskTypes: this.productionTaskTypes,\n          taskStatuses: this.taskStatuses,\n          descriptors: this.metadataDescriptors,\n          persons: this.people,\n          query: searchQuery\n        })\n        filters.forEach(filter => {\n          if (filter.type === 'assettype') {\n            this.setFiltersFromAssetTypeQuery(filter)\n          } else if (filter.type === 'status') {\n            this.setFiltersFromStatusQuery(filter)\n          } else if (filter.type === 'descriptor') {\n            this.setFiltersFromDescriptorQuery(filter)\n          } else if (filter.type === 'assignation') {\n            this.setFiltersFromAssignationQuery(filter)\n          } else if (filter.type === 'assignedto') {\n            this.setFiltersFromAssignedToQuery(filter)\n          } else if (filter.type === 'thumbnail') {\n            this.setFiltersFromThumbnailQuery(filter)\n          } else if (filter.type === 'priority') {\n            this.setFiltersFromPriorityQuery(filter)\n          } else if (filter.type === 'readyfor') {\n            this.setFiltersFromReadyForQuery(filter)\n          } else if (filter.type === 'assetsready') {\n            this.setFiltersFromAssetsReadyQuery(filter)\n          }\n        })\n        if (filters.union) {\n          this.setUnion()\n        }\n      }\n    },\n\n    setFiltersFromAssetTypeQuery(filter) {\n      this.assetTypeFilters.operator = filter.excluding ? '=-' : '='\n      this.assetTypeFilters.value = filter.assetType.id\n    },\n\n    setFiltersFromStatusQuery(filter) {\n      let operator = '='\n      if (filter.taskStatuses.length > 1) {\n        operator = 'in'\n      } else if (filter.excluding) {\n        operator = '=-'\n      }\n      this.taskTypeFilters.values.push({\n        localId: uuidv4(),\n        id: filter.taskType.id,\n        operator,\n        values: filter.taskStatuses\n      })\n    },\n\n    setFiltersFromDescriptorQuery(filter) {\n      let operator = '='\n      let isChecklist = false\n      let values = filter.values\n      if (filter.values.length > 1) {\n        operator = 'in'\n      } else {\n        if (filter.values[0].endsWith(':true')) {\n          isChecklist = true\n          values = [\n            {\n              text: filter.values[0].replace(/:true$/, ''),\n              checked: true\n            }\n          ]\n        } else if (filter.values[0].endsWith(':false')) {\n          isChecklist = true\n          values = [\n            {\n              text: filter.values[0].replace(/:false$/, ''),\n              checked: false\n            }\n          ]\n        } else if (filter.excluding) {\n          if (filter.descriptor.data_type === 'boolean') {\n            values = [`-${filter.values[0]}`]\n          } else {\n            operator = '=-'\n          }\n        }\n      }\n      this.metadataDescriptorFilters.values.push({\n        localId: uuidv4(),\n        id: filter.descriptor.id,\n        operator,\n        values,\n        is_checklist: isChecklist\n      })\n    },\n\n    setFiltersFromAssignationQuery(filter) {\n      if (filter.assigned) {\n        this.assignation.value = 'assigned'\n      } else {\n        this.assignation.value = 'unassigned'\n      }\n      this.assignation.taskTypeId = filter.taskType.id\n    },\n\n    setFiltersFromAssignedToQuery(filter) {\n      this.assignation.value = filter.excluding ? '-assignedto' : 'assignedto'\n      this.assignation.person = this.people.find(\n        p => p.id === filter.personIds[0]\n      )\n      this.assignation.taskTypeId = filter.taskType?.id\n    },\n\n    setFiltersFromThumbnailQuery(filter) {\n      if (filter.excluding) {\n        this.hasThumbnail.value = '-withthumbnail'\n      } else {\n        this.hasThumbnail.value = 'withthumbnail'\n      }\n    },\n\n    setFiltersFromPriorityQuery(filter) {\n      this.priority.taskTypeId = filter.taskTypeId\n      this.priority.value = String(filter.value)\n    },\n\n    setFiltersFromReadyForQuery(filter) {\n      this.readyFor.taskTypeId = filter.value\n    },\n\n    setFiltersFromAssetsReadyQuery(filter) {\n      this.isAssetsReady.taskTypeId = filter.value\n      this.isAssetsReady.value = filter.excluding\n        ? '-assetsready'\n        : 'assetsready'\n    },\n\n    setUnion() {\n      this.union = 'or'\n    },\n\n    // General\n\n    onTaskTypeOperatorChanged(taskTypeFilter) {\n      if (taskTypeFilter.operator !== 'in') {\n        taskTypeFilter.values = [taskTypeFilter.values[0]]\n      }\n    },\n\n    reset() {\n      this.assignation.value = 'nofilter'\n      this.assignation.person = null\n      this.assignation.taskTypeId = ''\n      this.hasThumbnail.value = 'nofilter'\n      this.metadataDescriptorFilters.values = []\n      this.taskTypeFilters.values = []\n      this.assetTypeFilters.operator = '='\n      this.assetTypeFilters.value = '-'\n    }\n  },\n\n  watch: {\n    active() {\n      if (this.active) {\n        this.reset()\n        this.assignation.taskTypeId =\n          this.taskTypeList.length > 0 ? this.taskTypeList[0].id : ''\n        this.readyFor.taskTypeId = ''\n        this.priority.taskTypeId = ''\n        this.priority.value = '0'\n        this.setFiltersFromCurrentQuery()\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.modal-content {\n  max-height: calc(100vh - 7rem);\n  margin-top: 3rem;\n}\n\n.add-button button {\n  margin-left: 0;\n}\n\n.content h3:not(:first-child) {\n  margin-top: 2.5em;\n}\n\n.subtitle {\n  color: $grey;\n  font-weight: 500;\n  font-size: 1em;\n  margin-bottom: 0.5em;\n  margin-left: 0.1em;\n  text-transform: uppercase;\n}\n\n.field {\n  margin-top: 0;\n  margin-bottom: 0;\n}\n\n.task-type-filter,\n.descriptor-filter {\n  margin-bottom: 0.3em;\n  align-items: flex-start;\n\n  .descriptor-text-value {\n    padding: 0;\n  }\n}\n\n.value-column {\n  flex-direction: column;\n  align-items: flex-start;\n}\n\n.assignation-filter {\n  align-items: flex-start;\n\n  input {\n    line-height: 30px;\n  }\n}\n</style>\n"],"names":["descriptorMixin","mapGetters","entry","descriptor","value","event","shot","asset","edit","episode","option","values","columnId","column","d","headerMenuEl","headerBox","left","top","width","emptyChoice","c","entity","result","choice","departments","department","listWidth","listHeight","i","j","key","ref","_sfc_main","ChevronDownIcon","sortedOptions","sortByValue","oldOption","list","child","_hoisted_2","_hoisted_3","_hoisted_5","_hoisted_6","_createElementBlock","_normalizeClass","$props","_hoisted_1","_toDisplayString","_createCommentVNode","_createElementVNode","$data","$options","args","_createVNode","_component_chevron_down_icon","_openBlock","_hoisted_4","_Fragment","_renderList","$event","_createTextVNode","Combobox","ComboboxBoolean","ComboboxTag","TextField","_normalizeStyle","_createBlock","_component_combobox","_ctx","_component_combobox_boolean","_component_combobox_tag","_component_text_field","modalMixin","ButtonSimple","ComboboxStatus","ComboboxStyled","ComboboxTaskType","MetadataField","ModalFooter","PeopleField","assetType","status","taskTypeId","sortPeople","personId","person","query","operator","taskTypeFilter","taskType","statusId","descriptorFilter","filter","uuidv4","f","checklistValues","isChecklist","descriptorId","searchQuery","filters","getFilters","p","_hoisted_7","_hoisted_8","_hoisted_10","_hoisted_12","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_cache","_component_combobox_task_type","index","_component_combobox_status","_component_button_simple","_hoisted_9","filterId","_hoisted_11","_component_metadata_field","_hoisted_13","_hoisted_14","_component_people_field","_component_combobox_styled","_vShow","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_component_modal_footer"],"mappings":"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"}