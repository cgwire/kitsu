import{_ as b,aH as _,W as y,b as D,r as m,o as n,c as o,t as x,h as d,d as c,f as l,i as u,F as g,e as C,n as w}from"./index-C2m_IhNF.js";import{D as k}from"./DepartmentName-C_7ZW05X.js";const L={name:"combobox-department",components:{ChevronDownIcon:y,ComboboxMask:_,DepartmentName:k},emits:["update:modelValue"],data(){return{showDepartmentList:!1}},props:{displayAllAndMyDepartments:{default:!1,type:Boolean},label:{default:"",type:String},maxHeightSelectInput:{default:200,type:Number},rounded:{default:!1,type:Boolean},selectableDepartments:{type:Array,required:!1},modelValue:{default:"",type:String},width:{default:250,type:Number},withEmptyChoice:{default:!0,type:Boolean},top:{default:!1,type:Boolean},allDepartmentsLabel:{default:!1,type:Boolean}},computed:{...D(["departmentMap","departments","isCurrentUserManager","isCurrentUserSupervisor","user"]),departmentsToTakeAccount(){return(this.selectableDepartments?[...this.selectableDepartments]:[...this.departments]).sort((r,t)=>r.name.localeCompare(t.name,void 0,{numeric:!0}))},departmentList(){if(this.displayAllAndMyDepartments){const e=[{name:this.$t("tasks.combobox_departments.all_departments"),id:"ALL",color:"#CCC"}];return!this.isCurrentUserManager&&this.user.departments.length>0&&e.unshift({name:this.$t("tasks.combobox_departments.my_departments"),id:"MY_DEPARTMENTS",color:"#000000"}),[...e,...this.departmentsToTakeAccount]}else return this.isCurrentUserSupervisor&&this.user.departments.length>0?[...this.departmentsToTakeAccount]:this.withEmptyChoice?[{color:"#AAA",id:null,name:this.allDepartmentsLabel?this.$t("departments.all_departments"):this.$t("departments.no_department")},...this.departmentsToTakeAccount]:[...this.departmentsToTakeAccount]},currentDepartment(){if(this.modelValue){const e=this.departmentMap.get(this.modelValue);return e||this.departmentList.find(r=>r.id===this.modelValue)}else return this.departmentList[0]},listStyle(){const e={"max-height":`${this.maxHeightSelectInput}px`,width:`${this.width}px`,top:this.rounded?"31px":"37px",left:"0"};return this.top&&Object.assign(e,{top:"-200px",bottom:"-90px","border-top-left-radius":"10px","border-top-right-radius":"10px","border-bottom-left-radius":"0","border-bottom-right-radius":"0"}),e}},methods:{selectDepartment(e){this.$emit("update:modelValue",e.id),this.showDepartmentList=!1},toggleDepartmentList(){this.showDepartmentList=!this.showDepartmentList},focus(){this.$refs.combobox.focus()}}},v={key:0,class:"label"},A={key:0,class:"selected-department-line flexrow-item"},T=["onClick"];function S(e,r,t,M,i,s){const p=m("department-name"),h=m("chevron-down-icon"),f=m("combobox-mask");return n(),o("div",null,[t.label.length?(n(),o("label",v,x(t.label),1)):d("",!0),c("div",{ref:"combobox",class:w(["department-combo",{opened:i.showDepartmentList,rounded:t.rounded,top:t.top}]),style:u({width:`${t.width}px`})},[c("div",{class:"flexrow",onClick:r[0]||(r[0]=(...a)=>s.toggleDepartmentList&&s.toggleDepartmentList(...a))},[s.currentDepartment?(n(),o("div",A,[l(p,{department:s.currentDepartment},null,8,["department"])])):d("",!0),l(h,{class:"down-icon flexrow-item"})]),i.showDepartmentList?(n(),o("div",{key:0,class:"select-input",ref:"select",style:u(s.listStyle)},[(n(!0),o(g,null,C(s.departmentList.filter(({id:a})=>a!==t.modelValue),a=>(n(),o("div",{class:"department-line",key:a.id,onClick:V=>s.selectDepartment(a)},[l(p,{department:a},null,8,["department"])],8,T))),128))],4)):d("",!0)],6),l(f,{displayed:i.showDepartmentList,onClick:s.toggleDepartmentList},null,8,["displayed","onClick"])])}const E=b(L,[["render",S],["__scopeId","data-v-f74f68d5"]]);export{E as C};
//# sourceMappingURL=ComboboxDepartment-whRm-Bo0.js.map
