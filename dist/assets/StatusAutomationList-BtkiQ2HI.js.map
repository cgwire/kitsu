{"version":3,"file":"StatusAutomationList-BtkiQ2HI.js","sources":["../../src/components/lists/StatusAutomationList.vue"],"sourcesContent":["<template>\n  <div class=\"data-list\">\n    <div class=\"datatable-wrapper\">\n      <table class=\"datatable\">\n        <thead class=\"datatable-head\">\n          <tr>\n            <th scope=\"col\" class=\"name\">\n              {{ $t('status_automations.fields.entity_type') }}\n            </th>\n            <th scope=\"col\" class=\"in-task-type\">\n              {{ $t('status_automations.fields.in_task_type') }}\n            </th>\n            <th scope=\"col\" class=\"in-task-status\">\n              {{ $t('status_automations.fields.in_task_status') }}\n            </th>\n            <th scope=\"col\" class=\"automation-type\">\n              {{ $t('status_automations.fields.out_field_type') }}\n            </th>\n            <th scope=\"col\" class=\"out-task-type\">\n              {{ $t('status_automations.fields.out_task_type') }}\n            </th>\n            <th scope=\"col\" class=\"out-task-status\">\n              {{ $t('status_automations.fields.out_task_status') }}\n            </th>\n            <th scope=\"col\" class=\"import-last-revision\">\n              {{ $t('status_automations.fields.import_last_revision') }}\n            </th>\n            <th scope=\"col\" class=\"actions\">&nbsp;</th>\n          </tr>\n        </thead>\n        <tbody class=\"datatable-body\">\n          <tr\n            class=\"datatable-row\"\n            :key=\"statusAutomation.id\"\n            v-for=\"statusAutomation in entries\"\n          >\n            <td scope=\"row\" class=\"name\">\n              <div class=\"flexrow\">\n                <span\n                  class=\"flexrow-item\"\n                  :title=\"$t('status_automations.wrong_automation')\"\n                  v-if=\"isStatusAutomationDisabled(statusAutomation)\"\n                >\n                  <alert-triangle-icon />\n                </span>\n                <span class=\"flexrow-item\">\n                  {{ statusAutomation.entity_type }}\n                </span>\n              </div>\n            </td>\n            <task-type-cell\n              class=\"in-task-type\"\n              :task-type=\"getTaskType(statusAutomation.in_task_type_id)\"\n            />\n            <task-status-cell\n              class=\"in-task-status\"\n              :entry=\"taskStatusMap.get(statusAutomation.in_task_status_id)\"\n            />\n            <td class=\"input-separator\">\n              {{\n                statusAutomation.out_field_type === 'ready_for'\n                  ? $t('status_automations.change_ready_for')\n                  : $t('status_automations.change_status')\n              }}\n            </td>\n            <task-type-cell\n              class=\"out-task-type\"\n              :task-type=\"getTaskType(statusAutomation.out_task_type_id)\"\n            />\n            <task-status-cell\n              class=\"out-task-status\"\n              v-if=\"statusAutomation.out_field_type === 'status'\"\n              :entry=\"taskStatusMap.get(statusAutomation.out_task_status_id)\"\n            />\n            <td class=\"name out-task-status\" v-else></td>\n            <td class=\"import-last-revision\">\n              {{ formatBoolean(statusAutomation.import_last_revision) }}\n            </td>\n            <row-actions-cell\n              @edit-clicked=\"$emit('edit-clicked', statusAutomation)\"\n              @delete-clicked=\"$emit('delete-clicked', statusAutomation)\"\n              v-if=\"isEditable\"\n            />\n            <td v-else>\n              <button\n                class=\"button\"\n                @click=\"removeStatusAutomation(statusAutomation.id)\"\n              >\n                {{ $t('main.remove') }}\n              </button>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n\n    <table-info :is-loading=\"isLoading\" :is-error=\"isError\" />\n\n    <p class=\"has-text-centered nb-status-automations\">\n      {{ entries.length }}\n      {{ $tc('status_automations.number', entries.length) }}\n    </p>\n  </div>\n</template>\n\n<script>\nimport { AlertTriangleIcon } from 'lucide-vue-next'\nimport { mapGetters, mapActions } from 'vuex'\n\nimport { formatListMixin } from '@/components/mixins/format'\n\nimport RowActionsCell from '@/components/cells/RowActionsCell.vue'\nimport TableInfo from '@/components/widgets/TableInfo.vue'\nimport TaskStatusCell from '@/components/cells/TaskStatusCell.vue'\nimport TaskTypeCell from '@/components/cells/TaskTypeCell.vue'\n\nexport default {\n  name: 'status-automation-list',\n\n  mixins: [formatListMixin],\n\n  components: {\n    AlertTriangleIcon,\n    RowActionsCell,\n    TableInfo,\n    TaskStatusCell,\n    TaskTypeCell\n  },\n\n  props: {\n    entries: {\n      type: Array,\n      default: () => []\n    },\n    isEditable: {\n      type: Boolean,\n      default: false\n    },\n    isError: {\n      type: Boolean,\n      default: false\n    },\n    isLoading: {\n      type: Boolean,\n      default: false\n    }\n  },\n\n  emits: ['delete-clicked', 'edit-clicked'],\n\n  computed: {\n    ...mapGetters([\n      'taskStatusMap',\n      'getTaskType',\n      'isStatusAutomationDisabled',\n      'remainingStatusAutomations'\n    ])\n  },\n  methods: {\n    ...mapActions(['removeStatusAutomationFromProduction']),\n\n    async removeStatusAutomation(statusAutomationId) {\n      await this.removeStatusAutomationFromProduction(statusAutomationId)\n      await this.$nextTick()\n      // Reselect the remainingStatusAutomations to avoid empty statusAutomationId\n      if (this.remainingStatusAutomations.length > 0) {\n        this.statusAutomationId = this.remainingStatusAutomations[0].id\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.datatable-body tr:first-child th,\n.datatable-body tr:first-child td {\n  border-top: 0;\n}\n\n.name {\n  width: 120px;\n  min-width: 120px;\n}\n\ntd.name {\n  text-transform: capitalize;\n}\n\n.in-task-type {\n  width: 150px;\n  min-width: 150px;\n}\n\n.in-task-status {\n  width: 150px;\n  min-width: 150px;\n}\n\n.separator {\n  width: 150px;\n  min-width: 150px;\n}\n\n.out-task-type {\n  width: 150px;\n  min-width: 150px;\n}\n\n.out-task-status {\n  width: 150px;\n  min-width: 150px;\n}\n\n.thead {\n  width: 100%;\n}\n\n.nb-status-automations {\n  color: var(--text);\n}\n</style>\n"],"names":["_sfc_main","formatListMixin","AlertTriangleIcon","RowActionsCell","TableInfo","TaskStatusCell","TaskTypeCell","mapGetters","mapActions","statusAutomationId","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_12","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_19","_hoisted_21","_hoisted_22","_openBlock","_createElementBlock","_createElementVNode","_hoisted_5","_toDisplayString","_ctx","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_Fragment","_renderList","$props","statusAutomation","_hoisted_13","_createVNode","_component_alert_triangle_icon","_createCommentVNode","_component_task_type_cell","_component_task_status_cell","_createBlock","_hoisted_18","_component_row_actions_cell","$event","_hoisted_20","$options","_component_table_info"],"mappings":"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"}