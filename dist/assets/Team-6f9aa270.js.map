{"version":3,"file":"Team-6f9aa270.js","sources":["../../src/components/lists/ProductionTeamList.vue","../../src/components/pages/Team.vue"],"sourcesContent":["<template>\n<div class=\"data-list\">\n  <div class=\"datatable-wrapper\">\n    <table class=\"datatable\">\n      <thead class=\"datatable-head\">\n        <tr>\n          <th scope=\"col\" class=\"name datatable-row-header\">\n          {{ $t(\"people.list.name\") }}\n          </th>\n          <th scope=\"col\" class=\"email\">\n          {{ $t(\"people.list.email\") }}\n          </th>\n          <th scope=\"col\" class=\"phone\">\n          {{ $t(\"people.list.phone\") }}\n          </th>\n          <th scope=\"col\" class=\"role\">\n          {{ $t(\"people.list.role\") }}\n          </th>\n          <th scope=\"col\" class=\"actions\"></th>\n        </tr>\n      </thead>\n      <tbody class=\"datatable-body\" v-if=\"!isEmpty\">\n        <tr class=\"datatable-row\" v-for=\"entry in entries\" :key=\"entry.id\">\n          <people-name-cell class=\"name datatable-row-header\" :person=\"entry\" />\n          <td class=\"email\">{{ entry.email }}</td>\n          <td class=\"phone\">{{ entry.phone }}</td>\n          <td class=\"role\">{{ $t('people.role.' + entry.role) }}</td>\n          <td class=\"actions\"\n            v-if=\"isCurrentUserAdmin\"\n          >\n            <button\n              class=\"button\"\n              @click=\"removePerson(entry)\"\n            >\n              {{ $t('main.remove') }}\n            </button>\n          </td>\n          <td class=\"actions\" v-else>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n\n  <p class=\"has-text-centered mt2\" v-if=\"isEmpty\">\n    {{ $t('people.empty_team') }}\n  </p>\n\n  <p class=\"has-text-centered footer-info\">\n    {{ entries.length }} {{ $tc('people.persons', entries.length) }}\n  </p>\n</div>\n</template>\n\n<script>\nimport { mapGetters, mapActions } from 'vuex'\nimport PeopleNameCell from '@/components/cells/PeopleNameCell'\n\nexport default {\n  name: 'production-team-list',\n  components: {\n    PeopleNameCell\n  },\n\n  props: [\n    'entries'\n  ],\n\n  computed: {\n    ...mapGetters([\n      'isCurrentUserAdmin'\n    ]),\n\n    isEmpty () {\n      return !this.entries || this.entries.length === 0\n    }\n  },\n\n  methods: {\n    ...mapActions([\n      'removePersonFromTeam'\n    ]),\n\n    removePerson (person) {\n      this.removePersonFromTeam(person)\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.datatable-body tr:first-child th,\n.datatable-body tr:first-child td {\n  border-top: 0;\n}\n.name {\n  width: 230px;\n  min-width: 230px;\n}\n.email {\n  width: 300px;\n  min-width: 300px;\n}\n.phone {\n  width: 200px;\n  min-width: 200px;\n}\n.role {\n  width: 125px;\n  min-width: 125px;\n}\n.actions {\n  min-width: 100px;\n}\n\n.data-list {\n  margin-top: 2em;\n}\n</style>\n","<template>\n  <div class=\"people page fixed-page\">\n    <div class=\"flexrow mt2 add-people\">\n      <people-field\n        ref=\"people-field\"\n        class=\"flexrow-item add-people-field\"\n        :people=\"unlistedPeople\"\n        :placeholder=\"$t('people.add_member_to_team')\"\n        big\n        @enter=\"addPerson\"\n        v-model=\"person\"\n      />\n      <button\n        class=\"button flexrow-item\"\n        @click=\"addPerson\"\n      >\n        {{ $t('main.add') }}\n      </button>\n    </div>\n\n    <production-team-list\n      :entries=\"teamPersons\"\n      :is-loading=\"isTeamLoading\"\n      :is-error=\"isTeamLoadingError\"\n      @remove=\"removePerson\"\n    />\n  </div>\n</template>\n\n<script>\nimport { mapGetters, mapActions } from 'vuex'\n\nimport { sortPeople } from '@/lib/sorting'\n\nimport ProductionTeamList from '@/components/lists/ProductionTeamList'\nimport PeopleField from '@/components/widgets/PeopleField'\n\nexport default {\n  name: 'people',\n  components: {\n    PeopleField,\n    ProductionTeamList\n  },\n\n  data () {\n    return {\n      person: null,\n      isTeamLoading: false,\n      isTeamLoadingError: false\n    }\n  },\n\n  computed: {\n    ...mapGetters([\n      'currentProduction',\n      'productionMap',\n      'openProductions',\n      'personMap',\n      'people'\n    ]),\n\n    teamPersons () {\n      return sortPeople(this.currentProduction.team\n        .map(personId => this.personMap.get(personId)))\n    },\n\n    unlistedPeople () {\n      return this.people.filter((person) => {\n        return !this.currentProduction.team.includes(person.id) &&\n          person.active\n      })\n    }\n  },\n\n  methods: {\n    ...mapActions([\n      'addPersonToTeam'\n    ]),\n\n    addPerson () {\n      if (this.person) {\n        this.addPersonToTeam(this.person)\n        setTimeout(() => {\n          this.$refs['people-field'].clear()\n        }, 1)\n      }\n    },\n\n    removePerson (person) {\n      this.removePersonFromTeam(person)\n    }\n\n  },\n\n  metaInfo () {\n    return {\n      title: `${this.currentProduction.name} | ${this.$t('people.team')} - Kitsu`\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n</style>\n"],"names":["_sfc_main","PeopleNameCell","mapGetters","mapActions","person","PeopleField","ProductionTeamList","sortPeople","personId"],"mappings":"qJA0DA,MAAAA,EAAA,CACA,KAAA,uBACA,WAAA,CACA,eAAAC,CACA,EAEA,MAAA,CACA,SACA,EAEA,SAAA,CACA,GAAAC,EAAA,CACA,oBACA,CAAA,EAEA,SAAA,CACA,MAAA,CAAA,KAAA,SAAA,KAAA,QAAA,SAAA,CACA,CACA,EAEA,QAAA,CACA,GAAAC,EAAA,CACA,sBACA,CAAA,EAEA,aAAAC,EAAA,CACA,KAAA,qBAAAA,CAAA,CACA,CACA,CACA,olDClDA,MAAAJ,EAAA,CACA,KAAA,SACA,WAAA,CACA,YAAAK,EACA,mBAAAC,CACA,EAEA,MAAA,CACA,MAAA,CACA,OAAA,KACA,cAAA,GACA,mBAAA,EACA,CACA,EAEA,SAAA,CACA,GAAAJ,EAAA,CACA,oBACA,gBACA,kBACA,YACA,QACA,CAAA,EAEA,aAAA,CACA,OAAAK,EAAA,KAAA,kBAAA,KACA,IAAAC,GAAA,KAAA,UAAA,IAAAA,CAAA,CAAA,CAAA,CACA,EAEA,gBAAA,CACA,OAAA,KAAA,OAAA,OAAAJ,GACA,CAAA,KAAA,kBAAA,KAAA,SAAAA,EAAA,EAAA,GACAA,EAAA,MACA,CACA,CACA,EAEA,QAAA,CACA,GAAAD,EAAA,CACA,iBACA,CAAA,EAEA,WAAA,CACA,KAAA,SACA,KAAA,gBAAA,KAAA,MAAA,EACA,WAAA,IAAA,CACA,KAAA,MAAA,cAAA,EAAA,MAAA,CACA,EAAA,CAAA,EAEA,EAEA,aAAAC,EAAA,CACA,KAAA,qBAAAA,CAAA,CACA,CAEA,EAEA,UAAA,CACA,MAAA,CACA,MAAA,GAAA,KAAA,kBAAA,UAAA,KAAA,GAAA,aAAA,WACA,CACA,CACA"}