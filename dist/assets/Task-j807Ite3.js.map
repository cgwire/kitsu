{"version":3,"file":"Task-j807Ite3.js","sources":["../../src/components/widgets/SubscribeButton.vue","../../src/components/pages/Task.vue"],"sourcesContent":["<template>\n  <button class=\"button\" :title=\"buttonTitle\" @click=\"$emit('click')\">\n    <eye-icon class=\"icon is-small\" v-if=\"subscribed\" />\n    <eye-off-icon class=\"icon is-small\" v-else />\n  </button>\n</template>\n\n<script>\nimport { EyeIcon, EyeOffIcon } from 'lucide-vue-next'\n\nexport default {\n  name: 'subscribe-button',\n\n  components: {\n    EyeIcon,\n    EyeOffIcon\n  },\n\n  props: {\n    subscribed: {\n      default: false,\n      type: Boolean\n    }\n  },\n\n  emits: ['click'],\n\n  computed: {\n    buttonTitle() {\n      if (!this.subscribed) {\n        return this.$t('tasks.subscribe_notifications')\n      } else {\n        return this.$t('tasks.unsubscribe_notifications')\n      }\n    }\n  }\n}\n</script>\n","<template>\n  <div class=\"fixed-page columns xyz-in\" xyz=\"fade\">\n    <div class=\"page column main-column\">\n      <div class=\"page-header pa1 mb0\" xyz=\"fade\">\n        <div class=\"flexrow header-title\" v-if=\"task\">\n          <router-link\n            class=\"flexrow-item has-text-centered back-link\"\n            :to=\"taskEntitiesPath\"\n          >\n            <corner-left-up-icon />\n          </router-link>\n\n          <task-type-name\n            class=\"flexrow-item task-type block\"\n            :task-type=\"taskType\"\n            :production-id=\"currentProduction.id\"\n            v-if=\"taskType\"\n          />\n\n          <span class=\"flexrow-item ml2\">\n            <entity-thumbnail\n              class=\"entity-thumbnail\"\n              :entity=\"currentEntity\"\n              :empty-width=\"100\"\n              :empty-height=\"60\"\n              :width=\"100\"\n              :with-link=\"true\"\n            />\n          </span>\n\n          <h1 class=\"title flexrow-item\">\n            <router-link :to=\"taskEntityPath\">\n              {{ task ? title : 'Loading...' }}\n            </router-link>\n          </h1>\n\n          <div class=\"flexrow-item flexrow block\">\n            <span class=\"flexrow-item\">\n              {{ $t('tasks.current_status') }}\n            </span>\n            <validation-tag\n              class=\"is-medium flexrow-item\"\n              :task=\"task\"\n              :is-static=\"true\"\n              v-if=\"task\"\n            />\n            <span\n              class=\"flexrow-item\"\n              v-if=\"assignees.length > 0 && !isCurrentUserClient\"\n            >\n              {{ $t('tasks.fields.assignees') }}:\n            </span>\n            <template v-if=\"!isCurrentUserClient\">\n              <span\n                class=\"flexrow-item avatar-wrapper\"\n                :key=\"person.id\"\n                v-for=\"person in assignees\"\n              >\n                <people-avatar\n                  class=\"flexrow-item\"\n                  :person=\"person\"\n                  :size=\"30\"\n                  :font-size=\"16\"\n                />\n              </span>\n            </template>\n            <subscribe-button\n              class=\"flexrow-item action-button\"\n              :subscribed=\"isAssigned || task.is_subscribed\"\n              @click=\"toggleSubscribe\"\n              v-if=\"!isAssigned\"\n            />\n          </div>\n        </div>\n      </div>\n\n      <div class=\"task-columns\" ref=\"task-columns\">\n        <div class=\"task-column preview-column\">\n          <div class=\"preview-column-content block\">\n            <div class=\"flexrow preview-header\">\n              <div class=\"flexrow-item\" v-if=\"isPreviews\">\n                <combobox-styled\n                  class=\"preview-combo flexrow-item\"\n                  :options=\"previewOptions\"\n                  is-preview\n                  v-model=\"selectedPreviewId\"\n                />\n              </div>\n              <div v-else>\n                <em>\n                  {{ $t('tasks.no_preview') }}\n                </em>\n              </div>\n\n              <div class=\"set-main-preview flexrow-item flexrow pull-right\">\n                <button\n                  :class=\"{\n                    button: true,\n                    'flexrow-item': true,\n                    'is-loading': loading.setPreview\n                  }\"\n                  @click=\"setPreview\"\n                  v-if=\"isCurrentUserManager\"\n                >\n                  <image-icon class=\"icon\" />\n                  <span class=\"text\">\n                    {{ $t('tasks.set_preview') }}\n                  </span>\n                </button>\n                <span class=\"error flexrow-item\" v-if=\"errors.setPreview\">\n                  {{ $t('tasks.set_preview_error') }}\n                </span>\n              </div>\n            </div>\n\n            <div class=\"preview-area mt1\">\n              <div v-if=\"isPreviews\">\n                <preview-player\n                  ref=\"preview-player\"\n                  :entity-preview-files=\"taskEntityPreviews\"\n                  :extra-wide=\"true\"\n                  :last-preview-files=\"taskPreviews || []\"\n                  :link=\"currentPreviewComment?.links?.[0]\"\n                  :previews=\"currentPreview.previews\"\n                  :read-only=\"isPreviewPlayerReadOnly\"\n                  :task=\"task\"\n                  :task-type-map=\"taskTypeMap\"\n                  @add-extra-preview=\"onAddExtraPreviewClicked\"\n                  @annotation-changed=\"onAnnotationChanged\"\n                  @change-current-preview=\"changeCurrentPreview\"\n                  @remove-extra-preview=\"onRemoveExtraPreviewClicked\"\n                  @previews-order-changed=\"onPreviewsOrderChanged\"\n                  @frame-updated=\"onFrameUpdated\"\n                  v-if=\"currentPreview\"\n                />\n              </div>\n            </div>\n          </div>\n          <div class=\"flexrow-item block mt1 mr0 info-block\">\n            <page-subtitle :text=\"$t('main.info')\" />\n            <div class=\"table-body mt1\">\n              <table class=\"datatable no-header\" v-if=\"task\">\n                <tbody class=\"table-body\">\n                  <tr class=\"datatable-row\">\n                    <td class=\"field-label\">\n                      {{ $t('tasks.fields.estimation') }}\n                    </td>\n                    <td>{{ formatDuration(task.estimation) }}</td>\n                  </tr>\n                  <tr class=\"datatable-row\">\n                    <td class=\"field-label\">\n                      {{ $t('tasks.fields.duration') }}\n                    </td>\n                    <td>{{ formatDuration(task.duration) }}</td>\n                  </tr>\n                  <tr class=\"datatable-row\">\n                    <td class=\"field-label\">\n                      {{ $t('tasks.fields.retake_count') }}\n                    </td>\n                    <td>{{ task.retake_count }}</td>\n                  </tr>\n                  <tr class=\"datatable-row\">\n                    <td class=\"field-label\">\n                      {{ $t('tasks.fields.start_date') }}\n                    </td>\n                    <td>{{ formatSimpleDate(task.start_date) }}</td>\n                  </tr>\n                  <tr class=\"datatable-row\">\n                    <td class=\"field-label\">\n                      {{ $t('tasks.fields.due_date') }}\n                    </td>\n                    <td>{{ formatSimpleDate(task.due_date) }}</td>\n                  </tr>\n                  <tr class=\"datatable-row\">\n                    <td class=\"field-label\">\n                      {{ $t('tasks.fields.end_date') }}\n                    </td>\n                    <td>{{ formatSimpleDate(task.end_date) }}</td>\n                  </tr>\n                  <tr class=\"datatable-row\">\n                    <td class=\"field-label\">\n                      {{ $t('tasks.fields.done_date') }}\n                    </td>\n                    <td>{{ formatSimpleDate(task.done_date) }}</td>\n                  </tr>\n                </tbody>\n              </table>\n            </div>\n          </div>\n          <div class=\"pa2\"></div>\n        </div>\n\n        <div class=\"task-column comments-column\">\n          <div v-if=\"task\">\n            <div>\n              <add-comment\n                ref=\"add-comment\"\n                :frame=\"currentFrame\"\n                :is-error=\"errors.addComment\"\n                :is-max-retakes-error=\"errors.addCommentMaxRetakes\"\n                :is-loading=\"loading.addComment\"\n                :is-movie=\"isMovie\"\n                :team=\"currentTeam\"\n                :task=\"task\"\n                :task-status=\"taskStatusForCurrentUser\"\n                :preview-forms=\"previewForms\"\n                :fps=\"currentFps\"\n                :revision=\"currentRevision\"\n                @add-comment=\"addComment\"\n                @add-preview=\"onAddPreviewClicked\"\n                @file-drop=\"selectFile\"\n                @clear-files=\"clearPreviewFiles\"\n                @annotation-snapshots-requested=\"extractAnnotationSnapshots\"\n                @remove-preview=\"onPreviewFormRemoved\"\n                v-if=\"isCommentingAllowed\"\n              />\n              <div\n                class=\"comments\"\n                v-if=\"taskComments && taskComments.length > 0\"\n              >\n                <XyzTransitionGroup\n                  appear\n                  v-xyz=\"{ fade: false, up: false, 'flip-up': false }\"\n                >\n                  <comment\n                    :key=\"comment.id\"\n                    :comment=\"comment\"\n                    :fps=\"currentFps\"\n                    :frame=\"currentFrame\"\n                    :is-change=\"isStatusChange(index)\"\n                    :is-checkable=\"\n                      user.id === comment.person?.id ||\n                      (isCurrentUserArtist && isAssigned) ||\n                      isDepartmentSupervisor ||\n                      isCurrentUserManager\n                    \"\n                    :is-editable=\"\n                      user.id === comment.person?.id || isCurrentUserAdmin\n                    \"\n                    :is-pinnable=\"\n                      isDepartmentSupervisor || isCurrentUserManager\n                    \"\n                    :revision=\"currentRevision\"\n                    :task=\"task\"\n                    :team=\"currentTeam\"\n                    @ack-comment=\"onAckComment\"\n                    @duplicate-comment=\"onDuplicateComment\"\n                    @pin-comment=\"onPinComment\"\n                    @edit-comment=\"onEditComment\"\n                    @delete-comment=\"onDeleteComment\"\n                    @checklist-updated=\"saveComment\"\n                    @time-code-clicked=\"timeCodeClicked\"\n                    v-for=\"(comment, index) in taskComments\"\n                  />\n                </XyzTransitionGroup>\n              </div>\n              <div class=\"no-comment\" v-else>\n                <em>\n                  {{ $t('tasks.no_comment') }}\n                </em>\n              </div>\n            </div>\n          </div>\n\n          <div class=\"has-text-centered\" v-if=\"taskLoading.isLoading\">\n            <spinner />\n          </div>\n        </div>\n      </div>\n\n      <add-preview-modal\n        ref=\"add-preview-modal\"\n        :active=\"modals.addPreview\"\n        :is-loading=\"loading.addPreview\"\n        :is-error=\"errors.addPreview\"\n        :form-data=\"addPreviewFormData\"\n        :fps=\"currentFps\"\n        :expected-frames=\"entityFrames\"\n        :title=\"\n          task\n            ? `${task.entity_name} / ${taskTypeMap.get(task.task_type_id).name}`\n            : ''\n        \"\n        @cancel=\"closeAddPreviewModal\"\n        @confirm=\"confirmAddPreviewModal\"\n      />\n\n      <add-preview-modal\n        ref=\"add-extra-preview-modal\"\n        :active=\"modals.addExtraPreview\"\n        :is-loading=\"loading.addExtraPreview\"\n        :is-error=\"errors.addExtraPreview\"\n        :form-data=\"addExtraPreviewFormData\"\n        message=\"\"\n        :title=\"\n          task\n            ? `${task.entity_name} / ${taskTypeMap.get(task.task_type_id).name}`\n            : ''\n        \"\n        @cancel=\"hideExtraPreviewModal\"\n        @confirm=\"createExtraPreview\"\n      />\n\n      <edit-comment-modal\n        :active=\"modals.editComment\"\n        :frame=\"currentFrame\"\n        :is-loading=\"loading.editComment\"\n        :is-error=\"errors.editComment\"\n        :comment-to-edit=\"commentToEdit\"\n        :team=\"currentTeam\"\n        :fps=\"currentFps\"\n        :revision=\"currentRevision\"\n        @confirm=\"confirmEditTaskComment\"\n        @cancel=\"onCancelEditComment\"\n      />\n\n      <delete-modal\n        :active=\"modals.deleteComment\"\n        :is-loading=\"loading.deleteComment\"\n        :is-error=\"errors.deleteComment\"\n        :text=\"$t('tasks.delete_comment')\"\n        :error-text=\"$t('tasks.delete_comment_error')\"\n        @confirm=\"confirmDeleteTaskComment\"\n        @cancel=\"onCancelDeleteComment\"\n      />\n\n      <delete-modal\n        :active=\"modals.deleteExtraPreview\"\n        :is-loading=\"loading.deleteExtraPreview\"\n        :is-error=\"errors.deleteExtraPreview\"\n        :text=\"$t('tasks.delete_preview')\"\n        :error-text=\"$t('tasks.delete_preview_error')\"\n        @cancel=\"hideRemoveExtraPreviewModal\"\n        @confirm=\"confirmDeleteTaskPreview\"\n      />\n    </div>\n  </div>\n</template>\n\n<script>\nimport { CornerLeftUpIcon, ImageIcon } from 'lucide-vue-next'\nimport { mapGetters, mapActions } from 'vuex'\n\nimport drafts from '@/lib/drafts'\nimport { getTaskEntityPath, getTaskEntitiesPath } from '@/lib/path'\nimport { sortPeople } from '@/lib/sorting'\n\nimport { formatListMixin } from '@/components/mixins/format'\nimport { taskMixin } from '@/components/mixins/task'\n\nimport AddComment from '@/components/widgets/AddComment.vue'\nimport AddPreviewModal from '@/components/modals/AddPreviewModal.vue'\nimport Comment from '@/components/widgets/Comment.vue'\nimport ComboboxStyled from '@/components/widgets/ComboboxStyled.vue'\nimport DeleteModal from '@/components/modals/DeleteModal.vue'\nimport EditCommentModal from '@/components/modals/EditCommentModal.vue'\nimport EntityThumbnail from '@/components/widgets/EntityThumbnail.vue'\nimport PageSubtitle from '@/components/widgets/PageSubtitle.vue'\nimport PeopleAvatar from '@/components/widgets/PeopleAvatar.vue'\nimport Spinner from '@/components/widgets/Spinner.vue'\nimport SubscribeButton from '@/components/widgets/SubscribeButton.vue'\nimport TaskTypeName from '@/components/widgets/TaskTypeName.vue'\nimport ValidationTag from '@/components/widgets/ValidationTag.vue'\nimport PreviewPlayer from '@/components/previews/PreviewPlayer.vue'\n\nexport default {\n  name: 'task',\n\n  mixins: [formatListMixin, taskMixin],\n\n  components: {\n    AddComment,\n    AddPreviewModal,\n    ComboboxStyled,\n    Comment,\n    CornerLeftUpIcon,\n    DeleteModal,\n    EditCommentModal,\n    EntityThumbnail,\n    ImageIcon,\n    PageSubtitle,\n    PeopleAvatar,\n    PreviewPlayer,\n    Spinner,\n    SubscribeButton,\n    TaskTypeName,\n    ValidationTag\n  },\n\n  data() {\n    return {\n      previewForms: [],\n      currentFrame: 0,\n      currentTask: null,\n      selectedTab: 'validation',\n      taskLoading: {\n        isLoading: true,\n        isError: false\n      },\n      modals: {\n        addPreview: false,\n        addExtraPreview: false,\n        deleteExtraPreview: false,\n        deleteTask: false,\n        deleteComment: false,\n        editComment: false\n      },\n      loading: {\n        addComment: false,\n        addPreview: false,\n        addExtraPreview: false,\n        setPreview: false,\n        deleteTask: false,\n        deleteComment: false,\n        editComment: false\n      },\n      errors: {\n        addComment: false,\n        addCommentMaxRetakes: false,\n        addPreview: false,\n        addExtraPreview: false,\n        setPreview: false,\n        deleteTask: false,\n        deleteComment: false,\n        editComment: false\n      },\n      addPreviewFormData: null,\n      addExtraPreviewFormData: null,\n      task: null,\n      taskComments: [],\n      taskPreviews: [],\n      commentToEdit: null,\n      selectedPreviewId: null\n    }\n  },\n\n  created() {\n    this.clearSelectedTasks()\n  },\n\n  mounted() {\n    this.loadTaskData().then(() => {\n      this.reset()\n    })\n    this.$nextTick(() => {\n      if (this.$refs['task-columns']) {\n        this.$refs['task-columns'].scrollTop = 100\n        window.scrollTo(0, 0)\n      }\n    })\n  },\n\n  computed: {\n    ...mapGetters([\n      'currentEpisode',\n      'currentProduction',\n      'displayedShots',\n      'displayedAssets',\n      'getTaskComments',\n      'getTaskPreviews',\n      'getTaskComment',\n      'isCurrentUserAdmin',\n      'isCurrentUserArtist',\n      'isCurrentUserClient',\n      'isCurrentUserManager',\n      'isCurrentUserSupervisor',\n      'isSingleEpisode',\n      'isTVShow',\n      'personMap',\n      'productionMap',\n      'route',\n      'shotMap',\n      'taskEntityPreviews',\n      'taskStatus',\n      'taskStatusForCurrentUser',\n      'taskMap',\n      'taskTypeMap',\n      'user'\n    ]),\n\n    currentEntity() {\n      return this.task && this.task.entity\n    },\n\n    previewOptions() {\n      return [...this.taskPreviews]\n        .sort((a, b) => b.revision - a.revision)\n        .map(preview => {\n          return {\n            label: `v${preview.revision}`,\n            value: preview.id\n          }\n        })\n    },\n\n    isPreviewButtonVisible() {\n      return (\n        this.isCurrentUserManager &&\n        this.task &&\n        this.task.entity &&\n        this.task.entity.preview_file_id !== this.currentPreviewId &&\n        ['png', 'mp4'].includes(this.extension)\n      )\n    },\n\n    isMovie() {\n      return this.extension === 'mp4'\n    },\n\n    isPreviewPlayerReadOnly() {\n      if (this.task) {\n        if (this.isCurrentUserManager || this.isCurrentUserClient) {\n          return false\n        } else if (this.isCurrentUserSupervisor) {\n          if (this.user.departments.length === 0) {\n            return false\n          } else {\n            return !this.user.departments.includes(this.taskType?.department_id)\n          }\n        }\n      }\n      return true\n    },\n\n    extension() {\n      return this.currentPreview ? this.currentPreview.extension : ''\n    },\n\n    currentPreviewId() {\n      return this.currentPreview ? this.currentPreview.id : ''\n    },\n\n    currentPreview() {\n      if (this.isPreviews) {\n        let currentPreview = this.taskPreviews[0]\n        const previewId = this.route.params.preview_id\n        if (this.selectedPreviewId) {\n          currentPreview = this.taskPreviews.find(preview => {\n            return preview.id === previewId\n          })\n        }\n        return currentPreview\n      } else {\n        return null\n      }\n    },\n\n    currentPreviewComment() {\n      return this.taskComments.find(comment =>\n        comment.previews?.some(\n          preview => preview.revision === this.currentRevision\n        )\n      )\n    },\n\n    currentRevision() {\n      return this.currentPreview?.revision || 0\n    },\n\n    taskTypeBorder() {\n      let border = 'transparent'\n      if (this.task) border = this.task.task_type_color\n      return {\n        'border-left': `4px solid ${border}`\n      }\n    },\n\n    deleteTaskPath() {\n      return this.taskPath(this.task, 'task-delete')\n    },\n\n    isPreviews() {\n      return this.taskPreviews && this.taskPreviews.length > 0\n    },\n\n    taskEntityPath() {\n      if (this.task) {\n        const episodeId = this.currentEpisode\n          ? this.currentEpisode.id\n          : this.$route.params.episode_id\n        return getTaskEntityPath(this.task, episodeId)\n      } else {\n        return {\n          name: 'open-productions'\n        }\n      }\n    },\n\n    taskEntitiesPath() {\n      if (this.task) {\n        const episodeId = this.currentEpisode\n          ? this.currentEpisode.id\n          : this.$route.params.episode_id\n        return getTaskEntitiesPath(this.task, episodeId)\n      } else {\n        return {\n          name: 'open-productions'\n        }\n      }\n    },\n\n    entityList() {\n      const hasEntity = this.displayedShots.some(\n        entity => entity.id === this.task.entity_id\n      )\n      return hasEntity ? this.displayedShots : this.displayedAssets\n    },\n\n    previousEntity() {\n      if (this.task) {\n        const taskTypeId = this.task.task_type_id\n        const entityIndex = this.entityList.findIndex(entity => {\n          return entity.id === this.task.entity_id\n        })\n        let firstTraversal = false\n\n        let previousEntityIndex = entityIndex - 1\n        if (previousEntityIndex < 0) {\n          previousEntityIndex = this.entityList.length - 1\n        }\n\n        let taskId = null\n        while (!taskId) {\n          if (this.entityList[previousEntityIndex]) {\n            const entity = this.entityList[previousEntityIndex]\n            taskId = entity.tasks.find(ctaskId => {\n              const task = this.taskMap.get(taskId)\n              if (task) {\n                return task.task_type_id === taskTypeId\n              } else {\n                return false\n              }\n            })\n          } else {\n            taskId = this.task.id\n          }\n\n          if (!taskId) {\n            previousEntityIndex--\n            if (previousEntityIndex < 0) {\n              previousEntityIndex = this.entityList.length\n              if (firstTraversal) {\n                return null\n              }\n              firstTraversal = true\n            }\n          }\n        }\n\n        return this.taskPath({ id: taskId })\n      } else {\n        return {\n          name: 'open-productions'\n        }\n      }\n    },\n\n    nextEntity() {\n      if (this.task) {\n        const taskTypeId = this.task.task_type_id\n        let firstTraversal = false\n        const entityIndex = this.entityList.findIndex(entity => {\n          return entity.id === this.task.entity_id\n        })\n\n        let nextEntityIndex = entityIndex + 1\n        if (nextEntityIndex >= this.entityList.length) {\n          nextEntityIndex = 0\n        }\n\n        let taskId = null\n        while (!taskId) {\n          if (this.entityList[nextEntityIndex]) {\n            const entity = this.entityList[nextEntityIndex]\n            taskId = entity.tasks.find(ctaskId => {\n              const task = this.taskMap.get(taskId)\n              if (task) {\n                return task.task_type_id === taskTypeId\n              } else {\n                return false\n              }\n            })\n          } else {\n            taskId = this.task.id\n          }\n\n          if (!taskId) {\n            nextEntityIndex++\n            if (nextEntityIndex >= this.entityList.length) {\n              nextEntityIndex = 0\n\n              if (firstTraversal) {\n                return null\n              }\n              firstTraversal = true\n            }\n          }\n        }\n\n        return this.taskPath({ id: taskId })\n      } else {\n        return {\n          name: 'open-productions'\n        }\n      }\n    },\n\n    title() {\n      if (this.task) {\n        const type = this.task.entity_type_name\n        let entityName = this.task.full_entity_name || this.task.entity_name\n        if (this.isTVShow && type === 'Shot') {\n          entityName = entityName.split('/').splice(1).join('/')\n        }\n        if (this.isTVShow && type === 'Episode') {\n          entityName = this.task.entity_name\n        }\n        return `${entityName}`\n      } else {\n        return 'Loading...'\n      }\n    },\n\n    windowTitle() {\n      if (this.task) {\n        const taskTypeName = this.task.task_type_name\n        return `${this.title} / ${taskTypeName}`\n      } else {\n        return 'Loading...'\n      }\n    },\n\n    deleteText() {\n      if (this.task) {\n        const taskType = this.taskTypeMap.get(this.task.task_type_id)\n        return this.$t('main.delete_text', {\n          name: `${this.task.entity_name} / ${taskType.name}`\n        })\n      } else {\n        return ''\n      }\n    },\n\n    assignees() {\n      return sortPeople(\n        this.task.assignees.map(personId => this.personMap.get(personId))\n      )\n    },\n\n    isAssigned() {\n      return (\n        this.task?.assignees.some(personId => personId === this.user.id) ??\n        false\n      )\n    },\n\n    isCommentingAllowed() {\n      return (\n        this.isAssigned ||\n        this.isCurrentUserClient ||\n        this.isDepartmentSupervisor ||\n        this.isCurrentUserManager\n      )\n    },\n\n    isDepartmentSupervisor() {\n      if (!this.isCurrentUserSupervisor) {\n        return false\n      }\n      if (this.user.departments.length === 0) {\n        return true\n      }\n      return this.user.departments.includes(this.taskType?.department_id)\n    },\n\n    taskType() {\n      return this.taskTypeMap.get(this.task?.task_type_id)\n    },\n\n    currentTeam() {\n      return sortPeople(\n        this.currentProduction.team.map(personId =>\n          this.personMap.get(personId)\n        )\n      )\n    }\n  },\n\n  methods: {\n    ...mapActions([\n      'addAttachmentToComment',\n      'ackComment',\n      'addCommentPreview',\n      'addCommentExtraPreview',\n      'commentTask',\n      'commentTaskWithPreview',\n      'changeCommentPreview',\n      'clearSelectedTasks',\n      'deleteAttachment',\n      'deleteTask',\n      'deleteTaskPreview',\n      'deleteTaskComment',\n      'editTaskComment',\n      'loadComment',\n      'loadEpisodes',\n      'loadTask',\n      'loadShots',\n      'loadAssets',\n      'loadPreviewFileFormData',\n      'loadTaskComments',\n      'refreshComment',\n      'refreshPreview',\n      'pinComment',\n      'subscribeToTask',\n      'setCurrentEpisode',\n      'unsubscribeFromTask',\n      'updatePreviewAnnotation'\n    ]),\n\n    loadTaskData() {\n      const task = this.getCurrentTask()\n      if (!task) {\n        this.taskLoading = { isLoading: true, isError: false }\n        return this.loadTask({ taskId: this.route.params.task_id })\n          .then(task => {\n            let loadingFunction = callback => {\n              this.loadAssets().then(callback)\n            }\n\n            if (task.entity_type_name === 'Shot') {\n              loadingFunction = callback => {\n                this.loadEpisodes()\n                  .then(() => {\n                    if (this.isTVShow) {\n                      this.setCurrentEpisode(task.episode.id)\n                    }\n                    this.loadShots(callback)\n                  })\n                  .catch(callback)\n              }\n            }\n            return loadingFunction(() => {\n              this.task = task\n              return this.loadTaskComments({\n                taskId: task.id,\n                entityId: task.entity_id\n              })\n                .then(() => {\n                  this.reset()\n                  this.taskLoading = { isLoading: false, isError: false }\n                })\n                .catch(err => {\n                  console.error(err)\n                  this.taskLoading = { isLoading: false, isError: true }\n                })\n            })\n          })\n          .catch(err => {\n            console.error(err)\n            this.taskLoading = { isLoading: false, isError: true }\n          })\n      } else {\n        const taskId = this.route.params.task_id\n        this.task = task\n        return this.loadTaskComments({\n          taskId,\n          entityId: task.entity_id\n        })\n          .then(() => {\n            this.reset()\n          })\n          .catch(err => {\n            console.error(err)\n            this.taskLoading.isError = true\n          })\n          .finally(() => {\n            this.taskLoading.isLoading = false\n          })\n      }\n    },\n\n    getCurrentTask() {\n      return this.taskMap.get(this.route.params.task_id)\n    },\n\n    getCurrentTaskComments() {\n      return this.getTaskComments(this.route.params.task_id)\n    },\n\n    getCurrentTaskPreviews() {\n      return this.getTaskPreviews(this.route.params.task_id)\n    },\n\n    addComment(\n      comment,\n      attachment,\n      checklist,\n      taskStatusId,\n      revision = undefined,\n      link = undefined\n    ) {\n      const params = {\n        taskId: this.task.id,\n        taskStatusId: taskStatusId,\n        attachment,\n        checklist,\n        comment,\n        links: link ? [link] : null,\n        revision\n      }\n      const action =\n        this.previewForms.length > 0 ? 'commentTaskWithPreview' : 'commentTask'\n      this.loading.addComment = true\n      this.errors.addComment = false\n      this.errors.addCommentMaxRetakes = false\n      this.$store\n        .dispatch(action, params)\n        .then(() => {\n          drafts.clearTaskDraft(this.task.id)\n          this.reset()\n          this.loading.addComment = false\n        })\n        .catch(err => {\n          console.error(err)\n          this.errors.addComment = true\n          this.loading.addComment = false\n          const isRetakeError = err.body?.message?.includes('retake') ?? false\n          this.errors.addComment = !isRetakeError\n          this.errors.addCommentMaxRetakes = isRetakeError\n        })\n    },\n\n    reset({ keepPreviewFiles = false } = {}) {\n      this.resetModals()\n      this.resetPreview(false)\n      if (!keepPreviewFiles) {\n        this.clearPreviewFiles(false)\n      }\n      this.taskComments = this.getCurrentTaskComments()\n      this.taskPreviews = this.getCurrentTaskPreviews()\n      this.task = this.getCurrentTask()\n      this.resetDraft()\n      setTimeout(() => {\n        if (this.$route.params.preview_id) {\n          this.selectedPreviewId = this.$route.params.preview_id\n        }\n      }, 200)\n    },\n\n    selectFile(forms) {\n      this.previewForms = this.previewForms.concat(forms)\n      this.loadPreviewFileFormData(this.previewForms)\n    },\n\n    clearPreviewFiles() {\n      this.previewForms = []\n      this.loadPreviewFileFormData(this.previewForms)\n      this.$store.commit('CLEAR_UPLOAD_PROGRESS')\n    },\n\n    isHighlighted(comment) {\n      return comment.preview && comment.preview.id === this.currentPreviewId\n    },\n\n    createExtraPreview(forms) {\n      this.selectFile(forms)\n\n      const previews = this.taskPreviews\n      const preview = previews.length > 0 ? previews[0] : null\n      this.errors.addExtraPreview = false\n      this.loading.addExtraPreview = true\n      const comment = this.getCurrentTaskComments().find(comment => {\n        return comment.previews.findIndex(p => p.id === preview.id) >= 0\n      })\n      this.addCommentExtraPreview({\n        taskId: this.task.id,\n        previewId: this.currentPreview.id,\n        commentId: comment.id\n      })\n        .then(() => {\n          this.loading.addExtraPreview = false\n          this.modals.addExtraPreview = false\n          this.$refs['add-extra-preview-modal'].reset()\n          this.clearPreviewFiles()\n          setTimeout(() => {\n            this.$refs['preview-player'].displayLast()\n          }, 0)\n        })\n        .catch(err => {\n          console.error(err)\n          this.errors.addExtraPreview = true\n          this.loading.addExtraPreview = false\n        })\n    },\n\n    resetPreview(changeRoute = true) {\n      const previews = this.taskPreviews || []\n      const preview = previews.length > 0 ? previews[0] : null\n      this.taskComments = this.getCurrentTaskComments()\n      this.taskPreviews = this.getCurrentTaskPreviews()\n      if (preview && changeRoute) {\n        this.$router.push(this.previewPath(preview.id))\n      }\n    },\n\n    setPreview() {\n      this.loading.setPreview = true\n      this.errors.setPreview = false\n      const previewPlayer = this.$refs['preview-player']\n      const previewId = previewPlayer.currentPreview.id\n      this.$store\n        .dispatch('setPreview', {\n          taskId: this.task.id,\n          entityId: this.task.entity.id,\n          previewId\n        })\n        .then(() => {\n          this.loading.setPreview = false\n        })\n        .catch(err => {\n          console.error(err)\n          this.errors.setPreview = true\n        })\n    },\n\n    async saveComment(comment) {\n      try {\n        await this.editTaskComment({\n          taskId: this.task.id,\n          comment\n        })\n      } catch (err) {\n        console.error(err)\n        await this.loadTaskData()\n      }\n    },\n\n    confirmDeleteTaskComment() {\n      this.loading.deleteComment = true\n      this.errors.deleteComment = false\n      const commentId = this.commentToEdit.id\n\n      this.deleteTaskComment({\n        taskId: this.task.id,\n        commentId\n      })\n        .then(() => {\n          this.loading.deleteComment = false\n          this.reset()\n          if (this.isPreviews) this.resetPreview()\n          this.modals.deleteComment = false\n        })\n        .catch(err => {\n          console.error(err)\n          this.loading.deleteComment = false\n          this.errors.deleteComment = true\n        })\n    },\n\n    confirmDeleteTaskPreview() {\n      this.loading.deleteExtraPreview = true\n      this.errors.deleteExtraPreview = false\n      const previewId = this.currentPreviewId\n      const comment = this.getCurrentTaskComments().find(comment => {\n        return comment.previews.findIndex(p => p.id === previewId) >= 0\n      })\n\n      this.$refs['preview-player'].displayFirst()\n      this.deleteTaskPreview({\n        taskId: this.task.id,\n        commentId: comment.id,\n        previewId: this.currentExtraPreviewId\n      })\n        .then(() => {\n          this.loading.deleteExtraPreview = false\n          this.resetPreview()\n          this.hideRemoveExtraPreviewModal()\n        })\n        .catch(err => {\n          console.error(err)\n          this.loading.deleteExtraPreview = false\n          this.errors.deleteExtraPreview = true\n        })\n    },\n\n    onPreviewAdded(eventData) {\n      const taskId = eventData.task_id\n      const commentId = eventData.comment_id\n      const previewId = eventData.preview_file_id\n      const revision = eventData.revision\n      const extension = eventData.extension\n      const comment = this.$store.getters.getTaskComment(taskId, commentId)\n\n      if (\n        this.task &&\n        comment &&\n        comment.previews &&\n        (comment.previews.length === 0 ||\n          comment.previews[0].id !== previewId) &&\n        taskId === this.task.id\n      ) {\n        this.$store.commit('ADD_PREVIEW_END', {\n          preview: {\n            id: previewId,\n            revision,\n            extension: extension\n          },\n          taskId,\n          commentId,\n          comment\n        })\n        this.reset({ keepPreviewFiles: true })\n      }\n    },\n\n    toggleSubscribe() {\n      if (this.task && !this.isAssigned) {\n        if (this.task.is_subscribed) {\n          this.unsubscribeFromTask(this.task.id)\n        } else {\n          this.subscribeToTask(this.task.id)\n        }\n      }\n    },\n\n    taskPath(task, section = 'task') {\n      if (!task) {\n        task = this.task\n      } else {\n        task.project_id = this.task.project_id\n        task.episode_id = this.task.episode_id\n      }\n\n      let route = { name: 'open-productions' }\n      if (task) {\n        route = {\n          name: section,\n          params: {\n            production_id: task.project_id,\n            task_id: task.id\n          }\n        }\n\n        if (this.isTVShow && this.currentEpisode) {\n          route.name = `episode-${section}`\n          route.params.episode_id = task.episode_id || this.currentEpisode.id\n        }\n      }\n      return route\n    },\n\n    previewPath(previewId) {\n      const route = this.taskPath(this.task, 'task-preview')\n      if (this.isTVShow) {\n        const taskType = this.taskTypeMap.get(this.task.task_type_id)\n        route.name = 'episode-task-preview'\n        if (taskType.for_entity === 'Episode') {\n          route.name = 'episode-episode-task-preview'\n        }\n      }\n      if (route.params) {\n        route.params.preview_id = previewId\n      }\n      return route\n    },\n\n    onAnnotationChanged({ preview, additions, deletions, updates }) {\n      const taskId = this.task.id\n      this.updatePreviewAnnotation({\n        taskId,\n        preview,\n        additions,\n        deletions,\n        updates\n      })\n    },\n\n    onAddExtraPreviewClicked() {\n      this.clearPreviewFiles()\n      this.modals.addExtraPreview = true\n    },\n\n    onRemoveExtraPreviewClicked(preview) {\n      this.showRemoveExtraPreviewModal(preview)\n    },\n\n    hideExtraPreviewModal() {\n      this.modals.addExtraPreview = false\n    },\n\n    showRemoveExtraPreviewModal(preview) {\n      this.currentExtraPreviewId = preview.id\n      this.modals.deleteExtraPreview = true\n    },\n\n    hideRemoveExtraPreviewModal() {\n      this.modals.deleteExtraPreview = false\n    },\n\n    onAddPreviewClicked() {\n      this.modals.addPreview = true\n    },\n\n    closeAddPreviewModal() {\n      this.modals.addPreview = false\n    },\n\n    confirmAddPreviewModal(forms) {\n      this.selectFile(forms)\n      this.closeAddPreviewModal()\n    },\n\n    onAckComment(comment) {\n      this.ackComment(comment)\n    },\n\n    onDuplicateComment(comment) {\n      this.$refs['add-comment'].setValue(comment)\n    },\n\n    onPinComment(comment) {\n      this.pinComment(comment)\n    },\n\n    onEditComment(comment) {\n      this.commentToEdit = comment\n      this.modals.editComment = true\n    },\n\n    onDeleteComment(comment) {\n      this.commentToEdit = comment\n      this.modals.deleteComment = true\n    },\n\n    onCancelEditComment(comment) {\n      this.modals.editComment = false\n    },\n\n    onCancelDeleteComment(comment) {\n      this.modals.deleteComment = false\n    },\n\n    onFrameUpdated(frame) {\n      this.currentFrame = frame\n    },\n\n    onPreviewFormRemoved(previewForm) {\n      this.previewForms = this.previewForms.filter(f => f !== previewForm)\n      this.loadPreviewFileFormData(this.previewForms)\n    },\n\n    changeCurrentPreview(preview) {\n      this.$router.push(this.previewPath(preview.id))\n    },\n\n    onRemoteAcknowledge(eventData, type) {\n      if (this.task) {\n        const comment = this.taskComments.find(\n          c => c.id === eventData.comment_id\n        )\n        const user = this.personMap.get(eventData.person_id)\n        if (comment && user) {\n          if (this.user.id === user.id) {\n            if (\n              (type === 'ack' && !comment.acknowledgements.includes(user.id)) ||\n              (type === 'unack' && comment.acknowledgements.includes(user.id))\n            ) {\n              this.$store.commit('ACK_COMMENT', { comment, user })\n            }\n          } else {\n            this.$store.commit('ACK_COMMENT', { comment, user })\n          }\n        }\n      }\n    },\n\n    isStatusChange(index) {\n      const comments = this.taskComments\n      const comment = comments[index]\n      return (\n        index === comments.length - 1 ||\n        comment.task_status_id !== comments[index + 1].task_status_id\n      )\n    },\n\n    timeCodeClicked({\n      versionRevision,\n      minutes,\n      seconds,\n      milliseconds,\n      frame\n    }) {\n      this.changeCurrentPreview(\n        this.taskPreviews.find(p => p.revision === parseInt(versionRevision))\n      )\n      setTimeout(() => {\n        this.$refs['preview-player'].setCurrentFrame(frame)\n        this.$refs['preview-player'].focus()\n      }, 100)\n    },\n\n    onPreviewsOrderChanged() {\n      this.taskPreviews = this.getCurrentTaskPreviews()\n    },\n\n    async extractAnnotationSnapshots() {\n      this.$refs['add-comment'].showAnnotationLoading()\n      const files =\n        await this.$refs['preview-player'].extractAnnotationSnapshots()\n      this.$refs['add-comment'].setAnnotationSnapshots(files)\n      this.$refs['add-comment'].hideAnnotationLoading()\n      return files\n    }\n  },\n\n  watch: {\n    $route() {\n      if (this.task && this.$route.params.task_id !== this.task.id) {\n        this.loadTaskData()\n      }\n      if (this.$route.params.preview_id !== this.selectedPreviewId) {\n        this.selectedPreviewId = this.$route.params.preview_id\n      }\n    },\n\n    currentProduction() {\n      this.loadTaskData()\n    },\n\n    selectedPreviewId() {\n      if (this.task) {\n        this.$router.push(this.previewPath(this.selectedPreviewId))\n      }\n    }\n  },\n\n  socket: {\n    events: {\n      'preview-file:add-file'(eventData) {\n        this.onPreviewAdded(eventData)\n      },\n\n      'preview-file:update'(eventData) {\n        const comment = this.taskComments.find(\n          c =>\n            c.previews &&\n            c.previews.length > 0 &&\n            c.previews[0].id === eventData.preview_file_id\n        )\n        if (comment && this.task) {\n          this.refreshPreview({\n            taskId: this.task.id,\n            previewId: eventData.preview_file_id\n          }).then(preview => {\n            comment.previews[0].validation_status = preview.validation_status\n          })\n        }\n      },\n\n      'comment:acknowledge'(eventData) {\n        this.onRemoteAcknowledge(eventData, 'ack')\n      },\n\n      'comment:unacknowledge'(eventData) {\n        this.onRemoteAcknowledge(eventData, 'unack')\n      },\n\n      'comment:new'(eventData) {\n        setTimeout(() => {\n          if (\n            this.getCurrentTaskComments().length !== this.taskComments.length\n          ) {\n            this.taskComments = this.getCurrentTaskComments()\n            this.taskPreviews = this.getCurrentTaskPreviews()\n          }\n        }, 1000)\n      },\n\n      'comment:update'(eventData) {\n        const commentId = eventData.comment_id\n        if (!this.taskComments.some(({ id }) => id === commentId)) {\n          return\n        }\n        this.loadComment({ commentId }).catch(console.error)\n      },\n\n      'comment:reply'(eventData) {\n        if (this.task) {\n          const comment = this.taskComments.find(\n            c => c.id === eventData.comment_id\n          )\n          if (comment) {\n            if (!comment.replies) comment.replies = []\n            const hasReply = comment.replies.some(\n              reply => reply.id === eventData.reply_id\n            )\n            if (!hasReply) {\n              this.refreshComment({\n                commentId: eventData.comment_id\n              })\n                .then(remoteComment => {\n                  comment.replies = remoteComment.replies\n                })\n                .catch(console.error)\n            }\n          }\n        }\n      },\n\n      'comment:delete'(eventData) {\n        const task = this.getTask()\n        if (task) {\n          const comments = this.getComments()\n          const comment = comments.find(c => c.id === eventData.comment_id)\n          if (comment) {\n            this.$store.commit('REMOVE_TASK_COMMENT', { task, comment })\n            this.taskComments = this.getCurrentTaskComments()\n            this.taskPreviews = this.getCurrentTaskPreviews()\n          }\n        }\n      },\n\n      'comment:delete-reply'(eventData) {\n        if (this.task) {\n          const comment = this.taskComments.find(\n            c => c.id === eventData.comment_id\n          )\n          if (comment) {\n            if (!comment.replies) comment.replies = []\n            this.$store.commit('REMOVE_REPLY_FROM_COMMENT', {\n              comment,\n              reply: { id: eventData.reply_id }\n            })\n          }\n        }\n      },\n\n      'preview-file:annotation-update'(eventData) {\n        const previewPlayer = this.$refs['preview-player']\n        if (!previewPlayer) return\n        const isValid = previewPlayer.isValidPreviewModification(\n          eventData.preview_file_id,\n          eventData.updated_at\n        )\n        if (isValid) {\n          this.refreshPreview({\n            previewId: previewPlayer.currentPreview.id,\n            taskId: previewPlayer.currentPreview.task_id\n          }).then(() => {\n            if (!previewPlayer.notSaved) {\n              this.taskPreviews = this.getCurrentTaskPreviews()\n              this.$nextTick(() => {\n                previewPlayer.reloadAnnotations()\n                previewPlayer.loadAnnotation()\n              })\n            }\n          })\n        }\n      }\n    }\n  },\n\n  head() {\n    let title = 'Loading task... - Kitsu'\n    if (this.task) {\n      const taskTypeName = this.taskTypeMap.get(this.task.task_type_id).name\n      title = `${this.title} / ${taskTypeName} - Kitsu`\n    }\n    return { title }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.dark .task-information,\n.dark .add-comment,\n.dark .comment,\n.dark .no-comment,\n.dark .column {\n  background: #46494f;\n  border-color: $dark-grey;\n  box-shadow: 0 0 6px #333;\n}\n\nh2.subtitle {\n  border: 0;\n  margin: 0;\n  padding: 0;\n}\n\n.page {\n  background: #f9f9f9;\n  margin-top: 60px;\n  padding: 0;\n}\n\n.page.column {\n  background: var(--background-page);\n  padding-bottom: 1em;\n}\n\n.page-header {\n  margin: 1em 1em 0 1em;\n  padding-right: 0;\n}\n\n.navigation-buttons {\n  font-size: 1em;\n  margin-top: 0.5em;\n  margin-bottom: 0.5em;\n}\n\n.navigation-buttons .arrow {\n  font-size: 1.2em;\n  font-weight: bold;\n}\n\n.navigation-buttons a {\n  color: $grey;\n}\n\n.selected {\n  border: 0;\n}\n\n.source {\n  color: #aaa;\n  font-size: 0.8em;\n}\n\nvideo {\n  width: 100%;\n}\n\n.validation-buttons button {\n  width: 100%;\n  margin-bottom: 0.3em;\n  border-width: 2px;\n  font-weight: bold;\n}\n\n.preview-row {\n  margin-bottom: 0.5em;\n}\n\n.add-comment {\n  margin-bottom: 1em;\n  padding: 1em;\n  box-shadow: 0 0 6px #e0e0e0;\n}\n\n.no-comment {\n  background: white;\n  box-shadow: 0 0 6px #e0e0e0;\n  padding: 1em;\n  border-radius: 5px;\n}\n\n.comment {\n  box-shadow: 0 0 6px #e0e0e0;\n  margin-top: 0.3em;\n}\n\n.task-columns {\n  display: flex;\n  flex: 1;\n  flex-direction: row;\n}\n\n.task-column {\n  padding: 1em;\n}\n\n.comments-column {\n  flex: 1;\n}\n\n.preview-column {\n  overflow: auto;\n  flex: 2;\n}\n\n.preview-list {\n  display: flex;\n  flex-wrap: wrap;\n}\n\n.page-header .tag {\n  border-radius: 0;\n  font-weight: bold;\n  margin-right: 0.5em;\n}\n\n.assignees {\n  display: flex;\n}\n\n.assignees span {\n  margin-right: 0.2em;\n}\n\n.avatar-wrapper {\n  margin-right: 0.5em;\n}\n\n.entity-thumbnail {\n  margin-right: 0.3em;\n}\n\n.title {\n  margin: 0;\n  flex: 1;\n}\n\n.pull-right {\n  margin-left: auto;\n}\n\n.title a {\n  color: inherit;\n}\n\n.set-main-preview {\n  height: 30px;\n}\n\n.back-link {\n  padding-top: 6px;\n}\n\n.main-column {\n  display: flex;\n  flex-direction: column;\n  max-height: calc(100% - 60px);\n}\n\n.task-columns {\n  display: flex;\n  max-height: 100%;\n  overflow: hidden;\n}\n\n.task-column {\n  overflow-y: auto;\n}\n\n.info-block {\n  margin-right: 0;\n}\n\n.task-type.block {\n  margin-bottom: 0;\n}\n\n.entity-thumbnail {\n  margin-top: 5px;\n}\n\n.field-label {\n  width: 130px;\n  max-width: 130px;\n}\n\n.title {\n  margin: 0;\n  flex: 1;\n  line-height: 1.5em;\n  font-weight: 500;\n  color: $grey;\n}\n\n@media screen and (max-width: 768px) {\n  .action-button {\n    display: none;\n  }\n\n  .title {\n    font-size: 1.3em;\n    line-height: 1.5em;\n  }\n\n  .header-title {\n    flex-direction: column;\n    align-items: flex-start;\n  }\n\n  .header-title .flexrow-item {\n    margin-bottom: 0.5em;\n  }\n\n  .task-column {\n    width: 100%;\n    overflow-y: initial;\n  }\n}\n</style>\n"],"names":["_sfc_main","EyeIcon","EyeOffIcon","_hoisted_1","_createElementBlock","$options","_ctx","$props","_createBlock","_component_eye_icon","_component_eye_off_icon","formatListMixin","taskMixin","AddComment","AddPreviewModal","ComboboxStyled","Comment","CornerLeftUpIcon","DeleteModal","EditCommentModal","EntityThumbnail","ImageIcon","PageSubtitle","PeopleAvatar","PreviewPlayer","Spinner","SubscribeButton","TaskTypeName","ValidationTag","mapGetters","a","b","preview","_a","currentPreview","previewId","comment","border","episodeId","getTaskEntityPath","getTaskEntitiesPath","entity","taskTypeId","entityIndex","firstTraversal","previousEntityIndex","taskId","ctaskId","task","nextEntityIndex","type","entityName","taskTypeName","taskType","sortPeople","personId","mapActions","err","loadingFunction","callback","attachment","checklist","taskStatusId","revision","link","params","action","drafts","isRetakeError","_b","keepPreviewFiles","forms","previews","p","changeRoute","commentId","eventData","extension","section","route","additions","deletions","updates","frame","previewForm","f","c","user","index","comments","versionRevision","minutes","seconds","milliseconds","files","id","reply","remoteComment","previewPlayer","title","_hoisted_2","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_16","_hoisted_17","_hoisted_19","_hoisted_21","_hoisted_22","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33","_hoisted_34","_hoisted_35","_hoisted_36","_hoisted_37","_hoisted_38","_hoisted_39","_openBlock","_createElementVNode","_hoisted_3","$data","_hoisted_4","_createVNode","_component_router_link","_withCtx","_component_corner_left_up_icon","_component_task_type_name","_createCommentVNode","_component_entity_thumbnail","_createTextVNode","_toDisplayString","_component_validation_tag","_hoisted_9","_Fragment","_renderList","person","_component_people_avatar","_component_subscribe_button","_hoisted_10","_hoisted_14","_component_combobox_styled","_cache","$event","_hoisted_15","_normalizeClass","args","_component_image_icon","_hoisted_18","_hoisted_20","_component_preview_player","_component_page_subtitle","_hoisted_23","_hoisted_40","_component_add_comment","_hoisted_41","_component_XyzTransitionGroup","_component_comment","_hoisted_42","_hoisted_43","_component_spinner","_component_add_preview_modal","_component_edit_comment_modal","_component_delete_modal"],"mappings":"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"}