import{_ as V,M as C,b as g,r as s,q as w,o as r,c as d,d as m,t as f,I as x,k as B,f as n,g as c,h as u,n as S}from"./index-DF-DoQlt.js";import{B as U}from"./BooleanField-r8LThAuD.js";import{C as F}from"./ComboboxBoolean-DT116Lfu.js";import{C as M}from"./ComboboxSimple-B2TmvsnK.js";import{C as A}from"./ComboboxDepartment-Cjj8YvK6.js";import{C as D}from"./ColorField-ByrVYH4e.js";import{M as N}from"./ModalFooter-Chk0SGv-.js";import{T as O}from"./TextField-BKWlN2Ov.js";import{T as q}from"./TextareaField-BVvnEY8u.js";const I={name:"edit-task-type-modal",mixins:[C],components:{BooleanField:U,ComboboxBoolean:F,ComboboxSimple:M,ComboboxDepartment:A,ColorField:D,ModalFooter:N,TextField:O,TextareaField:q},props:{active:{type:Boolean,default:!1},forEntity:{type:String,default:"Asset"},isError:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},taskTypeToEdit:{type:Object,default:()=>{}}},emits:["cancel","confirm"],data(){return{form:{name:"",short_name:"",description:"",color:"#999999",for_entity:"Asset",allow_timelog:"false",department_id:null,archived:"false"},dedicatedToOptions:[{label:this.$t("assets.title"),value:"Asset"},{label:this.$t("shots.title"),value:"Shot"},{label:this.$t("sequences.title"),value:"Sequence"},{label:this.$t("episodes.title"),value:"Episode"},{label:this.$t("edits.title"),value:"Edit"}]}},computed:{...g(["taskTypes","taskTypeStatusOptions","departments"]),isEditing(){return this.taskTypeToEdit&&this.taskTypeToEdit.id}},methods:{newPriority(l){return this.taskTypes.filter(e=>e.for_entity===l).length+1},confirmClicked(){this.isEditing||(this.form.priority=this.newPriority(this.form.for_entity)),this.$emit("confirm",this.form)}},watch:{active(){this.taskTypeToEdit?this.form={name:this.taskTypeToEdit.name,short_name:this.taskTypeToEdit.short_name,description:this.taskTypeToEdit.description,color:this.taskTypeToEdit.color,for_entity:this.taskTypeToEdit.for_entity||"Asset",allow_timelog:String(this.taskTypeToEdit.allow_timelog===!0),department_id:this.taskTypeToEdit.department_id,archived:String(this.taskTypeToEdit.archived===!0)}:this.form={name:"",short_name:"",description:"",color:"#999999",for_entity:this.forEntity,allow_timelog:"false",department_id:null,archived:"false"},this.$nextTick(()=>{this.form.for_entity=this.forEntity})}}},L={class:"modal-content"},P={class:"box"},j={key:0,class:"title"},z={key:1,class:"title"};function G(l,e,a,H,t,i){const p=s("text-field"),y=s("boolean-field"),_=s("textarea-field"),b=s("combobox-simple"),k=s("combobox-department"),E=s("color-field"),T=s("combobox-boolean"),h=s("modal-footer"),v=w("focus");return r(),d("div",{class:S({modal:!0,"is-active":a.active})},[m("div",{class:"modal-background",onClick:e[0]||(e[0]=o=>l.$emit("cancel"))}),m("div",L,[m("div",P,[i.isEditing?(r(),d("h1",j,f(l.$t("task_types.edit_title"))+" "+f(a.taskTypeToEdit.name),1)):(r(),d("h1",z,f(l.$t("task_types.new_task_type")),1)),m("form",{onSubmit:e[9]||(e[9]=x(()=>{},["prevent"]))},[B(n(p,{ref:"nameField",label:l.$t("task_types.fields.name"),modelValue:t.form.name,"onUpdate:modelValue":e[1]||(e[1]=o=>t.form.name=o),onEnter:i.confirmClicked},null,8,["label","modelValue","onEnter"]),[[v]]),n(p,{ref:"shortNameField",label:l.$t("task_types.fields.short_name"),modelValue:t.form.short_name,"onUpdate:modelValue":e[2]||(e[2]=o=>t.form.short_name=o),onEnter:i.confirmClicked},null,8,["label","modelValue","onEnter"]),n(y,{"is-field":"",label:l.$t("task_types.fields.allow_timelog"),onEnter:i.confirmClicked,modelValue:t.form.allow_timelog,"onUpdate:modelValue":e[3]||(e[3]=o=>t.form.allow_timelog=o)},null,8,["label","onEnter","modelValue"]),n(_,{label:l.$t("task_types.fields.description"),modelValue:t.form.description,"onUpdate:modelValue":e[4]||(e[4]=o=>t.form.description=o),onEnter:i.confirmClicked},null,8,["label","modelValue","onEnter"]),i.isEditing?u("",!0):(r(),c(b,{key:0,class:"field",label:l.$t("task_types.fields.dedicated_to"),options:t.dedicatedToOptions,onEnter:i.confirmClicked,modelValue:t.form.for_entity,"onUpdate:modelValue":e[5]||(e[5]=o=>t.form.for_entity=o)},null,8,["label","options","onEnter","modelValue"])),n(k,{label:l.$t("task_types.fields.department"),onEnter:i.confirmClicked,modelValue:t.form.department_id,"onUpdate:modelValue":e[6]||(e[6]=o=>t.form.department_id=o)},null,8,["label","onEnter","modelValue"]),n(E,{class:"mt2",label:l.$t("task_types.fields.color"),modelValue:t.form.color,"onUpdate:modelValue":e[7]||(e[7]=o=>t.form.color=o)},null,8,["label","modelValue"]),i.isEditing?(r(),c(T,{key:1,label:l.$t("main.archived"),onEnter:i.confirmClicked,modelValue:t.form.archived,"onUpdate:modelValue":e[8]||(e[8]=o=>t.form.archived=o)},null,8,["label","onEnter","modelValue"])):u("",!0)],32),n(h,{"error-text":l.$t("task_types.create_error"),"is-loading":a.isLoading,"is-error":a.isError,onConfirm:i.confirmClicked,onCancel:e[10]||(e[10]=o=>l.$emit("cancel"))},null,8,["error-text","is-loading","is-error","onConfirm"])])])],2)}const ee=V(I,[["render",G],["__scopeId","data-v-efcb7418"]]);export{ee as E};
//# sourceMappingURL=EditTaskTypeModal-DyPqVL-V.js.map
