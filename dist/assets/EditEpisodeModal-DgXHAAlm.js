import{_ as V,M as _,b as C,r as n,q as g,o as a,c as r,d as m,t as u,I as p,k as F,f as l,O as c,F as M,e as k,g as x,h as B,n as S}from"./index-DF-DoQlt.js";import{C as U}from"./ComboboxStyled-BlKJF8gk.js";import{M as w}from"./BuildFilterModal-C18AF9bI.js";import{M as D}from"./ModalFooter-Chk0SGv-.js";import{T as O}from"./TextField-BKWlN2Ov.js";import{T as K}from"./TextareaField-BVvnEY8u.js";const L={name:"edit-episode-modal",mixins:[_],components:{ComboboxStyled:U,MetadataField:w,ModalFooter:D,TextField:O,TextareaField:K},props:{active:{type:Boolean,default:!1},isError:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},episodeToEdit:{type:Object,default:()=>{}}},emits:["cancel","confirm"],data(){let t={id:"",name:"",description:"",fps:"",data:{resolution:""}};return this.episodeToEdit&&this.episodeToEdit.id&&(t={id:this.episodeToEdit.id,name:this.episodeToEdit.name,description:this.episodeToEdit.description,production_id:this.episodeToEdit.project_id,data:{...this.episodeToEdit.data,resolution:this.episodeToEdit.data.resolution||""}}),{form:t,episodeSuccessText:"",episodeStatusOptions:[{label:"canceled",value:"canceled"},{label:"complete",value:"complete"},{label:"running",value:"running"},{label:"standby",value:"standby"}]}},computed:{...C(["episodeMetadataDescriptors"])},methods:{runConfirmation(){this.$emit("confirm",this.form)},isEditing(){return this.episodeToEdit&&this.episodeToEdit.id},resetForm(){this.episodeSuccessText="",this.isEditing()?this.form={id:this.episodeToEdit.id,name:this.episodeToEdit.name,status:this.episodeToEdit.status,description:this.episodeToEdit.description,data:{...this.episodeToEdit.data,resolution:this.episodeToEdit.data.resolution||""}}:(this.form.id=null,this.form.name="",this.form.status="running",this.form.description="",this.form.data={})}},mounted(){this.resetForm()},watch:{active(){this.active&&this.resetForm()},episodeToEdit(){this.resetForm()}}},N={class:"modal-content"},j={class:"box"},I={key:0,class:"title"},q={key:1,class:"title"};function z(t,e,s,G,i,d){const f=n("text-field"),E=n("combobox-styled"),h=n("textarea-field"),T=n("metadata-field"),b=n("modal-footer"),v=g("focus");return a(),r("div",{class:S({modal:!0,"is-active":s.active})},[m("div",{class:"modal-background",onClick:e[0]||(e[0]=o=>t.$emit("cancel"))}),m("div",N,[m("div",j,[s.episodeToEdit&&s.episodeToEdit.id?(a(),r("h1",I,u(t.$t("episodes.edit_title"))+" "+u(s.episodeToEdit.name),1)):(a(),r("h1",q,u(t.$t("episodes.new_episode")),1)),m("form",{onSubmit:e[5]||(e[5]=p(()=>{},["prevent"]))},[F(l(f,{ref:"nameField",label:t.$t("episodes.fields.name"),modelValue:i.form.name,"onUpdate:modelValue":e[1]||(e[1]=o=>i.form.name=o),modelModifiers:{trim:!0},onEnter:d.runConfirmation},null,8,["label","modelValue","onEnter"]),[[v]]),l(E,{class:"field",label:t.$t("main.status"),options:i.episodeStatusOptions,modelValue:i.form.status,"onUpdate:modelValue":e[2]||(e[2]=o=>i.form.status=o)},null,8,["label","options","modelValue"]),l(f,{ref:"resolutionField",label:t.$t("shots.fields.resolution"),modelValue:i.form.data.resolution,"onUpdate:modelValue":e[3]||(e[3]=o=>i.form.data.resolution=o),onEnter:d.runConfirmation},null,8,["label","modelValue","onEnter"]),l(h,{ref:"descriptionField",label:t.$t("episodes.fields.description"),onKeyup:[c(p(d.runConfirmation,["ctrl"]),["enter"]),c(p(d.runConfirmation,["meta"]),["enter"])],modelValue:i.form.description,"onUpdate:modelValue":e[4]||(e[4]=o=>i.form.description=o)},null,8,["label","onKeyup","modelValue"]),s.episodeToEdit?(a(!0),r(M,{key:0},k(t.episodeMetadataDescriptors,o=>(a(),x(T,{key:o.id,descriptor:o,entity:s.episodeToEdit,onEnter:d.runConfirmation,modelValue:i.form.data[o.field_name],"onUpdate:modelValue":y=>i.form.data[o.field_name]=y},null,8,["descriptor","entity","onEnter","modelValue","onUpdate:modelValue"]))),128)):B("",!0)],32),l(b,{"error-text":t.$t("episodes.edit_error"),"is-loading":s.isLoading,"is-error":s.isError,onConfirm:d.runConfirmation,onCancel:e[6]||(e[6]=o=>t.$emit("cancel"))},null,8,["error-text","is-loading","is-error","onConfirm"])])])],2)}const W=V(L,[["render",z],["__scopeId","data-v-c1393b49"]]);export{W as E};
//# sourceMappingURL=EditEpisodeModal-DgXHAAlm.js.map
