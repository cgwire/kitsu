import{_ as v,M as E,a as C,p as g,b as x,r,q as V,o as i,c as m,d as l,t as d,I as B,k as M,f as p,g as f,h as y,F as w,e as F,n as N}from"./index-C2m_IhNF.js";import{C as U}from"./Combobox-DQpIQydI.js";import{C as O}from"./ComboboxBoolean-DJwCfClJ.js";import{M as S}from"./ModalFooter-BJ98b-60.js";import{T as A}from"./TaskTypeName-bEgQZfX7.js";import{T as D}from"./TextareaField-Bd7jnoYr.js";import{T as L}from"./TextField-p_HJuEKt.js";const j={name:"edit-asset-type-modal",mixins:[E],components:{Combobox:U,ComboboxBoolean:O,ModalFooter:S,TaskTypeName:A,TextareaField:D,TextField:L},props:{active:{type:Boolean,default:!1},isError:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},assetTypeToEdit:{type:Object,default:()=>{}}},emits:["cancel","confirm"],data(){return{form:{name:"",short_name:"",description:"",task_types:[]}}},computed:{...x(["taskTypes","taskTypeMap","assetTypes","assetTypeStatusOptions"]),isEditing(){return this.assetTypeToEdit&&this.assetTypeToEdit.id},availableTaskTypes(){const t=g(this.taskTypes.filter(e=>this.form.task_types.indexOf(e.id)===-1&&e.for_entity==="Asset"));return[{name:"+ Task Type",id:"-"},...t].map(e=>({label:e.name,value:e.id}))}},methods:{...C(["loadTaskTypes"]),removeTaskType(t){const e=this.form.task_types.indexOf(t);e>=0&&this.form.task_types.splice(e,1)},runConfirmation(){this.$emit("confirm",this.form)}},watch:{active(){this.active&&setTimeout(()=>{this.$refs.nameField.focus()},100)},assetTypeToEdit(){if(this.assetTypeToEdit.id){const t=this.assetTypeToEdit.task_types||[];this.form={name:this.assetTypeToEdit.name,short_name:this.assetTypeToEdit.short_name,description:this.assetTypeToEdit.description,task_types:[...t],archived:String(this.assetTypeToEdit.archived===!0)}}else this.form={name:"",short_name:"",description:"",task_types:[],archived:"false"}}}},q={class:"modal-content"},z={class:"box"},G={key:0,class:"title"},H={key:1,class:"title"},I={class:"label"},J={class:"flexrow task-types mb1"},K=["onClick"];function P(t,e,n,Q,o,a){const c=r("text-field"),u=r("textarea-field"),T=r("combobox-boolean"),_=r("task-type-name"),k=r("combobox"),b=r("modal-footer"),h=V("focus");return i(),m("div",{class:N({modal:!0,"is-active":n.active})},[l("div",{class:"modal-background",onClick:e[0]||(e[0]=s=>t.$emit("cancel"))}),l("div",q,[l("div",z,[n.assetTypeToEdit&&n.assetTypeToEdit.id?(i(),m("h1",G,d(t.$t("asset_types.edit_title"))+" "+d(n.assetTypeToEdit.name),1)):(i(),m("h1",H,d(t.$t("asset_types.new_asset_type")),1)),l("form",{onSubmit:e[6]||(e[6]=B(()=>{},["prevent"]))},[M(p(c,{ref:"nameField",label:t.$t("asset_types.fields.name"),maxlength:30,modelValue:o.form.name,"onUpdate:modelValue":e[1]||(e[1]=s=>o.form.name=s),onEnter:a.runConfirmation},null,8,["label","modelValue","onEnter"]),[[h]]),p(c,{ref:"shortNameField",label:t.$t("asset_types.fields.short_name"),maxlength:30,modelValue:o.form.short_name,"onUpdate:modelValue":e[2]||(e[2]=s=>o.form.short_name=s),onEnter:a.runConfirmation},null,8,["label","modelValue","onEnter"]),p(u,{label:t.$t("asset_types.fields.description"),modelValue:o.form.description,"onUpdate:modelValue":e[3]||(e[3]=s=>o.form.description=s),onEnter:a.runConfirmation},null,8,["label","modelValue","onEnter"]),a.isEditing?(i(),f(T,{key:0,label:t.$t("main.archived"),onEnter:a.runConfirmation,modelValue:o.form.archived,"onUpdate:modelValue":e[4]||(e[4]=s=>o.form.archived=s)},null,8,["label","onEnter","modelValue"])):y("",!0),l("label",I,d(t.$t("asset_types.fields.task_types")),1),l("div",J,[(i(!0),m(w,null,F(o.form.task_types,s=>(i(),m("div",{class:"flexrow-item mb1",key:s,onClick:R=>a.removeTaskType(s)},[s?(i(),f(_,{key:0,"task-type":t.taskTypeMap.get(s),deletable:!0},null,8,["task-type"])):y("",!0)],8,K))),128)),a.availableTaskTypes.length>1?(i(),f(k,{key:0,class:"flexrow-item mb1",options:a.availableTaskTypes,"with-margin":!1,"onUpdate:modelValue":e[5]||(e[5]=s=>{t.taskTypeMap.get(s)&&o.form.task_types.push(s)})},null,8,["options"])):y("",!0)])],32),p(b,{"error-text":t.$t("asset_types.create_error"),"is-error":n.isError,"is-loading":n.isLoading,onConfirm:a.runConfirmation,onCancel:e[7]||(e[7]=s=>t.$emit("cancel"))},null,8,["error-text","is-error","is-loading","onConfirm"])])])],2)}const se=v(j,[["render",P],["__scopeId","data-v-938bca69"]]);export{se as E};
//# sourceMappingURL=EditAssetTypeModal-BwrW-ate.js.map
