import{_ as v,a as C,bq as V,ac as b,ad as y,br as F,ah as k,r as a,j as _,c as d,o as s,e as r,f as l,t as u,ai as m,l as g,d as M,bs as f,F as B,g as S,k as w,n as D}from"./index-B8wdsQpQ.js";const U={name:"edit-sequence-modal",mixins:[k],components:{MetadataField:F,ModalFooter:y,TextField:b,TextareaField:V},props:{active:{type:Boolean,default:!1},isError:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},sequenceToEdit:{type:Object,default:()=>{}}},emits:["cancel","confirm"],data(){return this.sequenceToEdit&&this.sequenceToEdit.id?{form:{id:this.sequenceToEdit.id,name:this.sequenceToEdit.name,description:this.sequenceToEdit.description,production_id:this.sequenceToEdit.project_id,data:{...this.sequenceToEdit.data,resolution:this.sequenceToEdit.data.resolution||""}},sequenceSuccessText:""}:{form:{id:"",name:"",description:"",data:{resolution:""}},sequenceSuccessText:""}},computed:{...C(["sequenceMetadataDescriptors"])},methods:{runConfirmation(){this.confirmClicked()},confirmClicked(){this.$emit("confirm",this.form)},isEditing(){return this.sequenceToEdit&&this.sequenceToEdit.id},resetForm(){this.sequenceSuccessText="",this.isEditing()?this.form={id:this.sequenceToEdit.id,name:this.sequenceToEdit.name,description:this.sequenceToEdit.description,data:{...this.sequenceToEdit.data,resolution:this.sequenceToEdit.data.resolution||""}}:(this.form.id=null,this.form.name="",this.form.description="",this.form.data={resolution:""})}},mounted(){this.active&&this.resetForm()},watch:{active(){this.resetForm()},sequenceToEdit(){this.resetForm()}}},j={class:"modal-content"},K={class:"box"},L={key:0,class:"title"},N={key:1,class:"title"};function z(e,t,o,G,I,n){const c=a("text-field"),q=a("textarea-field"),E=a("metadata-field"),h=a("modal-footer"),T=_("focus");return s(),d("div",{class:D({modal:!0,"is-active":o.active})},[r("div",{class:"modal-background",onClick:t[0]||(t[0]=i=>e.$emit("cancel"))}),r("div",j,[r("div",K,[o.sequenceToEdit&&o.sequenceToEdit.id?(s(),d("h1",L,u(e.$t("sequences.edit_title"))+" "+u(o.sequenceToEdit.name),1)):(s(),d("h1",N,u(e.$t("sequences.new_sequence")),1)),r("form",{onSubmit:t[4]||(t[4]=m(()=>{},["prevent"]))},[g(l(c,{ref:"nameField",label:e.$t("sequences.fields.name"),modelValue:e.form.name,"onUpdate:modelValue":t[1]||(t[1]=i=>e.form.name=i),modelModifiers:{trim:!0},onEnter:n.runConfirmation},null,8,["label","modelValue","onEnter"]),[[T]]),l(c,{ref:"resolutionField",label:e.$t("shots.fields.resolution"),modelValue:e.form.data.resolution,"onUpdate:modelValue":t[2]||(t[2]=i=>e.form.data.resolution=i),onEnter:n.runConfirmation},null,8,["label","modelValue","onEnter"]),l(q,{ref:"descriptionField",label:e.$t("sequences.fields.description"),onKeyup:[f(m(n.runConfirmation,["ctrl"]),["enter"]),f(m(n.runConfirmation,["meta"]),["enter"])],modelValue:e.form.description,"onUpdate:modelValue":t[3]||(t[3]=i=>e.form.description=i)},null,8,["label","onKeyup","modelValue"]),o.sequenceToEdit?(s(!0),d(B,{key:0},S(e.sequenceMetadataDescriptors,i=>(s(),w(E,{key:i.id,descriptor:i,entity:o.sequenceToEdit,onEnter:n.runConfirmation,modelValue:e.form.data[i.field_name],"onUpdate:modelValue":p=>e.form.data[i.field_name]=p},null,8,["descriptor","entity","onEnter","modelValue","onUpdate:modelValue"]))),128)):M("",!0)],32),l(h,{"error-text":e.$t("sequences.edit_error"),"is-loading":o.isLoading,"is-error":o.isError,onConfirm:n.runConfirmation,onCancel:t[5]||(t[5]=i=>e.$emit("cancel"))},null,8,["error-text","is-loading","is-error","onConfirm"])])])],2)}const $=v(U,[["render",z],["__scopeId","data-v-e606bca7"]]);export{$ as E};
//# sourceMappingURL=EditSequenceModal-BPTwOO3j.js.map
