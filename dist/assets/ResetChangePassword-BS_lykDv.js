import{_ as g,m as C,cU as v,r as u,j as k,c as l,o as c,e as s,l as a,t as n,b6 as _,bu as w,f as h,d as L,n as y,a2 as d,w as S,cY as E}from"./index-BsDo8rDw.js";const P={name:"reset-change-password",components:{LockIcon:v},data(){return{password:"",password2:"",isLoading:!1,isError:!1,isFormError:!1,isSuccess:!1,secondsLeft:5}},mounted(){this.$store.commit("LOGIN_SUCCESS"),this.isLoading=!1,this.isError=!1,this.secondsLeft=5},computed:{isNew(){return this.$route.query.type==="new"}},methods:{...C(["resetChangePassword"]),confirmResetChangePassword(){this.isFormError=!1,this.isError=!1,E.isPasswordValid(this.password,this.password2)?(this.isLoading=!0,this.isSuccess=!1,this.resetChangePassword({email:this.$route.query.email,token:this.$route.query.token,password:this.password,password2:this.password2}).then(()=>{this.isLoading=!1,this.isSuccess=!0;const e=setInterval(()=>{this.secondsLeft--,this.secondsLeft===0&&(this.$router.push({name:"login"}),clearInterval(e))},1e3)}).catch(()=>{this.isLoading=!1,this.isError=!0,this.isSuccess=!1})):this.isFormError=!0}},head(){return{title:this.$t("login.reset_change_password_title")}}},R={class:"hero is-fullheight"},N={class:"container has-text-centered"},b={class:"box has-text-left"},V={class:"has-text-centered"},I={class:"title"},F={class:"field mt2"},U={class:"control has-icon"},q=["placeholder"],z={class:"icon"},B={class:"control has-icon"},D=["placeholder"],K={class:"icon"},$={class:"control"},j={class:"has-text-centered"},A={key:0},G={key:1};function M(e,t,O,T,o,i){const p=u("lock-icon"),m=u("router-link"),f=k("focus");return c(),l("div",R,[s("div",N,[s("div",b,[s("div",V,[s("h1",I,n(i.isNew?e.$t("login.set_password_title"):e.$t("login.reset_change_password_title")),1)]),s("div",F,[s("p",U,[a(s("input",{class:"input is-medium email",type:"password",autocomplete:"new-password",placeholder:e.$t("login.fields.password"),onKeyup:t[0]||(t[0]=w((...r)=>i.confirmResetChangePassword&&i.confirmResetChangePassword(...r),["enter"])),"onUpdate:modelValue":t[1]||(t[1]=r=>o.password=r)},null,40,q),[[_,o.password],[f]]),s("span",z,[h(p,{size:20})])]),s("p",B,[a(s("input",{class:"input is-medium email",type:"password",autocomplete:"new-password",placeholder:e.$t("login.fields.password2"),onKeyup:t[2]||(t[2]=w((...r)=>i.confirmResetChangePassword&&i.confirmResetChangePassword(...r),["enter"])),"onUpdate:modelValue":t[3]||(t[3]=r=>o.password2=r)},null,40,D),[[_,o.password2]]),s("span",K,[h(p,{size:20})])])]),s("p",$,[o.isSuccess?L("",!0):(c(),l("a",{key:0,class:y({"main-button":!0,"is-fullwidth":!0,"is-loading":o.isLoading}),onClick:t[4]||(t[4]=(...r)=>i.confirmResetChangePassword&&i.confirmResetChangePassword(...r))},n(i.isNew?e.$t("login.set_password"):e.$t("login.reset_change_password")),3))]),a(s("p",{class:"error"},n(e.$t("login.reset_change_password_form_failed")),513),[[d,o.isFormError]]),a(s("p",{class:"error"},n(e.$t("login.reset_change_password_failed")),513),[[d,o.isError]]),a(s("p",{class:"success"},n(e.$t("login.reset_change_password_succeed")),513),[[d,o.isSuccess]]),a(s("p",{class:"has-text-centered mt2 mb2"},n(e.$t("login.redirecting",{secondsLeft:o.secondsLeft})),513),[[d,o.isSuccess]]),s("p",j,[h(m,{to:{name:"login"}},{default:S(()=>[o.isSuccess?(c(),l("span",A,n(e.$t("login.back_to_login")),1)):(c(),l("span",G,n(e.$t("login.login_page")),1))]),_:1})])])])])}const H=g(P,[["render",M],["__scopeId","data-v-66e7e2d1"]]);export{H as default};
//# sourceMappingURL=ResetChangePassword-BS_lykDv.js.map
