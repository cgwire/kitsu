{"version":3,"file":"EntityPreview-DQBzHKkN.js","sources":["../../src/components/widgets/EntityPreview.vue"],"sourcesContent":["<template>\n  <div class=\"preview-wrapper preview-video\" v-if=\"isMovie && showMovie\">\n    <video-viewer\n      ref=\"video-viewer\"\n      :is-repeating=\"true\"\n      :default-height=\"height\"\n      :preview=\"{\n        id: entity.preview_file_id,\n        extension: entity.preview_file_extension\n      }\"\n      :is-rounded-top-border=\"isRoundedTopBorder\"\n      @click=\"onVideoClicked()\"\n    />\n    <button-simple\n      class=\"button-play\"\n      icon=\"play\"\n      ref=\"button-play\"\n      :title=\"$t('playlists.actions.play')\"\n      @click=\"onVideoClicked()\"\n    />\n  </div>\n  <div\n    class=\"preview-wrapper preview-picture\"\n    :class=\"{ cover }\"\n    :style=\"{\n      width: emptyWidth ? `${emptyWidth}px` : undefined,\n      'min-width': emptyWidth ? `${emptyWidth}px` : undefined,\n      height: emptyHeight ? `${emptyHeight}px` : undefined,\n      'border-top-left-radius': isRoundedTopBorder ? '10px' : undefined,\n      'border-top-right-radius': isRoundedTopBorder ? '10px' : undefined,\n      'background-image': cover ? `url(${thumbnailPath})` : undefined\n    }\"\n    v-else\n  >\n    <template v-if=\"!cover\">\n      <img\n        class=\"thumbnail-picture\"\n        loading=\"lazy\"\n        :key=\"thumbnailKey\"\n        :src=\"thumbnailPath\"\n        :style=\"{\n          width: 'auto',\n          'max-height': `${emptyHeight}px`\n        }\"\n        :width=\"width || ''\"\n        alt=\"\"\n      />\n      <a class=\"view-icon\" @click.stop=\"onPictureClicked()\">\n        <eye-icon :size=\"18\" />\n      </a>\n    </template>\n  </div>\n</template>\n\n<script>\nimport { EyeIcon } from 'lucide-vue-next'\n\nimport ButtonSimple from '@/components/widgets/ButtonSimple.vue'\nimport VideoViewer from '@/components/previews/VideoViewer.vue'\n\nexport default {\n  name: 'entity-preview',\n\n  components: {\n    ButtonSimple,\n    EyeIcon,\n    VideoViewer\n  },\n\n  data() {\n    return {\n      isPlaying: false\n    }\n  },\n\n  props: {\n    entity: {\n      default: () => {},\n      type: Object\n    },\n    cover: {\n      default: false,\n      type: Boolean\n    },\n    width: {\n      default: null,\n      type: Number\n    },\n    height: {\n      default: null,\n      type: Number\n    },\n    emptyHeight: {\n      default: null,\n      type: Number\n    },\n    emptyWidth: {\n      default: null,\n      type: Number\n    },\n    previewFileId: {\n      default: null,\n      type: String\n    },\n    isRoundedTopBorder: {\n      default: false,\n      type: Boolean\n    },\n    showMovie: {\n      default: true,\n      type: Boolean\n    }\n  },\n\n  computed: {\n    isMovie() {\n      return this.entity.preview_file_extension === 'mp4'\n    },\n\n    thumbnailPath() {\n      const previewFileId = this.previewFileId || this.entity.preview_file_id\n      return `/api/pictures/previews/preview-files/${previewFileId}.png`\n    },\n\n    thumbnailKey() {\n      const previewFileId = this.previewFileId || this.entity.preview_file_id\n      return `preview-${previewFileId}`\n    }\n  },\n\n  methods: {\n    onPictureClicked() {\n      if (this.noPreview) return\n      const previewFileId = this.previewFileId || this.entity.preview_file_id\n      if (previewFileId) {\n        this.$store.commit('SHOW_PREVIEW_FILE', previewFileId)\n      }\n    },\n    onVideoClicked() {\n      if (this.isPlaying) {\n        this.$refs['video-viewer'].pause()\n        this.$refs['button-play'].$el.style.display = 'initial'\n      } else {\n        this.$refs['video-viewer'].play()\n        this.$refs['button-play'].$el.style.display = 'none'\n      }\n      this.isPlaying = !this.isPlaying\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.preview-video {\n  position: relative;\n  width: 300px;\n  min-height: 200px;\n  cursor: pointer;\n}\n\n.button-play {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  height: 40px;\n  width: 40px;\n  padding-left: 13px;\n  line-height: initial;\n  opacity: 0.75;\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);\n}\n\n.preview-picture {\n  position: relative;\n  background: $black;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  overflow: auto;\n\n  .thumbnail-picture {\n    display: block;\n    border: 0;\n    border-radius: 0;\n  }\n\n  .view-icon {\n    background: rgba(0, 0, 0, 0.5);\n    border-radius: 5px;\n    color: $light-grey-light;\n    display: none;\n    padding: 0.4rem;\n    height: 30px;\n    position: absolute;\n    right: 10px;\n    top: 10px;\n    width: 30px;\n    transition: all 0.2s ease-in-out;\n\n    &:hover {\n      background: rgba(0, 0, 0, 0.75);\n      color: $white;\n    }\n  }\n\n  &:hover .view-icon {\n    display: block;\n  }\n}\n\n.cover {\n  background-size: cover;\n}\n</style>\n"],"names":["_sfc_main","ButtonSimple","EyeIcon","VideoViewer","previewFileId","_hoisted_2","$options","$props","_openBlock","_createElementBlock","_hoisted_1","_createVNode","_component_video_viewer","_component_button_simple","_ctx","_normalizeClass","_normalizeStyle","_createCommentVNode","_Fragment","_createElementVNode","_cache","_withModifiers","_component_eye_icon"],"mappings":"oMA4DA,MAAKA,EAAU,CACb,KAAM,iBAEN,WAAY,CACV,aAAAC,EACA,QAAAC,EACA,YAAAC,GAGF,MAAO,CACL,MAAO,CACL,UAAW,EACb,CACF,EAEA,MAAO,CACL,OAAQ,CACN,QAAS,IAAM,CAAC,EAChB,KAAM,QAER,MAAO,CACL,QAAS,GACT,KAAM,SAER,MAAO,CACL,QAAS,KACT,KAAM,QAER,OAAQ,CACN,QAAS,KACT,KAAM,QAER,YAAa,CACX,QAAS,KACT,KAAM,QAER,WAAY,CACV,QAAS,KACT,KAAM,QAER,cAAe,CACb,QAAS,KACT,KAAM,QAER,mBAAoB,CAClB,QAAS,GACT,KAAM,SAER,UAAW,CACT,QAAS,GACT,KAAM,OACR,GAGF,SAAU,CACR,SAAU,CACR,OAAO,KAAK,OAAO,yBAA2B,KAChD,EAEA,eAAgB,CAEd,MAAO,wCADe,KAAK,eAAiB,KAAK,OAAO,eACI,MAC9D,EAEA,cAAe,CAEb,MAAO,WADe,KAAK,eAAiB,KAAK,OAAO,eACzB,EACjC,GAGF,QAAS,CACP,kBAAmB,CACjB,GAAI,KAAK,UAAW,OACpB,MAAMC,EAAgB,KAAK,eAAiB,KAAK,OAAO,gBACpDA,GACF,KAAK,OAAO,OAAO,oBAAqBA,CAAa,CAEzD,EACA,gBAAiB,CACX,KAAK,WACP,KAAK,MAAM,cAAc,EAAE,MAAK,EAChC,KAAK,MAAM,aAAa,EAAE,IAAI,MAAM,QAAU,YAE9C,KAAK,MAAM,cAAc,EAAE,KAAI,EAC/B,KAAK,MAAM,aAAa,EAAE,IAAI,MAAM,QAAU,QAEhD,KAAK,UAAY,CAAC,KAAK,SACzB,CACF,CACF,KArJA,IAAA,EACO,MAAM,iCADbC,EAAA,CAAA,MAAA,OAAA,yFACmD,OAAAC,EAAA,SAAWC,EAAA,WAA5DC,IAAAC,EAmBM,MAnBNC,EAmBM,CAlBJC,EAUEC,EAAA,CATA,IAAI,eACH,eAAc,GACd,iBAAgBL,EAAA,OAChB,QAAO,CAAgB,GAAAA,EAAA,OAAO,gBAAoC,UAAAA,EAAA,OAAO,wBAIzE,wBAAuBA,EAAA,mBACvB,uBAAOD,EAAA,gFAEVK,EAMEE,EAAA,CALA,MAAM,cACN,KAAK,OACL,IAAI,cACH,MAAOC,EAAA,GAAE,wBAAA,EACT,uBAAOR,EAAA,6CAGZG,EA8BM,MAAA,CAnDR,IAAA,EAsBI,MAtBJM,EAAA,CAsBU,kCAAiC,CAAA,MAC7BR,EAAA,KAAK,CAAA,CAAA,EACd,MAxBLS,EAAA,OAwB2BT,EAAA,WAAU,GAAMA,EAAA,UAAU,KAAO,mBAA8BA,EAAA,WAAU,GAAMA,EAAA,UAAU,KAAO,cAAyBA,EAAA,YAAW,GAAMA,EAAA,WAAW,KAAO,OAA2C,yBAAAA,EAAA,0BAA8B,OAA4C,0BAAAA,EAAA,0BAA8B,0BAAqCA,EAAA,MAAK,OAAUD,EAAA,aAAa,IAAM,WAU5XC,EAAA,MAlCrBU,EAAA,GAAA,EAAA,GAkCIT,EAAA,EAAAC,EAgBWS,GAlDf,IAAA,CAAA,EAAA,MAmCMT,EAWE,MAAA,CAVA,MAAM,oBACN,QAAQ,OACP,IAAKH,EAAA,aACL,IAAKA,EAAA,cACL,MAxCTU,EAAA,8BAwCsET,EAAA,WAAW,OAIxE,MAAOA,EAAA,OAAK,GACb,IAAI,EA7CZ,EAAA,KAAA,GAAAF,CAAA,GA+CMc,EAEI,IAAA,CAFD,MAAM,YAAa,QAAKC,EAAA,CAAA,IAAAA,EAAA,CAAA,EA/CjCC,KA+CwCf,EAAA,iBAAgB,EAAA,CAAA,MAAA,CAAA,KAChDK,EAAuBW,EAAA,CAAZ,KAAM,EAAE,CAAA"}