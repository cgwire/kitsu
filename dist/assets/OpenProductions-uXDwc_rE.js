import{_ as v,aB as k,S as w,r as p,q as $,o as i,c as o,d as t,t as n,f as m,H as u,h as c,aC as S,k as U,F as f,e as L,w as A,i as N,n as V,x as g,ao as q,b as D,aD as I}from"./index-C2m_IhNF.js";import{S as B}from"./SearchField-DO27Jrsj.js";const O="/assets/kitsu-band-GPh0Wqw-.png",z="/assets/empty_edit-CyxBzV9u.png",G={name:"open-productions",components:{SearchField:B,Spinner:w,XIcon:k},data(){return{isContributions:!1,filteredProductions:[]}},mounted(){this.filteredProductions=this.openProductions,this.productionIndex=I(this.openProductions),this.isContributions=this.mainConfig.is_self_hosted&&g.getPreference("open-productions:contributions")!=="false"},computed:{...D(["isCurrentUserAdmin","isCurrentUserManager","isCurrentUserClient","isOpenProductionsLoading","lastProductionScreen","mainConfig","openProductions"])},methods:{generateAvatar(e){return(e.name?.[0]||"P").toUpperCase()},getAvatarColor(e){return q.fromString(e.name)},getPath(e){return this.sectionPath(e,this.lastProductionScreen)},sectionPath(e,s){const d=this.isCurrentUserClient?"playlists":e.homepage||s,l={name:d,params:{production_id:e.id},query:{}};return e.production_type==="tvshow"?(d!=="episodes"&&(l.name=`episode-${d}`),!["edits","episodes"].includes(d)&&e.first_episode_id?l.params.episode_id=e.first_episode_id:l.params.episode_id="all"):e.production_type==="shots"&&d==="assets"?l.name="shots":e.production_type==="assets"&&["shots","sequences"].includes(d)&&(l.name="assets"),["assets","shots","edits","sequences","episodes"].includes(d)&&(l.query.search=""),l},getThumbnailPath(e){const s=e.updated_at||e.created_at,d=Date.parse(s);return`/api/pictures/thumbnails/projects/${e.id}.png?t=${d}`},newProductionPage(){this.$router.push({name:"new-production"})},onSearchChange(e){e===""?this.filteredProductions=this.openProductions:this.filteredProductions=this.productionIndex[e]},hideContributions(){this.isContributions=!1,g.setPreference("open-productions:contributions",!1)}},watch:{openProductions(){if(this.openProductions.length>6){const e=this.$refs["search-field"]?.getValue()||"";this.onSearchChange(e)}else this.filteredProductions=this.openProductions}},head(){return{title:`${this.$t("productions.home.title")} - Kitsu`}}},E={class:"open-productions page"},F={key:0,class:"social-contributions"},T={class:"subtitle has-text-centered"},X={class:"flexrow"},H={class:"filler"},K={key:1,class:"has-text-centered"},M={key:2,class:"flexrow open-productions-header"},W={class:"title filler"},j={key:3,class:"open-productions-box"},x={key:0,class:"flexrow search-area"},Q={key:0,class:"open-production has-text-centered"},J=["src"],R={class:"production-name"},Y={key:4,class:"has-text-centered welcome"},Z={key:0},ee={class:"has-text-centered info"},te={class:"has-text-centered mt1"},se={key:1},ne={class:"has-text-centered"},ie={key:2},oe={class:"has-text-centered"};function re(e,s,d,l,h,a){const P=p("x-icon"),_=p("spinner"),C=p("search-field"),y=p("router-link"),b=$("focus");return i(),o("div",E,[h.isContributions?(i(),o("div",F,[t("h1",T,n(e.$t("intro.title")),1),t("div",X,[s[10]||(s[10]=t("img",{class:"flexrow-item kitsu-with-body",src:O},null,-1)),t("div",H,[t("span",{class:"close-contributions",onClick:s[0]||(s[0]=(...r)=>a.hideContributions&&a.hideContributions(...r))},[m(P,{size:14})]),t("p",null,n(e.$t("intro.main")),1),t("ul",null,[t("li",null,[u(n(e.$t("intro.first"))+" ",1),s[3]||(s[3]=t("a",{href:"https://github.com/cgwire/kitsu"},"GitHub",-1))]),t("li",null,[u(n(e.$t("intro.second"))+" ",1),s[4]||(s[4]=t("a",{href:"https://x.com/cgwirekitsu"},"X",-1)),u(" "+n(e.$t("main.or"))+" ",1),s[5]||(s[5]=t("a",{href:"https://www.linkedin.com/company/cgwire/"},"LinkedIn",-1))]),t("li",null,[u(n(e.$t("intro.third"))+" ",1),s[6]||(s[6]=t("a",{href:"https://discord.gg/VbCxtKN"},"Discord",-1))]),t("li",null,[u(n(e.$t("intro.four"))+" ",1),s[7]||(s[7]=t("a",{href:"https://cgwire.canny.io"},"Canny",-1))]),t("li",null,[u(n(e.$t("intro.five"))+" ",1),s[8]||(s[8]=t("a",{href:"https://liberapay.com/CGWire/donate"},"Liberapay",-1))]),t("li",null,[u(n(e.$t("intro.six"))+" ",1),s[9]||(s[9]=t("a",{href:"https://cg-wire.com/pricing"},"offers",-1))]),t("li",null,n(e.$t("intro.seven")),1)]),t("p",null,n(e.$t("intro.eight")),1)])])])):c("",!0),e.isOpenProductionsLoading?(i(),o("div",K,[m(_)])):c("",!0),!e.isOpenProductionsLoading&&e.openProductions.length>0?(i(),o("div",M,[s[11]||(s[11]=t("img",{class:"logo",src:S,width:"23"},null,-1)),t("h1",W,n(e.$t("productions.home.title")),1),e.isCurrentUserAdmin?(i(),o("button",{key:0,class:"button",onClick:s[1]||(s[1]=(...r)=>a.newProductionPage&&a.newProductionPage(...r))},n(e.$t("productions.home.create_new")),1)):c("",!0)])):c("",!0),!e.isOpenProductionsLoading&&e.openProductions.length>0?(i(),o("div",j,[e.openProductions.length>6?(i(),o("div",x,[U(m(C,{ref:"search-field",class:"search-field ml1",onChange:a.onSearchChange},null,8,["onChange"]),[[b]])])):c("",!0),t("div",{class:V({"open-productions-list":!0,"is-grid":e.openProductions?.length>4})},[h.filteredProductions?.length?c("",!0):(i(),o("div",Q,n(e.$t("main.search.no_result")),1)),(i(!0),o(f,null,L(h.filteredProductions,r=>(i(),o("div",{class:"open-production has-text-centered",key:r.id},[m(y,{to:a.getPath(r)},{default:A(()=>[t("div",{class:"avatar has-text-centered",style:N({background:a.getAvatarColor(r)})},[r.has_avatar?(i(),o("img",{key:1,src:a.getThumbnailPath(r)},null,8,J)):(i(),o(f,{key:0},[u(n(a.generateAvatar(r)),1)],64))],4),t("div",R,n(r.name),1)]),_:2},1032,["to"])]))),128))],2)])):(i(),o("div",Y,[s[12]||(s[12]=t("p",{class:"kitsu-logo info"},[t("img",{src:z})],-1)),e.isCurrentUserAdmin?(i(),o("div",Z,[t("p",ee,n(e.$t("productions.home.empty")),1),t("p",te,[t("button",{class:"button big-button",onClick:s[2]||(s[2]=(...r)=>a.newProductionPage&&a.newProductionPage(...r))},n(e.$t("productions.home.create_new")),1)])])):e.isCurrentUserClient?(i(),o("div",se,[t("p",ne,n(e.$t("productions.home.no_prod_for_client")),1)])):e.isCurrentUserManager?c("",!0):(i(),o("div",ie,[t("p",oe,n(e.$t("productions.home.no_task")),1)]))]))])}const le=v(G,[["render",re],["__scopeId","data-v-af2a3384"]]);export{le as default};
//# sourceMappingURL=OpenProductions-uXDwc_rE.js.map
