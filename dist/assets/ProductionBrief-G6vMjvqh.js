import{_ as p,B as m,a as h,b as g,r as a,o as t,c as i,d,t as c,f as l,O as _,I as b,h as k}from"./index-Dw-uod2x.js";import{a as x}from"./render-GdzifLjz.js";import{T as y}from"./TextareaField-Cu9GLtzh.js";const B={name:"production-brief",components:{ButtonSimple:m,TextareaField:y},data(){return{brief:"",isEditing:!1,isLoading:!1,errors:{editBrief:!1}}},computed:{...g(["currentProduction","isCurrentUserManager"]),textarea(){return this.$refs.textarea}},mounted(){this.brief=this.currentProduction?.description},methods:{...h(["editProduction"]),openEditing(){this.isCurrentUserManager&&(this.isEditing=!0,this.$nextTick(()=>{this.textarea.focus()}))},async editBrief(){this.isLoading=!0,this.errors.editBrief=!1;try{await this.editProduction({id:this.currentProduction.id,description:this.brief}),this.isEditing=!1}catch{this.errors.editBrief=!0}this.isLoading=!1},renderMarkdown:x}},P={class:"production-brief"},v={key:0},E=["innerHTML"],L={key:1,class:"box has-text-right"},M={key:0,class:"error mt1 has-text-right"};function C(r,o,V,w,e,s){const u=a("textarea-field"),f=a("button-simple");return t(),i("div",P,[e.isEditing?(t(),i("div",L,[l(u,{class:"editor",ref:"textarea","input-class":"textarea",onKeyup:_(b(s.editBrief,["ctrl"]),["enter"]),modelValue:e.brief,"onUpdate:modelValue":o[1]||(o[1]=n=>e.brief=n)},null,8,["onKeyup","modelValue"]),e.errors.editBrief?(t(),i("p",M,c(r.$t("productions.brief.edit_error")),1)):k("",!0),d("p",null,[l(f,{"is-primary":!0,"is-loading":e.isLoading,disabled:e.isLoading,text:r.$t("main.save"),onClick:s.editBrief},null,8,["is-loading","disabled","text","onClick"])])])):(t(),i("div",{key:0,class:"box",onDblclick:o[0]||(o[0]=(...n)=>s.openEditing&&s.openEditing(...n))},[r.currentProduction?.description?(t(),i("div",{key:1,class:"content",innerHTML:s.renderMarkdown(r.currentProduction.description)},null,8,E)):(t(),i("div",v,[d("p",null,c(r.$t("productions.brief.empty")),1)]))],32))])}const U=p(B,[["render",C],["__scopeId","data-v-a60df982"]]);export{U as P};
//# sourceMappingURL=ProductionBrief-G6vMjvqh.js.map
