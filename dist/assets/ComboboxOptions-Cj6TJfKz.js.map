{"version":3,"file":"ComboboxOptions-Cj6TJfKz.js","sources":["../../src/components/widgets/ComboboxOptions.vue"],"sourcesContent":["<template>\n  <div>\n    <div\n      class=\"combo\"\n      :class=\"{\n        open: showList,\n        reversed: isReversed,\n        thin\n      }\"\n      ref=\"select\"\n    >\n      <div class=\"flexrow\" :title=\"title\" @click=\"toggleList()\">\n        <div class=\"selected-line mr05 ellipsis nowrap\">\n          {{ title }}\n        </div>\n        <chevron-down-icon class=\"down-icon flexrow-item\" />\n      </div>\n      <div ref=\"list\" class=\"select-input\" v-if=\"showList\">\n        <div\n          :key=\"option.value\"\n          class=\"option-line flexrow\"\n          @click=\"onUpdateValue(option.value)\"\n          v-for=\"option in optionList\"\n        >\n          <toggle-button\n            :label=\"option.label\"\n            :model-value=\"modelValue[option.value]\"\n          />\n        </div>\n      </div>\n    </div>\n    <div\n      class=\"c-mask\"\n      :class=\"{\n        'is-active': showList\n      }\"\n      @click=\"toggleList()\"\n    ></div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, nextTick } from 'vue'\nimport { ChevronDownIcon } from 'lucide-vue-next'\n\nimport ToggleButton from '@/components/widgets/ToggleButton.vue'\n\nconst emit = defineEmits(['change', 'update:modelValue'])\n\nconst props = defineProps({\n  isReversed: {\n    type: Boolean,\n    default: false\n  },\n  modelValue: {\n    type: Object,\n    default: () => ({})\n  },\n  options: {\n    type: Array,\n    default: () => []\n  },\n  thin: {\n    type: Boolean,\n    default: false\n  },\n  title: {\n    type: String,\n    default: ''\n  }\n})\n\nconst lastScrollPosition = ref(0)\nconst list = ref(null)\nconst showList = ref(false)\nconst select = ref(null)\n\nconst optionList = computed(() => {\n  return props.isReversed ? props.options.slice().reverse() : props.options\n})\n\nfunction toggleList() {\n  if (showList.value) {\n    lastScrollPosition.value = list.value?.scrollTop || 0\n  }\n  showList.value = !showList.value\n  if (showList.value) {\n    nextTick(() => {\n      const top =\n        lastScrollPosition.value ||\n        (props.isReversed && list.value?.scrollHeight) ||\n        0\n      list.value?.scrollTo({ top })\n    })\n  }\n}\n\nfunction onUpdateValue(key) {\n  const value = !props.modelValue[key]\n  emit('update:modelValue', {\n    ...props.modelValue,\n    [key]: value\n  })\n  emit('change', { key, value })\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.dark {\n  .select-input,\n  .selected-line,\n  .option-line,\n  .combo {\n    color: var(--text);\n    background: $dark-grey-light;\n    border-color: $dark-grey;\n  }\n\n  .option-line:hover {\n    background: $dark-purple;\n  }\n}\n\n.combo {\n  background: $white;\n  border: 1px solid $light-grey-light;\n  border-radius: 10px;\n  user-select: none;\n  cursor: pointer;\n  display: inline-block;\n  margin: 0;\n  margin-top: 1px;\n  max-width: 400px;\n  padding: 0.5em;\n  position: relative;\n  vertical-align: middle;\n\n  &.open {\n    border-bottom-left-radius: 0;\n    border-bottom-right-radius: 0;\n  }\n\n  &:hover {\n    border: 1px solid $green;\n  }\n}\n\n.option-line {\n  background: $white;\n  border-bottom: 1px solid $light-grey-light;\n  cursor: pointer;\n  margin: 0;\n  padding: 0.8em;\n  min-width: 250px;\n\n  &:hover {\n    background: $purple;\n  }\n}\n\n.down-icon {\n  width: 15px;\n  min-width: 15px;\n  margin-right: 0.4em;\n  color: $green;\n}\n\n.select-input {\n  background: var(--background);\n  border: 1px solid $light-grey-light;\n  border-bottom-left-radius: 1em;\n  border-bottom-right-radius: 1em;\n  border-top-right-radius: 1em;\n  left: 0;\n  margin-left: -1px;\n  max-height: 240px;\n  overflow-x: hidden;\n  overflow-y: auto;\n  position: absolute;\n  width: inherit;\n  top: 38px;\n  z-index: 2000;\n\n  .option-line {\n    padding-right: 0.4em;\n    white-space: nowrap;\n  }\n}\n\n.c-mask {\n  z-index: 199;\n}\n\n.thin {\n  height: 34px;\n  padding: 4px 0 3px 10px;\n  margin-bottom: 3px;\n\n  .select-input {\n    top: 30px;\n  }\n}\n\n.reversed {\n  &.open {\n    border-top-left-radius: 0;\n    border-top-right-radius: 0;\n    border-bottom-left-radius: 1em;\n    border-bottom-right-radius: 1em;\n  }\n\n  .select-input {\n    border-top-left-radius: 1em;\n    border-top-right-radius: 1em;\n    border-bottom-left-radius: 0;\n    border-bottom-right-radius: 0;\n    height: 180px;\n    top: -180px;\n  }\n}\n</style>\n"],"names":["emit","__emit","props","__props","lastScrollPosition","ref","list","showList","select","optionList","computed","toggleList","nextTick","top","onUpdateValue","key","value"],"mappings":"6gBA+CA,MAAMA,EAAOC,EAEPC,EAAQC,EAuBRC,EAAqBC,EAAI,CAAC,EAC1BC,EAAOD,EAAI,IAAI,EACfE,EAAWF,EAAI,EAAK,EACpBG,EAASH,EAAI,IAAI,EAEjBI,EAAaC,EAAS,IACnBR,EAAM,WAAaA,EAAM,QAAQ,QAAQ,QAAO,EAAKA,EAAM,OACnE,EAED,SAASS,GAAa,CAChBJ,EAAS,QACXH,EAAmB,MAAQE,EAAK,OAAO,WAAa,GAEtDC,EAAS,MAAQ,CAACA,EAAS,MACvBA,EAAS,OACXK,EAAS,IAAM,CACb,MAAMC,EACJT,EAAmB,OAClBF,EAAM,YAAcI,EAAK,OAAO,cACjC,EACFA,EAAK,OAAO,SAAS,CAAE,IAAAO,CAAG,CAAE,CAC9B,CAAC,CAEL,CAEA,SAASC,EAAcC,EAAK,CAC1B,MAAMC,EAAQ,CAACd,EAAM,WAAWa,CAAG,EACnCf,EAAK,oBAAqB,CACxB,GAAGE,EAAM,WACT,CAACa,CAAG,EAAGC,CACX,CAAG,EACDhB,EAAK,SAAU,CAAE,IAAAe,EAAK,MAAAC,CAAK,CAAE,CAC/B"}