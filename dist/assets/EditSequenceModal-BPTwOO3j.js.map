{"version":3,"file":"EditSequenceModal-BPTwOO3j.js","sources":["../../src/components/modals/EditSequenceModal.vue"],"sourcesContent":["<template>\n  <div\n    :class=\"{\n      modal: true,\n      'is-active': active\n    }\"\n  >\n    <div class=\"modal-background\" @click=\"$emit('cancel')\"></div>\n\n    <div class=\"modal-content\">\n      <div class=\"box\">\n        <h1 class=\"title\" v-if=\"sequenceToEdit && sequenceToEdit.id\">\n          {{ $t('sequences.edit_title') }} {{ sequenceToEdit.name }}\n        </h1>\n        <h1 class=\"title\" v-else>\n          {{ $t('sequences.new_sequence') }}\n        </h1>\n\n        <form @submit.prevent>\n          <text-field\n            ref=\"nameField\"\n            :label=\"$t('sequences.fields.name')\"\n            v-model.trim=\"form.name\"\n            @enter=\"runConfirmation\"\n            v-focus\n          />\n          <text-field\n            ref=\"resolutionField\"\n            :label=\"$t('shots.fields.resolution')\"\n            v-model=\"form.data.resolution\"\n            @enter=\"runConfirmation\"\n          />\n          <textarea-field\n            ref=\"descriptionField\"\n            :label=\"$t('sequences.fields.description')\"\n            @keyup.ctrl.enter=\"runConfirmation\"\n            @keyup.meta.enter=\"runConfirmation\"\n            v-model=\"form.description\"\n          />\n          <template v-if=\"sequenceToEdit\">\n            <metadata-field\n              :key=\"descriptor.id\"\n              :descriptor=\"descriptor\"\n              :entity=\"sequenceToEdit\"\n              @enter=\"runConfirmation\"\n              v-model=\"form.data[descriptor.field_name]\"\n              v-for=\"descriptor in sequenceMetadataDescriptors\"\n            />\n          </template>\n        </form>\n\n        <modal-footer\n          :error-text=\"$t('sequences.edit_error')\"\n          :is-loading=\"isLoading\"\n          :is-error=\"isError\"\n          @confirm=\"runConfirmation\"\n          @cancel=\"$emit('cancel')\"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex'\n\nimport { modalMixin } from '@/components/modals/base_modal'\n\nimport MetadataField from '@/components/widgets/MetadataField.vue'\nimport ModalFooter from '@/components/modals/ModalFooter.vue'\nimport TextField from '@/components/widgets/TextField.vue'\nimport TextareaField from '@/components/widgets/TextareaField.vue'\n\nexport default {\n  name: 'edit-sequence-modal',\n\n  mixins: [modalMixin],\n\n  components: {\n    MetadataField,\n    ModalFooter,\n    TextField,\n    TextareaField\n  },\n\n  props: {\n    active: {\n      type: Boolean,\n      default: false\n    },\n    isError: {\n      type: Boolean,\n      default: false\n    },\n    isLoading: {\n      type: Boolean,\n      default: false\n    },\n    sequenceToEdit: {\n      type: Object,\n      default: () => {}\n    }\n  },\n\n  emits: ['cancel', 'confirm'],\n\n  data() {\n    if (this.sequenceToEdit && this.sequenceToEdit.id) {\n      return {\n        form: {\n          id: this.sequenceToEdit.id,\n          name: this.sequenceToEdit.name,\n          description: this.sequenceToEdit.description,\n          production_id: this.sequenceToEdit.project_id,\n          data:\n            {\n              ...this.sequenceToEdit.data,\n              resolution: this.sequenceToEdit.data.resolution || ''\n            } || {}\n        },\n        sequenceSuccessText: ''\n      }\n    } else {\n      return {\n        form: {\n          id: '',\n          name: '',\n          description: '',\n          data: {\n            resolution: ''\n          }\n        },\n        sequenceSuccessText: ''\n      }\n    }\n  },\n\n  computed: {\n    ...mapGetters(['sequenceMetadataDescriptors'])\n  },\n\n  methods: {\n    runConfirmation() {\n      this.confirmClicked()\n    },\n\n    confirmClicked() {\n      this.$emit('confirm', this.form)\n    },\n\n    isEditing() {\n      return this.sequenceToEdit && this.sequenceToEdit.id\n    },\n\n    resetForm() {\n      this.sequenceSuccessText = ''\n      if (!this.isEditing()) {\n        this.form.id = null\n        this.form.name = ''\n        this.form.description = ''\n        this.form.data = {\n          resolution: ''\n        }\n      } else {\n        this.form = {\n          id: this.sequenceToEdit.id,\n          name: this.sequenceToEdit.name,\n          description: this.sequenceToEdit.description,\n          data:\n            {\n              ...this.sequenceToEdit.data,\n              resolution: this.sequenceToEdit.data.resolution || ''\n            } || {}\n        }\n      }\n    }\n  },\n\n  mounted() {\n    if (this.active) {\n      this.resetForm()\n    }\n  },\n\n  watch: {\n    active() {\n      this.resetForm()\n    },\n\n    sequenceToEdit() {\n      this.resetForm()\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.modal-content .box p.text {\n  margin-bottom: 1em;\n}\n.is-danger {\n  color: #ff3860;\n  font-style: italic;\n}\n.info-message {\n  margin-top: 1em;\n}\n</style>\n"],"names":["_sfc_main","modalMixin","MetadataField","ModalFooter","TextField","TextareaField","mapGetters","_hoisted_1","_hoisted_2","_createElementBlock","_normalizeClass","$props","_createElementVNode","_ctx","_hoisted_3","_toDisplayString","_hoisted_4","_cache","_withModifiers","_createVNode","_component_text_field","$event","$options","_component_textarea_field","_withKeys","_openBlock","_Fragment","_renderList","descriptor","_createBlock","_component_metadata_field","_createCommentVNode","_component_modal_footer"],"mappings":"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"}