{"version":3,"file":"EditEpisodeModal-Bh3bRb5z.js","sources":["../../src/components/modals/EditEpisodeModal.vue"],"sourcesContent":["<template>\n  <div\n    :class=\"{\n      modal: true,\n      'is-active': active\n    }\"\n  >\n    <div class=\"modal-background\" @click=\"$emit('cancel')\"></div>\n\n    <div class=\"modal-content\">\n      <div class=\"box\">\n        <h1 class=\"title\" v-if=\"episodeToEdit && this.episodeToEdit.id\">\n          {{ $t('episodes.edit_title') }} {{ episodeToEdit.name }}\n        </h1>\n        <h1 class=\"title\" v-else>\n          {{ $t('episodes.new_episode') }}\n        </h1>\n\n        <form v-on:submit.prevent>\n          <text-field\n            ref=\"nameField\"\n            :label=\"$t('episodes.fields.name')\"\n            v-model=\"form.name\"\n            @enter=\"runConfirmation\"\n            v-focus\n          />\n\n          <combobox-styled\n            class=\"field\"\n            :label=\"$t('main.status')\"\n            :options=\"episodeStatusOptions\"\n            v-model=\"form.status\"\n          />\n\n          <textarea-field\n            ref=\"descriptionField\"\n            :label=\"$t('episodes.fields.description')\"\n            @keyup.ctrl.enter=\"runConfirmation\"\n            @keyup.meta.enter=\"runConfirmation\"\n            v-model=\"form.description\"\n          />\n\n          <metadata-field\n            :key=\"descriptor.id\"\n            :descriptor=\"descriptor\"\n            :entity=\"episodeToEdit\"\n            @enter=\"runConfirmation\"\n            v-model=\"form.data[descriptor.field_name]\"\n            v-for=\"descriptor in episodeMetadataDescriptors\"\n            v-if=\"episodeToEdit\"\n          />\n        </form>\n\n        <modal-footer\n          :error-text=\"$t('episodes.edit_error')\"\n          :is-loading=\"isLoading\"\n          :is-error=\"isError\"\n          @confirm=\"runConfirmation\"\n          @cancel=\"$emit('cancel')\"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapGetters, mapActions } from 'vuex'\nimport { modalMixin } from '@/components/modals/base_modal'\n\nimport ComboboxStyled from '@/components/widgets/ComboboxStyled'\nimport MetadataField from '@/components/widgets/MetadataField'\nimport ModalFooter from '@/components/modals/ModalFooter'\nimport TextField from '@/components/widgets/TextField'\nimport TextareaField from '@/components/widgets/TextareaField'\n\nexport default {\n  name: 'edit-episode-modal',\n  mixins: [modalMixin],\n  components: {\n    ComboboxStyled,\n    MetadataField,\n    ModalFooter,\n    TextField,\n    TextareaField\n  },\n\n  props: {\n    active: {\n      type: Boolean,\n      default: false\n    },\n    isError: {\n      type: Boolean,\n      default: false\n    },\n    isLoading: {\n      type: Boolean,\n      default: false\n    },\n    episodeToEdit: {\n      type: Object,\n      default: () => {}\n    }\n  },\n\n  data() {\n    let form = {\n      id: '',\n      name: '',\n      description: '',\n      fps: '',\n      data: {}\n    }\n    if (this.episodeToEdit && this.episodeToEdit.id) {\n      form = {\n        id: this.episodeToEdit.id,\n        name: this.episodeToEdit.name,\n        description: this.episodeToEdit.description,\n        production_id: this.episodeToEdit.project_id,\n        data: this.episodeToEdit.data || {}\n      }\n    }\n    return {\n      form,\n      episodeSuccessText: '',\n      episodeStatusOptions: [\n        { label: 'canceled', value: 'canceled' },\n        { label: 'complete', value: 'complete' },\n        { label: 'running', value: 'running' },\n        { label: 'standby', value: 'standby' }\n      ]\n    }\n  },\n\n  computed: {\n    ...mapGetters(['episodeMetadataDescriptors'])\n  },\n\n  methods: {\n    ...mapActions([]),\n\n    runConfirmation() {\n      this.$emit('confirm', this.form)\n    },\n\n    isEditing() {\n      return this.episodeToEdit && this.episodeToEdit.id\n    },\n\n    resetForm() {\n      this.episodeSuccessText = ''\n      if (!this.isEditing()) {\n        this.form.id = null\n        this.form.name = ''\n        this.form.status = 'running'\n        this.form.description = ''\n        this.form.data = {}\n      } else {\n        this.form = {\n          id: this.episodeToEdit.id,\n          name: this.episodeToEdit.name,\n          status: this.episodeToEdit.status,\n          description: this.episodeToEdit.description,\n          data: this.episodeToEdit.data || {}\n        }\n      }\n    }\n  },\n\n  mounted() {\n    this.resetForm()\n  },\n\n  watch: {\n    active() {\n      if (this.active) {\n        this.resetForm()\n      }\n    },\n\n    episodeToEdit() {\n      this.resetForm()\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.modal-content .box p.text {\n  margin-bottom: 1em;\n}\n.is-danger {\n  color: #ff3860;\n  font-style: italic;\n}\n\n.info-message {\n  margin-top: 1em;\n}\n</style>\n"],"names":["_sfc_main","modalMixin","ComboboxStyled","MetadataField","ModalFooter","TextField","TextareaField","form","mapGetters","mapActions"],"mappings":"kGA2EA,MAAAA,EAAA,CACA,KAAA,qBACA,OAAA,CAAAC,CAAA,EACA,WAAA,CACA,eAAAC,EACA,cAAAC,EACA,YAAAC,EACA,UAAAC,EACA,cAAAC,CACA,EAEA,MAAA,CACA,OAAA,CACA,KAAA,QACA,QAAA,EACA,EACA,QAAA,CACA,KAAA,QACA,QAAA,EACA,EACA,UAAA,CACA,KAAA,QACA,QAAA,EACA,EACA,cAAA,CACA,KAAA,OACA,QAAA,IAAA,CAAA,CACA,CACA,EAEA,MAAA,CACA,IAAAC,EAAA,CACA,GAAA,GACA,KAAA,GACA,YAAA,GACA,IAAA,GACA,KAAA,CAAA,CACA,EACA,OAAA,KAAA,eAAA,KAAA,cAAA,KACAA,EAAA,CACA,GAAA,KAAA,cAAA,GACA,KAAA,KAAA,cAAA,KACA,YAAA,KAAA,cAAA,YACA,cAAA,KAAA,cAAA,WACA,KAAA,KAAA,cAAA,MAAA,CAAA,CACA,GAEA,CACA,KAAAA,EACA,mBAAA,GACA,qBAAA,CACA,CAAA,MAAA,WAAA,MAAA,UAAA,EACA,CAAA,MAAA,WAAA,MAAA,UAAA,EACA,CAAA,MAAA,UAAA,MAAA,SAAA,EACA,CAAA,MAAA,UAAA,MAAA,SAAA,CACA,CACA,CACA,EAEA,SAAA,CACA,GAAAC,EAAA,CAAA,4BAAA,CAAA,CACA,EAEA,QAAA,CACA,GAAAC,EAAA,CAAA,CAAA,EAEA,iBAAA,CACA,KAAA,MAAA,UAAA,KAAA,IAAA,CACA,EAEA,WAAA,CACA,OAAA,KAAA,eAAA,KAAA,cAAA,EACA,EAEA,WAAA,CACA,KAAA,mBAAA,GACA,KAAA,YAOA,KAAA,KAAA,CACA,GAAA,KAAA,cAAA,GACA,KAAA,KAAA,cAAA,KACA,OAAA,KAAA,cAAA,OACA,YAAA,KAAA,cAAA,YACA,KAAA,KAAA,cAAA,MAAA,CAAA,CACA,GAZA,KAAA,KAAA,GAAA,KACA,KAAA,KAAA,KAAA,GACA,KAAA,KAAA,OAAA,UACA,KAAA,KAAA,YAAA,GACA,KAAA,KAAA,KAAA,CAAA,EAUA,CACA,EAEA,SAAA,CACA,KAAA,UAAA,CACA,EAEA,MAAA,CACA,QAAA,CACA,KAAA,QACA,KAAA,UAAA,CAEA,EAEA,eAAA,CACA,KAAA,UAAA,CACA,CACA,CACA"}