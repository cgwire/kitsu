{"version":3,"file":"Plugin-De4z6THw.js","sources":["../../src/components/pages/Plugin.vue"],"sourcesContent":["<template>\n  <div class=\"plugin-page\">\n    <h1>Plugin</h1>\n    {{ plugin?.name }}\n\n    <iframe\n      class=\"plugin-iframe\"\n      :src=\"pluginUrl\"\n      frameborder=\"0\"\n      allowfullscreen\n      referrerpolicy=\"same-origin\"\n    ></iframe>\n  </div>\n</template>\n\n<script setup>\nimport { useRoute } from 'vue-router'\nimport { useStore } from 'vuex'\nimport { computed } from 'vue'\nimport { useHead } from '@unhead/vue'\n\nconst route = useRoute()\nconst store = useStore()\n\nconst plugins = computed(() => store.getters.studioPlugins || [])\nconst productionId = computed(() => route.params.production_id || '')\nconst episodeId = computed(() =>\n  store.getters.isTVShow && productionId.value\n    ? store.getters.currentEpisode?.id\n    : ''\n)\nconst isDarkTheme = computed(() => store.getters.isDarkTheme)\n\nconst pluginUrl = computed(() => {\n  const baseUrl = `/api/plugins/${route.params.plugin_id}/frontend/`\n  const params = new URLSearchParams()\n\n  if (productionId.value) {\n    params.append('production_id', productionId.value)\n  }\n  if (episodeId.value) {\n    params.append('episode_id', episodeId.value)\n  }\n  if (isDarkTheme.value) {\n    params.append('dark_theme', isDarkTheme.value)\n  }\n\n  return `${baseUrl}?${params.toString()}`\n})\n\nconst plugin = computed(() => {\n  return plugins.value.find(\n    plugin => plugin.plugin_id === route.params.plugin_id\n  )\n})\n\nuseHead({\n  title: computed(() => {\n    if (plugin.value) {\n      return `Kitsu | ${plugin.value.name}`\n    }\n    return 'Kitsu | Plugin'\n  })\n})\n</script>\n\n<style lang=\"scss\" scoped>\n.plugin-page {\n  padding-top: 20px;\n}\n\n.plugin-iframe {\n  background-color: $white;\n  width: 100%;\n  height: calc(100vh - 68px);\n  border: none;\n  padding: 0;\n  margin: 0;\n}\n</style>\n"],"names":["route","useRoute","store","useStore","plugins","computed","productionId","episodeId","isDarkTheme","pluginUrl","baseUrl","params","plugin","useHead"],"mappings":"gLAqBA,MAAMA,EAAQC,EAAQ,EAChBC,EAAQC,EAAQ,EAEhBC,EAAUC,EAAS,IAAMH,EAAM,QAAQ,eAAiB,CAAA,CAAE,EAC1DI,EAAeD,EAAS,IAAML,EAAM,OAAO,eAAiB,EAAE,EAC9DO,EAAYF,EAAS,IACzBH,EAAM,QAAQ,UAAYI,EAAa,MACnCJ,EAAM,QAAQ,gBAAgB,GAC9B,EACN,EACMM,EAAcH,EAAS,IAAMH,EAAM,QAAQ,WAAW,EAEtDO,EAAYJ,EAAS,IAAM,CAC/B,MAAMK,EAAU,gBAAgBV,EAAM,OAAO,SAAS,aAChDW,EAAS,IAAI,gBAEnB,OAAIL,EAAa,OACfK,EAAO,OAAO,gBAAiBL,EAAa,KAAK,EAE/CC,EAAU,OACZI,EAAO,OAAO,aAAcJ,EAAU,KAAK,EAEzCC,EAAY,OACdG,EAAO,OAAO,aAAcH,EAAY,KAAK,EAGxC,GAAGE,CAAO,IAAIC,EAAO,SAAQ,CAAE,EACxC,CAAC,EAEKC,EAASP,EAAS,IACfD,EAAQ,MAAM,KACnBQ,GAAUA,EAAO,YAAcZ,EAAM,OAAO,SAChD,CACC,EAED,OAAAa,EAAQ,CACN,MAAOR,EAAS,IACVO,EAAO,MACF,WAAWA,EAAO,MAAM,IAAI,GAE9B,gBACR,CACH,CAAC"}