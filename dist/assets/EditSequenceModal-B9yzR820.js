import{_ as v,M as C,b as V,r as a,q as y,o as s,c as r,d,t as m,I as u,k as F,f as l,O as f,F as b,e as k,g as M,h as _,n as g}from"./index-DF-DoQlt.js";import{M as B}from"./BuildFilterModal-C18AF9bI.js";import{M as S}from"./ModalFooter-Chk0SGv-.js";import{T as w}from"./TextField-BKWlN2Ov.js";import{T as D}from"./TextareaField-BVvnEY8u.js";const U={name:"edit-sequence-modal",mixins:[C],components:{MetadataField:B,ModalFooter:S,TextField:w,TextareaField:D},props:{active:{type:Boolean,default:!1},isError:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},sequenceToEdit:{type:Object,default:()=>{}}},emits:["cancel","confirm"],data(){return this.sequenceToEdit&&this.sequenceToEdit.id?{form:{id:this.sequenceToEdit.id,name:this.sequenceToEdit.name,description:this.sequenceToEdit.description,production_id:this.sequenceToEdit.project_id,data:{...this.sequenceToEdit.data,resolution:this.sequenceToEdit.data.resolution||""}},sequenceSuccessText:""}:{form:{id:"",name:"",description:"",data:{resolution:""}},sequenceSuccessText:""}},computed:{...V(["sequenceMetadataDescriptors"])},methods:{runConfirmation(){this.confirmClicked()},confirmClicked(){this.$emit("confirm",this.form)},isEditing(){return this.sequenceToEdit&&this.sequenceToEdit.id},resetForm(){this.sequenceSuccessText="",this.isEditing()?this.form={id:this.sequenceToEdit.id,name:this.sequenceToEdit.name,description:this.sequenceToEdit.description,data:{...this.sequenceToEdit.data,resolution:this.sequenceToEdit.data.resolution||""}}:(this.form.id=null,this.form.name="",this.form.description="",this.form.data={resolution:""})}},mounted(){this.active&&this.resetForm()},watch:{active(){this.resetForm()},sequenceToEdit(){this.resetForm()}}},K={class:"modal-content"},L={class:"box"},N={key:0,class:"title"},j={key:1,class:"title"};function I(e,t,i,O,z,n){const c=a("text-field"),q=a("textarea-field"),E=a("metadata-field"),h=a("modal-footer"),T=y("focus");return s(),r("div",{class:g({modal:!0,"is-active":i.active})},[d("div",{class:"modal-background",onClick:t[0]||(t[0]=o=>e.$emit("cancel"))}),d("div",K,[d("div",L,[i.sequenceToEdit&&i.sequenceToEdit.id?(s(),r("h1",N,m(e.$t("sequences.edit_title"))+" "+m(i.sequenceToEdit.name),1)):(s(),r("h1",j,m(e.$t("sequences.new_sequence")),1)),d("form",{onSubmit:t[4]||(t[4]=u(()=>{},["prevent"]))},[F(l(c,{ref:"nameField",label:e.$t("sequences.fields.name"),modelValue:e.form.name,"onUpdate:modelValue":t[1]||(t[1]=o=>e.form.name=o),modelModifiers:{trim:!0},onEnter:n.runConfirmation},null,8,["label","modelValue","onEnter"]),[[T]]),l(c,{ref:"resolutionField",label:e.$t("shots.fields.resolution"),modelValue:e.form.data.resolution,"onUpdate:modelValue":t[2]||(t[2]=o=>e.form.data.resolution=o),onEnter:n.runConfirmation},null,8,["label","modelValue","onEnter"]),l(q,{ref:"descriptionField",label:e.$t("sequences.fields.description"),onKeyup:[f(u(n.runConfirmation,["ctrl"]),["enter"]),f(u(n.runConfirmation,["meta"]),["enter"])],modelValue:e.form.description,"onUpdate:modelValue":t[3]||(t[3]=o=>e.form.description=o)},null,8,["label","onKeyup","modelValue"]),i.sequenceToEdit?(s(!0),r(b,{key:0},k(e.sequenceMetadataDescriptors,o=>(s(),M(E,{key:o.id,descriptor:o,entity:i.sequenceToEdit,onEnter:n.runConfirmation,modelValue:e.form.data[o.field_name],"onUpdate:modelValue":p=>e.form.data[o.field_name]=p},null,8,["descriptor","entity","onEnter","modelValue","onUpdate:modelValue"]))),128)):_("",!0)],32),l(h,{"error-text":e.$t("sequences.edit_error"),"is-loading":i.isLoading,"is-error":i.isError,onConfirm:n.runConfirmation,onCancel:t[5]||(t[5]=o=>e.$emit("cancel"))},null,8,["error-text","is-loading","is-error","onConfirm"])])])],2)}const J=v(U,[["render",I],["__scopeId","data-v-e606bca7"]]);export{J as E};
//# sourceMappingURL=EditSequenceModal-B9yzR820.js.map
