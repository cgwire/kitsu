{"version":3,"file":"Bots-BsezhxMc.js","sources":["../../src/components/modals/NewTokenModal.vue","../../src/components/pages/Bots.vue"],"sourcesContent":["<template>\n  <div class=\"modal\" :class=\"{ 'is-active': active }\">\n    <div class=\"modal-background\"></div>\n    <div class=\"modal-content\">\n      <div class=\"box\">\n        <h1 class=\"title\">\n          {{ $t('bots.new_token_title', { name: person.full_name }) }}\n        </h1>\n\n        <form class=\"form\" @submit.prevent v-if=\"!person.access_token\">\n          <p class=\"mb2 warning-text\">\n            <alert-triangle-icon class=\"icon mr05 warning\" />\n            {{ $t('bots.new_token_warning') }}\n          </p>\n          <date-field\n            :invalid=\"!isValidExpirationDate\"\n            :label=\"$t('bots.fields.expiration_date')\"\n            :min-date=\"today\"\n            v-model=\"form.expiration_date\"\n          />\n          <div class=\"flexrow right\">\n            <button\n              class=\"button flexrow-item is-primary\"\n              :disabled=\"!isValidExpirationDate\"\n              @click=\"generateToken\"\n            >\n              {{ $t('bots.generate') }}\n            </button>\n            <button\n              class=\"button flexrow-item is-link\"\n              @click=\"$emit('cancel')\"\n            >\n              {{ $t('main.cancel') }}\n            </button>\n          </div>\n        </form>\n\n        <template v-else>\n          <p class=\"mb2 warning-text\">\n            <alert-triangle-icon class=\"icon mr05 warning\" />\n            {{ $t('bots.copy_token_warning') }}\n          </p>\n          <div class=\"token\">\n            <text-field\n              ref=\"token\"\n              :disabled=\"!visible\"\n              input-class=\" token-input\"\n              :readonly=\"true\"\n              :type=\"visible ? 'text' : 'password'\"\n              :model-value=\"person.access_token\"\n            />\n            <eye-off-icon\n              v-if=\"visible\"\n              class=\"icon\"\n              @click=\"visible = false\"\n            />\n            <eye-icon v-else class=\"icon\" @click=\"visible = true\" />\n          </div>\n          <div class=\"flexrow right\">\n            <Transition name=\"fade\">\n              <p class=\"success has-text-right mr05\" v-if=\"message\">\n                {{ message }}\n              </p>\n            </Transition>\n            <button\n              class=\"button flexrow-item is-primary\"\n              @click=\"copyClicked\"\n              :disabled=\"!person.access_token\"\n            >\n              {{ $t('main.copy') }}\n            </button>\n            <button class=\"button flexrow-item is-link\" @click=\"$emit('close')\">\n              {{ $t('main.close') }}\n            </button>\n          </div>\n        </template>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { AlertTriangleIcon, EyeIcon, EyeOffIcon } from 'lucide-vue-next'\n\nimport { modalMixin } from '@/components/modals/base_modal'\nimport { timeMixin } from '@/components/mixins/time'\n\nimport DateField from '@/components/widgets/DateField.vue'\nimport TextField from '@/components/widgets/TextField.vue'\n\nexport default {\n  name: 'new-token-modal',\n\n  mixins: [modalMixin, timeMixin],\n\n  components: {\n    AlertTriangleIcon,\n    DateField,\n    EyeIcon,\n    EyeOffIcon,\n    TextField\n  },\n\n  props: {\n    active: {\n      type: Boolean,\n      default: false\n    },\n    person: {\n      type: Object,\n      default: () => {}\n    }\n  },\n\n  emits: ['cancel', 'close', 'generate-token'],\n\n  data() {\n    return {\n      form: {\n        expiration_date: null\n      },\n      message: null,\n      visible: false\n    }\n  },\n\n  computed: {\n    isValidExpirationDate() {\n      return (\n        !this.form.expiration_date ||\n        new Date(this.form.expiration_date) > new Date()\n      )\n    }\n  },\n\n  methods: {\n    generateToken() {\n      this.$emit('generate-token', {\n        id: this.person.id,\n        expiration_date: this.form.expiration_date\n      })\n    },\n\n    async copyClicked() {\n      this.message = null\n      await navigator.clipboard.writeText(this.person.access_token)\n      this.message = this.$t('bots.token_copied')\n      setTimeout(() => {\n        this.message = null\n      }, 5000)\n    },\n\n    resetForm() {\n      this.form = {\n        expiration_date: this.person.expiration_date\n      }\n      this.message = null\n      this.visible = false\n    }\n  },\n\n  watch: {\n    active() {\n      if (this.active) {\n        this.resetForm()\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.warning {\n  color: $orange;\n}\n\n.token {\n  position: relative;\n\n  :deep(.token-input) {\n    padding-right: 50px;\n\n    &[type='text'] {\n      text-overflow: ellipsis;\n    }\n  }\n\n  .icon {\n    cursor: pointer;\n    opacity: 0.5;\n    position: absolute;\n    right: 15px;\n    top: 15px;\n\n    &:hover {\n      opacity: 1;\n    }\n  }\n}\n\n.right {\n  justify-content: flex-end;\n}\n\n.fade-enter-active {\n  transition: all 0.3s ease;\n}\n.fade-leave-active {\n  transition: opacity 0.8s ease;\n}\n.fade-enter {\n  transform: translateX(20px);\n  opacity: 0;\n}\n.fade-leave-to {\n  opacity: 0;\n}\n</style>\n","<template>\n  <div class=\"bots page fixed-page\">\n    <div class=\"flexrow page-header\">\n      <page-title class=\"flexrow-item filler\" :text=\"$t('bots.title')\" />\n      <button-simple\n        class=\"flexrow-item\"\n        :text=\"$t('bots.new_bot')\"\n        :is-responsive=\"true\"\n        icon=\"plus\"\n        @click=\"onNewClicked\"\n        v-if=\"isCurrentUserAdmin\"\n      />\n    </div>\n\n    <div class=\"flexrow search-options\">\n      <search-field\n        ref=\"search-field\"\n        class=\"search flexrow-item\"\n        @change=\"onSearchChange\"\n        placeholder=\"ex: gazu bot\"\n      />\n      <combobox-department\n        class=\"flexrow-item\"\n        :label=\"$t('main.department')\"\n        v-model=\"selectedDepartment\"\n      />\n      <combobox-styled\n        class=\"flexrow-item\"\n        :label=\"$t('people.fields.role')\"\n        locale-key-prefix=\"people.role.\"\n        :options=\"roleOptions\"\n        v-model=\"role\"\n      />\n    </div>\n\n    <div class=\"query-list\"></div>\n\n    <route-tabs class=\"mb0\" :active-tab=\"activeTab\" :tabs=\"tabs\" />\n\n    <people-list\n      :entries=\"activeTab === 'active' ? activePeople : unactivePeople\"\n      :is-bots=\"true\"\n      :is-loading=\"isPeopleLoading\"\n      :is-error=\"isPeopleLoadingError\"\n      @avatar-clicked=\"onAvatarClicked\"\n      @delete-clicked=\"onDeleteClicked\"\n      @edit-clicked=\"onEditClicked\"\n      @refresh-clicked=\"onRefreshClicked\"\n      v-if=\"isPeopleLoading || currentPeople.length > 0\"\n    />\n    <div class=\"has-text-centered strong\" v-else>\n      <p>{{ $t('bots.no_bot') }}</p>\n      <button-simple\n        class=\"mt1\"\n        :text=\"$t('bots.new_bot')\"\n        :is-responsive=\"true\"\n        @click=\"onNewClicked\"\n        v-if=\"isCurrentUserAdmin\"\n      />\n    </div>\n\n    <edit-avatar-modal\n      active\n      :error-text=\"$t('bots.edit_avatar_error')\"\n      :is-deleting=\"loading.deletingAvatar\"\n      :is-error=\"errors.avatar\"\n      :is-updating=\"loading.updatingAvatar\"\n      :person=\"personToEdit\"\n      @close=\"modals.avatar = false\"\n      @delete=\"deleteAvatar\"\n      @update=\"updateAvatar\"\n      v-if=\"modals.avatar\"\n    />\n\n    <edit-person-modal\n      active\n      :is-bot=\"true\"\n      :is-error=\"errors.edit\"\n      :is-loading=\"loading.edit\"\n      :is-user-limit-error=\"errors.userLimit\"\n      :person-to-edit=\"personToEdit\"\n      @cancel=\"modals.edit = false\"\n      @confirm=\"confirmEditPeople\"\n      v-if=\"modals.edit\"\n    />\n\n    <new-token-modal\n      active\n      :person=\"personToEdit\"\n      @cancel=\"modals.newToken = false\"\n      @close=\"modals.newToken = false\"\n      @generate-token=\"confirmGenerateToken\"\n      v-if=\"modals.newToken\"\n    />\n\n    <hard-delete-modal\n      active\n      :error-text=\"$t('people.delete_error')\"\n      :is-loading=\"loading.del\"\n      :is-error=\"errors.del\"\n      :lock-text=\"personToDelete ? personToDelete.full_name : ''\"\n      :text=\"deleteText\"\n      @cancel=\"modals.del = false\"\n      @confirm=\"confirmDeletePeople\"\n      v-if=\"modals.del\"\n    />\n  </div>\n</template>\n\n<script>\nimport { mapGetters, mapActions } from 'vuex'\n\nimport { searchMixin } from '@/components/mixins/search'\n\nimport ButtonSimple from '@/components/widgets/ButtonSimple.vue'\nimport ComboboxDepartment from '@/components/widgets/ComboboxDepartment.vue'\nimport ComboboxStyled from '@/components/widgets/ComboboxStyled.vue'\nimport EditAvatarModal from '@/components/modals/EditAvatarModal.vue'\nimport EditPersonModal from '@/components/modals/EditPersonModal.vue'\nimport HardDeleteModal from '@/components/modals/HardDeleteModal.vue'\nimport NewTokenModal from '@/components/modals/NewTokenModal.vue'\nimport PageTitle from '@/components/widgets/PageTitle.vue'\nimport PeopleList from '@/components/lists/PeopleList.vue'\nimport RouteTabs from '@/components/widgets/RouteTabs.vue'\nimport SearchField from '@/components/widgets/SearchField.vue'\n\nexport default {\n  name: 'bots',\n\n  mixins: [searchMixin],\n\n  components: {\n    ButtonSimple,\n    ComboboxDepartment,\n    ComboboxStyled,\n    EditAvatarModal,\n    EditPersonModal,\n    HardDeleteModal,\n    NewTokenModal,\n    PageTitle,\n    PeopleList,\n    RouteTabs,\n    SearchField\n  },\n\n  data() {\n    return {\n      activeTab: 'active',\n      role: 'all',\n      roleOptions: [\n        { label: 'all', value: 'all' },\n        { label: 'admin', value: 'admin' },\n        { label: 'client', value: 'client' },\n        { label: 'manager', value: 'manager' },\n        { label: 'supervisor', value: 'supervisor' },\n        { label: 'user', value: 'user' },\n        { label: 'vendor', value: 'vendor' }\n      ],\n      errors: {\n        avatar: false,\n        del: false,\n        edit: false,\n        userLimit: false\n      },\n      loading: {\n        del: false,\n        deletingAvatar: false,\n        edit: false,\n        updatingAvatar: false\n      },\n      modals: {\n        avatar: false,\n        del: false,\n        edit: false,\n        newToken: false\n      },\n      personToDelete: {},\n      personToEdit: { role: 'user' },\n      selectedDepartment: '',\n      tabs: [\n        {\n          name: 'active',\n          label: this.$t('main.active')\n        },\n        {\n          name: 'unactive',\n          label: this.$t('people.unactive')\n        }\n      ]\n    }\n  },\n\n  async mounted() {\n    this.activeTab = this.$route.query.tab || 'active'\n    this.role = this.$route.query.role || 'all'\n    this.selectedDepartment = this.$route.query.department || ''\n    this.setSearchFromUrl()\n    await this.loadPeople()\n    this.onSearchChange()\n  },\n\n  watch: {\n    'modals.edit'() {\n      if (this.modals.edit) {\n        this.errors.edit = false\n        this.errors.userLimit = false\n        this.loading.edit = false\n      }\n    },\n\n    selectedDepartment() {\n      this.updateRoute()\n    },\n\n    role() {\n      this.updateRoute()\n    },\n\n    '$route.query.tab'() {\n      this.activeTab = this.$route.query.tab || 'active'\n    }\n  },\n\n  computed: {\n    ...mapGetters([\n      'displayedPeople',\n      'isCurrentUserAdmin',\n      'isPeopleLoading',\n      'isPeopleLoadingError'\n    ]),\n\n    currentPeople() {\n      let people = this.displayedPeople.filter(person => person.is_bot)\n      if (this.role !== 'all') {\n        people = people.filter(person => person.role === this.role)\n      }\n      if (this.selectedDepartment) {\n        people = people.filter(person =>\n          person.departments.includes(this.selectedDepartment)\n        )\n      }\n      return people\n    },\n\n    deleteText() {\n      const personName = this.personToDelete?.full_name\n      return personName ? this.$t('people.delete_text', { personName }) : ''\n    },\n\n    searchField() {\n      return this.$refs['search-field']\n    },\n\n    activePeople() {\n      return this.currentPeople.filter(person => person.active)\n    },\n\n    unactivePeople() {\n      return this.currentPeople.filter(person => !person.active)\n    }\n  },\n\n  methods: {\n    ...mapActions([\n      'clearPersonAvatar',\n      'deletePeople',\n      'editPerson',\n      'generateToken',\n      'loadPeople',\n      'newPerson',\n      'setPeopleSearch',\n      'uploadPersonAvatar'\n    ]),\n\n    async deleteAvatar() {\n      this.loading.deletingAvatar = true\n      try {\n        await this.clearPersonAvatar(this.personToEdit)\n        this.modals.avatar = false\n        this.onSearchChange()\n      } catch (err) {\n        this.errors.avatar = true\n      }\n      this.loading.deletingAvatar = false\n    },\n\n    async updateAvatar(formData) {\n      this.loading.updatingAvatar = true\n      try {\n        await this.uploadPersonAvatar({ person: this.personToEdit, formData })\n        this.modals.avatar = false\n        this.onSearchChange()\n      } catch (err) {\n        this.errors.avatar = true\n      }\n      this.loading.updatingAvatar = false\n    },\n\n    confirmGenerateToken(form) {\n      this.generateToken(form)\n        .then(person => {\n          this.updatePersonToEdit(person)\n        })\n        .catch(console.error)\n    },\n\n    confirmEditPeople(form) {\n      let action = 'editPerson'\n      if (this.personToEdit.id === undefined) action = 'newPerson'\n      else form.id = this.personToEdit.id\n      this.loading.edit = true\n      this.errors.edit = false\n      this.errors.userLimit = false\n      this[action](form)\n        .then(person => {\n          this.loading.edit = false\n          this.modals.edit = false\n          const access_token = person.access_token\n          if (access_token?.length) {\n            this.updatePersonToEdit(person)\n            this.modals.newToken = true\n          }\n          this.onSearchChange()\n        })\n        .catch(err => {\n          console.error(err)\n          const isUserLimitReached =\n            err.body?.message?.includes('limit') ?? false\n          if (isUserLimitReached) {\n            this.errors.userLimit = true\n          } else {\n            this.errors.edit = true\n          }\n          this.loading.edit = false\n        })\n    },\n\n    confirmDeletePeople() {\n      this.loading.del = true\n      this.errors.del = false\n      this.deletePeople(this.personToDelete)\n        .then(() => {\n          this.loading.del = false\n          this.modals.del = false\n          this.onSearchChange()\n        })\n        .catch(err => {\n          console.error(err)\n          this.loading.del = false\n          this.errors.del = true\n        })\n    },\n\n    onSearchChange() {\n      if (this.searchField) {\n        const searchQuery = this.searchField.getValue()\n        if (searchQuery?.length !== 1) {\n          this.setPeopleSearch(searchQuery)\n        }\n        this.setSearchInUrl()\n      }\n      // refresh tabs\n      this.tabs[0].label = `${this.$t('main.active')} (${this.activePeople.length})`\n      this.tabs[1].label = `${this.$t('people.unactive')} (${this.unactivePeople.length})`\n    },\n\n    onAvatarClicked(person) {\n      this.updatePersonToEdit(person)\n      this.errors.avatar = false\n      this.modals.avatar = true\n    },\n\n    onDeleteClicked(person) {\n      this.personToDelete = person\n      this.modals.del = true\n    },\n\n    onEditClicked(person) {\n      this.updatePersonToEdit(person)\n      this.modals.edit = true\n    },\n\n    onRefreshClicked(person) {\n      this.updatePersonToEdit(person)\n      this.modals.newToken = true\n    },\n\n    onNewClicked() {\n      this.updatePersonToEdit({ role: 'user' })\n      this.modals.edit = true\n    },\n\n    updatePersonToEdit(person) {\n      this.personToEdit = {\n        ...person,\n        expiration_date: person.expiration_date\n          ? new Date(person.expiration_date)\n          : null\n      }\n    },\n\n    updateRoute() {\n      const search = this.searchField.getValue()\n      const department = this.selectedDepartment\n      const role = this.role\n      this.$router.push({ query: { search, department, role } })\n    }\n  },\n\n  head() {\n    return {\n      title: `${this.$t('bots.title')} - Kitsu`\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.search {\n  margin-top: 2em;\n}\n.query-list {\n  margin-top: 1.5rem;\n}\n.search-options {\n  align-items: flex-end;\n}\n.filter-button {\n  margin-top: 0.3em;\n}\n</style>\n"],"names":["_sfc_main","modalMixin","timeMixin","AlertTriangleIcon","DateField","EyeIcon","EyeOffIcon","TextField","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_11","_createElementBlock","_normalizeClass","$props","_createElementVNode","_toDisplayString","_ctx","_openBlock","_Fragment","_createVNode","_component_alert_triangle_icon","_createTextVNode","_component_text_field","$data","_createBlock","_component_eye_off_icon","_component_eye_icon","_Transition","_withCtx","_hoisted_10","_createCommentVNode","$options","args","_cache","_withModifiers","_component_date_field","$event","searchMixin","ButtonSimple","ComboboxDepartment","ComboboxStyled","EditAvatarModal","EditPersonModal","HardDeleteModal","NewTokenModal","PageTitle","PeopleList","RouteTabs","SearchField","mapGetters","people","person","personName","mapActions","formData","form","action","err","searchQuery","search","department","role","_component_page_title","_component_button_simple","_component_search_field","_component_combobox_department","_component_combobox_styled","_component_route_tabs","_component_people_list","_component_edit_avatar_modal","_component_edit_person_modal","_component_new_token_modal","_component_hard_delete_modal"],"mappings":"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"}