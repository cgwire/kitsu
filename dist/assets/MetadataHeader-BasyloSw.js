import{_ as u,W as y,b as g,r as h,o as l,c as m,d as f,F as b,e as _,g as k,t as w,f as C,h as S,i as $,n as x}from"./index-C2m_IhNF.js";import{D as B}from"./DepartmentName-C_7ZW05X.js";const T={data(){return{shiftKeyPressed:!1}},methods:{onKeyUp(e){this.shiftKeyPressed=e.shiftKey},onKeyDown(e){this.shiftKeyPressed=e.shiftKey;const o=this.lastSelection?this.lastSelection:{x:0,y:0},s=o.x,i=o.y;let t=null;e.altKey&&[37,38,39,40].includes(e.keyCode)&&(e.keyCode===37?t=this.select(s,i-1):e.keyCode===38?t=this.select(s-1,i):e.keyCode===39?t=this.select(s,i+1):e.keyCode===40&&(t=this.select(s+1,i)),this.scrollToValidationCell(t),this.stopEvent(e))},stopEvent(e){e||(e=window.event),e.stopPropagation(),e.cancelBubble=!0,e.returnValue=!1},setScrollPosition(e){this.$refs.body&&(this.$refs.body.scrollTop=e)},setScrollLeftPosition(e){this.$refs.body&&(this.$refs.body.scrollLeft=e)},select(e,o){const s=this.$refs[`validation-${e}-${o}`]?.[0];return s?.$el.click(),s},scrollToValidationCell(e){e&&this.nbSelectedTasks>0&&this.$nextTick(()=>{const s=document.querySelectorAll(".datatable-head .datatable-row-header");let i=0;s.forEach(a=>{i+=a.offsetWidth});const t=e.$el.getBoundingClientRect(),n=this.$refs.body.getBoundingClientRect(),c=t.bottom>n.bottom-20,d=t.top<n.top+20,r=t.x+t.width>n.width,p=t.x<i+20;if(c){const a=t.bottom-n.bottom+20;this.setScrollPosition(this.$refs.body.scrollTop+a)}else if(d){const a=n.top-t.top+40;this.setScrollPosition(this.$refs.body.scrollTop-a)}if(r){const a=t.right-n.right+20;this.setScrollLeftPosition(this.$refs.body.scrollLeft+a)}else if(p){const a=i-t.left+40;this.setScrollLeftPosition(this.$refs.body.scrollLeft-a)}})}}},P={name:"metadata-header",props:{descriptor:Object,isStick:{type:Boolean,default:!1},left:{type:String,default:"0px"},noMenu:{type:Boolean,default:!1}},components:{ChevronDownIcon:y,DepartmentName:B},emits:["show-metadata-header-menu"],computed:{...g(["departmentMap"]),currentDepartments(){return(this.descriptor.departments||[]).map(o=>this.departmentMap.get(o))}}},L={class:"flexrow metadata-wrapper-header"},D=["title"];function K(e,o,s,i,t,n){const c=h("department-name"),d=h("chevron-down-icon");return l(),m("th",{scope:"col",class:x(["metadata-descriptor",{"datatable-row-header":s.isStick}]),style:$({left:s.left})},[f("div",L,[(l(!0),m(b,null,_(n.currentDepartments,r=>(l(),k(c,{key:r.id,department:r,"no-padding":"","only-dot":""},null,8,["department"]))),128)),f("span",{class:"flexrow-item ellipsis descriptor-name",title:s.descriptor.name},w(s.descriptor.name),9,D),s.noMenu?S("",!0):(l(),m("span",{key:0,class:"metadata-menu-button header-icon pointer",onClick:o[0]||(o[0]=r=>e.$emit("show-metadata-header-menu",r))},[C(d,{size:14})]))])],6)}const v=u(P,[["render",K],["__scopeId","data-v-c8a81a8c"]]);export{v as M,T as s};
//# sourceMappingURL=MetadataHeader-BasyloSw.js.map
