import{ad as M,C as N,m as P,b as B,_ as w,r as u,o as a,c as r,f as d,e as o,t as l,d as c,F as I,g as $,a3 as Q,aI as G,bM as j,l as g,B as L,a7 as W,aq as Z,bj as tt,a9 as z,a5 as et,am as st,ah as ot,ae as it,a8 as at,c9 as nt,cc as U,cd as R,ce as x,k as rt,n as A,p as v,X as H,cf as lt,bk as dt,cg as ut,bA as ct,y as mt,bF as E,aB as D,a as pt,a_ as ht,G as _t,ch as K,U as ft,Y as O,a2 as kt,ci as q,cj as yt,ab as bt,w as F,H as Tt,$ as C}from"./index-ip1P4Oag.js";import{B as gt}from"./BooleanCell-DnNEOzZP.js";import{T as vt}from"./TaskStatusCell-B5yuot2_.js";import{S as Pt}from"./StatusAutomationList-CyiG63fZ.js";const wt={name:"production-backgrounds",components:{BooleanField:M,Combobox:N},data(){return{selectedBackgroundId:null}},computed:{...P(["backgrounds","currentProduction","productionBackgrounds"]),remainingBackgrounds(){return this.backgrounds.filter(({id:t})=>!this.currentProduction.preview_background_files.includes(t))},remainingBackgroundsOptions(){return this.remainingBackgrounds.map(t=>({label:t.name,value:t.id}))}},methods:{...B(["addBackgroundToProduction","removeBackgroundFromProduction","setDefaultBackgroundToProduction"]),addBackground(){this.addBackgroundToProduction(this.selectedBackgroundId)},removeBackground(t){this.removeBackgroundFromProduction(t)},resetSelection(){var t;this.selectedBackgroundId=((t=this.remainingBackgrounds[0])==null?void 0:t.id)||""},isGlobalDefaultBackground(t){return t.is_default&&this.isCurrentDefaultBackground(t)},isCurrentDefaultBackground(t){const e=this.currentProduction.default_preview_background_file_id;return e?t.id===e:t.is_default},setDefaultBackground(t,e){this.setDefaultBackgroundToProduction(e?t.id:null)}},watch:{remainingBackgrounds:{deep:!0,immediate:!0,handler(){this.resetSelection()}}}},St={class:"production-backgrounds"},At={key:0,class:"flexrow mt1 mb1"},It={key:1,class:"box"},Ct={key:2,class:"datatable"},Dt={class:"datatable-head"},Vt={class:"name"},Et={class:"is-default"},$t={class:"datatable-body"},Bt={class:"name"},Ft={class:"flexrow"},Lt=["href"],Ut=["src","alt"],Rt={class:"is-default"},xt=["onClick"];function Ot(t,e,n,h,i,s){var _,p;const k=u("combobox"),b=u("boolean-field");return a(),r("div",St,[(_=s.remainingBackgrounds)!=null&&_.length?(a(),r("div",At,[d(k,{class:"flexrow-item mb0",options:s.remainingBackgroundsOptions,modelValue:i.selectedBackgroundId,"onUpdate:modelValue":e[0]||(e[0]=y=>i.selectedBackgroundId=y)},null,8,["options","modelValue"]),o("button",{class:"button flexrow-item",onClick:e[1]||(e[1]=(...y)=>s.addBackground&&s.addBackground(...y))},l(t.$t("main.add")),1)])):c("",!0),(p=t.currentProduction.preview_background_files)!=null&&p.length?(a(),r("table",Ct,[o("thead",Dt,[o("tr",null,[o("th",Vt,l(t.$t("backgrounds.fields.name")),1),o("th",Et,l(t.$t("backgrounds.fields.is_default")),1),e[2]||(e[2]=o("th",{class:"actions"},null,-1))])]),o("tbody",$t,[(a(!0),r(I,null,$(t.productionBackgrounds,y=>(a(),r("tr",{class:"datatable-row",key:y.id},[o("td",Bt,[o("span",Ft,[o("a",{class:"thumbnail-wrapper thumbnail-picture entity-thumbnail flexrow-item",href:y.url,target:"_blank"},[o("img",{src:y.thumbnail,alt:y.name,width:"100",height:"67"},null,8,Ut)],8,Lt),Q(" "+l(y.name),1)])]),o("td",Rt,[d(b,{class:"ml05 mb0",disabled:s.isGlobalDefaultBackground(y),label:t.$t("backgrounds.fields.is_default"),"model-value":String(s.isCurrentDefaultBackground(y)),onClick:S=>s.setDefaultBackground(y,S==="true")},null,8,["disabled","label","model-value","onClick"])]),o("td",null,[o("button",{class:"button",onClick:S=>s.removeBackground(y.id)},l(t.$t("main.remove")),9,xt)])]))),128))])])):(a(),r("div",It,l(t.$t("settings.production.empty_list")),1))])}const qt=w(wt,[["render",Ot],["__scopeId","data-v-3d68c5bb"]]),Mt={name:"production-board",components:{BooleanField:M,ValidationTag:G},data(){return{availableRoles:["user","vendor","supervisor","manager","admin"]}},computed:{...P(["currentProduction","productionTaskStatuses"]),sortedProductionTaskStatuses(){return j([...this.productionTaskStatuses],this.currentProduction)}},methods:{...B(["editTaskStatusLink","loadContext"]),getActiveRoles(t){var e;return((e=this.currentProduction.task_statuses_link[t.id])==null?void 0:e.roles_for_board)||[]},isActiveRole(t,e){return this.getActiveRoles(t).includes(e)},async updateRolesForBoard(t,e,n=!0){const h=[...this.getActiveRoles(t)];e.forEach(s=>{n&&!this.isActiveRole(t,s)?h.push(s):!n&&this.isActiveRole(t,s)&&h.splice(h.indexOf(s),1)});const i={...this.currentProduction.task_statuses_link[t.id],roles_for_board:h,project_id:this.currentProduction.id,task_status_id:t.id};await this.editTaskStatusLink(i),await this.loadContext()}}},Nt={class:"production-board"},Gt={key:0,class:"box"},jt={key:1,class:"datatable"},zt={class:"th-name"},Ht={class:"th-short-name"},Kt={class:"th-roles"},Jt={class:"datatable-body"},Yt={class:"name"},Xt={class:"roles"},Qt=["onClick"],Wt=["onClick"];function Zt(t,e,n,h,i,s){var _;const k=u("validation-tag"),b=u("boolean-field");return a(),r("div",Nt,[(_=t.currentProduction.task_statuses)!=null&&_.length?(a(),r("table",jt,[o("thead",null,[o("tr",null,[o("th",zt,l(t.$t("task_status.fields.name")),1),o("th",Ht,l(t.$t("task_status.fields.short_name")),1),o("th",Kt,l(t.$t("board.settings.visible")),1)])]),o("tbody",Jt,[(a(!0),r(I,null,$(s.sortedProductionTaskStatuses,p=>(a(),r(I,null,[p?(a(),r("tr",{class:"datatable-row task-status",key:p.id},[o("td",null,l(p.name),1),o("td",Yt,[d(k,{"is-static":!0,task:{task_status_id:p.id}},null,8,["task"])]),o("td",Xt,[(a(!0),r(I,null,$(i.availableRoles,y=>(a(),g(b,{class:"role-field",key:`${p.id}-${y}`,label:t.$t(`people.role.${y}`),"model-value":String(s.isActiveRole(p,y)),onClick:S=>s.updateRolesForBoard(p,[y],S==="true")},null,8,["label","model-value","onClick"]))),128)),s.getActiveRoles(p).length<i.availableRoles.length?(a(),r("button",{key:0,class:"button",onClick:y=>s.updateRolesForBoard(p,i.availableRoles)},l(t.$t("board.settings.select_all")),9,Qt)):(a(),r("button",{key:1,class:"button",onClick:y=>s.updateRolesForBoard(p,i.availableRoles,!1)},l(t.$t("board.settings.unselect_all")),9,Wt))])])):c("",!0)],64))),256))])])):(a(),r("div",Gt,l(t.$t("settings.production.empty_list")),1))])}const te=w(Mt,[["render",Zt],["__scopeId","data-v-c258ff92"]]),ee={name:"production-brief",components:{ButtonSimple:L,TextareaField:W},data(){return{brief:"",isEditing:!1,isLoading:!1,errors:{editBrief:!1}}},computed:{...P(["currentProduction"]),textarea(){return this.$refs.textarea}},mounted(){this.currentProduction&&(this.brief=this.currentProduction.description)},methods:{...B(["editProduction","setProduction"]),isEmpty(t){return!t||t.length===0},openEditing(){this.isEditing=!0,this.$nextTick(()=>{this.textarea.focus()})},async editBrief(){this.isLoading=!0;try{await this.editProduction({id:this.currentProduction.id,description:this.brief})}catch{this.errors.editBrief=!0,this.isLoading=!1;return}this.isEditing=!1,this.isLoading=!1},renderMarkdown:Z}},se={class:"brief"},oe={key:0},ie=["innerHTML"],ae={key:1,class:"box has-text-right"},ne={key:0,class:"error mt1 has-text-right"};function re(t,e,n,h,i,s){const k=u("textarea-field"),b=u("button-simple");return a(),r("div",se,[i.isEditing?(a(),r("div",ae,[d(k,{class:"editor",ref:"textarea","input-class":"textarea",onKeyup:tt(z(s.editBrief,["ctrl"]),["enter"]),modelValue:i.brief,"onUpdate:modelValue":e[1]||(e[1]=_=>i.brief=_)},null,8,["onKeyup","modelValue"]),i.errors.editBrief?(a(),r("p",ne,l(t.$t("productions.brief.edit.errorText")),1)):c("",!0),o("p",null,[d(b,{"is-primary":!0,"is-loading":i.isLoading,disabled:i.isLoading,text:t.$t("main.save"),onClick:s.editBrief},null,8,["is-loading","disabled","text","onClick"])])])):(a(),r("div",{key:0,class:"box",onDblclick:e[0]||(e[0]=(..._)=>s.openEditing&&s.openEditing(..._))},[s.isEmpty(t.currentProduction.description)?(a(),r("div",oe,[o("p",null,l(t.$t("productions.brief.empty")),1)])):(a(),r("div",{key:1,class:"content",innerHTML:s.renderMarkdown(t.currentProduction.description)},null,8,ie))],32))])}const le=w(ee,[["render",re],["__scopeId","data-v-5133a3c9"]]),de={name:"production-parameters",components:{ComboboxBoolean:et,ComboboxStyled:st,DateField:ot,FileUpload:it,TextField:at,ButtonSimple:L},emits:["confirm"],data(){return{formData:null,isLoading:!1,isError:!1,isLocalTVShow:!1,productionTypeOptions:nt,homepageOptions:U,form:{name:"",code:"",start_date:new Date,end_date:new Date,nb_episodes:0,episode_span:0,fps:"",max_retakes:0,is_clients_isolated:"false",is_preview_download_allowed:"false",is_set_preview_automated:"false",is_publish_default_for_artists:"false",ratio:"",resolution:"",production_type:"short"}}},computed:{...P(["currentProduction","productionAvatarFormData","isTVShow"])},mounted(){this.resetForm()},watch:{currentProduction:{handler(){this.resetForm(),this.updateTvShowRelatedDatas(this.isTVShow)},deep:!0},"form.production_type"(t){this.updateTvShowRelatedDatas(t==="tvshow")}},methods:{...B(["editProduction","storeProductionPicture","uploadProductionAvatar"]),onFileSelected(t){this.formData=t,this.storeProductionPicture(t)},isEmpty(t){return!t||t.length===0},runConfirmation(){this.$emit("confirm",this.form)},updateTvShowRelatedDatas(t){this.isLocalTVShow=t,t&&this.currentProduction?(this.form.nb_episodes=this.currentProduction.nb_episodes,this.form.episode_span=this.currentProduction.episode_span):(this.form.nb_episodes=0,this.form.episode_span=0)},resetForm(){var t;(t=this.$refs.fileField)==null||t.reset(),this.storeProductionPicture(null),this.currentProduction?this.form={name:this.currentProduction.name,code:this.currentProduction.code,start_date:R(this.currentProduction.start_date).toDate(),end_date:R(this.currentProduction.end_date).toDate(),production_type:this.currentProduction.production_type||"short",episode_span:this.currentProduction.episode_span,fps:this.currentProduction.fps,max_retakes:this.currentProduction.max_retakes,nb_episodes:this.currentProduction.nb_episodes,is_clients_isolated:this.currentProduction.is_clients_isolated?"true":"false",is_preview_download_allowed:this.currentProduction.is_preview_download_allowed?"true":"false",is_set_preview_automated:this.currentProduction.is_set_preview_automated?"true":"false",is_publish_default_for_artists:this.currentProduction.is_publish_default_for_artists?"true":"false",ratio:this.currentProduction.ratio,resolution:this.currentProduction.resolution,homepage:this.currentProduction.homepage}:this.form={name:"",code:"",start_date:new Date,end_date:new Date,production_type:"short",nb_episodes:0,episode_span:0,max_retakes:0,is_clients_isolated:"false",is_preview_download_allowed:"false",is_set_preview_automated:"false",is_publish_default_for_artists:"false",fps:"",ratio:"",resolution:"",homepage:U[0].value}},async editParameters(){this.isLoading=!0,this.isError=!1;try{this.productionAvatarFormData&&await this.uploadProductionAvatar(this.currentProduction.id),await this.editProduction({...this.form,id:this.currentProduction.id,start_date:x(this.form.start_date),end_date:x(this.form.end_date)})}catch{this.isError=!0}this.isLoading=!1}}},ue={class:"columns"},ce={class:"column is-one-third box"},me={class:"columns"},pe={class:"mr1"},he={key:9},_e={class:"label"},fe={key:10,class:"error mt1"},ke={class:"has-text-right mt2"};function ye(t,e,n,h,i,s){const k=u("text-field"),b=u("date-field"),_=u("combobox-styled"),p=u("combobox-boolean"),y=u("file-upload"),S=u("button-simple"),T=rt("focus");return a(),r("div",ue,[o("div",ce,[o("form",{class:"form",onSubmit:e[14]||(e[14]=z(()=>{},["prevent"]))},[A(d(k,{ref:"nameField",label:t.$t("productions.fields.name"),onEnter:s.runConfirmation,modelValue:i.form.name,"onUpdate:modelValue":e[0]||(e[0]=m=>i.form.name=m)},null,8,["label","onEnter","modelValue"]),[[T]]),d(k,{ref:"codeField",label:t.$t("productions.fields.code"),onEnter:s.runConfirmation,modelValue:i.form.code,"onUpdate:modelValue":e[1]||(e[1]=m=>i.form.code=m)},null,8,["label","onEnter","modelValue"]),o("div",me,[o("div",pe,[d(b,{ref:"startDateField",class:"mb0","max-date":i.form.end_date,label:t.$t("productions.fields.start_date"),"with-margin":!1,modelValue:i.form.start_date,"onUpdate:modelValue":e[2]||(e[2]=m=>i.form.start_date=m)},null,8,["max-date","label","modelValue"])]),o("div",null,[d(b,{ref:"endDateField",class:"mb0","min-date":i.form.start_date,label:t.$t("productions.fields.end_date"),"with-margin":!1,modelValue:i.form.end_date,"onUpdate:modelValue":e[3]||(e[3]=m=>i.form.end_date=m)},null,8,["min-date","label","modelValue"])])]),d(_,{ref:"productionTypeField",class:"mb2","locale-key-prefix":"productions.type.",label:t.$t("productions.fields.type"),options:i.productionTypeOptions,onEnter:s.runConfirmation,modelValue:i.form.production_type,"onUpdate:modelValue":e[4]||(e[4]=m=>i.form.production_type=m)},null,8,["label","options","onEnter","modelValue"]),t.currentProduction&&t.currentProduction.id?(a(),g(_,{key:0,ref:"homepage",class:"mb2","locale-key-prefix":"productions.homepage.",label:t.$t("productions.fields.homepage"),options:i.homepageOptions,onEnter:s.runConfirmation,modelValue:i.form.homepage,"onUpdate:modelValue":e[5]||(e[5]=m=>i.form.homepage=m)},null,8,["label","options","onEnter","modelValue"])):c("",!0),t.currentProduction&&t.currentProduction.id?(a(),g(k,{key:1,ref:"fpsField",type:"number",max:60,step:.001,label:t.$t("productions.fields.fps"),onEnter:s.runConfirmation,modelValue:i.form.fps,"onUpdate:modelValue":e[6]||(e[6]=m=>i.form.fps=m)},null,8,["label","onEnter","modelValue"])):c("",!0),t.currentProduction&&t.currentProduction.id?(a(),g(k,{key:2,ref:"ratioField",label:t.$t("productions.fields.ratio"),onEnter:s.runConfirmation,modelValue:i.form.ratio,"onUpdate:modelValue":e[7]||(e[7]=m=>i.form.ratio=m)},null,8,["label","onEnter","modelValue"])):c("",!0),t.currentProduction&&t.currentProduction.id?(a(),g(k,{key:3,ref:"resolutionField",label:t.$t("productions.fields.resolution"),onEnter:s.runConfirmation,modelValue:i.form.resolution,"onUpdate:modelValue":e[8]||(e[8]=m=>i.form.resolution=m)},null,8,["label","onEnter","modelValue"])):c("",!0),t.currentProduction&&t.currentProduction.id?(a(),g(p,{key:4,ref:"isClientsIsolatedField",label:t.$t("productions.fields.is_clients_isolated"),onEnter:s.runConfirmation,modelValue:i.form.is_clients_isolated,"onUpdate:modelValue":e[9]||(e[9]=m=>i.form.is_clients_isolated=m)},null,8,["label","onEnter","modelValue"])):c("",!0),t.currentProduction&&t.currentProduction.id?(a(),g(p,{key:5,ref:"isPreviewDownloadAllowed",label:t.$t("productions.fields.is_preview_download_allowed"),onEnter:s.runConfirmation,modelValue:i.form.is_preview_download_allowed,"onUpdate:modelValue":e[10]||(e[10]=m=>i.form.is_preview_download_allowed=m)},null,8,["label","onEnter","modelValue"])):c("",!0),t.currentProduction&&t.currentProduction.id?(a(),g(p,{key:6,ref:"isSetPreviewAutomated",label:t.$t("productions.fields.is_set_preview_automated"),onEnter:s.runConfirmation,modelValue:i.form.is_set_preview_automated,"onUpdate:modelValue":e[11]||(e[11]=m=>i.form.is_set_preview_automated=m)},null,8,["label","onEnter","modelValue"])):c("",!0),t.currentProduction&&t.currentProduction.id?(a(),g(p,{key:7,ref:"isPublishDefault",label:t.$t("productions.fields.is_publish_default"),onEnter:s.runConfirmation,modelValue:i.form.is_publish_default_for_artists,"onUpdate:modelValue":e[12]||(e[12]=m=>i.form.is_publish_default_for_artists=m)},null,8,["label","onEnter","modelValue"])):c("",!0),t.currentProduction&&t.currentProduction.id?(a(),g(k,{key:8,ref:"maxRetakesField",type:"number",step:1,label:t.$t("productions.fields.max_retakes"),onEnter:s.runConfirmation,modelValue:i.form.max_retakes,"onUpdate:modelValue":e[13]||(e[13]=m=>i.form.max_retakes=m)},null,8,["label","onEnter","modelValue"])):c("",!0),t.currentProduction&&t.currentProduction.id?(a(),r("div",he,[o("label",_e,l(t.$t("productions.picture")),1),d(y,{ref:"fileField","is-primary":!1,label:t.$t("main.csv.upload_file"),onFileselected:s.onFileSelected,accept:".png,.jpg,.jpeg"},null,8,["label","onFileselected"])])):c("",!0),i.isError?(a(),r("p",fe,l(t.$t("productions.edit_error")),1)):c("",!0),o("div",ke,[d(S,{"is-primary":!0,class:v({"is-loading":i.isLoading}),disabled:i.isLoading,text:t.$t("main.save"),onClick:s.editParameters},null,8,["class","disabled","text","onClick"])])],32)])])}const be=w(de,[["render",ye],["__scopeId","data-v-0613a2fc"]]),Te={name:"status-automation-item",components:{TaskStatusCell:vt,TaskTypeName:H},props:{statusAutomation:{type:Object,default:null},productionId:{type:String,default:null},deletable:{type:Boolean,default:!1}},computed:{...P(["isCurrentUserClient","getTaskStatus","getTaskType"]),statusAutomationPath(){const t={name:"status-automation",params:{production_id:this.productionId,status_automation_id:this.statusAutomation.id,type:lt(this.statusAutomation.for_entity)}};return(this.statusAutomation.episode_id||this.$route.params.episode_id)&&(t.name="episode-status-automation",t.params.episode_id=this.statusAutomation.episode_id||this.$route.params.episode_id),t}}},ge={class:"status-automation flexrow"},ve={class:"flexrow-item entity-type"},Pe={class:"in-task-type flexrow-item"},we={class:"in-task-status flexrow-item"},Se={class:"flexrow-item trigger-type"},Ae={class:"out-task-type flexrow-item"},Ie={key:0,class:"flexrow-item"},Ce={class:"out-task-status flexrow-item"};function De(t,e,n,h,i,s){const k=u("task-type-name"),b=u("task-status-cell");return a(),r("div",ge,[o("span",ve,l(n.statusAutomation.entity_type),1),o("span",Pe,[d(k,{class:"in-task-type flexrow-item","task-type":t.getTaskType(n.statusAutomation.in_task_type_id)},null,8,["task-type"])]),o("span",we,[n.statusAutomation.in_field_type!=="ready_for"?(a(),g(b,{key:0,entry:t.getTaskStatus(n.statusAutomation.in_task_status_id)},null,8,["entry"])):c("",!0)]),o("span",Se," changes "+l(n.statusAutomation.out_field_type==="ready_for"?"ready for to":"task status for"),1),o("span",Ae,[d(k,{"task-type":t.getTaskType(n.statusAutomation.out_task_type_id)},null,8,["task-type"])]),n.statusAutomation.out_field_type==="status"?(a(),r("span",Ie," to ")):c("",!0),o("span",Ce,[n.statusAutomation.out_field_type==="status"?(a(),g(b,{key:0,entry:t.getTaskStatus(n.statusAutomation.out_task_status_id)},null,8,["entry"])):c("",!0)])])}const Ve=w(Te,[["render",De],["__scopeId","data-v-37b59f3a"]]),Ee={name:"combobox-status-automation",components:{ChevronDownIcon:dt,ComboboxMask:ut,StatusAutomationItem:Ve},emits:["update:modelValue"],data(){return{showStatusAutomationsList:!1}},props:{label:{default:"",type:String},statusAutomationsList:{default:()=>[],type:Array},modelValue:{default:"",type:String},narrow:{default:!1,type:Boolean},withMargin:{default:!0,type:Boolean},addPlaceholder:{default:!1,type:Boolean}},mounted(){this.selectedStatusAutomation=this.statusAutomation},computed:{...P(["isDarkTheme","statusAutomationMap"]),currentStatusAutomation(){return this.modelValue?this.statusAutomationMap.get(this.modelValue):this.addPlaceholder?{short_name:"+ status",color:"#999"}:this.statusAutomationsList[0]}},methods:{selectStatusAutomation(t){this.$emit("update:modelValue",t.id),this.showStatusAutomationsList=!1},backgroundColor(t){return(!t||t.is_default)&&!this.isDarkTheme?"#ECECEC":(!t||t.is_default)&&this.isDarkTheme?"#5F626A":this.isDarkTheme?ct.darkenColor(t.color):t.color},color(t){return!t||!t.is_default||this.isDarkTheme?"white":"#333"},toggleStatusAutomationsList(){this.showStatusAutomationsList=!this.showStatusAutomationsList}}},$e={key:0,class:"label"},Be={class:"status-automation-combo"},Fe={class:"selected-status-automation-line flexrow-item"},Le={key:0,class:"select-input",ref:"select"},Ue=["onClick"];function Re(t,e,n,h,i,s){const k=u("status-automation-item"),b=u("chevron-down-icon"),_=u("combobox-mask");return a(),r("div",{class:v({field:n.withMargin,"field--narrow":n.narrow})},[n.label.length>0?(a(),r("label",$e,l(n.label),1)):c("",!0),o("div",Be,[o("div",{class:"flexrow",onClick:e[0]||(e[0]=(...p)=>s.toggleStatusAutomationsList&&s.toggleStatusAutomationsList(...p))},[o("div",Fe,[s.currentStatusAutomation?(a(),g(k,{key:0,"status-automation":s.currentStatusAutomation},null,8,["status-automation"])):c("",!0)]),d(b,{class:"down-icon flexrow-item"})]),i.showStatusAutomationsList?(a(),r("div",Le,[(a(!0),r(I,null,$(n.statusAutomationsList,p=>(a(),r("div",{class:"status-automation-line",key:p.id,onClick:y=>s.selectStatusAutomation(p)},[p?(a(),g(k,{key:0,"status-automation":p},null,8,["status-automation"])):c("",!0)],8,Ue))),128))],512)):c("",!0)]),d(_,{displayed:i.showStatusAutomationsList,onClick:s.toggleStatusAutomationsList},null,8,["displayed","onClick"])],2)}const xe=w(Ee,[["render",Re],["__scopeId","data-v-d5d44aae"]]),Oe={name:"production-status-automations",components:{ComboboxStatusAutomation:xe,StatusAutomationList:Pt},data(){return{statusAutomations:[],statusAutomationId:""}},mounted(){this.remainingStatusAutomations.length>0&&(this.statusAutomationId=this.remainingStatusAutomations[0].id)},computed:{...P(["currentProduction","productionStatusAutomations","statusAutomationMap","remainingStatusAutomations"])},methods:{...B(["addStatusAutomationToProduction"]),isEmpty(t){return!t||t.length===0},addStatusAutomation(){this.addStatusAutomationToProduction(this.statusAutomationId),this.remainingStatusAutomations.length>0?this.statusAutomationId=this.remainingStatusAutomations[0].id:this.statusAutomationId=""}}},qe={class:"columns"},Me={class:"column"},Ne={key:0,class:"flexrow mt1 mb1 add-status-automation"},Ge={key:1,class:"box"};function je(t,e,n,h,i,s){const k=u("combobox-status-automation"),b=u("status-automation-list");return a(),r("div",qe,[o("div",Me,[t.remainingStatusAutomations.length>0?(a(),r(I,{key:0},[t.remainingStatusAutomations?(a(),r("div",Ne,[d(k,{class:"flexrow-item selector","status-automations-list":t.remainingStatusAutomations,modelValue:i.statusAutomationId,"onUpdate:modelValue":e[0]||(e[0]=_=>i.statusAutomationId=_)},null,8,["status-automations-list","modelValue"]),o("button",{class:"button flexrow-item",onClick:e[1]||(e[1]=(..._)=>s.addStatusAutomation&&s.addStatusAutomation(..._))},l(t.$t("main.add")),1)])):c("",!0)],64)):c("",!0),s.isEmpty(t.productionStatusAutomations)?(a(),r("div",Ge,l(t.$t("settings.production.empty_automation_list")),1)):c("",!0),s.isEmpty(t.productionStatusAutomations)?c("",!0):(a(),g(b,{key:2,entries:t.productionStatusAutomations},null,8,["entries"]))])])}const ze=w(Oe,[["render",je],["__scopeId","data-v-f177d5cf"]]),He={name:"production-task-type",components:{TaskTypeCell:mt},props:{taskType:{required:!0,type:Object},scheduleItem:{required:!0,type:Object}},emits:["date-changed","remove"],data(){return{startDate:null,endDate:null,silent:!0}},computed:{...P(["currentProduction","getTaskTypePriority"]),productionTimeRange(){return{to:E(this.currentProduction.start_date).toDate(),from:E(this.currentProduction.end_date).toDate()}},endDateTimeRange(){return{to:this.startDate,from:E(this.currentProduction.end_date).toDate()}}},mounted(){this.startDate=E(this.scheduleItem.start_date).toDate(),this.endDate=E(this.scheduleItem.end_date).toDate(),this.$nextTick(()=>{this.silent=!1})},watch:{startDate(){if(this.silent)return;const t=D(this.startDate);let e=D(this.endDate);this.silent=!0,e.isBefore(t)&&(e=t.clone().add(1,"days"),this.endDate=e.toDate());const n={...this.scheduleItem};n.startDate=t,n.endDate=e,this.$emit("date-changed",n),this.$nextTick(()=>{this.silent=!1})},endDate(){if(this.silent)return;let t=D(this.startDate);const e=D(this.endDate);this.silent=!0,e.isBefore(t)&&(t=e.clone().add(-1,"days"),this.startDate=t.toDate());const n={...this.scheduleItem};n.startDate=t,n.endDate=e,this.$emit("date-changed",n),this.$nextTick(()=>{this.silent=!1})},scheduleItem(){this.silent=!0,this.startDate=E(this.scheduleItem.start_date).toDate(),this.endDate=E(this.scheduleItem.end_date).toDate(),this.$nextTick(()=>{this.silent=!1})}}},Ke={class:"short-name"},Je={class:"remove"};function Ye(t,e,n,h,i,s){const k=u("task-type-cell");return a(),r("tr",{class:"datatable-row",key:n.taskType.id},[d(k,{"task-type":n.taskType},null,8,["task-type"]),o("td",Ke,l(n.taskType.short_name),1),o("td",Je,[o("button",{class:"button",onClick:e[0]||(e[0]=b=>t.$emit("remove",{scheduleItem:n.scheduleItem,taskType:n.taskType}))},l(t.$t("main.remove")),1)])])}const Xe=w(He,[["render",Ye],["__scopeId","data-v-31881e19"]]),Qe={name:"setting-importer",components:{ButtonSimple:L,ComboboxProduction:pt},emits:["import-from-production","import-item"],data(){return{importProductionId:null}},props:{items:{type:Array,default:()=>[]},loadingImport:{type:Boolean,default:!0}},mounted(){this.availableProductions.length>0&&(this.importProductionId=this.availableProductions[0].id)},computed:{...P(["currentProduction","openProductions"]),availableProductions(){return this.openProductions.filter(t=>t.id!==this.currentProduction.id)},sizeStyle(){return{width:this.size?this.size+"px":"auto"}}}},We={key:0,class:"project-import flexcolumn"},Ze={key:0,class:"import-list"},ts=["onClick"],es={class:"infos mt05"};function ss(t,e,n,h,i,s){const k=u("combobox-production"),b=u("button-simple");return a(),r("div",null,[s.availableProductions.length>0?(a(),r("div",We,[d(k,{class:"flexrow-item",label:t.$t("settings.import_from_production"),"production-list":s.availableProductions,"with-margin":!1,modelValue:i.importProductionId,"onUpdate:modelValue":e[0]||(e[0]=_=>i.importProductionId=_)},null,8,["label","production-list","modelValue"]),d(b,{class:"flexrow-item mt05",disabled:!i.importProductionId,"is-loading":n.loadingImport,text:t.$t("main.import"),onClick:e[1]||(e[1]=_=>t.$emit("import-from-production",i.importProductionId))},null,8,["disabled","is-loading","text"])])):c("",!0),o("div",null,[o("p",{class:v({label:!0,mt2:s.availableProductions.length>0})},l(t.$t("settings.available_items")),3),n.items.length>0?(a(),r("div",Ze,[(a(!0),r(I,null,$(n.items,_=>(a(),r("div",{key:`unlisted-item-${_.id}`,class:"flexrow item-to-add mb05",onClick:p=>t.$emit("import-item",_)},[ht(t.$slots,"item-line",{item:_},void 0,!0)],8,ts))),128))])):c("",!0),o("p",es,l(t.$t("settings.no_more_available_items")),1)])])}const os=w(Qe,[["render",ss],["__scopeId","data-v-0afc0fce"]]),is={name:"production-task-types",components:{ComboboxTaskType:_t,draggable:K,ProductionTaskType:Xe,RouteSectionTabs:ft,SettingImporter:os,TaskTypeName:H},data(){return{activeTab:"assets",assetTaskTypes:{list:[]},editTaskTypes:{list:[]},episode_span:0,episodeTaskTypes:{list:[]},sequenceTaskTypes:{list:[]},shotTaskTypes:{list:[]},taskTypeId:"",loading:{import:!1,episode_span:!1,scheduleTimeUpdate:!1,scheduleTimeDelete:!1},errors:{episode_span:!1,scheduleTimeUpdate:!1,delete:!1}}},mounted(){this.remainingTaskTypesForEntity.length>0?this.taskTypeId=this.remainingTaskTypesForEntity[0].id:this.taskTypeId=null,this.$route.query.section?this.activeTab=this.$route.query.section:this.isShotsOnly?this.activeTab="shots":this.activeTab="assets",this.resetDisplayedTaskTypes(),this.currentProduction&&(this.episode_span=this.currentProduction.episode_span,this.loadAllScheduleItems(this.currentProduction).then(()=>{this.resetDisplayedTaskTypes()}).catch(t=>{console.error(t)}))},computed:{...P(["currentProduction","currentScheduleItems","getProductionTaskTypes","productionTaskTypes","productionAssetTaskTypes","productionShotTaskTypes","productionEditTaskTypes","productionSequenceTaskTypes","productionEpisodeTaskTypes","taskStatusMap","taskTypeMap","taskTypes","isTVShow"]),remainingTaskTypes(){return O(this.taskTypes.filter(t=>!this.currentProduction.task_types.includes(t.id)))},remainingTaskTypesForEntity(){return O(this.remainingTaskTypes.filter(t=>`${t.for_entity.toLowerCase()}s`===this.activeTab))},isAssetsOnly(){return this.currentProduction.production_type==="assets"},isShotsOnly(){return this.currentProduction.production_type==="shots"},taskTypeGroups(){let t=[];return this.isShotsOnly||t.push(this.assetTaskTypes),this.isAssetsOnly||(t=t.concat([this.shotTaskTypes,this.editTaskTypes,this.sequenceTaskTypes,this.episodeTaskTypes])),t},taskTypeTabs(){return[{label:this.$t("assets.title"),name:"assets"},{label:this.$t("shots.title"),name:"shots"},{label:this.$t("sequences.title"),name:"sequences"},{label:this.$t("episodes.title"),name:"episodes"},{label:this.$t("edits.title"),name:"edits"}]}},methods:{...B(["addTaskTypeToProduction","createScheduleItem","deleteScheduleItem","editProduction","editTaskTypeLink","loadAllScheduleItems","loadContext","removeTaskTypeFromProduction","saveScheduleItem"]),isEmpty(t){return!t||t.length===0},resetDisplayedTaskTypes(){["Asset","Shot","Sequence","Episode","Edit"].forEach(t=>{const e=this[`production${t}TaskTypes`];let n=kt([...e],this.currentProduction);n=n.map(h=>({taskType:h,scheduleItem:this.getScheduleItemForTaskType(h)})),this[`${t.toLowerCase()}TaskTypes`]={entity:`${t.toLowerCase()}s`,title:this.$t(`${t.toLowerCase()}s.title`),list:n}})},getScheduleItemForTaskType(t){return this.currentScheduleItems.find(n=>n.task_type_id===t.id)||{start_date:q(D()),end_date:q(D())}},async addTaskType(t){const e=t&&t.id?t.id:this.taskTypeId;await this.addTaskTypeToProduction({taskTypeId:e,priority:this.assetTaskTypes.length});try{await this.createScheduleItem({startDate:D(),endDate:D(),project_id:this.currentProduction.id,task_type_id:e})}catch(n){console.error(n)}this.remainingTaskTypesForEntity.length>0?this.taskTypeId=this.remainingTaskTypesForEntity[0].id:this.taskTypeId=null,this.resetDisplayedTaskTypes()},async removeTaskType({taskType:t,scheduleItem:e}){this.errors.delete=!1;try{await this.removeTaskTypeFromProduction(t.id),e!==null&&(this.loading.scheduleTimeDelete=!0,await this.deleteScheduleItem(e),this.loading.scheduleTimeDelete=!1)}catch{this.errors.delete=!0,this.loading.scheduleTimeDelete=!1;return}await this.$nextTick(),this.remainingTaskTypesForEntity.length>0?this.taskTypeId=this.remainingTaskTypesForEntity[0].id:this.taskTypeId=null,this.resetDisplayedTaskTypes()},async editEpisodeSpan(){this.loading.episode_span=!0,this.errors.episode_span=!1;try{await this.editProduction({id:this.currentProduction.id,episode_span:this.episode_span})}catch(t){this.errors.episode_span=!0,console.error(t)}this.loading.episode_span=!1},async onDateChanged(t){this.errors.scheduleTimeUpdate=!1;try{await this.saveScheduleItem(t)}catch(e){console.error(e),this.errors.scheduleTimeUpdate=!0}},async savePriorities(t){const e=new Date().getTime();this.lastCall=this.lastCall||0,e-this.lastCall>1e3&&!this.isSaving?(this.lastCall=e,this.isSaving=!0,await yt.runPromiseAsSeries(t.map(async n=>await this.editTaskTypeLink(n))),this.isSaving=!1,this.newSaveCall&&await this.savePriorities(t),setTimeout(()=>{this.$store.commit("SORT_VALIDATION_COLUMNS",this.taskTypeMap)},100)):this.newSaveCall=!0},async updatePriorities(t){const e=[];t.forEach((n,h)=>{h+=1;const i={projectId:this.currentProduction.id,taskTypeId:n.taskType.id,priority:h};e.push(i)}),await this.savePriorities(e),await this.loadContext()},async importTaskTypesFromProduction(t){this.loading.import=!0;const e=this.getProductionTaskTypes(t).filter(h=>`${h.for_entity.toLowerCase()}s`===this.activeTab),n=bt.capitalize(this.activeTab).slice(0,-1);await this[`production${n}TaskTypes`].forEach(async h=>{const i=this.getScheduleItemForTaskType(e[0]);await this.removeTaskType({taskType:h,scheduleItem:i})}),setTimeout(async()=>{await e.forEach(async h=>{await this.addTaskType(h)}),this.loading.import=!1},500)}},watch:{currentProduction:{handler(){this.episode_span=this.currentProduction.episode_span,this.loadAllScheduleItems(this.currentProduction),this.resetDisplayedTaskTypes()},deep:!0},$route(){this.$route.query.section&&(this.activeTab=this.$route.query.section,this.$nextTick(()=>{this.remainingTaskTypesForEntity.length>0?this.taskTypeId=this.remainingTaskTypesForEntity[0].id:this.taskTypeId=null}))}}},as={class:"columns"},ns={class:"column"},rs={key:0,class:"flexrow mt1 mb1 add-task-type"},ls=["disabled"],ds={key:1,class:"error mt1 mb1"},us={key:2,class:"box"},cs={key:0,class:"datatable list"},ms={key:1,class:"empty"},ps={class:"column"};function hs(t,e,n,h,i,s){const k=u("route-section-tabs"),b=u("combobox-task-type"),_=u("production-task-type"),p=u("draggable"),y=u("task-type-name"),S=u("setting-importer");return a(),r("div",null,[o("div",null,[d(k,{class:"section-tabs","active-tab":i.activeTab,route:t.$route,tabs:s.taskTypeTabs},null,8,["active-tab","route","tabs"]),o("div",as,[o("div",ns,[s.remainingTaskTypes.length>0?(a(),r("div",rs,[d(b,{class:"flexrow-item selector","task-type-list":s.remainingTaskTypesForEntity,modelValue:i.taskTypeId,"onUpdate:modelValue":e[0]||(e[0]=T=>i.taskTypeId=T)},null,8,["task-type-list","modelValue"]),o("button",{class:"button flexrow-item",disabled:i.loading.scheduleTimeDelete,onClick:e[1]||(e[1]=(...T)=>s.addTaskType&&s.addTaskType(...T))},l(t.$t("main.add")),9,ls)])):c("",!0),i.errors.delete||i.errors.scheduleTimeUpdate?(a(),r("p",ds,l(t.$t("productions.edit_error")),1)):c("",!0),s.isEmpty(t.currentProduction.task_types)?(a(),r("div",us,l(t.$t("settings.production.empty_list")),1)):(a(!0),r(I,{key:3},$(s.taskTypeGroups,(T,m)=>(a(),r("div",{key:m},[T.list.length>0&&T.entity===i.activeTab?(a(),r("table",cs,[d(p,{class:"datatable-body","item-key":"taskType.id",tag:"tbody",onEnd:V=>s.updatePriorities(T.list),modelValue:T.list,"onUpdate:modelValue":V=>T.list=V},{item:F(({element:V})=>[d(_,{class:"task-type","task-type":V.taskType,"schedule-item":V.scheduleItem,onDateChanged:s.onDateChanged,onRemove:s.removeTaskType},null,8,["task-type","schedule-item","onDateChanged","onRemove"])]),_:2},1032,["onEnd","modelValue","onUpdate:modelValue"])])):c("",!0),T.list.length===0&&T.entity===i.activeTab?(a(),r("p",ms,l(t.$t("task_types.no_task_types")),1)):c("",!0)]))),128))]),o("div",ps,[d(S,{items:s.remainingTaskTypesForEntity,"loading-import":i.loading.import,onImportFromProduction:s.importTaskTypesFromProduction,onImportItem:s.addTaskType},{"item-line":F(({item:T})=>[d(y,{class:"pointer","task-type":T},null,8,["task-type"])]),_:1},8,["items","loading-import","onImportFromProduction","onImportItem"])])])])])}const _s=w(is,[["render",hs],["__scopeId","data-v-1f19917c"]]),fs={name:"production-settings",components:{BooleanCell:gt,Combobox:N,ComboboxStatus:Tt,draggable:K,ProductionBackgrounds:qt,ProductionBoard:te,ProductionBrief:le,ProductionParameters:be,ProductionStatusAutomations:ze,ProductionTaskTypes:_s,ValidationTag:G},data(){return{activeTab:"parameters",assetTypeId:"",taskStatusItems:[],taskStatusId:""}},mounted(){this.remainingAssetTypes.length>0&&(this.assetTypeId=this.remainingAssetTypes[0].value),this.remainingTaskStatuses.length>0&&(this.taskStatusId=this.remainingTaskStatuses[0].id),this.$route.query.tab&&(this.activeTab=this.$route.query.tab)},computed:{...P(["currentProduction","assetTypes","productionAssetTypes","productionTaskStatuses","taskStatus"]),remainingAssetTypes(){return this.assetTypes.filter(t=>!this.currentProduction.asset_types.includes(t.id)).map(t=>({label:t.name,value:t.id}))},remainingTaskStatuses(){return this.taskStatus.filter(t=>!this.currentProduction.task_statuses.includes(t.id)&&!t.for_concept)},sortedProductionTaskStatuses(){return j(this.productionTaskStatuses,this.currentProduction)}},methods:{...B(["addAssetTypeToProduction","addTaskStatusToProduction","editTaskStatusLink","loadContext","removeAssetTypeFromProduction","removeTaskStatusFromProduction"]),isEmpty(t){return!t||t.length===0},isActiveTab(t){return this.activeTab===t},addAssetType(){this.addAssetTypeToProduction(this.assetTypeId),this.remainingAssetTypes.length>0&&(this.assetTypeId=this.remainingAssetTypes[0].value)},removeAssetType(t){this.removeAssetTypeFromProduction(t)},async addTaskStatus(){var t;await this.addTaskStatusToProduction(this.taskStatusId),await this.loadContext(),this.taskStatusId=(t=this.remainingTaskStatuses[0])==null?void 0:t.id},async removeTaskStatus(t){var e;await this.removeTaskStatusFromProduction(t),await this.loadContext(),this.taskStatusId=(e=this.remainingTaskStatuses[0])==null?void 0:e.id},async updateTaskStatusPriority(){await this.updateTaskStatusPriorities(this.taskStatusItems)},async updateTaskStatusPriorities(t){const e=t.map((n,h)=>({...this.currentProduction.task_statuses_link[n.id],priority:h+1,project_id:this.currentProduction.id,task_status_id:n.id}));for(const n of e)await this.editTaskStatusLink(n);await this.loadContext()}},watch:{activeTab(){this.$route.query.tab!==this.activeTab&&this.$router.push({query:{tab:this.activeTab}})},sortedProductionTaskStatuses:{immediate:!0,handler(){this.taskStatusItems=JSON.parse(JSON.stringify(this.sortedProductionTaskStatuses))}}},head(){return{title:`${this.currentProduction.name} | ${this.$t("settings.title")} - Kitsu`}}},ks={class:"production-settings fixed-page"},ys={class:"wrapper"},bs={class:"tabs"},Ts={class:"tab"},gs={class:"tab"},vs={class:"tab"},Ps={class:"flexrow mt1 mb1 add-asset-type"},ws={key:0,class:"box"},Ss={key:1,class:"datatable list"},As={class:"datatable-body"},Is={class:"name"},Cs=["onClick"],Ds={class:"tab"},Vs={class:"tab"},Es={key:0,class:"flexrow mt1 mb1 add-task-status"},$s={key:1,class:"box"},Bs={key:2,class:"datatable"},Fs={class:"th-name"},Ls={class:"th-short-name"},Us={class:"th-bool"},Rs={class:"th-bool"},xs={class:"th-bool"},Os={class:"th-bool"},qs={class:"datatable-row task-status"},Ms={class:"name"},Ns=["onClick"],Gs={class:"tab"},js={class:"tab"},zs={class:"tab"};function Hs(t,e,n,h,i,s){const k=u("production-parameters"),b=u("production-brief"),_=u("combobox"),p=u("production-task-types"),y=u("combobox-status"),S=u("validation-tag"),T=u("boolean-cell"),m=u("draggable"),V=u("production-board"),J=u("production-status-automations"),Y=u("production-backgrounds");return a(),r("div",ks,[o("div",ys,[o("div",bs,[o("ul",null,[o("li",{class:v({"is-active":s.isActiveTab("parameters")})},[o("a",{onClick:e[0]||(e[0]=f=>i.activeTab="parameters")},l(t.$t("productions.parameters.title")),1)],2),o("li",{class:v({"is-active":s.isActiveTab("brief")})},[o("a",{onClick:e[1]||(e[1]=f=>i.activeTab="brief")},l(t.$t("productions.brief.title")),1)],2),o("li",{class:v({"is-active":s.isActiveTab("taskStatus")})},[o("a",{onClick:e[2]||(e[2]=f=>i.activeTab="taskStatus")},l(t.$t("task_status.title")),1)],2),o("li",{class:v({"is-active":s.isActiveTab("board")})},[o("a",{onClick:e[3]||(e[3]=f=>i.activeTab="board")},l(t.$t("board.settings.title")),1)],2),o("li",{class:v({"is-active":s.isActiveTab("taskTypes")})},[o("a",{onClick:e[4]||(e[4]=f=>i.activeTab="taskTypes")},l(t.$t("task_types.title")),1)],2),o("li",{class:v({"is-active":s.isActiveTab("assetTypes")})},[o("a",{onClick:e[5]||(e[5]=f=>i.activeTab="assetTypes")},l(t.$t("asset_types.title")),1)],2),o("li",{class:v({"is-active":s.isActiveTab("statusAutomations")})},[o("a",{onClick:e[6]||(e[6]=f=>i.activeTab="statusAutomations")},l(t.$t("status_automations.title")),1)],2),o("li",{class:v({"is-active":s.isActiveTab("backgrounds")})},[o("a",{onClick:e[7]||(e[7]=f=>i.activeTab="backgrounds")},l(t.$t("backgrounds.title")),1)],2)])]),A(o("div",Ts,[d(k)],512),[[C,s.isActiveTab("parameters")]]),A(o("div",gs,[d(b)],512),[[C,s.isActiveTab("brief")]]),A(o("div",vs,[o("div",Ps,[d(_,{class:"flexrow-item",options:s.remainingAssetTypes,modelValue:i.assetTypeId,"onUpdate:modelValue":e[8]||(e[8]=f=>i.assetTypeId=f)},null,8,["options","modelValue"]),o("button",{class:"button flexrow-item",onClick:e[9]||(e[9]=(...f)=>s.addAssetType&&s.addAssetType(...f))},l(t.$t("main.add")),1)]),s.isEmpty(t.currentProduction.asset_types)?(a(),r("div",ws,l(t.$t("settings.production.empty_list")),1)):(a(),r("table",Ss,[o("tbody",As,[(a(!0),r(I,null,$(t.productionAssetTypes,f=>(a(),r("tr",{class:"datatable-row",key:f.id},[o("td",Is,l(f.name),1),o("td",null,[o("button",{class:"button",onClick:X=>s.removeAssetType(f.id)},l(t.$t("main.remove")),9,Cs)])]))),128))])]))],512),[[C,s.isActiveTab("assetTypes")]]),A(o("div",Ds,[d(p)],512),[[C,s.isActiveTab("taskTypes")]]),A(o("div",Vs,[s.isEmpty(s.remainingTaskStatuses)?c("",!0):(a(),r("div",Es,[d(y,{class:"flexrow-item selector","task-status-list":s.remainingTaskStatuses,modelValue:i.taskStatusId,"onUpdate:modelValue":e[10]||(e[10]=f=>i.taskStatusId=f)},null,8,["task-status-list","modelValue"]),o("button",{class:"button flexrow-item",onClick:e[11]||(e[11]=(...f)=>s.addTaskStatus&&s.addTaskStatus(...f))},l(t.$t("main.add")),1)])),s.isEmpty(t.currentProduction.task_statuses)?(a(),r("div",$s,l(t.$t("settings.production.empty_list")),1)):(a(),r("table",Bs,[o("thead",null,[o("tr",null,[o("th",Fs,l(t.$t("task_status.fields.name")),1),o("th",Ls,l(t.$t("task_status.fields.short_name")),1),o("th",Us,l(t.$t("task_status.fields.is_done")),1),o("th",Rs,l(t.$t("task_status.fields.is_retake")),1),o("th",xs,l(t.$t("task_status.fields.is_artist_allowed")),1),o("th",Os,l(t.$t("task_status.fields.is_client_allowed")),1)])]),d(m,{class:"datatable-body","item-key":"id",tag:"tbody",modelValue:i.taskStatusItems,"onUpdate:modelValue":e[12]||(e[12]=f=>i.taskStatusItems=f),onEnd:s.updateTaskStatusPriority},{item:F(({element:f})=>[o("tr",qs,[o("td",null,l(f.name),1),o("td",Ms,[d(S,{"is-static":!0,task:{task_status_id:f.id}},null,8,["task"])]),d(T,{value:f.is_done},null,8,["value"]),d(T,{value:f.is_retake},null,8,["value"]),d(T,{value:f.is_artist_allowed},null,8,["value"]),d(T,{value:f.is_client_allowed},null,8,["value"]),o("td",null,[o("button",{class:"button",onClick:X=>s.removeTaskStatus(f.id)},l(t.$t("main.remove")),9,Ns)])])]),_:1},8,["modelValue","onEnd"])]))],512),[[C,s.isActiveTab("taskStatus")]]),A(o("div",Gs,[d(V)],512),[[C,s.isActiveTab("board")]]),A(o("div",js,[d(J)],512),[[C,s.isActiveTab("statusAutomations")]]),A(o("div",zs,[d(Y)],512),[[C,s.isActiveTab("backgrounds")]])])])}const Qs=w(fs,[["render",Hs],["__scopeId","data-v-8ed37faa"]]);export{Qs as default};
//# sourceMappingURL=ProductionSettings-DSUW9-KN.js.map
