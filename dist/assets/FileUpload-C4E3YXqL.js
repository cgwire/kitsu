import{_ as p,o,c as u,d as n,n as m,H as g,t as d,h as f}from"./index-C2m_IhNF.js";const h={name:"file-upload",props:{accept:{default:".csv",type:String},isPrimary:{default:!0,type:Boolean},label:{type:String,required:!0},multiple:{default:!1,type:Boolean},uploadFieldName:{default:"file",type:String},disabled:{type:Boolean,default:!1},hideFileNames:{type:Boolean,default:!1}},emits:["fileselected"],data(){return{isInitial:!0,isSaving:!1,uploadedFiles:[]}},mounted(){this.reset(),["drag","dragstart","dragend","dragover","dragenter","dragleave","drop"].forEach(a=>{this.$refs.wrapper.addEventListener(a,e=>{e.preventDefault(),e.stopPropagation()})})},methods:{filesChange(i,a){this.uploadedFiles=[];const e=[];for(let r=0,s=a.length;r<s;r++){const t=a[r],l=new FormData;l.append(this.uploadFieldName,t,t.name),e.push(l),this.multiple?this.uploadedFiles.push(t.name):this.uploadedFiles=[t.name]}this.multiple?this.$emit("fileselected",e):this.$emit("fileselected",e[0])},reset(){this.isSaving=!1,this.isInitial=!0,this.uploadedFiles=[],this.$refs.uploadInput&&(this.$refs.uploadInput.value="")},onDragover(){this.isDragging=!0},onDragleave(){this.isDragging=!1},onDrop(i){i.dataTransfer.files&&(this.isDragging=!1,this.isSaving=!1,this.filesChange("file",i.dataTransfer.files))}}},c={enctype:"multipart/form-data",novalidate:""},v={class:"dropbox"},D=["accept","name","disabled","multiple"],F={key:0,class:"file-upload-status"},y={key:1,class:"file-upload-status"};function _(i,a,e,r,s,t){return o(),u("div",{ref:"wrapper",onDrop:a[1]||(a[1]=(...l)=>t.onDrop&&t.onDrop(...l)),onDragover:a[2]||(a[2]=(...l)=>t.onDragover&&t.onDragover(...l)),onDragleave:a[3]||(a[3]=(...l)=>t.onDragleave&&t.onDragleave(...l))},[n("form",c,[n("div",v,[n("label",{class:m({button:!0,"is-primary":e.isPrimary})},[g(d(e.label)+" ",1),n("input",{ref:"uploadInput",class:"visuallyhidden",type:"file",accept:e.accept,name:e.uploadFieldName,disabled:s.isSaving||e.disabled,multiple:e.multiple,onChange:a[0]||(a[0]=l=>t.filesChange(l.target.name,l.target.files))},null,40,D)],2),s.uploadedFiles.length>1&&!e.hideFileNames?(o(),u("span",F,d(s.uploadedFiles.length)+" "+d(i.$tc("main.files_selected")),1)):f("",!0),s.uploadedFiles.length===1&&!e.hideFileNames?(o(),u("span",y,d(s.uploadedFiles[0]),1)):f("",!0)])])],544)}const N=p(h,[["render",_],["__scopeId","data-v-dbee6a3c"]]);export{N as F};
//# sourceMappingURL=FileUpload-C4E3YXqL.js.map
