{"version":3,"file":"ValidationTag-C6BUHddW.js","sources":["../../src/components/widgets/ValidationTag.vue"],"sourcesContent":["<template>\n  <span>\n    <template v-if=\"!minimized\">\n      <router-link\n        class=\"tag dynamic\"\n        :to=\"taskPath\"\n        :style=\"tagStyle\"\n        :title=\"taskStatus.name\"\n        v-if=\"!isStatic && !isCurrentUserClient && taskPath\"\n      >\n        {{ taskStatus.short_name }}\n      </router-link>\n\n      <span\n        class=\"tag\"\n        :style=\"tagStyle\"\n        :title=\"taskStatus.name\"\n        @click=\"$event => $emit('click', $event)\"\n        v-else\n      >\n        {{ taskStatus.short_name }}\n      </span>\n      <span\n        :class=\"{\n          priority: true,\n          high: task.priority === 1,\n          veryhigh: task.priority === 2,\n          emergency: task.priority === 3\n        }\"\n        :title=\"formatPriority\"\n        v-if=\"isPriority && !isCurrentUserClient && task.priority > 0\"\n      >\n        {{ priority }}\n      </span>\n    </template>\n    <template v-else>\n      <router-link\n        :to=\"taskPath\"\n        class=\"tag dynamic\"\n        :style=\"tagStyle\"\n        :title=\"taskStatus.name\"\n        v-if=\"!isStatic && !isCurrentUserClient && taskPath\"\n      >\n        &nbsp;\n      </router-link>\n      <span class=\"tag\" v-else> &nbsp; </span>\n    </template>\n  </span>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex'\nimport colors from '@/lib/colors'\nimport { pluralizeEntityType } from '@/lib/path'\n\nexport default {\n  name: 'validation-tag',\n\n  props: {\n    task: {\n      default: () => {},\n      type: Object\n    },\n    isStatic: {\n      default: false,\n      type: Boolean\n    },\n    isPriority: {\n      default: true,\n      type: Boolean\n    },\n    minimized: {\n      default: false,\n      type: Boolean\n    },\n    pointer: {\n      default: false,\n      type: Boolean\n    },\n    thin: {\n      default: false,\n      type: Boolean\n    }\n  },\n\n  emits: ['click'],\n\n  computed: {\n    ...mapGetters([\n      'currentEpisode',\n      'currentProduction',\n      'isCurrentUserClient',\n      'isDarkTheme',\n      'isTVShow',\n      'taskStatusMap',\n      'taskTypeMap'\n    ]),\n\n    cursor() {\n      return this.pointer ? 'pointer' : 'default'\n    },\n\n    taskStatus() {\n      const taskStatusId = this.task?.task_status_id\n      return this.taskStatusMap?.get(taskStatusId) || {}\n    },\n\n    backgroundColor() {\n      if (this.taskStatus.short_name === 'todo' && !this.isDarkTheme) {\n        return '#ECECEC'\n      } else if (this.taskStatus.short_name === 'todo' && this.isDarkTheme) {\n        return '#5F626A'\n      } else if (this.isDarkTheme) {\n        return colors.darkenColor(this.taskStatus.color)\n      } else {\n        return this.taskStatus.color\n      }\n    },\n\n    color() {\n      const isTodo = this.taskStatus.name === 'Todo'\n      if (!isTodo || this.isDarkTheme) {\n        return 'white'\n      } else {\n        return '#333'\n      }\n    },\n\n    priority() {\n      if (this.task.priority && !this.taskStatus.is_done) {\n        if (this.task.priority === 3) {\n          return '!!!'\n        } else if (this.task.priority === 2) {\n          return '!!'\n        } else if (this.task.priority === 1) {\n          return '!'\n        } else {\n          return ''\n        }\n      } else {\n        return ''\n      }\n    },\n\n    tagStyle() {\n      const isStatic = !this.isStatic && !this.isCurrentUserClient\n      const isTodo = this.taskStatus.name === 'Todo'\n      if (this.thin && !isTodo) {\n        if (this.isDarkTheme) {\n          return {\n            background: 'transparent',\n            border:\n              '1px solid ' +\n              (isTodo\n                ? 'grey'\n                : colors.lightenColor(this.backgroundColor, 0.5)),\n            color: colors.lightenColor(this.backgroundColor, 0.5),\n            cursor: isStatic ? 'pointer' : this.cursor\n          }\n        } else {\n          return {\n            background: 'transparent',\n            border: '1px solid ' + (isTodo ? 'grey' : this.backgroundColor),\n            color: this.backgroundColor,\n            cursor: isStatic ? 'pointer' : this.cursor\n          }\n        }\n      } else {\n        return {\n          background: this.backgroundColor,\n          color: this.color,\n          cursor: isStatic ? 'pointer' : this.cursor\n        }\n      }\n    },\n\n    taskPath() {\n      if (!this.currentProduction?.id) return\n      const task = this.task\n      const productionId = this.task.project_id\n        ? this.task.project_id\n        : this.currentProduction.id\n      const route = {\n        name: 'task',\n        params: {\n          production_id: productionId,\n          task_id: task.id\n        }\n      }\n\n      if (this.isTVShow && this.currentEpisode) {\n        route.name = 'episode-task'\n        route.params.episode_id = task.episode_id || this.currentEpisode.id\n      }\n\n      const taskType = this.taskTypeMap.get(task.task_type_id)\n      route.params.type = pluralizeEntityType(taskType.for_entity)\n\n      return route\n    },\n\n    formatPriority() {\n      const priority = this.task.priority\n      let label = priority + ''\n      if (priority === 0) {\n        label = 'normal'\n      } else if (priority === 1) {\n        label = this.$t('tasks.priority.high')\n      } else if (priority === 2) {\n        label = this.$t('tasks.priority.very_high')\n      } else if (priority === 3) {\n        label = this.$t('tasks.priority.emergency')\n      }\n      return label\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.tag {\n  letter-spacing: 1px;\n  margin-right: 0.1em;\n  text-transform: uppercase;\n}\n\n.tag.dynamic:hover {\n  cursor: pointer;\n  transform: scale(1.15);\n  transition: all 0.1s ease-in-out;\n}\n\n.priority {\n  border-radius: 5px;\n  display: inline-block;\n  color: white;\n  margin-left: 5px;\n  font-weight: bold;\n  min-width: 23px;\n  text-align: center;\n}\n\n.high {\n  background: $yellow;\n}\n\n.veryhigh {\n  background: $orange;\n}\n\n.emergency {\n  background: $red;\n}\n</style>\n"],"names":["_sfc_main","mapGetters","taskStatusId","colors","isStatic","isTodo","task","route","taskType","pluralizeEntityType","priority","label","_hoisted_1","_hoisted_2","_createElementBlock","$props","_openBlock","_Fragment","_ctx","$options","_createBlock","_component_router_link","_normalizeStyle","_withCtx","_cache","_createTextVNode","_hoisted_3","_toDisplayString","$event","_normalizeClass","_createCommentVNode"],"mappings":"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"}