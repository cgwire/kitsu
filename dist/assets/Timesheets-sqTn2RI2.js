import{_ as x,c6 as q,a as O,T,aG as j,aF as R,A as h,d8 as M,c9 as V,ca as E,cb as B,aD as Y,r as m,c as u,o,e as c,f as y,d as p,t as d,F as f,g as k,n as $,k as S,w as D,a7 as w,O as W,P as A,bB as H,p as U,a3 as N,bT as F,h as P,m as z,C as G,b as J,B as X,aa as K,ab as Q}from"./index-qtxoT1kv.js";import{B as Z}from"./ButtonHrefLink-q92JwkRR.js";import{C as ee}from"./ComboboxStudio-cBzzlHuH.js";import"./upload-BlqRiApl.js";const te={name:"people-timesheet-list",components:{PeopleAvatar:R,PeopleName:j,TableInfo:T},data(){return{currentMonth:h().month()+1,currentYear:h().year(),currentWeek:h().week()}},props:{timesheet:{type:Object,default:()=>{}},people:{type:Array,default:()=>[]},detailLevel:{type:String,default:"day"},year:{type:Number,default:0},month:{type:Number,default:0},unit:{type:String,default:"hour"},isLoading:{type:Boolean,default:!1},isError:{type:Boolean,default:!1}},computed:{...O(["dayOffMap","organisation","route"]),yearRange(){return Y(2018,h().year())},monthRange(){return B(this.year,this.currentYear,this.currentMonth)},dayRange(){return E(this.year,this.month,this.currentYear,this.currentMonth)},weekRange(){return V(this.year,this.currentYear,this.currentWeek)},isHours(){return this.unit==="hour"}},methods:{monthToString:q,yearDuration(e,s){const t=`${e}`,a=this.getDuration(t,s);return this.isHours?a:M(this.organisation,a).toFixed(2)},monthDuration(e,s){const t=`${e}`,a=this.getDuration(t,s);return this.isHours?a:M(this.organisation,a).toFixed(2)},weekDuration(e,s){const t=this.getDuration(e,s);return this.isHours?t:M(this.organisation,t).toFixed(2)},dayDuration(e,s){if(this.dayOffMap[s]?.[`${e}`]===!0)return this.$t("timesheets.off").toUpperCase();{const t=this.getDuration(e,s);return this.isHours?t:M(this.organisation,t).toFixed(2)}},getDuration(e,s){return this.timesheet&&this.timesheet[e]&&this.timesheet[e][s]?this.timesheet[e][s]/60:"-"},isWeekend(e,s,t){const a=h(`${e}-${s}-${t}`,"YYYY-M-D");return[0,6].includes(a.day())},isDaySelected(e,s,t,a){return this.$route.params.person_id&&this.$route.params.person_id===e&&parseInt(this.$route.params.year)===s&&parseInt(this.$route.params.month)===t&&parseInt(this.$route.params.day)===a},isWeekSelected(e,s,t){return this.$route.params.person_id&&this.$route.params.person_id===e&&parseInt(this.$route.params.year)===s&&parseInt(this.$route.params.week)===t},isMonthSelected(e,s,t){return this.$route.params.person_id&&this.$route.params.person_id===e&&parseInt(this.$route.params.year)===s&&parseInt(this.$route.params.month)===t},isYearSelected(e,s){return this.$route.params.person_id&&this.$route.params.person_id===e&&parseInt(this.$route.params.year)===s},getWeekTitle(e){const s=h(this.currentYear+"-"+e,"YYYY-W"),t=s.clone().add(6,"days");return s.format("YYYY-MM-DD")+" - "+t.format("YYYY-MM-DD")},getYearDetailRoute(e,s){return{name:"timesheets-year-person",params:{person_id:e.id,year:s},query:{productionId:this.$route.query.productionId,studioId:this.$route.query.studioId}}},getMonthDetailRoute(e,s,t){return{name:"timesheets-month-person",params:{person_id:e.id,year:s,month:t},query:{productionId:this.$route.query.productionId,studioId:this.$route.query.studioId}}},getWeekDetailRoute(e,s,t){return{name:"timesheets-week-person",params:{person_id:e.id,year:s,week:t},query:{productionId:this.$route.query.productionId,studioId:this.$route.query.studioId}}},getDayDetailRoute(e,s,t,a){return{name:"timesheets-day-person",params:{person_id:e.id,year:s,month:t,day:a},query:{productionId:this.$route.query.productionId,studioId:this.$route.query.studioId}}},isDayOff(e,s){const t=`${s}`.padStart(2,"0");return this.dayOffMap[e]&&this.dayOffMap[e][t]}},watch:{route(){document.getElementsByClassName("selected").length===0&&(this.$refs.body.scrollLeft+=350)}}},se={class:"data-list"},ie={class:"datatable-wrapper",ref:"body"},re={class:"datatable"},oe={class:"datatable-head"},ne={scope:"col",class:"name datatable-row-header"},ae=["title"],ue={key:0,class:"datatable-body"},le={class:"datatable-row-header name"},de={class:"flexrow"},he={key:0,class:"has-text-centered footer-info"};function ce(e,s,t,a,n,i){const v=m("people-avatar"),I=m("people-name"),g=m("router-link"),_=m("table-info");return o(),u("div",se,[c("div",ie,[c("table",re,[c("thead",oe,[c("tr",null,[c("th",ne,d(e.$t("people.list.name")),1),t.detailLevel==="year"?(o(!0),u(f,{key:0},k(i.yearRange,r=>(o(),u("th",{key:`year-${r}`,scope:"col",class:"time year"},d(r),1))),128)):p("",!0),t.detailLevel==="month"?(o(!0),u(f,{key:1},k(i.monthRange,r=>(o(),u("th",{key:`month-${r}`,scope:"col",class:"time month"},d(i.monthToString(r)),1))),128)):p("",!0),t.detailLevel==="week"?(o(!0),u(f,{key:2},k(i.weekRange,r=>(o(),u("th",{key:`week-${r}`,scope:"col",class:"daytime",title:i.getWeekTitle(r)},d(r),9,ae))),128)):p("",!0),t.detailLevel==="day"?(o(!0),u(f,{key:3},k(i.dayRange,r=>(o(),u("th",{key:`day-${r}`,scope:"col",class:"daytime"},d(r),1))),128)):p("",!0),s[0]||(s[0]=c("th",{scope:"col",class:"actions"},null,-1))])]),t.isLoading?p("",!0):(o(),u("tbody",ue,[(o(!0),u(f,null,k(t.people,r=>(o(),u("tr",{class:"datatable-row",key:r.id},[c("th",le,[c("div",de,[y(v,{class:"flexrow-item",person:r},null,8,["person"]),y(I,{class:"flexrow-item","with-link":"",person:r},null,8,["person"])])]),t.detailLevel==="year"?(o(!0),u(f,{key:0},k(i.yearRange,l=>(o(),u("td",{key:`year-${l}-${r.id}`,class:$(["time year",{selected:i.isYearSelected(r.id,l)}])},[i.yearDuration(l,r.id)>0?(o(),S(g,{key:0,class:"duration",to:i.getYearDetailRoute(r,l)},{default:D(()=>[w(d(i.yearDuration(l,r.id)),1)]),_:2},1032,["to"])):(o(),u(f,{key:1},[w(" - ")],64))],2))),128)):p("",!0),t.detailLevel==="month"?(o(!0),u(f,{key:1},k(i.monthRange,l=>(o(),u("td",{key:`month-${l}-${r.id}`,class:$(["time month",{selected:i.isMonthSelected(r.id,t.year,l)}])},[i.monthDuration(l,r.id)>0?(o(),S(g,{key:0,class:"duration",to:i.getMonthDetailRoute(r,t.year,l)},{default:D(()=>[w(d(i.monthDuration(l,r.id)),1)]),_:2},1032,["to"])):(o(),u(f,{key:1},[w(" - ")],64))],2))),128)):p("",!0),t.detailLevel==="week"?(o(!0),u(f,{key:2},k(i.weekRange,l=>(o(),u("td",{key:`week-${l}-${r.id}`,class:$(["daytime",{selected:i.isWeekSelected(r.id,t.year,l)}])},[i.weekDuration(l,r.id)>0?(o(),S(g,{key:0,class:$(["duration",{warning:i.weekDuration(l,r.id)>5*e.organisation.hours_by_day}]),to:i.getWeekDetailRoute(r,t.year,l)},{default:D(()=>[w(d(i.weekDuration(l,r.id)),1)]),_:2},1032,["class","to"])):(o(),u(f,{key:1},[w(" - ")],64))],2))),128)):p("",!0),t.detailLevel==="day"?(o(!0),u(f,{key:3},k(i.dayRange,l=>(o(),u("td",{key:`day-${l}-${r.id}`,class:$(["daytime",{weekend:i.isWeekend(t.year,t.month,l),selected:i.isDaySelected(r.id,t.year,t.month,l)}])},[i.dayDuration(l,r.id)>0?(o(),S(g,{key:0,class:"duration",to:i.getDayDetailRoute(r,t.year,t.month,l)},{default:D(()=>[w(d(i.dayDuration(l,r.id)),1)]),_:2},1032,["to"])):i.isDayOff(r.id,l)?(o(),u(f,{key:1},[w(d(e.$t("timesheets.off").toUpperCase()),1)],64)):(o(),u(f,{key:2},[w(" - ")],64))],2))),128)):p("",!0),s[1]||(s[1]=c("td",{class:"actions"},null,-1))]))),128))]))])],512),y(_,{"is-loading":t.isLoading,"is-error":t.isError},null,8,["is-loading","is-error"]),t.isLoading?p("",!0):(o(),u("p",he,d(t.people.length)+" "+d(e.$tc("people.persons",t.people.length)),1))])}const me=x(te,[["render",ce],["__scopeId","data-v-2bf3cfae"]]),ye={name:"time-spent-task-list",components:{TableInfo:T,ProductionName:A,TaskTypeName:W},data(){return{projectNames:{}}},props:{tasks:{type:Array,default:()=>[]},isLoading:{type:Boolean,default:!1},isError:{type:Boolean,default:!1},unit:{type:String,default:"hour"}},computed:{...O(["organisation","productionMap","taskTypeMap"]),isHours(){return this.unit==="hour"},projects(){const e={};return[...this.tasks].sort(U.firstBy("project_name")).forEach(t=>{e[t.project_id]||(e[t.project_id]={}),e[t.project_id][t.task_type_id]||(e[t.project_id][t.task_type_id]=[]);let a=t.entity_name;["Shot","Sequence"].includes(t.entity_type_name)?(a=`${t.sequence_name} / ${a}`,t.episode_name&&(a=`${t.episode_name} / ${a}`)):a=`${t.entity_type_name} / ${a}`,e[t.project_id][t.task_type_id].push({id:t.task_id,project_id:t.project_id,task_type_id:t.task_type_id,name:a,duration:t.duration})}),Object.keys(e).forEach(t=>{Object.keys(e[t]).forEach(a=>{e[t][a]=N(e[t][a])})}),e}},methods:{getDuration(e){const s=e.duration/60;return this.isHours?s:M(this.organisation,s).toFixed(2)},getTaskPath(e){const s=this.productionMap.get(e.project_id);if(!s||s.project_status_name==="Closed")return"";const t=s.production_type==="tvshow",a={id:s.first_episode_id};return H(e,null,t,a,this.taskTypeMap)}},watch:{tasks(){this.projectNames=this.tasks.reduce((e,s)=>{const a=this.productionMap.get(s.project_id)?.project_status_name==="Closed"?" (closed)":"";return e[s.project_id]=s.project_name+a,e},{})}}},pe={class:"data-list"},fe={class:"aggregated-time-spents"},ge={class:"table-body"},_e={class:"datatable"},ke={class:"datatable-body"},be={class:"name"},ve={class:"duration"};function Ie(e,s,t,a,n,i){const v=m("table-info"),I=m("production-name"),g=m("task-type-name"),_=m("router-link");return o(),u("div",pe,[y(v,{"is-loading":t.isLoading,"is-error":t.isError},null,8,["is-loading","is-error"]),c("div",fe,[(o(!0),u(f,null,k(Object.keys(i.projects),r=>(o(),u("div",{key:r,class:"by-project"},[n.projectNames[r]?(o(),S(I,{key:0,production:{id:r,name:n.projectNames[r]}},null,8,["production"])):p("",!0),(o(!0),u(f,null,k(Object.keys(i.projects[r]),l=>(o(),u("div",{key:l,class:"by-task-type-id"},[y(g,{"task-type":e.taskTypeMap.get(l)},null,8,["task-type"]),c("div",ge,[c("table",_e,[c("tbody",ke,[(o(!0),u(f,null,k(i.projects[r][l],L=>(o(),u("tr",{key:L.id,class:"by-task-type-id datatable-row"},[y(_,{to:i.getTaskPath(L)},{default:D(()=>[c("td",be,d(L.name),1),c("td",ve,d(i.getDuration(L)),1)]),_:2},1032,["to"])]))),128))])])])]))),128))]))),128))])])}const we=x(ye,[["render",Ie],["__scopeId","data-v-e8427ea6"]]),Le={name:"people-timesheet-info",components:{PageTitle:P,PeopleAvatar:R,TimeSpentTaskList:we,XIcon:F},props:{person:{type:Object,default:()=>{}},year:{type:Number,default:0},month:{type:Number,default:0},week:{type:Number,default:0},day:{type:Number,default:0},isLoading:{type:Boolean,default:!1},isLoadingError:{type:Boolean,default:!1},tasks:{type:Array,default:()=>[]},dayOffCount:{type:Number,default:0},unit:{type:String,default:"hour"}},emits:["close"],computed:{startDay(){return h().day("Monday").year(this.year).week(this.week).date()},endDay(){return h().day("Monday").year(this.year).week(this.week).add(6,"days").date()},weekMonth(){return h().day("Monday").year(this.year).week(this.week).format("MMM")},monthString(){return q(this.month)},isYearInfo(){return!this.isMonthInfo&&!this.isWeekInfo&&!this.isDayInfo},isMonthInfo(){return this.$route.path.indexOf("month")>0},isWeekInfo(){return this.$route.path.indexOf("week")>0},isDayInfo(){return this.$route.path.indexOf("day")>0},closeRoute(){const e={productionId:this.$route.query.productionId,studioId:this.$route.query.studioId};return this.isYearInfo?{name:"timesheets-year",params:{year:this.year},query:e}:this.isMonthInfo?{name:"timesheets-month",params:{year:this.year,month:this.month},query:e}:this.isWeekInfo?{name:"timesheets-week",params:{year:this.year,week:this.week},query:e}:this.isDayInfo?{name:"timesheets-day",params:{year:this.year,month:this.month,day:this.day},query:e}:{name:"timesheets",query:e}}},methods:{onCloseClicked(){this.$emit("close")}}},Se={class:"people-timesheet-info"},De={class:"close"},$e={class:"flexrow"},Me={key:0,class:"info-date"},Ye={key:1,class:"info-date"},xe={key:2,class:"info-date"},Ce={key:3,class:"info-day-off"},qe={key:4,class:"info-date"};function Oe(e,s,t,a,n,i){const v=m("x-icon"),I=m("router-link"),g=m("people-avatar"),_=m("page-title"),r=m("time-spent-task-list");return o(),u("div",Se,[c("div",De,[y(I,{class:"close-button",to:i.closeRoute},{default:D(()=>[y(v)]),_:1},8,["to"])]),c("div",$e,[y(g,{class:"flexrow-item",person:t.person,"is-lazy":!1},null,8,["person"]),y(_,{class:"flexrow-item",text:t.person.full_name},null,8,["text"])]),i.isYearInfo?(o(),u("div",Me,d(t.year),1)):p("",!0),i.isMonthInfo?(o(),u("div",Ye,d(i.monthString)+" "+d(t.year),1)):i.isWeekInfo?(o(),u("div",xe,d(e.$t("main.week"))+" "+d(t.week)+", "+d(i.startDay)+" - "+d(i.endDay)+" "+d(i.weekMonth)+" "+d(t.year),1)):p("",!0),i.isDayInfo?i.isDayInfo?(o(),u("div",qe,d(t.day)+" "+d(i.monthString)+" "+d(t.year),1)):p("",!0):(o(),u("div",Ce,d(t.dayOffCount)+" "+d(e.$tc("days_off.nb_days_off",t.dayOffCount)),1)),y(r,{class:"time-spent-list",tasks:t.tasks,"is-loading":t.isLoading,"is-error":t.isLoadingError,unit:t.unit},null,8,["tasks","is-loading","is-error","unit"])])}const Te=x(Le,[["render",Oe],["__scopeId","data-v-cb660ebc"]]),Re={name:"timesheets",components:{ButtonSimple:X,ButtonHrefLink:Z,Combobox:J,ComboboxProduction:G,ComboboxStudio:ee,PageTitle:P,PeopleTimesheetList:me,PeopleTimesheetInfo:Te},data(){return{detailOptions:[{label:this.$t("main.day"),value:"day"},{label:this.$t("main.week"),value:"week"},{label:this.$t("main.month"),value:"month"},{label:this.$t("main.year"),value:"year"}],unitOptions:[{label:this.$t("main.hour"),value:"hour"},{label:this.$t("main.day"),value:"day"}],detailLevelString:"day",detailLevel:"day",productionId:"",productionIdString:"",studioId:"",studioIdString:"",yearString:`${h().year()}`,monthString:`${h().month()+1}`,unit:"hour",currentYear:h().year(),currentMonth:h().month()+1,currentWeek:h().week(),currentDay:h().date(),currentPerson:this.getCurrentPerson(),isLoading:!1,isLoadingError:!1,dayOffCount:0,isInfoLoading:!1,isInfoLoadingError:!1,showInfo:!0,tasks:[]}},async created(){this.isLoading=!0,this.loadProductions(),this.people.length||await this.loadPeople(),this.loadRoute()},mounted(){const e=this.$route.query.productionId||void 0,s=this.$route.query.studioId||void 0;(e||s)&&(this.silent=!0,this.productionId=e,this.productionIdString=e,this.studioId=s,this.studioIdString=s,this.reloadTimesheet().then(()=>{this.silent=!1}))},computed:{...O(["isCurrentUserAdmin","organisation","people","productions","personMap","timesheet"]),productionList(){const e=N([...this.productions]).map(s=>{const t=s.project_status_name==="Closed"?" (closed)":"";return{...s,name:s.name+t}});return[{id:"",name:this.$t("main.all")},...e]},filteredPeople(){return this.people.filter(e=>{const s=Object.keys(this.timesheet);let t=!1,a=0;do this.timesheet[s[a]]&&(t=this.timesheet[s[a]][e.id]!==void 0),a++;while(!t&&a<s.length);return t})},yearOptions(){const s=h().year();return Y(2018,s).map(t=>({label:t,value:`${t}`}))},monthOptions(){const e=`${h().year()}`,s=1,t=h().month()+1;let a=Y(s,12);return e===this.yearString&&(a=Y(s,t)),a.map(n=>({label:q(n),value:`${n}`}))}},methods:{...z(["loadPeople","loadProductions","loadAggregatedPersonDaysOff","loadAggregatedPersonTimeSpents","loadTimesheets"]),reloadTimesheet(){return this.isLoading=!0,this.isLoadingError=!1,this.loadTimesheets({detailLevel:this.detailLevel,year:this.currentYear,month:this.currentMonth,productionId:this.productionId,studioId:this.studioId}).then(()=>{this.isLoading=!1}).catch(e=>{console.error(e),this.isLoading=!1,this.isLoadingError=!0})},showSideInfo(){this.showInfo=!0},hideSideInfo(){this.showInfo=!1},loadRoute(){this.$options.silent=!0;const{month:e,year:s,week:t,day:a}=this.$route.params,n=`${this.productionId}`,i=`${this.studioId}`,v=`${this.detailLevel}`,I=`${this.currentMonth}`,g=`${this.currentYear}`;this.$route.path.indexOf("week")>0&&(this.detailLevel="week"),this.$route.path.indexOf("month")>0&&(this.detailLevel="month"),this.$route.path.indexOf("day")>0&&(this.detailLevel="day"),this.$route.path.indexOf("year")>0&&(this.detailLevel="year"),this.currentPerson=this.getCurrentPerson(),this.detailLevelString=this.detailLevel,e&&(this.currentMonth=Number(e),this.monthString=`${e}`),s&&(this.currentYear=Number(s),this.yearString=`${s}`),t&&(this.currentWeek=Number(t),this.weekString=`${t}`),a&&(this.currentDay=Number(a)),this.productionId=this.$route.query.productionId||"",this.studioId=this.$route.query.studioId||"";const _=v!==this.detailLevel,r=I.localeCompare(`${this.currentMonth}`)!==0,l=g.localeCompare(`${this.currentYear}`)!==0,L=n.localeCompare(`${this.productionId}`)!==0,C=i.localeCompare(`${this.studioId}`)!==0;this.$nextTick(()=>{this.$options.silent=!1}),this.$route.path.indexOf("person")>0?(this.showSideInfo(),this.loadAggregate()):this.hideSideInfo(),(this.isLoading||r||l||_||L||C)&&this.reloadTimesheet()},loadAggregate(){this.isInfoLoading=!0,this.isInfoLoadingError=!1,this.tasks=[],this.loadAggregatedPersonTimeSpents({personId:this.$route.params.person_id,detailLevel:this.detailLevel,year:this.$route.params.year,month:this.$route.params.month,week:this.$route.params.week,day:this.$route.params.day,productionId:this.productionId,studioId:this.studioId}).then(e=>(this.tasks=e.filter(s=>s.duration>0),this.loadAggregatedPersonDaysOff({personId:this.$route.params.person_id,detailLevel:this.detailLevel,year:this.$route.params.year,month:this.$route.params.month,week:this.$route.params.week}))).then(e=>{this.dayOffCount=e.length,this.isInfoLoading=!1}).catch(e=>{console.error(e),this.isInfoLoadingError=!0})},getCurrentPerson(){const e=this.$route.params.person_id;return e&&this.personMap?this.personMap.get(e):{}},exportTimesheet(){const e=["timesheet",this.detailLevel,this.currentYear];this.detailLevel==="day"&&e.push(this.currentMonth);const s=K.slugify(e.join("_"));Q.generateTimesheet(s,this.timesheet,this.filteredPeople,this.unit,this.organisation,this.detailLevel,this.currentYear,this.currentMonth,h().year(),h().month()+1,h().week())},updateRoute({productionId:e,studioId:s}){const t={...this.$route.query};e!==void 0&&(t.productionId=e||void 0),s!==void 0&&(t.studioId=s||void 0),JSON.stringify(t)!==JSON.stringify(this.$route.query)&&this.$router.push({query:t})}},watch:{detailLevelString(){this.silent||this.detailLevel!==this.detailLevelString&&(this.detailLevelString==="month"?this.$router.push({name:"timesheets-month",params:{year:this.currentYear},query:this.$route.query}):this.detailLevelString==="week"?this.$router.push({name:"timesheets-week",params:{year:this.currentYear},query:this.$route.query}):this.detailLevelString==="day"?this.$router.push({name:"timesheets-day",params:{year:this.currentYear,month:this.currentMonth},query:this.$route.query}):this.detailLevelString==="year"&&this.$router.push({name:"timesheets-year",params:{year:this.currentYear},query:this.$route.query}))},yearString(){if(this.silent)return;const e=Number(this.yearString),s=h().month();this.currentYear!==e&&(this.detailLevel==="month"?this.$router.push({name:"timesheets-month",params:{year:e},query:this.$route.query}):this.detailLevel==="week"?this.$router.push({name:"timesheets-week",params:{year:e},query:this.$route.query}):this.$router.push({name:"timesheets-day",params:{year:e,month:Math.min(Number(this.monthString),s)},query:this.$route.query}))},monthString(){this.silent||this.currentMonth!==Number(this.monthString)&&this.$router.push({name:"timesheets-day",params:{year:this.currentYear,month:Number(this.monthString)},query:this.$route.query})},productionIdString(e){this.silent||this.updateRoute({productionId:e})},studioIdString(e){this.silent||this.updateRoute({studioId:e})},$route(){this.loadRoute()}},head(){return{title:`${this.$t("timesheets.title")} - Kitsu`}}},Ne={class:"columns fixed-page"},Pe={class:"column main-column"},je={class:"timesheets page"},Ve={class:"page-header flexrow"},Ee={key:0,class:"column side-column"};function Be(e,s,t,a,n,i){const v=m("page-title"),I=m("combobox-production"),g=m("combobox-studio"),_=m("combobox"),r=m("button-simple"),l=m("button-href-link"),L=m("people-timesheet-list"),C=m("people-timesheet-info");return o(),u("div",Ne,[c("div",Pe,[c("div",je,[c("div",Ve,[y(v,{class:"flexrow-item title",text:e.$t("timesheets.title")},null,8,["text"]),y(I,{class:"flexrow-item",label:e.$t("main.production"),"production-list":i.productionList,modelValue:n.productionIdString,"onUpdate:modelValue":s[0]||(s[0]=b=>n.productionIdString=b)},null,8,["label","production-list","modelValue"]),y(g,{class:"flexrow-item field",label:e.$t("main.studio"),modelValue:n.studioIdString,"onUpdate:modelValue":s[1]||(s[1]=b=>n.studioIdString=b)},null,8,["label","modelValue"]),y(_,{class:"flexrow-item",label:e.$t("timesheets.detail_level"),options:n.detailOptions,modelValue:n.detailLevelString,"onUpdate:modelValue":s[2]||(s[2]=b=>n.detailLevelString=b)},null,8,["label","options","modelValue"]),n.detailLevelString!=="year"?(o(),S(_,{key:0,class:"flexrow-item",label:e.$t("timesheets.year"),options:i.yearOptions,modelValue:n.yearString,"onUpdate:modelValue":s[3]||(s[3]=b=>n.yearString=b)},null,8,["label","options","modelValue"])):p("",!0),n.detailLevelString==="day"?(o(),S(_,{key:1,class:"flexrow-item",label:e.$t("timesheets.month"),options:i.monthOptions,modelValue:n.monthString,"onUpdate:modelValue":s[4]||(s[4]=b=>n.monthString=b)},null,8,["label","options","modelValue"])):p("",!0),y(_,{class:"flexrow-item",label:e.$t("timesheets.unit"),options:n.unitOptions,modelValue:n.unit,"onUpdate:modelValue":s[5]||(s[5]=b=>n.unit=b)},null,8,["label","options","modelValue"]),s[6]||(s[6]=c("div",{class:"filler"},null,-1)),y(r,{class:"flexrow-item",title:e.$t("timesheets.export_timesheet"),icon:"export",onClick:i.exportTimesheet},null,8,["title","onClick"]),e.isCurrentUserAdmin?(o(),S(l,{key:2,class:"flexrow-item",title:e.$t("timesheets.export_timespents"),path:"/api/export/csv/time-spents.csv",icon:"export-lines"},null,8,["title"])):p("",!0)]),y(L,{class:"data-list",people:i.filteredPeople,timesheet:e.timesheet,"detail-level":n.detailLevel,month:n.currentMonth,year:n.currentYear,unit:n.unit,"is-loading":n.isLoading,"is-error":n.isLoadingError},null,8,["people","timesheet","detail-level","month","year","unit","is-loading","is-error"])])]),n.showInfo?(o(),u("div",Ee,[y(C,{person:n.currentPerson,production:n.productionId,year:n.currentYear,month:n.currentMonth,week:n.currentWeek,day:n.currentDay,unit:n.unit,"is-loading":n.isInfoLoading,"is-loading-error":n.isInfoLoadingError,tasks:n.tasks,"day-off-count":n.dayOffCount,onClose:i.hideSideInfo},null,8,["person","production","year","month","week","day","unit","is-loading","is-loading-error","tasks","day-off-count","onClose"])])):p("",!0)])}const Fe=x(Re,[["render",Be],["__scopeId","data-v-4b1c3613"]]);export{Fe as default};
//# sourceMappingURL=Timesheets-sqTn2RI2.js.map
