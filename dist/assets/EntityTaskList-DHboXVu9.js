import{m as M,a as T,ab as S,bU as J,bV as Q,aC as E,aL as D,bI as C,bJ as B,bN as A,aP as N,c2 as K,c4 as X,be as Z,aU as tt,a3 as et,_ as $,aT as O,Q as U,u as P,aG as L,z as I,r as u,c as o,o as n,f as _,F as k,g as v,e as s,k as b,d as g,n as Y,t as i,O as j,i as st,b2 as q,c6 as it,q as F,E as at,B as nt,aB as x,cy as V,T as rt}from"./index-DxngxtIo.js";import{P as G}from"./PeopleNameCell-D9Mlk5Nm.js";const Ze={data(){return{currentSection:"infos",zoomLevel:1,entityNavOptions:[{label:this.$t("main.label.info"),value:"infos"},{label:this.$t("main.label.chat"),value:"chat"},{label:this.$t("main.label.casting"),value:"casting"},{label:this.$t("main.label.schedule"),value:"schedule"},{label:this.$t("main.label.preview_files"),value:"preview-files"},{label:this.$t("main.label.timelog"),value:"time-logs"}],scheduleItems:[],zoomOptions:[{label:"1",value:1},{label:"2",value:2},{label:"3",value:3}]}},computed:{...T(["organisation"]),assetList(){return et.cache.assets},editList(){return tt.cache.edits},episodeList(){return Z.cache.episodes},sequenceList(){return X.cache.sequences},shotList(){return K.cache.shots},entityTabs(){return this.entityNavOptions.map(t=>({label:t.label,name:t.value}))},currentEntity(){return this[`current${S.capitalize(this.type)}`]},entityList(){return this[`${this.type}List`]||[]},previousEntity(){if(!this.currentEntity)return null;const t=this.getEntityIndex(this.currentEntity.id);return t===-1?null:t>0?this.entityList[t-1]:this.entityList[this.entityList.length-1]},nextEntity(){if(!this.currentEntity)return null;const t=this.getEntityIndex(this.currentEntity.id);return t===-1?null:t<this.entityList.length-1?this.entityList[t+1]:this.entityList[0]},previousEntityPath(){const t=this.previousEntity;return t?N(t.id,this.currentProduction.id,this.type,this.currentEpisode?.id):null},nextEntityPath(){const t=this.nextEntity;return t?N(t.id,this.currentProduction.id,this.type,this.currentEpisode?.id):null},thumbnailPath(){return`/api/pictures/originals/preview-files/${this.currentEntity.preview_file_id}.png`},isPreview(){return this.currentEntity&&this.currentEntity.preview_file_id&&this.currentEntity.preview_file_id.length>0},currentTasks(){const t=this[`current${S.capitalize(this.type)}`];return!t||!t.tasks?[]:t?t.tasks.map(e=>this.taskMap.get(e)).filter(e=>e).sort((e,r)=>{const p=this.getTaskTypePriority(e.task_type_id),c=this.getTaskTypePriority(r.task_type_id);return p-c}):[]},tasksStartDate(){return this.scheduleItems.length>0&&this.scheduleItems[0].children.length>0?C(this.scheduleItems[0].children).clone().add(-60,"days"):A(this.currentProduction.start_date)},tasksEndDate(){return this.scheduleItems.length>0&&this.scheduleItems[0].children.length>0?B(this.scheduleItems[0].children).clone().add(60,"days"):A(this.currentProduction.end_date)}},methods:{...M(["addSelectedTask","clearSelectedTasks","updateTask"]),getEntityIndex(t){return this.entityList.findIndex(e=>e.id===t)},changeTab(t){this.selectedTab=t},onEditClicked(){this.modals.edit=!0},onTaskSelected(t){this.clearSelectedTasks(),!this.currentTask||this.currentTask.id!==t.id?(this.addSelectedTask(t),this.currentTask=t):this.currentTask=null},initScheduleItems(){let t=0;const e={avatar:!1,id:"root",name:"Tasks",color:"#888",priority:1,expanded:!0,loading:!1,children:[],editable:!0},r=E(),p=this.currentTasks.map(d=>{const f=d.estimation;let y=r.clone(),h;if(!d.start_date&&!d.real_start_date&&!d.due_date&&!d.end_date)return null;d.start_date?y=D(d.start_date):d.real_start_date&&(y=D(d.real_start_date)),d.due_date?h=D(d.due_date):d.end_date?h=D(d.end_date):d.estimation&&(h=y.clone().add(f,"days")),(!h||h.isBefore(y))&&(h=y.clone().add(1,"days")),f&&(t+=d.estimation);const l=this.taskTypeMap.get(d.task_type_id);return{...d,name:l.name,startDate:y,endDate:h,expanded:!1,loading:!1,man_days:f,editable:!0,unresizable:!1,parentElement:e,color:l.color,children:[]}}).filter(d=>d!==null);let c=E(),a=E().add(1,"days");p.length>0&&(c=C(p),a=B(p)),Object.assign(e,{children:p,startDate:c,endDate:a,man_days:t}),this.scheduleItems=[e]},saveTaskScheduleItem(t){const e=J(t.startDate,t.endDate),r=Q(this.organisation,e);t.man_days=r,t.startDate&&t.endDate&&this.updateTask({taskId:t.id,data:{estimation:r,start_date:t.startDate.format("YYYY-MM-DD"),due_date:t.endDate.format("YYYY-MM-DD")}})}},watch:{$route(){const t=this.route.params[`${this.type}_id`],e=this[`current${S.capitalize(this.type)}`];e&&e.id!==t&&this.init(),this.currentSection=this.route.query.section||"infos"},currentSection(){this.currentSection==="schedule"&&this.scheduleItems.length>0&&this.$refs["schedule-widget"]&&this.$refs["schedule-widget"].scrollToDate(this.scheduleItems[0].startDate)},currentTasks:{immediate:!0,handler(){this.initScheduleItems()}},zoomLevel(){this.$refs["schedule-widget"]&&this.$refs["schedule-widget"].scrollToDate(this.scheduleItems[0].startDate)}}},ot={name:"entity-news",mixins:[I],components:{PeopleAvatar:L,Spinner:P,TaskTypeName:U,ValidationTag:O},data(){return{isLoading:!1,newsList:[]}},props:{entity:{type:Object,default:()=>{}}},mounted(){this.reset()},computed:{...T(["currentProduction","personMap","taskTypeMap","taskStatusMap"])},methods:{...M(["getEntityNews"]),buildTaskFromNews(t){return{task_status_id:t.task_status_id}},buildTaskTypeFromNews(t){return{...this.taskTypeMap.get(t.task_type_id),episode_id:t.episode_id}},hasRetakeValue(t){const e=this.taskStatusMap.get(t.task_status_id);return e?t.change&&e.is_retake:!1},hasDoneValue(t){const e=this.taskStatusMap.get(t.task_status_id);return e?t.change&&e.is_done:!1},reset(){this.entity&&(this.isLoading=!0,this.getEntityNews(this.entity.id).then(t=>{this.newsList=t.data}).catch(t=>{console.error(t),this.newsList=[]}).finally(()=>{this.isLoading=!1}))}},watch:{entity(){this.reset()}},socket:{events:{"news:new"(t){t.project_id===this.currentProduction.id&&(!this.taskTypeId||this.taskTypeId===t.task_type_id)&&(!this.taskStatusId||this.taskStatusId===t.task_status_id)&&this.reset()}}}},lt={class:"news flexcolumn"},dt={key:0,class:"has-text-centered"},ct={key:1,class:"timeline mt1"},ut={class:"date flexrow-item"},ht={class:"flexrow-item task-type-wrapper ml1"},pt={class:"flexrow-item validation-wrapper"},_t={key:2};function yt(t,e,r,p,c,a){const d=u("spinner"),f=u("people-avatar"),y=u("task-type-name"),h=u("validation-tag");return n(),o("div",lt,[c.isLoading?(n(),o("div",dt,[_(d)])):c.newsList.length?(n(),o("div",ct,[(n(!0),o(k,null,v(c.newsList,l=>(n(),o("div",{class:"timeline-entry flexrow",key:`news-${l.id}`},[s("span",{class:Y({dot:!0,red:a.hasRetakeValue(l),green:a.hasDoneValue(l)})},null,2),s("span",ut,i(t.formatFullDate(l.created_at).substring(10,0)),1),t.personMap.get(l.author_id)?(n(),b(f,{key:0,class:"flexrow-item","font-size":14,"is-link":!1,person:t.personMap.get(l.author_id),size:30},null,8,["person"])):g("",!0),s("div",ht,[_(y,{class:"task-type-name","is-static":!0,"production-id":t.currentProduction.id,"task-type":a.buildTaskTypeFromNews(l)},null,8,["production-id","task-type"])]),s("div",pt,[_(h,{"is-priority":!1,"is-static":!0,task:a.buildTaskFromNews(l),thin:!l.change},null,8,["task","thin"])])]))),128))])):(n(),o("div",_t,i(t.$t("news.no_news")),1))])}const ts=$(ot,[["render",yt],["__scopeId","data-v-11195eac"]]),mt={name:"entity-preview-file-card",components:{DownloadIcon:q,EntityPreview:st,PeopleAvatar:L},props:{previewFile:{type:Object,required:!0,default:()=>{}}},mounted(){},computed:{...T(["isCurrentUserArtist","personMap","taskMap","taskTypeMap"])},methods:{getTaskType(t){const e=this.taskMap.get(t.task_id);return this.taskTypeMap.get(e.task_type_id)},getDownloadPath(t){return`/api/${this.previewFile.extension==="mp4"?"movies":"pictures"}/originals/preview-files/${t}/download`},renderFileSize:j}},ft={class:"preview-card-data"},gt={class:"flexrow"},kt={class:"card-revision tag strong flexrow-item"},vt=["title"],wt={class:"card-extension flexrow-item mr0"},Tt={class:"flexrow mt1"},bt=["title","data-status"],$t={key:0,class:"card-file-size flexrow-item mr05"},Dt=["href","title"];function Mt(t,e,r,p,c,a){const d=u("entity-preview"),f=u("people-avatar"),y=u("download-icon");return n(),o("div",{class:"preview-card flexcolumn",key:r.previewFile.id},[_(d,{entity:{preview_file_id:r.previewFile.id,preview_file_extension:r.previewFile.extension},"empty-height":200,"empty-width":300,height:200,width:300,"is-rounded-top-border":"","show-movie":""},null,8,["entity"]),s("div",ft,[s("div",gt,[s("span",kt," v"+i(r.previewFile.revision),1),s("span",{class:"card-file-name flexrow-item",title:r.previewFile.original_name},i(r.previewFile.original_name),9,vt),e[0]||(e[0]=s("span",{class:"filler"},null,-1)),s("span",wt,i(r.previewFile.extension),1)]),s("div",Tt,[s("span",{class:"preview-status mr05",title:r.previewFile.validation_status,"data-status":r.previewFile.validation_status},null,8,bt),_(f,{class:"person",person:t.personMap.get(r.previewFile.person_id),"font-size":10,size:20},null,8,["person"]),e[1]||(e[1]=s("span",{class:"filler"},null,-1)),r.previewFile.file_size?(n(),o("span",$t,i(a.renderFileSize(r.previewFile.file_size))+"B ",1)):g("",!0),t.isCurrentUserArtist?g("",!0):(n(),o("a",{key:1,class:"download-button",href:a.getDownloadPath(r.previewFile.id),title:t.$t("playlists.actions.download_file")},[_(y,{class:"icon is-small"})],8,Dt))])])])}const St=$(mt,[["render",Mt],["__scopeId","data-v-dc88db2d"]]),Et={name:"entity-preview-files",components:{ButtonSimple:nt,DownloadIcon:q,EntityPreviewFileCard:St,EntityThumbnail:at,PeopleNameCell:G,Spinner:P,TaskTypeCell:F,TaskTypeName:U},data(){return{contactSheetMode:!1,isLoading:!1,previewFiles:[]}},props:{entity:{type:Object,default:()=>{}}},mounted(){this.entity&&(this.reset(),this.contactSheetMode=x.getBoolPreference("entity:preview-files-contact-sheet"))},computed:{...T(["currentProduction","isCurrentUserArtist","personMap","taskMap","taskTypeMap"]),taskTypePreviewFileGroups(){const t=new Map;return this.previewFiles.forEach(e=>{const r=this.getTaskType(e);t.has(r.id)||t.set(r.id,[]),t.get(r.id).push(e)}),Array.from(t.keys()).sort((e,r)=>{const p=this.taskTypeMap.get(e),c=this.taskTypeMap.get(r),a=V(p,this.currentProduction);return V(c,this.currentProduction)-a}).map(e=>t.get(e))}},methods:{...M(["getEntityPreviewFiles"]),getTaskType(t){const e=this.taskMap.get(t.task_id);return this.taskTypeMap.get(e.task_type_id)},getDownloadPath(t){const e=this.previewFiles.find(p=>p.id===t);return e?`/api/${e.extension==="mp4"?"movies":"pictures"}/originals/preview-files/${t}/download`:""},renderFileSize:j,formatDate:it,reset(){this.isLoading=!0,this.getEntityPreviewFiles(this.entity.id).then(t=>{this.previewFiles=t,this.isLoading=!1}).catch(t=>{console.error(t),this.previewFiles=[],this.isLoading=!1})}},watch:{entity(){this.entity&&this.reset()},contactSheetMode(){x.setPreference("entity:preview-files-contact-sheet",this.contactSheetMode)}}},Pt={class:"mt1 flexcolumn wrapper preview-files"},Lt={class:"buttons flexrow mb1"},It={key:0,class:"has-text-centered"},Ft={key:1},zt={key:0,class:"contact-sheet flexcolumn"},Ct={class:"flexrow-item mb1"},Bt={class:"flexrow task-types-preview mb2"},At={key:1,class:"datatable"},Nt={class:"datatable-head"},xt={class:"datatable-row-header"},Vt={class:"type"},Ot={class:"original-name"},Ut={class:"revision"},Yt={class:"extension"},jt={class:"size"},qt={class:"status"},Gt={class:"person"},Rt={class:"date"},Wt={class:"datatable-body"},Ht={class:"thumbnail"},Jt={class:"original-name"},Qt={class:"revision"},Kt={class:"extension"},Xt={class:"size"},Zt={class:"status"},te={class:"date"},ee={class:"download"},se=["href","title"],ie={key:2};function ae(t,e,r,p,c,a){const d=u("button-simple"),f=u("spinner"),y=u("task-type-name"),h=u("entity-preview-file-card"),l=u("entity-thumbnail"),w=u("task-type-cell"),R=u("people-name-cell"),W=u("download-icon");return n(),o("div",Pt,[s("div",Lt,[_(d,{class:"flexrow-item",icon:"grid","is-on":c.contactSheetMode,title:t.$t("tasks.show_contact_sheet"),onClick:e[0]||(e[0]=m=>c.contactSheetMode=!c.contactSheetMode)},null,8,["is-on","title"])]),c.isLoading?(n(),o("div",It,[_(f)])):c.previewFiles.length>0&&!c.isLoading?(n(),o("div",Ft,[c.contactSheetMode?(n(),o("div",zt,[(n(!0),o(k,null,v(a.taskTypePreviewFileGroups,(m,H)=>(n(),o("div",{key:`task-type-group-${H}`},[s("div",Ct,[_(y,{"task-type":a.getTaskType(m[0])},null,8,["task-type"])]),s("div",Bt,[(n(!0),o(k,null,v(m,z=>(n(),b(h,{key:z.id,"preview-file":z},null,8,["preview-file"]))),128))])]))),128))])):(n(),o("table",At,[s("thead",Nt,[s("tr",xt,[e[1]||(e[1]=s("th",{class:"thumbnail"},null,-1)),s("th",Vt,i(t.$t("entities.preview_files.task_type")),1),s("th",Ot,i(t.$t("entities.preview_files.original_file_name")),1),s("th",Ut,i(t.$t("entities.preview_files.revision")),1),s("th",Yt,i(t.$t("entities.preview_files.extension")),1),s("th",jt,i(t.$t("entities.preview_files.size")),1),s("th",qt,i(t.$t("entities.preview_files.status")),1),s("th",Gt,i(t.$t("entities.preview_files.uploader")),1),s("th",Rt,i(t.$t("entities.preview_files.uploaded_at")),1),e[2]||(e[2]=s("th",{class:"end-cell"},null,-1))])]),s("tbody",Wt,[(n(!0),o(k,null,v(a.taskTypePreviewFileGroups.flat(),m=>(n(),o("tr",{key:m.id,class:"datatable-row"},[s("td",Ht,[_(l,{class:"preview-thumbnail","preview-file-id":m.id,"empty-width":60,width:60,"empty-height":40,height:40},null,8,["preview-file-id"])]),_(w,{class:"type","task-type":a.getTaskType(m),"production-id":t.currentProduction.id},null,8,["task-type","production-id"]),s("td",Jt,i(m.original_name),1),s("td",Qt,i(m.revision),1),s("td",Kt,i(m.extension),1),s("td",Xt,i(a.renderFileSize(m.file_size)),1),s("td",Zt,i(m.validation_status),1),_(R,{class:"person",person:t.personMap.get(m.person_id)},null,8,["person"]),s("td",te,i(a.formatDate(m.created_at)),1),s("td",ee,[t.isCurrentUserArtist?g("",!0):(n(),o("a",{key:0,class:"button flexrow-item",href:a.getDownloadPath(m.id),title:t.$t("playlists.actions.download_file")},[_(W,{class:"icon is-small"})],8,se))])]))),128))])]))])):(n(),o("div",ie,i(t.$t("entities.preview_files.no_preview_files")),1))])}const es=$(Et,[["render",ae],["__scopeId","data-v-a67ab42e"]]),ne={name:"entity-time-logs",mixins:[I],components:{PeopleNameCell:G,Spinner:P,TaskTypeCell:F},props:{entity:{type:Object,default:()=>{}}},data(){return{logs:[],isLoading:!1}},mounted(){this.entity&&this.reset()},computed:{...T(["currentProduction","personMap","taskMap","taskTypeMap"])},methods:{...M(["getEntityTimeLogs"]),getTaskType(t){const e=this.taskMap.get(t.task_id);return this.taskTypeMap.get(e.task_type_id)},reset(){this.isLoading=!0,this.getEntityTimeLogs(this.entity.id).then(t=>{this.logs=t,this.isLoading=!1}).catch(t=>{console.error(t),this.logs=[],this.isLoading=!1})}},watch:{entity(){this.entity&&this.reset()}}},re={class:"mt1 wrapper time-logs"},oe={key:0,class:"has-text-centered"},le={key:1},de={class:"datatable"},ce={class:"datatable-head"},ue={class:"datatable-row-header"},he={class:"date"},pe={class:"person"},_e={class:"type"},ye={class:"duration"},me={class:"datatable"},fe={class:"datatable-body"},ge={class:"date"},ke={class:"duration"},ve={key:2};function we(t,e,r,p,c,a){const d=u("spinner"),f=u("people-name-cell"),y=u("task-type-cell");return n(),o("div",re,[c.isLoading?(n(),o("div",oe,[_(d)])):c.logs.length>0?(n(),o("div",le,[s("table",de,[s("thead",ce,[s("tr",ue,[s("th",he,i(t.$t("main.date")),1),s("th",pe,i(t.$t("main.person")),1),s("th",_e,i(t.$t("entities.preview_files.task_type")),1),s("th",ye,i(t.$t("tasks.fields.duration")),1),e[0]||(e[0]=s("th",{class:"end-cell"},null,-1))])])]),s("table",me,[s("tbody",fe,[(n(!0),o(k,null,v(c.logs,h=>(n(),o("tr",{key:h.id,class:"datatable-row"},[s("td",ge,i(t.formatSimpleDate(h.date)),1),_(f,{class:"person",person:t.personMap.get(h.person_id)},null,8,["person"]),_(y,{class:"type","task-type":a.getTaskType(h),"production-id":t.currentProduction.id},null,8,["task-type","production-id"]),s("td",ke,i(t.formatDuration(h.duration)),1),e[1]||(e[1]=s("td",{class:"end-cell"},null,-1))]))),128))])])])):(n(),o("div",ve,i(t.$t("entities.logs.no_logs")),1))])}const ss=$(ne,[["render",we],["__scopeId","data-v-e24c23cf"]]),Te={name:"entity-task-list",mixins:[I],components:{PeopleAvatar:L,TableInfo:rt,TaskTypeCell:F,ValidationTag:O},props:{entries:{type:Array,default:()=>[]},isLoading:{type:Boolean,default:!1},isError:{type:Boolean,default:!1}},emits:["task-selected"],data(){return{currentTask:null}},computed:{...T(["currentProduction","getTaskTypePriority","isCurrentUserClient","isCurrentUserVendor","personMap","taskMap","taskStatusMap","taskTypeMap"]),sortedEntries(){return[...this.entries].sort((t,e)=>{if(!t)return!1;const r=this.taskTypeMap.get(t.task_type_id),p=this.taskTypeMap.get(e.task_type_id),c=this.getTaskTypePriority(t.task_type_id),a=this.getTaskTypePriority(e.task_type_id);return c===a?r.name.localeCompare(p.name,void 0,{numeric:!0}):c-a})},entityProgress(){return`${this.entries.filter(e=>{const r=this.getTask(e.id);return this.taskStatusMap.get(r.task_status_id).is_done}).length} / ${this.entries.length}`},entityEstimation(){return this.entries.reduce((t,e)=>t+e.estimation,0)},entityDuration(){return this.entries.reduce((t,e)=>t+e.duration,0)},entityStartDate(){if(this.entries.length===0)return"";let t=this.entries[0].start_date;return this.entries.forEach(e=>{e.start_date<t&&(t=e.start_date)}),t?t.substring(0,10):""},entityDueDate(){if(this.entries.length===0)return"";let t=this.entries[0].due_date;return this.entries.forEach(e=>{e.due_date>t&&(t=e.due_date)}),t?t.substring(0,10):""},entityAssignees(){return[...new Set(this.entries.flatMap(t=>t.assignees))]}},methods:{onBodyScroll(t){const e=t.target;this.$refs.headerWrapper.style.left=`-${e.scrollLeft}px`},getTask(t){return typeof t=="string"?this.taskMap.get(t):t},getTaskStartDate(t){return t&&t.start_date?t.start_date.substring(0,10):""},getTaskDueDate(t){return t&&t.due_date?t.due_date.substring(0,10):""},getTaskEstimation(t){return t&&t.estimation?this.formatDuration(t.estimation):""},getTaskDuration(t){return t&&t.duration?this.formatDuration(t.duration):""},getTaskType(t){const e=this.getTask(t);return e?this.taskTypeMap.get(e.task_type_id):null},getAssignees(t){const e=this.getTask(t);return e?e.assignees:[]},selectTask(t){t.id===this.currentTask?.id?this.currentTask=null:this.currentTask=t,this.$emit("task-selected",t)}}},be={class:"data-list"},$e={class:"datatable",ref:"headerWrapper"},De={class:"datatable-head"},Me={class:"datatable-row-header"},Se={class:"type"},Ee={class:"status"},Pe={class:"estimation"},Le={class:"estimation"},Ie={class:"startdate"},Fe={class:"duedate"},ze={class:"assignees"},Ce={class:"datatable"},Be={class:"datatable-body"},Ae=["onClick"],Ne={class:"status"},xe={class:"estimation"},Ve={class:"duration"},Oe={class:"startdate"},Ue={class:"duedate"},Ye={class:"assignees"},je={key:0,class:"flexrow"},qe={class:"datatable-row total-row"},Ge={class:"estimation"},Re={class:"duration"},We={class:"startdate"},He={class:"duedate"},Je={class:"assignees"};function Qe(t,e,r,p,c,a){const d=u("table-info"),f=u("task-type-cell"),y=u("validation-tag"),h=u("people-avatar");return n(),o("div",be,[s("div",null,[s("table",$e,[s("thead",De,[s("tr",Me,[s("th",Se,i(t.$t("tasks.fields.task_type")),1),s("th",Ee,i(t.$t("tasks.fields.task_status")),1),s("th",Pe,i(t.$t("tasks.fields.estimation").substring(0,3))+". ",1),s("th",Le,i(t.$t("tasks.fields.duration").substring(0,3))+". ",1),s("th",Ie,i(t.$t("tasks.fields.start_date_short")),1),s("th",Fe,i(t.$t("tasks.fields.due_date")),1),s("th",ze,i(t.$t("tasks.fields.assignees")),1),e[1]||(e[1]=s("th",{class:"end-cell"},null,-1))])])],512)]),_(d,{"is-loading":r.isLoading,"is-error":r.isError},null,8,["is-loading","is-error"]),r.entries.length>0?(n(),o("div",{key:0,class:"task-list-body",onScrollPassive:e[0]||(e[0]=(...l)=>a.onBodyScroll&&a.onBodyScroll(...l))},[s("table",Ce,[s("tbody",Be,[(n(!0),o(k,null,v(a.sortedEntries,l=>(n(),o("tr",{key:l.id,class:Y({selected:c.currentTask&&c.currentTask.id===l.id,"datatable-row":!0,"datatable-row--selectable":!0}),onClick:w=>a.selectTask(l)},[a.getTaskType(l.id)?(n(),b(f,{key:0,class:"type","task-type":a.getTaskType(l.id),"production-id":t.currentProduction.id,"task-id":l.id},null,8,["task-type","production-id","task-id"])):g("",!0),s("td",Ne,[a.getTask(l.id)?(n(),b(y,{key:0,task:a.getTask(l.id),"is-static":!0},null,8,["task"])):g("",!0)]),s("td",xe,i(a.getTaskEstimation(l)),1),s("td",Ve,i(a.getTaskDuration(l)),1),s("td",Oe,i(a.getTaskStartDate(l)),1),s("td",Ue,i(a.getTaskDueDate(l)),1),s("td",Ye,[!t.isCurrentUserClient&&!t.isCurrentUserVendor?(n(),o("div",je,[(n(!0),o(k,null,v(a.getAssignees(l),w=>(n(),o("div",{class:"avatar-wrapper",key:w},[(n(),b(h,{class:"person-avatar flexrow-item",key:l.id+"-"+w,person:t.personMap.get(w),size:30,"font-size":15},null,8,["person"]))]))),128))])):g("",!0)]),e[2]||(e[2]=s("td",{class:"end-cell"},null,-1))],10,Ae))),128)),s("tr",qe,[s("td",null,i(t.$t("main.total")),1),s("td",null,i(a.entityProgress),1),s("td",Ge,i(t.formatDuration(a.entityEstimation)),1),s("td",Re,i(t.formatDuration(a.entityDuration)),1),s("td",We,i(a.entityStartDate),1),s("td",He,i(a.entityDueDate),1),s("td",Je,i(a.entityAssignees.length)+" "+i(t.$tc("people.persons",a.entityAssignees.length)),1),e[3]||(e[3]=s("td",{class:"end-cell"},null,-1))])])])],32)):g("",!0)])}const is=$(Te,[["render",Qe],["__scopeId","data-v-a0bd564a"]]);export{ss as E,is as a,es as b,ts as c,Ze as e};
//# sourceMappingURL=EntityTaskList-DHboXVu9.js.map
