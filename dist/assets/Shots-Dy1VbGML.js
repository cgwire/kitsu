import{_ as V,M as W,b as P,r as p,q as j,o,c as r,d,t as h,f,k as R,n as _,a7 as ee,a as Y,F as D,e as b,h as m,E as te,B as J,x as se,y as ie,g as S,v as X,w as ae,H as z,i as oe,I as L,J as ne,p as le,K as re,aY as de}from"./index-Dw-uod2x.js";import{c as Q}from"./csv-Dt0ViJ8m.js";import{s as he}from"./string-B0Tq569e.js";import{s as me}from"./search-CWIHq9c3.js";import{V as ue,T as ce,a as pe,M as fe,S as ye,C as ge,_ as Se,A as ke,b as Ce,e as Me}from"./SortingInfo-IpI7epo0.js";import{d as Te,B as De}from"./BuildFilterModal-AsQyG_6U.js";import{C as ve}from"./ComboboxDepartment-DQ8ZI2WM.js";import{D as be}from"./DeleteModal-D5nitPJZ.js";import{E as _e}from"./EditShotModal-BA5UhfFE.js";import{I as we,a as Ee}from"./ImportRenderModal-DOvk26U4.js";import{C as Fe}from"./Checkbox-in6UcoC-.js";import{F as Ie}from"./FileUpload-Cng9V_As.js";import{M as Z}from"./ModalFooter-Dmgqo0ae.js";import{T as Le}from"./TextField-EpYNDuEI.js";import{I as He}from"./InfoQuestionMark-BY4F2tI4.js";import{H as Ve}from"./HardDeleteModal-BWVmHjcR.js";import{M as Pe}from"./ManageShotsModal-BoSiVa0q.js";import{S as Ae}from"./SearchField-B9agWdMK.js";import{S as Ue}from"./SearchQueryList-eqDHREjk.js";import{C as Re}from"./ComboboxTaskType-DmSe2PuZ.js";import{T as $}from"./TableInfo-BOYXFWEz.js";import{e as Oe}from"./video-Yn96Kb74.js";import{d as Ke}from"./dom-tO7tlkHV.js";import{e as Be}from"./entity_list-4DDYrVPE.js";import{f as qe}from"./format-fMWuo47O.js";import{M as Ne,s as ze}from"./MetadataHeader-BsMptUuX.js";import{D as Qe}from"./DescriptionCell-Cm2KfHAo.js";import{R as We}from"./RowActionsCell-C9aLugox.js";import{T as Ye}from"./TableMetadataSelectorMenu-D6tnIEf6.js";import{V as Ge}from"./ValidationCell-C4EqjcEB.js";import{_ as G}from"./empty_shot-DjP6mzpU.js";import je from"./TaskInfo-r8aZr1NT.js";import"./DepartmentName-kmEXEkam.js";import"./PreviewPlayer-Dm_ANgjQ.js";import"./PlaylistPlayer-B4BWqUJa.js";import"./ComboboxSimple-Vf48mrbl.js";import"./clipboard-CQqgyZ_h.js";import"./Combobox-Z_ENhFXj.js";import"./ComboboxStyled-DrFBZe-s.js";import"./index-C15PprjC.js";import"./BaseModal-CUMx-WEe.js";import"./ComboboxStudio-D4rrWH2h.js";import"./play-qfd1WDm6.js";import"./render-GdzifLjz.js";import"./EmojiButton-BTNSPSu1.js";import"./ComboboxStatus-DknHLATL.js";import"./ConfirmModal-DnlSFX-8.js";import"./TaskTypeName-CzX-aVdj.js";import"./triangle-alert-D6jyW-fK.js";import"./ValidationTag-Dmpl-p74.js";import"./thumbs-up-Dziai4S2.js";import"./copy-C1lXCnZO.js";import"./vue.esm-bundler-44hZGVEk.js";import"./VideoViewer-C7DK8vtH.js";import"./ComboboxBoolean-DeubScUy.js";import"./check-B15weKo7.js";import"./ComboboxOptions-Cj6TJfKz.js";import"./PageTitle-CBcleFeD.js";import"./PeopleField-Dk8dxPgh.js";import"./TextareaField-Cu9GLtzh.js";import"./BooleanField-DWHGtZOu.js";import"./ColorField-COd1sznp.js";import"./trash-2-B6whY4z4.js";import"./chevron-up-DrIzzrNn.js";import"./trash-gURpboxh.js";import"./refresh-cw-D3rKtSvX.js";import"./vuedraggable.umd-DphOE8B6.js";import"./grip-vertical-Ds04I29U.js";import"./eye-ByTwqQRj.js";import"./DeleteEntities-DujJJYkA.js";import"./corner-right-up-ZAfxlICJ.js";const Je={name:"import-edl-modal",mixins:[W],components:{Checkbox:Fe,FileUpload:Ie,ModalFooter:Z,TextField:Le},emits:["cancel","confirm"],data(){return{form:{namingConvention:"${project_name}_${sequence_name}-${shot_name}",matchCase:!0},formData:null}},props:{active:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},isError:{type:Boolean,default:!1},importError:{type:Error,default:null}},mounted(){this.formData=null,this.isTVShow&&(this.form.namingConvention="${project_name}_${episode_name}-${sequence_name}-${shot_name}")},computed:{...P(["currentProduction","isTVShow"]),errorText(){let e=this.$t("main.edl.error_upload");if(this.importError&&this.importError.status===400){const t=this.importError.response;e+=` ${t.body.message}`}return e}},methods:{onFileSelected(e){this.formData=e},onConfirmClicked(){this.$emit("confirm",this.formData.get("file"),this.form.namingConvention,this.form.matchCase)},reset(){this.$refs.inputFile.reset()}},watch:{currentProduction(){this.isTVShow?this.form.namingConvention="${project_name}_${episode_name}-${sequence_name}-${shot_name}":this.form.namingConvention="${project_name}_${sequence_name}-${shot_name}"},active(){this.formData=null,this.reset()}}},Xe={class:"modal-content"},Ze={class:"box content"},$e={class:"title"};function xe(e,t,i,u,s,a){const k=p("file-upload"),g=p("text-field"),T=p("checkbox"),F=p("modal-footer"),I=j("focus");return o(),r("div",{class:_({modal:!0,"is-active":i.active})},[d("div",{class:"modal-background",onClick:t[0]||(t[0]=w=>e.$emit("cancel"))}),d("div",Xe,[d("div",Ze,[d("h1",$e,h(e.$t("main.edl.import_title")),1),d("p",null,h(e.$t("main.edl.explanation")),1),d("p",null,h(e.$t("main.edl.select_file")),1),f(k,{onFileselected:a.onFileSelected,label:e.$t("main.edl.upload_file"),accept:".edl, .xml, .otio, .fcpxml",ref:"inputFile"},null,8,["onFileselected","label"]),t[4]||(t[4]=d("br",null,null,-1)),R(f(g,{ref:"namingConventionField",label:e.$t("main.edl.naming_convention"),modelValue:s.form.namingConvention,"onUpdate:modelValue":t[1]||(t[1]=w=>s.form.namingConvention=w),onEnter:a.onConfirmClicked},null,8,["label","modelValue","onEnter"]),[[I]]),f(T,{toggle:!0,label:e.$t("main.edl.match_case"),modelValue:s.form.matchCase,"onUpdate:modelValue":t[2]||(t[2]=w=>s.form.matchCase=w)},null,8,["label","modelValue"]),f(F,{"confirm-label":e.$t("main.edl.upload_edl"),"error-text":a.errorText,"is-loading":i.isLoading,"is-disabled":s.formData===null,"is-error":i.isError,onConfirm:a.onConfirmClicked,onCancel:t[3]||(t[3]=w=>e.$emit("cancel"))},null,8,["confirm-label","error-text","is-loading","is-disabled","is-error","onConfirm"])])])],2)}const et=V(Je,[["render",xe],["__scopeId","data-v-3dbc9f78"]]),tt={name:"set-frames-from-task-type-previews-modal",mixins:[W],components:{ComboboxTaskType:Re,ModalFooter:Z},props:{active:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},isError:{type:Boolean,default:!1},errorText:{type:String,default:""}},emits:["cancel","confirm"],data(){return{taskTypeId:null}},mounted(){this.reset()},computed:{...P(["productionShotTaskTypes"]),isFormFilled(){return this.taskTypeId!==null&&this.taskTypeId!==""}},methods:{confirm(){return this.$emit("confirm",this.taskTypeId)},reset(){this.taskType=null}},watch:{active(){this.active&&this.reset()}}},st={class:"modal-content"},it={class:"box content"},at={class:"title"},ot={class:"description"};function nt(e,t,i,u,s,a){const k=p("combobox-task-type"),g=p("modal-footer");return o(),r("div",{class:_({modal:!0,"is-active":i.active})},[d("div",{class:"modal-background",onClick:t[0]||(t[0]=T=>e.$emit("cancel"))}),d("div",st,[d("div",it,[d("h1",at,h(e.$t("shots.get_frames_from_previews")),1),d("p",ot,h(e.$t("shots.get_frames_from_previews_description")),1),f(k,{"task-type-list":e.productionShotTaskTypes,placeholder:e.$t("task_types.select_task_type"),"add-placeholder":"",modelValue:s.taskTypeId,"onUpdate:modelValue":t[1]||(t[1]=T=>s.taskTypeId=T)},null,8,["task-type-list","placeholder","modelValue"]),f(g,{"error-text":e.$t("shots.get_frames_from_previews_error"),"is-error":i.isError,"is-loading":i.isLoading,"is-disabled":!a.isFormFilled,onConfirm:a.confirm,onCancel:t[2]||(t[2]=T=>e.$emit("cancel"))},null,8,["error-text","is-error","is-loading","is-disabled","onConfirm"])])])],2)}const lt=V(tt,[["render",nt],["__scopeId","data-v-6b2c3bf6"]]),rt={name:"shot-history-modal",mixins:[W],components:{TableInfo:$},props:{active:{type:Boolean,default:!1},shot:{type:Object,default:()=>{}}},emits:["cancel"],data(){return{isError:!1,isLoading:!1,versions:[]}},mounted(){this.reset()},computed:{...P(["personMap"])},methods:{...Y(["loadShotHistory"]),formatDate(e){return ee(e)},getPersonFullName(e){const t=this.personMap.get(e);return t?t.full_name:""},loadData(){return this.isError=!1,this.isLoading=!0,this.loadShotHistory(this.shot.id).then(e=>{this.versions=e,this.isLoading=!1}).catch(e=>{console.error(e),this.isLoading=!1,this.isError=!0})},reset(){this.versions=[],this.isError=!1,this.isLoading=!1}},watch:{active(){this.active&&(this.reset(),this.loadData())}}},dt={class:"modal-content"},ht={class:"box content"},mt={class:"title"},ut={class:"table",ref:"headerWrapper"},ct={class:"table-header"},pt={class:"date"},ft={class:"name"},yt={class:"frame-in"},gt={class:"frame-out"},St={class:"person table-filler"},kt={key:0,class:"table-body"},Ct={class:"table"},Mt={class:"table-body"},Tt={class:"date"},Dt={class:"name"},vt={class:"frame-in"},bt={class:"frame-out"},_t={class:"person table-filler"},wt={class:"has-text-right modal-footer"};function Et(e,t,i,u,s,a){const k=p("table-info");return o(),r("div",{class:_({modal:!0,"is-active":i.active})},[d("div",{class:"modal-background",onClick:t[0]||(t[0]=g=>e.$emit("cancel"))}),d("div",dt,[d("div",ht,[d("h1",mt,h(e.$t("shots.history")),1),d("table",ut,[d("thead",ct,[d("tr",null,[d("th",pt,h(e.$t("main.date")),1),d("th",ft,h(e.$t("shots.fields.name")),1),d("th",yt,h(e.$t("shots.fields.frame_in")),1),d("th",gt,h(e.$t("shots.fields.frame_out")),1),d("th",St,h(e.$t("shots.fields.person")),1)])])],512),s.isLoading?m("",!0):(o(),r("div",kt,[d("table",Ct,[d("tbody",Mt,[(o(!0),r(D,null,b(s.versions,g=>(o(),r("tr",{class:"shot-version",key:g.id},[d("td",Tt,h(a.formatDate(g.created_at)),1),d("td",Dt,h(g.name),1),d("td",vt,h(g.data.frame_in),1),d("td",bt,h(g.data.frame_out),1),d("td",_t,h(a.getPersonFullName(g.person_id)),1)]))),128))])])])),f(k,{"is-loading":s.isLoading,"is-error":s.isError},null,8,["is-loading","is-error"]),d("div",wt,[d("button",{onClick:t[1]||(t[1]=g=>e.$emit("cancel")),class:"button is-link"},h(e.$t("main.cancel")),1)])])])],2)}const Ft=V(rt,[["render",Et],["__scopeId","data-v-391f725b"]]),It={name:"shot-list",mixins:[Te,Ke,qe,Be,ze],components:{ButtonSimple:J,DescriptionCell:Qe,EntityThumbnail:te,MetadataHeader:Ne,MetadataInput:fe,RowActionsCell:We,TableHeaderMenu:pe,TableMetadataHeaderMenu:ce,TableMetadataSelectorMenu:Ye,TableInfo:$,ValidationCell:Ge,ValidationHeader:ue},props:{displaySettings:{type:Object,default:()=>({})},displayedShots:{type:Array,default:()=>[]},isError:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},validationColumns:{type:Array,default:()=>[]},departmentFilter:{type:Array,default:()=>[]}},emits:["add-shots","create-tasks","delete-clicked","edit-clicked","field-changed","metadata-changed","restore-clicked","scroll","sequence-clicked","shot-history"],data(){return{type:"shot",hiddenColumns:{},lastHeaderMenuDisplayed:null,lastMetadaDataHeaderMenuDisplayed:null,lastHeaderMenuDisplayedIndexInGrid:null,lastSelectedShot:null,lastSelection:null,metadataDisplayHeaders:{drawings:!0,fps:!0,frameIn:!0,frameOut:!0,frames:!0,estimation:!0,maxRetakes:!0,resolution:!0,timeSpent:!0},offsets:{},stickedColumns:{},domEvents:[["mousemove",this.onMouseMove],["touchmove",this.onMouseMove],["mouseup",this.stopBrowsing],["mouseleave",this.stopBrowsing],["touchend",this.stopBrowsing],["touchcancel",this.stopBrowsing],["keyup",this.stopBrowsing]]}},beforeUnmount(){this.removeEvents(this.domEvents)},computed:{...P(["currentProduction","currentEpisode","displayedShotsEstimation","displayedShotsCount","displayedShotsDrawings","displayedShotsFrames","displayedShotsLength","displayedShotsTimeSpent","isBigThumbnails","isCurrentUserAdmin","isCurrentUserManager","isCurrentUserClient","isCurrentUserSupervisor","isFps","isFrames","isFrameIn","isFrameOut","isPaperProduction","isMaxRetakes","isResolution","isSingleEpisode","isShotDescription","isShotEstimation","isShotTime","isShowAssignations","displaySettings.showInfos","isTVShow","nbSelectedTasks","selectedShots","selectedTasks","sequenceMap","shotFilledColumns","shotMap","shotMetadataDescriptors","shots","shotSearchText","shotSelectionGrid","taskMap","taskTypeMap","user"]),isEmptyList(){return this.displayedShots&&this.displayedShots[0].length===0&&!this.isLoading&&!this.isError&&(!this.shotSearchText||this.shotSearchText.length===0)},isEmptyTask(){return!this.isEmptyList&&!this.isLoading&&this.validationColumns&&this.validationColumns.length===0},isListVisible(){return!this.isLoading&&!this.isError&&this.displayedShotsCount>0},visibleColumns(){let e=2;return e+=!this.isCurrentUserClient&&this.displaySettings.showInfos&&this.isShotDescription?1:0,e+=this.visibleMetadataDescriptors.length,e+=!this.isCurrentUserClient&&this.displaySettings.showInfos&&this.isShotTime&&this.metadataDisplayHeaders.timeSpent?1:0,e+=!this.isCurrentUserClient&&this.displaySettings.showInfos&&this.isShotEstimation&&this.metadataDisplayHeaders.estimation?1:0,this.isPaperProduction?e+=this.displaySettings.showInfos&&this.metadataDisplayHeaders.drawings?1:0:e+=this.displaySettings.showInfos&&this.metadataDisplayHeaders.frames?1:0,e+=this.displaySettings.showInfos&&this.isFrameIn&&this.metadataDisplayHeaders.frameIn?1:0,e+=this.displaySettings.showInfos&&this.isFrameOut&&this.metadataDisplayHeaders.frameOut?1:0,e+=this.displaySettings.showInfos&&this.isFps&&this.metadataDisplayHeaders.fps?1:0,e+=this.displaySettings.showInfos&&this.isResolution&&this.metadataDisplayHeaders.resolution?1:0,e+=this.displaySettings.showInfos&&this.isMaxRetakes&&this.metadataDisplayHeaders.max_retakes?1:0,e+=this.displayedValidationColumns.length,e},displayedValidationColumns(){return this.validationColumns.filter(e=>this.shotFilledColumns[e]&&(!this.hiddenColumns[e]||this.displaySettings.showInfos))},metadataDescriptors(){return this.shotMetadataDescriptors},localStorageStickKey(){return`stick-shots-${this.currentProduction?.id}`}},methods:{...Y(["displayMoreShots","setShotSelection"]),formatToTimecode:Oe,isSelected(e,t,i){const u=this.getIndex(e,t);return this.shotSelectionGrid[u][i]},isCastingReady(e,t){if(!e.nb_entities_out)return!1;const i=this.taskMap.get(e.validations.get(t));return i&&i.nb_assets_ready>0&&e.nb_entities_out===i.nb_assets_ready},castingTitle(e,t){if(!e.nb_entities_out)return"";const i=this.taskMap.get(e.validations.get(t));return i?i.nb_assets_ready+" / "+e.nb_entities_out+" assets ready":""},toggleLine(e,t){const i=t.target.checked,u=[e];if(i&&this.shiftKeyPressed&&this.lastSelectedShot){const s=this.displayedShots.flat();let a=s.findIndex(g=>g.id===this.lastSelectedShot.id),k=s.findIndex(g=>g.id===e.id);a>k&&([a,k]=[k,a]),a>=0&&k>=0&&ie(a,k).forEach(g=>{u.push(s[g])})}i&&(this.lastSelectedShot=e),u.forEach(s=>{this.setShotSelection({shot:s,selected:i})})},onBodyScroll(e){if(!this.$refs.body)return;const t=e.target;this.$emit("scroll",t.scrollTop),this.$refs.body.scrollHeight-this.$refs.body.offsetHeight<t.scrollTop+100&&this.loadMoreShots()},loadMoreShots(){this.displayMoreShots()},shotPath(e){return this.getPath("shot",e)},getPath(e,t){const i={name:e,params:{production_id:this.currentProduction?.id}};return this.isTVShow&&this.currentEpisode&&(i.name=`episode-${e}`,i.params.episode_id=this.currentEpisode.id),t&&(i.params.shot_id=t),i},onInputKeyUp(e,t,i){const u=this.visibleMetadataDescriptors.length+4,s=this.displayedShotsCount;return this.keyMetadataNavigation(u,s,t,i,e.key),this.pauseEvent(e)},onNbFramesChanged(e,t){const i=this.selectedShots.has(e.id)?this.selectedShots:[e],u=this.sanitizeIntegerLight(t);i.forEach(s=>{this.$emit("field-changed",{entry:s,fieldName:"nb_frames",value:u})})},getIndex(e,t){return this.getEntityLineNumber(this.displayedShots,e,t)},toggleStickedColumns(e){const t=!this.stickedColumns[e];this.stickedColumns={...this.stickedColumns,[e]:t},se.setObjectPreference(this.localStorageStickKey,this.stickedColumns)},stickColumnClicked(){this.toggleStickedColumns(this.lastHeaderMenuDisplayed),this.showHeaderMenu()},metadataStickColumnClicked(e){this.toggleStickedColumns(this.lastMetadaDataHeaderMenuDisplayed),this.showMetadataHeaderMenu(this.lastMetadaDataHeaderMenuDisplayed,e)},updateOffsets(){this.isLoading||this.$nextTick(()=>{let e=this.$refs["th-shot"].clientWidth;if(this.offsets={},this.displaySettings.showInfos)for(let t=0;t<this.stickedVisibleMetadataDescriptors.length;t++)this.offsets[`editor-${t}`]=e,e+=this.$refs[`editor-${t}`][0].$el.clientWidth;for(let t=0;t<this.stickedDisplayedValidationColumns.length;t++)this.offsets[`validation-${t}`]=e,e+=this.$refs[`validation-${t}`][0].$el.clientWidth})}},watch:{displayedShots(){this.$options.lineIndex={}},validationColumns(){this.initHiddenColumns(this.validationColumns,this.hiddenColumns)},stickedColumns(){this.updateOffsets()},isLoading(){this.updateOffsets()},isBigThumbnails(){this.updateOffsets()}}},Lt={class:"data-list"},Ht={class:"datatable multi-section"},Vt={class:"datatable-head",id:"datatable-shot"},Pt={scope:"col",class:"name shot-name datatable-row-header",ref:"th-shot"},At={class:"flexrow"},Ut={class:"flexrow-item"},Rt={key:1,scope:"col",class:"description selectable"},Ot=["title"],Kt={key:4,class:"drawings number-cell",scope:"col"},Bt={key:5,class:"frames number-cell",scope:"col"},qt={key:6,scope:"col",class:"framein number-cell"},Nt={key:7,scope:"col",class:"frameout number-cell"},zt={key:8,scope:"col",class:"fps number-cell"},Qt={key:9,scope:"col",class:"max-retakes number-cell"},Wt={key:10,scope:"col",class:"resolution"},Yt={scope:"col",class:"actions",ref:"actionsSection"},Gt={class:"datatable-type-header"},jt=["colspan"],Jt=["onClick"],Xt={class:"flexrow"},Zt=["checked","onInput"],$t=["title"],xt={key:2,class:"time-spent selectable number-cell"},es={key:3,class:"estimation selectable number-cell"},ts={key:4,class:"frames number-cell"},ss=["value","onInput","onKeyup"],is={key:1,class:"metadata-value selectable"},as={key:5,class:"drawings number-cell"},os={key:0,class:"metadata-value selectable"},ns=["value","onInput","onKeyup"],ls={key:2,class:"metadata-value selectable"},rs={key:0,class:"metadata-value selectable"},ds=["value","onInput","onKeyup"],hs={key:2,class:"metadata-value selectable"},ms={key:8,class:"fps number-cell"},us=["value","onInput","onKeyup"],cs={key:1,class:"metadata-value selectable"},ps={key:9,class:"max-retakes number-cell"},fs=["value","onInput","onKeyup"],ys={key:1,class:"metadata-value selectable"},gs={key:10,class:"resolution"},Ss=["value","onInput","onKeyup"],ks={key:1,class:"metadata-value selectable"},Cs=["title"],Ms={key:14,class:"actions"},Ts={key:0,class:"has-text-centered"},Ds={class:"info"},vs={key:1,class:"has-text-centered"},bs={class:"info"},_s={key:2,class:"has-text-centered nb-shots"},ws={key:0},Es={key:1},Fs={key:2};function Is(e,t,i,u,s,a){const k=p("table-header-menu"),g=p("table-metadata-header-menu"),T=p("button-simple"),F=p("metadata-header"),I=p("validation-header"),w=p("table-metadata-selector-menu"),O=p("entity-thumbnail"),K=p("router-link"),A=p("metadata-input"),U=p("validation-cell"),B=p("description-cell"),H=p("row-actions-cell"),q=p("table-info"),N=j("columns-resizable");return o(),r("div",Lt,[d("div",{class:"datatable-wrapper",ref:"body",onScrollPassive:t[22]||(t[22]=(...c)=>a.onBodyScroll&&a.onBodyScroll(...c))},[f(k,{ref:"headerMenu","is-minimized":s.hiddenColumns[s.lastHeaderMenuDisplayed],"is-edit-allowed":e.isCurrentUserManager,"is-sticked":s.stickedColumns[s.lastHeaderMenuDisplayed],onMinimizeClicked:t[0]||(t[0]=c=>e.onMinimizeColumnToggled()),onDeleteAllClicked:t[1]||(t[1]=c=>e.onDeleteAllTasksClicked()),onSortByClicked:t[2]||(t[2]=c=>e.onSortByTaskTypeClicked()),onSelectColumn:t[3]||(t[3]=c=>e.onSelectColumn("shot")),onToggleStick:t[4]||(t[4]=c=>a.stickColumnClicked())},null,8,["is-minimized","is-edit-allowed","is-sticked"]),f(g,{ref:"headerMetadataMenu","is-edit-allowed":e.isMetadataColumnEditAllowed(s.lastMetadaDataHeaderMenuDisplayed),"is-sticked":s.stickedColumns[s.lastMetadaDataHeaderMenuDisplayed],onEditClicked:t[5]||(t[5]=c=>e.onEditMetadataClicked()),onDeleteClicked:t[6]||(t[6]=c=>e.onDeleteMetadataClicked()),onSortByClicked:t[7]||(t[7]=c=>e.onSortByMetadataClicked()),onToggleStick:t[8]||(t[8]=c=>a.metadataStickColumnClicked(c))},null,8,["is-edit-allowed","is-sticked"]),d("table",Ht,[R((o(),r("thead",Vt,[d("tr",null,[d("th",Pt,[d("div",At,[d("span",Ut,h(e.$t("shots.fields.name")),1),(e.isCurrentUserManager||e.isCurrentUserSupervisor)&&!i.isLoading?(o(),S(T,{key:0,class:"is-small flexrow",icon:"plus",text:"",onClick:e.onAddMetadataClicked},null,8,["onClick"])):m("",!0)])],512),(o(!0),r(D,null,b(e.stickedVisibleMetadataDescriptors,(c,y)=>(o(),S(F,{ref_for:!0,ref:`editor-${y}`,key:c.id,descriptor:c,left:s.offsets["editor-"+y]?`${s.offsets["editor-"+y]}px`:"0",onShowMetadataHeaderMenu:n=>e.showMetadataHeaderMenu(c.id,n),"is-stick":"",style:{"z-index":1001}},null,8,["descriptor","left","onShowMetadataHeaderMenu"]))),128)),i.isLoading?m("",!0):(o(!0),r(D,{key:0},b(e.stickedDisplayedValidationColumns,(c,y)=>(o(),S(I,{ref_for:!0,ref:`validation-${y}`,key:c,"hidden-columns":s.hiddenColumns,"column-id":c,title:e.taskTypeMap.get(c).name,"validation-style":e.getValidationStyle(c),left:s.offsets["validation-"+y]?`${s.offsets["validation-"+y]}px`:"0",type:"assets",onShowHeaderMenu:n=>e.showHeaderMenu(c,y,n),"is-stick":""},null,8,["hidden-columns","column-id","title","validation-style","left","onShowHeaderMenu"]))),128)),!e.isCurrentUserClient&&i.displaySettings.showInfos&&e.isShotDescription?(o(),r("th",Rt,h(e.$t("shots.fields.description")),1)):m("",!0),!e.isCurrentUserClient&&i.displaySettings.showInfos&&e.isShotTime&&s.metadataDisplayHeaders.timeSpent?(o(),r("th",{key:2,scope:"col",ref:"th-spent",class:"time-spent number-cell"},h(e.$t("shots.fields.time_spent")),513)):m("",!0),!e.isCurrentUserClient&&i.displaySettings.showInfos&&e.isShotEstimation&&s.metadataDisplayHeaders.estimation?(o(),r("th",{key:3,scope:"col",class:"estimation number-cell",ref:"th-spent",title:e.$t("main.estimation")},h(e.$t("main.estimation_short")),9,Ot)):m("",!0),i.displaySettings.showInfos&&e.isPaperProduction&&s.metadataDisplayHeaders.drawings?(o(),r("th",Kt,h(e.$t("shots.fields.nb_drawings")),1)):m("",!0),e.isFrames&&i.displaySettings.showInfos&&!e.isPaperProduction&&s.metadataDisplayHeaders.frames?(o(),r("th",Bt,h(e.$t("shots.fields.nb_frames")),1)):m("",!0),e.isFrameIn&&i.displaySettings.showInfos&&s.metadataDisplayHeaders.frameIn?(o(),r("th",qt,h(e.$t("shots.fields.frame_in")),1)):m("",!0),e.isFrameOut&&i.displaySettings.showInfos&&s.metadataDisplayHeaders.frameOut?(o(),r("th",Nt,h(e.$t("shots.fields.frame_out")),1)):m("",!0),e.isFps&&i.displaySettings.showInfos&&s.metadataDisplayHeaders.fps?(o(),r("th",zt,h(e.$t("shots.fields.fps")),1)):m("",!0),e.isMaxRetakes&&i.displaySettings.showInfos&&s.metadataDisplayHeaders.maxRetakes?(o(),r("th",Qt,h(e.$t("shots.fields.max_retakes")),1)):m("",!0),e.isResolution&&i.displaySettings.showInfos&&s.metadataDisplayHeaders.resolution?(o(),r("th",Wt,h(e.$t("shots.fields.resolution")),1)):m("",!0),i.displaySettings.showInfos?(o(!0),r(D,{key:11},b(e.nonStickedVisibleMetadataDescriptors,c=>(o(),S(F,{key:c.id,descriptor:c,onShowMetadataHeaderMenu:y=>e.showMetadataHeaderMenu(c.id,y)},null,8,["descriptor","onShowMetadataHeaderMenu"]))),128)):m("",!0),i.isLoading?m("",!0):(o(!0),r(D,{key:12},b(e.nonStickedDisplayedValidationColumns,(c,y)=>(o(),S(I,{key:c,"hidden-columns":s.hiddenColumns,"column-id":c,"validation-style":e.getValidationStyle(c),type:"shots",onShowHeaderMenu:n=>e.showHeaderMenu(c,y,n)},null,8,["hidden-columns","column-id","validation-style","onShowHeaderMenu"]))),128)),d("th",Yt,[e.isCurrentUserManager?(o(),S(T,{key:0,class:_({"is-small":!0,highlighted:a.isEmptyTask}),icon:"plus",text:e.$t("tasks.create_tasks"),onClick:t[9]||(t[9]=c=>e.$emit("create-tasks"))},null,8,["class","text"])):m("",!0),i.displaySettings.showInfos?R((o(),S(w,{key:1,descriptors:e.shotMetadataDescriptors,namespace:"shots",exclude:{frames:!e.isFrames,frameIn:!e.isFrameIn,frameOut:!e.isFrameOut,fps:!e.isFps,estimation:!e.isShotEstimation,timeSpent:!e.isShotTime,resolution:!e.isResolution,max_retakes:!e.isMaxRetakes},modelValue:s.metadataDisplayHeaders,"onUpdate:modelValue":t[10]||(t[10]=c=>s.metadataDisplayHeaders=c)},null,8,["descriptors","exclude","modelValue"])),[[X,e.columnSelectorDisplayed]]):m("",!0),i.displaySettings.showInfos?(o(),S(T,{key:2,class:"is-small is-pulled-right mr05",icon:"down",onClick:e.toggleColumnSelector},null,8,["onClick"])):m("",!0)],512)])])),[[N]]),!i.isLoading&&a.isListVisible?(o(!0),r(D,{key:0},b(i.displayedShots,(c,y)=>(o(),r("tbody",{class:"datatable-body",key:e.getGroupKey(c,y,"sequence_id"),onMousedown:t[20]||(t[20]=(...n)=>e.startBrowsing&&e.startBrowsing(...n)),onTouchstart:t[21]||(t[21]=(...n)=>e.startBrowsing&&e.startBrowsing(...n))},[d("tr",Gt,[d("th",{scope:"rowgroup",colspan:a.visibleColumns},[d("div",{class:"datatable-row-header pointer",onClick:n=>e.$emit("sequence-clicked",c[0].sequence_name)},h(c[0]?c[0].sequence_name:""),9,Jt)],8,jt)]),(o(!0),r(D,null,b(c,(n,C)=>(o(),r("tr",{class:_(["datatable-row",{canceled:n.canceled}]),key:n.id},[d("th",{scope:"row",class:_({"datatable-row-header":!0,"shot-name":!0,name:!0,bold:!n.canceled})},[d("div",Xt,[e.isCurrentUserManager?(o(),r("input",{key:0,type:"checkbox",class:"mr1",checked:e.selectedShots.has(n.id)||null,onInput:l=>a.toggleLine(n,l)},null,40,Zt)):m("",!0),f(O,{entity:n,width:i.displaySettings.bigThumbnails?150:50,height:i.displaySettings.bigThumbnails?100:33,"empty-width":i.displaySettings.bigThumbnails?150:50,"empty-height":i.displaySettings.bigThumbnails?100:34},null,8,["entity","width","height","empty-width","empty-height"]),e.isCurrentUserClient?(o(),r(D,{key:2},[z(h(n.name),1)],64)):(o(),S(K,{key:1,tabindex:"-1",title:n.full_name,to:a.shotPath(n.id)},{default:ae(()=>[z(h(n.name),1)]),_:2},1032,["title","to"]))])],2),(o(!0),r(D,null,b(e.stickedVisibleMetadataDescriptors,(l,M)=>(o(),r("td",{ref_for:!0,ref:`editor-${a.getIndex(C,y)}-${M}`,class:"metadata-descriptor datatable-row-header",title:n.data?n.data[l.field_name]:"",style:oe({"z-index":1e3-C-y*100,left:s.offsets["editor-"+M]?`${s.offsets["editor-"+M]}px`:"0"}),key:n.id+"-"+l.id},[f(A,{entity:n,descriptor:l,indexes:{i:C,j:M,k:y},onMetadataChanged:t[11]||(t[11]=E=>e.$emit("metadata-changed",E))},null,8,["entity","descriptor","indexes"])],12,$t))),128)),i.isLoading?m("",!0):(o(!0),r(D,{key:0},b(e.stickedDisplayedValidationColumns,(l,M)=>(o(),S(U,{ref_for:!0,ref:`validation-${a.getIndex(C,y)}-${M}`,key:l+"-"+n.id,class:_({canceled:n.canceled,"validation-cell":!s.hiddenColumns[l],"hidden-validation-cell":s.hiddenColumns[l],"datatable-row-header":!0}),canceled:n.canceled,column:e.taskTypeMap.get(l),"column-y":M,"contact-sheet":i.displaySettings.contactSheetMode,entity:n,"is-assignees":i.displaySettings.showAssignations,"is-casting-ready":a.isCastingReady(n,l),"is-static":!0,left:s.offsets["validation-"+M]?`${s.offsets["validation-"+M]}px`:"0",minimized:s.hiddenColumns[l],"row-x":a.getIndex(C,y),selected:a.isSelected(C,y,M),sticked:!0,"task-test":e.taskMap.get(n.validations.get(l)),onSelect:t[12]||(t[12]=E=>e.onTaskSelected(E,!0)),onUnselect:t[13]||(t[13]=E=>e.onTaskUnselected(E,!0))},null,8,["class","canceled","column","column-y","contact-sheet","entity","is-assignees","is-casting-ready","left","minimized","row-x","selected","task-test"]))),128)),!e.isCurrentUserClient&&i.displaySettings.showInfos&&e.isShotDescription?(o(),S(B,{key:1,class:"description",entry:n,editable:e.isCurrentUserManager,onDescriptionChanged:l=>e.onDescriptionChanged(n,l)},null,8,["entry","editable","onDescriptionChanged"])):m("",!0),!e.isCurrentUserClient&&i.displaySettings.showInfos&&e.isShotTime&&s.metadataDisplayHeaders.timeSpent?(o(),r("td",xt,h(e.formatDuration(n.timeSpent)),1)):m("",!0),!e.isCurrentUserClient&&i.displaySettings.showInfos&&e.isShotEstimation&&s.metadataDisplayHeaders.estimation?(o(),r("td",es,h(e.formatDuration(n.estimation)),1)):m("",!0),e.isFrames&&i.displaySettings.showInfos&&s.metadataDisplayHeaders.frames?(o(),r("td",ts,[e.isCurrentUserManager?(o(),r("input",{key:0,class:"input-editor",step:"1",value:n.nb_frames,type:"number",min:"0",onInput:l=>a.onNbFramesChanged(n,l.target.value),onKeydown:t[14]||(t[14]=(...l)=>e.onNumberFieldKeyDown&&e.onNumberFieldKeyDown(...l)),onKeyup:L(l=>a.onInputKeyUp(l,a.getIndex(C,y),e.descriptorLength),["ctrl"])},null,40,ss)):(o(),r("span",is,h(n.nb_frames),1))])):m("",!0),i.displaySettings.showInfos&&e.isPaperProduction&&s.metadataDisplayHeaders.drawings?(o(),r("td",as,h(n.nb_drawings),1)):m("",!0),e.isFrameIn&&i.displaySettings.showInfos&&s.metadataDisplayHeaders.frameIn?(o(),r("td",{key:6,class:_(["framein number-cell",{"timecode-cell":i.displaySettings.inOutTimecode}])},[i.displaySettings.inOutTimecode?(o(),r("span",os,h(a.formatToTimecode(e.getMetadataFieldValue({field_name:"frame_in"},n))),1)):e.isCurrentUserManager?(o(),r("input",{key:1,class:"input-editor",step:"1",type:"number",min:"0",value:e.getMetadataFieldValue({field_name:"frame_in"},n),onInput:l=>e.onMetadataFieldChanged(n,{field_name:"frame_in",data_type:"number"},l),onKeydown:t[15]||(t[15]=(...l)=>e.onNumberFieldKeyDown&&e.onNumberFieldKeyDown(...l)),onKeyup:L(l=>a.onInputKeyUp(l,a.getIndex(C,y),e.descriptorLength+1),["ctrl"])},null,40,ns)):(o(),r("span",ls,h(e.getMetadataFieldValue({field_name:"frame_in"},n)),1))],2)):m("",!0),e.isFrameOut&&i.displaySettings.showInfos&&s.metadataDisplayHeaders.frameOut?(o(),r("td",{key:7,class:_(["frameout number-cell",{"timecode-cell":i.displaySettings.inOutTimecode}])},[i.displaySettings.inOutTimecode?(o(),r("span",rs,h(a.formatToTimecode(e.getMetadataFieldValue({field_name:"frame_out"},n))),1)):e.isCurrentUserManager?(o(),r("input",{key:1,class:"input-editor",step:"1",type:"number",min:"0",value:e.getMetadataFieldValue({field_name:"frame_out"},n),onKeydown:t[16]||(t[16]=(...l)=>e.onNumberFieldKeyDown&&e.onNumberFieldKeyDown(...l)),onInput:l=>e.onMetadataFieldChanged(n,{field_name:"frame_out",data_type:"number"},l),onKeyup:L(l=>a.onInputKeyUp(l,a.getIndex(C,y),e.descriptorLength+2),["ctrl"])},null,40,ds)):(o(),r("span",hs,h(e.getMetadataFieldValue({field_name:"frame_out"},n)),1))],2)):m("",!0),e.isFps&&i.displaySettings.showInfos&&s.metadataDisplayHeaders.fps?(o(),r("td",ms,[e.isCurrentUserManager?(o(),r("input",{key:0,class:"input-editor",min:"0",max:"1000",step:"0.001",type:"number",value:e.getMetadataFieldValue({field_name:"fps"},n),onKeydown:t[17]||(t[17]=(...l)=>e.onNumberFieldKeyDown&&e.onNumberFieldKeyDown(...l)),onInput:l=>e.onMetadataFieldChanged(n,{field_name:"fps",data_type:"number"},l),onKeyup:L(l=>a.onInputKeyUp(l,a.getIndex(C,y),e.descriptorLength+3),["ctrl"])},null,40,us)):(o(),r("span",cs,h(e.getMetadataFieldValue({field_name:"fps"},n)),1))])):m("",!0),e.isMaxRetakes&&i.displaySettings.showInfos&&s.metadataDisplayHeaders.maxRetakes?(o(),r("td",ps,[e.isCurrentUserManager?(o(),r("input",{key:0,class:"input-editor",type:"number",step:"1",value:e.getMetadataFieldValue({field_name:"max_retakes"},n),onKeydown:t[18]||(t[18]=(...l)=>e.onNumberFieldKeyDown&&e.onNumberFieldKeyDown(...l)),onInput:l=>e.onMetadataFieldChanged(n,{field_name:"max_retakes",data_type:"number"},l),onKeyup:L(l=>a.onInputKeyUp(l,a.getIndex(C,y),e.descriptorLength+3),["ctrl"])},null,40,fs)):(o(),r("span",ys,h(e.getMetadataFieldValue({field_name:"max_retakes"},n)),1))])):m("",!0),e.isResolution&&i.displaySettings.showInfos&&s.metadataDisplayHeaders.resolution?(o(),r("td",gs,[e.isCurrentUserManager?(o(),r("input",{key:0,class:_({"input-editor":!0,error:!e.isValidResolution(n)}),value:e.getMetadataFieldValue({field_name:"resolution"},n),onInput:l=>e.onMetadataFieldChanged(n,{field_name:"resolution"},l),onKeyup:L(l=>a.onInputKeyUp(l,a.getIndex(C,y),e.descriptorLength+3),["ctrl"])},null,42,Ss)):(o(),r("span",ks,h(e.getMetadataFieldValue({field_name:"resolution"},n)),1))])):m("",!0),i.displaySettings.showInfos?(o(!0),r(D,{key:11},b(e.nonStickedVisibleMetadataDescriptors,(l,M)=>(o(),r("td",{class:"metadata-descriptor",title:n.data?n.data[l.field_name]:"",key:n.id+"-"+l.id},[f(A,{entity:n,descriptor:l,indexes:{i:C,j:M,k:y},onMetadataChanged:t[19]||(t[19]=E=>e.$emit("metadata-changed",E))},null,8,["entity","descriptor","indexes"])],8,Cs))),128)):m("",!0),i.isLoading?m("",!0):(o(!0),r(D,{key:12},b(e.nonStickedDisplayedValidationColumns,(l,M)=>(o(),S(U,{ref_for:!0,ref:`validation-${a.getIndex(C,y)}-${M+e.stickedDisplayedValidationColumns.length}`,class:_({"validation-cell":!s.hiddenColumns[l],"hidden-validation-cell":s.hiddenColumns[l]}),canceled:n.canceled,key:`${l}-${n.id}`,column:e.taskTypeMap.get(l),"contact-sheet":i.displaySettings.contactSheetMode,entity:n,"task-test":e.taskMap.get(n.validations?n.validations.get(l):null),minimized:s.hiddenColumns[l],selected:a.isSelected(C,y,M+e.stickedDisplayedValidationColumns.length),"row-x":a.getIndex(C,y),"column-y":M,"is-assignees":i.displaySettings.showAssignations,"is-casting-ready":a.isCastingReady(n,l),"casting-title":a.castingTitle(n,l),onSelect:e.onTaskSelected,onUnselect:e.onTaskUnselected},null,8,["class","canceled","column","contact-sheet","entity","task-test","minimized","selected","row-x","column-y","is-assignees","is-casting-ready","casting-title","onSelect","onUnselect"]))),128)),e.isCurrentUserManager?(o(),S(H,{key:13,entry:n,"hide-history":!1,onDeleteClicked:l=>e.$emit("delete-clicked",n),onEditClicked:l=>e.$emit("edit-clicked",n),onHistoryClicked:l=>e.$emit("shot-history",n),onRestoreClicked:l=>e.$emit("restore-clicked",n)},null,8,["entry","onDeleteClicked","onEditClicked","onHistoryClicked","onRestoreClicked"])):(o(),r("td",Ms))],2))),128))],32))),128)):m("",!0)])],544),f(q,{"is-loading":i.isLoading,"is-error":i.isError},null,8,["is-loading","is-error"]),a.isEmptyList&&!e.isCurrentUserClient&&!i.isLoading?(o(),r("div",Ts,[t[24]||(t[24]=d("p",{class:"info"},[d("img",{src:G})],-1)),d("p",Ds,h(e.$t("shots.empty_list")),1),f(T,{class:"level-item big-button",text:e.$t("shots.new_shots"),onClick:t[23]||(t[23]=c=>e.$emit("add-shots"))},null,8,["text"])])):m("",!0),a.isEmptyList&&e.isCurrentUserClient&&!i.isLoading?(o(),r("div",vs,[t[25]||(t[25]=d("p",{class:"info"},[d("img",{src:G})],-1)),d("p",bs,h(e.$t("shots.empty_list_client")),1)])):m("",!0),!a.isEmptyList&&!i.isLoading?(o(),r("p",_s,[z(h(e.displayedShotsLength)+" "+h(e.$tc("shots.number",e.displayedShotsLength))+" ",1),e.displayedShotsFrames?(o(),r("span",ws," - "+h(e.displayedShotsFrames)+" "+h(e.$tc("main.nb_frames",e.displayedShotsFrames)),1)):m("",!0),e.isPaperProduction?(o(),r("span",Es," - "+h(e.displayedShotsDrawings)+" "+h(e.$tc("main.nb_drawings",e.displayedShotsDrawings)),1)):m("",!0),e.displayedShotsTimeSpent>0||e.displayedShotsEstimation>0?(o(),r("span",Fs," ("+h(e.formatDuration(e.displayedShotsTimeSpent))+" "+h(e.isDurationInHours?e.$tc("main.hours_spent",e.formatDuration(e.displayedShotsTimeSpent,!1)):e.$tc("main.days_spent",e.formatDuration(e.displayedShotsTimeSpent,!1)))+", "+h(e.formatDuration(e.displayedShotsEstimation))+" "+h(e.isDurationInHours?e.$tc("main.hours_estimated",e.formatDuration(e.displayedShotsEstimation,!1)):e.$tc("main.man_days",e.formatDuration(e.displayedShotsEstimation,!1)))+") ",1)):m("",!0)])):m("",!0)])}const Ls=V(It,[["render",Is],["__scopeId","data-v-8d4a16db"]]),Hs={name:"shots",mixins:[me,Me],components:{AddMetadataModal:Ce,AddThumbnailsModal:ke,BuildFilterModal:De,ButtonSimple:J,ComboboxDepartment:ve,ComboboxDisplayOptions:Se,CreateTasksModal:ge,DeleteModal:be,EditShotModal:_e,ImportModal:Ee,ImportEdlModal:et,HardDeleteModal:Ve,ManageShotsModal:Pe,ImportRenderModal:we,InfoQuestionMark:He,SearchField:Ae,SearchQueryList:Ue,SetFramesFromTaskTypePreviewsModal:lt,SortingInfo:ye,ShotHistoryModal:Ft,ShotList:Ls,TaskInfo:je},data(){return{type:"shot",deleteAllTasksLockText:null,descriptorToEdit:{},displaySettings:{bigThumbnails:!1,contactSheetMode:!1,inOutTimecode:!1,showAssignations:!0,showInfos:!0},formData:null,historyShot:{},initialLoading:!0,optionalColumns:["Description","Nb Frames","Frame In","Frame Out","FPS","Resolution"],genericColumns:["Metadata column name (text value)","Task type name (task status name value)","Task type name + comment (text value)"],parsedCSV:[],selectedDepartment:"ALL",shotToDelete:null,shotToEdit:null,shotToRestore:null,taskTypeForTaskDeletion:null,departmentFilter:[],modals:{isAddMetadataDisplayed:!1,isAddThumbnailsDisplayed:!1,isBuildFilterDisplayed:!1,isCreateTasksDisplayed:!1,isDeleteDisplayed:!1,isDeleteMetadataDisplayed:!1,isDeleteAllTasksDisplayed:!1,isSetFramesDisplayed:!1,isImportRenderDisplayed:!1,isImportDisplayed:!1,isEDLImportDisplayed:!1,isManageDisplayed:!1,isNewDisplayed:!1,isRestoreDisplayed:!1,isShotHistoryDisplayed:!1},loading:{addMetadata:!1,addThumbnails:!1,creatingTasks:!1,creatingTasksStay:!1,deleteAllTasks:!1,deleteMetadata:!1,edit:!1,del:!1,getFrames:!1,importing:!1,restore:!1,savingSearch:!1,stay:!1},pageName:"Shots",errors:{addMetadata:!1,deleteMetadata:!1,creatingTasks:!1,deleteAllTasks:!1,getFrames:!1,importing:!1,importingError:null}}},beforeUnmount(){this.clearSelectedShots()},mounted(){this.setOptionalImportColumns();const e=()=>{this.$nextTick(()=>{this.loadShots(()=>{this.initialLoading=!1})})};this.shotMap.size<2||this.shotValidationColumns.length>0&&(!this.shotMap.get(this.shotMap.keys().next().value)||!this.shotMap.get(this.shotMap.keys().next().value).validations)?this.currentProduction&&this.episodes.length>0&&this.episodes[0].project_id!==this.currentProduction.id?this.loadEpisodes().then(()=>e()).catch(console.error):e():(this.isShotsLoading||(this.initialLoading=!1),this.onSearchChange(),this.$refs["shot-list"]?.setScrollPosition(this.shotListScrollPosition),this.$nextTick(()=>{this.$refs["shot-list"]?.selectTaskFromQuery(),this.applySearchFromUrl(),this.onSearchChange()}),this.reloadEpisodeShotsIfNeeded())},computed:{...P(["currentEpisode","currentProduction","currentSection","departmentMap","displayedSequences","displayedShots","displayedShotsBySequence","episodeMap","episodes","departments","isCurrentUserClient","isCurrentUserManager","isFrames","isFrameIn","isFrameOut","isFps","isLongShotList","isMaxRetakes","isPaperProduction","isResolution","isShotDescription","isShotEstimation","isShotTime","isShotsLoading","isShotsLoadingError","isTVShow","openProductions","productionShotTaskTypes","selectedShots","sequences","shotFilledColumns","shotsCsvFormData","shotSearchQueries","shotSearchText","shotSearchFilterGroups","shotsPath","shotValidationColumns","shotListScrollPosition","shots","shotSorting","taskTypeMap","user"]),shotMap(){return de.cache.shotMap},searchField(){return this.$refs["shot-search-field"]},addThumbnailsModal(){return this.$refs["add-thumbnails-modal"]},renderColumns(){const e=[...this.dataMatchers,...this.optionalColumns];return this.productionShotTaskTypes.forEach(t=>{e.push(t.name),e.push(`${t.name} comment`)}),e},dataMatchers(){return this.isTVShow?["Episode","Sequence","Name"]:["Sequence","Name"]},filteredShots(){const e={};return this.displayedShotsBySequence.forEach(t=>{t.forEach(i=>{let u=`${i.sequence_name}${i.name}`;this.isTVShow&&(u=i.episode_name+u),e[u]=!0})}),e},metadataDescriptors(){return this.shotMetadataDescriptors}},methods:{...Y(["addMetadataDescriptor","createTasks","changeShotSort","clearSelectedShots","clearSelectedTasks","commentTaskWithPreview","deleteAllShotTasks","deleteShot","deleteMetadataDescriptor","editShot","getShotsCsvLines","hideAssignations","loadEpisodes","loadShots","setNbFramesFromTaskTypePreviews","newEpisode","newSequence","newShot","removeShotSearch","restoreShot","saveShotSearch","setLastProductionScreen","setPreview","setShotSearch","showAssignations","uploadShotFile","uploadEdlFile"]),setOptionalImportColumns(){const e=[this.$t("shots.fields.description"),this.$t("shots.fields.nb_frames"),this.$t("shots.fields.frame_in"),this.$t("shots.fields.frame_out"),this.$t("shots.fields.fps"),this.$t("shots.fields.resolution")];this.isPaperProduction&&e.splice(1,1),this.optionalColumns=e},reloadEpisodeShotsIfNeeded(){(this.isTVShow&&this.displayedSequences.length===0||this.displayedSequences[0]?.episode_id!==this.currentEpisode?.id||this.displayedShots[0]?.episode_id!==this.currentEpisode?.id)&&!this.isShotsLoading&&!this.initialLoading&&(this.$refs["shot-search-field"]?.setValue(""),this.$store.commit("SET_SHOT_LIST_SCROLL_POSITION",0),this.initialLoading=!0,this.loadShots(()=>{this.initialLoading=!1,this.applySearchFromUrl()}))},addEpisode(e,t){this.newEpisode(e).then(t).catch(console.error)},addSequence(e,t){this.newSequence(e).then(t).catch(console.error)},addShot(e,t){this.newShot(e).then(t).catch(console.error)},confirmAddMetadata(e){this.loading.addMetadata=!0,e.entity_type="Shot",this.addMetadataDescriptor(e).then(()=>{this.loading.addMetadata=!1,this.modals.isAddMetadataDisplayed=!1}).catch(t=>{console.error(t),this.loading.addMetadata=!1,this.errors.addMetadata=!0})},closeMetadataModal(){this.modals.isAddMetadataDisplayed=!1},confirmDeleteMetadata(){this.errors.deleteMetadata=!1,this.loading.deleteMetadata=!0,this.deleteMetadataDescriptor(this.descriptorIdToDelete).then(()=>{this.errors.deleteMetadata=!1,this.loading.deleteMetadata=!1,this.modals.isDeleteMetadataDisplayed=!1}).catch(e=>{console.error(e),this.errors.deleteMetadata=!0,this.loading.deleteMetadata=!1})},onAddMetadataClicked(){this.descriptorToEdit={},this.modals.isAddMetadataDisplayed=!0},onDeleteMetadataClicked(e){this.descriptorIdToDelete=e,this.modals.isDeleteMetadataDisplayed=!0},onDeleteClicked(e){this.shotToDelete=e,this.modals.isDeleteDisplayed=!0},onEditClicked(e){this.shotToEdit=e,this.modals.isNewDisplayed=!0},onRestoreClicked(e){this.shotToRestore=e,this.modals.isRestoreDisplayed=!0},onEditMetadataClicked(e){this.descriptorToEdit=this.currentProduction.descriptors.find(t=>t.id===e),this.modals.isAddMetadataDisplayed=!0},confirmEditShot(e){e.id=this.shotToEdit.id,e.data.resolution=e.resolution,e.data.max_retakes=e.max_retakes,e.data.frame_in=e.frameIn,e.data.frame_out=e.frameOut,e.data.fps=e.fps,this.loading.edit=!0,this.errors.edit=!1,this.editShot(e).then(()=>{this.loading.edit=!1,this.modals.isNewDisplayed=!1,this.applySearchFromUrl(!1)}).catch(t=>{console.error(t),this.loading.edit=!1,this.errors.edit=!0})},confirmDeleteAllTasks(e){const t=this.taskTypeForTaskDeletion.id,i=this.currentProduction.id;this.errors.deleteAllTasks=!1,this.loading.deleteAllTasks=!0,this.deleteAllShotTasks({projectId:i,taskTypeId:t,selectionOnly:e}).then(()=>{this.loading.deleteAllTasks=!1,this.modals.isDeleteAllTasksDisplayed=!1}).catch(u=>{console.error(u),this.loading.deleteAllTasks=!1,this.errors.deleteAllTasks=!0})},confirmDeleteShot(){this.loading.del=!0,this.errors.del=!1,this.deleteShot(this.shotToDelete).then(()=>{this.loading.del=!1,this.modals.isDeleteDisplayed=!1}).catch(e=>{console.error(e),this.loading.del=!1,this.errors.del=!0})},confirmRestoreShot(){this.loading.restore=!0,this.errors.restore=!1,this.restoreShot(this.shotToRestore).then(()=>{this.loading.restore=!1,this.modals.isRestoreDisplayed=!1}).catch(e=>{console.error(e),this.loading.restore=!1,this.errors.restore=!0})},confirmAddThumbnails(e){const t=i=>(this.addThumbnailsModal?.markLoading(i.task.entity_id),this.commentTaskWithPreview({taskId:i.task.id,commentText:"",taskStatusId:i.task.task_status_id,form:i}).then(({newComment:u,preview:s})=>this.setPreview({taskId:i.task.id,entityId:i.task.entity_id,previewId:s.id})).then(()=>{this.addThumbnailsModal?.markUploaded(i.task.entity_id)}));this.loading.addThumbnails=!0,re.runPromiseMapAsSeries(e,t).then(()=>{this.loading.addThumbnails=!1,this.modals.isAddThumbnailsDisplayed=!1})},confirmCreateTasks({form:e,selectionOnly:t}){this.loading.creatingTasks=!0,this.runTasksCreation(e,t).then(()=>{this.reset(),this.hideCreateTasksModal(),this.loading.creatingTasks=!1}).catch(i=>{this.errors.creatingTasks=!0,console.error(i)})},confirmCreateTasksAndStay({form:e,selectionOnly:t}){this.loading.creatingTasksStay=!0,this.runTasksCreation(e,t).then(()=>{this.reset(),this.loading.creatingTasksStay=!1}).catch(i=>{this.errors.creatingTasks=!0,console.error(i)})},runTasksCreation(e,t){return this.errors.creatingTasks=!1,this.createTasks({task_type_id:e.task_type_id,project_id:this.currentProduction.id,type:"shots",selectionOnly:t})},reset(){this.initialLoading=!0,this.loadShots(e=>{e&&console.error(e),this.initialLoading=!1})},resetEditModal(){const e={name:""};this.sequences.length>0&&(e.sequence_id=this.sequences[0].id),this.openProductions.length>0&&(e.production_id=this.openProductions[0].id),this.shotToEdit=e},deleteText(){const e=this.shotToDelete;return e&&(e.canceled||!e.tasks||e.tasks.length===0)?this.$t("shots.delete_text",{name:e.name}):e?this.$t("shots.cancel_text",{name:e.name}):""},deleteAllTasksText(){const e=this.taskTypeForTaskDeletion;return e?this.$t("tasks.delete_all_text",{name:e.name}):""},restoreText(){const e=this.shotToRestore;return e?this.$t("shots.restore_text",{name:e.name}):""},renderImport(e,t){this.loading.importing=!0,this.errors.importing=!1,this.formData=e,t==="file"&&(e=e.get("file")),Q.processCSV(e).then(i=>{this.parsedCSV=i,this.hideImportModal(),this.loading.importing=!1,this.showImportRenderModal()})},uploadImportFile(e,t){const i=new FormData,u="import.csv",s=Q.turnEntriesToCsvString(e),a=new File([s],u,{type:"text/csv"});i.append("file",a),this.loading.importing=!0,this.errors.importing=!1,this.errors.importingError=null,this.$store.commit("SHOT_CSV_FILE_SELECTED",i),this.uploadShotFile(t).then(()=>{this.loadEpisodes().catch(console.error),this.hideImportRenderModal(),this.loadShots()}).catch(k=>{console.error(k),this.errors.importingError=k,this.errors.importing=!0}).finally(()=>{this.loading.importing=!1})},resetImport(){this.errors.importing=!1,this.hideImportRenderModal(),this.$store.commit("SHOT_CSV_FILE_SELECTED",null),this.$refs["import-modal"].reset(),this.showImportModal()},onDeleteAllTasksClicked(e){const t=this.taskTypeMap.get(e);this.taskTypeForTaskDeletion=t,this.deleteAllTasksLockText=t.name,this.modals.isDeleteAllTasksDisplayed=!0},onSequenceClicked(e){e.includes(" ")&&(e=`"${e}"`),this.searchField.setValue(`${this.shotSearchText} ${e}`),this.onSearchChange()},saveSearchQuery(e){this.loading.savingSearch||(this.loading.savingSearch=!0,this.saveShotSearch(e).catch(console.error).finally(()=>{this.loading.savingSearch=!1}))},removeSearchQuery(e){this.removeShotSearch(e).catch(console.error)},saveScrollPosition(e){this.$store.commit("SET_SHOT_LIST_SCROLL_POSITION",e)},getPath(e){const t={name:e,params:{production_id:this.currentProduction.id}};return this.isTVShow&&this.currentEpisode&&(t.name=`episode-${e}`,t.params.episode_id=this.currentEpisode.id),t},showManageShots(){this.modals.isManageDisplayed=!0},hideManageShots(){this.modals.isManageDisplayed=!1},showShotHistoryModal(e){this.historyShot=e,this.modals.isShotHistoryDisplayed=!0},hideShotHistoryModal(){this.modals.isShotHistoryDisplayed=!1},onExportClick(){this.getShotsCsvLines().then(e=>{const t=[ne().format("YYYY-MM-DD"),"kitsu",this.currentProduction.name,this.$t("shots.title")];this.currentEpisode&&t.splice(3,0,this.currentEpisode.name);const i=he.slugify(t.join("_")),u=[this.$t("shots.fields.sequence"),this.$t("shots.fields.name"),this.$t("shots.fields.description")];this.currentEpisode&&u.splice(0,0,"Episode"),le([...this.currentProduction.descriptors]).filter(s=>s.entity_type==="Shot").forEach(s=>{u.push(s.name)}),this.isShotTime&&u.push(this.$t("shots.fields.time_spent")),this.isShotEstimation&&u.push(this.$t("main.estimation_short")),this.isFrames&&u.push(this.$t("main.frames")),this.isFrameIn&&u.push(this.$t("main.frame_in")),this.isFrameOut&&u.push(this.$t("main.frame_out")),this.isFps&&u.push(this.$t("main.fps")),this.isResolution&&u.push(this.$t("shots.fields.resolution")),this.isMaxRetakes&&u.push(this.$t("shots.fields.max_retakes")),this.shotValidationColumns.forEach(s=>{u.push(this.taskTypeMap.get(s).name),u.push("Assignations")}),Q.buildCsvFile(i,[u].concat(e))})},onChangeSortClicked(e){this.changeShotSort(e)},async onFieldChanged({entry:e,fieldName:t,value:i}){const u={id:e.id,nb_frames:e.nb_frames,description:e.description};u[t]=i,await this.editShot(u),this.onSearchChange(!1)},async onMetadataChanged({entry:e,descriptor:t,value:i}){const u={id:e.id,data:{[t.field_name]:i}},s=this.shotMap.get(e.id);t.field_name==="frame_in"&&s.data?.frame_out&&parseInt(s.data.frame_out)>parseInt(i)&&!this.isPaperProduction&&(u.nb_frames=parseInt(s.data.frame_out)-parseInt(i)+1),t.field_name==="frame_out"&&s.data?.frame_in&&parseInt(s.data.frame_in)<parseInt(i)&&!this.isPaperProduction&&(u.nb_frames=parseInt(i)-parseInt(s.data.frame_in)+1),await this.editShot(u),this.applySearchFromUrl(!1)},showEDLImportModal(){this.modals.isEDLImportDisplayed=!0},hideEDLImportModal(){this.modals.isEDLImportDisplayed=!1},uploadEDLFile(e,t,i){this.loading.importing=!0,this.errors.importing=!1,this.errors.importingError=null,this.uploadEdlFile({edl_file:e,namingConvention:t,matchCase:i}).then(()=>{this.loadEpisodes().catch(console.error),this.hideEDLImportModal(),this.loadShots()}).catch(u=>{console.error(u),this.errors.importingError=u,this.errors.importing=!0}).finally(()=>{this.loading.importing=!1})},async confirmSetFrames(e){this.loading.getFrames=!0;try{await this.setNbFramesFromTaskTypePreviews({taskTypeId:e,productionId:this.currentProduction.id,episodeId:this.currentEpisode?this.currentEpisode.id:null}),this.modals.isSetFramesDisplayed=!1}catch(t){console.error(t),this.errors.getFrames=!0}finally{this.loading.getFrames=!1}},onSearchTyped(){(this.shotMap.size<800||this.searchField?.getValue()==="")&&this.onSearchChange()}},watch:{currentSection(){this.reloadEpisodeShotsIfNeeded()},currentProduction(){this.setOptionalImportColumns(),this.initialLoading||(this.$refs["shot-search-field"]?.setValue(""),this.$store.commit("SET_SHOT_LIST_SCROLL_POSITION",0),this.currentProduction&&!this.isTVShow&&this.loadShots())},currentEpisode(){const e=()=>{this.loadShots()};this.isTVShow&&this.currentEpisode&&(this.currentProduction&&this.episodes.length>0&&this.episodes[0].project_id!==this.currentProduction.id?this.loadEpisodes().then(()=>e()).catch(console.error):e())},isShotsLoading(){this.isShotsLoading||(this.initialLoading=!1,this.applySearchFromUrl(),this.$nextTick(()=>{this.$refs["shot-list"]?.selectTaskFromQuery()}),this.$refs["shot-list"]?.setScrollPosition(this.shotListScrollPosition))}},head(){return this.isTVShow?{title:`${this.currentProduction?.name||""} - ${this.currentEpisode?.name||""} | ${this.$t("shots.title")} - Kitsu`}:this.currentProduction?{title:`${this.currentProduction.name} | ${this.$t("shots.title")} - Kitsu`}:{title:`${this.$t("shots.title")} - Kitsu`}}},Vs={class:"columns fixed-page"},Ps={class:"column main-column"},As={class:"shots page"},Us={class:"shot-list-header page-header"},Rs={class:"flexrow mb1"},Os={key:1,class:"flexrow flexrow-item"},Ks={key:2,class:"flexrow"},Bs={class:"query-list"},qs={id:"side-column",class:"column side-column"};function Ns(e,t,i,u,s,a){const k=p("search-field"),g=p("button-simple"),T=p("info-question-mark"),F=p("combobox-department"),I=p("combobox-display-options"),w=p("search-query-list"),O=p("sorting-info"),K=p("shot-list"),A=p("task-info"),U=p("manage-shots-modal"),B=p("edit-shot-modal"),H=p("delete-modal"),q=p("hard-delete-modal"),N=p("import-render-modal"),c=p("import-modal"),y=p("import-edl-modal"),n=p("create-tasks-modal"),C=p("add-metadata-modal"),l=p("set-frames-from-task-type-previews-modal"),M=p("add-thumbnails-modal"),E=p("shot-history-modal"),x=p("build-filter-modal");return o(),r("div",Vs,[d("div",Ps,[d("div",As,[d("div",Us,[d("div",Rs,[f(k,{ref:"shot-search-field","can-save":!0,onChange:a.onSearchTyped,onEnter:e.onSearchChange,onSave:a.saveSearchQuery,placeholder:"ex: e01 s01 anim=wip"},null,8,["onChange","onEnter","onSave"]),f(g,{class:"flexrow-item",title:e.$t("entities.build_filter.title"),icon:"filter",onClick:t[0]||(t[0]=()=>s.modals.isBuildFilterDisplayed=!0)},null,8,["title"]),e.currentEpisode&&e.currentEpisode.description?(o(),S(T,{key:0,class:"flexrow-item mt05",text:e.currentEpisode.description},null,8,["text"])):m("",!0),t[12]||(t[12]=d("div",{class:"filler"},null,-1)),e.isCurrentUserClient?m("",!0):(o(),r("div",Os,[e.departments.length>0?(o(),S(F,{key:0,class:"combobox-department flexrow-item","selectable-departments":e.selectableDepartments("Shot"),"display-all-and-my-departments":!0,rounded:"",modelValue:s.selectedDepartment,"onUpdate:modelValue":t[1]||(t[1]=v=>s.selectedDepartment=v)},null,8,["selectable-departments","modelValue"])):m("",!0),f(I,{class:"flexrow-item",type:s.type,modelValue:s.displaySettings,"onUpdate:modelValue":t[2]||(t[2]=v=>s.displaySettings=v)},null,8,["type","modelValue"])])),e.isCurrentUserManager?(o(),r("div",Ks,[f(g,{class:"flexrow-item",title:e.$t("entities.thumbnails.title"),icon:"import-files",onClick:e.showAddThumbnailsModal},null,8,["title","onClick"]),e.isCurrentUserManager?(o(),S(g,{key:0,class:"flexrow-item",icon:"file-digit",title:e.$t("shots.get_frames_from_previews"),onClick:t[3]||(t[3]=()=>s.modals.isSetFramesDisplayed=!0)},null,8,["title"])):m("",!0),f(g,{class:"flexrow-item",title:e.$t("main.edl.import_file"),icon:"import-edl",onClick:a.showEDLImportModal},null,8,["title","onClick"]),f(g,{class:"flexrow-item",title:e.$t("main.csv.import_file"),icon:"import",onClick:e.showImportModal},null,8,["title","onClick"]),f(g,{class:"flexrow-item",icon:"export",title:e.$t("main.csv.export_file"),onClick:a.onExportClick},null,8,["title","onClick"]),f(g,{class:"flexrow-item",text:e.$t("shots.manage"),icon:"plus",onClick:a.showManageShots},null,8,["text","onClick"])])):m("",!0)]),d("div",Bs,[!e.isShotsLoading&&!s.initialLoading?(o(),S(w,{key:0,groups:e.shotSearchFilterGroups,"is-group-enabled":!0,queries:e.shotSearchQueries,type:"shot",onRemoveSearch:a.removeSearchQuery},null,8,["groups","queries","onRemoveSearch"])):m("",!0)])]),e.shotSorting?.length?(o(),S(O,{key:0,sorting:e.shotSorting,onClearSorting:t[4]||(t[4]=v=>a.onChangeSortClicked(null))},null,8,["sorting"])):m("",!0),f(K,{ref:"shot-list","department-filter":s.departmentFilter,"displayed-shots":e.displayedShotsBySequence,"display-settings":s.displaySettings,"is-loading":e.isShotsLoading||s.initialLoading,"is-error":e.isShotsLoadingError,"validation-columns":e.shotValidationColumns,onAddMetadata:a.onAddMetadataClicked,onAddShots:a.showManageShots,onChangeSort:a.onChangeSortClicked,onCreateTasks:e.showCreateTasksModal,onDeleteAllTasks:a.onDeleteAllTasksClicked,onDeleteClicked:a.onDeleteClicked,onDeleteMetadata:a.onDeleteMetadataClicked,onEditClicked:a.onEditClicked,onEditMetadata:a.onEditMetadataClicked,onFieldChanged:a.onFieldChanged,onMetadataChanged:a.onMetadataChanged,onRestoreClicked:a.onRestoreClicked,onScroll:a.saveScrollPosition,onShotHistory:a.showShotHistoryModal,onSequenceClicked:a.onSequenceClicked,onKeepTaskPanelOpen:e.onKeepTaskPanelOpenChanged},null,8,["department-filter","displayed-shots","display-settings","is-loading","is-error","validation-columns","onAddMetadata","onAddShots","onChangeSort","onCreateTasks","onDeleteAllTasks","onDeleteClicked","onDeleteMetadata","onEditClicked","onEditMetadata","onFieldChanged","onMetadataChanged","onRestoreClicked","onScroll","onShotHistory","onSequenceClicked","onKeepTaskPanelOpen"])])]),R(d("div",qs,[f(A,{task:e.selectedTasks.values().next().value,"entity-type":"Shot","with-actions":""},null,8,["task"])],512),[[X,e.isTaskSidePanelOpen]]),f(U,{active:s.modals.isManageDisplayed,"is-loading":s.loading.manage,onAddEpisode:a.addEpisode,onAddSequence:a.addSequence,onAddShot:a.addShot,onCancel:a.hideManageShots},null,8,["active","is-loading","onAddEpisode","onAddSequence","onAddShot","onCancel"]),f(B,{active:s.modals.isNewDisplayed,"is-loading":s.loading.edit,"is-error":s.errors.edit,"shot-to-edit":s.shotToEdit,onCancel:t[5]||(t[5]=v=>s.modals.isNewDisplayed=!1),onConfirm:a.confirmEditShot},null,8,["active","is-loading","is-error","shot-to-edit","onConfirm"]),f(H,{ref:"delete-shot-modal",active:s.modals.isDeleteDisplayed,"is-loading":s.loading.del,"is-error":s.errors.del,text:a.deleteText(),"error-text":e.$t("shots.delete_error"),onCancel:t[6]||(t[6]=v=>s.modals.isDeleteDisplayed=!1),onConfirm:a.confirmDeleteShot},null,8,["active","is-loading","is-error","text","error-text","onConfirm"]),f(H,{ref:"restore-shot-modal",active:s.modals.isRestoreDisplayed,"is-loading":s.loading.restore,"is-error":s.errors.restore,text:a.restoreText(),"error-text":e.$t("shots.restore_error"),onCancel:t[7]||(t[7]=v=>s.modals.isRestoreDisplayed=!1),onConfirm:a.confirmRestoreShot},null,8,["active","is-loading","is-error","text","error-text","onConfirm"]),f(H,{ref:"delete-metadata-modal",active:s.modals.isDeleteMetadataDisplayed,"is-loading":s.loading.deleteMetadata,"is-error":s.errors.deleteMetadata,onCancel:t[8]||(t[8]=v=>s.modals.isDeleteMetadataDisplayed=!1),text:e.$t("productions.metadata.delete_text"),"error-text":e.$t("productions.metadata.delete_error"),onConfirm:a.confirmDeleteMetadata},null,8,["active","is-loading","is-error","text","error-text","onConfirm"]),f(q,{ref:"delete-all-tasks-modal",active:s.modals.isDeleteAllTasksDisplayed,"is-loading":s.loading.deleteAllTasks,"is-error":s.errors.deleteAllTasks,text:a.deleteAllTasksText(),"error-text":e.$t("tasks.delete_all_error"),"lock-text":s.deleteAllTasksLockText,"selection-option":!0,onCancel:t[9]||(t[9]=v=>s.modals.isDeleteAllTasksDisplayed=!1),onConfirm:a.confirmDeleteAllTasks},null,8,["active","is-loading","is-error","text","error-text","lock-text","onConfirm"]),f(N,{active:s.modals.isImportRenderDisplayed,"is-loading":s.loading.importing,"is-error":s.errors.importing,"import-error":s.errors.importingError,"parsed-csv":s.parsedCSV,"form-data":e.shotsCsvFormData,columns:a.renderColumns,"data-matchers":a.dataMatchers,database:a.filteredShots,onReupload:a.resetImport,onCancel:e.hideImportRenderModal,onConfirm:a.uploadImportFile},null,8,["active","is-loading","is-error","import-error","parsed-csv","form-data","columns","data-matchers","database","onReupload","onCancel","onConfirm"]),f(c,{ref:"import-modal",active:s.modals.isImportDisplayed,"is-loading":s.loading.importing,"is-error":s.errors.importing,"form-data":e.shotsCsvFormData,columns:a.dataMatchers,"optional-columns":s.optionalColumns,"generic-columns":s.genericColumns,onCancel:e.hideImportModal,onConfirm:a.renderImport},null,8,["active","is-loading","is-error","form-data","columns","optional-columns","generic-columns","onCancel","onConfirm"]),f(y,{ref:"import-edl-modal",active:s.modals.isEDLImportDisplayed,"is-loading":s.loading.importing,"is-error":s.errors.importing,"import-error":s.errors.importingError,onCancel:a.hideEDLImportModal,onConfirm:a.uploadEDLFile},null,8,["active","is-loading","is-error","import-error","onCancel","onConfirm"]),f(n,{active:s.modals.isCreateTasksDisplayed,"is-loading":s.loading.creatingTasks,"is-loading-stay":s.loading.creatingTasksStay,"is-error":s.errors.creatingTasks,title:e.$t("tasks.create_tasks_shot"),text:e.$t("tasks.create_tasks_shot_explaination"),"error-text":e.$t("tasks.create_tasks_shot_failed"),onCancel:e.hideCreateTasksModal,onConfirm:a.confirmCreateTasks,onConfirmAndStay:a.confirmCreateTasksAndStay},null,8,["active","is-loading","is-loading-stay","is-error","title","text","error-text","onCancel","onConfirm","onConfirmAndStay"]),f(C,{active:s.modals.isAddMetadataDisplayed,"is-loading":s.loading.addMetadata,"is-error":s.errors.addMetadata,"descriptor-to-edit":s.descriptorToEdit,"entity-type":"Shot",onCancel:a.closeMetadataModal,onConfirm:a.confirmAddMetadata},null,8,["active","is-loading","is-error","descriptor-to-edit","onCancel","onConfirm"]),f(l,{active:s.modals.isSetFramesDisplayed,"is-loading":s.loading.getFrames,"is-error":s.errors.getFrames,onCancel:t[10]||(t[10]=v=>s.modals.isSetFramesDisplayed=!1),onConfirm:a.confirmSetFrames},null,8,["active","is-loading","is-error","onConfirm"]),s.modals.isAddThumbnailsDisplayed?(o(),S(M,{key:0,ref:"add-thumbnails-modal",active:"","entity-type":"Shot",parent:"shots","is-loading":s.loading.addThumbnails,"is-error":s.errors.addThumbnails,onCancel:e.hideAddThumbnailsModal,onConfirm:a.confirmAddThumbnails},null,8,["is-loading","is-error","onCancel","onConfirm"])):m("",!0),f(E,{active:s.modals.isShotHistoryDisplayed,shot:s.historyShot,onCancel:a.hideShotHistoryModal},null,8,["active","shot","onCancel"]),f(x,{ref:"build-filter-modal",active:s.modals.isBuildFilterDisplayed,"entity-type":"shot",onCancel:t[11]||(t[11]=v=>s.modals.isBuildFilterDisplayed=!1),onConfirm:e.confirmBuildFilter},null,8,["active","onConfirm"])])}const na=V(Hs,[["render",Ns],["__scopeId","data-v-90eef4d3"]]);export{na as default};
//# sourceMappingURL=Shots-Dy1VbGML.js.map
