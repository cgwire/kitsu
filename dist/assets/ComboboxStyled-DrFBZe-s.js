import{_ as m,E as w,W as b,r as u,o,c as a,t as h,h as n,d as c,a8 as y,n as r,f as _,F as L,e as g,I as k,g as O}from"./index-Dw-uod2x.js";const C={name:"combobox-styled",components:{ChevronDownIcon:b,EntityThumbnail:w},emits:["change","update:modelValue"],data(){return{selectedOption:{label:"",value:""},showList:!1}},props:{active:{default:!1,type:Boolean},disabled:{default:!1,type:Boolean},label:{default:"",type:String},options:{default:()=>[],type:Array},modelValue:{default:"",type:[String,Object]},localeKeyPrefix:{default:"",type:String},isCompact:{default:!1,type:Boolean},isPreview:{default:!1,type:Boolean},isReversed:{default:!1,type:Boolean},keepOrder:{default:!1,type:Boolean},thin:{default:!1,type:Boolean}},computed:{optionList(){return this.isReversed&&!this.keepOrder?[...this.options].reverse():this.options},selectedOptionLabel(){return this.selectedOption?this.getOptionLabel(this.selectedOption):""}},methods:{openRoute(e){const s=this.$router.resolve(e.route).href,l=`${window.location.protocol}//${window.location.host}${s}`;window.open(l,"_blank")},selectOption(e){this.$emit("update:modelValue",e.value),this.$emit("change",e.value),this.selectedOption=e},toggleList(){this.showList&&(this.lastScrollPosition=this.$refs.select.scrollTop),this.showList=!this.showList,this.showList&&this.$nextTick(()=>{this.$refs.select?.scrollTo({top:this.lastScrollPosition,left:0})})},getOptionLabel(e){return this.localeKeyPrefix&&e.label?this.$t(this.localeKeyPrefix+e.label.toLowerCase()):e.label}},watch:{options:{deep:!0,immediate:!0,handler(){if(this.options.length>0){const e=this.options.find(({value:s})=>s===this.modelValue);this.selectedOption=e||this.options[0]}}},showList(){this.showList&&this.isReversed&&this.$nextTick(()=>{if(!this.$refs.select?.children)return;let e=null;for(const s of this.$refs.select.children)s.className!=="flexrow"&&(e=s);e?.scrollTo({top:this.optionList.length*60})})},modelValue(){this.selectedOption=this.options.find(e=>e.value===this.modelValue)}}},x=["disabled"],B={key:0,class:"label"},V=["title"],S=["title"],P={key:0,class:"select-input"},R=["onClick","onMouseup"],T={class:"filler"},N=["title"];function D(e,s,l,E,d,i){const f=u("chevron-down-icon"),p=u("entity-thumbnail");return o(),a("div",{class:r({active:l.active}),disabled:l.disabled||null},[l.label.length?(o(),a("label",B,h(l.label),1)):n("",!0),c("div",{class:r(["combo",{thin:l.thin,compact:l.isCompact,reversed:l.isReversed,open:d.showList}]),ref:"select",onClick:s[0]||(s[0]=(...t)=>i.toggleList&&i.toggleList(...t))},[c("div",{class:"flexrow",title:i.selectedOptionLabel},[y(e.$slots,"icon",{},void 0,!0),l.isCompact?n("",!0):(o(),a("div",{key:0,class:r(["selected-line mr05",{placeholder:d.selectedOption?.placeholder}])},h(i.selectedOptionLabel),3)),d.selectedOption?.validation_status==="validated"?(o(),a("span",{key:1,class:"preview-status",title:e.$t("tasks.validated")},null,8,S)):n("",!0),_(f,{class:"down-icon flexrow-item"})],8,V),d.showList?(o(),a("div",P,[(o(!0),a(L,null,g(i.optionList,t=>(o(),a("div",{key:t.id,class:r(["option-line flexrow",{placeholder:t.placeholder}]),onClick:v=>i.selectOption(t),onMouseup:k(v=>i.openRoute(t),["middle"])},[l.isPreview?(o(),O(p,{key:0,class:"revision-thumbnail","preview-file-id":t.value,width:75,height:45,"empty-width":75,"empty-height":45,"no-preview":""},null,8,["preview-file-id"])):n("",!0),c("span",T,h(t.optionLabel??i.getOptionLabel(t)),1),t.validation_status==="validated"?(o(),a("span",{key:1,class:"preview-status",title:e.$t("tasks.validated")},null,8,N)):n("",!0)],42,R))),128))])):n("",!0)],2),c("div",{onClick:s[1]||(s[1]=(...t)=>i.toggleList&&i.toggleList(...t)),class:r({"c-mask":!0,"is-active":d.showList})},null,2)],10,x)}const K=m(C,[["render",D],["__scopeId","data-v-b2ede95b"]]);export{K as C};
//# sourceMappingURL=ComboboxStyled-DrFBZe-s.js.map
