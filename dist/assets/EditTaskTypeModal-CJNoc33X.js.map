{"version":3,"file":"EditTaskTypeModal-CJNoc33X.js","sources":["../../src/components/modals/EditTaskTypeModal.vue"],"sourcesContent":["<template>\n  <div\n    :class=\"{\n      modal: true,\n      'is-active': active\n    }\"\n  >\n    <div class=\"modal-background\" @click=\"$emit('cancel')\"></div>\n\n    <div class=\"modal-content\">\n      <div class=\"box\">\n        <h1 class=\"title\" v-if=\"isEditing\">\n          {{ $t('task_types.edit_title') }} {{ taskTypeToEdit.name }}\n        </h1>\n        <h1 class=\"title\" v-else>\n          {{ $t('task_types.new_task_type') }}\n        </h1>\n\n        <form @submit.prevent>\n          <text-field\n            ref=\"nameField\"\n            :label=\"$t('task_types.fields.name')\"\n            v-model=\"form.name\"\n            @enter=\"confirmClicked\"\n            v-focus\n          />\n          <text-field\n            ref=\"shortNameField\"\n            :label=\"$t('task_types.fields.short_name')\"\n            v-model=\"form.short_name\"\n            @enter=\"confirmClicked\"\n          />\n          <boolean-field\n            is-field\n            :label=\"$t('task_types.fields.allow_timelog')\"\n            @enter=\"confirmClicked\"\n            v-model=\"form.allow_timelog\"\n          />\n          <textarea-field\n            :label=\"$t('task_types.fields.description')\"\n            v-model=\"form.description\"\n            @enter=\"confirmClicked\"\n          />\n          <combobox-simple\n            class=\"field\"\n            :label=\"$t('task_types.fields.dedicated_to')\"\n            :options=\"dedicatedToOptions\"\n            @enter=\"confirmClicked\"\n            v-model=\"form.for_entity\"\n            v-if=\"!isEditing\"\n          />\n          <combobox-department\n            :label=\"$t('task_types.fields.department')\"\n            @enter=\"confirmClicked\"\n            v-model=\"form.department_id\"\n          />\n          <color-field\n            class=\"mt2\"\n            :label=\"$t('task_types.fields.color')\"\n            v-model=\"form.color\"\n          />\n          <combobox-boolean\n            :label=\"$t('main.archived')\"\n            @enter=\"confirmClicked\"\n            v-model=\"form.archived\"\n            v-if=\"isEditing\"\n          />\n        </form>\n\n        <modal-footer\n          :error-text=\"$t('task_types.create_error')\"\n          :is-loading=\"isLoading\"\n          :is-error=\"isError\"\n          @confirm=\"confirmClicked\"\n          @cancel=\"$emit('cancel')\"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex'\n\nimport { modalMixin } from '@/components/modals/base_modal'\n\nimport BooleanField from '@/components/widgets/BooleanField.vue'\nimport ComboboxBoolean from '@/components/widgets/ComboboxBoolean.vue'\nimport ComboboxSimple from '@/components/widgets/ComboboxSimple.vue'\nimport ComboboxDepartment from '@/components/widgets/ComboboxDepartment.vue'\nimport ColorField from '@/components/widgets/ColorField.vue'\nimport ModalFooter from '@/components/modals/ModalFooter.vue'\nimport TextField from '@/components/widgets/TextField.vue'\nimport TextareaField from '@/components/widgets/TextareaField.vue'\n\nexport default {\n  name: 'edit-task-type-modal',\n\n  mixins: [modalMixin],\n\n  components: {\n    BooleanField,\n    ComboboxBoolean,\n    ComboboxSimple,\n    ComboboxDepartment,\n    ColorField,\n    ModalFooter,\n    TextField,\n    TextareaField\n  },\n\n  props: {\n    active: {\n      type: Boolean,\n      default: false\n    },\n    forEntity: {\n      type: String,\n      default: 'Asset'\n    },\n    isError: {\n      type: Boolean,\n      default: false\n    },\n    isLoading: {\n      type: Boolean,\n      default: false\n    },\n    taskTypeToEdit: {\n      type: Object,\n      default: () => {}\n    }\n  },\n\n  emits: ['cancel', 'confirm'],\n\n  data() {\n    return {\n      form: {\n        name: '',\n        short_name: '',\n        description: '',\n        color: '#999999',\n        for_entity: 'Asset',\n        allow_timelog: 'false',\n        department_id: null,\n        archived: 'false'\n      },\n      dedicatedToOptions: [\n        { label: this.$t('assets.title'), value: 'Asset' },\n        { label: this.$t('shots.title'), value: 'Shot' },\n        { label: this.$t('sequences.title'), value: 'Sequence' },\n        { label: this.$t('episodes.title'), value: 'Episode' },\n        { label: this.$t('edits.title'), value: 'Edit' }\n      ]\n    }\n  },\n\n  computed: {\n    ...mapGetters(['taskTypes', 'taskTypeStatusOptions', 'departments']),\n    isEditing() {\n      return this.taskTypeToEdit && this.taskTypeToEdit.id\n    }\n  },\n\n  methods: {\n    newPriority(forEntity) {\n      return (\n        this.taskTypes.filter(taskType => taskType.for_entity === forEntity)\n          .length + 1\n      )\n    },\n\n    confirmClicked() {\n      if (!this.isEditing) {\n        this.form.priority = this.newPriority(this.form.for_entity)\n      }\n      this.$emit('confirm', this.form)\n    }\n  },\n\n  watch: {\n    active() {\n      if (this.taskTypeToEdit) {\n        this.form = {\n          name: this.taskTypeToEdit.name,\n          short_name: this.taskTypeToEdit.short_name,\n          description: this.taskTypeToEdit.description,\n          color: this.taskTypeToEdit.color,\n          for_entity: this.taskTypeToEdit.for_entity || 'Asset',\n          allow_timelog: String(this.taskTypeToEdit.allow_timelog === true),\n          department_id: this.taskTypeToEdit.department_id,\n          archived: String(this.taskTypeToEdit.archived === true)\n        }\n      } else {\n        this.form = {\n          name: '',\n          short_name: '',\n          description: '',\n          color: '#999999',\n          for_entity: this.forEntity,\n          allow_timelog: 'false',\n          department_id: null,\n          archived: 'false'\n        }\n      }\n      this.$nextTick(() => {\n        this.form.for_entity = this.forEntity\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.modal-content .box p.text {\n  margin-bottom: 1em;\n}\n.is-danger {\n  color: #ff3860;\n  font-style: italic;\n}\n</style>\n"],"names":["_sfc_main","modalMixin","BooleanField","ComboboxBoolean","ComboboxSimple","ComboboxDepartment","ColorField","ModalFooter","TextField","TextareaField","mapGetters","forEntity","taskType","_hoisted_1","_hoisted_2","_createElementBlock","_normalizeClass","$props","_createElementVNode","_ctx","$options","_hoisted_3","_toDisplayString","_hoisted_4","_cache","_withModifiers","_createVNode","_component_text_field","$data","$event","_component_boolean_field","_component_textarea_field","_createCommentVNode","_createBlock","_component_combobox_simple","_component_combobox_department","_component_color_field","_component_combobox_boolean","_component_modal_footer"],"mappings":"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"}