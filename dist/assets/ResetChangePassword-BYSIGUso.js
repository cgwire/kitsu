import{_ as g,bY as v,r as u,q as C,o as l,c,d as s,t as n,k as a,a4 as _,O as w,f as h,n as k,h as L,v as d,w as y,c0 as S,a as E}from"./index-C2m_IhNF.js";const P={name:"reset-change-password",components:{LockIcon:v},data(){return{password:"",password2:"",isLoading:!1,isError:!1,isFormError:!1,isSuccess:!1,secondsLeft:5}},mounted(){this.$store.commit("LOGIN_SUCCESS"),this.isLoading=!1,this.isError=!1,this.secondsLeft=5},computed:{isNew(){return this.$route.query.type==="new"}},methods:{...E(["resetChangePassword"]),confirmResetChangePassword(){this.isFormError=!1,this.isError=!1,S.isPasswordValid(this.password,this.password2)?(this.isLoading=!0,this.isSuccess=!1,this.resetChangePassword({email:this.$route.query.email,token:this.$route.query.token,password:this.password,password2:this.password2}).then(()=>{this.isLoading=!1,this.isSuccess=!0;const e=setInterval(()=>{this.secondsLeft--,this.secondsLeft===0&&(this.$router.push({name:"login"}),clearInterval(e))},1e3)}).catch(()=>{this.isLoading=!1,this.isError=!0,this.isSuccess=!1})):this.isFormError=!0}},head(){return{title:this.$t("login.reset_change_password_title")}}},R={class:"hero is-fullheight"},N={class:"container has-text-centered"},V={class:"box has-text-left"},b={class:"has-text-centered"},I={class:"title"},q={class:"field mt2"},F={class:"control has-icon"},z=["placeholder"],B={class:"icon"},D={class:"control has-icon"},K=["placeholder"],U={class:"icon"},O={class:"control"},$={class:"has-text-centered"},A={key:0},G={key:1};function M(e,t,T,Y,o,i){const p=u("lock-icon"),m=u("router-link"),f=C("focus");return l(),c("div",R,[s("div",N,[s("div",V,[s("div",b,[s("h1",I,n(i.isNew?e.$t("login.set_password_title"):e.$t("login.reset_change_password_title")),1)]),s("div",q,[s("p",F,[a(s("input",{class:"input is-medium email",type:"password",autocomplete:"new-password",placeholder:e.$t("login.fields.password"),onKeyup:t[0]||(t[0]=w((...r)=>i.confirmResetChangePassword&&i.confirmResetChangePassword(...r),["enter"])),"onUpdate:modelValue":t[1]||(t[1]=r=>o.password=r)},null,40,z),[[_,o.password],[f]]),s("span",B,[h(p,{size:20})])]),s("p",D,[a(s("input",{class:"input is-medium email",type:"password",autocomplete:"new-password",placeholder:e.$t("login.fields.password2"),onKeyup:t[2]||(t[2]=w((...r)=>i.confirmResetChangePassword&&i.confirmResetChangePassword(...r),["enter"])),"onUpdate:modelValue":t[3]||(t[3]=r=>o.password2=r)},null,40,K),[[_,o.password2]]),s("span",U,[h(p,{size:20})])])]),s("p",O,[o.isSuccess?L("",!0):(l(),c("a",{key:0,class:k({"main-button":!0,"is-fullwidth":!0,"is-loading":o.isLoading}),onClick:t[4]||(t[4]=(...r)=>i.confirmResetChangePassword&&i.confirmResetChangePassword(...r))},n(i.isNew?e.$t("login.set_password"):e.$t("login.reset_change_password")),3))]),a(s("p",{class:"error"},n(e.$t("login.reset_change_password_form_failed")),513),[[d,o.isFormError]]),a(s("p",{class:"error"},n(e.$t("login.reset_change_password_failed")),513),[[d,o.isError]]),a(s("p",{class:"success"},n(e.$t("login.reset_change_password_succeed")),513),[[d,o.isSuccess]]),a(s("p",{class:"has-text-centered mt2 mb2"},n(e.$t("login.redirecting",{secondsLeft:o.secondsLeft})),513),[[d,o.isSuccess]]),s("p",$,[h(m,{to:{name:"login"}},{default:y(()=>[o.isSuccess?(l(),c("span",A,n(e.$t("login.back_to_login")),1)):(l(),c("span",G,n(e.$t("login.login_page")),1))]),_:1})])])])])}const H=g(P,[["render",M],["__scopeId","data-v-66e7e2d1"]]);export{H as default};
//# sourceMappingURL=ResetChangePassword-BYSIGUso.js.map
