{"version":3,"file":"Logs-DmrY9Gn9.js","sources":["../../src/components/pages/logs/Events.vue","../../src/components/lists/PreviewFileList.vue","../../src/components/pages/logs/PreviewFiles.vue","../../src/components/pages/Logs.vue"],"sourcesContent":["<template>\n  <div class=\"mt1\">\n    <div class=\"flexrow\">\n      <date-field\n        class=\"flexrow-item\"\n        :can-delete=\"false\"\n        :max-date=\"today\"\n        :label=\"$t('logs.current_date_label')\"\n        v-model=\"currentDate\"\n      />\n      <people-field\n        class=\"flexrow-item field\"\n        :label=\"$t('main.user')\"\n        :people=\"people\"\n        v-model=\"selectedPerson\"\n      />\n      <button-simple\n        class=\"flexrow-item small\"\n        icon=\"refresh\"\n        :is-loading=\"loading.events\"\n        :title=\"$t('main.reload')\"\n        @click=\"loadDayEvents()\"\n      />\n    </div>\n\n    <div class=\"mt2 empty\" v-if=\"!loading.events && !filteredEvents.length\">\n      {{ $t('logs.empty_list') }}\n    </div>\n    <div class=\"has-text-centered\" v-if=\"loading.events\">\n      <spinner />\n    </div>\n    <div class=\"log-list\" v-else>\n      <div\n        class=\"event-line\"\n        :key=\"event.id\"\n        @click=\"selectLine(event)\"\n        v-for=\"event in filteredEvents\"\n      >\n        <span class=\"date tag mr1\">{{ event.date }} </span>\n        <span\n          class=\"type tag\"\n          :title=\"event.type\"\n          :data-status=\"event.shortType\"\n        >\n          {{ event.shortType }}\n        </span>\n        <span class=\"name tag mr1\">{{ event.name }}</span>\n        <ul v-if=\"selectedEvents[event.id]\" @click.stop>\n          <li class=\"flexrow\">\n            <span class=\"key\">user</span>\n            <people-avatar\n              class=\"flexrow-item\"\n              :size=\"20\"\n              :font-size=\"10\"\n              :person=\"personMap.get(event.user_id)\"\n              v-if=\"event.user_id\"\n            />\n            <people-name\n              class=\"flexrow-item\"\n              :person=\"personMap.get(event.user_id)\"\n              with-link\n              v-if=\"event.user_id\"\n            />\n          </li>\n          <li\n            :key=\"`${event.id}-${key}`\"\n            v-for=\"key in Object.keys(event.data).sort()\"\n          >\n            <span class=\"key\">{{ key }}</span>\n            <a :href=\"getLink(event, key)\" v-if=\"isLink(key)\">\n              {{ event.data[key] }}\n            </a>\n            <template v-else>{{ event.data[key] }}</template>\n          </li>\n        </ul>\n      </div>\n      <div class=\"has-text-centered mt1\" v-if=\"hasMoreEvents\">\n        <button-simple\n          :is-loading=\"loading.moreEvents\"\n          :text=\"$t('main.load_more')\"\n          @click=\"loadMoreEvents()\"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapGetters, mapActions } from 'vuex'\nimport moment from 'moment'\n\nimport { formatFullDateWithRevertedTimezone } from '@/lib/time'\nimport { timeMixin } from '@/components/mixins/time'\n\nimport ButtonSimple from '@/components/widgets/ButtonSimple.vue'\nimport DateField from '@/components/widgets/DateField.vue'\nimport PeopleAvatar from '@/components/widgets/PeopleAvatar.vue'\nimport PeopleField from '@/components/widgets/PeopleField.vue'\nimport PeopleName from '@/components/widgets/PeopleName.vue'\nimport Spinner from '@/components/widgets/Spinner.vue'\n\nconst PAGE_SIZE = 1000\n\nexport default {\n  name: 'events',\n\n  mixins: [timeMixin],\n\n  components: {\n    ButtonSimple,\n    DateField,\n    PeopleAvatar,\n    PeopleField,\n    PeopleName,\n    Spinner\n  },\n\n  data() {\n    return {\n      currentDate: new Date(),\n      events: [],\n      hasMoreEvents: false,\n      selectedEvents: {},\n      selectedPerson: null,\n      loading: {\n        events: false,\n        moreEvents: false\n      }\n    }\n  },\n\n  mounted() {\n    this.loadDayEvents()\n  },\n\n  computed: {\n    ...mapGetters(['people', 'personMap', 'user']),\n\n    today() {\n      return moment().toDate()\n    },\n\n    filteredEvents() {\n      let events = this.events\n      if (this.selectedPerson) {\n        events = events.filter(\n          event => event.user_id === this.selectedPerson.id\n        )\n      }\n      return events\n    }\n  },\n\n  methods: {\n    ...mapActions(['loadEvents']),\n\n    async loadDayEvents() {\n      const before = moment(this.currentDate).add(1, 'days')\n      const after = moment(this.currentDate)\n      this.selectedEvents = {}\n      this.events = []\n      this.loading.events = true\n      try {\n        const events = await this.loadEvents({\n          after: formatFullDateWithRevertedTimezone(after, this.timezone),\n          before: formatFullDateWithRevertedTimezone(before, this.timezone),\n          limit: PAGE_SIZE\n        })\n        this.events = this.formatEvents(events)\n        this.hasMoreEvents = events.length >= PAGE_SIZE\n      } catch (err) {\n        console.error(err)\n      } finally {\n        this.loading.events = false\n      }\n    },\n\n    async loadMoreEvents() {\n      if (!this.events.length) return\n\n      this.loading.moreEvents = true\n      const lastEventId = this.events[this.events.length - 1].id\n      const before = moment(this.currentDate).add(1, 'days')\n      const after = moment(this.currentDate)\n      try {\n        const events = await this.loadEvents({\n          after: formatFullDateWithRevertedTimezone(after, this.timezone),\n          before: formatFullDateWithRevertedTimezone(before, this.timezone),\n          lastEventId,\n          limit: PAGE_SIZE\n        })\n        this.events = [...this.events, ...this.formatEvents(events)]\n        this.hasMoreEvents = events.length >= PAGE_SIZE\n      } catch (err) {\n        console.error(err)\n      } finally {\n        this.loading.moreEvents = false\n      }\n    },\n\n    formatEvents(events) {\n      return events.map(event => {\n        const [name, type] = event.name.split(':')\n        return {\n          id: event.id,\n          date: this.formatDate(event.created_at),\n          data: event.data,\n          name,\n          shortType: type.substring(0, 3),\n          type,\n          user_id: event.user_id\n        }\n      })\n    },\n\n    selectLine(event) {\n      this.selectedEvents[event.id] = !this.selectedEvents[event.id]\n    },\n\n    isLink(key) {\n      const linkKeys = ['project_id', 'task_id']\n      return linkKeys.includes(key)\n    },\n\n    getLink(event, key) {\n      const productionId = event.data.project_id\n      const entityType = key.substring(0, key.length - 3)\n      if (entityType === 'project') {\n        return `/productions/${productionId}/news-feed`\n      } else {\n        const entityId = event.data[key]\n        return `/productions/${productionId}/${entityType}s/${entityId}`\n      }\n    }\n  },\n\n  watch: {\n    currentDate() {\n      this.loadDayEvents()\n    }\n  },\n\n  head() {\n    return {\n      title: `${this.$t('logs.title')} - Kitsu`\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.dark {\n  .tag {\n    color: $white;\n    background: $dark-grey;\n  }\n\n  .nb-events {\n    color: $white;\n  }\n}\n\n.empty {\n  color: var(--text);\n  font-style: italic;\n}\n\n.log-list {\n  display: flex;\n  flex-direction: column;\n  margin-bottom: 2em;\n}\n\n.event-line {\n  cursor: pointer;\n  padding: 0.25em;\n  border-radius: 4px;\n  transition: background 0.2s ease;\n\n  &:hover {\n    background: var(--background-selectable);\n  }\n\n  .tag {\n    border-radius: 4px;\n  }\n\n  .date {\n    font-weight: 500;\n    min-width: 140px;\n  }\n\n  .type {\n    text-transform: uppercase;\n    min-width: 50px;\n  }\n\n  .type[data-status='new'] {\n    color: white;\n    background: $green;\n  }\n\n  .type[data-status='upd'] {\n    color: white;\n    background: $blue;\n  }\n\n  .type[data-status='add'] {\n    color: white;\n    background: $dark-purple;\n  }\n\n  .type[data-status='del'] {\n    color: white;\n    background: $red;\n  }\n\n  .type[data-status='sta'] {\n    color: white;\n    background: $pink;\n  }\n\n  .type[data-status='set'] {\n    background: $purple;\n  }\n\n  ul {\n    cursor: default;\n    color: var(--text);\n    border-left: 3px solid $light-grey;\n    list-style-type: none;\n    margin: 1em 1em 2em 0.2em;\n    padding-left: 1em;\n\n    .key {\n      font-weight: 500;\n      width: 170px;\n      display: inline-block;\n    }\n\n    a {\n      color: var(--text);\n\n      &:hover {\n        text-decoration: underline;\n      }\n    }\n  }\n}\n</style>\n","<template>\n  <div class=\"data-list\">\n    <div style=\"overflow: hidden\">\n      <table class=\"datatable\" ref=\"headerWrapper\">\n        <thead class=\"datatable-head\">\n          <tr class=\"datatable-row-header\">\n            <th class=\"date\">\n              {{ $t('logs.preview_files.date') }}\n            </th>\n            <th class=\"production\">\n              {{ $t('logs.preview_files.production') }}\n            </th>\n            <th class=\"entity-name\">\n              {{ $t('logs.preview_files.entity_name') }}\n            </th>\n            <th class=\"task-type\">\n              {{ $t('logs.preview_files.task_type_id') }}\n            </th>\n            <th class=\"revision\">\n              {{ $t('logs.preview_files.revision') }}\n            </th>\n            <th class=\"status\">\n              {{ $t('logs.preview_files.status') }}\n            </th>\n            <th class=\"end-cell\"></th>\n          </tr>\n        </thead>\n      </table>\n    </div>\n\n    <table-info :is-loading=\"isLoading\" :is-error=\"isError\" />\n\n    <div @scroll.passive=\"onBodyScroll\" v-if=\"previewFiles.length > 0\">\n      <table class=\"datatable\">\n        <tbody class=\"datatable-body\">\n          <tr\n            :key=\"previewFile.id\"\n            class=\"datatable-row\"\n            @click=\"redirectToTask(previewFile)\"\n            v-for=\"previewFile in previewFiles\"\n          >\n            <td class=\"date\">\n              {{ formatDate(previewFile.created_at) }}\n            </td>\n            <td class=\"production\">\n              <production-name-cell\n                :entry=\"productionMap.get(previewFile.project_id)\"\n              />\n            </td>\n            <td class=\"entity-name\">\n              {{ previewFile.full_entity_name }}\n            </td>\n            <task-type-cell\n              class=\"task-type\"\n              :task-type=\"taskTypeMap.get(previewFile.task_type_id)\"\n            />\n            <td class=\"revision\">\n              {{ previewFile.revision }}\n            </td>\n            <td class=\"status\" :data-status=\"previewFile.status\">\n              {{ previewFile.status }}\n            </td>\n            <td class=\"end-cell has-text-right\">\n              <button-simple\n                class=\"mark-broken-button\"\n                :text=\"$t('logs.preview_files.mark_broken')\"\n                @click.stop=\"$emit('mark-broken-clicked', previewFile.id)\"\n                v-if=\"previewFile.status === 'processing'\"\n              />\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapGetters, mapActions } from 'vuex'\n\nimport { formatListMixin } from '@/components/mixins/format'\nimport { getTaskPath } from '@/lib/path'\n\nimport ButtonSimple from '@/components/widgets/ButtonSimple.vue'\nimport TableInfo from '@/components/widgets/TableInfo.vue'\nimport ProductionNameCell from '@/components/cells/ProductionNameCell.vue'\nimport TaskTypeCell from '@/components/cells/TaskTypeCell.vue'\n\nexport default {\n  name: 'preview-file-list',\n\n  mixins: [formatListMixin],\n\n  components: {\n    ButtonSimple,\n    ProductionNameCell,\n    TableInfo,\n    TaskTypeCell\n  },\n\n  props: {\n    previewFiles: {\n      type: Array,\n      default: () => []\n    },\n    isLoading: {\n      type: Boolean,\n      default: false\n    },\n    isError: {\n      type: Boolean,\n      default: false\n    }\n  },\n\n  emits: ['mark-broken-clicked'],\n\n  computed: {\n    ...mapGetters(['productionMap', 'taskTypeMap'])\n  },\n\n  methods: {\n    ...mapActions(['loadTask']),\n\n    onBodyScroll(event) {\n      const position = event.target\n      this.$refs.headerWrapper.style.left = `-${position.scrollLeft}px`\n    },\n\n    async redirectToTask(previewFile) {\n      const task = await this.loadTask({ taskId: previewFile.task_id })\n      return this.$router.push(\n        getTaskPath(\n          task,\n          task.project,\n          task.project.production_type === 'tvshow',\n          task.episode,\n          this.taskTypeMap\n        )\n      )\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.date {\n  max-width: 150px;\n  width: 150px;\n}\n\n.production {\n  max-width: 300px;\n  width: 300px;\n}\n\n.entity-name {\n  max-width: 300px;\n  width: 300px;\n  word-break: break-word;\n}\n\n.task-type {\n  max-width: 200px;\n  width: 200px;\n  overflow: auto hidden;\n}\n\n.revision {\n  max-width: 80px;\n  width: 80px;\n}\n\n.status {\n}\n\n.datatable-head {\n  th {\n    border: 0;\n  }\n}\n\ntr:first-child {\n  td:first-child {\n    border-top-left-radius: 10px;\n  }\n  td:last-child {\n    border-top-right-radius: 10px;\n  }\n}\n\ntr:last-child {\n  td:first-child {\n    border-bottom-left-radius: 10px;\n  }\n  td:last-child {\n    border-bottom-right-radius: 10px;\n  }\n}\n\ntr {\n  cursor: pointer;\n}\n\ntd.status {\n  text-transform: uppercase;\n  font-weight: 500;\n}\n\ntd.status[data-status='broken'] {\n  color: red;\n}\n\ntd.status[data-status='processing'] {\n}\n</style>\n","<template>\n  <div class=\"mt1\">\n    <p class=\"flexrow\">\n      <em class=\"flexrow-item\">{{ $t('logs.preview_files.explanation') }}</em>\n      <span class=\"filler\"></span>\n      <button-simple\n        class=\"flexrow-item\"\n        icon=\"refresh\"\n        :is-loading=\"loading.previewFiles\"\n        :title=\"$t('main.reload')\"\n        @click=\"reload\"\n      />\n    </p>\n    <div class=\"has-text-centered\" v-if=\"loading.previewFiles\">\n      <spinner />\n    </div>\n    <p class=\"empty\" v-else-if=\"!previewFiles.length\">\n      {{ $t('logs.preview_files.empty_list') }}\n    </p>\n    <template v-else>\n      <preview-file-list\n        :preview-files=\"previewFiles\"\n        :is-loading=\"loading.previewFiles\"\n        @mark-broken-clicked=\"markBrokenClicked\"\n      />\n      <div class=\"has-text-centered mt1\" v-if=\"hasMorePreviewFiles\">\n        <button-simple\n          :is-loading=\"loading.morePreviewFiles\"\n          :text=\"$t('main.load_more')\"\n          @click=\"loadMorePreviewFiles\"\n        />\n      </div>\n    </template>\n  </div>\n</template>\n\n<script>\nimport { mapActions } from 'vuex'\n\nimport ButtonSimple from '@/components/widgets/ButtonSimple.vue'\nimport PreviewFileList from '@/components/lists/PreviewFileList.vue'\nimport Spinner from '@/components/widgets/Spinner.vue'\n\nconst PAGE_SIZE = 100\n\nexport default {\n  name: 'preview-files',\n\n  components: {\n    ButtonSimple,\n    PreviewFileList,\n    Spinner\n  },\n\n  data() {\n    return {\n      hasMorePreviewFiles: false,\n      previewFiles: [],\n      loading: {\n        previewFiles: false,\n        morePreviewFiles: false\n      }\n    }\n  },\n\n  mounted() {\n    this.reload()\n  },\n\n  methods: {\n    ...mapActions(['getRunningPreviewFiles', 'markPreviewFileAsBroken']),\n\n    async reload() {\n      this.previewFiles = []\n      this.loading.previewFiles = true\n      try {\n        const previewFiles = await this.getRunningPreviewFiles({\n          limit: PAGE_SIZE\n        })\n        this.previewFiles = previewFiles\n        this.hasMorePreviewFiles = previewFiles.length >= PAGE_SIZE\n      } catch (err) {\n        console.error(err)\n      } finally {\n        this.loading.previewFiles = false\n      }\n    },\n\n    async loadMorePreviewFiles() {\n      if (!this.previewFiles.length) return\n\n      this.loading.morePreviewFiles = true\n      const lastPreviewFileId =\n        this.previewFiles[this.previewFiles.length - 1].id\n      try {\n        const previewFiles = await this.getRunningPreviewFiles({\n          limit: PAGE_SIZE,\n          lastPreviewFileId\n        })\n        this.previewFiles = [...this.previewFiles, ...previewFiles]\n        this.hasMorePreviewFiles = previewFiles.length >= PAGE_SIZE\n      } catch (err) {\n        console.error(err)\n      } finally {\n        this.loading.morePreviewFiles = false\n      }\n    },\n\n    async markBrokenClicked(previewFileId) {\n      const previewFile = this.previewFiles.find(p => p.id === previewFileId)\n      previewFile.status = 'broken'\n      await this.markPreviewFileAsBroken(previewFileId)\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.dark {\n  .tag {\n    color: $white;\n    background: $dark-grey;\n  }\n}\n.tag {\n  border-radius: 4px;\n}\n\nem {\n  color: var(--text);\n}\n\n.date {\n  font-weight: 500;\n}\n\n.status {\n  text-transform: uppercase;\n  min-width: 50px;\n}\n\n.status[data-status='broken'] {\n  color: $white;\n  background: $dark-red;\n}\n\n.status[data-status='processing'] {\n  color: $white;\n  background: $blue;\n}\n\n.empty {\n  color: var(--text);\n  font-size: 1.2em;\n  font-weight: 500;\n  text-align: center;\n  margin-top: 1em;\n}\n</style>\n","<template>\n  <div class=\"logs fixed-page\">\n    <div class=\"tabs logs-tabs\">\n      <ul>\n        <li :class=\"{ 'is-active': isActiveTab('events') }\">\n          <a @click=\"activeTab = 'events'\">\n            {{ $t('logs.title') }}\n          </a>\n        </li>\n        <li :class=\"{ 'is-active': isActiveTab('preview_files') }\">\n          <a @click=\"activeTab = 'preview_files'\">\n            {{ $t('logs.preview_files.title') }}\n          </a>\n        </li>\n      </ul>\n    </div>\n    <events v-if=\"isActiveTab('events')\" />\n    <preview-files v-else-if=\"isActiveTab('preview_files')\" />\n  </div>\n</template>\n\n<script>\nimport Events from '@/components/pages/logs/Events.vue'\nimport PreviewFiles from '@/components/pages/logs/PreviewFiles.vue'\n\nexport default {\n  name: 'logs',\n\n  components: {\n    Events,\n    PreviewFiles\n  },\n\n  data() {\n    return {\n      activeTab: 'events'\n    }\n  },\n\n  mounted() {\n    if (this.$route.query.tab) {\n      this.activeTab = this.$route.query.tab\n    }\n  },\n\n  methods: {\n    isActiveTab(tab) {\n      return this.activeTab === tab\n    }\n  },\n\n  watch: {\n    activeTab() {\n      if (this.$route.query.tab !== this.activeTab) {\n        this.$router.push({\n          query: {\n            tab: this.activeTab\n          }\n        })\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.fixed-page {\n  margin-top: 60px;\n  padding: 2em;\n  overflow: scroll;\n}\n\n.tabs.logs-tabs {\n  overflow: visible;\n  ul {\n    margin-left: 0;\n  }\n}\n</style>\n"],"names":["PAGE_SIZE","_sfc_main","timeMixin","ButtonSimple","DateField","PeopleAvatar","PeopleField","PeopleName","Spinner","mapGetters","moment","events","event","mapActions","before","after","formatFullDateWithRevertedTimezone","err","lastEventId","name","type","key","productionId","entityType","entityId","_hoisted_1","_hoisted_2","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_openBlock","_createElementBlock","_createElementVNode","_createVNode","_component_date_field","$options","_ctx","$data","_cache","$event","_component_people_field","_component_button_simple","_hoisted_3","_toDisplayString","_createCommentVNode","_hoisted_4","_component_spinner","_hoisted_5","_Fragment","_renderList","_withModifiers","_createBlock","_component_people_avatar","_component_people_name","_createTextVNode","_hoisted_13","formatListMixin","ProductionNameCell","TableInfo","TaskTypeCell","position","previewFile","task","getTaskPath","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_component_table_info","$props","args","_component_production_name_cell","_component_task_type_cell","PreviewFileList","previewFiles","lastPreviewFileId","previewFileId","p","_component_preview_file_list","Events","PreviewFiles","tab","_normalizeClass","_component_events","_component_preview_files"],"mappings":"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"}