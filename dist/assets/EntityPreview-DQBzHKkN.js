import{_ as h,B as v,r,o as d,c as l,f as o,F as c,i as a,d as m,I as f,h as w,n as _}from"./index-C2m_IhNF.js";import{V as g}from"./VideoViewer-Da8LCLxo.js";import{E as b}from"./eye-CKzk1Q6q.js";const k={name:"entity-preview",components:{ButtonSimple:v,EyeIcon:b,VideoViewer:g},data(){return{isPlaying:!1}},props:{entity:{default:()=>{},type:Object},cover:{default:!1,type:Boolean},width:{default:null,type:Number},height:{default:null,type:Number},emptyHeight:{default:null,type:Number},emptyWidth:{default:null,type:Number},previewFileId:{default:null,type:String},isRoundedTopBorder:{default:!1,type:Boolean},showMovie:{default:!0,type:Boolean}},computed:{isMovie(){return this.entity.preview_file_extension==="mp4"},thumbnailPath(){return`/api/pictures/previews/preview-files/${this.previewFileId||this.entity.preview_file_id}.png`},thumbnailKey(){return`preview-${this.previewFileId||this.entity.preview_file_id}`}},methods:{onPictureClicked(){if(this.noPreview)return;const t=this.previewFileId||this.entity.preview_file_id;t&&this.$store.commit("SHOW_PREVIEW_FILE",t)},onVideoClicked(){this.isPlaying?(this.$refs["video-viewer"].pause(),this.$refs["button-play"].$el.style.display="initial"):(this.$refs["video-viewer"].play(),this.$refs["button-play"].$el.style.display="none"),this.isPlaying=!this.isPlaying}}},I={key:0,class:"preview-wrapper preview-video"},x=["src","width"];function B(t,n,e,F,P,i){const u=r("video-viewer"),p=r("button-simple"),y=r("eye-icon");return i.isMovie&&e.showMovie?(d(),l("div",I,[o(u,{ref:"video-viewer","is-repeating":!0,"default-height":e.height,preview:{id:e.entity.preview_file_id,extension:e.entity.preview_file_extension},"is-rounded-top-border":e.isRoundedTopBorder,onClick:n[0]||(n[0]=s=>i.onVideoClicked())},null,8,["default-height","preview","is-rounded-top-border"]),o(p,{class:"button-play",icon:"play",ref:"button-play",title:t.$t("playlists.actions.play"),onClick:n[1]||(n[1]=s=>i.onVideoClicked())},null,8,["title"])])):(d(),l("div",{key:1,class:_(["preview-wrapper preview-picture",{cover:e.cover}]),style:a({width:e.emptyWidth?`${e.emptyWidth}px`:void 0,"min-width":e.emptyWidth?`${e.emptyWidth}px`:void 0,height:e.emptyHeight?`${e.emptyHeight}px`:void 0,"border-top-left-radius":e.isRoundedTopBorder?"10px":void 0,"border-top-right-radius":e.isRoundedTopBorder?"10px":void 0,"background-image":e.cover?`url(${i.thumbnailPath})`:void 0})},[e.cover?w("",!0):(d(),l(c,{key:0},[(d(),l("img",{class:"thumbnail-picture",loading:"lazy",key:i.thumbnailKey,src:i.thumbnailPath,style:a({width:"auto","max-height":`${e.emptyHeight}px`}),width:e.width||"",alt:""},null,12,x)),m("a",{class:"view-icon",onClick:n[2]||(n[2]=f(s=>i.onPictureClicked(),["stop"]))},[o(y,{size:18})])],64))],6))}const N=h(k,[["render",B],["__scopeId","data-v-cedda9cd"]]);export{N as E};
//# sourceMappingURL=EntityPreview-DQBzHKkN.js.map
