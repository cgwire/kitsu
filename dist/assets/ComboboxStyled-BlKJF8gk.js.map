{"version":3,"file":"ComboboxStyled-BlKJF8gk.js","sources":["../../src/components/widgets/ComboboxStyled.vue"],"sourcesContent":["<template>\n  <div :class=\"{ active }\" :disabled=\"disabled || null\">\n    <label class=\"label\" v-if=\"label.length\">\n      {{ label }}\n    </label>\n    <div\n      class=\"combo\"\n      :class=\"{\n        thin,\n        compact: isCompact,\n        reversed: isReversed,\n        open: showList\n      }\"\n      ref=\"select\"\n      @click=\"toggleList\"\n    >\n      <div class=\"flexrow\" :title=\"selectedOptionLabel\">\n        <slot name=\"icon\"></slot>\n        <div\n          class=\"selected-line mr05\"\n          :class=\"{ placeholder: selectedOption?.placeholder }\"\n          v-if=\"!isCompact\"\n        >\n          {{ selectedOptionLabel }}\n        </div>\n        <span\n          class=\"preview-status\"\n          :title=\"$t('tasks.validated')\"\n          v-if=\"selectedOption?.validation_status === 'validated'\"\n        ></span>\n        <chevron-down-icon class=\"down-icon flexrow-item\" />\n      </div>\n      <div class=\"select-input\" v-if=\"showList\">\n        <div\n          :key=\"option.id\"\n          class=\"option-line flexrow\"\n          :class=\"{ placeholder: option.placeholder }\"\n          @click=\"selectOption(option)\"\n          @click.middle=\"openRoute(option)\"\n          v-for=\"option in optionList\"\n        >\n          <entity-thumbnail\n            class=\"revision-thumbnail\"\n            :preview-file-id=\"option.value\"\n            :width=\"75\"\n            :height=\"45\"\n            :empty-width=\"75\"\n            :empty-height=\"45\"\n            no-preview\n            v-if=\"isPreview\"\n          />\n          <span class=\"filler\">\n            {{ option.optionLabel ?? getOptionLabel(option) }}\n          </span>\n          <span\n            class=\"preview-status\"\n            :title=\"$t('tasks.validated')\"\n            v-if=\"option.validation_status === 'validated'\"\n          ></span>\n        </div>\n      </div>\n    </div>\n    <div\n      @click=\"toggleList\"\n      :class=\"{\n        'c-mask': true,\n        'is-active': showList\n      }\"\n    ></div>\n  </div>\n</template>\n\n<script>\nimport { ChevronDownIcon } from 'lucide-vue-next'\n\nimport EntityThumbnail from '@/components/widgets/EntityThumbnail.vue'\n\nexport default {\n  name: 'combobox-styled',\n\n  components: {\n    ChevronDownIcon,\n    EntityThumbnail\n  },\n\n  emits: ['change', 'update:modelValue'],\n\n  data() {\n    return {\n      selectedOption: {\n        label: '',\n        value: ''\n      },\n      showList: false\n    }\n  },\n\n  props: {\n    active: {\n      default: false,\n      type: Boolean\n    },\n    disabled: {\n      default: false,\n      type: Boolean\n    },\n    label: {\n      default: '',\n      type: String\n    },\n    options: {\n      default: () => [],\n      type: Array\n    },\n    modelValue: {\n      default: '',\n      type: [String, Object]\n    },\n    localeKeyPrefix: {\n      default: '',\n      type: String\n    },\n    isCompact: {\n      default: false,\n      type: Boolean\n    },\n    isPreview: {\n      default: false,\n      type: Boolean\n    },\n    isReversed: {\n      default: false,\n      type: Boolean\n    },\n    keepOrder: {\n      default: false,\n      type: Boolean\n    },\n    thin: {\n      default: false,\n      type: Boolean\n    }\n  },\n\n  computed: {\n    optionList() {\n      if (this.isReversed && !this.keepOrder) {\n        return [...this.options].reverse()\n      }\n      return this.options\n    },\n\n    selectedOptionLabel() {\n      return this.selectedOption ? this.getOptionLabel(this.selectedOption) : ''\n    }\n  },\n\n  methods: {\n    openRoute(option) {\n      const ahref = this.$router.resolve(option.route).href\n      const url = `${window.location.protocol}//${window.location.host}${ahref}`\n      window.open(url, '_blank')\n    },\n\n    selectOption(option) {\n      this.$emit('update:modelValue', option.value)\n      this.$emit('change', option.value)\n      this.selectedOption = option\n    },\n\n    toggleList() {\n      if (this.showList) {\n        this.lastScrollPosition = this.$refs.select.scrollTop\n      }\n      this.showList = !this.showList\n      if (this.showList) {\n        this.$nextTick(() => {\n          this.$refs.select?.scrollTo({ top: this.lastScrollPosition, left: 0 })\n        })\n      }\n    },\n\n    getOptionLabel(option) {\n      if (this.localeKeyPrefix && option.label) {\n        return this.$t(this.localeKeyPrefix + option.label.toLowerCase())\n      }\n      return option.label\n    }\n  },\n\n  watch: {\n    options: {\n      deep: true,\n      immediate: true,\n      handler() {\n        if (this.options.length > 0) {\n          const option = this.options.find(\n            ({ value }) => value === this.modelValue\n          )\n          this.selectedOption = option || this.options[0]\n        }\n      }\n    },\n\n    showList() {\n      if (this.showList && this.isReversed) {\n        this.$nextTick(() => {\n          if (!this.$refs.select?.children) return\n          let list = null\n          for (const child of this.$refs.select.children) {\n            if (child.className !== 'flexrow') {\n              list = child\n            }\n          }\n          list?.scrollTo({ top: this.optionList.length * 60 })\n        })\n      }\n    },\n\n    modelValue() {\n      this.selectedOption = this.options.find(o => o.value === this.modelValue)\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n[disabled] {\n  pointer-events: none;\n  opacity: 0.5;\n\n  .down-icon {\n    color: $white;\n  }\n}\n\n.dark {\n  .select-input,\n  .selected-line,\n  .option-line,\n  .combo {\n    color: var(--text);\n    background: $dark-grey-light;\n    border-color: $dark-grey;\n  }\n\n  .option-line:hover {\n    background: $dark-purple;\n  }\n}\n\n.combo {\n  background: $white;\n  border: 1px solid $light-grey-light;\n  border-radius: 10px;\n  user-select: none;\n  cursor: pointer;\n  display: inline-block;\n  margin: 0;\n  margin-top: 1px;\n  max-width: 400px;\n  padding: 0.5em;\n  position: relative;\n  vertical-align: middle;\n\n  &.open {\n    border-bottom-left-radius: 0;\n    border-bottom-right-radius: 0;\n  }\n}\n\n.combo:hover {\n  border: 1px solid $green;\n}\n\n.selected-line {\n  flex: 1;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  overflow: hidden;\n}\n\n.option-line {\n  background: $white;\n  border-bottom: 1px solid $light-grey-light;\n  cursor: pointer;\n  margin: 0;\n  padding: 0.5em;\n  min-width: 150px;\n\n  &:hover {\n    background: $purple;\n  }\n}\n\n.option-line,\n.selected-line {\n  &.placeholder {\n    color: rgba($white, 0.5);\n  }\n}\n\n.down-icon {\n  width: 15px;\n  min-width: 15px;\n  margin-right: 0.4em;\n  color: $green;\n}\n\n.select-input {\n  background: var(--background);\n  border: 1px solid $light-grey-light;\n  border-bottom-left-radius: 1em;\n  border-bottom-right-radius: 1em;\n  left: 0;\n  margin-left: -1px;\n  max-height: 180px;\n  overflow-x: hidden;\n  overflow-y: auto;\n  position: absolute;\n  width: inherit;\n  top: 38px;\n  z-index: 2000;\n\n  .option-line {\n    padding-right: 0.4em;\n    white-space: nowrap;\n  }\n}\n\n.c-mask {\n  z-index: 199;\n}\n\n.field .label {\n  padding-top: 5px;\n}\n\n.revision-thumbnail {\n  margin-right: 0.5em;\n}\n\n.thin {\n  height: 30px;\n  padding: 3px 0 3px 10px;\n  margin-bottom: 3px;\n\n  .select-input {\n    top: 29px;\n  }\n}\n\n.preview-status {\n  background: $light-green;\n  border-radius: 50%;\n  height: 8px;\n  min-width: 8px;\n  width: 8px;\n  margin-right: 0.5em;\n}\n\n.reversed {\n  &.open {\n    border-top-left-radius: 0;\n    border-top-right-radius: 0;\n    border-bottom-left-radius: 1em;\n    border-bottom-right-radius: 1em;\n  }\n\n  .select-input {\n    border-top-left-radius: 1em;\n    border-top-right-radius: 1em;\n    border-bottom-left-radius: 0;\n    border-bottom-right-radius: 0;\n    height: 180px;\n    top: -180px;\n  }\n}\n</style>\n"],"names":["_sfc_main","ChevronDownIcon","EntityThumbnail","option","ahref","url","value","list","child","o","_hoisted_1","_hoisted_3","_hoisted_4","_hoisted_6","_hoisted_7","_hoisted_8","_createElementBlock","_normalizeClass","$props","_hoisted_2","_toDisplayString","_createCommentVNode","_createElementVNode","$data","$options","args","_renderSlot","_ctx","_createVNode","_component_chevron_down_icon","_openBlock","_hoisted_5","_Fragment","_renderList","$event","_withModifiers","_createBlock","_component_entity_thumbnail"],"mappings":"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"}