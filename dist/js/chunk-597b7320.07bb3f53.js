(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-597b7320"],{"21da":function(e,t,a){"use strict";a("296a")},"296a":function(e,t,a){},"33f5":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"columns fixed-page"},[a("div",{staticClass:"column main-column"},[a("div",{staticClass:"flexrow project-dates"},[a("div",{staticClass:"flexrow-item"},[a("label",{staticClass:"label"},[e._v(" "+e._s(e.$t("main.start_date"))+" ")]),a("datepicker",{attrs:{"wrapper-class":"datepicker","input-class":"date-input input",language:e.locale,"disabled-dates":{days:[6,0]},"monday-first":!0,format:"yyyy-MM-dd",disabled:""},model:{value:e.selectedStartDate,callback:function(t){e.selectedStartDate=t},expression:"selectedStartDate"}})],1),a("div",{staticClass:"flexrow-item field"},[a("label",{staticClass:"label"},[e._v(" "+e._s(e.$t("main.end_date"))+" ")]),a("datepicker",{attrs:{"wrapper-class":"datepicker","input-class":"date-input input",language:e.locale,"disabled-dates":{days:[6,0]},"monday-first":!0,format:"yyyy-MM-dd",disabled:""},model:{value:e.selectedEndDate,callback:function(t){e.selectedEndDate=t},expression:"selectedEndDate"}})],1),a("combobox-number",{staticClass:"flexrow-item zoom-level",attrs:{label:e.$t("schedule.zoom_level"),options:e.zoomOptions},model:{value:e.zoomLevel,callback:function(t){e.zoomLevel=t},expression:"zoomLevel"}})],1),a("schedule",{attrs:{"end-date":e.endDate,hierarchy:e.scheduleItems,"is-loading":e.loading.schedule,"is-error":e.errors.schedule,"start-date":e.startDate,"with-milestones":!1,"zoom-level":e.zoomLevel},on:{"item-changed":e.onScheduleItemChanged,"change-zoom":e.changeZoom,"root-element-expanded":e.expandProductionElement}})],1)])},n=[],d=a("5530"),o=(a("d81d"),a("b0c0"),a("2f62")),l=a("7f45"),c=a.n(l),i=a("2430"),r=a("fa33"),u=a("9d8b"),m=a("3657"),h=a("7930"),p=a("1e4c"),b=a("d7c7"),f={name:"production-schedule",components:{ComboboxNumber:p["a"],Datepicker:r["a"],Schedule:b["a"]},data:function(){return{endDate:c()().add(6,"months"),scheduleItems:[],startDate:c()(),selectedStartDate:null,selectedEndDate:null,zoomLevel:2,zoomOptions:[{label:"1",value:1},{label:"2",value:2},{label:"3",value:3}],loading:{schedule:!1},errors:{schedule:!1}}},mounted:function(){this.reset()},computed:Object(d["a"])(Object(d["a"])({},Object(o["c"])(["openProductions","taskTypeMap","user"])),{},{locale:function(){return"fr_FR"===this.user.locale?i["fr"]:i["en"]}}),methods:Object(d["a"])(Object(d["a"])({},Object(o["b"])(["editProduction","loadScheduleItems","saveScheduleItem"])),{},{changeZoom:function(e){e.wheelDelta<0&&this.zoomLevel>1&&this.zoomLevel--,e.wheelDelta>0&&this.zoomLevel<3&&this.zoomLevel++},reset:function(){this.scheduleItems=this.convertScheduleItems(this.openProductions),this.startDate=Object(m["l"])(this.scheduleItems),this.endDate=Object(m["m"])(this.scheduleItems),this.selectedStartDate=this.startDate.toDate(),this.selectedEndDate=this.endDate.toDate()},convertScheduleItems:function(e){return e.map((function(e){var t=Object(m["o"])(e.start_date),a=Object(m["k"])(t,e.end_date);return Object(d["a"])(Object(d["a"])({},e),{},{avatar:"Project"===e.type,color:e.color||h["a"].fromString(e.name,!0),startDate:t,endDate:a,expanded:!1,loading:!1,editable:!0,route:Object(u["d"])(e.id),children:[]})}))},convertTaskTypeScheduleItems:function(e){var t=this;return e.map((function(e){var a=Object(m["o"])(e.start_date),s=Object(m["k"])(a,e.end_date),n=t.taskTypeMap.get(e.task_type_id);return Object(d["a"])(Object(d["a"])({},e),{},{name:n.name,color:n.color,startDate:a,endDate:s,expanded:!1,loading:!1,editable:!0,children:[]})}))},expandProductionElement:function(e){var t=this;e.expanded?e.expanded=!1:(e.loading=!0,e.expanded=!0,this.loadScheduleItems(e).then((function(a){a=t.convertTaskTypeScheduleItems(a),e.children=a,e.loading=!1})))},onScheduleItemChanged:function(e){"Project"!==e.type?this.saveScheduleItem(e):this.editProduction({id:e.id,start_date:e.startDate.format("YYYY-MM-DD"),end_date:e.endDate.format("YYYY-MM-DD")})}}),socket:{},watch:{},metaInfo:function(){return{title:"".concat(this.$t("schedule.title_main")," - Kitsu")}}},v=f,D=(a("21da"),a("0c7c")),j=Object(D["a"])(v,s,n,!1,null,"c1021eec",null);t["default"]=j.exports}}]);
//# sourceMappingURL=chunk-597b7320.07bb3f53.js.map