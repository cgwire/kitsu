{"version":3,"sources":["webpack:///./src/components/pages/Edit.vue?54ca","webpack:///./src/components/previews/PreviewsPerTaskType.vue?c571","webpack:///src/components/previews/PreviewsPerTaskType.vue","webpack:///./src/components/previews/PreviewsPerTaskType.vue?dbfe","webpack:///./src/components/previews/PreviewsPerTaskType.vue","webpack:///src/components/pages/Edit.vue","webpack:///./src/components/pages/Edit.vue?cdfd","webpack:///./src/components/pages/Edit.vue","webpack:///./src/components/pages/Edit.vue?59c6","webpack:///./src/components/previews/PreviewsPerTaskType.vue?c505"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","ref","attrs","editsPath","currentEntity","_e","title","isLoading","key","id","editMap","on","onPreviewChanged","currentEdit","isValidRoomId","currentPreview","previewRoomRef","joinRoom","leaveRoom","directives","name","rawName","value","expression","isCurrentPreviewMovie","style","position","opacity","overlayOpacity","entityList","fullScreen","isHd","isRepeating","currentPreviewIndex","isMuted","onMaxDurationUpdate","onMetadataLoaded","onVideoRepeated","onFrameUpdate","isCurrentPreviewModel","currentPreviewDlPath","isCurrentPreviewSound","pause","isCurrentPreviewFile","width","extension","length","_v","_s","$t","isCurrentPreviewPicture","left","right","currentPreviewPath","class","isCommentsHidden","task","currentTimeRaw","frameDuration","onTimeCodeClicked","annotations","nbFrames","onScrubStart","onScrubEnd","onProgressChanged","isPlaying","pauseClicked","playClicked","framesSeenOfPicture","framesPerImage","playingEntityIndex","domProps","$event","target","composing","$set","currentEntityPreviewLength","onPreviousPreviewClicked","onNextPreviewClicked","speed","onSpeedClicked","onToggleSoundClicked","onRepeatClicked","currentTime","maxDuration","currentFrame","padStart","onPreviousFrameClicked","onNextFrameClicked","isCurrentUserArtist","undoLastAction","redoLastAction","isShowingPalette","textColor","onPickColor","onChangeTextColor","active","isTyping","onTypeClicked","isShowingPencilPalette","pencil","pencilPalette","onPickPencil","onChangePencil","color","onChangeColor","isDrawing","onAnnotateClicked","onDeleteClicked","onCommentClicked","onFullscreenClicked","entityNavOptions","model","callback","$$v","currentSection","zoomOptions","zoomLevel","tasks","modals","edit","_l","descriptor","data","field_name","scheduleItems","children","tasksStartDate","tasksEndDate","errors","confirmEditEdit","staticRenderFns","taskTypeOptions","taskTypeId","previewFileOptions","previewFileId","task_status_id","taskStatus","components","ComboboxStyled","ValidationTag","props","entityMap","default","type","index","entity","mounted","computed","mapGetters","map","sort","label","methods","getTaskTypeIdForPreviewFile","setCurrentParameters","taskTypeIds","watch","previewFile","component","mixins","annotationMixin","domMixin","entityMixin","formatListMixin","previewRoomMixin","playerMixin","ButtonSimple","CornerLeftUpIcon","ColorPicker","ComboboxNumber","DescriptionCell","DownloadIcon","EditEditModal","EntityNews","EntityPreviewFiles","EntityTaskList","EntityTimeLogs","EntityThumbnail","PageSubtitle","PageTitle","PencilPicker","PreviewRoom","PreviewsPerTaskType","RawVideoPlayer","Schedule","Spinner","TaskInfo","VideoProgress","isError","previewFileMap","tempMode","wasPlaying","beforeDestroy","mapActions","resetPreviewFileMap","Object","previewFiles","resetHeight","height","initPlayer","preview_file_id","preview_files","then","getCurrentEdit","form","catch","console","setPreviewFile","onAnnotationChanged","additions","deletions","updates","taskId","preview","scrollToEntity","resetData","onPreviewFilesUpdate","currentProduction","currentEpisode","playingPreviewFileId","previewsCombo","socket","events","metaInfo"],"mappings":"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xH,EAAI6I,cAAcrB,GAAK3F,WAAW,mBAAmBzB,EAAG,OAAO,CAACE,YAAY,qBAAqB,CAACN,EAAIqD,GAAG,oCAAqCrD,EAAc,WAAEI,EAAG,MAAM,CAACE,YAAY,gBAAgB,CAACF,EAAG,iBAAiB,CAACE,YAAY,eAAeE,MAAM,CAAC,KAAO,CAAEsI,eAAgB9I,EAAI+I,WAAWhI,IAAI,aAAY,EAAK,MAAO,MAAU,GAAGf,EAAIW,MAAM,IACz4B,EAAkB,G,wtBCwCP,OACfe,8BAEAsH,YACAC,sBACAC,sBAGAjB,gBACA,OACAU,gBACAE,4CAIAM,OACAC,WACAC,qBACAC,UAEAC,OACAF,UACAC,aAEAE,QACAH,qBACAC,cAIAG,mBACA,6BAGAC,gBACAC,gBACA,UACA,cACA,gBACA,0BACA,IAEAjB,2BAAA,WACA,qCACA,eACAkB,iBAAA,2BACAA,iBAAA,4CACAC,uCACAD,iBACA,OACAE,aACAlI,gBAKAgH,8BACA,qDACA,iCACAkB,6BACAlI,gBAIAmH,sBACA,4BAEA,yCACA,eAEA,yCACA,MACA,0BACA,eACA,+CACA,SAEA,YAKAgB,SACAC,0CAAA,WACA,2BACA,gCACA,2BACA,uBAKAC,gCAEA,6CACA,aACA,8BACA,iDACAC,EACA,8BAGA,kBACA,yBAMAC,OACAxB,sBAAA,WAIA,6CACA,kBACA,0BACA,0CAGA,mBADA,EACA,4BAEA,aAGA,yBAIAE,yBAAA,WACA,OACA,6CACA,gBACAuB,sBACA,kCAGA,6CAGA,oCAGA,oCACA,mDACA,mDC1L4W,I,wBCQxWC,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,WACA,MAIa,EAAAA,E,utPCkmBA,QACf3I,YACA4I,QACAC,OACAC,OACAC,OACAC,OACAC,OACAC,QAEA5B,YACA6B,oBACAC,wBACAC,mBACA9B,sBACA+B,sBACAC,uBACAC,oBACAC,qBACAC,kBACAC,0BACAC,sBACAC,sBACAC,uBACAC,oBACAC,iBACAC,oBACAC,mBACAC,sBACAC,sBACAC,gBACAC,eACAC,sBACAC,sBAGAjE,gBACA,OACA9G,iBACAsG,uBACA5G,aACAsL,WACA7K,oCACA8K,uBACAC,YACA9D,QACAT,SAEAT,kBACA,CAAAyC,cAAAlI,eACA,CAAAkI,iBAAAlI,kBACA,CAAAkI,sBAAAlI,uBACA,CAAAkI,iBAAAlI,kBACA,CAAAkI,gBAAAlI,oBAEAiG,QACAC,WAKA2B,mBAAA,WACA,iBACA,wDAEA,2BACA,+BACA,yCAEA,oBACA,6IACA,OAAA6C,cAAA,SACA,8BACA,0DAGA,2BACA,oBACA,sBACA,oBACA,uBAIAC,yBACA,0DAGA7C,gBACAC,gBACA,iBACA,oBACA,kBACA,sBACA,uBACA,WACA,QACA,UACA,0BACA,UACA,cACA,UACA,IAEA/I,iBACA,wBACA,8BACA,yDACA,uBAEA,iCAGA,cAIAH,qBACA,sBACA,0BACA,QACA,mEAKAsJ,eACAyC,gBACA,WACA,YACA,6BACA,6BACA,IAEAC,+BAAA,WACA,4BACA,mBACAC,sDACAC,uBACA,oCAMAC,uBAAA,WACA,2BACA,yBACAC,gDACA,wBACAA,uCAEA,4BACAA,+CAEA,sBACAA,qCAEA,0BACAA,yCAEA,6BACAA,4CAEAA,kDACA,6BACA,4DAEA,2CACA,yDAEA,wCACA,wBACA,gBACA,6BAKAC,sBAAA,WACA,mBAEA,2BAGA,0BACA,8CAAAC,qBAAAC,mCACA,kEACA,aACA,kDACA,sBACA,yBACA,uBACA,mBACA,oBACA,mBACA,mBACAC,iBACA,qBACA,uDACA,2CAKAC,0BACA,0DAGA1E,4BAAA,WACA2E,yBACA,kBACA,oBACA,iBACAF,iBACA,eACA,oBAEAG,mBACAC,iBACA,eACA,qBAIAC,2BACA,+BAEA,wCACA,kDACA,sDACA,8DACA,oDAEA,6DAEA,qDACA,mBACA,uBACA,0BAGApM,+BACA,aAKA,uCACA,uBACA,mCAGAqM,gCAAA,gBAAAC,cAAAC,cAAAC,YACA,YACA,8BACAC,SAAAC,UAAAJ,YAAAC,YAAAC,aAIAG,4BAKAC,qBAAA,WACA,2BACA,cACAb,iBACA,iCACA,eAGA,iEACA,iBACA,wBACA,eACA,yBAMAc,gCAAA,WACA,uEACA,iBACA,gCACA,wBAGA,iBACA,iCACA,4DAOA5D,OACA6D,6BACA,iCAGAC,0BACA,sCACA,kBAIAC,gCAAA,WAGA,kDAEA,2CACA,MAEA,uCACA,gBACA,qEACA,MACA,uBAEAC,kBACAA,8CAEAA,eACAA,2CAEA,YAMAC,QACAC,gBACA1D,sBACAC,0BAEA,oCACA,wCACA,gBAEA,mCACA,gBACA,qDACA,MAEA,4BACA,UAKA,6BAEA,qCACA,gCAKA0D,oBACA,OACA1N,0CCn+B6V,MCQzV,I,UAAY,eACd,GACAb,EACA0I,GACA,EACA,KACA,WACA,OAIa,gB,6CCnBf,W,kFCAA","file":"js/chunk-875ed646.b100eeaf.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"columns fixed-page edit\"},[_c('div',{staticClass:\"column main-column\"},[_c('div',{ref:\"page-header-row\",staticClass:\"page-header flexrow flexrow-item\"},[_c('div',{staticClass:\"flexrow block mb0 main-block\"},[_c('router-link',{staticClass:\"flexrow-item has-text-centered back-link\",attrs:{\"to\":_vm.editsPath}},[_c('corner-left-up-icon')],1),_c('span',{staticClass:\"flexrow-item\"},[(_vm.currentEntity)?_c('entity-thumbnail',{staticClass:\"entity-thumbnail\",attrs:{\"entity\":_vm.currentEntity,\"empty-height\":60,\"empty-width\":100,\"height\":60,\"width\":100}}):_vm._e()],1),_c('div',{staticClass:\"flexrow-item\"},[_c('page-title',{staticClass:\"entity-title\",attrs:{\"text\":_vm.title}})],1),(!_vm.isLoading && _vm.currentEntity)?_c('div',{key:_vm.currentEntity.id,staticClass:\"flexrow-item has-text-centered\"},[_c('previews-per-task-type',{ref:\"previews-per-task-type\",attrs:{\"entity\":_vm.currentEntity,\"entity-map\":_vm.editMap},on:{\"preview-changed\":_vm.onPreviewChanged}})],1):_vm._e()],1),_c('div',{staticClass:\"filler\"}),_c('div',{staticClass:\"flexrow-item block mt0\"},[(_vm.currentEdit && _vm.isValidRoomId(_vm.currentEdit.id) && _vm.currentPreview && _vm.currentPreview.id)?_c('preview-room',{ref:_vm.previewRoomRef,attrs:{\"roomId\":(_vm.currentEdit && _vm.isValidRoomId(_vm.currentEdit.id)) ? _vm.currentEdit.id : '',\"joinRoom\":_vm.joinRoom,\"leaveRoom\":_vm.leaveRoom}}):_vm._e()],1)]),_c('div',{ref:\"container\",staticClass:\"edit player block\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.isLoading),expression:\"!isLoading\"}],staticClass:\"flexrow filler\"},[_c('div',{ref:\"video-container\",staticClass:\"flexrow filler video-container\"},[_c('raw-video-player',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isCurrentPreviewMovie && !_vm.isLoading),expression:\"isCurrentPreviewMovie && !isLoading\"}],ref:\"raw-player\",staticClass:\"raw-player\",style:({\n              position: 'static',\n              opacity: _vm.overlayOpacity\n            }),attrs:{\"entities\":_vm.entityList,\"full-screen\":_vm.fullScreen,\"is-hd\":_vm.isHd,\"is-repeating\":_vm.isRepeating,\"current-preview-index\":_vm.currentPreviewIndex,\"muted\":_vm.isMuted},on:{\"max-duration-update\":_vm.onMaxDurationUpdate,\"metadata-loaded\":_vm.onMetadataLoaded,\"repeat\":_vm.onVideoRepeated,\"frame-update\":_vm.onFrameUpdate}}),(_vm.isCurrentPreviewModel && !_vm.isLoading)?_c('object-viewer',{ref:\"object-player\",staticClass:\"object-player\",style:({\n              position: 'static',\n              opacity: _vm.overlayOpacity\n            }),attrs:{\"preview-url\":_vm.currentPreviewDlPath,\"full-screen\":_vm.fullScreen}}):_vm._e(),(_vm.isCurrentPreviewSound && !_vm.isLoading)?_c('sound-viewer',{ref:\"sound-player\",staticClass:\"sound-player\",attrs:{\"preview-url\":_vm.currentPreviewDlPath,\"full-screen\":_vm.fullScreen},on:{\"play-ended\":_vm.pause}}):_vm._e(),_c('p',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isCurrentPreviewFile && !_vm.isLoading),expression:\"isCurrentPreviewFile && !isLoading\"}],staticClass:\"preview-standard-file has-text-centered\",style:({width: '100%'})},[(_vm.extension && _vm.extension.length > 0)?_c('a',{ref:\"preview-file\",staticClass:\"button\",attrs:{\"href\":_vm.currentPreviewDlPath}},[_c('download-icon',{staticClass:\"icon\"}),_c('span',{staticClass:\"text\"},[_vm._v(\" \"+_vm._s(_vm.$t('tasks.download_pdf_file', {extension: _vm.extension}))+\" \")])],1):_vm._e()]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isCurrentPreviewPicture && !_vm.isLoading),expression:\"isCurrentPreviewPicture && !isLoading\"}],ref:\"picture-player-wrapper\",staticClass:\"picture-preview-wrapper flexrow\",style:({\n              position: 'static',\n              opacity: _vm.overlayOpacity,\n              left: 0,\n              right: 0\n            })},[_c('img',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isCurrentPreviewPicture),expression:\"isCurrentPreviewPicture\"}],ref:\"picture-player\",staticClass:\"picture-preview\",attrs:{\"id\":\"picture-player\",\"src\":_vm.isCurrentPreviewPicture ? _vm.currentPreviewPath : null}})]),(_vm.isLoading)?_c('div',{staticClass:\"loading-wrapper\"},[_c('spinner')],1):_vm._e(),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.isCurrentPreviewFile),expression:\"!isCurrentPreviewFile\"}],ref:\"canvas-wrapper\",staticClass:\"canvas-wrapper\",attrs:{\"oncontextmenu\":\"return false;\"}},[_c('canvas',{ref:\"annotation-canvas\",staticClass:\"canvas\",attrs:{\"id\":\"edit-annotation-canvas\"}})])],1),_c('task-info',{ref:\"task-info\",class:{\n            'flexrow-item': true,\n            'task-info-column': true,\n            'hidden': _vm.isCommentsHidden\n          },attrs:{\"task\":_vm.task,\"is-preview\":false,\"silent\":_vm.isCommentsHidden,\"current-time-raw\":_vm.currentTimeRaw - _vm.frameDuration,\"current-parent-preview\":_vm.currentPreview},on:{\"time-code-clicked\":_vm.onTimeCodeClicked}})],1),_c('video-progress',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isCurrentPreviewMovie && _vm.currentPreview.id),expression:\"isCurrentPreviewMovie && currentPreview.id\"}],ref:\"video-progress\",staticClass:\"video-progress pull-bottom\",attrs:{\"annotations\":_vm.annotations,\"frame-duration\":_vm.frameDuration,\"nb-frames\":_vm.nbFrames,\"handle-in\":-1,\"handle-out\":-1},on:{\"start-scrub\":_vm.onScrubStart,\"end-scrub\":_vm.onScrubEnd,\"progress-changed\":_vm.onProgressChanged}}),(_vm.currentEntity && _vm.currentEntity.id)?_c('div',{ref:\"button-bar\",staticClass:\"player-footer flexrow\"},[(\n            _vm.isCurrentPreviewMovie ||\n            _vm.isCurrentPreviewPicture ||\n            _vm.isCurrentPreviewSound)?_c('div',{staticClass:\"flexrow flexrow-item mr0\"},[(!_vm.isPlaying)?_c('button-simple',{staticClass:\"button player-button flexrow-item\",attrs:{\"title\":_vm.$t('playlists.actions.play'),\"icon\":\"play\"},on:{\"click\":_vm.playClicked}}):_c('button-simple',{staticClass:\"button player-button flexrow-item\",attrs:{\"title\":_vm.$t('playlists.actions.pause'),\"icon\":\"pause\"},on:{\"click\":_vm.pauseClicked}})],1):_vm._e(),_c('div',{staticClass:\"separator\"}),(_vm.isCurrentPreviewPicture)?[_vm._v(\" \"+_vm._s(_vm.framesSeenOfPicture)+\" / \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.framesPerImage[_vm.playingEntityIndex]),expression:\"framesPerImage[playingEntityIndex]\"}],staticClass:\"frame-per-image-input\",attrs:{\"type\":\"number\",\"min\":\"0\",\"title\":_vm.$t('playlists.actions.frames_per_picture')},domProps:{\"value\":(_vm.framesPerImage[_vm.playingEntityIndex])},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.framesPerImage, _vm.playingEntityIndex, $event.target.value)}}})]:_vm._e(),(_vm.isCurrentPreviewPicture)?_c('div',{staticClass:\"separator\"}):_vm._e(),(_vm.currentEntityPreviewLength > 1)?_c('div',{staticClass:\"flexrow flexrow-item\"},[_c('button-simple',{staticClass:\"button player-button flexrow-item\",attrs:{\"icon\":\"left\",\"title\":_vm.$t('playlists.actions.files_previous'),\"disabled\":_vm.isPlaying},on:{\"click\":_vm.onPreviousPreviewClicked}}),_c('span',{staticClass:\"ml05 mr05\",attrs:{\"title\":_vm.$t('playlists.actions.files_position')}},[_vm._v(\" \"+_vm._s(_vm.currentPreviewIndex + 1)+\" / \"+_vm._s(_vm.currentEntityPreviewLength)+\" \")]),_c('button-simple',{staticClass:\"button player-button flexrow-item\",attrs:{\"icon\":\"right\",\"title\":_vm.$t('playlists.actions.files_next'),\"disabled\":_vm.isPlaying},on:{\"click\":_vm.onNextPreviewClicked}}),_c('a',{staticClass:\"button player-button flexrow-item\",attrs:{\"href\":_vm.currentPreviewPath,\"title\":_vm.$t('playlists.actions.see_original_file'),\"target\":\"blank\"}},[_c('arrow-up-right-icon',{staticClass:\"icon is-small\"})],1)],1):_vm._e(),(_vm.isCurrentPreviewMovie)?_c('div',{staticClass:\"flexrow flexrow-item\"},[(_vm.speed === 3)?_c('button-simple',{staticClass:\"button player-button flexrow-item\",attrs:{\"title\":_vm.$t('playlists.actions.speed'),\"text\":\"x1.00\"},on:{\"click\":_vm.onSpeedClicked}}):(_vm.speed === 2)?_c('button-simple',{staticClass:\"button player-button flexrow-item\",attrs:{\"title\":_vm.$t('playlists.actions.speed'),\"text\":\"x0.50\"},on:{\"click\":_vm.onSpeedClicked}}):_c('button-simple',{staticClass:\"button player-button flexrow-item\",attrs:{\"title\":_vm.$t('playlists.actions.speed'),\"text\":\"x0.25\"},on:{\"click\":_vm.onSpeedClicked}}),(_vm.isMuted)?_c('button-simple',{staticClass:\"flexrow-item player-button\",attrs:{\"title\":_vm.$t('playlists.actions.unmute'),\"icon\":\"soundoff\"},on:{\"click\":_vm.onToggleSoundClicked}}):_c('button-simple',{staticClass:\"flexrow-item player-button\",attrs:{\"title\":_vm.$t('playlists.actions.mute'),\"icon\":\"soundon\"},on:{\"click\":_vm.onToggleSoundClicked}}),_c('button-simple',{staticClass:\"button player-button flexrow-item\",attrs:{\"active\":_vm.isRepeating,\"title\":_vm.$t('playlists.actions.looping'),\"icon\":\"repeat\"},on:{\"click\":_vm.onRepeatClicked}}),_c('span',{staticClass:\"flexrow-item time-indicator\",attrs:{\"title\":_vm.$t('playlists.actions.current_time')}},[_vm._v(\" \"+_vm._s(_vm.currentTime)+\" \")]),_c('span',{staticClass:\"flexrow-item time-indicator\"},[_vm._v(\" / \")]),_c('span',{staticClass:\"flexrow-item time-indicator\",attrs:{\"title\":_vm.$t('playlists.actions.max_duration')}},[_vm._v(\" \"+_vm._s(_vm.maxDuration)+\" \")]),_c('span',{staticClass:\"flexrow-item time-indicator mr1\",attrs:{\"title\":_vm.$t('playlists.actions.frame_number')}},[_vm._v(\" (\"+_vm._s(_vm.currentFrame)+\" / \"+_vm._s((_vm.nbFrames + '').padStart(3, '0'))+\") \")]),_c('button-simple',{staticClass:\"button player-button flexrow-item\",attrs:{\"title\":_vm.$t('playlists.actions.previous_frame'),\"icon\":\"left\"},on:{\"click\":_vm.onPreviousFrameClicked}}),_c('button-simple',{staticClass:\"button player-button flexrow-item\",attrs:{\"title\":_vm.$t('playlists.actions.next_frame'),\"icon\":\"right\"},on:{\"click\":_vm.onNextFrameClicked}})],1):_vm._e(),_c('span',{staticClass:\"filler\"}),(!_vm.isCurrentUserArtist && (_vm.isCurrentPreviewMovie || _vm.isCurrentPreviewPicture))?_c('div',{staticClass:\"flexrow\"},[_c('button-simple',{staticClass:\"player-button flexrow-item\",attrs:{\"icon\":\"undo\",\"title\":_vm.$t('playlists.actions.annotation_undo')},on:{\"click\":_vm.undoLastAction}}),_c('button-simple',{staticClass:\"player-button flexrow-item\",attrs:{\"title\":_vm.$t('playlists.actions.annotation_redo'),\"icon\":\"redo\"},on:{\"click\":_vm.redoLastAction}}),_c('transition',{attrs:{\"name\":\"slide\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isTyping),expression:\"isTyping\"}],staticClass:\"annotation-tools\"},[_c('color-picker',{attrs:{\"isOpen\":_vm.isShowingPalette,\"color\":this.textColor},on:{\"TogglePalette\":_vm.onPickColor,\"change\":_vm.onChangeTextColor}})],1)]),_c('button-simple',{class:{\n              'player-button': true,\n              'flexrow-item': true,\n              active: _vm.isTyping\n            },attrs:{\"title\":_vm.$t('playlists.actions.annotation_text'),\"icon\":\"type\"},on:{\"click\":_vm.onTypeClicked}}),_c('transition',{attrs:{\"name\":\"slide\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isDrawing),expression:\"isDrawing\"}],staticClass:\"annotation-tools\"},[_c('pencil-picker',{attrs:{\"isOpen\":_vm.isShowingPencilPalette,\"pencil\":_vm.pencil,\"sizes\":this.pencilPalette},on:{\"toggle-palette\":_vm.onPickPencil,\"change\":_vm.onChangePencil}}),_c('color-picker',{attrs:{\"isOpen\":_vm.isShowingPalette,\"color\":this.color},on:{\"TogglePalette\":_vm.onPickColor,\"change\":_vm.onChangeColor}})],1)]),_c('button-simple',{class:{\n              'player-button': true,\n              'flexrow-item': true,\n              active: _vm.isDrawing\n            },attrs:{\"title\":_vm.$t('playlists.actions.annotation_draw'),\"icon\":\"pencil\"},on:{\"click\":_vm.onAnnotateClicked}}),_c('button-simple',{staticClass:\"player-button flexrow-item\",attrs:{\"icon\":\"remove\",\"title\":_vm.$t('playlists.actions.annotation_delete')},on:{\"click\":_vm.onDeleteClicked}})],1):_vm._e(),_c('div',{staticClass:\"separator\"}),_c('button-simple',{staticClass:\"button player-button flexrow-item\",attrs:{\"title\":_vm.$t('playlists.actions.comments'),\"icon\":\"comment\"},on:{\"click\":_vm.onCommentClicked}}),(_vm.isCurrentPreviewMovie)?_c('button-simple',{staticClass:\"player-button flexrow-item\",attrs:{\"title\":_vm.$t('playlists.actions.' + (_vm.isHd ? 'switch_ld' : 'switch_hd')),\"text\":_vm.isHd ? 'HD' : 'LD'},on:{\"click\":function($event){_vm.isHd = !_vm.isHd}}}):_vm._e(),(_vm.isFullScreenEnabled)?_c('button-simple',{staticClass:\"button player-button flexrow-item\",attrs:{\"title\":_vm.$t('playlists.actions.fullscreen'),\"icon\":\"maximize\"},on:{\"click\":_vm.onFullscreenClicked}}):_vm._e()],2):_vm._e()],1),_c('div',{staticClass:\"edit-data block\"},[_c('div',{staticClass:\"flexrow\"},[_c('combobox-styled',{staticClass:\"section-combo flexrow-item\",attrs:{\"options\":_vm.entityNavOptions},model:{value:(_vm.currentSection),callback:function ($$v) {_vm.currentSection=$$v},expression:\"currentSection\"}}),_c('div',{staticClass:\"filler\"}),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.currentSection === 'schedule'),expression:\"currentSection === 'schedule'\"}],staticClass:\"flexrow-item mt05\"},[_vm._v(\" \"+_vm._s(_vm.$t('schedule.zoom_level'))+\": \")]),_c('combobox-number',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.currentSection === 'schedule'),expression:\"currentSection === 'schedule'\"}],staticClass:\"zoom-level flexrow-item \",attrs:{\"options\":_vm.zoomOptions,\"is-simple\":\"\"},model:{value:(_vm.zoomLevel),callback:function ($$v) {_vm.zoomLevel=$$v},expression:\"zoomLevel\"}})],1),(_vm.currentSection === 'infos')?_c('div',{ref:\"info-row\",staticClass:\"infos flexrow pa0\"},[_c('div',{staticClass:\"flexrow-item\"},[_c('div',{staticClass:\"flexrow\"},[_c('div',{staticClass:\"flexcolumn flexrow-item\"},[_c('page-subtitle',{staticClass:\"flerow-item\",attrs:{\"text\":_vm.$t('edits.tasks')}}),_c('entity-task-list',{staticClass:\"task-list flexrow-item\",attrs:{\"entries\":_vm.currentEdit ? _vm.currentEdit.tasks : [],\"is-loading\":!_vm.currentEdit,\"is-error\":false}})],1),_c('div',{staticClass:\"flexcolumn flexrow-item\"},[_c('div',{staticClass:\"flexrow\"},[_c('page-subtitle',{staticClass:\"flerow-item\",attrs:{\"text\":_vm.$t('main.info')}}),_c('div',{staticClass:\"flexrow-item has-text-right\"},[(_vm.isCurrentUserManager)?_c('button-simple',{attrs:{\"icon\":\"edit\"},on:{\"click\":function($event){_vm.modals.edit = true}}}):_vm._e()],1)],1),_c('div',{staticClass:\"table-body edit-metadata flexrow-item\"},[(_vm.currentEdit)?_c('table',{staticClass:\"datatable no-header\"},[_c('tbody',{staticClass:\"datatable-body\"},[_c('tr',{staticClass:\"datatable-row\"},[_c('td',{staticClass:\"field-label\"},[_vm._v(_vm._s(_vm.$t('edits.fields.description')))]),_c('description-cell',{attrs:{\"entry\":_vm.currentEdit,\"full\":true}})],1),_vm._l((_vm.editMetadataDescriptors),function(descriptor){return _c('tr',{key:descriptor.id,staticClass:\"datatable-row\"},[_c('td',{staticClass:\"field-label\"},[_vm._v(_vm._s(descriptor.name))]),_c('td',[_vm._v(\" \"+_vm._s(_vm.currentEdit.data ? _vm.currentEdit.data[descriptor.field_name] : '')+\" \")])])})],2)]):_vm._e()])])])])]):_vm._e(),(_vm.currentSection === 'schedule' && _vm.scheduleItems.length > 0)?_c('div',{ref:\"schedule-row\",staticClass:\"infos schedule\"},[(_vm.scheduleItems[0].children.length > 0)?_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.currentSection === 'schedule'),expression:\"currentSection === 'schedule'\"}],staticClass:\"schedule mt1\"},[_c('div',{staticClass:\"wrapper\"},[_c('schedule',{ref:\"schedule-widget\",attrs:{\"start-date\":_vm.tasksStartDate,\"end-date\":_vm.tasksEndDate,\"hierarchy\":_vm.scheduleItems,\"zoom-level\":_vm.zoomLevel,\"is-loading\":false,\"is-estimation-linked\":true,\"hide-root\":true,\"with-milestones\":false}})],1)]):_vm._e()]):_vm._e(),(_vm.currentSection === 'preview-files')?_c('entity-preview-files',{attrs:{\"entity\":_vm.currentEdit}}):_vm._e(),(_vm.currentSection === 'activity')?_c('entity-news',{attrs:{\"entity\":_vm.currentEdit}}):_vm._e(),(_vm.currentSection === 'time-logs')?_c('entity-time-logs',{attrs:{\"entity\":_vm.currentEdit}}):_vm._e()],1)]),_c('edit-edit-modal',{ref:\"edit-edit-modal\",attrs:{\"active\":_vm.modals.edit,\"is-loading\":_vm.isLoading,\"is-error\":_vm.errors.edit,\"edit-to-edit\":_vm.currentEdit},on:{\"cancel\":function($event){_vm.modals.edit = false},\"confirm\":_vm.confirmEditEdit}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"flexrow\"},[(_vm.taskTypeOptions.length > 0)?_c('combobox-styled',{ref:\"task-type-combobox\",staticClass:\"flexrow-item\",attrs:{\"options\":_vm.taskTypeOptions},model:{value:(_vm.taskTypeId),callback:function ($$v) {_vm.taskTypeId=$$v},expression:\"taskTypeId\"}}):_vm._e(),(_vm.previewFileOptions.length)?_c('combobox-styled',{staticClass:\"flexrow-item\",attrs:{\"options\":_vm.previewFileOptions},model:{value:(_vm.previewFileId),callback:function ($$v) {_vm.previewFileId=$$v},expression:\"previewFileId\"}}):_c('span',{staticClass:\"text flexrow-item\"},[_vm._v(\"Selected task has no previews.\")]),(_vm.taskStatus)?_c('div',{staticClass:\"flexrow-item\"},[_c('validation-tag',{staticClass:\"flexrow-item\",attrs:{\"task\":{ task_status_id: _vm.taskStatus.id},\"is-static\":true,\"thin\":false}})],1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n<div class=\"flexrow\">\n\n  <combobox-styled\n    ref=\"task-type-combobox\"\n    class=\"flexrow-item\"\n    :options=\"taskTypeOptions\"\n    v-model=\"taskTypeId\"\n    v-if=\"taskTypeOptions.length > 0\"\n  />\n\n  <combobox-styled\n    class=\"flexrow-item\"\n    :options=\"previewFileOptions\"\n    v-if=\"previewFileOptions.length\"\n    v-model=\"previewFileId\"\n  />\n  <span class=\"text flexrow-item\" v-else>Selected task has no previews.</span>\n\n  <div class=\"flexrow-item\" v-if=\"taskStatus\">\n    <validation-tag\n      class=\"flexrow-item\"\n      :task=\"{ task_status_id: taskStatus.id}\"\n      :is-static=\"true\"\n      :thin=\"false\"\n    />\n  </div>\n</div>\n</template>\n\n<script>\n/*\n * Widget displaying entity's revisions of previews per task type.\n * It allows to select a given revision for a given task type for current entity.\n */\nimport firstBy from 'thenby'\nimport { mapGetters } from 'vuex'\n\nimport ComboboxStyled from '@/components/widgets/ComboboxStyled'\nimport ValidationTag from '@/components/widgets/ValidationTag'\n\nexport default {\n  name: 'previews-per-task-type',\n\n  components: {\n    ComboboxStyled,\n    ValidationTag\n  },\n\n  data () {\n    return {\n      taskTypeId: null,\n      previewFileId: this.entity.preview_file_id\n    }\n  },\n\n  props: {\n    entityMap: {\n      default: () => {},\n      type: Map\n    },\n    index: {\n      default: 0,\n      type: Number\n    },\n    entity: {\n      default: () => {},\n      type: Object\n    }\n  },\n\n  mounted () {\n    this.setCurrentParameters()\n  },\n\n  computed: {\n    ...mapGetters([\n      'taskMap',\n      'taskTypeMap',\n      'taskStatusMap',\n      'isCurrentUserManager'\n    ]),\n\n    taskTypeOptions () {\n      const entity = this.entityMap.get(this.entity.id)\n      return entity.tasks\n        .map(taskId => this.taskMap.get(taskId))\n        .map(task => this.taskTypeMap.get(task.task_type_id))\n        .sort(firstBy('priority', 1).thenBy('name'))\n        .map((taskType) => {\n          return {\n            label: taskType.name,\n            value: taskType.id\n          }\n        })\n    },\n\n    previewFileOptions () {\n      const previewFiles = this.entity.preview_files[this.taskTypeId] || []\n      return previewFiles.map(previewFile => ({\n        label: `v${previewFile.revision}`,\n        value: previewFile.id\n      }))\n    },\n\n    taskStatus () {\n      if (!this.entityMap) return ''\n\n      const entity = this.entityMap.get(this.entity.id)\n      if (!entity) return ''\n\n      const taskId = entity.validations.get(this.taskTypeId)\n      if (taskId) {\n        const task = this.taskMap.get(taskId)\n        if (!task) return ''\n        const taskStatus = this.taskStatusMap.get(task.task_status_id)\n        return taskStatus\n      } else {\n        return ''\n      }\n    }\n  },\n\n  methods: {\n    getTaskTypeIdForPreviewFile (taskTypeIds, previewFileId) {\n      return taskTypeIds.find((taskTypeId) => {\n        const previewFiles = this.entity.preview_files[taskTypeId]\n        return previewFiles.some(previewFile => {\n          return previewFile.id === previewFileId\n        })\n      })\n    },\n\n    setCurrentParameters () {\n      // Find task type matching current preview.\n      const taskTypeIds = Object.keys(this.entity.preview_files)\n      if (taskTypeIds.length > 0) {\n        if (this.entity.preview_file_id) {\n          this.taskTypeId = this.getTaskTypeIdForPreviewFile(\n            taskTypeIds,\n            this.entity.preview_file_id\n          )\n        }\n        if (!this.taskTypeId) {\n          this.taskTypeId = taskTypeIds[0]\n        }\n      }\n    }\n  },\n\n  watch: {\n    taskTypeId () {\n      // Set current preview was last preview selected. If there is no preview\n      // matching this task type, it selects the first preview available for\n      // this task type.\n      const previewFiles = this.entity.preview_files[this.taskTypeId]\n      if (previewFiles && previewFiles.length > 0) {\n        const isPreviewFile = previewFiles.some(previewFile => {\n          return previewFile.id === this.entity.preview_file_id\n        })\n        if (isPreviewFile) {\n          this.previewFileId = this.entity.preview_file_id\n        } else {\n          this.previewFileId = previewFiles[0].id\n        }\n      } else {\n        this.previewFileId = null\n      }\n    },\n\n    previewFileId () {\n      let previewFile = null\n      const previewFiles = this.entity.preview_files[this.taskTypeId]\n      if (previewFiles && previewFiles.length > 0) {\n        previewFile = previewFiles.find(previewFile => {\n          return previewFile.id === this.previewFileId\n        })\n      }\n      this.$emit('preview-changed', this.entity, previewFile)\n    },\n\n    'entity.preview_files': function () {\n    },\n\n    'entity.preview_file_id': function () {\n      if (this.previewFileId !== this.entity.preview_file_id) {\n        this.previewFileId = this.entity.preview_file_id\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.field {\n  margin-bottom: 0em;\n}\n.text {\n  color: var(--text);\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PreviewsPerTaskType.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PreviewsPerTaskType.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PreviewsPerTaskType.vue?vue&type=template&id=6b6c8874&scoped=true&\"\nimport script from \"./PreviewsPerTaskType.vue?vue&type=script&lang=js&\"\nexport * from \"./PreviewsPerTaskType.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PreviewsPerTaskType.vue?vue&type=style&index=0&id=6b6c8874&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6b6c8874\",\n  null\n  \n)\n\nexport default component.exports","<template>\n<div class=\"columns fixed-page edit\">\n  <div class=\"column main-column\">\n    <div class=\"page-header flexrow flexrow-item\" ref=\"page-header-row\">\n      <div class=\"flexrow block mb0 main-block\">\n        <router-link\n          class=\"flexrow-item has-text-centered back-link\"\n          :to=\"editsPath\"\n        >\n          <corner-left-up-icon />\n        </router-link>\n        <span\n          class=\"flexrow-item\"\n        >\n          <entity-thumbnail\n            class=\"entity-thumbnail\"\n            :entity=\"currentEntity\"\n            :empty-height=\"60\"\n            :empty-width=\"100\"\n            :height=\"60\"\n            :width=\"100\"\n            v-if=\"currentEntity\"\n          />\n        </span>\n        <div class=\"flexrow-item\">\n          <page-title :text=\"title\" class=\"entity-title\" />\n        </div>\n        <div\n          class=\"flexrow-item has-text-centered\"\n          :key=\"currentEntity.id\"\n          v-if=\"!isLoading && currentEntity\"\n        >\n          <previews-per-task-type\n            ref=\"previews-per-task-type\"\n            :entity=\"currentEntity\"\n            :entity-map=\"editMap\"\n            @preview-changed=\"onPreviewChanged\"\n          />\n        </div>\n      </div>\n      <div class=\"filler\"></div>\n      <div class=\"flexrow-item block mt0\">\n        <preview-room\n          :ref=\"previewRoomRef\"\n          :roomId=\"(currentEdit && isValidRoomId(currentEdit.id)) ? currentEdit.id : ''\"\n          :joinRoom=\"joinRoom\"\n          :leaveRoom=\"leaveRoom\"\n          v-if=\"currentEdit && isValidRoomId(currentEdit.id) && currentPreview && currentPreview.id\"\n        />\n      </div>\n    </div>\n\n    <div\n      ref=\"container\"\n      class=\"edit player block\"\n    >\n      <div\n        class=\"flexrow filler\"\n        v-show=\"!isLoading\"\n      >\n        <div\n          class=\"flexrow filler video-container\"\n          ref=\"video-container\"\n        >\n          <raw-video-player\n            ref=\"raw-player\"\n            class=\"raw-player\"\n            :style=\"{\n              position: 'static',\n              opacity: overlayOpacity\n            }\"\n            :entities=\"entityList\"\n            :full-screen=\"fullScreen\"\n            :is-hd=\"isHd\"\n            :is-repeating=\"isRepeating\"\n            :current-preview-index=\"currentPreviewIndex\"\n            :muted=\"isMuted\"\n            @max-duration-update=\"onMaxDurationUpdate\"\n            @metadata-loaded=\"onMetadataLoaded\"\n            @repeat=\"onVideoRepeated\"\n            @frame-update=\"onFrameUpdate\"\n            v-show=\"isCurrentPreviewMovie && !isLoading\"\n          />\n\n          <object-viewer\n            ref=\"object-player\"\n            class=\"object-player\"\n            :preview-url=\"currentPreviewDlPath\"\n            :style=\"{\n              position: 'static',\n              opacity: overlayOpacity\n            }\"\n            :full-screen=\"fullScreen\"\n            v-if=\"isCurrentPreviewModel && !isLoading\"\n          />\n\n          <sound-viewer\n            ref=\"sound-player\"\n            class=\"sound-player\"\n            :preview-url=\"currentPreviewDlPath\"\n            :full-screen=\"fullScreen\"\n            @play-ended=\"pause\"\n            v-if=\"isCurrentPreviewSound && !isLoading\"\n          />\n\n          <p\n            :style=\"{width: '100%'}\"\n            class=\"preview-standard-file has-text-centered\"\n            v-show=\"isCurrentPreviewFile && !isLoading\"\n          >\n            <a\n              class=\"button\"\n              ref=\"preview-file\"\n              :href=\"currentPreviewDlPath\"\n              v-if=\"extension && extension.length > 0\"\n            >\n              <download-icon class=\"icon\" />\n              <span class=\"text\">\n                {{ $t('tasks.download_pdf_file', {extension: extension}) }}\n              </span>\n            </a>\n          </p>\n\n          <div\n            class=\"picture-preview-wrapper flexrow\"\n            ref=\"picture-player-wrapper\"\n            :style=\"{\n              position: 'static',\n              opacity: overlayOpacity,\n              left: 0,\n              right: 0\n            }\"\n            v-show=\"isCurrentPreviewPicture && !isLoading\"\n          >\n             <img\n               ref=\"picture-player\"\n               id=\"picture-player\"\n               class=\"picture-preview\"\n               :src=\"isCurrentPreviewPicture ? currentPreviewPath : null\"\n               v-show=\"isCurrentPreviewPicture\"\n             />\n          </div>\n\n          <div class=\"loading-wrapper\" v-if=\"isLoading\">\n            <spinner />\n          </div>\n\n          <div\n            class=\"canvas-wrapper\"\n            ref=\"canvas-wrapper\"\n            oncontextmenu=\"return false;\"\n            v-show=\"!isCurrentPreviewFile\"\n          >\n            <canvas\n              id=\"edit-annotation-canvas\"\n              ref=\"annotation-canvas\"\n              class=\"canvas\"\n            >\n            </canvas>\n          </div>\n        </div>\n        <task-info\n          ref=\"task-info\"\n          :class=\"{\n            'flexrow-item': true,\n            'task-info-column': true,\n            'hidden': isCommentsHidden\n          }\"\n          :task=\"task\"\n          :is-preview=\"false\"\n          :silent=\"isCommentsHidden\"\n          :current-time-raw=\"currentTimeRaw - frameDuration\"\n          :current-parent-preview=\"currentPreview\"\n          @time-code-clicked=\"onTimeCodeClicked\"\n        />\n      </div>\n\n      <video-progress\n        ref=\"video-progress\"\n        class=\"video-progress pull-bottom\"\n        :annotations=\"annotations\"\n        :frame-duration=\"frameDuration\"\n        :nb-frames=\"nbFrames\"\n        :handle-in=\"-1\"\n        :handle-out=\"-1\"\n        @start-scrub=\"onScrubStart\"\n        @end-scrub=\"onScrubEnd\"\n        @progress-changed=\"onProgressChanged\"\n        v-show=\"isCurrentPreviewMovie && currentPreview.id\"\n      />\n\n      <div\n        class=\"player-footer flexrow\"\n        ref=\"button-bar\"\n        v-if=\"currentEntity && currentEntity.id\"\n      >\n        <div\n          class=\"flexrow flexrow-item mr0\"\n          v-if=\"\n            isCurrentPreviewMovie ||\n            isCurrentPreviewPicture ||\n            isCurrentPreviewSound\"\n        >\n          <button-simple\n            class=\"button player-button flexrow-item\"\n            @click=\"playClicked\"\n            :title=\"$t('playlists.actions.play')\"\n            icon=\"play\"\n            v-if=\"!isPlaying\"\n          />\n          <button-simple\n            class=\"button player-button flexrow-item\"\n            @click=\"pauseClicked\"\n            :title=\"$t('playlists.actions.pause')\"\n            icon=\"pause\"\n            v-else\n          />\n        </div>\n        <div class=\"separator\"></div>\n\n        <template v-if=\"isCurrentPreviewPicture\">\n          {{ framesSeenOfPicture }} /\n          <input\n            type=\"number\"\n            min=\"0\"\n            class=\"frame-per-image-input\"\n            :title=\"$t('playlists.actions.frames_per_picture')\"\n            v-model=\"framesPerImage[playingEntityIndex]\"\n          >\n        </template>\n        <div class=\"separator\" v-if=\"isCurrentPreviewPicture\"></div>\n\n        <div\n          class=\"flexrow flexrow-item\"\n          v-if=\"currentEntityPreviewLength > 1\"\n        >\n          <button-simple\n            class=\"button player-button flexrow-item\"\n            icon=\"left\"\n            :title=\"$t('playlists.actions.files_previous')\"\n            :disabled=\"isPlaying\"\n            @click=\"onPreviousPreviewClicked\"\n          />\n          <span\n            class=\"ml05 mr05\"\n            :title=\"$t('playlists.actions.files_position')\"\n          >\n            {{ currentPreviewIndex + 1 }} / {{ currentEntityPreviewLength }}\n          </span>\n          <button-simple\n            class=\"button player-button flexrow-item\"\n            icon=\"right\"\n            :title=\"$t('playlists.actions.files_next')\"\n            :disabled=\"isPlaying\"\n            @click=\"onNextPreviewClicked\"\n          />\n          <a\n            class=\"button player-button flexrow-item\"\n            :href=\"currentPreviewPath\"\n            :title=\"$t('playlists.actions.see_original_file')\"\n            target=\"blank\"\n          >\n            <arrow-up-right-icon class=\"icon is-small\" />\n          </a>\n        </div>\n\n        <div\n          class=\"flexrow flexrow-item\"\n          v-if=\"isCurrentPreviewMovie\"\n        >\n          <button-simple\n            class=\"button player-button flexrow-item\"\n            @click=\"onSpeedClicked\"\n            :title=\"$t('playlists.actions.speed')\"\n            text=\"x1.00\"\n            v-if=\"speed === 3\"\n          />\n          <button-simple\n            class=\"button player-button flexrow-item\"\n            @click=\"onSpeedClicked\"\n            :title=\"$t('playlists.actions.speed')\"\n            text=\"x0.50\"\n            v-else-if=\"speed === 2\"\n          />\n          <button-simple\n            class=\"button player-button flexrow-item\"\n            @click=\"onSpeedClicked\"\n            :title=\"$t('playlists.actions.speed')\"\n            text=\"x0.25\"\n            v-else\n          />\n\n          <button-simple\n            class=\"flexrow-item player-button\"\n            :title=\"$t('playlists.actions.unmute')\"\n            icon=\"soundoff\"\n            @click=\"onToggleSoundClicked\"\n            v-if=\"isMuted\"\n          />\n          <button-simple\n            class=\"flexrow-item player-button\"\n            :title=\"$t('playlists.actions.mute')\"\n            icon=\"soundon\"\n            @click=\"onToggleSoundClicked\"\n            v-else\n          />\n\n          <button-simple\n            class=\"button player-button flexrow-item\"\n            :active=\"isRepeating\"\n            :title=\"$t('playlists.actions.looping')\"\n            icon=\"repeat\"\n            @click=\"onRepeatClicked\"\n          />\n\n          <span\n            class=\"flexrow-item time-indicator\"\n            :title=\"$t('playlists.actions.current_time')\"\n          >\n            {{ currentTime }}\n          </span>\n          <span class=\"flexrow-item time-indicator\">\n          /\n          </span>\n          <span\n            class=\"flexrow-item time-indicator\"\n            :title=\"$t('playlists.actions.max_duration')\"\n          >\n            {{ maxDuration }}\n          </span>\n          <span\n            class=\"flexrow-item time-indicator mr1\"\n            :title=\"$t('playlists.actions.frame_number')\"\n          >\n            ({{ currentFrame }} / {{ (nbFrames + '').padStart(3, '0') }})\n          </span>\n          <button-simple\n            class=\"button player-button flexrow-item\"\n            @click=\"onPreviousFrameClicked\"\n            :title=\"$t('playlists.actions.previous_frame')\"\n            icon=\"left\"\n          />\n          <button-simple\n            class=\"button player-button flexrow-item\"\n            @click=\"onNextFrameClicked\"\n            :title=\"$t('playlists.actions.next_frame')\"\n            icon=\"right\"\n          />\n        </div>\n        <span class=\"filler\"></span>\n\n        <div\n          class=\"flexrow\"\n          v-if=\"!isCurrentUserArtist && (isCurrentPreviewMovie || isCurrentPreviewPicture)\"\n        >\n          <button-simple\n            class=\"player-button flexrow-item\"\n            icon=\"undo\"\n            :title=\"$t('playlists.actions.annotation_undo')\"\n            @click=\"undoLastAction\"\n          />\n\n          <button-simple\n            class=\"player-button flexrow-item\"\n            :title=\"$t('playlists.actions.annotation_redo')\"\n            icon=\"redo\"\n            @click=\"redoLastAction\"\n          />\n\n          <transition name=\"slide\">\n            <div\n              class=\"annotation-tools\"\n              v-show=\"isTyping\"\n            >\n              <color-picker\n                :isOpen=\"isShowingPalette\"\n                :color=\"this.textColor\"\n                @TogglePalette=\"onPickColor\"\n                @change=\"onChangeTextColor\"\n              />\n            </div>\n          </transition>\n          <button-simple\n            :class=\"{\n              'player-button': true,\n              'flexrow-item': true,\n              active: isTyping\n            }\"\n            :title=\"$t('playlists.actions.annotation_text')\"\n            @click=\"onTypeClicked\"\n            icon=\"type\"\n          />\n\n          <transition name=\"slide\">\n            <div\n              class=\"annotation-tools\"\n              v-show=\"isDrawing\"\n            >\n              <pencil-picker\n                :isOpen=\"isShowingPencilPalette\"\n                :pencil=\"pencil\"\n                :sizes=\"this.pencilPalette\"\n                @toggle-palette=\"onPickPencil\"\n                @change=\"onChangePencil\"\n              />\n\n              <color-picker\n                :isOpen=\"isShowingPalette\"\n                :color=\"this.color\"\n                @TogglePalette=\"onPickColor\"\n                @change=\"onChangeColor\"\n              />\n            </div>\n          </transition>\n          <button-simple\n            :class=\"{\n              'player-button': true,\n              'flexrow-item': true,\n              active: isDrawing\n            }\"\n            :title=\"$t('playlists.actions.annotation_draw')\"\n            @click=\"onAnnotateClicked\"\n            icon=\"pencil\"\n          />\n          <button-simple\n            class=\"player-button flexrow-item\"\n            icon=\"remove\"\n            :title=\"$t('playlists.actions.annotation_delete')\"\n            @click=\"onDeleteClicked\"\n          />\n        </div>\n        <div class=\"separator\"></div>\n        <button-simple\n          class=\"button player-button flexrow-item\"\n          :title=\"$t('playlists.actions.comments')\"\n          @click=\"onCommentClicked\"\n          icon=\"comment\"\n        />\n        <button-simple\n          class=\"player-button flexrow-item\"\n          :title=\"$t('playlists.actions.' + (isHd ? 'switch_ld' : 'switch_hd'))\"\n          :text=\"isHd ? 'HD' : 'LD'\"\n          @click=\"isHd = !isHd\"\n          v-if=\"isCurrentPreviewMovie\"\n        />\n\n        <button-simple\n          class=\"button player-button flexrow-item\"\n          :title=\"$t('playlists.actions.fullscreen')\"\n          @click=\"onFullscreenClicked\"\n          icon=\"maximize\"\n          v-if=\"isFullScreenEnabled\"\n        />\n      </div>\n\n    </div>\n\n    <div\n      class=\"edit-data block\"\n    >\n      <div class=\"flexrow\">\n        <combobox-styled\n          class=\"section-combo flexrow-item\"\n          :options=\"entityNavOptions\"\n          v-model=\"currentSection\"\n        />\n        <div class=\"filler\"></div>\n        <span\n          class=\"flexrow-item mt05\"\n          v-show=\"currentSection === 'schedule'\"\n        >\n          {{ $t('schedule.zoom_level') }}:\n        </span>\n        <combobox-number\n          class=\"zoom-level flexrow-item \"\n          :options=\"zoomOptions\"\n          is-simple\n          v-model=\"zoomLevel\"\n          v-show=\"currentSection === 'schedule'\"\n        />\n      </div>\n\n      <div\n        ref=\"info-row\"\n        class=\"infos flexrow pa0\"\n        v-if=\"currentSection === 'infos'\"\n      >\n        <div class=\"flexrow-item\">\n          <div class=\"flexrow\">\n            <div class=\"flexcolumn flexrow-item\">\n              <page-subtitle class=\"flerow-item\" :text=\"$t('edits.tasks')\" />\n              <entity-task-list\n                class=\"task-list flexrow-item\"\n                :entries=\"currentEdit ? currentEdit.tasks : []\"\n                :is-loading=\"!currentEdit\"\n                :is-error=\"false\"\n              />\n            </div>\n\n            <div class=\"flexcolumn flexrow-item\">\n              <div class=\"flexrow\">\n                <page-subtitle class=\"flerow-item\" :text=\"$t('main.info')\" />\n                <div class=\"flexrow-item has-text-right\">\n                  <button-simple\n                    icon=\"edit\"\n                    @click=\"modals.edit = true\"\n                    v-if=\"isCurrentUserManager\"\n                  />\n                </div>\n              </div>\n              <div class=\"table-body edit-metadata flexrow-item\">\n                <table class=\"datatable no-header\" v-if=\"currentEdit\">\n                  <tbody class=\"datatable-body\">\n                    <tr class=\"datatable-row\">\n                      <td class=\"field-label\">{{ $t('edits.fields.description') }}</td>\n                      <description-cell\n                        :entry=\"currentEdit\"\n                        :full=\"true\"\n                      />\n                    </tr>\n                    <tr\n                      :key=\"descriptor.id\"\n                      class=\"datatable-row\"\n                      v-for=\"descriptor in editMetadataDescriptors\"\n                    >\n                      <td class=\"field-label\">{{ descriptor.name }}</td>\n                      <td>\n                        {{ currentEdit.data ? currentEdit.data[descriptor.field_name] : '' }}\n                      </td>\n                    </tr>\n                  </tbody>\n                </table>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div\n        ref=\"schedule-row\"\n        class=\"infos schedule\"\n        v-if=\"currentSection === 'schedule' && scheduleItems.length > 0\"\n      >\n        <div\n          class=\"schedule mt1\"\n          v-if=\"scheduleItems[0].children.length > 0\"\n          v-show=\"currentSection === 'schedule'\"\n        >\n          <div class=\"wrapper\">\n            <schedule\n              ref=\"schedule-widget\"\n              :start-date=\"tasksStartDate\"\n              :end-date=\"tasksEndDate\"\n              :hierarchy=\"scheduleItems\"\n              :zoom-level=\"zoomLevel\"\n              :is-loading=\"false\"\n              :is-estimation-linked=\"true\"\n              :hide-root=\"true\"\n              :with-milestones=\"false\"\n            />\n          </div>\n        </div>\n      </div>\n\n      <entity-preview-files\n        :entity=\"currentEdit\"\n        v-if=\"currentSection === 'preview-files'\"\n      />\n\n      <entity-news\n        :entity=\"currentEdit\"\n        v-if=\"currentSection === 'activity'\"\n      />\n\n      <entity-time-logs\n        :entity=\"currentEdit\"\n        v-if=\"currentSection === 'time-logs'\"\n      />\n\n    </div>\n  </div>\n\n  <edit-edit-modal\n    ref=\"edit-edit-modal\"\n    :active=\"modals.edit\"\n    :is-loading=\"isLoading\"\n    :is-error=\"errors.edit\"\n    :edit-to-edit=\"currentEdit\"\n    @cancel=\"modals.edit = false\"\n    @confirm=\"confirmEditEdit\"\n  />\n</div>\n</template>\n\n<script>\nimport { mapGetters, mapActions } from 'vuex'\nimport { CornerLeftUpIcon, DownloadIcon } from 'vue-feather-icons'\n\nimport { annotationMixin } from '@/components/mixins/annotation'\nimport { domMixin } from '@/components/mixins/dom'\nimport { entityMixin } from '@/components/mixins/entity'\nimport { getEntitiesPath } from '@/lib/path'\nimport { formatListMixin } from '@/components/mixins/format'\nimport { previewRoomMixin } from '@/components/mixins/previewRoom'\nimport { playerMixin } from '@/components/mixins/player'\nimport { DEFAULT_NB_FRAMES_PICTURE } from '@/lib/playlist'\n\nimport ButtonSimple from '@/components/widgets/ButtonSimple'\nimport ComboboxNumber from '@/components/widgets/ComboboxNumber'\nimport DescriptionCell from '@/components/cells/DescriptionCell'\nimport EditEditModal from '@/components/modals/EditEditModal'\nimport EntityNews from '@/components/pages/entities/EntityNews'\nimport EntityPreviewFiles from '@/components/pages/entities/EntityPreviewFiles'\nimport EntityTaskList from '@/components/lists/EntityTaskList'\nimport EntityTimeLogs from '@/components/pages/entities/EntityTimeLogs'\nimport EntityThumbnail from '@/components/widgets/EntityThumbnail'\nimport ColorPicker from '@/components/widgets/ColorPicker'\nimport ComboboxStyled from '@/components/widgets/ComboboxStyled'\nimport PageSubtitle from '@/components/widgets/PageSubtitle'\nimport PageTitle from '@/components/widgets/PageTitle'\nimport PencilPicker from '@/components/widgets/PencilPicker'\nimport PreviewRoom from '@/components/widgets/PreviewRoom'\nimport PreviewsPerTaskType from '@/components/previews/PreviewsPerTaskType'\nimport RawVideoPlayer from '@/components/pages/playlists/RawVideoPlayer'\nimport Schedule from '@/components/pages/schedule/Schedule'\nimport Spinner from '@/components/widgets/Spinner'\nimport TaskInfo from '@/components/sides/TaskInfo'\nimport VideoProgress from '@/components/previews/VideoProgress'\n\nexport default {\n  name: 'edit',\n  mixins: [\n    annotationMixin,\n    domMixin,\n    entityMixin,\n    formatListMixin,\n    previewRoomMixin,\n    playerMixin\n  ],\n  components: {\n    ButtonSimple,\n    CornerLeftUpIcon,\n    ColorPicker,\n    ComboboxStyled,\n    ComboboxNumber,\n    DescriptionCell,\n    DownloadIcon,\n    EditEditModal,\n    EntityNews,\n    EntityPreviewFiles,\n    EntityTaskList,\n    EntityTimeLogs,\n    EntityThumbnail,\n    PageSubtitle,\n    PageTitle,\n    PencilPicker,\n    PreviewRoom,\n    PreviewsPerTaskType,\n    RawVideoPlayer,\n    Schedule,\n    Spinner,\n    TaskInfo,\n    VideoProgress\n  },\n\n  data () {\n    return {\n      currentEdit: null,\n      currentSection: 'infos',\n      isLoading: true,\n      isError: false,\n      previewRoomRef: 'edits-preview-room',\n      previewFileMap: new Map(),\n      tempMode: false,\n      errors: {\n        edit: false\n      },\n      entityNavOptions: [\n        { label: 'Infos', value: 'infos' },\n        { label: 'Schedule', value: 'schedule' },\n        { label: 'Preview Files', value: 'preview-files' },\n        { label: 'Activity', value: 'activity' },\n        { label: 'Timelog', value: 'time-logs' }\n      ],\n      modals: {\n        edit: false\n      }\n    }\n  },\n\n  mounted () {\n    this.resetData()\n    this.$on('annotation-changed', this.onAnnotationChanged)\n\n    this.$options.scrubbing = false\n    this.isHd = this.organisation\n      ? this.organisation.hd_by_default === 'true'\n      : false\n    if (this.picturePlayer) {\n      this.picturePlayer.addEventListener('load', async () => {\n        const wasPlaying = this.isPlaying\n        await this.resetPictureCanvas()\n        this.isPlaying = wasPlaying\n      })\n    }\n    this.$nextTick(() => {\n      this.configureEvents()\n      this.setupFabricCanvas()\n      this.setPlayerSpeed(1)\n      this.onFrameUpdate(1)\n    })\n  },\n\n  beforeDestroy () {\n    this.$off('annotation-changed', this.onAnnotationChanged)\n  },\n\n  computed: {\n    ...mapGetters([\n      'currentEpisode',\n      'currentProduction',\n      'getTaskPreviews',\n      'getTaskTypePriority',\n      'isCurrentUserManager',\n      'isTVShow',\n      'route',\n      'editMap',\n      'editMetadataDescriptors',\n      'taskMap',\n      'taskTypeMap',\n      'user'\n    ]),\n\n    title () {\n      if (this.currentEdit) {\n        if (this.currentEdit.episode_name) {\n          return `${this.currentEdit.episode_name} / ` +\n                 `${this.currentEdit.name}`\n        } else {\n          return `${this.currentEdit.name}`\n        }\n      } else {\n        return 'Loading...'\n      }\n    },\n\n    editsPath () {\n      return getEntitiesPath(\n        this.currentProduction.id,\n        'edits',\n        this.currentEpisode ? this.currentEpisode.id : this.currentEpisode\n      )\n    }\n  },\n\n  methods: {\n    ...mapActions([\n      'editEdit',\n      'loadEdits',\n      'loadTaskEntityPreviewFiles',\n      'updatePreviewAnnotation'\n    ]),\n\n    resetPreviewFileMap () {\n      this.previewFileMap.clear()\n      if (this.previewFiles) {\n        Object.values(this.previewFiles).forEach(previewFiles => {\n          previewFiles.forEach(previewFile => {\n            this.previewFileMap.set(previewFile.id, previewFile)\n          })\n        })\n      }\n    },\n\n    resetHeight () {\n      this.$nextTick(() => {\n        let height = window.innerHeight\n        height -= this.$refs.header ? this.$refs.header.offsetHeight : 0\n        if (this.$refs['button-bar']) {\n          height -= this.$refs['button-bar'].offsetHeight\n        }\n        if (this.$refs['video-progress']) {\n          height -= this.$refs['video-progress'].$el.offsetHeight\n        }\n        if (this.$refs['info-row']) {\n          height -= this.$refs['info-row'].offsetHeight\n        }\n        if (this.$refs['schedule-row']) {\n          height -= this.$refs['schedule-row'].offsetHeight\n        }\n        if (this.$refs['page-header-row']) {\n          height -= this.$refs['page-header-row'].offsetHeight\n        }\n        height = Math.min(window.innerHeight * 0.4, Math.max(480, height))\n        if (this.$refs['video-container']) {\n          this.$refs['video-container'].style.height = `${height}px`\n        }\n        if (!this.isCommentsHidden && this.$refs['task-info']) {\n          this.$refs['task-info'].$el.style.height = `${height}px`\n        }\n        if (this.rawPlayer) this.rawPlayer.resetHeight(height)\n        this.$nextTick(() => {\n          this.resetCanvas()\n          this.updateProgressBar()\n        })\n      })\n    },\n\n    initPlayer () {\n      if (!this.currentEdit) return\n\n      this.currentPreviewIndex = 0\n      // There's only one entity in this player, which is current Edit entity,\n      // so playingEntityIndex is always 0\n      this.playingEntityIndex = 0\n      this.entityList = [{ ...this.currentEdit, preview_file_id: null, preview_files: this.previewFiles }]\n      this.framesPerImage[0] = this.currentEdit.preview_nb_frames || DEFAULT_NB_FRAMES_PICTURE\n      this.pause()\n      if (this.rawPlayer) this.rawPlayer.setCurrentFrame(1)\n      this.currentTimeRaw = 0\n      this.updateProgressBar()\n      this.updateTaskPanel()\n      this.clearCanvas()\n      this.annotations = []\n      this.resetHeight()\n      this.resetCanvas()\n        .then(() => {\n          if (this.isCurrentPreview) {\n            this.annotations = this.currentEntity.preview_file_annotations\n            this.loadAnnotation(this.getAnnotation(0))\n          }\n        })\n    },\n\n    getCurrentEdit () {\n      return this.editMap.get(this.route.params.edit_id) || null\n    },\n\n    confirmEditEdit (form) {\n      form.id = this.currentEdit.id\n      this.isLoading = true\n      this.errors.edit = false\n      this.editEdit(form)\n        .then(() => {\n          this.isLoading = false\n          this.modals.edit = false\n        })\n        .catch((err) => {\n          console.error(err)\n          this.isLoading = false\n          this.errors.edit = true\n        })\n    },\n\n    setPreviewFile (previewFile) {\n      this.playingPreviewFileId = previewFile.id\n\n      this.currentEntity.preview_file_id = previewFile.id\n      this.currentEntity.preview_file_task_id = previewFile.task_id\n      this.currentEntity.preview_file_extension = previewFile.extension\n      this.currentEntity.preview_file_annotations = previewFile.annotations || []\n      this.currentEntity.preview_file_previews = previewFile.previews\n\n      this.annotations = this.currentEntity.preview_file_annotations\n\n      if (this.rawPlayer) this.rawPlayer.reloadCurrentEntity()\n      this.clearCanvas()\n      this.updateTaskPanel()\n      this.updateProgressBar()\n    },\n\n    onPreviewChanged (entity, previewFile) {\n      this.pause()\n      if (!previewFile) {\n        // TODO: handle the situation when now preview file is selected\n        // (e.g. if selected task has none)\n      }\n      const isDifferentPreviewFile = this.playingPreviewFileId !== previewFile.id\n      this.setPreviewFile(previewFile)\n      if (isDifferentPreviewFile) this.sendUpdatePlayingStatus()\n    },\n\n    onAnnotationChanged ({ preview, additions, deletions, updates }) {\n      const taskId = preview.task_id\n      this.updatePreviewAnnotation({\n        taskId, preview, additions, deletions, updates\n      })\n    },\n\n    scrollToEntity () {\n      // This method in unused here, required by PlaylistPlayer that shares\n      // playerMixin.\n    },\n\n    resetData () {\n      this.$nextTick(() => {\n        this.loadEdits()\n          .then(() => {\n            this.currentEdit = this.getCurrentEdit()\n            if (!this.currentEdit) {\n              return\n            }\n            this.loadTaskEntityPreviewFiles(this.currentEdit.id).then((previewFiles) => {\n              this.previewFiles = previewFiles\n              this.resetPreviewFileMap()\n              this.initPlayer()\n              this.isLoading = false\n            })\n          })\n      })\n    },\n\n    onPreviewFilesUpdate () {\n      this.loadTaskEntityPreviewFiles(this.currentEdit.id).then((previewFiles) => {\n        this.previewFiles = previewFiles\n        this.currentEntity.preview_files = previewFiles\n        this.resetPreviewFileMap()\n        // FIXME: combo should continue displaying currently selected task preview\n        // unless it's no longer available (e.g. was deleted along with the comment)\n        if (this.currentEntity &&\n          this.currentEntity.preview_file_id &&\n          !this.previewFileMap.has(this.currentEntity.preview_file_id)) {\n          // TODO: handle deletion of currently displayed preview file\n        }\n      })\n    }\n  },\n\n  watch: { // Needed when reloading the page with F5\n    currentProduction () {\n      if (!this.isTVShow) this.resetData()\n    },\n\n    currentEpisode () {\n      if (this.isTVShow && this.editMap.size === 0) {\n        this.resetData()\n      }\n    },\n\n    playingPreviewFileId () {\n      // In case preview was switched by someone else in the room,\n      // make sure that comboboxes reflect this change too.\n      if (!this.currentEntity || !this.playingPreviewFileId) return\n\n      const previewsCombo = this.$refs['previews-per-task-type']\n      if (!previewsCombo) return\n\n      const previews = this.currentEntity.preview_files\n      for (const taskTypeId in previews) {\n        const previewFile = previews[taskTypeId].find(p => p.id === this.playingPreviewFileId)\n        if (previewFile) {\n          this.setPreviewFile(previewFile)\n          if (\n            previewsCombo.taskTypeId !== taskTypeId ||\n            previewsCombo.previewFileId !== this.playingPreviewFileId\n          ) {\n            previewsCombo.taskTypeId = taskTypeId\n            previewsCombo.previewFileId = this.playingPreviewFileId\n          }\n          break\n        }\n      }\n    }\n  },\n\n  socket: {\n    events: {\n      ...previewRoomMixin.socket.events,\n      ...playerMixin.socket.events,\n\n      'preview-file:add-file' (eventData) {\n        if (eventData.project_id !== this.task.project_id) return\n        const taskId = eventData.task_id\n\n        const previews = this.currentEntity.preview_files\n        for (const taskTypeId in previews) {\n          const previewFile = previews[taskTypeId].find(p => p.task_id === taskId)\n          if (previewFile) {\n            // Added preview affects one of the tasks, preview files must be refreshed\n            this.onPreviewFilesUpdate()\n            break\n          }\n        }\n      },\n\n      'comment:delete' (eventData) {\n        // Deleting a comment might remove a task preview, preview files must be refreshed\n        if (eventData.project_id !== this.task.project_id) return\n        this.onPreviewFilesUpdate()\n      }\n    }\n  },\n\n  metaInfo () {\n    return {\n      title: `${this.title} - Kitsu`\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.dark .page {\n  background: $dark-grey-light;\n  height: 100%;\n  padding-bottom: 1em;\n}\n\n.dark .wrapper {\n  background: $dark-grey-2;\n}\n\n.block {\n  margin: 0;\n}\n\n.entity-title {\n  font-weight: bold;\n}\n\n.entity-thumbnail {\n  margin-bottom: 0;\n}\n\n.main-block {\n  padding: .5em 1.5em;\n}\n\n.edit-data {\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n  margin: 0 1em 0 1em;\n  overflow: hidden;\n  min-height: 300px;\n}\n\n.edit-metadata {\n  width: 100%;\n}\n\nh2.subtitle {\n  border-bottom: 0;\n  margin-top: 0;\n  margin-bottom: 0.5em;\n  font-size: 1.5em;\n}\n\n.page {\n  background: #F9F9F9;\n  padding: 0em;\n}\n\n.page-header {\n  margin-top: calc(50px + 2em);\n  margin-left: 1em;\n  margin-right: 1em;\n}\n\n.infos {\n  margin-top: 1em;\n\n  .flexrow-item {\n    align-self: flex-start;\n    flex: 1;\n  }\n}\n\n.edit-thumbnail {\n  max-width: 100px;\n}\n\n.field-label {\n  font-weight: bold;\n  width: 140px;\n}\n\n.data-list {\n  max-width: 100%;\n}\n\n.page-header .thumbnail-picture {\n  margin: 0 1em 0 0;\n  max-width: 80px;\n}\n\n.back-link {\n  padding-top: 3px;\n}\n\n.task-list {\n  width: 100%;\n}\n\n.datatable-row {\n  user-select: text;\n}\n\n.schedule {\n  position: relative;\n  height: 300px;\n  padding: 10px;\n\n  .schedule-title {\n    margin-bottom: 5px;\n  }\n\n  .wrapper {\n    height: 230px;\n    border-radius: 10px;\n  }\n}\n\n.column.main-column {\n  background: var(--background-page);\n  padding-bottom: 1em;\n}\n\n@media screen and (max-width: 768px) {\n  .task-column {\n    margin-bottom: 1em;\n  }\n\n  .column:first-child {\n    margin-right: 0;\n  }\n\n  .entity-title {\n    font-size: 1.3em;\n    line-height: 1.5em;\n  }\n}\n\n/* Player styles */\n\n.full-height {\n  height: 100%;\n}\n\n.player {\n  margin: 1em;\n\n  .player-button {\n    background: $white-grey;\n    margin: 0;\n    border: 0;\n    border-radius: 0;\n\n    &.active {\n      color: $green;\n    }\n\n    &.topbar-button {\n      border-radius: 10px;\n      margin-right: 0.5em;\n    }\n  }\n}\n\n.dark .player {\n  background: $dark-grey;\n\n  .player-button {\n    background: $dark-grey-light;\n    color: $white-grey;\n\n    &:hover {\n      background: $dark-grey-lighter;\n    }\n\n    &.active {\n      color: $green;\n    }\n\n    &.topbar-button {\n      border: 1px solid $dark-grey-strong;\n    }\n  }\n}\n\n.player-footer {\n  background: $white-grey;\n}\n\n.dark .player-footer {\n  background: $dark-grey-light;\n  color: $white-grey;\n}\n\n.loading-background {\n  width: 100%;\n  height: 100%;\n  background: black;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  text-align: center;\n}\n\n.spinner {\n  margin: auto;\n}\n\n.task-info-column {\n  min-width: 450px;\n  max-width: 450px;\n  overflow-y: auto;\n}\n\n.icon {\n  margin-top: -4px;\n  height: 20px;\n}\n\n.smaller {\n  height: 16px;\n}\n\n.right {\n  margin-left: auto;\n}\n\n.video-player {\n  display: flex;\n  flex-direction: column;\n  align-content: flex-end;\n  height: 100%;\n}\n\n.video-wrapper {\n  flex: 1;\n  display: flex;\n  background: black;\n  align-items: center;\n  justify-content: center;\n  text-align: center;\n  margin: auto;\n  width: 100%;\n}\n\n.annotation-movie {\n  margin: auto;\n  width: 100%;\n}\n\n.dark .time-indicator {\n  color: $light-grey;\n  padding-left: 0.8em;\n  margin-right: 0;\n}\n\n.video-container {\n  position: relative;\n  margin: auto;\n  min-height: 480px;\n}\n\n.canvas-wrapper {\n  margin: auto;\n  position: absolute;\n  top: 0;\n  left: 0;\n}\n\n.buttons {\n  height: 32px;\n}\n\nprogress::-moz-progress-bar {\n  background-color: #43B581;\n}\n\nprogress::-webkit-progress-value {\n  background-color: #43B581;\n}\n\nprogress {\n  width: 100%;\n  border-radius: 0;\n  margin: 0;\n  padding: 0;\n  border: 0;\n  background: $grey;\n  height: 8px;\n  display: block;\n}\n\n.progress span#progress-bar {\n  width: 100%;\n  border-radius: 0;\n  margin: 0;\n  padding: 0;\n  background-color: #43B581;\n}\n\n.mr1 {\n  margin-right: 1em;\n}\n\n.mr0 {\n  margin-right: 0;\n}\n\n.video-progress {\n  transition: opacity 0.5s ease\n}\n\n.spinner {\n  margin-top: 80px;\n  margin-left: 1em;\n}\n\n.annotation-tools {\n  display: flex;\n  align-items: stretch;\n  height: 100%;\n}\n\n.slide-enter-active {\n  transition: all .3s ease;\n}\n.slide-leave-active {\n  transition: all .3s ease;\n}\n.slide-enter, .slide-leave-to {\n  transform: translateX(100%);\n}\n\n.for-client {\n  background: $dark-purple-strong;\n  border: 2px solid $dark-purple-strong;\n  color: $white;\n  padding: 0.3em;\n  margin-left: 1em;\n  margin-right: 0;\n  border-radius: 5px;\n}\n\n#edit-annotation-canvas {\n  margin: auto;\n}\n\n.picture-preview-wrapper {\n  display: flex;\n  height: inherit;\n  justify-content: center;\n  align-items: center;\n  flex: 1;\n}\n\n.picture-preview {\n  max-height: 100%;\n  max-width: 100%;\n  color: var(--text);\n}\n\n.raw-player {\n  margin: auto;\n}\n\n.disabled {\n  color: $grey-strong;\n}\n\n.loading-wrapper {\n  width: 100%;\n}\n\n.disabled {\n  color: $grey;\n}\n\n.dark .frame-per-image-input {\n  padding: 2px;\n  margin-left: 3px;\n  background-color: $dark-grey-2;\n  border: 1px solid $dark-grey-stronger;\n  color: white;\n  width: 3rem;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Edit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Edit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Edit.vue?vue&type=template&id=02279721&scoped=true&\"\nimport script from \"./Edit.vue?vue&type=script&lang=js&\"\nexport * from \"./Edit.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Edit.vue?vue&type=style&index=0&id=02279721&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"02279721\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/@vue/cli-service/node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Edit.vue?vue&type=style&index=0&id=02279721&prod&lang=scss&scoped=true&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/@vue/cli-service/node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PreviewsPerTaskType.vue?vue&type=style&index=0&id=6b6c8874&prod&lang=scss&scoped=true&\""],"sourceRoot":""}