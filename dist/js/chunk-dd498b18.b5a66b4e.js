(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-dd498b18"],{"0024":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"data-list"},[s("div",[s("table",{ref:"headerWrapper",staticClass:"datatable"},[s("thead",{staticClass:"datatable-head"},[s("tr",{staticClass:"datatable-row-header"},[s("th",{staticClass:"type"},[t._v(" "+t._s(t.$t("tasks.fields.task_type"))+" ")]),s("th",{staticClass:"status"},[t._v(" "+t._s(t.$t("tasks.fields.task_status"))+" ")]),s("th",{staticClass:"estimation"},[t._v(" "+t._s(t.$t("tasks.fields.estimation").substring(0,3))+". ")]),s("th",{staticClass:"estimation"},[t._v(" "+t._s(t.$t("tasks.fields.duration").substring(0,3))+". ")]),s("th",{staticClass:"startdate"},[t._v(" "+t._s(t.$t("tasks.fields.start_date_short"))+" ")]),s("th",{staticClass:"duedate"},[t._v(" "+t._s(t.$t("tasks.fields.due_date"))+" ")]),s("th",{staticClass:"assignees"},[t._v(" "+t._s(t.$t("tasks.fields.assignees"))+" ")]),s("th",{staticClass:"end-cell"})])])])]),s("table-info",{attrs:{"is-loading":t.isLoading,"is-error":t.isError}}),t.entries.length>0?s("div",{directives:[{name:"scroll",rawName:"v-scroll",value:t.onBodyScroll,expression:"onBodyScroll"}],staticClass:"task-list-body"},[s("table",{staticClass:"datatable"},[s("tbody",{staticClass:"datatable-body"},t._l(t.sortedEntries,(function(e){return s("tr",{key:"string"===typeof e?e:e.id,class:{selected:t.currentTask&&t.currentTask.id===e,"datatable-row":!0,"datatable-row--selectable":!0},on:{click:function(s){t.selectTask(t.getTask(e))}}},[t.getTaskType(e)?s("task-type-cell",{staticClass:"type",attrs:{"task-type":t.getTaskType(e),"production-id":t.currentProduction.id}}):t._e(),s("td",{staticClass:"status"},[t.getTask(e)?s("validation-tag",{attrs:{task:t.getTask(e),"is-static":!0}}):t._e()],1),s("td",{staticClass:"estimation"},[t._v(" "+t._s(t.getTaskEstimation(e))+" ")]),s("td",{staticClass:"estimation"},[t._v(" "+t._s(t.getTaskDuration(e))+" ")]),s("td",{staticClass:"startdate"},[t._v(" "+t._s(t.getTaskStartDate(e))+" ")]),s("td",{staticClass:"duedate"},[t._v(" "+t._s(t.getTaskDueDate(e))+" ")]),s("td",{staticClass:"assignees"},[t.isCurrentUserClient||t.isCurrentUserVendor?t._e():s("div",{staticClass:"flexrow"},t._l(t.getAssignees(e),(function(a){return s("div",{key:a,staticClass:"avatar-wrapper"},[s("people-avatar",{key:e+"-"+a,staticClass:"person-avatar flexrow-item",attrs:{person:t.personMap.get(a),size:30,"font-size":15}})],1)})),0)]),s("td",{staticClass:"end-cell"})],1)})),0)])]):t._e()],1)},i=[],n=s("2f62"),r=s("31f2"),o=s("58f5"),c=s("e60b"),l=s("fe13"),u=s("eb8c");function p(t){return h(t)||b(t)||f(t)||d()}function d(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function f(t,e){if(t){if("string"===typeof t)return y(t,e);var s=Object.prototype.toString.call(t).slice(8,-1);return"Object"===s&&t.constructor&&(s=t.constructor.name),"Map"===s||"Set"===s?Array.from(t):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?y(t,e):void 0}}function b(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function h(t){if(Array.isArray(t))return y(t)}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var s=0,a=new Array(e);s<e;s++)a[s]=t[s];return a}function v(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function g(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?v(Object(s),!0).forEach((function(e){m(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):v(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function m(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var _={name:"entity-task-list",mixins:[r["a"]],components:{TableInfo:c["a"],TaskTypeCell:o["a"],PeopleAvatar:u["a"],ValidationTag:l["a"]},props:{entries:{type:Array,default:function(){return[]}},isLoading:{type:Boolean,default:!1},isError:{type:Boolean,default:!1}},data:function(){return{currentTask:null}},computed:g(g({},Object(n["c"])(["currentProduction","getTaskTypePriority","isCurrentUserClient","isCurrentUserVendor","personMap","taskMap","taskTypeMap"])),{},{sortedEntries:function(){var t=this;return p(this.entries).sort((function(e,s){var a=t.getTask(e),i=t.getTask(s),n=t.taskTypeMap.get(a.task_type_id),r=t.taskTypeMap.get(i.task_type_id),o=t.getTaskTypePriority(a.task_type_id),c=t.getTaskTypePriority(i.task_type_id);return o===c?n.name.localeCompare(r.name):o-c}))}}),methods:g(g({},Object(n["b"])([])),{},{onBodyScroll:function(t,e){this.$refs.headerWrapper.style.left="-".concat(e.scrollLeft,"px")},getTask:function(t){return"string"===typeof t?this.taskMap.get(t):t},getTaskStartDate:function(t){var e=this.getTask(t);return e&&e.start_date?e.start_date.substring(0,10):""},getTaskDueDate:function(t){var e=this.getTask(t);return e&&e.due_date?e.due_date.substring(0,10):""},getTaskEstimation:function(t){var e=this.getTask(t);return e&&e.estimation?this.formatDuration(e.estimation):""},getTaskDuration:function(t){var e=this.getTask(t);return e&&e.duration?this.formatDuration(e.duration):""},getTaskType:function(t){var e=this.getTask(t);return e?this.taskTypeMap.get(e.task_type_id):null},getAssignees:function(t){var e=this.getTask(t);return e?e.assignees:[]},selectTask:function(t){this.currentTask=t,this.$emit("task-selected",t)}})},O=_,w=(s("7823"),s("0c7c")),k=Object(w["a"])(O,a,i,!1,null,"1cd18355",null);e["a"]=k.exports},"00f7":function(t,e,s){"use strict";s("f89a")},"22a2":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mt1 news flexcolumn"},[t.isLoading?s("div",{staticClass:"has-text-centered"},[s("spinner")],1):t.newsList.length>0?s("div",{staticClass:"news"},[s("div",{staticClass:"timeline"},t._l(t.newsList,(function(e){return s("div",{key:"news-"+e.id},[s("div",{staticClass:"news-line timeline-entry flexrow"},[s("span",{class:{dot:!0,red:t.hasRetakeValue(e),green:t.hasDoneValue(e)}}),s("span",{staticClass:"date flexrow-item"},[t._v(" "+t._s(t.formatFullDate(e.created_at))+" ")]),s("div",{staticClass:"flexrow-item task-type-wrapper"},[s("task-type-name",{staticClass:"task-type-name",attrs:{"task-type":t.buildTaskTypeFromNews(e),"production-id":t.currentProduction.id,"is-static":!0}})],1),s("div",{staticClass:"flexrow-item validation-wrapper"},[s("validation-tag",{staticClass:"validation-tag",attrs:{task:t.taskMap.get(e.task_id),"is-static":!0,thin:!e.change}})],1),s("div",{staticClass:"flexrow-item comment-content"},[s("div",[s("div",{staticClass:"news-info flexrow"},[t.personMap.get(e.author_id)?s("people-avatar",{staticClass:"flexrow-item",attrs:{person:t.personMap.get(e.author_id),size:30,"font-size":14,"is-link":!1}}):t._e(),s("span",{staticClass:"explaination flexrow-item"},[s("span",{staticClass:"strong person-name"},[t._v(" "+t._s(t.personName(e))+" ")])])],1)])])])])})),0)]):s("div",[t._v(" "+t._s(t.$t("entities.news.no_news"))+" ")])])},i=[],n=s("2f62"),r=s("7f45"),o=s.n(r),c=s("31f2"),l=s("c279"),u=s("be83"),p=s("eb8c"),d=s("274f"),f=s("fe13");function b(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function h(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?b(Object(s),!0).forEach((function(e){y(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):b(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function y(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var v={name:"entity-news",mixins:[c["a"],l["a"]],components:{PeopleAvatar:p["a"],Spinner:u["a"],TaskTypeName:d["a"],ValidationTag:f["a"]},data:function(){return{isLoading:!1,newsList:[]}},props:{entity:{type:Object,default:function(){}}},mounted:function(){this.entity&&this.reset()},computed:h({},Object(n["c"])(["currentProduction","personMap","taskMap","taskTypeMap","taskStatusMap","timezone"])),methods:h(h({},Object(n["b"])(["getEntityNews"])),{},{buildTaskTypeFromNews:function(t){return h(h({},this.taskTypeMap.get(t.task_type_id)),{},{episode_id:t.episode_id})},getTaskType:function(t){var e=this.taskMap.get(t.task_id);return this.taskTypeMap.get(e.task_type_id)},hasRetakeValue:function(t){var e=this.taskStatusMap.get(t.task_status_id);return!!e&&(t.change&&e.is_retake)},hasDoneValue:function(t){var e=this.taskStatusMap.get(t.task_status_id);return!!e&&(t.change&&e.is_done)},formatTime:function(t){var e=o.a.tz(t,"UTC").tz(this.timezone);return e.format("HH:mm")},personName:function(t){var e=this.personMap.get(t.author_id);return e?e.full_name:""},reset:function(){var t=this;this.isLoading=!0,this.getEntityNews(this.entity.id).then((function(e){t.newsList=e.data,t.isLoading=!1})).catch((function(e){console.error(e),t.newsList=[],t.isLoading=!1}))}}),watch:{entity:function(){this.entity&&this.reset()}}},g=v,m=(s("69a0"),s("0c7c")),_=Object(m["a"])(g,a,i,!1,null,"ae9c27ce",null);e["a"]=_.exports},"2e03":function(t,e,s){"use strict";s("85b4")},"4ee3":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mt1 wrapper time-logs"},[t.isLoading?s("div",{staticClass:"has-text-centered"},[s("spinner")],1):t.logs.length>0?s("div",[s("table",{staticClass:"datatable"},[s("thead",{staticClass:"datatable-head"},[s("tr",{staticClass:"datatable-row-header"},[s("th",{staticClass:"date"},[t._v(" "+t._s(t.$t("main.date"))+" ")]),s("th",{staticClass:"person"},[t._v(" "+t._s(t.$t("main.person"))+" ")]),s("th",{staticClass:"type"},[t._v(" "+t._s(t.$t("entities.preview_files.task_type"))+" ")]),s("th",{staticClass:"duration"},[t._v(" "+t._s(t.$t("tasks.fields.duration"))+" ")]),s("th",{staticClass:"end-cell"})])])]),s("table",{staticClass:"datatable"},[s("tbody",{staticClass:"datatable-body"},t._l(t.logs,(function(e){return s("tr",{key:e.id,staticClass:"datatable-row"},[s("td",{staticClass:"date"},[t._v(" "+t._s(t.formatSimpleDate(e.date))+" ")]),s("people-name-cell",{staticClass:"person",attrs:{person:t.personMap.get(e.person_id)}}),s("task-type-name",{staticClass:"type",attrs:{"task-type":t.getTaskType(e),"production-id":t.currentProduction.id}}),s("td",{staticClass:"duration"},[t._v(" "+t._s(t.formatDuration(e.duration))+" ")]),s("td",{staticClass:"end-cell"})],1)})),0)])]):s("div",[t._v(" "+t._s(t.$t("entities.logs.no_logs"))+" ")])])},i=[],n=s("2f62"),r=s("31f2"),o=s("7365"),c=s("be83"),l=s("58f5");function u(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function p(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?u(Object(s),!0).forEach((function(e){d(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):u(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function d(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var f={name:"entity-time-logs",mixins:[r["a"]],components:{PeopleNameCell:o["a"],Spinner:c["a"],TaskTypeName:l["a"]},props:{entity:{type:Object,default:function(){}}},data:function(){return{logs:[],isLoading:!1}},mounted:function(){this.entity&&this.reset()},computed:p({},Object(n["c"])(["currentProduction","personMap","taskMap","taskTypeMap"])),methods:p(p({},Object(n["b"])(["getEntityTimeLogs"])),{},{getTaskType:function(t){var e=this.taskMap.get(t.task_id);return this.taskTypeMap.get(e.task_type_id)},reset:function(){var t=this;this.isLoading=!0,this.getEntityTimeLogs(this.entity.id).then((function(e){t.logs=e,t.isLoading=!1})).catch((function(e){console.error(e),t.logs=[],t.isLoading=!1}))}}),watch:{entity:function(){this.entity&&this.reset()}}},b=f,h=(s("e40c"),s("0c7c")),y=Object(h["a"])(b,a,i,!1,null,"acb7aec0",null);e["a"]=y.exports},"50a5":function(t,e,s){},"69a0":function(t,e,s){"use strict";s("919e")},7365:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("td",{staticClass:"name",attrs:{scope:"row"}},[s("div",{staticClass:"people-name"},[s("people-avatar",{staticClass:"avatar",attrs:{person:t.person}}),s("people-name",{staticClass:"people-name",attrs:{"with-link":"",person:t.person}})],1)])},i=[],n=s("2f62"),r=s("eb8c"),o=s("0073");function c(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function l(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?c(Object(s),!0).forEach((function(e){u(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):c(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function u(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var p={name:"people-name-cell",components:{PeopleName:o["a"],PeopleAvatar:r["a"]},props:{person:{type:Object,required:!0}},computed:l({},Object(n["c"])([])),methods:l({},Object(n["b"])([]))},d=p,f=(s("00f7"),s("0c7c")),b=Object(f["a"])(d,a,i,!1,null,"badaef58",null);e["a"]=b.exports},7823:function(t,e,s){"use strict";s("9068")},"85b4":function(t,e,s){},9068:function(t,e,s){},"919e":function(t,e,s){},9751:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.label.length>0?s("label",{staticClass:"label"},[t._v(" "+t._s(t.label)+" ")]):t._e(),s("div",{class:{combo:!0,open:t.showList},on:{click:t.toggleList}},[s("div",{staticClass:"flexrow"},[s("div",{staticClass:"selected-line flexrow-item"},[t._v(" "+t._s(t.selectedOption?t.selectedOption.label:"")+" ")]),s("chevron-down-icon",{staticClass:"down-icon flexrow-item"})],1),t.showList?s("div",{ref:"select",staticClass:"select-input",on:{click:t.toggleList}},t._l(t.options,(function(e){return s("div",{key:e.id,staticClass:"option-line",on:{click:function(s){return t.selectOption(e)},mouseup:function(s){return"button"in s&&1!==s.button?null:t.openRoute(e)}}},[t._v(" "+t._s(e.label)+" ")])})),0):t._e()]),s("div",{class:{"c-mask":!0,"is-active":t.showList},on:{click:t.toggleList}})])},i=[],n=s("2f62"),r=s("0a35");function o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function c(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach((function(e){l(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function l(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var u={name:"combobox-styled",components:{ChevronDownIcon:r["j"]},data:function(){return{selectedOption:{label:"",value:""},showList:!1}},props:{label:{default:"",type:String},options:{default:function(){return[]},type:Array},value:{default:"",type:String}},mounted:function(){this.options.length>0&&(this.selectedOption=this.options[0])},computed:c({},Object(n["c"])(["isDarkTheme"])),methods:{selectOption:function(t){this.$emit("input",t.value),this.selectedOption=t,this.toggleList()},openRoute:function(t){var e=this.$router.resolve(t.route).href,s="".concat(window.location.protocol,"//").concat(window.location.host).concat(e);window.open(s,"_blank")},toggleList:function(){this.showList=!this.showList}},watch:{options:function(){var t=this;if(this.options.length>0){var e=this.options.find((function(e){return e.value===t.value}));this.selectedOption=e||this.options[0]}},value:function(){var t=this;this.selectedOption=this.options.find((function(e){return e.value===t.value}))}}},p=u,d=(s("e861"),s("0c7c")),f=Object(d["a"])(p,a,i,!1,null,"597e1434",null);e["a"]=f.exports},ac67:function(t,e,s){},b2f9:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mt1 flexcolumn wrapper preview-files"},[t.isLoading?s("div",{staticClass:"has-text-centered"},[s("spinner")],1):t.previewFiles.length>0?s("div",[s("table",{staticClass:"datatable"},[s("thead",{staticClass:"datatable-head"},[s("tr",{staticClass:"datatable-row-header"},[s("th",{staticClass:"thumbnail"}),s("th",{staticClass:"type"},[t._v(" "+t._s(t.$t("entities.preview_files.task_type"))+" ")]),s("th",{staticClass:"revision"},[t._v(" "+t._s(t.$t("entities.preview_files.revision"))+" ")]),s("th",{staticClass:"original-name"},[t._v(" "+t._s(t.$t("entities.preview_files.original_file_name"))+" ")]),s("th",{staticClass:"extension"},[t._v(" "+t._s(t.$t("entities.preview_files.extension"))+" ")]),s("th",{staticClass:"size"},[t._v(" "+t._s(t.$t("entities.preview_files.size"))+" ")]),s("th",{staticClass:"status"},[t._v(" "+t._s(t.$t("entities.preview_files.status"))+" ")]),s("th",{staticClass:"uploader"},[t._v(" "+t._s(t.$t("entities.preview_files.uploader"))+" ")]),s("th",{staticClass:"person"}),s("th",{staticClass:"end-cell"})])])]),s("table",{staticClass:"datatable",staticStyle:{overflow:"auto"}},[s("tbody",{staticClass:"datatable-body"},t._l(t.previewFiles,(function(e){return s("tr",{key:e.id,staticClass:"datatable-row"},[s("td",{staticClass:"thumbnail"},[s("entity-thumbnail",{staticClass:"preview-thumbnail",attrs:{"preview-file-id":e.id,"empty-width":60,width:60}})],1),s("task-type-name",{staticClass:"type",attrs:{"task-type":t.getTaskType(e),"production-id":t.currentProduction.id}}),s("td",{staticClass:"revision"},[t._v(" "+t._s(e.revision)+" ")]),s("td",{staticClass:"original-name"},[t._v(" "+t._s(e.original_name)+" ")]),s("td",{staticClass:"extension"},[t._v(" "+t._s(e.extension)+" ")]),s("td",{staticClass:"size"},[t._v(" "+t._s(t.renderFileSize(e.file_size))+" ")]),s("td",{staticClass:"status"},[t._v(" "+t._s(e.validation_status)+" ")]),s("people-name-cell",{staticClass:"person",attrs:{person:t.personMap.get(e.person_id)}}),s("td",{staticClass:"download"},[s("a",{staticClass:"button flexrow-item",attrs:{href:t.getDownloadPath(e.id),title:t.$t("playlists.actions.download_file")}},[s("download-icon",{staticClass:"icon is-small"})],1)])],1)})),0)])]):s("div",[t._v(" "+t._s(t.$t("entities.preview_files.no_preview_files"))+" ")])])},i=[],n=s("2f62"),r=s("0a35"),o=s("66be"),c=s("bb21"),l=s("7365"),u=s("be83"),p=s("58f5");function d(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function f(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?d(Object(s),!0).forEach((function(e){b(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):d(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function b(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var h={name:"entity-preview-files",components:{DownloadIcon:r["t"],EntityThumbnail:c["a"],PeopleNameCell:l["a"],Spinner:u["a"],TaskTypeName:p["a"]},data:function(){return{isLoading:!1,previewFiles:[]}},props:{entity:{type:Object,default:function(){}}},mounted:function(){this.entity&&this.reset()},computed:f({},Object(n["c"])(["currentProduction","personMap","taskMap","taskTypeMap"])),methods:f(f({},Object(n["b"])(["getEntityPreviewFiles"])),{},{getTaskType:function(t){var e=this.taskMap.get(t.task_id);return this.taskTypeMap.get(e.task_type_id)},getDownloadPath:function(t){var e=this.isMovie?"movies":"pictures";return"/api/".concat(e,"/originals/preview-files/")+"".concat(t,"/download")},renderFileSize:o["c"],reset:function(){var t=this;this.isLoading=!0,this.getEntityPreviewFiles(this.entity.id).then((function(e){t.previewFiles=e,t.isLoading=!1})).catch((function(e){console.error(e),t.previewFiles=[],t.isLoading=!1}))}}),watch:{entity:function(){this.entity&&this.reset()}}},y=h,v=(s("2e03"),s("0c7c")),g=Object(v["a"])(y,a,i,!1,null,"00091054",null);e["a"]=g.exports},e40c:function(t,e,s){"use strict";s("50a5")},e861:function(t,e,s){"use strict";s("ac67")},f58f:function(t,e,s){"use strict";s.d(e,"a",(function(){return l}));var a=s("3657"),i=s("c1df"),n=s.n(i);function r(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function o(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?r(Object(s),!0).forEach((function(e){c(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):r(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function c(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var l={data:function(){return{currentSection:"Casting",zoomLevel:1,entityNavOptions:[{label:"Casting",value:"casting"},{label:"Schedule",value:"schedule"},{label:"Preview Files",value:"preview-files"},{label:"Activity",value:"activity"},{label:"Timelog",value:"time-logs"}],zoomOptions:[{label:"1",value:1},{label:"2",value:2},{label:"3",value:3}]}},created:function(){},mounted:function(){},beforeDestroy:function(){},computed:{currentTasks:function(){var t=this,e=this.currentAsset||this.currentShot||this.currentEdit;return e?e.tasks.map((function(e){return t.taskMap.get(e)})).filter((function(t){return t})).sort((function(e,s){var a=t.getTaskTypePriority(e.task_type_id),i=t.getTaskTypePriority(s.task_type_id);return a-i})):[]},tasksStartDate:function(){return this.scheduleItems.length>0&&this.scheduleItems[0].children.length>0?Object(a["l"])(this.scheduleItems[0].children).clone().add(-60,"days"):n()()},tasksEndDate:function(){return this.scheduleItems.length>0&&this.scheduleItems[0].children.length>0?Object(a["m"])(this.scheduleItems[0].children).clone().add(60,"days"):n()().add(30,"days")},scheduleItems:function(){var t=this,e=0,s={avatar:!1,id:"root",name:"Tasks",color:"#888",priority:1,expanded:!0,loading:!1,children:[],editable:!1},i=n()(),r=this.currentTasks.map((function(n){var r,c=t.formatDuration(n.estimation),l=i.clone();if(!n.start_date&&!n.real_start_date&&!n.due_date&&!n.end_date)return null;n.start_date?l=Object(a["u"])(n.start_date):n.real_start_date&&(l=Object(a["u"])(n.real_start_date)),n.due_date?r=Object(a["u"])(n.due_date):n.end_date?r=Object(a["u"])(n.end_date):n.estimation&&(r=l.clone().add(c,"days")),r&&!r.isBefore(l)||(r=l.clone().add(1,"days")),c&&(e+=n.estimation);var u=t.taskTypeMap.get(n.task_type_id);return o(o({},n),{},{name:u.name,startDate:l,endDate:r,expanded:!1,loading:!1,man_days:c,editable:!1,unresizable:!1,parentElement:s,color:u.color,children:[]})})).filter((function(t){return null!==t})),c=n()(),l=n()().add(1,"days");return r.length>0&&(c=Object(a["l"])(r),l=Object(a["m"])(r)),Object.assign(s,{children:r,startDate:c,endDate:l,man_days:e}),[s]}},methods:{onTaskSelected:function(t){this.currentTask&&this.currentTask.id===t.id?this.currentTask=null:this.currentTask=t}},watch:{currentSection:function(){this.$router.push({query:{section:this.currentSection}});var t=this.$refs["schedule-widget"];"schedule"===this.currentSection&&t&&t.scrollToToday()}}}},f89a:function(t,e,s){}}]);
//# sourceMappingURL=chunk-dd498b18.b5a66b4e.js.map