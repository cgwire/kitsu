(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-298b3256"],{"0376":function(t,e,r){},"20a6":function(t,e,r){"use strict";r("f488")},"4d94":function(t,e,r){"use strict";r("f57a")},"4e51":function(t,e,r){"use strict";r("b9d3")},"8bb6":function(t,e,r){"use strict";r.r(e);var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"production-settings fixed-page"},[r("div",{staticClass:"wrapper"},[r("div",{staticClass:"tabs"},[r("ul",[r("li",{class:{"is-active":t.isActiveTab("brief")}},[r("a",{on:{click:function(e){t.activeTab="brief"}}},[t._v(" "+t._s(t.$t("productions.brief.title"))+" ")])]),r("li",{class:{"is-active":t.isActiveTab("parameters")}},[r("a",{on:{click:function(e){t.activeTab="parameters"}}},[t._v(" "+t._s(t.$t("productions.parameters.title"))+" ")])]),r("li",{class:{"is-active":t.isActiveTab("taskStatus")}},[r("a",{on:{click:function(e){t.activeTab="taskStatus"}}},[t._v(" "+t._s(t.$t("task_status.title"))+" ")])]),r("li",{class:{"is-active":t.isActiveTab("taskTypes")}},[r("a",{on:{click:function(e){t.activeTab="taskTypes"}}},[t._v(" "+t._s(t.$t("task_types.title"))+" ")])]),r("li",{class:{"is-active":t.isActiveTab("assetTypes")}},[r("a",{on:{click:function(e){t.activeTab="assetTypes"}}},[t._v(" "+t._s(t.$t("asset_types.title"))+" ")])])])]),r("div",{directives:[{name:"show",rawName:"v-show",value:t.isActiveTab("brief"),expression:"isActiveTab('brief')"}],staticClass:"tab"},[r("ProductionBrief")],1),r("div",{directives:[{name:"show",rawName:"v-show",value:t.isActiveTab("parameters"),expression:"isActiveTab('parameters')"}],staticClass:"tab"},[r("production-parameters")],1),r("div",{directives:[{name:"show",rawName:"v-show",value:t.isActiveTab("assetTypes"),expression:"isActiveTab('assetTypes')"}],staticClass:"tab"},[r("div",{staticClass:"flexrow mt1 mb1 add-asset-type"},[r("combobox",{staticClass:"flexrow-item",attrs:{options:t.remainingAssetTypes},model:{value:t.assetTypeId,callback:function(e){t.assetTypeId=e},expression:"assetTypeId"}}),r("button",{staticClass:"button flexrow-item",on:{click:t.addAssetType}},[t._v(" "+t._s(t.$t("main.add"))+" ")])],1),t.isEmpty(t.currentProduction.asset_types)?r("div",{staticClass:"box"},[t._v(" "+t._s(t.$t("settings.production.empty_list"))+" ")]):r("table",{staticClass:"datatable list"},[r("tbody",{staticClass:"datatable-body"},t._l(t.productionAssetTypes,(function(e){return r("tr",{key:e.id,staticClass:"datatable-row"},[r("td",{staticClass:"name"},[t._v(t._s(e.name))]),r("td",[r("button",{staticClass:"button",on:{click:function(r){return t.removeAssetType(e.id)}}},[t._v(" "+t._s(t.$t("main.remove"))+" ")])])])})),0)])]),r("div",{directives:[{name:"show",rawName:"v-show",value:t.isActiveTab("taskTypes"),expression:"isActiveTab('taskTypes')"}],staticClass:"tab"},[r("production-task-types")],1),r("div",{directives:[{name:"show",rawName:"v-show",value:t.isActiveTab("taskStatus"),expression:"isActiveTab('taskStatus')"}],staticClass:"tab"},[t.isEmpty(t.remainingTaskStatuses)?t._e():r("div",{staticClass:"flexrow mt1 mb1 add-task-status"},[r("combobox-status",{staticClass:"flexrow-item selector",attrs:{"task-status-list":t.remainingTaskStatuses},model:{value:t.taskStatusId,callback:function(e){t.taskStatusId=e},expression:"taskStatusId"}}),r("button",{staticClass:"button flexrow-item",on:{click:t.addTaskStatus}},[t._v(" "+t._s(t.$t("main.add"))+" ")])],1),t.isEmpty(t.currentProduction.task_statuses)?r("div",{staticClass:"box"},[t._v(" "+t._s(t.$t("settings.production.empty_list"))+" ")]):r("table",{staticClass:"datatable"},[r("thead",[r("tr",[r("th",{staticClass:"th-name"},[t._v(t._s(t.$t("task_status.fields.name")))]),r("th",{staticClass:"th-short-name"},[t._v(t._s(t.$t("task_status.fields.short_name")))]),r("th",{staticClass:"th-bool"},[t._v(t._s(t.$t("task_status.fields.is_done")))]),r("th",{staticClass:"th-bool"},[t._v(t._s(t.$t("task_status.fields.is_retake")))]),r("th",{staticClass:"th-bool"},[t._v(t._s(t.$t("task_status.fields.is_artist_allowed")))]),r("th",{staticClass:"th-bool"},[t._v(t._s(t.$t("task_status.fields.is_client_allowed")))])])]),r("tbody",{staticClass:"datatable-body"},[t._l(t.productionTaskStatuses,(function(e){return[e?r("tr",{key:e.id,staticClass:"datatable-row"},[r("td",[t._v(" "+t._s(e.name)+" ")]),r("td",{staticClass:"name"},[r("validation-tag",{attrs:{"is-static":!0,task:{task_status_id:e.id}}})],1),r("td",[t._v(t._s(t.getBooleanTranslation(e.is_done)))]),r("td",[t._v(t._s(t.getBooleanTranslation(e.is_retake)))]),r("td",[t._v(t._s(t.getBooleanTranslation(e.is_artist_allowed)))]),r("td",[t._v(t._s(t.getBooleanTranslation(e.is_client_allowed)))]),r("td",[r("button",{staticClass:"button",on:{click:function(r){return t.removeTaskStatus(e.id)}}},[t._v(" "+t._s(t.$t("main.remove"))+" ")])])]):t._e()]}))],2)])])])])},n=[];r("99af"),r("4de4"),r("caad"),r("d81d"),r("b0c0"),r("2532"),r("96cf"),r("d3b7");function i(t,e,r,s,n,i,a){try{var o=t[i](a),c=o.value}catch(u){return void r(u)}o.done?e(c):Promise.resolve(c).then(s,n)}function a(t){return function(){var e=this,r=arguments;return new Promise((function(s,n){var a=t.apply(e,r);function o(t){i(a,s,n,o,c,"next",t)}function c(t){i(a,s,n,o,c,"throw",t)}o(void 0)}))}}var o=r("5530"),c=r("2f62"),u=r("992f"),d=r("56a0"),l=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"brief"},[t.isEditing?r("div",{staticClass:"box has-text-right"},[r("textarea-field",{ref:"textarea",staticClass:"editor",attrs:{"input-class":"textarea"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.ctrlKey?t.editBrief(e):null}},model:{value:t.brief,callback:function(e){t.brief=e},expression:"brief"}}),t.errors.editBrief?r("p",{staticClass:"error mt1 has-text-right"},[t._v(" "+t._s(t.$t("productions.brief.edit.errorText"))+" ")]):t._e(),r("p",[r("button-simple",{attrs:{"is-primary":!0,"is-loading":t.isLoading,disabled:t.isLoading,text:t.$t("main.save")},on:{click:t.editBrief}})],1)],1):r("div",{staticClass:"box",on:{dblclick:t.openEditing}},[t.isEmpty(t.currentProduction.description)?r("div",[r("p",[t._v(t._s(t.$t("productions.brief.empty")))])]):r("div",{staticClass:"content",domProps:{innerHTML:t._s(t.compileMarkdown(t.currentProduction.description))}})])])},p=[],f=(r("a4d3"),r("e01a"),r("0e54")),h=r.n(f),m=r("1149"),v=r("de40"),b={name:"production-brief",components:{ButtonSimple:v["a"],TextareaField:m["a"]},data:function(){return{brief:"",isEditing:!1,isLoading:!1,errors:{editBrief:!1}}},computed:Object(o["a"])(Object(o["a"])({},Object(c["c"])(["currentProduction"])),{},{textarea:function(){return this.$refs.textarea}}),mounted:function(){this.currentProduction&&(this.brief=this.currentProduction.description)},methods:Object(o["a"])(Object(o["a"])({},Object(c["b"])(["editProduction","setProduction"])),{},{isEmpty:function(t){return!t||0===t.length},openEditing:function(){var t=this;this.isEditing=!0,this.$nextTick((function(){t.textarea.focus()}))},editBrief:function(){var t=this;return a(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isLoading=!0,e.prev=1,e.next=4,t.editProduction({id:t.currentProduction.id,description:t.brief});case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e["catch"](1),t.errors.editBrief=!0,t.isLoading=!1,e.abrupt("return");case 11:t.isEditing=!1,t.isLoading=!1;case 13:case"end":return e.stop()}}),e,null,[[1,6]])})))()},compileMarkdown:function(t){return h()(t||"")}})},y=b,_=(r("4d94"),r("2877")),T=Object(_["a"])(y,l,p,!1,null,"f0f7e2d4",null),k=T.exports,g=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"columns"},[r("div",{staticClass:"column is-one-third box"},[r("form",{staticClass:"form",on:{submit:function(t){t.preventDefault()}}},[r("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"nameField",attrs:{label:t.$t("productions.fields.name")},on:{enter:t.runConfirmation},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),r("div",{staticClass:"columns"},[r("div",{staticClass:"mr1"},[r("date-field",{ref:"startDateField",attrs:{label:t.$t("productions.fields.start_date"),"short-date":!0},model:{value:t.form.start_date,callback:function(e){t.$set(t.form,"start_date",e)},expression:"form.start_date"}})],1),r("div",[r("date-field",{ref:"endDateField",attrs:{label:t.$t("productions.fields.end_date"),"short-date":!0},model:{value:t.form.end_date,callback:function(e){t.$set(t.form,"end_date",e)},expression:"form.end_date"}})],1)]),r("combobox",{ref:"productionTypeField",attrs:{localeKeyPrefix:"productions.type.",label:t.$t("productions.fields.type"),options:t.productionTypeOptions},on:{enter:t.runConfirmation},model:{value:t.form.production_type,callback:function(e){t.$set(t.form,"production_type",e)},expression:"form.production_type"}}),t.currentProduction&&t.currentProduction.id&&t.isLocalTVShow?r("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"nbEpisodesField",attrs:{label:t.$t("productions.fields.nb_episodes")},on:{enter:t.runConfirmation},model:{value:t.form.nb_episodes,callback:function(e){t.$set(t.form,"nb_episodes",e)},expression:"form.nb_episodes"}}):t._e(),t.currentProduction&&t.currentProduction.id?r("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"fpsField",attrs:{label:t.$t("productions.fields.fps")},on:{enter:t.runConfirmation},model:{value:t.form.fps,callback:function(e){t.$set(t.form,"fps",e)},expression:"form.fps"}}):t._e(),t.currentProduction&&t.currentProduction.id?r("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"ratioField",attrs:{label:t.$t("productions.fields.ratio")},on:{enter:t.runConfirmation},model:{value:t.form.ratio,callback:function(e){t.$set(t.form,"ratio",e)},expression:"form.ratio"}}):t._e(),t.currentProduction&&t.currentProduction.id?r("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"resolutionField",attrs:{label:t.$t("productions.fields.resolution")},on:{enter:t.runConfirmation},model:{value:t.form.resolution,callback:function(e){t.$set(t.form,"resolution",e)},expression:"form.resolution"}}):t._e(),t.currentProduction&&t.currentProduction.id?r("div",[r("label",{staticClass:"label"},[t._v(t._s(t.$t("productions.picture")))]),r("file-upload",{ref:"fileField",attrs:{"is-primary":!1,label:t.$t("main.csv.upload_file"),accept:".png,.jpg,.jpeg"},on:{fileselected:t.onFileSelected}})],1):t._e(),t.isError?r("p",{staticClass:"error mt1"},[t._v(" "+t._s(t.$t("productions.edit_error"))+" ")]):t._e(),r("div",{staticClass:"has-text-right mt2"},[r("button-simple",{class:{"is-loading":t.isLoading},attrs:{"is-primary":!0,disabled:t.isLoading,text:t.$t("main.save")},on:{click:t.editParameters}})],1)],1)])])},w=[],x=r("3657"),P=r("d37c"),C=r("4085"),S=r("7bf8"),$={name:"production-parameters",components:{Combobox:u["a"],DateField:P["a"],FileUpload:C["a"],TextField:S["a"],ButtonSimple:v["a"]},data:function(){return{formData:null,isLoading:!1,isError:!1,isLocalTVShow:!1,productionTypeOptions:[{label:"short",value:"short"},{label:"featurefilm",value:"featurefilm"},{label:"tvshow",value:"tvshow"}],form:{name:"",start_date:new Date,end_date:new Date,nb_episodes:0,episode_span:0,fps:"",ratio:"",resolution:"",production_type:"short"}}},computed:Object(o["a"])({},Object(c["c"])(["currentProduction","productionAvatarFormData","productionStatus","isTVShow"])),mounted:function(){this.resetForm()},watch:{currentProduction:{handler:function(){this.resetForm(),this.updateTvShowRelatedDatas(this.isTVShow)},deep:!0},"form.production_type":function(t){this.updateTvShowRelatedDatas("tvshow"===t)}},methods:Object(o["a"])(Object(o["a"])({},Object(c["b"])(["editProduction","storeProductionPicture","uploadProductionAvatar"])),{},{onFileSelected:function(t){this.formData=t,this.storeProductionPicture(t)},isEmpty:function(t){return!t||0===t.length},runConfirmation:function(){this.$emit("confirm",this.form)},updateTvShowRelatedDatas:function(t){this.isLocalTVShow=t,t&&this.currentProduction?(this.form.nb_episodes=this.currentProduction.nb_episodes,this.form.episode_span=this.currentProduction.episode_span):(this.form.nb_episodes=0,this.form.episode_span=0)},resetForm:function(){this.currentProduction?this.form={name:this.currentProduction.name,start_date:Object(x["r"])(this.currentProduction.start_date).toDate(),end_date:Object(x["r"])(this.currentProduction.end_date).toDate(),production_type:this.currentProduction.production_type||"short",nb_episodes:this.currentProduction.nb_episodes,episode_span:this.currentProduction.episode_span,fps:this.currentProduction.fps,ratio:this.currentProduction.ratio,resolution:this.currentProduction.resolution}:this.form={name:"",start_date:new Date,end_date:new Date,production_type:"short",nb_episodes:0,episode_span:0,fps:"",ratio:"",resolution:""}},editParameters:function(){var t=this;return a(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isLoading=!0,e.prev=1,e.next=4,t.editProduction(Object(o["a"])(Object(o["a"])({id:t.currentProduction.id},t.form),{},{start_date:Object(x["e"])(t.form.start_date),end_date:Object(x["e"])(t.form.end_date)}));case 4:if(!t.productionAvatarFormData){e.next=7;break}return e.next=7,t.uploadProductionAvatar(t.currentProduction.id);case 7:e.next=14;break;case 9:return e.prev=9,e.t0=e["catch"](1),t.isLoading=!1,t.isError=!0,e.abrupt("return");case 14:t.isLoading=!1;case 15:case"end":return e.stop()}}),e,null,[[1,9]])})))()}})},O=$,j=(r("9d47"),Object(_["a"])(O,g,w,!1,null,"4f1cff6b",null)),I=j.exports,D=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"columns"},[r("div",{staticClass:"column"},[t.remainingTaskTypes.length>0?[r("div",{staticClass:"flexrow mt1 mb1 add-task-type"},[r("combobox-task-type",{staticClass:"flexrow-item selector",attrs:{"task-type-list":t.remainingTaskTypes},model:{value:t.taskTypeId,callback:function(e){t.taskTypeId=e},expression:"taskTypeId"}}),r("button",{staticClass:"button flexrow-item",attrs:{disabled:t.loading.scheduleTimeDelete},on:{click:t.addTaskType}},[t._v(" "+t._s(t.$t("main.add"))+" ")])],1)]:t._e(),t.errors.delete||t.errors.scheduleTimeUpdate?r("p",{staticClass:"error mt1 mb1"},[t._v(" "+t._s(t.$t("productions.edit_error"))+" ")]):t._e(),t.isEmpty(t.currentProduction.task_types)?r("div",{staticClass:"box"},[t._v(" "+t._s(t.$t("settings.production.empty_list"))+" ")]):t._l([t.assetTaskTypes,t.shotTaskTypes],(function(e,s){return[e.list.length>0?r("table",{key:s,staticClass:"datatable list"},[r("thead",[r("tr",[r("th",[t._v(" "+t._s(e.title)+" ")]),r("th",{staticClass:"start-date"},[t._v(" "+t._s(t.$t("productions.fields.start_date"))+" ")]),r("th",{staticClass:"end-date"},[t._v(" "+t._s(t.$t("productions.fields.end_date"))+" ")]),r("th",{staticClass:"remove"})])]),r("tbody",{staticClass:"datatable-body"},t._l(e.list,(function(e){return r("production-task-type",{key:e.taskType.id,attrs:{"task-type":e.taskType,"schedule-item":e.scheduleItem},on:{"date-changed":t.onDateChanged,remove:t.removeTaskType}})})),1)]):t._e()]}))],2)])},E=[],L=(r("7db0"),r("c1df")),A=r.n(L),F=r("2229"),R=r("e4fd"),N=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("tr",{key:t.taskType.id,staticClass:"datatable-row"},[r("task-type-cell",{attrs:{"task-type":t.taskType}}),r("td",{staticClass:"start-date"},[r("date-field",{model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}})],1),r("td",{staticClass:"end-date"},[r("date-field",{model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}})],1),r("td",{staticClass:"remove"},[r("button",{staticClass:"button",on:{click:function(e){return t.$emit("remove",{scheduleItem:t.scheduleItem,taskType:t.taskType})}}},[t._v(" "+t._s(t.$t("main.remove"))+" ")])])],1)},B=[],q=r("58f5"),G={name:"production-task-type",components:{DateField:P["a"],TaskTypeCell:q["a"]},props:{taskType:{required:!0,type:Object},scheduleItem:{required:!0,type:Object}},data:function(){return{startDate:null,endDate:null,silent:!0}},computed:Object(o["a"])({},Object(c["c"])([])),mounted:function(){var t=this;this.startDate=Object(x["q"])(this.scheduleItem.start_date).toDate(),this.endDate=Object(x["q"])(this.scheduleItem.end_date).toDate(),this.$nextTick((function(){t.silent=!1}))},methods:Object(o["a"])({},Object(c["b"])([])),watch:{startDate:function(){var t=this;if(!this.silent){var e=A()(this.startDate),r=A()(this.endDate);this.silent=!0,r.isBefore(e)&&(r=e.clone().add(1,"days"),this.endDate=r.toDate());var s=Object(o["a"])({},this.scheduleItem);s.startDate=e,s.endDate=r,this.$emit("date-changed",s),this.$nextTick((function(){t.silent=!1}))}},endDate:function(){var t=this;if(!this.silent){var e=A()(this.startDate),r=A()(this.endDate);this.silent=!0,r.isBefore(e)&&(e=r.clone().add(-1,"days"),this.startDate=e.toDate());var s=Object(o["a"])({},this.scheduleItem);s.startDate=e,s.endDate=r,this.$emit("date-changed",s),this.$nextTick((function(){t.silent=!1}))}},scheduleItem:function(){var t=this;this.silent=!0,this.startDate=Object(x["q"])(this.scheduleItem.start_date).toDate(),this.endDate=Object(x["q"])(this.scheduleItem.end_date).toDate(),this.$nextTick((function(){t.silent=!1}))}}},V=G,M=(r("4e51"),Object(_["a"])(V,N,B,!1,null,"1b97a824",null)),U=M.exports,K={name:"production-task-types",components:{ComboboxTaskType:R["a"],ProductionTaskType:U},data:function(){return{taskTypeId:"",loading:{episode_span:!1,scheduleTimeUpdate:!1,scheduleTimeDelete:!1},episode_span:0,errors:{episode_span:!1,scheduleTimeUpdate:!1,delete:!1}}},mounted:function(){this.remainingTaskTypes.length>0&&(this.taskTypeId=this.remainingTaskTypes[0].id),this.currentProduction&&(this.episode_span=this.currentProduction.episode_span,this.loadAllScheduleItems(this.currentProduction))},computed:Object(o["a"])(Object(o["a"])({},Object(c["c"])(["currentProduction","currentScheduleItems","productionTaskTypes","taskStatusMap","taskTypes","isTVShow"])),{},{remainingTaskTypes:function(){var t=this;return Object(F["d"])(this.taskTypes.filter((function(e){return!t.currentProduction.task_types.includes(e.id)})))},assetTaskTypes:function(){var t=this,e=this.productionTaskTypes.filter((function(t){return!t.for_shots})).map((function(e){return{taskType:e,scheduleItem:t.getScheduleItemForTaskType(e)}}));return{title:this.$t("assets.title"),list:e}},shotTaskTypes:function(){var t=this,e=this.productionTaskTypes.filter((function(t){return t.for_shots})).map((function(e){return{taskType:e,scheduleItem:t.getScheduleItemForTaskType(e)}}));return{title:this.$t("shots.title"),list:e}}}),methods:Object(o["a"])(Object(o["a"])({},Object(c["b"])(["addTaskTypeToProduction","createScheduleItem","deleteScheduleItem","editProduction","loadAllScheduleItems","removeTaskTypeFromProduction","saveScheduleItem"])),{},{isEmpty:function(t){return!t||0===t.length},getScheduleItemForTaskType:function(t){var e=this.currentScheduleItems.find((function(e){return e.task_type_id===t.id}))||{start_date:Object(x["d"])(A()()),end_date:Object(x["d"])(A()())};return e},addTaskType:function(){var t=this;return a(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.addTaskTypeToProduction(t.taskTypeId);case 2:return e.next=4,t.createScheduleItem({startDate:A()(),endDate:A()(),project_id:t.currentProduction.id,task_type_id:t.taskTypeId});case 4:t.remainingTaskTypes.length>0?t.taskTypeId=t.remainingTaskTypes[0].id:t.taskTypeId="";case 5:case"end":return e.stop()}}),e)})))()},removeTaskType:function(t){var e=this;return a(regeneratorRuntime.mark((function r(){var s,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return s=t.taskType,n=t.scheduleItem,e.errors.delete=!1,r.prev=2,r.next=5,e.removeTaskTypeFromProduction(s.id);case 5:if(null===n){r.next=10;break}return e.loading.scheduleTimeDelete=!0,r.next=9,e.deleteScheduleItem(n);case 9:e.loading.scheduleTimeDelete=!1;case 10:r.next=17;break;case 12:return r.prev=12,r.t0=r["catch"](2),e.errors.delete=!0,e.loading.scheduleTimeDelete=!1,r.abrupt("return");case 17:return r.next=19,e.$nextTick();case 19:e.remainingTaskTypes.length>0&&(e.taskTypeId=e.remainingTaskTypes[0].id);case 20:case"end":return r.stop()}}),r,null,[[2,12]])})))()},editEpisodeSpan:function(){var t=this;return a(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading.episode_span=!0,t.errors.episode_span=!1,e.prev=2,e.next=5,t.editProduction({id:t.currentProduction.id,episode_span:t.episode_span});case 5:e.next=11;break;case 7:e.prev=7,e.t0=e["catch"](2),t.errors.episode_span=!0,console.error(e.t0);case 11:t.loading.episode_span=!1;case 12:case"end":return e.stop()}}),e,null,[[2,7]])})))()},onDateChanged:function(t){var e=this;return a(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.errors.scheduleTimeUpdate=!1,r.prev=1,r.next=4,e.saveScheduleItem(t);case 4:r.next=10;break;case 6:r.prev=6,r.t0=r["catch"](1),console.error(r.t0),e.errors.scheduleTimeUpdate=!0;case 10:case"end":return r.stop()}}),r,null,[[1,6]])})))()}}),watch:{currentProduction:{handler:function(){this.episode_span=this.currentProduction.episode_span,this.loadAllScheduleItems(this.currentProduction)},deep:!0}}},J=K,Y=(r("f0f7"),Object(_["a"])(J,D,E,!1,null,"6a79a60c",null)),H=Y.exports,z=r("fe13"),Q={name:"production-settings",components:{ProductionBrief:k,ProductionParameters:I,ProductionTaskTypes:H,Combobox:u["a"],ComboboxStatus:d["a"],ValidationTag:z["a"]},data:function(){return{activeTab:"brief",assetTypeId:"",taskStatusId:""}},mounted:function(){this.remainingAssetTypes.length>0&&(this.assetTypeId=this.remainingAssetTypes[0].value),this.remainingTaskStatuses.length>0&&(this.taskStatusId=this.remainingTaskStatuses[0].id),this.$route.query.tab&&(this.activeTab=this.$route.query.tab)},computed:Object(o["a"])(Object(o["a"])({},Object(c["c"])(["assetTypeMap","currentProduction","assetTypes","productionAssetTypes","productionTaskTypes","productionTaskStatuses","taskStatus","taskStatusMap","taskTypeMap","taskTypes","isTVShow"])),{},{remainingAssetTypes:function(){var t=this;return this.assetTypes.filter((function(e){return!t.currentProduction.asset_types.includes(e.id)})).map((function(t){return{label:t.name,value:t.id}}))},remainingTaskStatuses:function(){var t=this;return this.taskStatus.filter((function(e){return!t.currentProduction.task_statuses.includes(e.id)}))}}),methods:Object(o["a"])(Object(o["a"])({},Object(c["b"])(["addAssetTypeToProduction","addTaskStatusToProduction","removeAssetTypeFromProduction","removeTaskStatusFromProduction"])),{},{isEmpty:function(t){return!t||0===t.length},isActiveTab:function(t){return this.activeTab===t},addAssetType:function(){this.addAssetTypeToProduction(this.assetTypeId),this.remainingAssetTypes.length>0&&(this.assetTypeId=this.remainingAssetTypes[0].value)},removeAssetType:function(t){this.removeAssetTypeFromProduction(t)},addTaskStatus:function(){this.addTaskStatusToProduction(this.taskStatusId),this.remainingTaskStatuses.length>0?this.taskStatusId=this.remainingTaskStatuses[0].id:this.taskStatusId=""},removeTaskStatus:function(t){var e=this;return a(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.removeTaskStatusFromProduction(t);case 2:return r.next=4,e.$nextTick();case 4:e.remainingTaskStatuses.length>0&&(e.taskStatusId=e.remainingTaskStatuses[0].id);case 5:case"end":return r.stop()}}),r)})))()},getBooleanTranslation:function(t){return t?this.$t("main.yes"):this.$t("main.no")}}),watch:{activeTab:function(){this.$route.query.tab!==this.activeTab&&this.$router.push({query:{tab:this.activeTab}})}},metaInfo:function(){return{title:"".concat(this.currentProduction.name," | ").concat(this.$t("settings.title")," - Kitsu")}}},W=Q,X=(r("20a6"),Object(_["a"])(W,s,n,!1,null,"92ab6724",null));e["default"]=X.exports},"96cf":function(t,e,r){var s=function(t){"use strict";var e,r=Object.prototype,s=r.hasOwnProperty,n="function"===typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",o=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(D){c=function(t,e,r){return t[e]=r}}function u(t,e,r,s){var n=e&&e.prototype instanceof v?e:v,i=Object.create(n.prototype),a=new O(s||[]);return i._invoke=P(t,r,a),i}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(D){return{type:"throw",arg:D}}}t.wrap=u;var l="suspendedStart",p="suspendedYield",f="executing",h="completed",m={};function v(){}function b(){}function y(){}var _={};_[i]=function(){return this};var T=Object.getPrototypeOf,k=T&&T(T(j([])));k&&k!==r&&s.call(k,i)&&(_=k);var g=y.prototype=v.prototype=Object.create(_);function w(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function r(n,i,a,o){var c=d(t[n],t,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"===typeof l&&s.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,o)}),(function(t){r("throw",t,a,o)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,o)}))}o(c.arg)}var n;function i(t,s){function i(){return new e((function(e,n){r(t,s,e,n)}))}return n=n?n.then(i,i):i()}this._invoke=i}function P(t,e,r){var s=l;return function(n,i){if(s===f)throw new Error("Generator is already running");if(s===h){if("throw"===n)throw i;return I()}r.method=n,r.arg=i;while(1){var a=r.delegate;if(a){var o=C(a,r);if(o){if(o===m)continue;return o}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(s===l)throw s=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);s=f;var c=d(t,e,r);if("normal"===c.type){if(s=r.done?h:p,c.arg===m)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(s=h,r.method="throw",r.arg=c.arg)}}}function C(t,r){var s=t.iterator[r.method];if(s===e){if(r.delegate=null,"throw"===r.method){if(t.iterator["return"]&&(r.method="return",r.arg=e,C(t,r),"throw"===r.method))return m;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var n=d(s,t.iterator,r.arg);if("throw"===n.type)return r.method="throw",r.arg=n.arg,r.delegate=null,m;var i=n.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function $(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function j(t){if(t){var r=t[i];if(r)return r.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function r(){while(++n<t.length)if(s.call(t,n))return r.value=t[n],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}return{next:I}}function I(){return{value:e,done:!0}}return b.prototype=g.constructor=y,y.constructor=b,b.displayName=c(y,o,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,c(t,o,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},w(x.prototype),x.prototype[a]=function(){return this},t.AsyncIterator=x,t.async=function(e,r,s,n,i){void 0===i&&(i=Promise);var a=new x(u(e,r,s,n),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(g),c(g,o,"Generator"),g[i]=function(){return this},g.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){while(e.length){var s=e.pop();if(s in t)return r.value=s,r.done=!1,r}return r.done=!0,r}},t.values=j,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach($),!t)for(var r in this)"t"===r.charAt(0)&&s.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(s,n){return o.type="throw",o.arg=t,r.next=s,n&&(r.method="next",r.arg=e),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=s.call(a,"catchLoc"),u=s.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&s.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),$(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var s=r.completion;if("throw"===s.type){var n=s.arg;$(r)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,s){return this.delegate={iterator:j(t),resultName:r,nextLoc:s},"next"===this.method&&(this.arg=e),m}},t}(t.exports);try{regeneratorRuntime=s}catch(n){Function("r","regeneratorRuntime = r")(s)}},"9d47":function(t,e,r){"use strict";r("0376")},b9d3:function(t,e,r){},cce9:function(t,e,r){},f0f7:function(t,e,r){"use strict";r("cce9")},f488:function(t,e,r){},f57a:function(t,e,r){}}]);
//# sourceMappingURL=chunk-298b3256.05233004.js.map