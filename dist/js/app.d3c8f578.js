(function(e){function t(t){for(var i,n,r=t[0],c=t[1],l=t[2],d=0,u=[];d<r.length;d++)n=r[d],Object.prototype.hasOwnProperty.call(a,n)&&a[n]&&u.push(a[n][0]),a[n]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);p&&p(t);while(u.length)u.shift()();return o.push.apply(o,l||[]),s()}function s(){for(var e,t=0;t<o.length;t++){for(var s=o[t],i=!0,n=1;n<s.length;n++){var r=s[n];0!==a[r]&&(i=!1)}i&&(o.splice(t--,1),e=c(c.s=s[0]))}return e}var i={},n={app:0},a={app:0},o=[];function r(e){return c.p+"js/"+({}[e]||e)+"."+{"chunk-0c27f0a7":"17d8838e","chunk-2d0c7360":"904ca9e1","chunk-2d0cfa35":"252a996e","chunk-2d0dacb1":"2ac6e7cb","chunk-2d21082e":"7ce80ef8","chunk-2d22d490":"6bc73332","chunk-388fcd3b":"dface6a7","chunk-3a2f2d50":"975d0b4c","chunk-3ab4c4a2":"f904f518","chunk-3ae12d7b":"a2b8359e","chunk-405200c6":"e590d542","chunk-4145322a":"49266066","chunk-4c7b7186":"e16c87bb","chunk-62c85ea4":"d39b184d","chunk-66358ab0":"fdf68bcc","chunk-6add4672":"e9e7b268","chunk-6e2b0e55":"104802d1","chunk-7382a092":"cf6fd527","chunk-79c8754b":"bdada545","chunk-8d9a78d2":"87030136","chunk-960a5bea":"807a55fc","chunk-9e830486":"8723cb0b","chunk-9fe120a2":"c031e8a3","chunk-a59446dc":"f2560c80","chunk-c007b93a":"9d56a71b","chunk-ccd52404":"aebb5e3e","chunk-ce1d7ae0":"ebcca19c","chunk-e2daab76":"f6456925","chunk-ea37888e":"c5bc8119"}[e]+".js"}function c(t){if(i[t])return i[t].exports;var s=i[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,c),s.l=!0,s.exports}c.e=function(e){var t=[],s={"chunk-0c27f0a7":1,"chunk-388fcd3b":1,"chunk-3a2f2d50":1,"chunk-3ab4c4a2":1,"chunk-3ae12d7b":1,"chunk-405200c6":1,"chunk-4145322a":1,"chunk-4c7b7186":1,"chunk-62c85ea4":1,"chunk-66358ab0":1,"chunk-6add4672":1,"chunk-6e2b0e55":1,"chunk-7382a092":1,"chunk-79c8754b":1,"chunk-8d9a78d2":1,"chunk-960a5bea":1,"chunk-9e830486":1,"chunk-9fe120a2":1,"chunk-a59446dc":1,"chunk-c007b93a":1,"chunk-ccd52404":1,"chunk-ce1d7ae0":1,"chunk-e2daab76":1,"chunk-ea37888e":1};n[e]?t.push(n[e]):0!==n[e]&&s[e]&&t.push(n[e]=new Promise((function(t,s){for(var i="css/"+({}[e]||e)+"."+{"chunk-0c27f0a7":"8dae05d0","chunk-2d0c7360":"31d6cfe0","chunk-2d0cfa35":"31d6cfe0","chunk-2d0dacb1":"31d6cfe0","chunk-2d21082e":"31d6cfe0","chunk-2d22d490":"31d6cfe0","chunk-388fcd3b":"ad7f2172","chunk-3a2f2d50":"c8082e99","chunk-3ab4c4a2":"0b5d2d84","chunk-3ae12d7b":"116486a7","chunk-405200c6":"088b8866","chunk-4145322a":"7292db7a","chunk-4c7b7186":"2d7529dd","chunk-62c85ea4":"940ec7e0","chunk-66358ab0":"f27edfaf","chunk-6add4672":"8e4e70cc","chunk-6e2b0e55":"c85e2819","chunk-7382a092":"33d020c6","chunk-79c8754b":"a3a7bb58","chunk-8d9a78d2":"7b1f1b4d","chunk-960a5bea":"32ee7a5d","chunk-9e830486":"a735c403","chunk-9fe120a2":"6c7446e8","chunk-a59446dc":"c7654fa9","chunk-c007b93a":"d832e2e8","chunk-ccd52404":"5392bd9e","chunk-ce1d7ae0":"423c9535","chunk-e2daab76":"a54c2240","chunk-ea37888e":"908371ee"}[e]+".css",a=c.p+i,o=document.getElementsByTagName("link"),r=0;r<o.length;r++){var l=o[r],d=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(d===i||d===a))return t()}var u=document.getElementsByTagName("style");for(r=0;r<u.length;r++){l=u[r],d=l.getAttribute("data-href");if(d===i||d===a)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var i=t&&t.target&&t.target.src||a,o=new Error("Loading CSS chunk "+e+" failed.\n("+i+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=i,delete n[e],p.parentNode.removeChild(p),s(o)},p.href=a;var h=document.getElementsByTagName("head")[0];h.appendChild(p)})).then((function(){n[e]=0})));var i=a[e];if(0!==i)if(i)t.push(i[2]);else{var o=new Promise((function(t,s){i=a[e]=[t,s]}));t.push(i[2]=o);var l,d=document.createElement("script");d.charset="utf-8",d.timeout=120,c.nc&&d.setAttribute("nonce",c.nc),d.src=r(e);var u=new Error;l=function(t){d.onerror=d.onload=null,clearTimeout(p);var s=a[e];if(0!==s){if(s){var i=t&&("load"===t.type?"missing":t.type),n=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+i+": "+n+")",u.name="ChunkLoadError",u.type=i,u.request=n,s[1](u)}a[e]=void 0}};var p=setTimeout((function(){l({type:"timeout",target:d})}),12e4);d.onerror=d.onload=l,document.head.appendChild(d)}return Promise.all(t)},c.m=e,c.c=i,c.d=function(e,t,s){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(c.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)c.d(s,i,function(t){return e[t]}.bind(null,i));return s},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/",c.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],d=l.push.bind(l);l.push=t,l=l.slice();for(var u=0;u<l.length;u++)t(l[u]);var p=d;o.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"0073":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",{staticClass:"person-name"},[e._v(" "+e._s(e.person.first_name+" "+e.person.last_name)+" ")])},n=[],a=s("5530"),o=s("2f62"),r={name:"person-name",props:{person:{type:Object,required:!0}},computed:Object(a["a"])({},Object(o["c"])([])),methods:Object(a["a"])({},Object(o["b"])([]))},c=r,l=(s("ea46"),s("2877")),d=Object(l["a"])(c,i,n,!1,null,"51084c62",null);t["a"]=d.exports},"0224":function(e,t,s){"use strict";var i=s("501a"),n=s.n(i);n.a},"0263":function(e,t,s){"use strict";s("a4d3"),s("e01a"),s("99af"),s("4de4"),s("7db0"),s("c740"),s("4160"),s("caad"),s("a15b"),s("d81d"),s("fb6a"),s("a434"),s("b0c0"),s("b680"),s("b64b"),s("d3b7"),s("07ac"),s("25f0"),s("2532"),s("3ca3"),s("4d90"),s("159b"),s("ddb0");var i,n=s("ade3"),a=s("5530"),o=s("2909"),r=s("ba4c"),c=s.n(r),l=s("c1df"),d=s.n(l),u=s("ce6b"),p=s("edbf"),h={getShot:function(e,t){return p["a"].getModel("shots",e)},getShots:function(e,t,s){var i="/api/data/shots/with-tasks";e&&(i+="?project_id=".concat(e.id)),t&&(i+="&episode_id=".concat(t.id)),p["a"].get(i,s)},getSequence:function(e){return p["a"].getModel("sequences",e)},getSequences:function(e,t,s){var i="/api/data/projects/".concat(e.id,"/sequences");t&&(i="/api/data/episodes/".concat(t.id,"/sequences")),p["a"].get(i,s)},getEpisode:function(e){return p["a"].getModel("episodes",e)},getEpisodes:function(e){var t="/api/data/projects/".concat(e.id,"/episodes");return p["a"].pget(t)},getShotType:function(e){p["a"].get("/api/data/shot-type",e)},newShot:function(e){var t={name:e.name,description:e.description,sequence_id:e.sequence_id};return p["a"].ppost("/api/data/projects/".concat(e.project_id,"/shots"),t)},newSequence:function(e){var t={name:e.name,episode_id:e.episode_id},s="/api/data/projects/".concat(e.project_id,"/sequences");return p["a"].ppost(s,t)},newEpisode:function(e){var t={name:e.name},s="/api/data/projects/".concat(e.project_id,"/episodes");return p["a"].ppost(s,t)},updateShot:function(e){var t={name:e.name,parent_id:e.sequence_id,description:e.description,nb_frames:parseInt(e.nb_frames),data:e.data};void 0===e.frameOut&&void 0===e.frameIn&&void 0===e.fps||Object.assign(t.data,{frame_in:e.frameIn,frame_out:e.frameOut,fps:e.fps});var s="/api/data/entities/".concat(e.id);return p["a"].pput(s,t)},updateSequence:function(e){var t={name:e.name,description:e.description};return p["a"].pput("/api/data/entities/".concat(e.id),t)},updateEpisode:function(e){var t={name:e.name,description:e.description};return p["a"].pput("/api/data/entities/".concat(e.id),t)},deleteShot:function(e){return e.canceled?p["a"].pdel("/api/data/shots/".concat(e.id,"?force=true")):p["a"].pdel("/api/data/shots/".concat(e.id))},deleteSequence:function(e){return p["a"].pdel("/api/data/sequences/".concat(e.id,"?force=true"))},deleteEpisode:function(e){return p["a"].pdel("/api/data/episodes/".concat(e.id,"?force=true"))},restoreShot:function(e,t){var s={canceled:!1};return p["a"].pput("/api/data/entities/".concat(e.id),s)},postCsv:function(e,t,s){var i="/api/import/csv/projects/".concat(e.id,"/shots");return s&&(i+="?update=true"),p["a"].ppost(i,t)},getEpisodeStats:function(e){return p["a"].pget("/api/data/projects/".concat(e,"/episodes/stats"))},getEpisodeRetakeStats:function(e){var t="/api/data/projects/".concat(e,"/episodes/retake-stats");return p["a"].pget(t)},loadShotHistory:function(e){return p["a"].pget("/api/data/shots/".concat(e,"/versions"))}},m=s("fa53"),f=s("52ad"),_=s("ef8b"),v=s("de26"),g=s("2229"),y=s("6185"),b=s("66e7"),k=s("09d3"),w=s("bcd2"),C=s("3657"),S=s("2017"),T=s("ca76"),x=s("9fb0"),E="average",P="count",O="total",A={shots:[],shotIndex:[]},j={getTask:function(e){return m["a"].state.taskMap[e]},getTaskStatus:function(e){return m["a"].state.taskStatusMap[e]},getTaskType:function(e){return _["a"].state.taskTypeMap[e]},getPerson:function(e){return f["a"].state.personMap[e]},getShotName:function(e){var t="".concat(e.sequence_name," / ").concat(e.name);return e.episode_name&&(t="".concat(e.episode_name," / ").concat(t)),t},dateDigit:function(e){return e.toString().padStart(2,"0")},populateTask:function(e,t){e.name=j.getTaskType(e.task_type_id).priority.toString(),e.task_status_short_name=j.getTaskStatus(e.task_status_id).short_name;var s=j.getShotName(t);return Object.assign(e,{project_id:t.production_id,entity_name:s,entity_type_name:"Shot",sequence_name:t.sequence_name,entity:{id:t.id,preview_file_id:t.preview_file_id}}),e},setListStats:function(e,t){var s=0,i=0;t.forEach((function(e){s+=e.timeSpent,i+=e.nb_frames})),Object.assign(e,{displayedShotsLength:t.length,displayedShotsTimeSpent:s,displayedShotsFrames:i})},sortValidationColumns:function(e,t,s){var i=Object(o["a"])(e);return Object(g["p"])(i,s)},getPeriod:function(e,t){var s,i=j.getTaskEndDate(e,t);return"day"===t?s=d()(i,"YYYY-MM").format("YYYY-MM"):"month"===t?s=d()(i,"YYYY").format("YYYY"):"week"===t&&(s=d()(i,"YYYY-MM-DD").format("GGGG")),s},getDateFromParameters:function(e){var t=e.detailLevel,s=e.year,i=e.week,n=e.month,a=e.day;return"day"===t?"".concat(s,"-").concat(j.dateDigit(n),"-").concat(j.dateDigit(a)):"month"===t?"".concat(s,"-").concat(j.dateDigit(n)):"week"===t?"".concat(s,"-").concat(i):"".concat(s)},getTaskEndDate:function(e,t){var s;return"day"===t?s=d()(e.end_date,"YYYY-MM-DD").format("YYYY-MM-DD"):"month"===t?s=d()(e.end_date,"YYYY-MM").format("YYYY-MM"):"week"===t&&(s=d()(e.end_date,"YYYY-MM-DD").format("GGGG-W")),s},initQuota:function(e,t,s,i){e[t]||(e[t]={});var n=e[t];return n[s]||(n[s]=0),n[E]||(n[E]={}),n[E][i]||(n[E][i]=0),n[P]||(n[P]={}),n[P][i]||(n[P][i]=0),n[O]||(n[O]={}),n[O][i]||(n[O][i]=0),n},buildResult:function(e,t){var s=t.shotSearch,i=t.production,n=t.sorting,a=t.taskStatusMap,o=t.taskTypeMap,r=t.persons,c=t.taskMap,l=Object.values(o),d=Object.values(a),u=s,p=Object(T["e"])(u)||[],h=Object(T["d"])({entryIndex:A.shotIndex,assetTypes:[],taskTypes:l,taskStatuses:d,descriptors:i.descriptors,persons:r,query:u}),m=Object(S["j"])(A.shotIndex,p)||A.shots;m=Object(T["a"])(m,h,c),m=Object(g["l"])(m,n,a,o,c),A.result=m;var f=m.slice(0,v["a"]),_=f.length,k=e.nbValidationColumns;j.setListStats(e,m),Object.assign(e,{displayedShots:f,shotFilledColumns:Object(b["c"])(f),shotSearchText:s,shotSelectionGrid:Object(y["b"])(_,k)})},sortStatColumns:function(e,t){var s={};e.all&&Object.keys(e.all).forEach((function(t){"all"===t||e.all[t].name||(s[t]=!0)}));var i=Object.keys(s);return Object(g["p"])(i,t)}},D={shotMap:{},sequences:[],episodes:[],shotSearchText:"",shotSearchQueries:[],sequenceSearchQueries:[],sequenceSearchText:"",sequenceStats:{},episodeSearchText:"",episodeRetakeStats:{},episodeStats:{},shotSorting:[],currentEpisode:null,episodeValidationColumns:[],isFps:!1,isFrames:!1,isFrameIn:!1,isFrameOut:!1,isTime:!1,isShotDescription:!1,displayedShots:[],displayedShotsLength:0,displayedShotsTimeSpent:0,displayedShotsFrames:0,displayedSequences:[],displayedSequencesLength:0,displayedEpisodes:[],displayedEpisodesLength:0,sequenceIndex:{},shotFilledColumns:{},sequenceMap:{},episodeMap:{},shotCreated:"",shotSelectionGrid:{},sequenceSelectionGrid:{},isShotsLoading:!1,isShotsLoadingError:!1,shotsCsvFormData:null,shotListScrollPosition:0,sequenceListScrollPosition:0,episodeListScrollPosition:0,searchSequenceFilters:[],shotValidationColumns:[]},M=Object(a["a"])({},D),I={sequences:function(e){return e.sequences},sequenceMap:function(e){return e.sequenceMap},sequenceStats:function(e){return e.sequenceStats},episodes:function(e){return e.episodes},episodeMap:function(e){return e.episodeMap},episodeRetakeStats:function(e){return e.episodeRetakeStats},episodeStats:function(e){return e.episodeStats},shotValidationColumns:function(e){return e.shotValidationColumns},currentEpisode:function(e){return e.currentEpisode},shotSearchQueries:function(e){return e.shotSearchQueries},sequenceSearchQueries:function(e){return e.sequenceSearchQueries},shotMap:function(e){return e.shotMap},shotSorting:function(e){return e.shotSorting},isFps:function(e){return e.isFps},isFrames:function(e){return e.isFrames},isFrameIn:function(e){return e.isFrameIn},isFrameOut:function(e){return e.isFrameOut},isTime:function(e){return e.isTime},isShotDescription:function(e){return e.isShotDescription},shotSearchText:function(e){return e.shotSearchText},sequenceSearchText:function(e){return e.sequenceSearchText},episodeSearchText:function(e){return e.episodeSearchText},shotSelectionGrid:function(e){return e.shotSelectionGrid},sequenceSelectionGrid:function(e){return e.sequenceSelectionGrid},displayedShots:function(e){return e.displayedShots},displayedShotsLength:function(e){return e.displayedShotsLength},displayedShotsTimeSpent:function(e){return e.displayedShotsTimeSpent},displayedShotsFrames:function(e){return e.displayedShotsFrames},displayedSequences:function(e){return e.displayedSequences},displayedSequencesLength:function(e){return e.displayedSequencesLength},displayedEpisodes:function(e){return e.displayedEpisodes},displayedEpisodesLength:function(e){return e.displayedEpisodesLength},shotFilledColumns:function(e){return e.shotFilledColumns},displayedShotsBySequence:function(e){return Object(b["d"])(e.displayedShots,"sequence_name")},isShotsLoading:function(e){return e.isShotsLoading},isShotsLoadingError:function(e){return e.isShotsLoadingError},shotCreated:function(e){return e.shotCreated},shotsCsvFormData:function(e){return e.shotsCsvFormData},shotListScrollPosition:function(e){return e.shotListScrollPosition},sequenceListScrollPosition:function(e){return e.sequenceListScrollPosition},episodeListScrollPosition:function(e){return e.episodeListScrollPosition},episodeValidationColumns:function(e){return e.episodeValidationColumns},shotsByEpisode:function(e){for(var t=[],s=[],i=null,n=0,a=Object.values(e.shotMap);n<a.length;n++){var o=a[n];i&&o.sequence_name!==i.sequence_name&&(t.push(s.slice(0)),s=[]),s.push(o),i=o}return t.push(s),t},searchSequenceFilters:function(e){return e.searchSequenceFilters},getSequenceOptions:function(e){return e.sequences.map((function(e){return{label:e.name,value:e.id}}))},getEpisodeOptions:function(e){return e.episodes.map((function(e){return{label:e.name,value:e.id}}))},isSingleEpisode:function(e){return e.episodes.length<2},episodeOptions:function(e){return e.episodes.map((function(e){return{label:e.name,value:e.id}}))}},$={getPending:function(e){e.commit;var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Promise((function(e,s){var i=[];A.shots.forEach((function(e){var s=!1;e.tasks.forEach((function(e){var i=m["a"].state.taskMap[e];if(!s)if(t){if(i.last_comment_date){var n=d()(i.last_comment_date),a=d()().subtract(1,"days");s="wfa"===i.task_status_short_name&&n.isAfter(a)}}else s="wfa"===i.task_status_short_name})),s&&i.push(e)})),e(i)}))},clearEpisodes:function(e){var t=e.commit;t(x["Q"])},loadEpisodes:function(e){var t=e.commit,s=(e.state,e.rootGetters),i=s.currentProduction,n=s.route.params.episode_id;return h.getEpisodes(i).then((function(e){return t(x["kc"],{episodes:e,routeEpisodeId:n}),Promise.resolve(e)}))},loadShots:function(e,t){var s=e.commit,i=(e.dispatch,e.state),n=e.rootGetters,a=n.currentProduction,o=n.userFilters,r=n.taskTypeMap,c=n.taskMap,l=n.personMap,d=n.isTVShow,u=d?n.currentEpisode:null;if(u&&["all","main"].includes(u.id)){if(u=i.episodes.length>0?i.episodes[0]:null,u.project_id!==a.id)return;s(x["ie"],u.id)}return d&&!u&&0===i.episodes.length?t():(d&&!u&&(u=i.episodes.length>0?i.episodes[0]:null,s(x["ie"],u.id)),!d&&u&&s(x["ie"],null),i.isShotsLoading?t():(s(x["Mc"]),void h.getSequences(a,u,(function(e,i){e?s(x["Lc"]):h.getShots(a,u,(function(e,n){e?s(x["Lc"]):(s(x["Hc"],i),s(x["Kc"],{production:a,shots:n,userFilters:o,taskTypeMap:r,taskMap:c,personMap:l})),t&&t(e)}))}))))},loadEpisode:function(e,t){var s=e.commit,i=e.state;return h.getEpisode(t).then((function(e){i.episodeMap[e.id]?s(x["Pe"],e):s(x["d"],e)})).catch(console.error)},loadSequence:function(e,t){var s=e.commit,i=e.state;return h.getSequence(t).then((function(e){i.sequenceMap[e.id]?s(x["Ue"],e):s(x["p"],e)})).catch(console.error)},loadShot:function(e,t){var s=e.commit,i=e.state,n=e.rootGetters,a=n.personMap,o=n.currentProduction,r=n.taskMap,c=n.taskTypeMap;return h.getShot(t).then((function(e){i.shotMap[e.id]?s(x["Ve"],e):s(x["q"],{shot:e,taskTypeMap:c,taskMap:r,personMap:a,production:o})})).catch((function(e){return console.error(e)}))},newShot:function(e,t){var s=e.commit,i=e.dispatch;e.rootGetters;return h.newShot(t).then((function(e){s(x["nd"],e);var t=M.shotValidationColumns,n=t.map((function(t){return i("createTask",{entityId:e.id,projectId:e.project_id,taskTypeId:t,type:"shots"})}));return Promise.all(n).then((function(){return Promise.resolve(e)})).catch(console.error)}))},newSequence:function(e,t){var s=e.commit;e.state;return h.newSequence(t).then((function(e){return s(x["md"],e),Promise.resolve(e)}))},newEpisode:function(e,t){var s=e.commit;e.state;return h.newEpisode(t).then((function(e){return s(x["ld"],e),Promise.resolve(e)}))},editShot:function(e,t){var s=e.commit;e.state;return h.updateShot(t).then((function(e){return s(x["Jb"],e),Promise.resolve(e)}))},editEpisode:function(e,t){var s=e.commit;e.state;return h.updateEpisode(t).then((function(e){return s(x["Ab"],e),Promise.resolve(e)}))},editSequence:function(e,t){var s=e.commit;e.state;return h.updateSequence(t).then((function(e){return s(x["Ib"],e),Promise.resolve(e)}))},deleteShot:function(e,t){var s=e.commit,i=e.state;return h.deleteShot(t).then((function(){var e=i.shotMap[t.id];return e&&e.tasks.length>0&&!e.canceled?s(x["u"],e):s(x["Rd"],t),Promise.resolve()}))},deleteEpisode:function(e,t){var s=e.commit;e.state;return h.deleteEpisode(t).then((function(){return s(x["Jd"],t),Promise.resolve(t)}))},deleteSequence:function(e,t){var s=e.commit;e.state;return h.deleteSequence(t).then((function(){return s(x["Pd"],t),Promise.resolve(t)}))},restoreShot:function(e,t){var s=e.commit;e.state;return h.restoreShot(t).then((function(e){return s(x["Yd"],e),Promise.resolve(e)}))},uploadShotFile:function(e,t){var s=e.commit,i=e.state,n=e.rootGetters,a=n.currentProduction;return h.postCsv(a,i.shotsCsvFormData,t).then((function(){return s(x["Wb"]),Promise.resolve()}))},displayMoreShots:function(e){var t=e.commit,s=e.rootGetters;t(x["vb"],{taskTypeMap:s.taskTypeMap,taskStatusMap:s.taskStatusMap,taskMap:s.taskMap,production:s.currentProduction})},displayMoreSequences:function(e){var t=e.commit;t(x["ub"])},displayMoreEpisodes:function(e){var t=e.commit;t(x["tb"])},setShotSearch:function(e,t){var s=e.commit,i=e.rootGetters,n=i.taskStatusMap,a=i.taskTypeMap,o=i.taskMap,r=i.currentProduction,c=i.people;s(x["Be"],{shotSearch:t,persons:c,taskStatusMap:n,taskMap:o,taskTypeMap:a,production:r})},saveShotSearch:function(e,t){var s=e.commit,i=e.rootGetters;return new Promise((function(e,n){var a=M.shotSearchQueries.find((function(e){return e.name===t})),o=i.currentProduction;a?e():u["a"].createFilter("shot",t,t,o.id,null,(function(t,i){s(x["ce"],{searchQuery:i,production:o}),t?n(t):e(i)}))}))},removeShotSearch:function(e,t){var s=e.commit,i=e.rootGetters;return new Promise((function(e,n){var a=i.currentProduction;u["a"].removeFilter(t,(function(i){s(x["Sd"],{searchQuery:t,production:a}),i?n(i):e()}))}))},saveSequenceSearch:function(e,t){var s=e.commit,i=e.rootGetters;return new Promise((function(e,n){var a=M.sequenceSearchQueries.find((function(e){return e.name===t})),o=i.currentProduction;a?e():u["a"].createFilter("sequence",t,t,o.id,null,(function(t,i){s(x["be"],{searchQuery:i,production:o}),t?n(t):e(i)}))}))},removeSequenceSearch:function(e,t){var s=e.commit,i=e.rootGetters;return new Promise((function(e,n){var a=i.currentProduction;u["a"].removeFilter(t,(function(i){s(x["Qd"],{searchQuery:t,production:a}),i?n(i):e()}))}))},initSequences:function(e){e.commit;var t=e.dispatch,s=e.state,i=e.rootState;e.rootGetters;return new Promise((function(e,n){var a=i.route.params.production_id;t("setLastProductionScreen","sequences"),0===s.sequences.length||s.sequences[0].production_id!==a?(t("computeSequenceStats"),e()):e()}))},setSequenceSearch:function(e,t){var s=e.commit,i=e.rootGetters;s(x["ze"],{sequenceSearch:t,production:i.currentProduction})},setSequenceListScrollPosition:function(e,t){var s=e.commit;s(x["ye"],t)},computeSequenceStats:function(e){var t=e.commit,s=e.rootGetters,i=s.taskStatusMap,n=s.taskMap;t(x["X"],{taskStatusMap:i,taskMap:n})},setCurrentEpisode:function(e,t){var s=e.commit,i=e.rootGetters;s(x["ie"],t);var n=i.currentProduction.id;s(x["Wd"],{productionId:n,episodeId:t})},initEpisodes:function(e){e.commit;var t=e.dispatch,s=e.state,i=e.rootState,n=e.rootGetters,a=i.route.params.production_id,o=n.isTVShow;if(t("setLastProductionScreen","episodes"),0===s.episodes.length||s.episodes[0].production_id!==a)return o?t("loadEpisodes").then((function(){return t("loadEpisodeStats",a)})).then((function(){return t("loadEpisodeRetakeStats",a)})):t("computeEpisodeStats")},loadEpisodeStats:function(e,t){var s=e.commit,i=e.rootGetters,n=i.taskTypeMap;return s(x["oe"],{episodeStats:{},taskTypeMap:n}),h.getEpisodeStats(t).then((function(e){return s(x["oe"],{episodeStats:e,taskTypeMap:n}),Promise.resolve(e)})).catch(console.error)},loadEpisodeRetakeStats:function(e,t){var s=e.commit,i=e.rootGetters,n=i.taskTypeMap;return s(x["me"],{episodeRetakeStats:{},taskTypeMap:n}),h.getEpisodeRetakeStats(t).then((function(e){return s(x["me"],{episodeRetakeStats:e,taskTypeMap:n}),Promise.resolve(e)})).catch(console.error)},setEpisodeSearch:function(e,t){var s=e.commit;s(x["ne"],t)},setEpisodeListScrollPosition:function(e,t){var s=e.commit;s(x["le"],t)},computeEpisodeStats:function(e){var t=e.commit,s=e.dispatch,i=e.rootGetters,n=i.taskStatusMap,a=i.taskMap,o=i.isTVShow;o?s("loadEpisodeStats",i.currentProduction.id):t(x["W"],{taskStatusMap:n,taskMap:a})},getShotsCsvLines:function(e){var t=e.state,s=e.rootGetters,i=s.currentProduction,n=s.isTVShow,a=s.organisation,r=s.personMap,c=A.shots;A.result&&A.result.length>0&&(c=A.result);var l=c.map((function(e){var c=[];return n&&c.push(e.episode_name),c=c.concat([e.sequence_name,e.name,e.description]),Object(g["d"])(Object(o["a"])(i.descriptors)).filter((function(e){return"Shot"===e.entity_type})).forEach((function(t){c.push(e.data[t.field_name])})),t.isTime&&c.push(Object(C["n"])(a,e.timeSpent).toFixed(2)),t.isFrames&&c.push(e.nb_frames),t.isFrameIn&&c.push(e.data.frame_in),t.isFrameOut&&c.push(e.data.frame_out),t.isFps&&c.push(e.data.fps),t.shotValidationColumns.forEach((function(t){var i=s.taskMap[e.validations[t]];i?(c.push(i.task_status_short_name),c.push(i.assignees.map((function(e){return r[e].full_name})).join(","))):(c.push(""),c.push(""))})),c}));return l},loadShotHistory:function(e,t){e.commit,e.state;return h.loadShotHistory(t)},computeQuota:function(e,t){e.commit,e.state;var s=e.rootGetters,i=t.taskTypeId,n=t.detailLevel,a=t.countMode,o=s.taskMap,r=s.taskStatusMap,c=s.currentProduction,l={};return A.shots.forEach((function(e){var t=o[e.validations[i]],s=t&&r[t.task_status_id].is_done;if(s){var d=j.getPeriod(t,n),u=j.getTaskEndDate(t,n);t.assignees.forEach((function(t){var s=j.initQuota(l,t,u,d);if(e.nb_frames){var i=e.nb_frames;"seconds"===a&&(i=Object(w["c"])(e.nb_frames,c,e));var n=0===s[u];n&&s[P][d]++,s[u]+=i,s[O][d]+=i,"seconds"===a&&(s[O][d]=Math.round(100*s[O][d])/100,s[u]=Math.round(100*s[u])/100),s[E][d]=s[O][d]/s[P][d]}}))}})),Promise.resolve(l)},getPersonShots:function(e,t){e.commit,e.state;var s=e.rootGetters,i=t.taskTypeId,n=t.detailLevel,o=t.personId,r=t.year,c=t.month,l=t.week,d=t.day,u=s.taskStatusMap,p=j.getDateFromParameters({detailLevel:n,year:r,month:c,week:l,day:d}),h=A.shots.filter((function(e){var t=s.taskMap[e.validations[i]];if(t){var a=u[t.task_status_id],r=j.getTaskEndDate(t,n);return t&&a.is_done&&t.assignees.includes(o)&&r===p}return!1})).map((function(e){return Object(a["a"])(Object(a["a"])({},e),{},{full_name:j.getShotName(e)})}));return Promise.resolve(h)},changeShotSort:function(e,t){var s=e.commit,i=e.rootGetters,n=i.taskStatus,a=i.taskTypeMap,o=i.taskMap,r=i.people,c=i.currentProduction,l=t?[t]:[];s(x["O"],{taskStatusMap:n,taskTypeMap:a,taskMap:o,persons:r,production:c,sorting:l})},deleteAllShotTasks:function(e,t){e.commit;var s=e.dispatch,i=(e.state,t.projectId),n=t.taskTypeId,a=t.selectionOnly,o=[];return a&&(o=A.result.filter((function(e){return e.validations[n]})).map((function(e){return e.validations[n]}))),s("deleteAllTasks",{projectId:i,taskTypeId:n,taskIds:o})}},L=(i={},Object(n["a"])(i,x["U"],(function(e){A.shots=[],A.result=[],A.shotIndex={},e.shotMap={},e.sequences=[],e.sequenceIndex={},e.displayedShots=[],e.displayedShotsLength=0,e.displayedTimeSpent=0,e.displayedFrames=0,e.shotSearchQueries=[],e.displayedSequences=[],e.displayedSequencesLength=0,e.displayedEpisodes=[],e.displayedEpisodesLength=0})),Object(n["a"])(i,x["Mc"],(function(e){A.shots=[],A.result=[],A.shotIndex={},e.shotMap={},e.shotValidationColumns=[],e.sequences=[],e.isShotsLoading=!0,e.isShotsLoadingError=!1,e.sequenceIndex={},e.displayedShots=[],e.displayedShotsLength=0,e.displayedTimeSpent=0,e.displayedFrames=0,e.shotSearchQueries=[],e.displayedSequences=[],e.displayedSequencesLength=0,e.displayedEpisodes=[],e.displayedEpisodesLength=0})),Object(n["a"])(i,x["Lc"],(function(e){e.isShotsLoading=!1,e.isShotsLoadingError=!0})),Object(n["a"])(i,x["Kc"],(function(e,t){var s=t.production,i=t.shots,n=t.userFilters,a=t.taskMap,o=t.taskTypeMap,r=t.personMap,c={},l=!1,d=!1,u=!1,p=!1,h=!1,m=!1;i=Object(g["m"])(i),A.shots=i,A.result=i,A.shotIndex=Object(S["e"])(i),e.shotMap={},i.forEach((function(t){var i=[],n={},f=0;t.project_name=s.name,t.production_id=s.id,t.full_name=j.getShotName(t),t.tasks.forEach((function(e){j.populateTask(e,t,s),f+=e.duration,e.episode_id=t.episode_id,a[e.id]=e,n[e.task_type_id]=e.id,i.push(e.id);var l=o[e.task_type_id];c[l.name]||(c[l.name]=l.id),e.assignees.length>1&&(e.assignees=e.assignees.sort((function(e,t){return r[e].name.localeCompare(r[t])})))})),t.tasks=i,t.validations=n,t.timeSpent=f,!l&&t.data.fps&&(l=!0),!d&&t.nb_frames&&(d=!0),!u&&t.data.frame_in&&(u=!0),!p&&t.data.frame_out&&(p=!0),!m&&t.timeSpent>0&&(m=!0),!h&&t.description&&(h=!0),e.shotMap[t.id]=t}));var f=i.slice(0,v["a"]),_=Object(b["c"])(f);e.shotValidationColumns=j.sortValidationColumns(Object.values(c),_,o),e.nbValidationColumns=e.shotValidationColumns.length,e.isFps=l,e.isFrames=d,e.isFrameIn=u,e.isFrameOut=p,e.isTime=m,e.isShotDescription=h,e.isShotsLoading=!1,e.isShotsLoadingError=!1,e.displayedShots=f,e.shotFilledColumns=_;var k=e.displayedShots.length,w=e.nbValidationColumns;e.shotSelectionGrid=Object(y["b"])(k,w),j.setListStats(e,i),n.shot&&n.shot[s.id]?e.shotSearchQueries=n.shot[s.id]:e.shotSearchQueries=[],n.sequence&&n.sequence[s.id]?e.sequenceSearchQueries=n.sequence[s.id]:e.sequenceSearchQueries=[]})),Object(n["a"])(i,x["ce"],(function(e,t){var s=t.searchQuery;e.shotSearchQueries.push(s),e.shotSearchQueries=Object(g["d"])(e.shotSearchQueries)})),Object(n["a"])(i,x["Sd"],(function(e,t){var s=t.searchQuery,i=e.shotSearchQueries.findIndex((function(e){return e.name===s.name}));i>=0&&e.shotSearchQueries.splice(i,1)})),Object(n["a"])(i,x["be"],(function(e,t){var s=t.searchQuery;e.sequenceSearchQueries.push(s),e.sequenceSearchQueries=Object(g["d"])(e.sequenceSearchQueries)})),Object(n["a"])(i,x["Qd"],(function(e,t){var s=t.searchQuery;e.sequenceSearchQueries=e.sequenceSearchQueries.filter((function(e){return e.name!==s.name}))})),Object(n["a"])(i,x["Hc"],(function(e,t){var s={};t.forEach((function(t){if(s[t.id]=t,t.parent_id){var i=e.episodeMap[t.parent_id];i&&Object.assign(t,{episode_id:i.id,episode_name:i.name})}}));var i=Object(g["k"])(t);e.sequenceMap=s,e.sequences=i,e.sequenceIndex=Object(S["d"])(i),e.displayedSequences=i.slice(0,2*v["a"]),e.displayedSequencesLength=i.length})),Object(n["a"])(i,x["kc"],(function(e,t){var s=t.episodes,i=t.routeEpisodeId,n={};s||(s=[]),s.forEach((function(e){n[e.id]=e})),e.episodeMap=n,e.episodes=Object(g["d"])(s),e.episodeIndex=Object(S["b"])(e.episodes),e.displayedEpisodes=e.episodes.slice(0,v["a"]),e.displayedEpisodesLength=e.episodes.length,e.episodes.length>0?e.currentEpisode="all"===i?{id:"all"}:"main"===i?{id:"main"}:i?e.episodeMap[i]:e.episodes[0]:e.currentEpisode=null})),Object(n["a"])(i,x["Oc"],(function(e,t){var s=t.shot,i=t.taskTypeMap;s.tasks.forEach((function(e){j.populateTask(e,s)})),s.tasks=Object(g["o"])(s.tasks,i),e.shotMap[s.id]=s})),Object(n["a"])(i,x["Fe"],(function(e,t){e.shotsCsvFormData=t})),Object(n["a"])(i,x["Wb"],(function(e){e.shotsCsvFormData=null})),Object(n["a"])(i,x["nc"],(function(e,t){e.openProductions=t})),Object(n["a"])(i,x["Jb"],(function(e,t){var s=e.shotMap[t.id],i=e.sequences.find((function(e){return e.id===t.parent_id}));if(t.sequence_name=i.name,s)Object.assign(s,t);else{A.shots.push(t),A.shots=Object(g["m"])(A.shots),e.shotMap[t.id]=t;var n=e.displayedShots.length,a=e.nbValidationColumns;e.shotSelectionGrid=Object(y["b"])(n,a)}e.editShot={isLoading:!1,isError:!1},A.shotIndex=Object(S["e"])(A.shots),e.shotCreated=t.name,e.shotSearchText?j.setListStats(e,A.result):j.setListStats(e,A.shots),t.data.fps&&(e.isFps=!0),t.nb_frames&&(e.isFrames=!0),t.data.frame_in&&(e.isFrameIn=!0),t.data.frame_out&&(e.isFrameOut=!0),s.description&&!e.isShotDescription&&(e.isShotDescription=!0)})),Object(n["a"])(i,x["Ib"],(function(e,t){var s=e.sequenceMap[t.id];s&&Object.assign(s,t),e.sequenceIndex=Object(S["d"])(e.sequences)})),Object(n["a"])(i,x["Ab"],(function(e,t){var s=e.episodeMap[t.id];s&&Object.assign(s,t),e.episodeIndex=Object(S["b"])(e.episodes)})),Object(n["a"])(i,x["Yd"],(function(e,t){var s=e.shotMap[t.id];s.canceled=!1,A.shotIndex=Object(S["e"])(A.shots)})),Object(n["a"])(i,x["od"],(function(e,t){t.comment,t.taskId})),Object(n["a"])(i,x["Be"],(function(e,t){var s=e.shotSorting;t.sorting=s,j.buildResult(e,t)})),Object(n["a"])(i,x["ze"],(function(e,t){var s=t.sequenceSearch,i=t.production,n=Object(T["e"])(s),a=Object(S["j"])(e.sequenceIndex,n)||e.sequences;e.searchSequenceFilters=Object(T["d"])({entryIndex:A.shotIndex,assetTypes:[],taskTypes:[],taskStatuses:[],descriptors:i.descriptors.filter((function(e){return"Shot"===e.entity_type})),persons:[],query:s}),e.displayedSequences=a.slice(0,2*v["a"]),e.displayedSequencesLength=a.length,e.sequenceSearchText=s})),Object(n["a"])(i,x["ne"],(function(e,t){var s=Object(T["e"])(t),i=Object(S["j"])(e.episodeIndex,s)||e.episodes;e.displayedEpisodes=i.slice(0,v["a"]),e.displayedEpisodesLength=i.length,e.episodeSearchText=t})),Object(n["a"])(i,x["nd"],(function(e,t){var s=e.sequenceMap[t.parent_id],i=e.episodeMap[s.parent_id];t.production_id=t.project_id,t.sequence_name=s.name,t.sequence_id=s.id,t.episode_name=i?i.name:null,t.episode_id=i?i.id:null,t.preview_file_id="",t.tasks=[],t.validations={},t.data={},A.shots.push(t),A.shots=Object(g["m"])(A.shots),e.displayedShots=A.shots.slice(0,v["a"]),j.setListStats(e,A.shots),e.shotFilledColumns=Object(b["c"])(e.displayedShots),e.shotMap[t.id]=t,A.shotIndex=Object(S["e"])(A.shots);var n=e.displayedShots.length,a=e.nbValidationColumns;e.shotSelectionGrid=Object(y["b"])(n,a),t.data.fps&&(e.isFps=!0),t.nb_frames&&(e.isFrames=!0),t.data.frame_in&&(e.isFrameIn=!0),t.data.frame_out&&(e.isFrameOut=!0)})),Object(n["a"])(i,x["md"],(function(e,t){if(t.parent_id){var s=e.episodeMap[t.parent_id];t.episode_id=s.id,t.episode_name=s.name}e.sequences.push(t),e.sequences=Object(g["k"])(e.sequences),e.sequenceMap[t.id]=t,e.sequenceIndex=Object(S["d"])(e.sequences)})),Object(n["a"])(i,x["ld"],(function(e,t){e.episodes.push(t),e.episodes=Object(g["d"])(e.episodes),e.displayedEpisodes=e.episodes,e.episodeMap[t.id]=t})),Object(n["a"])(i,x["Y"],(function(e,t){t.forEach((function(t){if(t){var s=e.shotMap[t.entity_id];if(s){j.populateTask(t,s);var i=Object(a["a"])({},s.validations);c.a.set(i,t.task_type_id,t.id),delete s.validations,c.a.set(s,"validations",i),s.tasks.push(t.id)}}}))})),Object(n["a"])(i,x["vb"],(function(e,t){t.taskTypeMap,t.taskStatusMap,t.taskMap,t.production;var s=A.result,i=e.displayedShots.length+v["a"];if(i<s.length+v["a"]){e.displayedShots=s.slice(0,e.displayedShots.length+v["a"]),e.shotFilledColumns=Object(b["c"])(e.displayedShots);var n=e.displayedShots.length-v["a"],a=e.displayedShots.length,o=e.nbValidationColumns;n>=0&&(e.shotSelectionGrid=Object(y["a"])(e.shotSelectionGrid,n,a,o))}})),Object(n["a"])(i,x["ub"],(function(e,t){var s=e.sequences;if(e.sequenceSearchText.length>0){var i=Object(T["e"])(e.sequenceSearchText);s=Object(S["j"])(e.sequenceIndex,i)}e.displayedSequences=s.slice(0,e.displayedSequences.length+v["a"])})),Object(n["a"])(i,x["tb"],(function(e,t){var s=e.episodes;if(e.episodeSearchText.length>0){var i=Object(T["e"])(e.episodeSearchText);s=Object(S["j"])(e.episodeIndex,i)}e.displayedEpisodes=s.slice(0,e.displayedEpisodes.length+v["a"])})),Object(n["a"])(i,x["je"],(function(e,t){e.shotSearchText="",e.sequenceSearchText=""})),Object(n["a"])(i,x["Q"],(function(e){e.episodes=[],e.currentEpisode=null})),Object(n["a"])(i,x["we"],(function(e,t){var s=t.entityId,i=(t.taskId,t.previewId),n=t.taskMap,a=e.shotMap[s];a&&(a.preview_file_id=i,a.tasks.forEach((function(e){var t=n[e];t&&(t.entity.preview_file_id=i)})))})),Object(n["a"])(i,x["Ae"],(function(e,t){e.shotListScrollPosition=t})),Object(n["a"])(i,x["ye"],(function(e,t){e.sequenceListScrollPosition=t})),Object(n["a"])(i,x["le"],(function(e,t){e.episodeListScrollPosition=t})),Object(n["a"])(i,x["Od"],(function(e,t){e.shotSelectionGrid[0]&&e.shotSelectionGrid[t.x]&&(e.shotSelectionGrid[t.x][t.y]=!1)})),Object(n["a"])(i,x["n"],(function(e,t){e.shotSelectionGrid[0]&&e.shotSelectionGrid[t.x]&&(e.shotSelectionGrid[t.x][t.y]=!0)})),Object(n["a"])(i,x["T"],(function(e,t){var s=JSON.parse(JSON.stringify(e.shotSelectionGrid));e.shotSelectionGrid=Object(y["c"])(s)})),Object(n["a"])(i,x["pd"],(function(e,t){var s=e.shotMap[t.entity_id];s&&t&&(t=j.populateTask(t,s),s.tasks.push(t),c.a.set(s.validations,t.task_type_id,t.id))})),Object(n["a"])(i,x["nb"],(function(e,t){var s=e.displayedShots.find((function(e){return e.id===t.entity_id}));if(s){var i=JSON.parse(JSON.stringify(s.validations));delete i[t.task_type_id],delete s.validations,c.a.set(s,"validations",i);var n=s.tasks.findIndex((function(e){return e===t.id}));s.tasks.splice(n,1)}})),Object(n["a"])(i,x["o"],(function(e,t){var s=JSON.parse(JSON.stringify(e.shotSelectionGrid));t.forEach((function(e){s[0]&&s[e.x]&&(s[e.x][e.y]=!0)})),e.shotSelectionGrid=s})),Object(n["a"])(i,x["ie"],(function(e,t){t&&(e.currentEpisode="main"===t?{id:"main"}:"all"===t?{id:"all"}:e.episodeMap[t])})),Object(n["a"])(i,x["oe"],(function(e,t){var s=t.episodeStats,i=t.taskTypeMap;e.episodeValidationColumns=j.sortStatColumns(s,i),e.episodeStats=s})),Object(n["a"])(i,x["me"],(function(e,t){var s=t.episodeRetakeStats;t.taskTypeMap;e.episodeRetakeStats=s})),Object(n["a"])(i,x["X"],(function(e,t){var s=t.taskMap,i=t.taskStatusMap,n=A.shots;e.searchSequenceFilters.length>0&&(n=Object(T["a"])(A.shots,e.searchSequenceFilters,{}),n=n.filter((function(e){return!e.canceled}))),e.sequenceStats=Object(k["a"])(n,"sequence_id",i,s)})),Object(n["a"])(i,x["W"],(function(e,t){var s=t.taskMap,i=t.taskStatusMap;e.episodeStats=Object(k["a"])(A.shots,"episode_id",i,s)})),Object(n["a"])(i,x["d"],(function(e,t){e.episodes.push(t);var s=Object(g["d"])(e.episodes);e.episodeMap[t.id]=t,e.episodes=s,e.displayedEpisodes.push(t),e.displayedEpisodes=Object(g["d"])(e.displayedEpisodes),e.episodeIndex=Object(S["b"])(s),e.displayedEpisodesLength=s.length})),Object(n["a"])(i,x["Pe"],(function(e,t){Object.assign(e.episodeMap[t.id],t),e.episodeIndex=Object(S["d"])(e.episodes)})),Object(n["a"])(i,x["Jd"],(function(e,t){delete e.episodeMap[t.id],e.episodes=Object(b["h"])(e.episodes,t),e.displayedEpisodes=Object(b["h"])(e.displayedEpisodes,t),e.episodeIndex=Object(S["b"])(e.episodes)})),Object(n["a"])(i,x["p"],(function(e,t){e.sequences.push(t);var s=Object(g["k"])(e.sequences);if(e.sequenceMap[t.id]=t,t.parent_id){var i=e.episodeMap[t.parent_id];i&&Object.assign(t,{episode_id:i.id,episode_name:i.name})}e.sequences=s,e.displayedSequences.push(t),e.displayedSequences=Object(g["k"])(e.displayedSequences),e.sequenceIndex=Object(S["d"])(s),e.displayedSequencesLength=s.length})),Object(n["a"])(i,x["Ue"],(function(e,t){Object.assign(e.sequenceMap[t.id],t),e.sequenceIndex=Object(S["d"])(e.sequences)})),Object(n["a"])(i,x["Pd"],(function(e,t){delete e.sequenceMap[t.id],e.sequences=Object(b["h"])(e.sequences,t),e.displayedSequences=Object(b["h"])(e.displayedSequences,t),e.sequenceIndex=Object(S["d"])(e.sequences)})),Object(n["a"])(i,x["q"],(function(e,t){t.taskTypeMap;var s=t.taskMap,i=t.personMap,n=t.production,a=t.shot,o=[],r={},c=0;a.project_name=n.name,a.production_id=n.id,a.tasks.forEach((function(e){j.populateTask(e,a,n),c+=e.duration,e.episode_id=a.episode_id,s[e.id]=e,r[e.task_type_id]=e.id,o.push(e.id),e.assignees.length>1&&(e.assignees=e.assignees.sort((function(e,t){return i[e].name.localeCompare(i[t])})))})),a.tasks=o,a.validations=r,a.timeSpent=c,A.shots.push(a),A.shots=Object(g["m"])(A.shots),e.shotMap[a.id]=a,e.displayedShots.push(a),e.displayedShots=Object(g["m"])(e.displayedShots),e.displayedShotsLength=A.shots.length,e.shotFilledColumns=Object(b["c"])(e.displayedShots);var l=e.displayedShots.length,d=e.nbValidationColumns;e.shotSelectionGrid=Object(y["b"])(l,d),e.shotMap[a.id]=a})),Object(n["a"])(i,x["Ve"],(function(e,t){Object.assign(e.shotMap[t.id],t),A.shotIndex=Object(S["e"])(A.shots)})),Object(n["a"])(i,x["Rd"],(function(e,t){delete e.shotMap[t.id],A.shots=Object(b["h"])(A.shots,t),A.result=Object(b["h"])(A.result,t),A.shotIndex=Object(S["e"])(A.shots),e.displayedShots=Object(b["h"])(e.displayedShots,t),t.timeSpent&&(e.displayedShotsTimeSpent-=t.timeSpent),t.nb_frames&&(e.displayedShotsFrames-=t.nb_frames)})),Object(n["a"])(i,x["u"],(function(e,t){t.canceled=!0})),Object(n["a"])(i,x["O"],(function(e,t){var s=t.taskStatusMap,i=t.taskTypeMap,n=t.taskMap,a=t.production,o=t.sorting,r=t.persons,c=e.shotSearchText;e.shotSorting=o,j.buildResult(e,{persons:r,production:a,sorting:o,shotSearch:c,taskStatusMap:s,taskTypeMap:i,taskMap:n})})),Object(n["a"])(i,x["Qe"],(function(e,t){var s=t.descriptor,i=t.previousDescriptorFieldName;"Shot"===s.entity_type&&i&&A.shots.forEach((function(e){e.data[s.field_name]=e.data[i],delete e.data[i]}))})),Object(n["a"])(i,x["Vd"],(function(e){Object.assign(e,Object(a["a"])({},D)),A.shots=[],A.result=[],A.shotIndex={}})),i);t["a"]={state:M,getters:I,actions:$,mutations:L,cache:A}},"02b9":function(e,t,s){"use strict";var i=s("f73f"),n=s.n(i);n.a},"03b1":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",{staticClass:"actions has-text-right"},[e.hideHistory?e._e():s("button",{staticClass:"button",attrs:{"data-test":"button-history"},on:{click:function(t){return e.$emit("history-clicked")}}},[s("clock-icon",{staticClass:"icon is-small only-icon"})],1),e.hideEdit||e.entry.canceled?e._e():s("button",{staticClass:"button",attrs:{"data-test":"button-edit"},on:{click:function(t){return e.$emit("edit-clicked")}}},[s("edit-icon",{staticClass:"icon is-small only-icon"})],1),e.entry.canceled?s("button",{staticClass:"button",attrs:{"data-test":"button-restore"},on:{click:function(t){return e.$emit("restore-clicked")}}},[s("rotate-ccw-icon",{staticClass:"icon is-small only-icon"})],1):e._e(),e.hideDelete||e.entry.canceled||!e.isCurrentUserAdmin?e.hideDelete?e._e():s("button",{staticClass:"button",attrs:{"data-test":"button-delete"},on:{click:function(t){return e.$emit("delete-clicked")}}},[s("trash-icon",{staticClass:"icon is-small only-icon"})],1):s("button",{staticClass:"button",attrs:{"data-test":"button-delete-admin"},on:{click:function(t){return e.$emit("delete-clicked")}}},[s("trash-icon",{staticClass:"icon is-small only-icon"})],1)])},n=[],a=s("5530"),o=s("2f62"),r=s("0a35"),c={name:"row-actions",components:{ClockIcon:r["i"],EditIcon:r["p"],RotateCcwIcon:r["I"],TrashIcon:r["P"]},props:{entry:{type:Object,default:function(){return{}}},hideEdit:{type:Boolean,default:!1},hideDelete:{type:Boolean,default:!1},hideHistory:{type:Boolean,default:!0}},computed:Object(a["a"])({},Object(o["c"])(["isCurrentUserAdmin"])),methods:Object(a["a"])({},Object(o["b"])([]))},l=c,d=(s("8204"),s("2877")),u=Object(d["a"])(l,i,n,!1,null,"05ce9a06",null);t["a"]=u.exports},"0455":function(e,t,s){},"0555":function(e,t,s){},"06c3":function(e,t,s){"use strict";var i=s("1ab0"),n=s.n(i);n.a},"09a4":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.tooltipOptions,expression:"tooltipOptions"}],staticClass:"flexrow production-name"},[e.noLink?s("div",{staticClass:"flexrow flexrow-item"},[e.withAvatar?s("div",{staticClass:"flexrow-item avatar has-text-centered",style:{background:e.getAvatarColor(e.entry),width:e.size+"px",height:e.size+"px","font-size":e.size-15+"px","line-height":e.size+"px"}},[e.entry.has_avatar?s("span",[s("img",{attrs:{src:e.getThumbnailPath(e.entry)}})]):s("span",[e._v(" "+e._s(e.generateAvatar(e.entry))+" ")])]):e._e(),e.onlyAvatar?e._e():s("span",{staticClass:"flexrow-item"},[e._v(" "+e._s(e.entry.name)+" ")])]):s("router-link",{staticClass:"flexrow flexrow-item",attrs:{to:e.productionRoute}},[e.withAvatar?s("div",{staticClass:"flexrow-item avatar has-text-centered",style:{background:e.getAvatarColor(e.entry),width:e.size+"px",height:e.size+"px","font-size":e.size-15+"px","line-height":e.size+"px"}},[e.entry.has_avatar?s("span",[s("img",{attrs:{src:e.getThumbnailPath(e.entry)}})]):s("span",[e._v(" "+e._s(e.generateAvatar(e.entry))+" ")])]):e._e(),e.onlyAvatar?e._e():s("span",{staticClass:"flexrow-item"},[e._v(" "+e._s(e.entry.name)+" ")])])],1)},n=[],a=(s("99af"),s("a15b"),s("b0c0"),s("a9e3"),s("5530")),o=s("7930"),r=s("2f62"),c={name:"production-name-cell",props:{entry:{default:function(){},type:Object},size:{default:40,type:Number},onlyAvatar:{default:!1,type:Boolean},withAvatar:{default:!0,type:Boolean},lastProductionScreen:{default:"assets",type:String},isTooltip:{default:!1,type:Boolean},noLink:{default:!1,type:Boolean}},computed:Object(a["a"])(Object(a["a"])({},Object(r["c"])([])),{},{productionRoute:function(){var e={name:this.lastProductionScreen,params:{production_id:this.entry.id}};return this.entry.first_episode_id&&(e.name="episode-".concat(this.lastProductionScreen),e.params.episode_id=this.entry.first_episode_id),e},productionInfo:function(){var e=this.entry?this.entry.fps:null,t=this.entry?this.entry.ratio:null,s=this.entry?this.entry.resolution:null,i=[];return e&&i.push("".concat(this.$t("productions.fields.fps"),": ").concat(e)),t&&i.push("".concat(this.$t("productions.fields.ratio"),": ").concat(t)),s&&i.push("".concat(this.$t("productions.fields.resolution"),": ").concat(s)),i.length>0&&this.isTooltip?i.join("<br>"):""},tooltipOptions:function(){return{content:this.productionInfo,delay:{hide:5e3}}}}),methods:Object(a["a"])(Object(a["a"])({},Object(r["b"])([])),{},{generateAvatar:function(e){var t=e.name.length>0?e.name[0]:"P";return t.toUpperCase()},getAvatarColor:function(e){return o["a"].fromString(e.name)},getThumbnailPath:function(e){return"/api/pictures/thumbnails/projects/".concat(e.id,".png")}})},l=c,d=(s("2c86"),s("2877")),u=Object(d["a"])(l,i,n,!1,null,"434cb9ff",null);t["a"]=u.exports},"09d3":function(e,t,s){"use strict";s.d(t,"c",(function(){return n})),s.d(t,"f",(function(){return o})),s.d(t,"b",(function(){return r})),s.d(t,"d",(function(){return c})),s.d(t,"a",(function(){return l})),s.d(t,"e",(function(){return u}));s("4160"),s("d81d"),s("b0c0"),s("b680"),s("b64b"),s("159b");var i=s("5530"),n=function(e,t,s){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"count";if(!e[t]||!e[t][s])return[];var n=e[t][s],o="count"===i?"count":"frames";return Object.keys(n).map((function(e){var t=n[e],s="todo"===t.name?"#6F727A":t.color;return[t.name,t[o],s]})).sort(a)},a=function(e,t){return e[0]&&t[0]?e[0].localeCompare(t[0]):!e[0]&&t[0]?-1:(e[0]&&t[0],1)},o=function(e,t,s){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"count",a={done:"#22d160",retake:"#ff3860",other:"#6f727a"};if(!e[t]||!e[t][s])return[];var o=Object(i["a"])({},e[t][s]);delete o.evolution,delete o.max_retake_count;var r="count"===n?"count":"frames";return[["retake",o.retake[r]||0,a.retake],["other",o.other[r]||0,a.other],["done",o.done[r]||0,a.done]]},r=function(e,t,s){return n(e,t,s).map((function(e){return e[2]}))},c=function(e,t,s){return e[t]&&e[t][s]?e[t][s].max_retake_count:-1},l=function(e,t,s,i){var n={all:{all:{}}};return e.forEach((function(e){if(!e.canceled){var a=e[t];n[a]||(n[a]={all:{}}),e.tasks.forEach((function(t){var o=i[t];d(s,n,a,e,o)}))}})),n},d=function(e,t,s,i,n){if(n){var a=n.task_type_id,o=e[n.task_status_id];if(o){var r=o.id;t[s][a]||(t[s][a]={}),t.all.all[r]||(t.all.all[r]={name:o.short_name,color:o.color,count:0,frames:0}),t.all[a]||(t.all[a]={}),t.all[a][r]||(t.all[a][r]={name:o.short_name,color:o.color,count:0,frames:0}),t[s].all[r]||(t[s].all[r]={name:o.short_name,color:o.color,count:0,frames:0}),t[s][a][r]||(t[s][a][r]={name:o.short_name,color:o.color,count:0,frames:0}),t[s][a][r].count++,t[s].all[r].count++,t.all[a][r].count++,t.all.all[r].count++,i.nb_frames&&(t[s][a][r].frames+=i.nb_frames,t[s].all[r].frames+=i.nb_frames,t.all[a][r].frames+=i.nb_frames,t.all.all[r].frames+=i.nb_frames)}}},u=function(e,t){var s=0;return t>0&&(s=e/t*100),s.toFixed(2)}},"09d9":function(e,t,s){},"0c5b":function(e,t,s){},"0daf":function(e,t,s){},"0f9a":function(e,t,s){"use strict";s("7db0"),s("c740"),s("4160"),s("caad"),s("13d5"),s("a434"),s("b0c0"),s("b64b"),s("d3b7"),s("07ac"),s("25f0"),s("2532"),s("159b");var i,n=s("ade3"),a=s("5530"),o=s("ba4c"),r=s.n(o),c=s("ce6b"),l=s("52ad"),d=s("e07d"),u=s("48c6"),p=s("2229"),h=s("2017"),m=s("ca76"),f=s("66e7"),_=s("6185"),v=s("9fb0"),g={getTaskStatus:function(e){return d["a"].state.taskStatusMap[e]}},y={user:null,isAuthenticated:!1,avatarFormData:null,isSaveProfileLoading:!1,isSaveProfileLoadingError:!1,changePassword:{isLoading:!1,isError:!1,isSuccess:!1,isValid:!0},isTodosLoading:!1,isTodosLoadingError:!1,todos:[],displayedTodos:[],displayedDoneTasks:[],todosIndex:{},todosSearchText:"",todoSelectionGrid:{},todoSearchQueries:[],userFilters:{},todoListScrollPosition:0,timeSpentMap:{},timeSpentTotal:0},b=Object(a["a"])({},y),k={user:function(e){return e.user},isAuthenticated:function(e){return e.isAuthenticated},isCurrentUserManager:function(e){return e.user&&["admin","manager"].includes(e.user.role)},isCurrentUserAdmin:function(e){return e.user&&"admin"===e.user.role},isCurrentUserArtist:function(e){return e.user&&["user","vendor"].includes(e.user.role)},isCurrentUserClient:function(e){return e.user&&"client"===e.user.role},isCurrentUserVendor:function(e){return e.user&&"vendor"===e.user.role},isSaveProfileLoading:function(e){return e.isSaveProfileLoading},isSaveProfileLoadingError:function(e){return e.isSaveProfileLoadingError},changePassword:function(e){return e.changePassword},displayedTodos:function(e){return e.displayedTodos},displayedDoneTasks:function(e){return e.displayedDoneTasks},todosSearchText:function(e){return e.todosSearchText},todoSelectionGrid:function(e){return e.todoSelectionGrid},todoSearchQueries:function(e){return e.todoSearchQueries},userFilters:function(e){return e.userFilters},isTodosLoading:function(e){return e.isTodosLoading},isTodosLoadingError:function(e){return e.isTodosLoadingError},todoListScrollPosition:function(e){return e.todoListScrollPosition},timeSpentMap:function(e){return e.timeSpentMap},timeSpentTotal:function(e){return e.timeSpentTotal}},w={saveProfile:function(e,t){var s=e.commit,i=e.state;s(v["lf"]),c["a"].updatePerson(t.form).then((function(){t.form.id=i.user.id,s(v["mf"],t.form)})).catch((function(e){console.error(e),s(v["kf"])}))},checkNewPasswordValidityAndSave:function(e,t){var s=e.commit,i=e.state,n=t.form,a=t.callback;u["a"].isPasswordValid(n.password,n.password2)?w.changeUserPassword({commit:s,state:i},{form:n,callback:a}):(s(v["bf"]),a&&a())},changeUserPassword:function(e,t){var s=e.commit;e.state;s(v["Ze"]),c["a"].changePassword(t.form,(function(e){s(e?v["Ye"]:v["af"]),t.callback&&t.callback()}))},loadTodos:function(e,t){var s=e.commit,i=e.state,n=e.rootGetters,a=t.callback,o=t.forced,r=t.date,l=n.userFilters,d=n.taskTypeMap;0===i.todos.length||o?(s(v["gf"]),c["a"].loadTodos((function(e,t){e?(s(v["ff"]),a&&a(e)):c["a"].loadDone((function(e,i){e?s(v["ff"]):s(v["cf"],i),c["a"].loadTimeSpents(r,(function(e,i){e?s(v["ff"]):(s(v["df"],i),s(v["ef"],{tasks:t,userFilters:l,taskTypeMap:d})),a&&a(e)}))}))}))):a&&a()},uploadAvatar:function(e,t){var s=e.commit,i=e.state;c["a"].postAvatar(i.user.id,i.avatarFormData,(function(e){e||s(v["Xe"],i.user.id),t&&t(e)}))},setTodosSearch:function(e,t){var s=e.commit;e.state;s(v["De"],t)},updateSearchFilter:function(e,t){var s=e.commit;return s(v["We"],t),c["a"].updateFilter(t)},loadUserSearchFilters:function(e,t){var s=e.commit;c["a"].getUserSearchFilters((function(e,i){e?s(v["ad"]):s(v["Zc"],i),t(e)}))},saveTodoSearch:function(e,t){var s=e.commit;e.rootGetters;return new Promise((function(e,i){var n=b.todoSearchQueries.find((function(e){return e.name===t}));n?e():c["a"].createFilter("todos",t,t,null,null,(function(t,n){s(v["ee"],{searchQuery:n}),t?i(t):e(n)}))}))},removeTodoSearch:function(e,t){var s=e.commit;e.rootGetters;return new Promise((function(e,i){c["a"].removeFilter(t,(function(n){s(v["Ud"],{searchQuery:t}),n?i(n):e()}))}))},setTodoListScrollPosition:function(e,t){var s=e.commit;e.rootGetters;s(v["Ee"],t)},loadContext:function(e,t){var s=e.commit;return c["a"].getContext().then((function(e){s(v["Zc"],e.search_filters),s(v["Ec"],e.project_status),s(v["Sc"],e.task_status),s(v["Wc"],e.task_types),s(v["qc"],e.persons),s(v["gc"],e.custom_actions),s(v["dc"],e.asset_types),s(v["lc"],e.notifications),s(v["nc"],e.projects)}))}},C=(i={},Object(n["a"])(i,v["hf"],(function(e,t){e.user=l["a"].helpers.addAdditionalInformation(t),e.isAuthenticated=!0})),Object(n["a"])(i,v["jf"],(function(e,t){e.user=null,e.isAuthenticated=!1})),Object(n["a"])(i,v["if"],(function(e,t){e.user=null,e.isAuthenticated=!1})),Object(n["a"])(i,v["lf"],(function(e){e.isSaveProfileLoading=!0,e.isSaveProfileLoadingError=!1})),Object(n["a"])(i,v["kf"],(function(e){e.isSaveProfileLoading=!1,e.isSaveProfileLoadingError=!0})),Object(n["a"])(i,v["mf"],(function(e,t){Object.assign(e.user,t),Object.assign(e.user,l["a"].helpers.addAdditionalInformation(e.user)),e.isSaveProfileLoading=!1,e.isSaveProfileLoadingError=!1})),Object(n["a"])(i,v["Bb"],(function(e,t){e.user&&t&&e.user.id===t.id&&(Object.assign(e.user,t),Object.assign(e.user,l["a"].helpers.addAdditionalInformation(e.user)))})),Object(n["a"])(i,v["Ze"],(function(e){e.changePassword={isLoading:!0,isError:!1,isSuccess:!1,isValid:!0}})),Object(n["a"])(i,v["Ye"],(function(e){e.changePassword={isLoading:!1,isError:!0,isSuccess:!1,isValid:!0}})),Object(n["a"])(i,v["af"],(function(e){e.changePassword={isLoading:!1,isError:!1,isSuccess:!0,isValid:!0}})),Object(n["a"])(i,v["bf"],(function(e){e.changePassword={isLoading:!1,isError:!1,isSuccess:!1,isValid:!1}})),Object(n["a"])(i,v["gf"],(function(e){e.isTodosLoadingError=!1,e.isTodosLoading=!0,e.timeSpents={},e.timeSpentTotal=0})),Object(n["a"])(i,v["ef"],(function(e,t){var s=t.tasks,i=t.userFilters,n=t.taskTypeMap;e.isTodosLoading=!1,s.forEach(f["e"]),s.forEach((function(e){var t=g.getTaskStatus(e.task_status_id);e.taskStatus=t})),e.todoSelectionGrid=Object(_["b"])(s.length,1),e.todos=Object(p["o"])(s,n),e.todosIndex=Object(h["g"])(s);var a=Object(m["e"])(e.todosSearchText),o=Object(h["j"])(e.todosIndex,a);e.displayedTodos=o||e.todos,i.todos&&i.todos.all?e.todoSearchQueries=i.todos.all:e.todoSearchQueries=[]})),Object(n["a"])(i,v["cf"],(function(e,t){t.forEach(f["e"]),t.forEach((function(e){var t=g.getTaskStatus(e.task_status_id);e.taskStatus=t})),e.displayedDoneTasks=t})),Object(n["a"])(i,v["ff"],(function(e,t){e.isTodosLoadingError=!0})),Object(n["a"])(i,v["H"],(function(e,t){e.avatarFormData=t})),Object(n["a"])(i,v["Xe"],(function(e){if(e.user){var t=Math.random().toString(36).substring(7);e.user.has_avatar=!0,r.a.set(e.user,"uniqueHash",t),e.user.avatarPath="/api/pictures/thumbnails/persons/".concat(e.user.id,".png")}})),Object(n["a"])(i,v["od"],(function(e,t){var s=t.comment,i=t.taskId,n=e.todos.find((function(e){return e.id===i}));if(n){var a=g.getTaskStatus(s.task_status_id);Object.assign(n,{task_status_id:a.id,task_status_name:a.name,task_status_short_name:a.short_name,task_status_color:a.color,last_comment:s}),e.todosIndex=Object(h["g"])(e.todos)}})),Object(n["a"])(i,v["De"],(function(e,t){var s=Object(m["e"])(t),i=Object(h["j"])(e.todosIndex,s);e.todosSearchText=t,e.displayedTodos=i||e.todos})),Object(n["a"])(i,v["ee"],(function(e,t){var s=t.searchQuery;e.todoSearchQueries.push(s),e.todoSearchQueries=Object(p["d"])(e.todoSearchQueries)})),Object(n["a"])(i,v["Ud"],(function(e,t){var s=t.searchQuery,i=e.todoSearchQueries.findIndex((function(e){return e.name===s.name}));i>=0&&e.todoSearchQueries.splice(i,1)})),Object(n["a"])(i,v["n"],(function(e,t){e.todoSelectionGrid&&e.todoSelectionGrid[t.x]&&(e.todoSelectionGrid[t.x][t.y]=!0)})),Object(n["a"])(i,v["Od"],(function(e,t){e.todoSelectionGrid&&e.todoSelectionGrid[t.x]&&(e.todoSelectionGrid[t.x][t.y]=!1)})),Object(n["a"])(i,v["T"],(function(e){e.todoSelectionGrid=Object(_["c"])(e.todoSelectionGrid)})),Object(n["a"])(i,v["Ee"],(function(e,t){e.todoListScrollPosition=t})),Object(n["a"])(i,v["ad"],(function(e){})),Object(n["a"])(i,v["Zc"],(function(e,t){e.userFilters=t})),Object(n["a"])(i,v["We"],(function(e,t){Object.keys(e.userFilters).forEach((function(s){Object.keys(e.userFilters[s]).forEach((function(i){var n=e.userFilters[s][i],a=n.find((function(e){return e.id===t.id}));a&&Object.assign(a,t)}))}))})),Object(n["a"])(i,v["Ce"],(function(e,t){e.user.id===t.person_id&&(e.timeSpentMap[t.task_id]=t),e.timeSpentTotal=Object.values(e.timeSpentMap).reduce((function(e,t){return t.duration+e}),0)/60})),Object(n["a"])(i,v["df"],(function(e,t){var s={};t.forEach((function(e){s[e.task_id]=e})),e.timeSpentMap=s,e.timeSpentTotal=Object.values(e.timeSpentMap).reduce((function(e,t){return t.duration+e}),0)/60})),Object(n["a"])(i,v["Zd"],(function(e,t){var s=t.searchQuery,i=t.production;i&&(e.userFilters.task||(e.userFilters.task={}),e.userFilters.task[i.id]||(e.userFilters.task[i.id]=[]),e.userFilters.task[i.id].includes(s)||(e.userFilters.task[i.id].push(s),e.userFilters.task[i.id]=Object(p["d"])(e.userFilters.task[i.id])))})),Object(n["a"])(i,v["ce"],(function(e,t){var s=t.searchQuery,i=t.production;e.userFilters.shot[i.id]||(e.userFilters.shot[i.id]=[]),e.userFilters.shot[i.id].includes(s)||(e.userFilters.shot[i.id].push(s),e.userFilters.shot[i.id]=Object(p["d"])(e.userFilters.shot[i.id]))})),Object(n["a"])(i,v["Gd"],(function(e){})),Object(n["a"])(i,v["Vd"],(function(e){Object.assign(e,Object(a["a"])({},y))})),i);t["a"]={namespace:!0,state:b,getters:k,actions:w,mutations:C}},"0fcb":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[e.entry.description&&e.entry.description.length>0&&!e.full?s("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.tooltipOptions,expression:"tooltipOptions"}],staticClass:"description",domProps:{innerHTML:e._s(e.compileMarkdown(e.shortenText(e.entry.description,20)))},on:{click:e.onClick}}):s("span",{domProps:{innerHTML:e._s(e.compileMarkdown(e.entry.description))}})])},n=[],a=(s("a4d3"),s("e01a"),s("5530")),o=s("0e54"),r=s.n(o),c=s("2f62"),l=s("8c97"),d={name:"description-cell",data:function(){return{isOpen:!1,timeout:null}},components:{},props:{entry:{type:Object,default:function(){}},full:{type:Boolean,default:!1}},computed:Object(a["a"])(Object(a["a"])({},Object(c["c"])([])),{},{tooltipOptions:function(){return{content:this.compileMarkdown(this.entry.description),show:this.isOpen,trigger:"manual"}}}),methods:Object(a["a"])(Object(a["a"])({},Object(c["b"])([])),{},{compileMarkdown:function(e){return r()(e||"")},shortenText:l["a"].shortenText,onClick:function(){this.isOpen=!this.isOpen}})},u=d,p=(s("271f"),s("2877")),h=Object(p["a"])(u,i,n,!1,null,"2067aff3",null);t["a"]=h.exports},"0ffc":function(e,t,s){},1:function(e,t){},"10de":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAABxCAYAAACQnewjAAAH/klEQVR4nO3dSYwMbxzG8Xfsyxgh9rEFQRARCU4Eie0gHFwlRJwtV8RcnCUcJeIiHIRBgguxJdZEhBBi37eRse/mn+f9q9ZdU+9vqnvGzHT395NUZlpNdVe396l3q+qqcM41OACJOvCxAGEEBDAQEMBAQAADAQEMBAQwEBDAQEAAAwEBDAQEMBAQwEBAAAMBAQwEBDAQEMBAQAADAQEMBAQwEBDAQEAAAwEBDAQEMHTiwyldXbp0ccOHD/fLyJEjM0v0eM6cOe7+/fvl/jGZCEgR69atW6NCr2XEiBFu1KhRbuDAga6iosL9+PHDPXz40N26dcs9evTIHTlyxNXU1Pi/IyA2AtKOVVZW5hR6LdmBUACkvr7eB6Cqqsr16dPH9erVy3Xs2DHzxjp37uw2bdrk9u7dm/m3FStW+OeBjYC0IRXm7EKfHQLVAL179/Y79/nzZ/f161d3+vRpd/fuXf9TNcGDBw/88v79e/93qhkWLVqU+IYGDx6c81jbEZCmEZB/aMCAAYlH/uh3Henl+fPnvgZQoZ81a5YPRqdOf/9revTo4Zf169ebTaKnT58G1w0aNCjnsV5L+wUbASmQ2vY6KscLfVQT6Kf6CA0NDe7jx4/u27dvPgTHjh1zhw4d8kdwFVL9m9ZFXr9+nROObCrkVkBevnwZXFddXZ3zWK8/f/78Vv/cig0BCVAbXoUq1AnWY40S/fz50z1+/DjT3FEgxo4d6zp0+H8EXUFSTaHlxIkTbuPGjebrqpD369cvcV28kMdZNYhqs2w0sdIhIFl05D5+/LgbM2aM7wArJL9+/fLtfxV0dXY1+pPd/n/27Jn7/ft35klWr17tFi5cmPj88X5AEhXyiRMnJq6LF/I4qwYZOnRozmPt+7BhwzLvEYEywefyl2qDCRMm5BzBVYB69uyZebxjxw7fDArJpx+QJJ9CHqewhkQjXhGFXAcEhfbJkyepPp9yREBi1MbX6FL2MGk2FTQrIC9evAiua6qJ5PIs5HHq7If07dvXvy8FIuojiX4SkDACEqMj67hx4/ycQhIV8uvXrwe3twqpRqI0t6FOeyHbDxkyxNx3DQdH1GzS8K8GABT27t27u7dv3/q1+qnBgQMHDrgvX76Yz1nuCEiM2uaaeQ5p6ij+6tUr3yeJOulxCphmtEOsGkh9hqlTpwYnD6N5kzdv3viaMOonRSNm0e9WQJGLgMSoAIUKt0txFNeRWyEJ9TcUsFBAtE1UyPU8Ksjfv3/3NYBqHnXeL1++7JthqgG03Lhxw08QZgdAgwpoGQQkRgVM8xchaUai1EwKBUQnCKqznVQLdO3a1QdDHX3NmGtfFILsWkCLQoPWQUBiVADVXg8JFXyNCEUFX0d8NdNUA6jAa3hYNYD+fcOGDTlH+7Nnz7rdu3fnDBtrNA3tA3e5jVHn/N27d8H1165dc9u2bWvU/lfTSwFQp1ejQvfu3Uts/6t20WQiigMBSaDRn6gGiNr/Ud/gw4cPjQp91B/Q7+p/oHQQkARHjx71k4Mq7BpV0qIJPP1UQEqJRrysYetyRx8kgfogM2fObHf79S8cPHjQLV26tPTeWAvhmnTAQEAM1nlV27dv96duhJYtW7YEt71y5Yq5beiiJ1EHXxOGoW01cGANAixYsMD/3Z49e5r9+ZQDmliG/v37B1eeOXPGX+oaMmXKlOC6c+fOmdtOmjQpuO7mzZvmuVPTpk3zZx4n0fCx9lsjbcylpEMNYtD1HiHnz583t1VBDblw4UKbbHv16lXOvcoTASmARrR0kVSI5kWsazcuXrxovuiMGTP+ybaXLl1qyY+hLBCQAjR1FLcKqSYhrZMVda6Wda14c167qW3RGAEpQFMFbfr06cF1qgGsTrS1rZpHmskPyf4qoCQEJH900hNYZ/NKXV2d2QnXCYkhmoG3tl28eHFw3e3bt80O/Lx584LrPn365Od3oteOzgxA0xpYcpeTJ082SH19fUOpqqur8++straW/39joQYx6Ava9u/fn/kDDZ9qDiG6Mi9f+mYTXeFXyBCrToXXGcOqCfKl7XTqTPZJmMuXL3dz5879J59bKSEgBp2Ru2vXrna7f80xe/bs4t35VkQnHTAQEMBAQAADfZAUdCmtvm2xmOniL33hA/JDQFJYtmyZ27p1a7vfT4vOw7LmX5CMJhZgoAZJYefOna62tragbdeuXevWrFnjL9WdPHlyK+/5X5zeXhgCkoK+xCG6i1O+ous+9G2L+lIHFBeaWICBgAAGAgIYCAhgICCAgYAABgICGJgHSUGXwa5ataqgbcePH+9/6vZrhU42tgTdcWrdunVt9vrFioCkMHr0aLdkyZJmPYfuEdLc52gOnYuF/BGQFHS3J33JcyFUg+imoLqdgm6V1lZUgyB/BCSFw4cP+6UQNTU1bvPmzf4OtHyLevGhkw4YCAhgICCAgYAABgICGAgIYCAggIF5kBSac6pJdXW1v320bn/GqSbFh4Ck0BKnmrg/36/VVjjVpDAEJAXdNPPUqVPtfj8td+7cab87144RkBT27dvnF5QfOumAgYAABgICGOiDGKqqqvw9z0tRZWVlSb6vlkZADCtXrvQLyhdNLMBQ8ecWuMiim+WUSxNEd77lctwwAgIYaGIBBgICGAgIYCAggIGAAAYCAhgICGAgIICBgAAGAgIYCAhgICCAgYAABgICGAgIYCAggIGAAAYCAhgICGAgIICBgAAGAgKEOOf+A6kjsx2PQ0m8AAAAAElFTkSuQmCC"},1149:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[e._v(e._s(e.label))]),s("p",{staticClass:"control"},[s("textarea",{ref:"input",staticClass:"input",class:"input "+e.inputClass,attrs:{placeholder:e.placeholder,type:e.type},domProps:{value:e.value},on:{input:function(t){return e.updateValue()},keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.emitEnter()},e.emitKeyup]}})])])},n=[],a=s("5530"),o=s("2f62"),r={name:"textarea-field",props:{label:{default:"",type:String},value:{default:"",type:String},placeholder:{default:"",type:String},type:{default:"text",type:String},inputClass:{default:"",type:String}},computed:Object(a["a"])({},Object(o["c"])([])),methods:Object(a["a"])(Object(a["a"])({},Object(o["b"])([])),{},{emitEnter:function(){this.$emit("enter",this.$refs.input.value)},updateValue:function(){this.$emit("input",this.$refs.input.value)},emitKeyup:function(e){this.$emit("keyup",e)},focus:function(){this.$refs.input.focus()}})},c=r,l=(s("736c"),s("2877")),d=Object(l["a"])(c,i,n,!1,null,"e433a15c",null);t["a"]=d.exports},"11ca":function(e,t,s){},1211:function(e,t,s){},"12c5":function(e,t,s){"use strict";var i=s("f420"),n=s.n(i);n.a},1338:function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var i={computed:{},methods:{onKeyDown:function(e){var t=this.lastSelection?this.lastSelection:{x:0,y:0},s=t.x,i=t.y,n=null;e.altKey&&(37===e.keyCode?n=this.select(s,i-1):38===e.keyCode?n=this.select(s-1,i):39===e.keyCode?n=this.select(s,i+1):40===e.keyCode&&(n=this.select(s+1,i)),this.scrollToValidationCell(n),this.stopEvent(e))},stopEvent:function(e){e||(e=window.event),e.stopPropagation(),e.cancelBubble=!0,e.returnValue=!1},setScrollPosition:function(e){this.$refs.body&&(this.$refs.body.scrollTop=e)},setScrollLeftPosition:function(e){this.$refs.body&&(this.$refs.body.scrollLeft=e)},select:function(e,t){var s="validation-"+e+"-"+t,i=this.$refs[s];return i&&i[0].$el.click(),i?i[0]:0},scrollToValidationCell:function(e){if(e){var t=20,s=e.$el.getBoundingClientRect(),i=this.$refs.body.getBoundingClientRect(),n=s.bottom>i.bottom-t,a=s.top<i.top+t,o=s.right>i.right-t,r=s.left<i.left+t;if(n){var c=s.bottom-i.bottom+t;this.setScrollPosition(this.$refs.body.scrollTop+c)}else if(a){var l=i.top-s.top+t;this.setScrollPosition(this.$refs.body.scrollTop-l)}if(o){var d=s.right-i.right+t;this.setScrollLeftPosition(this.$refs.body.scrollLeft+d)}else if(r){var u=i.left-s.left+t;this.setScrollLeftPosition(this.$refs.body.scrollLeft-u)}}}}}},1537:function(e,t,s){},"162b":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{modal:!0,"is-active":e.active}},[s("div",{staticClass:"modal-background",on:{click:function(t){return e.$emit("cancel")}}}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box"},[e.shotToEdit&&this.shotToEdit.id?s("h1",{staticClass:"title"},[e._v(" "+e._s(e.$t("shots.edit_title"))+" "+e._s(e.shotToEdit.name)+" ")]):s("h1",{staticClass:"title"},[e._v(" "+e._s(e.$t("shots.new_shot"))+" ")]),s("form",{on:{submit:function(e){e.preventDefault()}}},[s("combobox",{attrs:{label:e.$t("shots.fields.sequence"),options:e.getSequenceOptions},model:{value:e.form.sequence_id,callback:function(t){e.$set(e.form,"sequence_id",t)},expression:"form.sequence_id"}}),s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"nameField",attrs:{label:e.$t("shots.fields.name")},on:{enter:e.runConfirmation},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),s("textarea-field",{ref:"descriptionField",attrs:{label:e.$t("shots.fields.description")},on:{keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.ctrlKey?e.runConfirmation(t):null},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.metaKey?e.runConfirmation(t):null}]},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}}),s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"nbFramesField",attrs:{label:e.$t("shots.fields.nb_frames"),type:"number"},on:{enter:e.runConfirmation},model:{value:e.form.nb_frames,callback:function(t){e.$set(e.form,"nb_frames",t)},expression:"form.nb_frames"}}),s("text-field",{ref:"frameInField",attrs:{label:e.$t("shots.fields.frame_in"),type:"number"},model:{value:e.form.frameIn,callback:function(t){e.$set(e.form,"frameIn",t)},expression:"form.frameIn"}}),s("text-field",{ref:"frameOutField",attrs:{label:e.$t("shots.fields.frame_out"),type:"number"},on:{enter:e.runConfirmation},model:{value:e.form.frameOut,callback:function(t){e.$set(e.form,"frameOut",t)},expression:"form.frameOut"}}),s("text-field",{ref:"fpsField",attrs:{label:e.$t("shots.fields.fps"),type:"number"},on:{enter:e.runConfirmation},model:{value:e.form.fps,callback:function(t){e.$set(e.form,"fps",t)},expression:"form.fps"}}),e._l(e.shotMetadataDescriptors,(function(t){return s("div",{key:t.id},[t.choices.length>0?s("combobox",{attrs:{label:t.name,options:e.getDescriptorChoicesOptions(t)},model:{value:e.form.data[t.field_name],callback:function(s){e.$set(e.form.data,t.field_name,s)},expression:"form.data[descriptor.field_name]"}}):s("text-field",{attrs:{label:t.name},on:{enter:e.runConfirmation},model:{value:e.form.data[t.field_name],callback:function(s){e.$set(e.form.data,t.field_name,s)},expression:"form.data[descriptor.field_name]"}})],1)}))],2),s("modal-footer",{attrs:{"error-text":e.$t("shots.edit_fail"),"is-loading":e.isLoading,"is-error":e.isError},on:{confirm:e.confirmClicked,cancel:function(t){return e.$emit("cancel")}}})],1)])])},n=[],a=(s("a4d3"),s("e01a"),s("99af"),s("d81d"),s("b0c0"),s("2909")),o=s("5530"),r=s("2f62"),c=s("d065"),l=s("992f"),d=s("d5c9"),u=s("7bf8"),p=s("1149"),h={name:"edit-shot-modal",mixins:[c["a"]],components:{Combobox:l["a"],ModalFooter:d["a"],TextField:u["a"],TextareaField:p["a"]},props:["onConfirmClicked","text","active","cancelRoute","isError","isLoading","isLoadingStay","isSuccess","shotToEdit","errorText"],data:function(){return{form:{data:{}},shotSuccessText:""}},computed:Object(o["a"])(Object(o["a"])({},Object(r["c"])(["currentProduction","getSequenceOptions","getOpenProductionOptions","openProductions","sequences","shots","shotCreated","shotMetadataDescriptors"])),{},{frameIn:function(){return this.shotToEdit.data?this.shotToEdit.data.frame_in:""},frameOut:function(){return this.shotToEdit.data?this.shotToEdit.data.frame_out:""},fps:function(){return this.shotToEdit.data?this.shotToEdit.data.fps:""}}),methods:Object(o["a"])(Object(o["a"])({},Object(r["b"])([])),{},{runConfirmation:function(){this.isEditing()?this.confirmClicked():this.confirmAndStayClicked()},confirmAndStayClicked:function(){this.$emit("confirmAndStay",this.form)},confirmClicked:function(){this.$emit("confirm",this.form)},getDescriptorChoicesOptions:function(e){var t=e.choices.map((function(e){return{label:e,value:e}}));return[{label:"",value:""}].concat(Object(a["a"])(t))},isEditing:function(){return this.shotToEdit&&this.shotToEdit.id},resetForm:function(){this.shotSuccessText="",this.isEditing()?this.form={sequence_id:this.shotToEdit.sequence_id,project_id:this.shotToEdit.project_id,name:this.shotToEdit.name,description:this.shotToEdit.description,nb_frames:this.shotToEdit.nb_frames,frameIn:this.frameIn,frameOut:this.frameOut,fps:this.fps,data:Object(o["a"])({},this.shotToEdit.data)||{}}:(this.openProductions.length>0&&(this.form.project_id=this.currentProduction?this.currentProduction.id:""),this.sequences.length>0&&(this.form.sequence_id=this.sequences[0].id),this.form.name="",this.form.description="",this.form.nb_frames=0,this.form.data={})}}),mounted:function(){this.resetForm()},watch:{active:function(){var e=this;this.shotSuccessText="",this.resetForm(),this.active&&setTimeout((function(){e.$refs.nameField.focus()}),100)},shotToEdit:function(){this.resetForm()},shotCreated:function(){this.isEditing()?this.shotSuccessText=this.$t("shots.edit_success",{name:this.shotCreated}):this.shotSuccessText=this.$t("shots.new_success",{name:this.shotCreated})}}},m=h,f=(s("78e2"),s("2877")),_=Object(f["a"])(m,i,n,!1,null,"8b2c4e12",null);t["a"]=_.exports},"16ce":function(e,t,s){},"186e":function(e,t,s){},"187f":function(e,t,s){},"1a5d":function(e,t,s){"use strict";var i=s("8d35"),n=s.n(i);n.a},"1ab0":function(e,t,s){},"1b99":function(e,t,s){"use strict";var i=s("7128"),n=s.n(i);n.a},"1bb5":function(e,t,s){"use strict";var i=s("1ce3"),n=s.n(i);n.a},"1bbb":function(e,t,s){"use strict";var i=s("0ffc"),n=s.n(i);n.a},"1c55":function(e,t,s){"use strict";var i=s("5e11"),n=s.n(i);n.a},"1ce3":function(e,t,s){},"1ce5":function(e,t,s){"use strict";var i=s("e577"),n=s.n(i);n.a},"1d3d":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{modal:!0,"is-active":e.active}},[s("div",{staticClass:"modal-background",on:{click:function(t){return e.$emit("cancel")}}}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box"},[e.productionToEdit&&e.productionToEdit.id?s("h1",{staticClass:"title"},[e._v(" "+e._s(e.$t("productions.edit_title"))+" "+e._s(e.productionToEdit.name)+" ")]):s("h1",{staticClass:"title"},[e._v(" "+e._s(e.$t("productions.new_production"))+" ")]),s("form",{on:{submit:function(e){e.preventDefault()}}},[s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"nameField",attrs:{label:e.$t("productions.fields.name")},on:{enter:e.runConfirmation},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),e.productionToEdit&&e.productionToEdit.id?s("combobox",{attrs:{label:e.$t("productions.fields.status"),options:e.productionStatusOptions,localeKeyPrefix:"productions.status."},on:{enter:e.runConfirmation},model:{value:e.form.project_status_id,callback:function(t){e.$set(e.form,"project_status_id",t)},expression:"form.project_status_id"}}):e._e(),s("combobox",{attrs:{label:e.$t("productions.fields.type"),options:e.productionTypeOptions,localeKeyPrefix:"productions.type."},on:{enter:e.runConfirmation},model:{value:e.form.production_type,callback:function(t){e.$set(e.form,"production_type",t)},expression:"form.production_type"}}),e.productionToEdit&&e.productionToEdit.id?s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"fpsField",attrs:{label:e.$t("productions.fields.fps")},on:{enter:e.runConfirmation},model:{value:e.form.fps,callback:function(t){e.$set(e.form,"fps",t)},expression:"form.fps"}}):e._e(),e.productionToEdit&&e.productionToEdit.id?s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"ratioField",attrs:{label:e.$t("productions.fields.ratio")},on:{enter:e.runConfirmation},model:{value:e.form.ratio,callback:function(t){e.$set(e.form,"ratio",t)},expression:"form.ratio"}}):e._e(),e.productionToEdit&&e.productionToEdit.id?s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"resolutionField",attrs:{label:e.$t("productions.fields.resolution")},on:{enter:e.runConfirmation},model:{value:e.form.resolution,callback:function(t){e.$set(e.form,"resolution",t)},expression:"form.resolution"}}):e._e(),e.productionToEdit&&e.productionToEdit.id?s("div",[s("span",{staticClass:"label"},[e._v(e._s(e.$t("productions.picture")))]),s("file-upload",{ref:"fileField",attrs:{label:e.$t("main.csv.upload_file"),accept:".png,.jpg,.jpeg"},on:{fileselected:e.onFileSelected}})],1):e._e()],1),s("modal-footer",{attrs:{"error-text":e.$t("productions.edit_error"),"is-error":e.isError,"is-loading":e.isLoading},on:{confirm:e.runConfirmation,cancel:function(t){return e.$emit("cancel")}}})],1)])])},n=[],a=(s("b0c0"),s("5530")),o=s("2f62"),r=s("d065"),c=s("992f"),l=s("d5c9"),d=s("4085"),u=s("7bf8"),p={name:"edit-production-modal",mixins:[r["a"]],components:{Combobox:c["a"],FileUpload:d["a"],ModalFooter:l["a"],TextField:u["a"]},props:["text","active","isLoading","isError","errorText","productionToEdit"],data:function(){var e={formData:null,productionTypeOptions:[{label:"short",value:"short"},{label:"featurefilm",value:"featurefilm"},{label:"tvshow",value:"tvshow"}]};return this.productionToEdit&&this.productionToEdit.id?e.form={name:this.productionToEdit.name,project_status_id:this.productionToEdit.project_status_id,fps:this.productionToEdit.fps,ratio:this.productionToEdit.ratio,resolution:this.productionToEdit.resolution,production_type:this.productionToEdit.production_type||"short"}:e.form={name:"",project_status_id:this.productionStatus?this.productionStatus[0].id:null,fps:"",ratio:"",resolution:"",production_type:"short"},e},created:function(){this.resetForm(),this.productionTypeOptions=[{label:"short",value:"short"},{label:"featurefilm",value:"featurefilm"},{label:"tvshow",value:"tvshow"}]},mounted:function(){this.productionStatus.length>0&&(this.form.project_status_id=this.productionStatus[0].id)},computed:Object(a["a"])({},Object(o["c"])(["productions","productionStatus","productionStatusOptions"])),methods:Object(a["a"])(Object(a["a"])({},Object(o["b"])([])),{},{runConfirmation:function(){this.$emit("confirm",this.form)},onFileSelected:function(e){this.formData=e,this.$emit("fileselected",e)},resetForm:function(){var e=this;this.productionToEdit&&this.productionToEdit.id?(this.form={name:this.productionToEdit.name,project_status_id:this.productionToEdit.project_status_id,fps:this.productionToEdit.fps,ratio:this.productionToEdit.ratio,resolution:this.productionToEdit.resolution,production_type:this.productionToEdit.production_type||"short"},this.form.project_status_id=null,this.$nextTick((function(){e.form.project_status_id=e.productionToEdit.project_status_id}))):this.form={name:"",project_status_id:this.productionStatusOptions[0].value,fps:"",ratio:"",resolution:"",production_type:"short"}}}),watch:{productionToEdit:function(){this.resetForm()},active:function(){var e=this;this.active&&setTimeout((function(){e.$refs.nameField.focus(),e.formData=null,e.$refs.fileField&&e.$refs.fileField.reset()}),100)}}},h=p,m=(s("1ffc"),s("2877")),f=Object(m["a"])(h,i,n,!1,null,"59b21512",null);t["a"]=f.exports},"1d53":function(e,t,s){"use strict";var i=s("5395"),n=s.n(i);n.a},"1d9d":function(e,t,s){"use strict";var i=s("9e64"),n=s.n(i);n.a},"1dc9":function(e,t,s){},"1e4c":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.isSimple?s("span",{staticClass:"select"},[s("select",{ref:"select",staticClass:"select-input",on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.emitEnter()},change:e.updateValue}},e._l(e.options,(function(t,i){return s("option",{key:i+"-"+t.label+"-"+t.value,domProps:{value:t.value||t.label,selected:e.value===t.value}},[e._v(" "+e._s(e.getOptionLabel(t))+" ")])})),0)]):s("div",{staticClass:"field"},[e.label.length>0?s("label",{staticClass:"label"},[e._v(" "+e._s(e.label)+" ")]):e._e(),s("p",{staticClass:"control"},[s("span",{class:{select:!0}},[s("select",{ref:"select",staticClass:"select-input",attrs:{disabled:e.disabled},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.emitEnter()},change:e.updateValue}},e._l(e.options,(function(t,i){return s("option",{key:i+"-"+t.label+"-"+t.value,domProps:{value:t.value||t.label,selected:e.value===t.value}},[e._v(" "+e._s(e.getOptionLabel(t))+" ")])})),0)])])])},n=[],a=(s("a9e3"),{name:"combobox",props:{label:{default:"",type:String},value:{default:0,type:Number},options:{default:function(){return[]},type:Array},localeKeyPrefix:{default:"",type:String},isSimple:{default:!1,type:Boolean},disabled:{default:!1,type:Boolean}},computed:{},methods:{updateValue:function(){this.$emit("input",parseInt(this.$refs.select.value))},emitEnter:function(){this.$emit("enter",parseInt(this.$refs.select.value))},getOptionLabel:function(e){return this.localeKeyPrefix.length>0?this.$t(this.localeKeyPrefix+e.label.toLowerCase()):e.label}}}),o=a,r=(s("e007"),s("2877")),c=Object(r["a"])(o,i,n,!1,null,"4e1af092",null);t["a"]=c.exports},"1ea9":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{ref:"container",class:{dark:!0,"full-height":!e.isAddingEntity||e.isLoading,"playlist-player":!0}},[e.tempMode?e._e():s("div",{ref:"header",staticClass:"playlist-header flexrow"},[e.playlist&&e.playlist.for_client?s("div",{staticClass:"flexrow-item for-client"},[e._v(" "+e._s(e.$t("playlists.client_playlist"))+" ")]):e._e(),s("span",{staticClass:"flexrow-item playlist-name"},[e._v(" "+e._s(e.playlist.name)+" ")]),e.isCurrentUserManager&&!e.isAddingEntity?s("button-simple",{staticClass:"playlist-button add-entities-button flexrow-item",attrs:{icon:"plus",text:e.addEntitiesText},on:{click:function(t){return e.$emit("show-add-entities")}}}):e._e(),e.isCurrentUserManager?s("button-simple",{staticClass:"edit-button playlist-button flexrow-item",attrs:{title:e.$t("playlists.actions.edit"),icon:"edit"},on:{click:function(t){return e.$emit("edit-clicked")}}}):e._e(),e.isCurrentUserManager?s("button-simple",{staticClass:"delete-button playlist-button flexrow-item",attrs:{title:e.$t("playlists.actions.delete"),icon:"delete"},on:{click:e.showDeleteModal}}):e._e()],1),s("div",{directives:[{name:"show",rawName:"v-show",value:!e.isAddingEntity||e.isLoading,expression:"!isAddingEntity || isLoading"}],ref:"video-container",staticClass:"filler flexrow video-container"},[s("raw-video-player",{directives:[{name:"show",rawName:"v-show",value:e.isCurrentPreviewMovie&&!e.isLoading,expression:"isCurrentPreviewMovie && !isLoading"}],ref:"raw-player",staticClass:"raw-player",attrs:{entities:e.entityList,"is-repeating":e.isRepeating},on:{repeat:e.onVideoRepeated,"metadata-loaded":e.onMetadataLoaded,"entity-change":e.onPlayerEntityChange,"time-update":e.onTimeUpdate,"max-duration-update":e.onMaxDurationUpdate}}),s("raw-video-player",{directives:[{name:"show",rawName:"v-show",value:e.isComparing&&e.isCurrentPreviewMovie&&e.isMovieComparison&&!e.isLoading,expression:"isComparing && isCurrentPreviewMovie && isMovieComparison && !isLoading"}],ref:"raw-player-comparison",staticClass:"raw-player",attrs:{entities:e.entityListToCompare,"is-repeating":e.isRepeating,muted:!0,name:"comparison"}}),s("p",{directives:[{name:"show",rawName:"v-show",value:e.isCurrentPreviewFile&&!e.isLoading,expression:"isCurrentPreviewFile && !isLoading"}],staticClass:"preview-standard-file has-text-centered",style:{width:"100%"}},[s("a",{ref:"preview-file",staticClass:"button",attrs:{href:e.currentPreviewDlPath}},[s("download-icon",{staticClass:"icon"}),s("span",{staticClass:"text"},[e._v(" "+e._s(e.$t("tasks.download_pdf_file",{extension:e.extension}))+" ")])],1)]),s("div",{directives:[{name:"show",rawName:"v-show",value:e.isCurrentPreviewPicture&&!e.isLoading,expression:"isCurrentPreviewPicture && !isLoading"}],ref:"picture-player-wrapper",staticClass:"picture-preview-wrapper"},[s("img",{directives:[{name:"show",rawName:"v-show",value:e.isCurrentPreviewPicture,expression:"isCurrentPreviewPicture"}],ref:"picture-player",staticClass:"picture-preview",attrs:{id:"picture-player",src:e.currentPreviewPath}})]),s("div",{directives:[{name:"show",rawName:"v-show",value:e.isComparing&&!e.isLoading&&!e.isCurrentPreviewFile&&(e.isCurrentPreviewMovie&&!e.isMovieComparison||!e.isCurrentPreviewMovie),expression:"\n        isComparing &&\n        !isLoading &&\n        !isCurrentPreviewFile &&\n        (\n          (isCurrentPreviewMovie && !isMovieComparison) ||\n          !isCurrentPreviewMovie\n        )\n      "}],staticClass:"picture-preview-comparison-wrapper"},[s("img",{directives:[{name:"show",rawName:"v-show",value:e.isComparing&&e.isPictureComparison,expression:"isComparing && isPictureComparison"}],ref:"picture-player-comparison",staticClass:"picture-preview",attrs:{src:e.currentComparisonPreviewPath}}),s("span",{directives:[{name:"show",rawName:"v-show",value:e.isComparing&&!e.isPictureComparison,expression:"isComparing && !isPictureComparison"}],staticClass:"picture-preview"},[e._v(" It's not a picture preview ")])]),e.isLoading?s("div",{staticClass:"loading-wrapper"},[s("spinner")],1):e._e(),s("div",{directives:[{name:"show",rawName:"v-show",value:!e.isCurrentPreviewFile,expression:"!isCurrentPreviewFile"}],ref:"canvas-wrapper",staticClass:"canvas-wrapper"},[s("canvas",{ref:"annotation-canvas",staticClass:"canvas",attrs:{id:"playlist-annotation-canvas"}})]),s("task-info",{ref:"task-info",class:{"flexrow-item":!0,"task-info-column":!0,hidden:e.isCommentsHidden},attrs:{task:e.task,"is-preview":!1}})],1),s("div",{directives:[{name:"show",rawName:"v-show",value:e.isCurrentPreviewMovie&&!e.isAddingEntity,expression:"isCurrentPreviewMovie && !isAddingEntity"}],ref:"playlist-progress",staticClass:"playlist-progress"},[s("div",{staticClass:"video-progress"},[s("progress",{ref:"progress",attrs:{value:"0",min:"0"},on:{click:e.onProgressBarClicked}},[s("span",{ref:"progress-bar",attrs:{id:"progress-bar"}})])])]),s("annotation-bar",{directives:[{name:"show",rawName:"v-show",value:e.isCurrentPreviewMovie&&e.playlist.id&&!e.isAddingEntity,expression:"isCurrentPreviewMovie && playlist.id && !isAddingEntity"}],ref:"playlist-annotation",staticClass:"playlist-annotations",attrs:{annotations:e.annotations,"max-duration-raw":e.maxDurationRaw},on:{"select-annotation":e.loadAnnotation}}),e.playlist.id&&!e.isAddingEntity?s("div",{ref:"button-bar",staticClass:"playlist-footer flexrow"},[s("button-simple",{staticClass:"button playlist-button flexrow-item",attrs:{title:e.$t("playlists.actions.previous_shot"),icon:"back"},on:{click:e.onPlayPreviousEntityClicked}}),s("button-simple",{staticClass:"playlist-button flexrow-item",attrs:{title:e.$t("playlists.actions.next_shot"),icon:"forward"},on:{click:e.onPlayNextEntityClicked}}),s("span",{staticClass:"flexrow-item time-indicator",attrs:{title:e.$t("playlists.actions.entity_index")}},[e._v(" "+e._s(e.entityList.length>0?e.playingEntityIndex+1:0)+" ")]),s("span",{staticClass:"flexrow-item time-indicator"},[e._v(" / ")]),s("span",{staticClass:"flexrow-item time-indicator",attrs:{title:e.$t("playlists.actions.entities_number")}},[e._v(" "+e._s(e.entityList.length)+" ")]),s("div",{staticClass:"separator"}),e.currentEntityPreviewLength>1?s("div",{staticClass:"flexrow flexrow-item"},[s("button-simple",{staticClass:"button playlist-button flexrow-item",attrs:{icon:"left",title:e.$t("playlists.actions.files_previous")},on:{click:e.onPreviousPreviewClicked}}),s("span",{staticClass:"ml05 mr05",attrs:{title:e.$t("playlists.actions.files_position")}},[e._v(" "+e._s(e.currentPreviewIndex+1)+" / "+e._s(e.currentEntityPreviewLength)+" ")]),s("button-simple",{staticClass:"button playlist-button flexrow-item",attrs:{icon:"right",title:e.$t("playlists.actions.files_next")},on:{click:e.onNextPreviewClicked}}),s("a",{staticClass:"button playlist-button flexrow-item",attrs:{href:e.currentPreviewPath,title:e.$t("playlists.actions.see_original_file"),target:"blank"}},[s("arrow-up-right-icon",{staticClass:"icon is-small"})],1)],1):e._e(),e.isCurrentPreviewMovie?s("div",{staticClass:"flexrow flexrow-item"},[e.isPlaying?s("button-simple",{staticClass:"button playlist-button flexrow-item",attrs:{title:e.$t("playlists.actions.pause"),icon:"pause"},on:{click:e.onPlayClicked}}):s("button-simple",{staticClass:"button playlist-button flexrow-item",attrs:{title:e.$t("playlists.actions.play"),icon:"play"},on:{click:e.onPlayClicked}}),3===e.speed?s("button-simple",{staticClass:"button playlist-button flexrow-item",attrs:{title:e.$t("playlists.actions.speed"),text:"x1.00"},on:{click:e.onSpeedClicked}}):2===e.speed?s("button-simple",{staticClass:"button playlist-button flexrow-item",attrs:{title:e.$t("playlists.actions.speed"),text:"x0.50"},on:{click:e.onSpeedClicked}}):s("button-simple",{staticClass:"button playlist-button flexrow-item",attrs:{title:e.$t("playlists.actions.speed"),text:"x0.25"},on:{click:e.onSpeedClicked}}),s("button-simple",{staticClass:"button playlist-button flexrow-item",attrs:{active:e.isRepeating,title:e.$t("playlists.actions.looping"),icon:"repeat"},on:{click:e.onRepeatClicked}}),s("span",{staticClass:"flexrow-item time-indicator",attrs:{title:e.$t("playlists.actions.current_time")}},[e._v(" "+e._s(e.currentTime)+" ")]),s("span",{staticClass:"flexrow-item time-indicator"},[e._v(" / ")]),s("span",{staticClass:"flexrow-item time-indicator",attrs:{title:e.$t("playlists.actions.max_duration")}},[e._v(" "+e._s(e.maxDuration)+" ")]),s("span",{staticClass:"flexrow-item time-indicator mr1",attrs:{title:e.$t("playlists.actions.frame_number")}},[e._v(" ("+e._s(e.currentFrame)+") ")]),s("button-simple",{staticClass:"button playlist-button flexrow-item",attrs:{title:e.$t("playlists.actions.previous_frame"),icon:"left"},on:{click:e.onPreviousFrameClicked}}),s("button-simple",{staticClass:"button playlist-button flexrow-item",attrs:{title:e.$t("playlists.actions.next_frame"),icon:"right"},on:{click:e.onNextFrameClicked}})],1):e._e(),e.isCurrentPreviewMovie||e.isCurrentPreviewPicture?s("div",{staticClass:"flexrow flexrow-item"},[e.taskTypeOptions&&e.taskTypeOptions.length>0?s("button-simple",{class:{"comparison-button":!0,"flexrow-item":!0,"playlist-button":!0,active:e.isComparing},attrs:{title:e.$t("playlists.actions.split_screen"),icon:"compare"},on:{click:e.onCompareClicked}}):e._e(),e.isComparing?s("combobox",{staticClass:"playlist-button flexrow-item comparison-list",attrs:{options:e.taskTypeOptions},model:{value:e.taskTypeToCompare,callback:function(t){e.taskTypeToCompare=t},expression:"taskTypeToCompare"}}):e._e()],1):e._e(),e.isComparing&&e.currentRevisionToCompare&&e.currentComparisonPreviewLength>1?s("div",{staticClass:"flexrow flexrow-item"},[s("button-simple",{staticClass:"button playlist-button flexrow-item",attrs:{icon:"left"},on:{click:e.onPreviousComparisonPictureClicked}}),e._v(" "+e._s(e.currentComparisonPreviewIndex+1)+" / "+e._s(e.currentComparisonPreviewLength)+" "),s("button-simple",{staticClass:"button playlist-button flexrow-item",attrs:{icon:"right"},on:{click:e.onNextComparisonPictureClicked}})],1):e._e(),s("span",{staticClass:"filler"}),e.isCurrentUserManager&&e.tempMode?s("button-simple",{staticClass:"playlist-button flexrow-item",attrs:{title:e.$t("playlists.actions.save_playlist"),icon:"save"},on:{click:function(t){return e.$emit("save-clicked")}}}):e._e(),e.isCurrentUserArtist||!e.isCurrentPreviewMovie&&!e.isCurrentPreviewPicture?e._e():s("div",{staticClass:"flexrow"},[e.isCurrentUserManager&&e.tempMode?s("div",{staticClass:"separator"}):e._e(),s("button-simple",{staticClass:"playlist-button flexrow-item",attrs:{icon:"undo",title:e.$t("playlists.actions.annotation_undo")},on:{click:e.undoLastAction}}),s("button-simple",{staticClass:"playlist-button flexrow-item",attrs:{title:e.$t("playlists.actions.annotation_redo"),icon:"redo"},on:{click:e.redoLastAction}}),s("transition",{attrs:{name:"slide"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.isTyping,expression:"isTyping"}],staticClass:"annotation-tools"},[s("color-picker",{attrs:{isOpen:e.isShowingPalette,color:this.textColor,palette:this.palette},on:{TogglePalette:e.onPickColor,change:e.onChangeTextColor}})],1)]),s("button-simple",{class:{"playlist-button":!0,"flexrow-item":!0,active:e.isTyping},attrs:{title:e.$t("playlists.actions.annotation_text"),icon:"type"},on:{click:e.onTypeClicked}}),s("transition",{attrs:{name:"slide"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.isDrawing,expression:"isDrawing"}],staticClass:"annotation-tools"},[s("pencil-picker",{attrs:{isOpen:e.isShowingPencilPalette,pencil:e.pencil,sizes:this.pencilPalette},on:{"toggle-palette":e.onPickPencil,change:e.onChangePencil}}),s("color-picker",{attrs:{isOpen:e.isShowingPalette,color:this.color,palette:this.palette},on:{TogglePalette:e.onPickColor,change:e.onChangeColor}})],1)]),s("button-simple",{class:{"playlist-button":!0,"flexrow-item":!0,active:e.isDrawing},attrs:{title:e.$t("playlists.actions.annotation_draw"),icon:"pencil"},on:{click:e.onAnnotateClicked}}),s("button-simple",{staticClass:"playlist-button flexrow-item",attrs:{icon:"remove",title:e.$t("playlists.actions.annotation_delete")},on:{click:e.onDeleteClicked}})],1),s("div",{staticClass:"separator"}),e.tempMode?e._e():s("button-simple",{staticClass:"playlist-button flexrow-item",attrs:{title:e.$t("playlists.actions.change_task_type"),icon:"layers"},on:{click:e.showTaskTypeModal}}),s("button-simple",{staticClass:"button playlist-button flexrow-item",attrs:{title:e.$t("playlists.actions.comments"),icon:"comment"},on:{click:e.onCommentClicked}}),s("button-simple",{staticClass:"playlist-button flexrow-item",attrs:{title:e.$t("playlists.actions.entity_list"),icon:"film"},on:{click:e.onFilmClicked}}),e.tempMode?e._e():s("div",{staticClass:"flexrow-item playlist-button",staticStyle:{position:"relative"}},[s("a",{class:{"dl-button":!0,"zip-button":!0,hidden:e.isDlButtonsHidden},attrs:{href:e.zipDlPath}},[e._v(" "+e._s(e.$t("playlists.download_zip"))+" ")]),s("span",{class:{"dl-button":!0,"mp4-button":!0,disabled:!e.isCurrentUserManager,hidden:e.isDlButtonsHidden},on:{click:e.onBuildClicked}},[e._v(" "+e._s(e.$t("playlists.build_mp4"))+" ")]),s("div",{class:{"build-list":!0,hidden:e.isDlButtonsHidden}},[e.playlist.build_jobs&&0!==e.playlist.build_jobs.length?s("div",[s("div",{staticClass:"build-title"},[e._v(" "+e._s(e.$t("playlists.available_build"))+" ")]),e._l(e.playlist.build_jobs,(function(t){return s("div",{key:t.id,staticClass:"flexrow"},["running"===t.status?s("span",[e._v(" "+e._s(e.$t("playlists.building"))+" ")]):"failed"===t.status?s("span",[e._v(" "+e._s(e.$t("playlists.failed"))+" ")]):s("a",{staticClass:"flexrow-item",attrs:{href:e.getBuildPath(t)}},[e._v(" "+e._s(e.formatDate(t.created_at))+" ")]),s("span",{staticClass:"filler"}),"running"===t.status?s("spinner",{staticClass:"build-spinner"}):s("button",{staticClass:"delete-job-button",on:{click:function(s){return e.onRemoveBuildJob(t)}}},[e._v(" x ")])],1)}))],2):s("span",[e._v(" "+e._s(e.$t("playlists.no_build"))+" ")])]),s("button-simple",{staticClass:"playlist-button",attrs:{title:e.$t("playlists.actions.download"),icon:"download"},on:{click:e.toggleDlButtons}})],1),e.isFullScreenEnabled?s("button-simple",{staticClass:"button playlist-button flexrow-item",attrs:{title:e.$t("playlists.actions.fullscreen"),icon:"maximize"},on:{click:e.onFullscreenClicked}}):e._e()],1):e._e(),e.playlist.id?s("div",{ref:"playlisted-entities",class:{"playlisted-entities":!0,flexrow:!0,hidden:e.isEntitiesHidden}},[e.isLoading?s("spinner",{staticClass:"spinner"}):e._l(e.entityList,(function(t,i){return s("div",{key:t.id,staticClass:"flexrow-item has-text-centered playlisted-wrapper"},[s("playlisted-entity",{ref:"entity-"+i,refInFor:!0,attrs:{index:i,entity:t,"is-playing":e.playingEntityIndex===i},on:{"play-click":e.playEntity,"remove-entity":e.removeEntity,"preview-changed":e.onPreviewChanged,"entity-dropped":e.onEntityDropped}})],1)}))],2):e._e(),s("delete-modal",{attrs:{active:e.modals.delete,"is-loading":e.loading.deletePlaylist,"is-error":e.errors.deletePlaylist,text:e.deleteText,"error-text":e.$t("playlists.delete_error")},on:{confirm:e.confirmRemovePlaylist,cancel:e.hideDeleteModal}}),s("select-task-type-modal",{attrs:{active:e.modals.taskType,"task-type-list":e.entityTaskTypes},on:{confirm:e.confirmChangeTaskType,cancel:e.hideTaskTypeModal}})],1)},n=[],a=(s("99af"),s("cb29"),s("4de4"),s("7db0"),s("c740"),s("4160"),s("caad"),s("d81d"),s("a434"),s("b0c0"),s("b64b"),s("d3b7"),s("07ac"),s("25f0"),s("2532"),s("159b"),s("5530")),o=s("7f45"),r=s.n(o),c=s("2f62"),l=s("7a94"),d=s("0a35"),u=s("bcd2"),p=s("8707"),h=s("de40"),m=s("7096"),f=s("992f"),_=s("5f48"),v=s("7f06"),g=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"flexrow wrapper"},[s("drag",{attrs:{"transfer-data":e.entity.id},on:{drag:e.onDragged}},[s("div",{class:{"playlisted-entity":!0,playing:e.isPlaying}},[s("div",{staticClass:"thumbnail-wrapper",on:{click:function(t){return t.preventDefault(),e.onPlayClick(t)}}},[e.isCurrentUserManager?s("span",{staticClass:"remove-button flexrow-item",attrs:{title:e.$t("playlists.remove")},on:{click:function(t){return t.preventDefault(),e.onRemoveClick(t)}}},[s("x-icon")],1):e._e(),s("light-entity-thumbnail",{attrs:{width:"150px",height:"103px","preview-file-id":e.previewFileId}})],1),s("div",{staticClass:"entity-title"},[e._v(" "+e._s(e.entity.parent_name)+" / "+e._s(e.entity.name)+" ")]),e.taskTypeOptions.length>0?s("div",{staticClass:"preview-choice"},[s("combobox",{ref:"task-type-combobox",attrs:{thin:!0,width:150,options:e.taskTypeOptions},model:{value:e.taskTypeId,callback:function(t){e.taskTypeId=t},expression:"taskTypeId"}}),s("combobox",{staticClass:"version-combo",attrs:{thin:!0,width:150,options:e.previewFileOptions},model:{value:e.previewFileId,callback:function(t){e.previewFileId=t},expression:"previewFileId"}})],1):s("div",[e._v(" "+e._s(e.$t("playlists.no_preview"))+" ")])])]),s("drop",{on:{drop:e.onDropped}},[s("div",{ref:"drop-area",staticClass:"drop-area"})])],1)},y=[],b=(s("45fc"),s("a9e3"),s("ceca")),k=s.n(b),w=s("d793"),C={name:"playlisted-entity",components:{Combobox:f["a"],LightEntityThumbnail:w["a"],XIcon:d["W"]},data:function(){return{taskTypeId:null,previewFileId:this.entity.preview_file_id}},props:{index:{default:0,type:Number},isPlaying:{default:!1,type:Boolean},entity:{default:function(){},type:Object}},mounted:function(){this.setCurrentParameters(),this.setListeners()},computed:Object(a["a"])(Object(a["a"])({},Object(c["c"])(["taskTypeMap","isCurrentUserManager"])),{},{dropArea:function(){return this.$refs["drop-area"]},taskTypeOptions:function(){var e=this;return this.entity.preview_files?Object.keys(this.entity.preview_files).map((function(t){return e.taskTypeMap[t]})).sort(k()("priority",1).thenBy("name")).map((function(e){return{label:e.name,value:e.id}})):[]},previewFileOptions:function(){var e=this.entity.preview_files[this.taskTypeId]||[];return e.map((function(e){return{label:"v".concat(e.revision),value:e.id}}))}}),methods:{getTaskTypeIdForPreviewFile:function(e,t){var s=this;return e.find((function(e){var i=s.entity.preview_files[e];return i.some((function(e){return e.id===t}))}))},setCurrentParameters:function(){var e=Object.keys(this.entity.preview_files);e.length>0&&(this.entity.preview_file_id&&(this.taskTypeId=this.getTaskTypeIdForPreviewFile(e,this.entity.preview_file_id)),this.taskTypeId||(this.taskTypeId=e[0]))},onPlayClick:function(){this.$emit("play-click",this.index)},onRemoveClick:function(e){e.preventDefault(),e.stopPropagation(),this.$emit("remove-entity",this.entity)},setListeners:function(){this.dropArea.addEventListener("dragover",this.onDragover),this.dropArea.addEventListener("dragleave",this.onDragleave)},onDragged:function(){},onDragleave:function(){this.dropArea.style.background="transparent",this.dropArea.style.width="15px"},onDragover:function(){this.dropArea.style.width="60px"},onDropped:function(e){this.dropArea.style.background="transparent",this.dropArea.style.width="15px",this.$emit("entity-dropped",{before:this.entity.id,after:e})}},watch:{taskTypeId:function(){var e=this,t=this.entity.preview_files[this.taskTypeId];if(t&&t.length>0){var s=t.some((function(t){return t.id===e.entity.preview_file_id}));this.previewFileId=s?this.entity.preview_file_id:t[0].id}},previewFileId:function(){var e=this,t=null,s=this.entity.preview_files[this.taskTypeId];s&&s.length>0&&(t=s.find((function(t){return t.id===e.previewFileId}))),this.$emit("preview-changed",this.entity,t)}}},S=C,T=(s("9505"),s("2877")),x=Object(T["a"])(S,g,y,!1,null,"4e972f98",null),E=x.exports,P=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{ref:"container",staticClass:"video-wrapper filler flexrow-item"},[s("video",{ref:"player1",attrs:{preload:"auto"},domProps:{muted:e.muted},on:{ended:e.playNext}}),s("video",{ref:"player2",attrs:{preload:"auto"},domProps:{muted:e.muted},on:{ended:e.playNext}})])},O=[],A={name:"raw-video-player",components:{},props:{entities:{type:Array,default:function(){return[]}},muted:{type:Boolean,default:!1},isRepeating:{type:Boolean,default:!1},name:{type:String,default:"main"}},data:function(){return{currentPlayer:this.player1,isPlaying:!1,nextPlayer:this.player2,playingIndex:0}},mounted:function(){this.resetHeight(),this.player1.addEventListener("loadedmetadata",this.emitLoadedEvent),window.addEventListener("resize",this.resetHeight)},beforeDestroy:function(){window.removeEventListener("resize",this.resetHeight),this.player1.removeEventListener("loadedmetadata",this.emitLoadedEvent)},computed:Object(a["a"])(Object(a["a"])({},Object(c["c"])(["currentProduction"])),{},{container:function(){return this.$refs.container},fps:function(){return this.currentProduction.fps||24},player1:function(){return this.$refs.player1},player2:function(){return this.$refs.player2}}),methods:{emitLoadedEvent:function(e){this.$emit("metadata-loaded",e)},getMoviePath:function(e){if("mp4"===e.preview_file_extension){var t=e.preview_file_id;return"/api/movies/originals/preview-files/".concat(t,".mp4")}return""},getWidth:function(){return this.currentPlayer?this.currentPlayer.offsetWidth:0},getHeight:function(){return this.currentPlayer?this.currentPlayer.offsetHeight:0},getVideoRatio:function(){var e=this.getVideoHeight();return e?this.getVideoWidth()/e:0},getVideoWidth:function(){return this.currentPlayer?this.currentPlayer.videoWidth:0},getVideoHeight:function(){return this.currentPlayer?this.currentPlayer.videoHeight:0},clear:function(){this.currentPlayer&&(this.currentPlayer.src="",this.currentPlayer.removeAttribute("src"),this.currentPlayer.load())},resetHeight:function(e){var t=this;this.$nextTick((function(){t.currentPlayer&&(t.currentPlayer.style.height="0px"),t.nextPlayer&&(t.nextPlayer.style.height="0px"),t.container&&(e=e||t.container.offsetHeight,t.currentPlayer&&(t.currentPlayer.style.height="".concat(e,"px")),t.nextPlayer&&(t.nextPlayer.style.height="".concat(e,"px")))}))},getNextIndex:function(e){var t=e+1>=this.entities.length?0:e+1;while(t!==e&&this.entities[t]&&"mp4"!==this.entities[t].preview_file_extension)t++,t>=this.entities.length&&(t=0);return t},getPreviousIndex:function(e){var t=e-1>=0?e-1:this.entities.length-1;while(t!==e&&this.entities[t]&&"mp4"!==this.entities[t].preview_file_extension)t--,t<0&&(t=this.entities.length);return t},goPreviousFrame:function(){if(this.currentPlayer){var e=this.currentPlayer.currentTime-1/this.fps;e<0?this.setCurrentTime(0):this.setCurrentTime(e)}},goNextFrame:function(){if(this.currentPlayer){var e=this.currentPlayer.currentTime+1/this.fps;e>this.currentPlayer.duration?this.setCurrentTime(this.video.duration):this.setCurrentTime(e)}},loadPreviousEntity:function(){this.loadEntity(this.getPreviousIndex(this.currentIndex)),this.$emit("entity-change",this.currentIndex)},loadNextEntity:function(){var e=this.getNextIndex(this.currentIndex);this.loadEntity(e),this.$emit("entity-change",this.currentIndex)},reloadCurrentEntity:function(){this.loadEntity(this.currentIndex)},loadEntity:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(e<this.entities.length){var t=this.getNextIndex(e),s=this.entities[e],i=this.entities[t];this.currentIndex=e,this.currentPlayer=this.player1,this.nextPlayer=this.player2,this.currentPlayer.removeEventListener("loadedmetadata",this.updateMaxDuration),this.currentPlayer.addEventListener("loadedmetadata",this.updateMaxDuration);var n=this.$options.rate||1;this.currentPlayer.src=this.getMoviePath(s),this.nextPlayer.src=this.getMoviePath(i),this.currentPlayer.style.display="block",this.nextPlayer.style.display="none",this.resetHeight(),this.currentPlayer.removeEventListener("timeupdate",this.updateTime),this.currentPlayer.addEventListener("timeupdate",this.updateTime),this.setSpeed(n),this.$emit("entity-change",this.currentIndex)}},pause:function(){this.currentPlayer&&this.currentPlayer.pause(),this.isPlaying=!1},play:function(){var e=this.entities[this.currentIndex];e&&(e.preview_file_id||this.loadNextEntitn(),e=this.entities[this.currentIndex],e.preview_file_id&&(this.currentPlayer&&this.currentPlayer.play(),this.isPlaying=!0))},playNext:function(){if(this.isRepeating)this.currentPlayer.currentTime=0,this.currentPlayer.play(),this.$emit("repeat");else{var e=this.getNextIndex(this.currentIndex);this.currentIndex=e,this.$emit("entity-change",this.currentIndex),this.currentPlayer&&(this.currentPlayer.style.display="none"),this.nextPlayer&&(this.nextPlayer.style.display="block",this.nextPlayer.play()),this.switchPlayers(),this.updateMaxDuration()}},getCurrentTime:function(){return this.currentPlayer?this.currentPlayer.currentTime:0},setCurrentTime:function(e){e=Object(u["d"])(e,this.fps),this.currentPlayer&&(this.currentPlayer.currentTime=e)},switchPlayers:function(){var e=this.getNextIndex(this.currentIndex),t=this.entities[e];this.tmpPlayer=this.currentPlayer,this.currentPlayer=this.nextPlayer,this.nextPlayer=this.tmpPlayer,t&&(this.nextPlayer.src=this.getMoviePath(t)),this.resetHeight(),this.currentPlayer&&(this.currentPlayer.removeEventListener("timeupdate",this.updateTime),this.currentPlayer.addEventListener("timeupdate",this.updateTime)),this.nextPlayer&&this.nextPlayer.removeEventListener("timeupdate",this.updateTime);var s=this.$options.rate||1;this.setSpeed(s)},updateTime:function(e){this.$emit("time-update",e)},updateMaxDuration:function(){this.currentPlayer&&this.$emit("max-duration-update",this.currentPlayer.duration)},setSpeed:function(e){this.$options.rate=e,this.currentPlayer&&(this.currentPlayer.playbackRate=e),this.nextPlayer&&(this.nextPlayer.playbackRate=e)}},watch:{entities:function(){if(this.entities.length>0){this.loadEntity(0),this.pause(),this.setCurrentTime(0);var e=this.entities[this.currentIndex];e&&!e.preview_file_id&&this.loadNextEntity()}setTimeout(this.resetHeight,300)}}},j=A,D=(s("3b44"),Object(T["a"])(j,P,O,!1,null,"261d6e9c",null)),M=D.exports,I=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{modal:!0,"is-active":e.active}},[s("div",{staticClass:"modal-background",on:{click:function(t){return e.$emit("cancel")}}}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box"},[s("h1",{staticClass:"title"},[e._v(" "+e._s(e.$t("playlists.select_task_type"))+" ")]),s("form",{on:{submit:function(e){e.preventDefault()}}},[s("combobox-task-type",{attrs:{"task-type-list":e.taskTypeList,value:e.taskTypeId},on:{input:e.onTaskTypeChanged}})],1),s("p",[e._v(" "+e._s(e.$t("playlists.apply_task_type_change"))+" ")]),s("p",{staticClass:"has-text-right mt2"},[s("a",{class:{button:!0,"is-primary":!0,"is-loading":e.isLoading},on:{click:e.runConfirmation}},[e._v(" "+e._s(e.$t("main.confirmation"))+" ")]),s("button",{staticClass:"button is-link",on:{click:function(t){return e.$emit("cancel")}}},[e._v(" "+e._s(e.$t("main.cancel"))+" ")])]),e.isError?s("p",{staticClass:"error has-text-right info-message"},[e._v(" "+e._s(e.$t("playlist.change_task_type_fails"))+" ")]):e._e()])])])},$=[],L=s("e4fd"),F=s("d065"),N={name:"select-task-type-modal",mixins:[F["a"]],components:{ComboboxTaskType:L["a"]},props:{active:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},isError:{type:Boolean,default:!1},taskTypeList:{type:Array,default:function(){}}},data:function(){return{taskTypeId:""}},methods:{onTaskTypeChanged:function(e){this.taskTypeId=e},runConfirmation:function(){this.$emit("confirm",this.taskTypeId)}},watch:{active:function(){this.taskTypeId=this.taskTypeList[0].id}}},q=N,R=(s("1d53"),Object(T["a"])(q,I,$,!1,null,"253cae1e",null)),B=R.exports,V=s("be83"),z=s("9d94"),U=s("484d"),H={name:"playlist-player",mixins:[U["a"]],components:{AnnotationBar:p["a"],ArrowUpRightIcon:d["a"],ButtonSimple:h["a"],ColorPicker:m["a"],Combobox:f["a"],DownloadIcon:d["n"],DeleteModal:_["a"],PencilPicker:v["a"],PlaylistedEntity:E,RawVideoPlayer:M,SelectTaskTypeModal:B,Spinner:V["a"],TaskInfo:z["a"]},props:{playlist:{type:Object,default:function(){}},entities:{type:Object,default:function(){}},isLoading:{type:Boolean,default:!1},isAddingEntity:{type:Boolean,default:!1},isAssetPlaylist:{type:Boolean,default:!1},tempMode:{type:Boolean,default:!1}},data:function(){return{annotations:[],color:"#ff3860",currentComparisonPreviewIndex:0,currentPreviewIndex:0,currentTime:"00:00.000",currentTimeRaw:0,entityList:[],entityListToCompare:[],fabricCanvas:null,isDlButtonsHidden:!0,isCommentsHidden:!0,isComparing:!1,isDrawing:!1,isEntitiesHidden:!1,isPlaying:!1,isRepeating:!1,isShowingPalette:!1,isShowingPencilPalette:!1,isTyping:!1,maxDuration:"00:00.000",maxDurationRaw:0,palette:["#ff3860","#008732","#5E60BA","#f57f17"],pencil:"big",pencilPalette:["big","medium","small"],playlistToEdit:{},playingEntityIndex:0,speed:3,task:null,taskTypeOptions:[],taskTypeToCompare:null,textColor:"#ff3860",modals:{delete:!1,taskType:!1},loading:{deletePlaylist:!1},errors:{playlists:!1,deletePlaylist:!1},forClientOptions:[{label:this.$t("playlists.for_client"),value:"true"},{label:this.$t("playlists.for_studio"),value:"false"}]}},mounted:function(){var e=this;this.entities?this.entityList=Object.values(this.entities):this.entityList=[],this.playlist.name||(this.isLoading=!0),this.updateProgressBar(),this.picturePlayer&&this.picturePlayer.addEventListener("load",(function(){e.resetPictureCanvas()})),this.$nextTick((function(){window.addEventListener("keydown",e.onKeyDown,!1),window.addEventListener("resize",e.onWindowResize),e.$el.nomousemove||(e.$el.onmousemove=e.onMouseMove),e.setupFabricCanvas(),e.resetCanvas(),e.setPlayerSpeed(1)}))},beforeDestroy:function(){window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("resize",this.onWindowResize),this.$el.onmousemove=null},computed:Object(a["a"])(Object(a["a"])({},Object(c["c"])(["assetTaskTypes","currentEpisode","currentProduction","isCurrentUserArtist","isCurrentUserClient","isCurrentUserManager","isTVShow","taskMap","taskTypeMap","shotTaskTypes","user"])),{},{extension:function(){return this.currentPreview&&this.currentPreview.extension?this.currentPreview.extension:""},isCurrentPreviewMovie:function(){return"mp4"===this.extension},isCurrentPreviewPicture:function(){return["png","gif"].includes(this.extension)},isCurrentPreviewFile:function(){return!this.isCurrentPreviewMovie&&!this.isCurrentPreviewPicture},isMovieComparison:function(){return!!this.currentPreviewToCompare&&"mp4"===this.currentPreviewToCompare.extension},isPictureComparison:function(){return!!this.currentPreviewToCompare&&["png","gif"].includes(this.currentPreviewToCompare.extension)},currentRevisionToCompare:function(){if(!this.currentEntity)return null;var e=this.currentEntity.preview_files[this.taskTypeToCompare];return e&&e.length>0?e[0]:null},currentPreviewToCompare:function(){if(!this.currentEntity)return null;if(this.currentComparisonPreviewIndex>0){var e=this.currentComparisonPreviewIndex-1;return this.currentRevisionToCompare.previews[e]}return this.currentRevisionToCompare},currentPreviewPath:function(){if(this.currentPreview){var e=this.currentPreview.id,t=this.currentPreview.extension;if(this.currentPreviewIndex>0){var s=this.currentPreviewIndex-1,i=this.currentEntity.preview_file_previews[s];e=i.id,t=i.extension}return"/api/pictures/originals/preview-files/".concat(e,".").concat(t)}return""},currentComparisonPreviewPath:function(){if(this.currentPreviewToCompare&&this.isPictureComparison){var e=this.currentPreviewToCompare.extension,t=this.currentPreviewToCompare.id;return"/api/pictures/previews/preview-files/".concat(t,".").concat(e)}return""},currentPreviewOriginalPath:function(){if(!this.currentPreview)return"";var e=this.currentPreview.id,t=this.currentPreview.extension;return"/api/pictures/originals/preview-files/".concat(e,".").concat(t)},currentPreviewDlPath:function(){if(!this.currentPreview)return"";var e=this.currentPreview.id;return"/api/pictures/originals/preview-files/".concat(e,"/download")},currentEntity:function(){return this.entityList[this.playingEntityIndex]},currentPreview:function(){return this.currentEntity?0===this.currentPreviewIndex?{id:this.currentEntity.preview_file_id,extension:this.currentEntity.preview_file_extension,task_id:this.currentEntity.preview_file_task_id,annotations:this.currentEntity.preview_file_annotations||[]}:this.currentEntity.preview_file_previews[this.currentPreviewIndex-1]:null},previousEntityIndex:function(){var e=this.playingEntityIndex-1;return e<0&&(e=this.entityList.length-1),e},nextEntityIndex:function(){var e=this.playingEntityIndex+1;return e>this.entityList.length-1&&(e=0),e},currentEntityPreviewLength:function(){return this.currentEntity&&this.currentEntity.preview_file_previews?this.currentEntity.preview_file_previews.length+1:0},currentComparisonPreviewLength:function(){if(this.currentRevisionToCompare){var e=this.currentRevisionToCompare.previews;return e?e.length+1:0}return 0},isFullScreenEnabled:function(){return!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitSupportsFullscreen||document.webkitFullscreenEnabled||document.createElement("video").webkitRequestFullScreen)},zipDlPath:function(){return"/api/data/playlists/".concat(this.playlist.id,"/download/zip")},currentFrame:function(){return Object(u["a"])(this.currentTimeRaw,this.fps)},deleteText:function(){return this.playlist?this.$t("playlists.delete_text",{name:this.playlist.name}):""},timezone:function(){return this.user.timezone||r.a.tz.guess()},entityTaskTypes:function(){return"asset"===this.playlist.for_entity?this.assetTaskTypes:this.shotTaskTypes},addEntitiesText:function(){return this.isAssetPlaylist?this.$t("playlists.add_assets"):this.$t("playlists.add_shots")},fps:function(){return this.currentProduction.fps||24},container:function(){return this.$refs.container},rawPlayer:function(){return this.$refs["raw-player"]},rawPlayerComparison:function(){return this.$refs["raw-player-comparison"]},picturePlayer:function(){return this.$refs["picture-player"]},canvas:function(){return this.$refs["canvas-wrapper"]},progress:function(){return this.$refs.progress},progressBar:function(){return this.$refs["progress-bar"]},progressCursor:function(){return this.$refs["progress-cursor"]},video:function(){return this.$refs.movie}}),methods:Object(a["a"])(Object(a["a"])({},Object(c["b"])(["changePlaylistType","deletePlaylist","removeBuildJob","runPlaylistBuild"])),{},{getBuildPath:function(e){return"/api/data/playlists/".concat(this.playlist.id,"/jobs/").concat(e.id,"/build/mp4")},formatDate:function(e){var t=r.a.tz(e,"UTC").tz(this.timezone);return t.format("YYYY-MM-DD HH:mm")},formatFrame:u["a"],formatTime:u["b"],getTimelinePosition:function(e,t){if(this.$refs.movie&&this.progress){var s=Math.round(e/this.$refs.movie.duration*this.progress.offsetWidth);return s=s-10*t-5,s<0&&(s=0),s+10>this.progress.offsetWidth&&(s-=5),s}return 0},displayBars:function(){this.$refs["button-bar"]&&(this.$refs.header&&(this.$refs.header.style.opacity=1),this.$refs["button-bar"]&&(this.$refs["button-bar"].style.opacity=1),this.$refs["playlist-progress"]&&(this.$refs["playlist-progress"].style.opacity=1),this.$refs["playlist-annotation"]&&(this.$refs["playlist-annotation"].$el.style.opacity=1),this.container.style.cursor="default")},hideBars:function(){this.$refs.header.style.opacity=0,this.$refs["button-bar"].style.opacity=0,this.$refs["playlist-progress"].style.opacity=0,this.$refs["playlist-annotation"].$el.style.opacity=0},showDeleteModal:function(){this.modals.delete=!0},hideDeleteModal:function(){this.modals.delete=!1},confirmRemovePlaylist:function(){var e=this;this.loading.deletePlaylist=!0,this.errors.deletePlaylist=!1,this.deletePlaylist({playlist:this.playlist,callback:function(t){t&&(e.errors.deletePlaylist=!0),e.loading.deletePlaylist=!1,e.$emit("playlist-deleted"),e.modals.delete=!1}})},updateProgressBar:function(){if(this.progress){var e=this.currentTimeRaw/this.maxDurationRaw;this.progress.value=this.currentTimeRaw,this.progressBar.style.width=Math.floor(100*e)+"%"}},updateTaskPanel:function(){if(this.entityList.length>0){var e=this.entityList[this.playingEntityIndex];this.task=e?this.taskMap[e.preview_file_task_id]:null}else this.task=null},scrollToEntity:function(e){var t=this.$refs["entity-"+e];if(t&&t[0]){var s=t[0].$el,i=this.$refs["playlisted-entities"],n=this.entityList[e];if(this.annotations=n.preview_file_annotations||[],s){var a=30,o=s.getBoundingClientRect(),r=i.getBoundingClientRect(),c=o.right>r.right-a,l=o.left<r.left-a;if(l){var d=o.left-r.left-a;i.scrollLeft=i.scrollLeft+d}else if(c){var u=o.right-r.right+a;i.scrollLeft=i.scrollLeft+u}}}},scrollToRight:function(){this.entityList.length>0&&this.scrollToEntity(this.entityList.length-1)},play:function(){this.rawPlayer.play(),this.isComparing&&this.$refs["raw-player-comparison"].play(),this.isPlaying=this.$refs["raw-player"].isPlaying,this.hideCanvas(),this.clearCanvas()},pause:function(){this.showCanvas();var e=this.$refs["raw-player-comparison"];this.rawPlayer&&this.rawPlayer.pause(),e&&e.pause(),this.isPlaying=!1},playEntity:function(e){var t=this,s=this.entityList[e];if(this.hideCanvas(),this.clearCanvas(),"mp4"===s.preview_file_extension)this.playingEntityIndex=e,this.$nextTick((function(){t.scrollToEntity(t.playingEntityIndex),t.rawPlayer.loadEntity(e),t.annotations=s.preview_file_annotations||[],t.isComparing&&t.$refs["raw-player-comparison"].loadEntity(e),t.isPlaying&&(t.rawPlayer.play(),t.isComparing&&t.$refs["raw-player-comparison"].play())}));else{this.playingEntityIndex=e;var i=this.getAnnotation(0);this.loadAnnotation(i)}this.scrollToEntity(this.playingEntityIndex)},goPreviousFrame:function(){this.clearCanvas(),this.rawPlayer.goPreviousFrame(),this.isComparing&&this.$refs["raw-player-comparison"].setCurrentTime(this.rawPlayer.getCurrentTime());var e=this.getAnnotation(this.rawPlayer.getCurrentTime());e&&this.loadAnnotation(e)},goNextFrame:function(){this.clearCanvas(),this.rawPlayer.goNextFrame(),this.isComparing&&this.$refs["raw-player-comparison"].setCurrentTime(this.rawPlayer.getCurrentTime());var e=this.getAnnotation(this.rawPlayer.getCurrentTime());e&&this.loadAnnotation(e)},removeEntity:function(e){var t=this;this.$emit("remove-entity",e),this.$options.silent=!0;var s=this.entityList.findIndex((function(t){return t.id===e.id}));this.entityList.splice(s,1),setTimeout((function(){t.$options.silent=!1}),1e3)},setFullScreen:function(){this.container.requestFullscreen?this.container.requestFullscreen():this.container.mozRequestFullScreen?this.container.mozRequestFullScreen():this.container.webkitRequestFullScreen?this.container.webkitRequestFullScreen():this.container.msRequestFullscreen&&this.container.msRequestFullscreen(),this.container.setAttribute("data-fullscreen",!0),document.activeElement.blur()},exitFullScreen:function(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen(),this.container.setAttribute("data-fullscreen",!1),document.activeElement.blur()},isFullScreen:function(){return!!(document.fullScreen||document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement||document.fullscreenElement)},onProgressBarClicked:function(e){this.clearCanvas();var t=(e.pageX-this.progress.offsetLeft)/this.progress.offsetWidth,s=t*this.maxDurationRaw;this.rawPlayer.setCurrentTime(s),this.isComparing&&this.$refs["raw-player-comparison"].setCurrentTime(s)},onPreviousFrameClicked:function(){this.goPreviousFrame()},onNextFrameClicked:function(){this.goNextFrame()},onPlayPreviousEntityClicked:function(){this.playEntity(this.previousEntityIndex),this.isCurrentPreviewMovie&&(this.rawPlayer.loadPreviousEntity(),this.isComparing&&this.$refs["raw-player-comparison"].loadPreviousEntity(),this.isPlaying&&this.play())},onPlayNextEntityClicked:function(){this.playEntity(this.nextEntityIndex),this.isCurrentPreviewMovie&&(this.rawPlayer.loadNextEntity(),this.isComparing&&this.$refs["raw-player-comparison"].loadNextEntity(),this.isPlaying&&this.play())},onPlayPauseClicked:function(){this.isPlaying?this.pause():this.play()},onVideoRepeated:function(){this.rawPlayerComparison&&this.rawPlayerComparison.setCurrentTime(0)},onRepeatClicked:function(){this.isRepeating=!this.isRepeating},onFullscreenClicked:function(){var e=l["fabric"].IText.prototype.initHiddenTextarea;this.isFullScreen()?(l["fabric"].util.object.extend(l["fabric"].IText.prototype,{initHiddenTextarea:function(){e.call(this),l["fabric"].document.body.appendChild(this.hiddenTextarea)}}),this.exitFullScreen()):(l["fabric"].util.object.extend(l["fabric"].IText.prototype,{initHiddenTextarea:function(){e.call(this),this.canvas.wrapperEl.appendChild(this.hiddenTextarea)}}),this.setFullScreen())},onKeyDown:function(e){this.displayBars(),["INPUT","TEXTAREA"].includes(e.target.tagName)||(46===e.keyCode&&this.fabricCanvas?this.deleteSelection():37===e.keyCode?(e.preventDefault(),e.stopPropagation(),this.goPreviousFrame()):39===e.keyCode?(e.preventDefault(),e.stopPropagation(),this.goNextFrame()):32===e.keyCode?(e.preventDefault(),e.stopPropagation(),this.onPlayPauseClicked()):e.altKey&&74===e.keyCode?(e.preventDefault(),e.stopPropagation(),this.onPlayPreviousEntityClicked()):e.altKey&&75===e.keyCode?(e.preventDefault(),e.stopPropagation(),this.onPlayNextEntityClicked()):e.ctrlKey&&e.altKey&&68===e.keyCode?this.onAnnotateClicked():e.ctrlKey&&90===e.keyCode?this.undoLastAction():e.altKey&&82===e.keyCode&&this.redoLastAction())},onWindowResize:function(){var e=this,t=(new Date).getTime();this.lastCall=this.lastCall||0,t-this.lastCall>600&&(this.lastCall=t,setTimeout((function(){e.resetHeight(),e.resetCanvas().then((function(){e.reloadAnnotations()}))}),200))},reloadAnnotations:function(){var e=this;if(this.annotations){var t=this.annotations.map((function(e){return Object(a["a"])({},e)}));this.annotations=[],setTimeout((function(){e.annotations=t,e.reloadCurrentAnnotation()}),200)}},onFilmClicked:function(){var e=this;this.isEntitiesHidden=!this.isEntitiesHidden,this.$nextTick((function(){e.resetHeight(),e.reloadAnnotations(),e.scrollToEntity(e.playingEntityIndex)}))},reloadCurrentAnnotation:function(){var e=this.getAnnotation(this.currentTimeRaw);e&&this.loadAnnotation(e)},onCommentClicked:function(){var e=this,t=this.$refs["video-container"].offsetHeight;this.isCommentsHidden=!this.isCommentsHidden,this.isCommentsHidden||(this.$refs["task-info"].$el.style.height="".concat(t,"px")),this.$nextTick((function(){e.$refs["task-info"].focusCommentTextarea(),e.resetHeight(),e.reloadAnnotations()}))},onCompareClicked:function(){this.isComparing=!this.isComparing},onPlayClicked:function(){this.rawPlayer.isPlaying?this.pause():this.play()},onSpeedClicked:function(){this.speed=this.speed+1>3?1:this.speed+1;var e=1;2===this.speed&&(e=.5),1===this.speed&&(e=.25),this.setPlayerSpeed(e)},setPlayerSpeed:function(e){this.rawPlayer.setSpeed(e),this.rawPlayerComparison.setSpeed(e)},onTimeUpdate:function(){this.rawPlayer&&this.rawPlayer.currentPlayer?this.currentTimeRaw=this.rawPlayer.currentPlayer.currentTime:this.currentTimeRaw=0,this.currentTime=this.formatTime(this.currentTimeRaw),this.updateProgressBar()},onMaxDurationUpdate:function(e){this.maxDurationRaw=e,this.maxDuration=this.formatTime(e),this.progress&&this.progress.setAttribute("max",this.maxDurationRaw)},onMouseMove:function(){var e=this,t=this.$refs["button-bar"];t&&1!==t.style.opacity&&this.displayBars();var s=this.isFullScreen()&&this.isEntitiesHidden&&this.isCommentsHidden;s&&(this.timer&&clearTimeout(this.timer),this.timer=setTimeout((function(){var t=e.isFullScreen()&&e.isEntitiesHidden&&e.isCommentsHidden;t&&e.hideBars()}),2e3))},onPlayerEntityChange:function(e){if(this.isCurrentPreviewMovie&&(this.playingEntityIndex=e,this.isComparing)){var t=this.rawPlayerComparison.currentIndex;t<e?(this.rawPlayerComparison.playNext(),this.rawPlayerComparison.setCurrentTime(0)):(this.rawPlayerComparison.setCurrentTime(0),this.rawPlayerComparison.play())}this.$options.silent||this.scrollToEntity(this.playingEntityIndex)},onPreviewChanged:function(e,t){this.pause();var s=this.entityList.find((function(t){return t.id===e.id}));s.preview_file_id=t.id,s.preview_file_task_id=t.task_id,s.preview_file_extension=t.extension,s.preview_file_annotations=t.annotations,this.rawPlayer&&this.rawPlayer.reloadCurrentEntity(),this.$emit("preview-changed",e,t.id),this.updateTaskPanel()},onEntityDropped:function(e){var t=this.$refs["playlisted-entities"],s=t.scrollLeft,i=this.entityList.find((function(t){return t.id===e.after})),n=this.entityList.findIndex((function(t){return t.id===e.after})),a=this.entityList.findIndex((function(t){return t.id===e.before}));n>=0&&a>=0&&(this.entityList.splice(n,1),n>a&&a++,this.entityList.splice(a,0,i)),this.$nextTick((function(){t.scrollLeft=s})),this.$emit("order-change",e)},resetHeight:function(){var e=this;this.$nextTick((function(){var t=window.innerHeight-90;e.tempMode||(t=e.container?e.container.offsetHeight:0),t-=e.$refs.header?e.$refs.header.offsetHeight:0,e.$refs["playlist-progress"]&&(t-=e.$refs["playlist-progress"].offsetHeight),e.$refs["button-bar"]&&(t-=e.$refs["button-bar"].offsetHeight),e.$refs["playlisted-entities"]&&(t-=e.$refs["playlisted-entities"].offsetHeight),e.$refs["playlist-annotation"]&&(t-=e.$refs["playlist-annotation"].$el.offsetHeight),e.$refs["video-container"]&&(e.$refs["video-container"].style.height="".concat(t,"px")),e.isCommentsHidden||(e.$refs["task-info"].$el.style.height="".concat(t,"px")),e.rawPlayer&&e.rawPlayer.resetHeight(t),e.isComparing&&(e.$refs["raw-player-comparison"].resetHeight(t),e.$refs["picture-preview-wrapper"]&&(e.$refs["picture-preview-wrapper"].style.height="".concat(t,"px"))),e.$nextTick((function(){e.resetCanvas(),e.updateProgressBar()}))}))},resetCanvas:function(){var e=this;return this.clearCanvas(),this.resetCanvasSize().then((function(){return e.fabricCanvas&&e.fabricCanvas.renderAll(),Promise.resolve(e.fabricCanvas)}))},resetCanvasSize:function(){var e=this;return this.$nextTick().then((function(){if(e.isCurrentPreviewMovie&&e.fabricCanvas){if(e.canvas){var t=e.rawPlayer.getVideoRatio(),s=e.rawPlayer.$el.offsetWidth,i=e.rawPlayer.$el.offsetHeight,n=t?i*t:s;if(s>n){var a=Math.round((s-n)/2);e.canvas.style.left=a+"px",e.canvas.style.top="0px",e.fabricCanvas.setDimensions({width:n,height:i})}else{var o=t?Math.round(s/t):i,r=Math.round((i-o)/2);e.canvas.style.left="0px",e.canvas.style.top=r+"px",e.fabricCanvas.setDimensions({width:s,height:o})}}}else if(e.isCurrentPreviewPicture&&e.fabricCanvas&&e.canvas){var c=e.picturePlayer.naturalWidth,l=e.picturePlayer.naturalHeight,d=c/l,u=e.$refs["video-container"].offsetWidth;e.isCommentsHidden||(u-=450);var p=e.$refs["video-container"].offsetHeight;e.isComparing&&(u=Math.round(u/2));var h=d?p*d:u,m=d?Math.round(u/d):p,f=0,_=0;if(e.canvas.style.top="0px",e.canvas.style.left="0px",u>c)_=Math.round((u-c)/2),e.canvas.style.left=_+"px",h=c;else if(u>h){var v=Math.round((u-h)/2);e.canvas.style.left=v+"px"}else h=u;if(p>l)f=Math.round((p-l)/2),e.canvas.style.top=f+"px",m=l;else if(p>m)f=Math.round((p-m)/2),e.canvas.style.top=f+"px";else{m=p,h=Math.round(m*d);var g=Math.round((u-h)/2);e.canvas.style.left=g+"px"}e.fabricCanvas.setDimensions({width:h,height:m})}return Promise.resolve()}))},rebuildComparisonOptions:function(){var e=this,t=Object.values(this.entities);if(t.length>0){var s=Object.keys(t[0].preview_files);t.forEach((function(e){var t=Object.keys(e.preview_files);s=s.filter((function(e){return t.includes(e)}))})),this.taskTypeOptions=s.map((function(t){return{label:e.taskTypeMap[t].name,value:e.taskTypeMap[t].id}})),this.taskTypeOptions.length>0&&(this.taskTypeToCompare=this.taskTypeOptions[0].value)}else this.taskTypeOptions=[]},rebuildEntityListToCompare:function(){var e=this;this.taskTypeToCompare?this.entityListToCompare=this.entityList.filter((function(t){return t.preview_files[e.taskTypeToCompare]})).map((function(t){var s=t.preview_files[e.taskTypeToCompare][0];return{preview_file_id:s.id,preview_file_extension:"mp4"}})):this.buildEntityListToCompare=[]},resetComparison:function(){var e=this;this.rebuildEntityListToCompare(),this.$nextTick((function(){e.pause();var t=e.$refs["raw-player-comparison"];t.loadEntity(e.playingEntityIndex),t.setCurrentTime(e.currentTimeRaw)}))},clearCanvas:function(){this.fabricCanvas&&this.fabricCanvas.clear()},onAnnotateClicked:function(){this.showCanvas(),this.isDrawing?(this.fabricCanvas.isDrawingMode=!1,this.isDrawing=!1):(this.isTyping=!1,this.fabricCanvas&&(this.fabricCanvas.isDrawingMode=!0),this.isDrawing=!0)},onTypeClicked:function(){var e=this.canvas.getElementsByClassName("upper-canvas")[0];this.showCanvas(),this.isTyping?(this.isTyping=!1,e.removeEventListener("dblclick",this.addText)):(this.fabricCanvas.isDrawingMode=!1,this.isDrawing=!1,this.isTyping=!0,e.addEventListener("dblclick",this.addText))},showCanvas:function(){this.canvas&&(this.canvas.style.display="block")},hideCanvas:function(){this.canvas&&(this.canvas.style.display="none")},loadAnnotation:function(e){var t=this;if(e){this.pause();var s=e&&e.time||0;if(this.rawPlayer||this.picturePlayer){this.rawPlayer&&(this.rawPlayer.setCurrentTime(s),this.isComparing&&this.$refs["raw-player-comparison"].setCurrentTime(s),this.currentTimeRaw=s,this.updateProgressBar()),this.fabricCanvas.isDrawingMode=!1,this.isDrawing=!1,this.clearCanvas();var i=1,n=1;e.width&&(i=this.fabricCanvas.width/e.width,n=this.fabricCanvas.width/e.width),e.height&&(n=this.fabricCanvas.height/e.height),e.drawing.objects.forEach((function(s){var o={left:s.left*i,top:s.top*n,fill:"transparent",stroke:s.stroke,strokeWidth:s.strokeWidth,radius:s.radius,width:s.width,height:s.height,scaleX:s.scaleX*i,scaleY:s.scaleY*n};if("path"===s.type){var r=1;s.canvasWidth&&(r=e.width/t.fabricCanvas.width);var c=new l["fabric"].Path(s.path,Object(a["a"])(Object(a["a"])({},o),{},{strokeWidth:s.strokeWidth*r,canvasWidth:s.canvasWidth}));c.setControlsVisibility({mt:!1,mb:!1,ml:!1,mr:!1,bl:!1,br:!1,tl:!1,tr:!1,mtr:!1}),t.fabricCanvas.add(c)}else if("i-text"===s.type||"text"===s.type){var d=new l["fabric"].Text(s.text,Object(a["a"])(Object(a["a"])({},o),{},{fill:s.fill,left:s.left*i,top:s.top*n,fontFamily:s.fontFamily,fontSize:s.fontSize}));d.setControlsVisibility({mt:!1,mb:!1,ml:!1,mr:!1,bl:!1,br:!1,tl:!1,tr:!1,mtr:!1}),t.fabricCanvas.add(d)}}))}}},saveAnnotations:function(){var e=Object(u["d"])(this.currentTimeRaw,this.fps)||0;if(this.isCurrentPreviewPicture&&(e=0),this.annotations){var t=this.getAnnotation(e),s=this.getNewAnnotations(e,t),i=this.entityList[this.playingEntityIndex];if(i){var n={id:i.preview_file_id,task_id:i.preview_file_task_id,annotations:i.preview_file_annotations};if(this.isCurrentPreviewPicture&&this.currentPreviewIndex>0){var a=this.currentPreviewIndex-1,o=this.currentEntity.preview_file_previews[a];n={id:o.id,task_id:i.preview_file_task_id,annotations:o.annotations}}this.isCurrentUserArtist||this.$emit("annotationchanged",{preview:n,annotations:s})}}},onDeleteClicked:function(){this.deleteSelection()},getAnnotation:function(e){if(this.annotations||(this.annotations=this.currentEntity.preview_file_annotations),e=Object(u["d"])(e,this.fps),this.annotations){var t=this.annotations.find((function(t){return t.time===e}));return t||(t=this.annotations.find((function(t){return t.time>e-.2&&t.time<e+.2}))),!t&&this.isCurrentPreviewPicture&&this.annotations.length>0&&(t=this.annotations[0],t.time=0),t}return null},toggleDlButtons:function(){this.isDlButtonsHidden=!this.isDlButtonsHidden},onBuildClicked:function(){this.isCurrentUserManager&&this.runPlaylistBuild(this.playlist)},onRemoveBuildJob:function(e){e.playlist_id=this.playlist.id,this.removeBuildJob(e)},onMetadataLoaded:function(e){var t=this;this.$nextTick((function(){t.resetCanvasSize()}))},showTaskTypeModal:function(){this.modals.taskType=!0},hideTaskTypeModal:function(){this.modals.taskType=!1},confirmChangeTaskType:function(e){this.$emit("task-type-changed",e),this.modals.taskType=!1},clearPlayer:function(){this.rawPlayer&&this.rawPlayer.clear(),this.isComparing&&this.$refs["raw-player-comparison"].clear(),this.maxDurationRaw=0,this.maxDuration="00:00.000"},onPreviousPreviewClicked:function(){var e=this.currentPreviewIndex-1;this.currentPreviewIndex=e<0?this.currentEntityPreviewLength-1:e},onNextPreviewClicked:function(){var e=this.currentPreviewIndex+1;this.currentPreviewIndex=e>this.currentEntityPreviewLength-1?0:e},onPreviousComparisonPictureClicked:function(){var e=this.currentComparisonPreviewIndex-1;this.currentComparisonPreviewIndex=e<0?this.currentComparisonPreviewLength-1:e},onNextComparisonPictureClicked:function(){var e=this.currentComparisonPreviewIndex+1;this.currentComparisonPreviewIndex=e>this.currentComparisonPreviewLength-1?0:e},resetPictureCanvas:function(){var e=this;this.annotations=this.currentPreview.annotations,this.resetCanvas().then((function(){e.isCurrentPreviewPicture&&e.loadAnnotation(e.getAnnotation(0))}))}}),watch:{currentPreviewIndex:function(){var e=this;this.resetUndoStacks(),this.$nextTick((function(){e.isCurrentPreviewPicture?e.resetPictureCanvas():e.resetCanvas()}))},playingEntityIndex:function(){var e=this;this.updateTaskPanel(),this.resetUndoStacks(),this.currentPreviewIndex=0,this.currentComparisonPreviewIndex=0,this.currentEntity&&(this.annotations=this.currentEntity.preview_file_annotations||[]),this.$nextTick((function(){e.resetCanvas().then((function(){e.isCurrentPreviewPicture||e.loadAnnotation(e.getAnnotation(0))}))}))},isComparing:function(){var e=this;this.isComparing&&this.resetComparison(),this.$nextTick().then((function(){e.resetPictureCanvas(),e.resetCanvas(),e.reloadAnnotations()}))},taskTypeToCompare:function(){this.isComparing&&this.resetComparison()},entities:function(){var e=this;this.currentPreviewIndex=0,this.currentComparisonPreviewuIndex=0,this.entityList=Object.values(this.entities),this.playingEntityIndex=0,this.pause(),this.rawPlayer&&this.rawPlayer.setCurrentTime(0),this.currentTimeRaw=0,this.updateProgressBar(),this.updateTaskPanel(),this.rebuildComparisonOptions(),this.clearCanvas(),this.annotations=[],0===this.entityList.length&&this.clearPlayer(),this.resetHeight(),this.resetCanvas().then((function(){e.isCurrentPreview&&(e.annotations=e.currentEntity.preview_file_annotations,e.loadAnnotation(e.getAnnotation(0)))}))},playlist:function(){var e=this;this.forClient=Boolean(this.playlist.for_client).toString(),this.$nextTick((function(){e.updateProgressBar(),e.clearCanvas()}))},isAddingEntity:function(){var e=this;this.$nextTick((function(){e.updateProgressBar()}))}}},G=H,W=(s("1bb5"),Object(T["a"])(G,i,n,!1,null,"028f83d7",null));t["a"]=W.exports},"1f01":function(e,t,s){},"1f87":function(e,t,s){},"1fe2":function(e,t,s){"use strict";var i=s("da36"),n=s.n(i);n.a},"1ffc":function(e,t,s){"use strict";var i=s("df02"),n=s.n(i);n.a},2:function(e,t){},2e3:function(e,t,s){},2017:function(e,t,s){"use strict";s.d(t,"c",(function(){return a})),s.d(t,"i",(function(){return o})),s.d(t,"h",(function(){return r})),s.d(t,"g",(function(){return c})),s.d(t,"f",(function(){return l})),s.d(t,"a",(function(){return d})),s.d(t,"e",(function(){return u})),s.d(t,"d",(function(){return p})),s.d(t,"b",(function(){return h})),s.d(t,"j",(function(){return m}));s("99af"),s("4de4"),s("4160"),s("c975"),s("d81d"),s("13d5"),s("b0c0"),s("d3b7"),s("ac1f"),s("6062"),s("3ca3"),s("5319"),s("1276"),s("159b"),s("ddb0");var i=s("b85c"),n=s("2909"),a=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],s={},i={};return e.forEach((function(e){var n;e&&(n=e.name?t?e.name.split(" "):[e.name]:[],v(s,i,e,n))})),s},o=function(e){var t=Object(n["a"])(e).sort((function(e,t){return e.name.localeCompare(t.name)}));return a(t,!1)},r=function(e){var t={};return e.forEach((function(e){var s=e.short_name.toLowerCase();t[s]=e})),t},c=function(e){var t={},s={};return e.forEach((function(e){var i=e.full_entity_name.replace(/_/g," ").replace(/-/g," "),n=i.split(" ").concat([e.task_type_name,e.task_status_short_name,e.project_name]);v(t,s,e,n)})),t},l=function(e,t){var s={},i={};return e.forEach((function(e){var n=e.entity_name.replace(/_/g," ").replace(/-/g," "),a=n.split(" ").concat([e.task_status_short_name]);e.assignees.forEach((function(e){var s=t[e];s&&a.push(s.first_name,s.last_name)})),v(s,i,e,a)})),s},d=function(e){var t={},s={};return e.forEach((function(e){var i=e.name.replace(/_/g," ").replace(/-/g," "),n=e.asset_type_name.split(" "),a=i.split(" ").concat(n).concat([e.name]);v(t,s,e,a)})),t},u=function(e){var t={},s={};return e.forEach((function(e){var i=[e.name,e.sequence_name,e.episode_name];v(t,s,e,i)})),t},p=function(e){var t={},s={};return e.forEach((function(e){var i=[e.name,e.episode_name];v(t,s,e,i)})),t},h=function(e){var t={},s={};return e.forEach((function(e){var i=[e.name];v(t,s,e,i)})),t},m=function(e,t){t||(t=[]);var s=t.map((function(t){return _(e,t)})).filter((function(e){return null!==e}));return s.length>0?s.reduce(f,Object(n["a"])(s[0])):null},f=function(e,t){return e.filter((function(e){return t.has(e)}))},_=function(e,t){return t&&t.indexOf("=")<0?e[t.toLowerCase()]?new Set(e[t.toLowerCase()]):new Set([]):null},v=function(e,t,s,n){var a,o=Object(i["a"])(n);try{for(o.s();!(a=o.n()).done;){var r=a.value,c="";if(r){var l,d=Object(i["a"])(r);try{for(d.s();!(l=d.n()).done;){var u=l.value;c+=u.toLowerCase(),void 0===e[c]&&(e[c]=[],t[c]={}),t[c][s.id]||(e[c].push(s),t[c][s.id]=!0)}}catch(p){d.e(p)}finally{d.f()}}}}catch(p){o.e(p)}finally{o.f()}return e}},2229:function(e,t,s){"use strict";s.d(t,"b",(function(){return a})),s.d(t,"m",(function(){return o})),s.d(t,"k",(function(){return r})),s.d(t,"h",(function(){return c})),s.d(t,"o",(function(){return l})),s.d(t,"e",(function(){return d})),s.d(t,"i",(function(){return u})),s.d(t,"n",(function(){return p})),s.d(t,"g",(function(){return h})),s.d(t,"f",(function(){return m})),s.d(t,"d",(function(){return f})),s.d(t,"c",(function(){return _})),s.d(t,"p",(function(){return v})),s.d(t,"j",(function(){return g})),s.d(t,"a",(function(){return y})),s.d(t,"l",(function(){return b}));s("b0c0");var i=s("ceca"),n=s.n(i),a=function(e){return e.sort(n()("canceled").thenBy((function(e,t){return e.asset_type_name.localeCompare(t.asset_type_name)})).thenBy((function(e,t){return e.name.localeCompare(t.name)})))},o=function(e){return e.sort(n()("canceled").thenBy(C).thenBy((function(e,t){return e.sequence_name.localeCompare(t.sequence_name)})).thenBy((function(e,t){return e.name.localeCompare(t.name)})))},r=function(e){return e.sort(n()("canceled").thenBy((function(e,t){return e.episode_name?e.episode_name.localeCompare(t.episode_name):0})).thenBy((function(e,t){return e.name.localeCompare(t.name)})))},c=function(e){return e.sort((function(e,t){return e.project_status_name===t.project_status_name?e.name.localeCompare(t.name):-1*e.project_status_name.localeCompare(t.project_status_name)}))},l=function(e,t){return e.sort(n()("priority",-1).thenBy((function(e,t){return e.project_name?e.project_name.localeCompare(t.project_name):0})).thenBy((function(e,s){var i=t[e.task_type_id],n=t[s.task_type_id];return i.name.localeCompare(n.name)})).thenBy((function(e,t){return e.full_entity_name?e.full_entity_name.localeCompare(t.full_entity_name):e.entity_name.localeCompare(t.entity_name)})))},d=function(e){return e.sort(n()("pinned",-1).thenBy("created_at",-1))},u=function(e){return e.sort(n()("position").thenBy("created_at"))},p=function(e){return e.sort(n()("for_shots").thenBy("priority").thenBy("name"))},h=function(e){return e.sort(n()("created_at",-1).thenBy((function(e,t){return e.name.localeCompare(t.name)})))},m=function(e){return e.sort(n()("active",-1).thenBy((function(e,t){return e.first_name?e.first_name.localeCompare(t.first_name):-1})).thenBy((function(e,t){return e.last_name?e.last_name.localeCompare(t.last_name):-1})))},f=function(e){return e.sort((function(e,t){return e.name.localeCompare(t.name)}))},_=function(e){return e.sort(n()("created_at",-1))},v=function(e,t){return e.sort((function(e,s){var i=t[e],n=t[s];return i.priority===n.priority?i.name.localeCompare(n.name):i.priority>n.priority?1:-1}))},g=function(e,t){return e.sort(n()("for_shots").thenBy("priority").thenBy("name").thenBy("start_date"))},y=function(e,t,s,i,o){if(t&&t.length>0){var r=t[0],c=w(o,r);"metadata"===r.type&&(c=k(r)),e=e.sort(n()("canceled").thenBy(c).thenBy((function(e,t){return e.asset_type_name.localeCompare(t.asset_type_name)})).thenBy((function(e,t){return e.name.localeCompare(t.name)})))}else e=a(e);return e},b=function(e,t,s,i,a){if(t&&t.length>0){var r=t[0],c=w(a,r);"metadata"===r.type&&(c=k(r)),e=e.sort(n()("canceled").thenBy(c).thenBy(C).thenBy((function(e,t){return e.sequence_name.localeCompare(t.sequence_name)})).thenBy((function(e,t){return e.name.localeCompare(t.name)})))}else e=o(e);return e},k=function(e){return function(t,s){var i=t.data[e.column]?t.data[e.column]:"",n=s.data[e.column]?s.data[e.column]:"";return i?n?i.localeCompare(n):-1:1}},w=function(e,t){return function(s,i){var n=s.validations[t.column],a=i.validations[t.column];if(!n)return-1;if(!a)return 1;var o=e[n].task_status_short_name,r=e[a].task_status_short_name;return o.localeCompare(r)}},C=function(e,t){return e.episode_name?e.episode_name.localeCompare(t.episode_name):0}},2254:function(e,t,s){"use strict";var i=s("0555"),n=s.n(i);n.a},2575:function(e,t,s){},"271f":function(e,t,s){"use strict";var i=s("187f"),n=s.n(i);n.a},"274f":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.productionId?s("router-link",{attrs:{to:e.taskTypePath}},[s("span",{staticClass:"tag task-type-name",style:{"border-left":"4px solid "+e.color}},[e._v(" "+e._s(e.taskType.name)+" ")])]):s("div",{staticClass:"tag task-type-name no-link",style:{"border-left":"4px solid "+e.color}},[e._v(" "+e._s(e.taskType.name)+" ")])},n=[],a=(s("b0c0"),s("5530")),o=s("2f62"),r={name:"task-type-name",components:{},props:{taskType:{type:Object,default:null},productionId:{type:String,default:null}},computed:Object(a["a"])(Object(a["a"])({},Object(o["c"])([])),{},{color:function(){return"#000000"===this.taskType.color.toUpperCase()?"$grey-strong":this.taskType.color},taskTypePath:function(){var e={name:"task-type",params:{production_id:this.productionId,task_type_id:this.taskType.id,type:this.taskType.for_shots?"shots":"assets"}};return(this.taskType.episode_id||this.$route.params.episode_id)&&(e.name="episode-task-type",e.params.episode_id=this.taskType.episode_id||this.$route.params.episode_id),e}}),methods:Object(a["a"])({},Object(o["b"])([]))},c=r,l=(s("e95c"),s("2877")),d=Object(l["a"])(c,i,n,!1,null,"51afc9ee",null);t["a"]=d.exports},2833:function(e,t,s){"use strict";var i=s("a5fe"),n=s.n(i);n.a},"29f8":function(e,t,s){},"2a44":function(e,t,s){},"2b21":function(e,t,s){"use strict";var i=s("2000"),n=s.n(i);n.a},"2b2c":function(e,t,s){},"2c1a":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{modal:!0,"delete-modal":!0,"is-active":e.active}},[s("div",{staticClass:"modal-background",on:{click:function(t){return e.$emit("cancel")}}}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box"},[s("p",{staticClass:"text"},[e._v(e._s(e.text))]),s("p",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.userLockText,expression:"userLockText"}],ref:"confirmation-name",staticClass:"input",attrs:{type:"text"},domProps:{value:e.userLockText},on:{input:function(t){t.target.composing||(e.userLockText=t.target.value)}}})]),e.isError?s("p",{staticClass:"is-danger"},[e._v(e._s(e.errorText))]):e._e(),s("div",{staticClass:"has-text-right flexrow"},[s("div",{staticClass:"filler"}),e.selectionOption?s("combobox",{staticClass:"flexrow-item",attrs:{options:e.selectionOptions,"with-margin":!1},model:{value:e.selectionOnly,callback:function(t){e.selectionOnly=t},expression:"selectionOnly"}}):e._e(),s("a",{class:{button:!0,"is-danger":!0,"is-loading":e.isLoading},attrs:{disabled:e.isLocked},on:{click:function(t){return e.$emit("confirm","true"===e.selectionOnly)}}},[e._v(" "+e._s(e.$t("main.confirmation"))+" ")]),s("button",{staticClass:"button is-link",on:{click:function(t){return e.$emit("cancel")}}},[e._v(" "+e._s(e.$t("main.cancel"))+" ")])],1)])])])},n=[],a=s("5530"),o=s("2f62"),r=s("d065"),c=s("992f"),l={name:"hard-delete-modal",mixins:[r["a"]],components:{Combobox:c["a"]},data:function(){return{userLockText:"",selectionOnly:"true",selectionOptions:[{label:this.$t("tasks.for_selection"),value:"true"},{label:this.$t("tasks.for_project"),value:"false"}]}},props:{text:{type:String,default:""},active:{type:Boolean,default:!1},errorText:{type:String,default:""},isError:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},lockText:{type:String,default:"locked"},selectionOption:{type:Boolean,default:!1}},computed:Object(a["a"])(Object(a["a"])({},Object(o["c"])([])),{},{isLocked:function(){return"locked"===this.lockText||this.lockText!==this.userLockText}}),methods:Object(a["a"])({},Object(o["b"])([])),watch:{active:function(){var e=this;this.active&&(this.userLockText="",this.$nextTick((function(){e.$refs["confirmation-name"]&&e.$refs["confirmation-name"].focus()})))}}},d=l,u=(s("1bbb"),s("2877")),p=Object(u["a"])(d,i,n,!1,null,"17e976f9",null);t["a"]=p.exports},"2c86":function(e,t,s){"use strict";var i=s("df1b"),n=s.n(i);n.a},"2d24":function(e,t,s){"use strict";var i=s("2a44"),n=s.n(i);n.a},3:function(e,t){},3151:function(e,t,s){},"315e":function(e,t,s){"use strict";var i=s("1537"),n=s.n(i);n.a},3388:function(e,t,s){"use strict";var i=s("ec12"),n=s.n(i);n.a},3418:function(e,t,s){},3447:function(e,t,s){"use strict";var i=s("1f01"),n=s.n(i);n.a},3455:function(e,t,s){"use strict";s("99af"),s("4de4"),s("4160"),s("caad"),s("a15b"),s("d81d"),s("13d5"),s("fb6a"),s("b0c0"),s("b64b"),s("d3b7"),s("07ac"),s("ac1f"),s("5319"),s("498a"),s("159b");var i=s("2909"),n=s("369b"),a=s.n(n),o=s("3657"),r=s("09d3"),c={generateTimesheet:function(e,t,s,i,n,a,o,r,l){var d=c.getTimesheetHeaders(i,n,a,o,r,l),u=c.getTimesheetEntries(d,s,t);c.buildCsvFile(e,u)},getTimesheetHeaders:function(e,t,s,i,n,a){var r=["Person"],c=[];for(var l in"month"===e?c=Object(o["k"])(t,i,n):"week"===e?c=Object(o["m"])(t,i,a):"day"===e&&(c=Object(o["g"])(t,s,i,n)),c)r.push(l);return r},getTimesheetEntries:function(e,t,s){var i=[e];return t.forEach((function(t){var n=[t.full_name];e.forEach((function(e,i){i>0&&(i--,s&&s[i]&&s[i][t.id]?n.push(s[i][t.id]/60):n.push("-"))})),i.push(n)})),i},turnEntriesToCsvString:function(e){var t=[];return e.forEach((function(e){var s=e.map((function(e){var t="".concat(e||"");return'"'.concat(t.replace(/"/g,""),'"')})),i=s.join(";");i.length>2&&t.push(i)})),t.join("\n")},buildCsvFile:function(e,t){var s=c.turnEntriesToCsvString(t),i="data:text/csv;charset=utf-8,"+s,n=encodeURI(i),a=document.createElement("a");return a.setAttribute("href",n),a.setAttribute("download","".concat(e,".csv")),document.body.appendChild(a),a.click(),s},generateStatReports:function(e,t,s,n,a,o){var r=c.getStatReportsHeaders(t,s,n),l=c.getStatReportsEntries(t,s,n,a,o),d=[r].concat(Object(i["a"])(l));return c.buildCsvFile(e,d)},getStatReportsHeaders:function(e,t,s){var i=l(e,t),n=["Name","","All",""];return i.reduce((function(e,s){if("all"!==s){var i=t[s].name;return e.concat([i,""])}return e}),n)},getStatReportsEntries:function(e,t,s,i){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"count",a=[],o=l(e,t),r=d(e,i);return r.forEach((function(t){var r=p(e,t),c=u(e,r,n,t),l=m(i,s,n,e,r,t,c);o.forEach((function(s){if("all"!==s){var i=e[t][s];if(i){var a=h(e,i,n,t,s);f(e,n,t,s,r,a,l)}else Object.keys(e[t].all).forEach((function(e){l[e]=l[e].concat(["",""])}))}})),a=a.concat(Object.values(l).sort((function(e,t){return e[1].localeCompare(t[1])}))),a.push([""])})),a},generateRetakeStatReports:function(e,t,s,n,a,o){var r=c.getStatReportsHeaders(t,s,n),l=c.getRetakeStatReportsEntries(t,s,n,a,o),d=[r].concat(Object(i["a"])(l));return c.buildCsvFile(e,d)},getRetakeStatReportsEntries:function(e,t,s,i){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"count",a=[],o=l(e,t),r=d(e,i);return r.forEach((function(t){var r=p(e,t).filter((function(e){return!["max_retake_count","evolution"].includes(e)})),c=u(e,r,n,t),l=m(i,s,n,e,r,t,c);o.forEach((function(s){if("all"===s)Object.keys(e[t].all).forEach((function(e){["max_retake_count","evolution"].includes(e)||(l[e]=l[e].concat(["",""]))}));else{var i=e[t][s];if(i){var a=h(e,i,n,t,s);f(e,n,t,s,r,a,l)}}})),a=a.concat(Object.values(l)),a.push([""])})),a},processCSV:function(e,t){return new Promise((function(s,i){a.a.parse(e,{config:t,encoding:"UTF-8",error:i,complete:function(e){var t=c.cleanUpCsv(e.data);s(t)}})}))},cleanUpCsv:function(e){return e.forEach((function(e){e.forEach((function(e,t,s){s[t]=e.trim()}))})),e[0].forEach((function(e,t,s){s[t]=(e[0]||"").toUpperCase()+e.slice(1)})),e}},l=function(e,t){return Object.keys(e.all).filter((function(e){return"evolution"!==e})).sort((function(e,s){return"all"===e?1:"all"===s?-1:t[e].priority-t[s].priority}))},d=function(e,t){return Object.keys(e).sort((function(e,s){return"all"===e?-1:"all"===s?1:t[e].name.localeCompare(t[s].name)}))},u=function(e,t,s,i){var n=0;return t.forEach((function(t){var a=e[i].all[t];n+=a[s]})),n},p=function(e,t){return Object.keys(e[t].all)},h=function(e,t,s,i,n){var a=0;return Object.keys(t).forEach((function(t){if(!["max_retake_count","evolution"].includes(t)){var o=e[i][n][t];a+=o[s]}})),a},m=function(e,t,s,i,n,a,o){var c={};return n.forEach((function(n){var l=t[n],d=l?l.name:n,u=e[a],p=u?u.name:"All",h=i[a].all[n],m=h[s],f=Object(r["e"])(m,o);c[n]=[p,d,m||"0",f+"%"]})),c},f=function(e,t,s,i,n,a,o){n.forEach((function(n){var c=e[s][i][n],l=0;c&&(l=c[t]);var d=Object(r["e"])(l,a);o[n]=o[n].concat([l||"0",d+"%"])}))};t["a"]=c},"34a4":function(e,t,s){"use strict";var i=s("5a10"),n=s.n(i);n.a},3519:function(e,t,s){},3657:function(e,t,s){"use strict";s.d(t,"q",(function(){return o})),s.d(t,"p",(function(){return r})),s.d(t,"d",(function(){return l})),s.d(t,"c",(function(){return d})),s.d(t,"o",(function(){return u})),s.d(t,"k",(function(){return p})),s.d(t,"g",(function(){return h})),s.d(t,"m",(function(){return m})),s.d(t,"i",(function(){return f})),s.d(t,"j",(function(){return _})),s.d(t,"l",(function(){return v})),s.d(t,"h",(function(){return g})),s.d(t,"f",(function(){return y})),s.d(t,"e",(function(){return b})),s.d(t,"a",(function(){return k})),s.d(t,"b",(function(){return C})),s.d(t,"n",(function(){return S}));s("99af"),s("4160"),s("d81d"),s("a9e3"),s("d3b7"),s("159b"),s("ddb0");var i=s("2909"),n=s("7f45"),a=s.n(n),o=function(e,t){var s=t-e+1;return s<0&&(s=0),Object(i["a"])(Array(s).keys()).map((function(t){return t+e}))},r=function(e){return a.a.tz(e,"YYYY-MM-DDTHH:mm:ss","UTC")},c=function(e){return a.a.tz(e,"YYYY-MM-DD","UTC")},l=function(e){return e?a()(e).format("YYYY-MM-DD"):""},d=function(e){var t=a.a.tz(e,"UTC");return a()().diff(t,"days")>1?t.format("YYYY-MM-DD HH:mm"):t.fromNow()},u=function(e){var t=a()().year();return a()("".concat(t,"-").concat(e),"YYYY-M").format("MMM")},p=function(e,t,s){return o(1,t===e?s:12)},h=function(e,t,s,i){if(s===e&&i===t)return o(1,a()().date());var n=a()("".concat(e,"-").concat(Number(t)),"YYYY-M","en");return o(1,n.endOf("month").date())},m=function(e,t){return o(1,t===e?a()().week():52)},f=function(e){var t=a()();return e.forEach((function(e){e.startDate.isBefore(t)&&(t=e.startDate.clone())})),t},_=function(e){var t=a()().add(3,"months");return e.forEach((function(e){e.endDate.isAfter(t)&&(t=e.endDate.clone())})),t},v=function(e){return c(e||l(a()()))},g=function(e,t){return t&&c(t).isAfter(e)?c(t):e.clone()},y=function(e,t,s){if(s&&s>0&&(t=k(e,Math.ceil(s)-1)),e&&t)return e.isAfter(t)?{start_date:l(e),due_date:l(e)}:{start_date:l(e),due_date:l(t)};var i=e?l(e)||e:null,n=t?l(t)||t:null;return{start_date:i,due_date:n}},b=function(e,t,s){if(s&&s>0&&(e=w(t,Math.ceil(s)-1)),e&&t)return e.isAfter(t)?{start_date:l(t),due_date:l(t)}:{start_date:l(e),due_date:l(t)};var i=e?l(e)||e:null,n=t?l(t)||t:null;return{start_date:i,due_date:n}},k=function(e,t){var s=0,i=6,n=t,a=e.clone();while(n>0)a.add(1,"days"),a.day()!==s&&a.day()!==i&&n--;return a},w=function(e,t){var s=0,i=6,n=t,a=e.clone();while(n>0)a.subtract(1,"days"),a.day()!==s&&a.day()!==i&&n--;return a},C=function(e,t){var s=e.hours_by_day;return Math.floor(t*s*60)},S=function(e,t){return t/60/e.hours_by_day}},3722:function(e,t,s){"use strict";var i=s("a4d5"),n=s.n(i);n.a},"3a7d":function(e,t,s){},"3b44":function(e,t,s){"use strict";var i=s("86a1"),n=s.n(i);n.a},"3c99":function(e,t,s){"use strict";var i=s("a1ea"),n=s.n(i);n.a},"3dcc":function(e,t,s){},"3de0":function(e,t,s){"use strict";var i=s("d2ed"),n=s.n(i);n.a},"3f2a":function(e,t,s){"use strict";var i=s("5e4b"),n=s.n(i);n.a},"3fac":function(e,t,s){},4085:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{ref:"wrapper",staticClass:"file-upload-wrapper",on:{drop:e.onDrop,dragover:e.onDragover,dragleave:e.onDragleave}},[s("form",{attrs:{enctype:"multipart/form-data",novalidate:""}},[s("div",{staticClass:"dropbox"},[s("label",{class:{button:!0,"is-primary":e.isPrimary}},[e._v(" "+e._s(e.label)+" "),s("input",{ref:"uploadInput",staticClass:"visuallyhidden",attrs:{type:"file",accept:e.accept,name:e.uploadFieldName,disabled:e.isSaving||e.disabled,multiple:e.multiple},on:{change:function(t){return e.filesChange(t.target.name,t.target.files)}}})]),this.uploadedFiles.length>1?s("span",{staticClass:"file-upload-status"},[e._v(" "+e._s(this.uploadedFiles.length)+" "+e._s(e.$tc("main.files_selected"))+" ")]):e._e(),1===this.uploadedFiles.length?s("span",{staticClass:"file-upload-status"},[e._v(" "+e._s(this.uploadedFiles[0])+" ")]):e._e()])])])},n=[],a=(s("4160"),s("b0c0"),{name:"file-upload",props:{accept:{default:".csv",type:String},isPrimary:{default:!0,type:Boolean},label:{type:String,required:!0},multiple:{default:!1,type:Boolean},uploadFieldName:{default:"file",type:String},disabled:{type:Boolean,default:!1}},data:function(){return{isInitial:!0,isSaving:!1,uploadedFiles:[]}},mounted:function(){var e=this;this.reset();var t=["drag","dragstart","dragend","dragover","dragenter","dragleave","drop"];t.forEach((function(t){e.$refs.wrapper.addEventListener(t,(function(e){e.preventDefault(),e.stopPropagation()}))}))},computed:{},methods:{filesChange:function(e,t){for(var s=[],i=0,n=t.length;i<n;i++){var a=t[i],o=new FormData;o.append(this.uploadFieldName,a,a.name),s.push(o),this.multiple?this.uploadedFiles.push(a.name):this.uploadedFiles=[a.name]}this.multiple?this.$emit("fileselected",s):this.$emit("fileselected",s[0])},reset:function(){this.isSaving=!1,this.isInitial=!0,this.uploadedFiles=[],this.$refs.uploadInput.value=""},onDragover:function(){this.isDragging=!0},onDragleave:function(){this.isDragging=!1},onDrop:function(e){e.dataTransfer.files&&(this.isDragging=!1,this.isSaving=!1,this.filesChange("file",e.dataTransfer.files))}},watch:{}}),o=a,r=(s("9856"),s("2877")),c=Object(r["a"])(o,i,n,!1,null,"2dc0c4ee",null);t["a"]=c.exports},4360:function(e,t,s){"use strict";var i={};s.r(i),s.d(i,"route",(function(){return _}));var n,a,o,r,c,l,d,u,p,h=s("ba4c"),m=s.n(h),f=s("2f62"),_=function(e){return e.route},v=(s("7db0"),s("c740"),s("4160"),s("d81d"),s("a434"),s("b0c0"),s("d3b7"),s("159b"),s("ade3")),g=s("5530"),y=s("edbf"),b={getAssetTypes:function(e){y["a"].get("/api/data/asset-types",e)},getAssetType:function(e,t){y["a"].get("/api/data/entity-types/".concat(e),t)},newAssetType:function(e,t){var s={name:e.name};return y["a"].ppost("/api/data/entity-types",s)},updateAssetType:function(e,t){var s={name:e.name};return y["a"].pput("/api/data/entity-types/".concat(e.id),s)},deleteAssetType:function(e,t){return y["a"].pdel("/api/data/entity-types/".concat(e.id))}},k=s("9fb0"),w=s("2229"),C={assetTypes:[],assetTypeMap:{}},S=Object(g["a"])({},C),T={assetTypes:function(e){return e.assetTypes},assetTypeMap:function(e){return e.assetTypeMap},getAssetType:function(e,t){return function(t){return e.assetTypes.find((function(e){return e.id===t}))}},getAssetTypeOptions:function(e){return e.assetTypes.map((function(e){return{label:e.name,value:e.id}}))}},x={loadAssetTypes:function(e,t){var s=e.commit;e.state;s(k["fc"]),b.getAssetTypes((function(e,i){e?s(k["ec"]):s(k["dc"],i),t&&t(e)}))},loadAssetType:function(e,t){var s=e.commit;e.state;b.getAssetType(t,(function(e,t){e?console.error(e):s(k["xb"],t)}))},newAssetType:function(e,t){var s=e.commit;e.state;return b.newAssetType(t).then((function(e){s(k["xb"],e),Promise.resolve(e)}))},editAssetType:function(e,t){var s=e.commit;e.state;return b.updateAssetType(t).then((function(e){s(k["xb"],e),Promise.resolve(e)}))},deleteAssetType:function(e,t){var s=e.commit;e.state;return b.deleteAssetType(t).then((function(){s(k["bb"],t),Promise.resolve(t)}))}},E=(n={},Object(v["a"])(n,k["fc"],(function(e){e.isAssetTypesLoading=!0,e.isAssetTypesLoadingError=!1})),Object(v["a"])(n,k["ec"],(function(e){e.isAssetTypesLoading=!1,e.isAssetTypesLoadingError=!0})),Object(v["a"])(n,k["dc"],(function(e,t){e.isAssetTypesLoading=!1,e.isAssetTypesLoadingError=!1,e.assetTypes=t,e.assetTypes=Object(w["d"])(e.assetTypes),e.assetTypeMap={},e.assetTypes.forEach((function(t){e.assetTypeMap[t.id]=t}))})),Object(v["a"])(n,k["xb"],(function(e,t){var s=T.getAssetType(e)(t.id);s&&s.id?Object.assign(s,t):(e.assetTypes.push(t),e.assetTypeMap[t.id]=t),e.assetTypes=Object(w["d"])(e.assetTypes)})),Object(v["a"])(n,k["bb"],(function(e,t){var s=e.assetTypes.findIndex((function(e){return e.id===t.id}));s>=0&&e.assetTypes.splice(s,1),delete e.assetTypeMap[t.id]})),Object(v["a"])(n,k["Vd"],(function(e){Object.assign(e,Object(g["a"])({},C))})),n),P={state:S,getters:T,actions:x,mutations:E},O=s("7d26"),A=(s("99af"),s("4de4"),s("b64b"),s("07ac"),{getSequenceCasting:function(e,t){var s="/api/data/projects/".concat(e,"/sequences/").concat(t,"/casting");return y["a"].pget(s)},getAssetTypeCasting:function(e,t){var s="/api/data/projects/".concat(e,"/asset-types/").concat(t,"/casting");return y["a"].pget(s)},updateCasting:function(e,t,s,i){var n="/api/data/projects/".concat(e,"/entities/").concat(t,"/casting");return y["a"].pput(n,s)},postCastingCsv:function(e,t){var s="/api/import/csv/projects/".concat(e.id,"/casting");return y["a"].ppost(s,t)},getAssetCastIn:function(e){return y["a"].pget("/api/data/assets/".concat(e.id,"/cast-in"))},getShotCasting:function(e){var t="/api/data/projects/".concat(e.project_id,"/entities/")+"".concat(e.id,"/casting");return y["a"].pget(t)},getAssetCasting:function(e){var t=e.project_id||e.production_id,s="/api/data/projects/".concat(t,"/entities/").concat(e.id,"/casting");return y["a"].pget(s)}}),j=s("66e7"),D={castingSequenceId:"",castingShotId:0,castingSequenceShots:[],castingAssetTypeAssets:[],castingEpisodeSequences:[],castingSequenceOptions:[],castingAssetTypesOptions:[],castingCurrentShot:null,casting:{},castingByType:[]},M=Object(g["a"])({},D),I={castingEpisodeSequences:function(e){return e.castingEpisodeSequences},castingSequenceId:function(e){return e.castingSequenceId},castingSequenceShots:function(e){return e.castingSequenceShots},castingAssetTypeAssets:function(e){return e.castingAssetTypeAssets},castingSequenceOptions:function(e){return e.castingSequenceOptions},castingAssetTypesOptions:function(e){return e.castingAssetTypesOptions},casting:function(e){return e.casting},castingByType:function(e){return e.castingByType},castingCurrentShot:function(e){return e.castingCurrentShot}},$={setCastingSequence:function(e,t){var s=e.commit,i=e.rootState;if(!t)return console.error("SequenceId is undefined, no casting can be set.");var n=i.productions.currentProduction,a=i.assets.assetMap,o=Object.values(i.shots.shotMap).filter((function(e){return e.sequence_id===t}));return s(k["D"],t),s(k["F"],o),A.getSequenceCasting(n.id,t).then((function(e){s(k["A"],{casting:e,assetMap:a})}))},setCastingAssetType:function(e,t){var s=e.commit,i=e.rootState;if(!t)return console.error("assetTypeId is undefined, no casting can be set.");var n=i.productions.currentProduction,a=i.assets.assetMap,o=Object.values(i.assets.assetMap).filter((function(e){return e.asset_type_id===t}));return s(k["y"],t),s(k["x"],o),A.getAssetTypeCasting(n.id,t).then((function(e){s(k["A"],{casting:e,assetMap:a})}))},setCastingEpisode:function(e,t){var s=e.commit,i=e.rootState,n=i.shots.sequences;s(k["E"],n),s(k["B"],t)},setCastingAssetTypes:function(e){var t=e.commit,s=e.rootState,i=s.assets.assetTypes;t(k["z"],i)},addAssetToCasting:function(e,t){var s=e.commit,i=e.rootState,n=t.entityId,a=t.assetId,o=t.nbOccurences,r=i.assets.assetMap[a];s(k["v"],{entityId:n,asset:r,nbOccurences:o})},removeAssetFromCasting:function(e,t){var s=e.commit,i=e.rootState,n=t.entityId,a=t.assetId,o=t.nbOccurences,r=i.assets.assetMap[a];s(k["w"],{entityId:n,asset:r,nbOccurences:o})},saveCasting:function(e,t){e.commit;var s=e.rootGetters;if(!t)return console.error("ShotId is undefined, no casting can be saved.");var i=s.currentProduction,n=[];return Object.values(M.casting[t]).forEach((function(e){n.push({asset_id:e.asset_id,nb_occurences:e.nb_occurences||1,label:e.label})})),A.updateCasting(i.id,t,n)},uploadCastingFile:function(e,t){e.commit,e.state;var s=e.rootGetters,i=s.currentProduction;return A.postCastingCsv(i,t)},setAssetLinkLabel:function(e,t){var s=e.commit,i=e.dispatch,n=(e.state,e.rootGetters,t.label),a=t.asset,o=t.targetEntityId;return s(k["C"],{label:n,asset:a,targetEntityId:o}),i("saveCasting",o)},loadAssetCasting:function(e,t){var s=e.commit,i=e.rootGetters;if(!t)return Promise.resolve({});var n=i.assetMap;return A.getAssetCasting(t).then((function(e){return s(k["bc"],{asset:t,casting:e,assetMap:n}),Promise.resolve(e)}))},loadShotCasting:function(e,t){var s=e.commit,i=e.rootGetters;if(!t)return Promise.resolve({});var n=i.assetMap;return A.getShotCasting(t).then((function(e){return s(k["Nc"],{shot:t,casting:e,assetMap:n}),Promise.resolve(e)}))},loadAssetCastIn:function(e,t){var s=e.commit,i=(e.state,e.rootState);if(!t)return Promise.resolve({});var n=i.shots.shotMap;return A.getAssetCastIn(t).then((function(e){return s(k["cc"],{asset:t,castIn:e,shotMap:n}),Promise.resolve(e)}))}},L=(a={},Object(v["a"])(a,k["Mc"],(function(e){Object.assign(e,D)})),Object(v["a"])(a,k["F"],(function(e,t){var s={},i=[];e.castingSequenceShots=t,t.forEach((function(e){s[e.id]=[],i[e.id]=[]})),e.casting=s,e.castingByType=i})),Object(v["a"])(a,k["x"],(function(e,t){var s={},i=[];e.castingAssetTypeAssets=t,t.forEach((function(e){s[e.id]=[],i[e.id]=[]})),e.casting=s,e.castingByType=i})),Object(v["a"])(a,k["E"],(function(e,t){e.castingEpisodeSequences=t,e.castingSequenceOptions=t.map((function(e){var t={name:"breakdown-sequence",params:{production_id:e.project_id,sequence_id:e.id}};return e.episode_id&&(t.name="episode-".concat(t.name),t.params.episode_id=e.episode_id),{label:e.name,value:e.id,route:t}}))})),Object(v["a"])(a,k["z"],(function(e,t){e.castingAssetTypesOptions=t.map((function(e){var t={name:"breakdown-asset-type",params:{production_id:e.project_id,asset_type_id:e.id}};return e.episode_id&&(t.name="episode-".concat(t.name),t.params.episode_id=e.episode_id),{label:e.name,value:e.id,route:t}}))})),Object(v["a"])(a,k["D"],(function(e,t){e.castingSequenceId=t})),Object(v["a"])(a,k["B"],(function(e,t){e.castingEpisodeId=t})),Object(v["a"])(a,k["y"],(function(e,t){e.castingAssetTypeId=t})),Object(v["a"])(a,k["A"],(function(e,t){var s=t.casting,i=(t.assetMap,{}),n=Object.keys(s);n.forEach((function(e){var t=s[e];i[e]=Object(j["d"])(t,"asset_type_name")})),Object.assign(e.casting,s),e.casting=Object(g["a"])({},e.casting),Object.assign(e.castingByType,i),e.castingByType=Object(g["a"])({},e.castingByType)})),Object(v["a"])(a,k["v"],(function(e,t){var s=t.entityId,i=t.asset,n=t.nbOccurences;e.casting[s]||(e.casting[s]=[]);var a=e.casting[s].find((function(e){return e.asset_id===i.id}));if(a)a.nb_occurences+=n;else{var o={asset_id:i.id,name:i.name,asset_name:i.name,asset_type_name:i.asset_type_name,nb_occurences:n,preview_file_id:i.preview_file_id};e.casting[s].push(o)}e.casting[s]=Object(w["b"])(e.casting[s]),e.castingByType[s]=Object(j["d"])(e.casting[s],"asset_type_name")})),Object(v["a"])(a,k["w"],(function(e,t){var s=t.entityId,i=t.asset,n=t.nbOccurences,a=e.casting[s].find((function(e){return e.asset_id===i.id}));a&&(a.nb_occurences-=n,a.nb_occurences<1&&(delete e.casting[s][i.id],e.casting[s]=e.casting[s].filter((function(e){return e.asset_id!==i.id}))),e.castingByType[s]=Object(j["d"])(e.casting[s],"asset_type_name"))})),Object(v["a"])(a,k["bc"],(function(e,t){var s=t.asset,i=t.casting;i.forEach((function(e){e.name=e.asset_name}));var n=Object(j["d"])(i,"asset_type_name");s.casting=i,m.a.set(e.casting,s.id,i),m.a.set(e.castingByType,s.id,n),m.a.set(s,"castingAssetsByType",n)})),Object(v["a"])(a,k["Nc"],(function(e,t){var s=t.shot,i=t.casting;i.forEach((function(e){e.name=e.asset_name||e.name}));var n=Object(j["d"])(i,"asset_type_name");s.casting=i,m.a.set(e.casting,s.id,i),m.a.set(e.castingByType,s.id,n),m.a.set(s,"castingAssetsByType",n)})),Object(v["a"])(a,k["cc"],(function(e,t){var s=t.asset,i=t.castIn;i.forEach((function(e){e.episode_name&&(e.sequence_name="".concat(e.episode_name," / ").concat(e.sequence_name))})),s.castIn=i,m.a.set(s,"castInShotsBySequence",Object(j["d"])(i,"sequence_name"))})),Object(v["a"])(a,k["C"],(function(e,t){var s=t.label,i=t.asset,n=t.targetEntityId,a=e.casting[n].find((function(e){return e.asset_id===i.asset_id}));a.label=s})),Object(v["a"])(a,k["Vd"],(function(e){Object.assign(e,Object(g["a"])({},D))})),a),F={state:M,getters:I,actions:$,mutations:L},N=(s("caad"),s("db82")),q=s.n(N),R={getCustomActions:function(e){y["a"].get("/api/data/custom-actions",e)},newCustomAction:function(e){var t={name:e.name,url:e.url};return y["a"].ppost("/api/data/custom-actions/",t)},updateCustomAction:function(e){var t={name:e.name,url:e.url,entity_type:e.entityType,is_ajax:"true"===e.isAjax};return y["a"].pput("/api/data/custom-actions/".concat(e.id),t)},deleteCustomAction:function(e){return y["a"].pdel("/api/data/custom-actions/".concat(e.id))},postCustomAction:function(e,t){return new Promise((function(s,i){q.a.post(e).withCredentials().send(t).end((function(e,t){e?i(e):s()}))}))}},B={customActions:[],isCustomActionsLoading:!1,isCustomActionsLoadingError:!1,editCustomAction:{isLoading:!1,isError:!1},deleteCustomAction:{isLoading:!1,isError:!1}},V=Object(g["a"])({},B),z={customActions:function(e){return e.customActions},isCustomActionsLoading:function(e){return e.isCustomActionsLoading},isCustomActionsLoadingError:function(e){return e.isCustomActionsLoadingError},editCustomAction:function(e){return e.editCustomAction},deleteCustomAction:function(e){return e.deleteCustomAction},customAction:function(e,t,s){return function(t){return e.customActions.find((function(e){return e.id===t}))}},allCustomActions:function(e){return e.customActions.filter((function(e){return"all"===e.entity_type}))},assetCustomActions:function(e){return e.customActions.filter((function(e){return["all","asset"].includes(e.entity_type)}))},shotCustomActions:function(e){return e.customActions.filter((function(e){return["all","shot"].includes(e.entity_type)}))}},U={loadCustomActions:function(e,t){var s=e.commit;e.state;s(k["ic"]),R.getCustomActions((function(e,i){e?s(k["hc"]):s(k["gc"],i),t&&t(e)}))},newCustomAction:function(e,t){var s=e.commit;e.state;return R.newCustomAction(t).then((function(e){s(k["zb"],e),Promise.resolve(e)}))},editCustomAction:function(e,t){var s=e.commit;e.state;return R.updateCustomAction(t).then((function(e){s(k["zb"],e),Promise.resolve(e)}))},deleteCustomAction:function(e,t){var s=e.commit;e.state;return R.deleteCustomAction(t).then((function(){s(k["db"],t),Promise.resolve(t)}))},postCustomAction:function(e,t){e.commit;var s=t.data,i=t.url;R.postCustomAction(i,s)}},H=(o={},Object(v["a"])(o,k["ic"],(function(e){e.customActions=[]})),Object(v["a"])(o,k["gc"],(function(e,t){e.customActions=t,e.customActions=Object(w["d"])(e.customActions)})),Object(v["a"])(o,k["zb"],(function(e,t){var s=z.customAction(e)(t.id);s&&s.id?Object.assign(s,t):(e.customActions.push(t),e.customActions=Object(w["d"])(e.customActions))})),Object(v["a"])(o,k["db"],(function(e,t){var s=e.customActions.findIndex((function(e){return e.id===t.id}));e.customActions.splice(s,1)})),Object(v["a"])(o,k["Vd"],(function(e){Object.assign(e,Object(g["a"])({},B))})),o),G={state:V,getters:z,actions:U,mutations:H},W=s("48c6"),Y={email:"",password:"",isLdap:!1,isLoginLoading:!1,isLoginError:!1,isDataLoading:!1},K=Object(g["a"])({},Y),Q={email:function(e){return e.email},password:function(e){return e.password},isLdap:function(e){return e.isLdap},isLoginLoading:function(e){return e.isLoginLoading},isLoginError:function(e){return e.isLoginError},isDataLoading:function(e){return e.isDataLoading}},X={changeEmail:function(e,t){var s=e.commit;e.state;s(k["I"],t)},changePassword:function(e,t){var s=e.commit;e.state;s(k["J"],t)},logIn:function(e,t){var s=e.commit,i=e.state;s(k["cd"]),W["a"].logIn(i.email,i.password,(function(e){e?(s(k["bd"]),t(e,!1)):(s(k["dd"]),t(null,!0))}))},logout:function(e,t){var s=e.commit;e.state;W["a"].logout((function(e){e?(s(k["ed"]),t(null,!1)):(s(k["Vd"]),s(k["fd"]),s(k["Le"]),t(null,!0))}))},resetPassword:function(e,t){e.commit;return new Promise((function(e,s){W["a"].resetPassword(t).then(e).catch(s)}))},resetChangePassword:function(e,t){var s=e.commit,i=t.token,n=t.password,a=t.password2;return new Promise((function(e,t){W["a"].resetChangePassword(i,n,a).then((function(){s(k["dd"]),e()})).catch(t)}))}},J=(r={},Object(v["a"])(r,k["I"],(function(e,t){e.email=t})),Object(v["a"])(r,k["J"],(function(e,t){e.password=t})),Object(v["a"])(r,k["cd"],(function(e){e.isLoginLoading=!0,e.isLoginError=!1})),Object(v["a"])(r,k["dd"],(function(e,t){e.isLoginLoading=!1,e.isLoginError=!1})),Object(v["a"])(r,k["bd"],(function(e,t){e.isLoginLoading=!1,e.isLoginError=!0})),Object(v["a"])(r,k["fd"],(function(e,t){e.isLoginLoading=!1,e.isLoginError=!1})),Object(v["a"])(r,k["ab"],(function(e,t){e.isDataLoading=!0,t&&void 0!==t.isLdap&&(e.isLdap=t.isLdap)})),Object(v["a"])(r,k["Z"],(function(e){e.isDataLoading=!1})),Object(v["a"])(r,k["Vd"],(function(e,t){Object.assign(e,Object(g["a"])({},Y))})),r),Z={state:K,getters:Q,actions:X,mutations:J},ee={currentProductionScreen:"assets",isDarkTheme:!1,isSidebarHidden:!0,isUserMenuHidden:!0,lastProductionScreen:"assets",lastProductionViewed:null},te=Object(g["a"])({},ee),se={isDarkTheme:function(e){return e.isDarkTheme},isSidebarHidden:function(e){return e.isSidebarHidden},isUserMenuHidden:function(e){return e.isUserMenuHidden},lastProductionScreen:function(e){return e.lastProductionScreen},lastProductionViewed:function(e){return e.lastProductionViewed},currentProductionScreen:function(e){return e.currentProductionScreen}},ie={toggleDarkTheme:function(e){var t=e.commit,s=e.state;t(k["Je"]),localStorage&&localStorage.setItem("dark-theme",s.isDarkTheme)},toggleSidebar:function(e){var t=e.commit;e.state;t(k["Ke"])},toggleUserMenu:function(e){var t=e.commit;e.state;t(k["Le"])},setLastProductionScreen:function(e,t){var s=e.commit;e.state;s(k["se"],t)},loadEvents:function(e,t){e.commit,e.state;var s=t.after,i=t.before;return y["a"].getEvents(s,i)}},ne=(c={},Object(v["a"])(c,k["Je"],(function(e){e.isDarkTheme=!e.isDarkTheme})),Object(v["a"])(c,k["Ke"],(function(e){e.isSidebarHidden=!e.isSidebarHidden})),Object(v["a"])(c,k["Le"],(function(e){e.isUserMenuHidden=!e.isUserMenuHidden})),Object(v["a"])(c,k["se"],(function(e,t){e.lastProductionScreen=t})),Object(v["a"])(c,k["je"],(function(e,t){t&&(e.lastProductionViewed=t)})),Object(v["a"])(c,k["hf"],(function(e,t){t&&"client"===t.role&&(e.lastProductionScreen="playlists")})),Object(v["a"])(c,k["Vd"],(function(e){var t=e.isDarkTheme;Object.assign(e,Object(g["a"])({},ee)),e.isDarkTheme=t})),c),ae={state:te,getters:se,actions:ie,mutations:ne},oe=(s("a15b"),function(e,t){var s="".concat(e,"?"),i=[];return Object.keys(t).forEach((function(e){t[e]&&i.push("".concat(e,"=").concat(t[e]))})),s+i.join("&")}),re={getLastNews:function(e){return new Promise((function(t,s){var i=e.productionId;delete e.productionId;var n=oe("/api/data/projects/".concat(i,"/news"),e);y["a"].get(n,(function(e,i){e?s(e):t(i)}))}))},getNews:function(e,t){return new Promise((function(s,i){var n="/api/data/projects/".concat(e,"/news/").concat(t);y["a"].get(n,(function(e,t){e?i(e):s(t[0])}))}))}},ce={newsList:[],newsStats:{},newsTotal:0},le=Object(g["a"])({},ce),de={newsList:function(e){return e.newsList},newsTotal:function(e){return e.newsTotal},newsStats:function(e){return e.newsStats},newsListByDay:function(e){if(0===e.newsList.length)return[];var t=[],s=[],i=e.newsList[0].created_at.substring(0,10);return e.newsList.forEach((function(e){var n=e.created_at.substring(0,10);n!==i&&(t.push(s),i=n,s=[]),s.push(e)})),0!==s.length&&t.push(s),t}},ue={loadNews:function(e,t){var s=e.commit;e.state;return s(k["R"]),re.getLastNews(t).then((function(e){return s(k["l"],e.data),s(k["kd"],e.total),s(k["jd"],e.stats),Promise.resolve()}))},loadMoreNews:function(e,t){var s=e.commit;e.state;return re.getLastNews(t).then((function(e){return s(k["l"],e.data)}))},loadSingleNews:function(e,t){var s=e.commit,i=(e.state,t.productionId),n=t.newsId;return new Promise((function(e,t){re.getNews(i,n).then((function(e){return s(k["e"],e)})).catch(t)}))}},pe=(l={},Object(v["a"])(l,k["R"],(function(e){e.newsList=[],e.newsTotal=0})),Object(v["a"])(l,k["l"],(function(e,t){e.newsList=e.newsList.concat(Object(w["c"])(t))})),Object(v["a"])(l,k["e"],(function(e,t){e.newsList.unshift(t)})),Object(v["a"])(l,k["id"],(function(e,t){var s=t.commentId,i=t.previewId,n=t.extension;if(s){var a=e.newsList.find((function(e){return e.comment_id===s}));a&&(a.preview_file_id=i,a.preview_file_extension=n)}})),Object(v["a"])(l,k["kd"],(function(e,t){e.newsTotal=t})),Object(v["a"])(l,k["jd"],(function(e,t){e.newsStats=t})),Object(v["a"])(l,k["Vd"],(function(e){Object.assign(e,Object(g["a"])({},ce))})),l),he={state:le,getters:de,actions:ue,mutations:pe},me={getNotifications:function(e){return y["a"].pget("/api/data/user/notifications")},getNotification:function(e){return y["a"].pget("/api/data/user/notifications/".concat(e))}},fe={notifications:[]},_e=Object(g["a"])({},fe),ve={notifications:function(e){return e.notifications},isNewNotification:function(e){var t=e.notifications.filter((function(e){return!e.read}));return t.length>0},unreadNotificationsLength:function(e){return e.notifications.filter((function(e){return!e.read})).length}},ge={clearNotifications:function(e){var t=e.commit;t(k["S"])},loadNotifications:function(e){var t=e.commit;e.state;return me.getNotifications().then((function(e){return t(k["lc"],e),Promise.resolve()}))},loadNotification:function(e,t){var s=e.commit;e.state;return me.getNotification(t).then((function(e){return s(k["mc"],e),Promise.resolve()}))},incrementNotificationCounter:function(e){var t=e.commit;t(k["Xb"])},markAllNotificationsAsRead:function(e){var t=e.commit;t(k["gd"])}},ye=(d={},Object(v["a"])(d,k["S"],(function(e){e.notifications=[]})),Object(v["a"])(d,k["lc"],(function(e,t){e.notifications=Object(w["c"])(t)})),Object(v["a"])(d,k["mc"],(function(e,t){e.notifications.push(t),e.notifications=Object(w["c"])(e.notifications)})),Object(v["a"])(d,k["gd"],(function(e){e.notifications.forEach((function(e){e.read=!0}))})),Object(v["a"])(d,k["qd"],(function(e,t){var s=t.commentId,i=t.previewId,n=e.notifications.find((function(e){return e.comment_id===s}));n&&(n.preview_file_id=i)})),Object(v["a"])(d,k["Xb"],(function(e){e.notifications.push({read:!1})})),Object(v["a"])(d,k["Vd"],(function(e){Object.assign(e,Object(g["a"])({},fe))})),d),be={state:_e,getters:ve,actions:ge,mutations:ye},ke=s("52ad"),we=s("0f9a"),Ce=s("487c"),Se={playlists:[],playlistMap:{}},Te=Object(g["a"])({},Se),xe={playlists:function(e){return e.playlists},playlistMap:function(e){return e.playlistMap}},Ee={loadPlaylists:function(e,t){var s=e.commit,i=e.rootGetters,n=i.currentProduction,a=i.currentEpisode,o=i.isTVShow;if(o&&!a)return t?t():null;s(k["xc"]),Ce["a"].getPlaylists(n,a,(function(e,i){e?s(k["wc"]):s(k["vc"],i),t&&t(e)}))},loadPlaylist:function(e,t){var s=e.commit,i=e.rootGetters,n=t.playlist,a=t.callback,o=i.currentProduction;s(k["Ac"]),Ce["a"].getPlaylist(o,n,(function(e,t){e?s(k["zc"]):s(k["yc"],t),a&&a(e,t)}))},refreshPlaylist:function(e,t){var s=e.commit,i=e.rootGetters;return new Promise((function(e,n){var a=i.currentProduction;Ce["a"].getPlaylist(a,{id:t},(function(t,i){t?n(t):(s(k["Cb"],i),e(i))}))}))},loadEntityPreviewFiles:function(e,t){e.commit;return Ce["a"].getEntityPreviewFiles(t)},newPlaylist:function(e,t){var s=e.commit;return s(k["Eb"],t),Ce["a"].newPlaylist(t).then((function(e){return s(k["Cb"],e),Promise.resolve(e)}))},editPlaylist:function(e,t){var s=e.commit,i=e.rootGetters,n=t.data,a=t.callback;i.isCurrentUserClient?a():(s(k["Eb"]),Ce["a"].updatePlaylist(n,(function(e,t){e?s(k["Db"]):s(k["Cb"],t),a&&a(e,t)})))},deletePlaylist:function(e,t){var s=e.commit,i=t.playlist,n=t.callback;s(k["ib"]),Ce["a"].deletePlaylist(i,(function(e){e?s(k["hb"]):s(k["gb"],i),n&&n(e)}))},pushEntityToPlaylist:function(e,t){var s=e.commit,i=e.dispatch,n=t.playlist,a=t.entity,o=t.previewFiles;t.callback;return new Promise((function(e,t){s(k["jc"],{playlist:n,entity:a,previewFiles:o}),s(k["c"],{playlist:n,entity:a}),i("editPlaylist",{data:n,callback:function(s){s&&t(s),e(a)}})}))},removeEntityPreviewFromPlaylist:function(e,t){var s=e.commit,i=e.dispatch,n=t.playlist,a=t.entity,o=t.callback;s(k["Id"],{playlist:n,entity:a}),i("editPlaylist",{data:n,callback:o})},changePlaylistOrder:function(e,t){var s=e.commit,i=e.dispatch,n=t.playlist,a=t.info,o=t.callback;s(k["K"],{playlist:n,info:a}),i("editPlaylist",{data:n,callback:o})},changePlaylistPreview:function(e,t){var s=e.commit,i=e.dispatch,n=t.playlist,a=t.entity,o=t.previewFileId,r=t.callback;s(k["L"],{playlist:n,entityId:a.id,previewFileId:o}),i("editPlaylist",{data:n,callback:r})},removeBuildJob:function(e,t){var s=e.commit;s(k["Hd"],t),Ce["a"].deleteBuildJob(t)},removeBuildJobFromList:function(e,t){var s=e.commit;s(k["Hd"],t)},addNewBuildJob:function(e,t){var s=e.commit;s(k["i"],t)},markBuildJobAsDone:function(e,t){var s=e.commit;s(k["hd"],t)},runPlaylistBuild:function(e,t){e.commit;Ce["a"].runPlaylistBuild(t)},changePlaylistType:function(e,t){var s=e.commit,i=e.dispatch,n=t.playlist,a=t.taskTypeId,o=t.callback;return s(k["M"],{playlist:n,taskTypeId:a}),i("editPlaylist",{data:n,callback:o})},loadTempPlaylist:function(e,t){e.commit,e.dispatch;var s=e.rootGetters,i=s.currentProduction;return Ce["a"].loadTempPlaylist(i,t)}},Pe=(u={},Object(v["a"])(u,k["xc"],(function(e){})),Object(v["a"])(u,k["wc"],(function(e){})),Object(v["a"])(u,k["vc"],(function(e,t){e.playlists=t,e.playlists=Object(w["g"])(e.playlists),e.playlistMap={},t.forEach((function(t){t.entities||(t.entities=[]),e.playlistMap[t.id]=t}))})),Object(v["a"])(u,k["Ac"],(function(e){})),Object(v["a"])(u,k["zc"],(function(e){})),Object(v["a"])(u,k["yc"],(function(e,t){e.playlistMap[t.id].build_jobs=t.build_jobs})),Object(v["a"])(u,k["Eb"],(function(e,t){})),Object(v["a"])(u,k["Db"],(function(e){})),Object(v["a"])(u,k["Cb"],(function(e,t){var s=e.playlistMap[t.id];s&&s.id?Object.assign(s,t):(e.playlists=[t].concat(e.playlists),e.playlistMap[t.id]=t)})),Object(v["a"])(u,k["ib"],(function(e){})),Object(v["a"])(u,k["hb"],(function(e){})),Object(v["a"])(u,k["gb"],(function(e,t){e.playlists=Object(j["h"])(e.playlists,t),delete e.playlistMap[t.id]})),Object(v["a"])(u,k["jc"],(function(e,t){t.playlist;var s=t.entity,i=t.previewFiles,n=[];if(Object.keys(i).forEach((function(e){i[e].forEach((function(e){n.push(e)}))})),n=Object(w["c"])(n),n.length>0){var a=n[0];s.preview_file_id=a.id,s.preview_file_extension=a.extension,s.preview_file_annotations=a.annotations,s.preview_file_task_id=a.task_id}s.preview_files=i})),Object(v["a"])(u,k["c"],(function(e,t){var s=t.playlist,i=t.entity;s.shots||(s.shots=[]),s.shots.push({entity_id:i.id,preview_file_id:i.preview_file_id,preview_file_extension:i.preview_file_extension,preview_file_annotations:i.preview_file_annotations,preview_files:i.preview_files})})),Object(v["a"])(u,k["Id"],(function(e,t){var s=t.playlist,i=t.entity;s.shots||(s.shots=[]);var n=s.shots.findIndex((function(e){return e.entity_id===i.id}));s.shots.splice(n,1)})),Object(v["a"])(u,k["K"],(function(e,t){var s=t.playlist,i=t.info,n=s.shots.find((function(e){return e.entity_id===i.after})),a=s.shots.findIndex((function(e){return e.entity_id===i.after})),o=s.shots.findIndex((function(e){return e.entity_id===i.before}));a>=0&&o>=0&&(s.shots.splice(a,1),a>o&&o++,s.shots.splice(o,0,n))})),Object(v["a"])(u,k["L"],(function(e,t){var s=t.playlist,i=t.entityId,n=t.previewFileId,a=s.shots.find((function(e){return e.entity_id===i}));a||(a=s.shots.find((function(e){return e.id===i}))),a&&(a.preview_file_id=n)})),Object(v["a"])(u,k["i"],(function(e,t){var s=e.playlistMap[t.playlist_id];s.build_jobs=[{id:t.build_job_id,created_at:t.created_at,status:"running",playlist_id:s.id}].concat(s.build_jobs)})),Object(v["a"])(u,k["hd"],(function(e,t){var s=e.playlistMap[t.playlist_id];Object(j["i"])(s.build_jobs,{id:t.build_job_id,status:"succeeded"})})),Object(v["a"])(u,k["Hd"],(function(e,t){var s=e.playlistMap[t.playlist_id];m.a.set(s,"build_jobs",Object(j["h"])(s.build_jobs,t))})),Object(v["a"])(u,k["M"],(function(e,t){var s=t.playlist,i=t.taskTypeId;s&&s.shots.forEach((function(e){if(e.preview_files[i]){var t=e.preview_files[i][0];e.preview_file_id=t.id,e.preview_file_extension=t.extension,e.preview_file_annotations=t.annotations,e.extension=t.extension,e.annotations=t.annotations}}))})),Object(v["a"])(u,k["Vd"],(function(e){Object.assign(e,Object(g["a"])({},Se))})),u),Oe={state:Te,getters:xe,actions:Ee,mutations:Pe},Ae=s("f83f"),je={getMilestones:function(e){return new Promise((function(t,s){if(e){var i="/api/data/projects/".concat(e.id,"/milestones");y["a"].get(i,(function(e,i){e?s(e):t(i)}))}else t([])}))},createMilestone:function(e,t){return new Promise((function(s,i){var n={date:t.date.format("YYYY-MM-DD"),name:t.name,task_type_id:t.task_type_id,project_id:e.id};y["a"].post("/api/data/milestones",n,(function(e,t){e?i(e):s(t)}))}))},updateMilestone:function(e){return new Promise((function(t,s){var i={date:e.date.format("YYYY-MM-DD"),name:e.name,task_type_id:e.task_type_id},n="/api/data/milestones/".concat(e.id);y["a"].put(n,i,(function(e,i){e?s(e):t(i)}))}))},deleteMilestone:function(e){return new Promise((function(t,s){var i="/api/data/milestones/".concat(e.id);y["a"].del(i,(function(i){i?s(i):t(e)}))}))},getScheduleItems:function(e){return new Promise((function(t,s){y["a"].get("/api/data/projects/".concat(e.id,"/schedule-items/task-types"),(function(e,i){e?s(e):t(i)}))}))},getAssetTypeScheduleItems:function(e,t){return this.getEntitycheduleItems(e,t,"asset-types")},getSequenceScheduleItems:function(e,t){return this.getEntitycheduleItems(e,t,"sequences")},getEpisodeScheduleItems:function(e,t){return this.getEntitycheduleItems(e,t,"episodes")},getEntitycheduleItems:function(e,t,s){return new Promise((function(i,n){y["a"].get("/api/data/projects/".concat(e.id,"/schedule-items/")+"".concat(t.id,"/").concat(s),(function(e,t){e?n(e):i(t)}))}))},updateScheduleItem:function(e){return new Promise((function(t,s){e.endDate||(e.endDate=e.startDate.add("days",1).clone());var i=e.man_days,n={start_date:e.startDate.format("YYYY-MM-DD"),end_date:e.endDate.format("YYYY-MM-DD")};i&&(n.man_days=parseInt(i)),y["a"].put("/api/data/schedule-items/".concat(e.id),n,(function(e,i){e?s(e):t(i)}))}))}},De={milestones:{},currentScheduleItems:[]},Me=Object(g["a"])({},De),Ie={milestones:function(e){return e.milestones}},$e={loadScheduleItems:function(e,t){e.commit;return je.getScheduleItems(t).catch(console.error)},loadAssetTypeScheduleItems:function(e,t){e.commit;var s=t.production,i=t.taskType;return je.getAssetTypeScheduleItems(s,i).catch(console.error)},loadSequenceScheduleItems:function(e,t){e.commit;var s=t.production,i=t.taskType;return je.getSequenceScheduleItems(s,i).catch(console.error)},loadEpisodeScheduleItems:function(e,t){e.commit;var s=t.production,i=t.taskType;return je.getEpisodeScheduleItems(s,i).catch(console.error)},saveScheduleItem:function(e,t){e.commit;return je.updateScheduleItem(t).catch(console.error)},loadMilestones:function(e){var t=e.commit,s=e.rootState,i=s.productions.currentProduction;return je.getMilestones(i).then((function(e){t(k["h"],e)})).catch(console.error)},saveMilestone:function(e,t){var s=e.commit,i=e.rootState,n=i.productions.currentProduction;return t.id?je.updateMilestone(t).then((function(e){s(k["g"],e)})).catch(console.error):je.createMilestone(n,t).then((function(e){s(k["g"],e)}))},deleteMilestone:function(e,t){var s=e.commit;e.rootState;return je.deleteMilestone(t).then((function(e){s(k["Ld"],e)})).catch(console.error)}},Le=(p={},Object(v["a"])(p,k["g"],(function(e,t){e.milestones[t.date]=t})),Object(v["a"])(p,k["h"],(function(e,t){e.milestones={},t.forEach((function(t){e.milestones[t.date]=t}))})),Object(v["a"])(p,k["Ld"],(function(e,t){delete e.milestones[t.date.format("YYYY-MM-DD")]})),Object(v["a"])(p,k["ke"],(function(e,t){this.currentScheduleItems=t})),Object(v["a"])(p,k["Vd"],(function(e){Object.assign(e,Object(g["a"])({},De))})),p),Fe={state:Me,getters:Ie,actions:$e,mutations:Le},Ne=s("0263"),qe=s("ef8b"),Re=s("e07d"),Be=s("fa53");m.a.use(f["a"]);var Ve={assetTypes:P,assets:O["a"],breakdown:F,customActions:G,login:Z,main:ae,people:ke["a"],playlists:Oe,productions:Ae["a"],news:he,notifications:be,schedule:Fe,shots:Ne["a"],tasks:Be["a"],taskTypes:qe["a"],taskStatus:Re["a"],user:we["a"]};t["a"]=new f["a"].Store({getters:i,strict:!0,modules:Ve})},"43ea":function(e,t,s){},"440f":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{modal:!0,"is-active":e.active}},[s("div",{staticClass:"modal-background",on:{click:function(t){return e.$emit("cancel")}}}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box content"},[s("h1",{staticClass:"title"},[e._v(" "+e._s(e.$t("main.csv.import_title"))+" ")]),s("p",{staticClass:"description"},[e._v(" "+e._s(e.$t("main.csv.required_fields"))+" "),s("ul",e._l(e.columns,(function(t){return s("li",{key:t},[e._v(" "+e._s(t)+" ")])})),0)]),s("tabs",{on:{update:e.onTabUpdate}},[s("tab",{attrs:{name:e.$t("main.csv.tab_select_file"),selected:!0}},[s("p",[e._v(" "+e._s(e.$t("main.csv.select_file"))+" ")]),s("file-upload",{ref:"inputFile",attrs:{label:e.$t("main.csv.upload_file")},on:{fileselected:e.onFileSelected}})],1),s("tab",{attrs:{name:e.$t("main.csv.tab_paste_code")}},[s("p",[e._v(" "+e._s(e.$t("main.csv.paste_code"))+" ")]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.pastedCode,expression:"pastedCode"}],staticClass:"paste-area",attrs:{placeholder:e.pasteAreaPlacholder},domProps:{value:e.pastedCode},on:{input:function(t){t.target.composing||(e.pastedCode=t.target.value)}}})])],1),s("modal-footer",{attrs:{"confirm-label":e.$t("main.csv.preview"),"error-text":e.$t("main.csv.error_upload"),"is-loading":e.isLoading,"is-disabled":void 0===e.formData,"is-error":e.isError},on:{confirm:e.onConfirmClicked,cancel:function(t){return e.$emit("cancel")}}})],1)])])},n=[],a=(s("d3b7"),s("ac1f"),s("25f0"),s("5319"),s("5530")),o=s("2f62"),r=s("d065"),c=s("4085"),l=s("d5c9"),d=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"tabs"},[s("ul",e._l(e.tabs,(function(t,i){return s("li",{key:t.name,ref:"tab-"+i,refInFor:!0,class:{"is-active":t.isActive}},[s("a",{on:{click:function(s){return e.selectTab(t)}}},[e._v(" "+e._s(t.name)+" ")])])})),0)]),s("div",{staticClass:"tabs-details"},[e._t("default")],2)])},u=[],p=(s("4160"),s("b0c0"),s("159b"),{name:"tabs",data:function(){return{tabs:[]}},created:function(){this.tabs=this.$children},mounted:function(){this.$emit("update",this.tabs)},methods:{selectTab:function(e){this.tabs.forEach((function(t){t.isActive=t.name===e.name})),this.$emit("update",this.tabs)}}}),h=p,m=(s("4b24"),s("2877")),f=Object(m["a"])(h,d,u,!1,null,"2ac014c1",null),_=f.exports,v=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"show",rawName:"v-show",value:e.isActive,expression:"isActive"}]},[e._t("default")],2)},g=[],y={name:"tab",props:{name:{required:!0},selected:{default:!1}},data:function(){return{isActive:!1}},computed:{href:function(){return"#"+this.name.toLowerCase().replace(/ /g,"-")}},mounted:function(){this.isActive=this.selected}},b=y,k=Object(m["a"])(b,v,g,!1,null,null,null),w=k.exports,C={name:"import-people-modal",mixins:[r["a"]],components:{FileUpload:c["a"],ModalFooter:l["a"],Tabs:_,Tab:w},data:function(){return{formData:null,pastedCode:"",tabs:[]}},props:{active:{type:Boolean,default:!1},columns:{type:Array,default:function(){return[]}},isLoading:{type:Boolean,default:!1},isError:{type:Boolean,default:!1}},mounted:function(){this.formData=null},computed:Object(a["a"])(Object(a["a"])({},Object(o["c"])([])),{},{pasteAreaPlacholder:function(){var e=this.columns.toString();return e=e.replace(/,/g,";"),e}}),methods:Object(a["a"])(Object(a["a"])({},Object(o["b"])([])),{},{onTabUpdate:function(e){this.tabs=e},onFileSelected:function(e){this.formData=e},onConfirmClicked:function(){var e="",t=null;!0===this.tabs[0].isActive?(t=this.formData,e="file"):!0===this.tabs[1].isActive&&(t=this.pastedCode,e="text"),this.$emit("confirm",t,e)},reset:function(){this.$refs.inputFile.reset(),this.pastedCode=""}}),watch:{active:function(){this.reset()}}},S=C,T=(s("34a4"),Object(m["a"])(S,i,n,!1,null,"80c8e440",null));t["a"]=T.exports},4437:function(e,t,s){},"44e8":function(e,t,s){"use strict";var i=s("4437"),n=s.n(i);n.a},4636:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("combobox",{attrs:{label:e.label,disabled:e.disabled,options:e.booleanOptions,value:e.value},on:{input:e.emitValue,enter:e.emitEnter}})},n=[],a=s("992f"),o={name:"combobox-boolean",components:{Combobox:a["a"]},props:{label:{default:"",type:String},value:{default:"false",type:String},options:{default:function(){return[]},type:Array},disabled:{default:!1,type:Boolean}},data:function(){return{booleanOptions:[{label:this.$t("main.yes"),value:"true"},{label:this.$t("main.no"),value:"false"}]}},computed:{},methods:{emitValue:function(e){this.$emit("input",e)},emitEnter:function(e){this.$emit("enter",e)}}},r=o,c=s("2877"),l=Object(c["a"])(r,i,n,!1,null,"5da9e2c2",null);t["a"]=l.exports},4678:function(e,t,s){var i={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function n(e){var t=a(e);return s(t)}function a(e){if(!s.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}n.keys=function(){return Object.keys(i)},n.resolve=a,e.exports=n,n.id="4678"},4736:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"production-name"},[s("router-link",{staticClass:"flexrow",attrs:{title:e.productionInfo,to:e.productionRoute}},[e.withAvatar?s("div",{staticClass:"flexrow-item avatar has-text-centered",style:{background:e.getAvatarColor(e.project),width:e.size+"px",height:e.size+"px","font-size":e.size-15+"px","line-height":e.size+"px"}},[e.project.has_avatar?s("img",{style:{width:e.size+"px",height:e.size+"px"},attrs:{src:e.getThumbnailPath(e.project)}}):s("span",[e._v(" "+e._s(e.generateAvatar(e.project))+" ")])]):e._e(),e.onlyAvatar?e._e():s("span",{staticClass:"flexrow-item avatar-name"},[e._v(" "+e._s(e.project.name)+" ")])])],1)},n=[],a=(s("99af"),s("b0c0"),s("a9e3"),s("5530")),o=s("7930"),r=s("2f62"),c={name:"production-name",props:{project:{default:function(){},type:Object},size:{default:40,type:Number},onlyAvatar:{default:!1,type:Boolean},withAvatar:{default:!0,type:Boolean},lastProductionScreen:{default:"assets",type:String}},computed:Object(a["a"])(Object(a["a"])({},Object(r["c"])([])),{},{productionRoute:function(){var e={name:this.lastProductionScreen,params:{production_id:this.project.id}};return this.project.first_episode_id&&(e.name="episode-".concat(this.lastProductionScreen),e.params.episode_id=this.project.first_episode_id),e},productionInfo:function(){var e=this.project.fps,t=this.project.ratio,s=this.project.resolution;return e||t||s?"fps: ".concat(e,"\nratio: ").concat(t,"\nresolution: ").concat(s):""}}),methods:Object(a["a"])(Object(a["a"])({},Object(r["b"])([])),{},{generateAvatar:function(e){var t=e.name.length>0?e.name[0]:"P";return t.toUpperCase()},getAvatarColor:function(e){return o["a"].fromString(e.name)},getThumbnailPath:function(e){return"/api/pictures/thumbnails/projects/".concat(e.id,".png")}})},l=c,d=(s("3388"),s("2877")),u=Object(d["a"])(l,i,n,!1,null,"3908ad35",null);t["a"]=u.exports},"484d":function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));s("c740"),s("4160"),s("a434"),s("159b"),s("bf19");var i=s("5530"),n=s("2f62"),a=s("7a94"),o={data:function(){return{isShowingPalette:!1,isShowingPencilPalette:!1}},created:function(){this.resetUndoStacks()},mounted:function(){},beforeDestroy:function(){},computed:Object(i["a"])(Object(i["a"])({},Object(n["c"])([])),{},{annotationCanvas:function(){return this.$refs["annotation-canvas"]}}),methods:{resetUndoStacks:function(){this.$options.doneActionStack=[],this.$options.undoneActionStack=[]},isEmptyCanvas:function(){return!this.fabricCanvas||this.fabricCanvas.getObjects().length>0},getNewAnnotations:function(e,t){var s=this;if(this.fabricCanvas.getObjects().forEach((function(e){"path"===e.type&&(e.canvasWidth||(e.canvasWidth=s.fabricCanvas.width),e.setControlsVisibility({mt:!1,mb:!1,ml:!1,mr:!1,bl:!1,br:!1,tl:!1,tr:!1,mtr:!1}))})),t){if(t.drawing=this.fabricCanvas.toJSON(["canvasWidth"]),t.width=this.fabricCanvas.width,t.height=this.fabricCanvas.height,t.time=e,t.drawing&&t.drawing.objects.length<1){var n=this.annotations.findIndex((function(t){return t.time===e}));this.annotations.splice(n,1)}}else this.annotations.push({time:e,width:this.fabricCanvas.width,height:this.fabricCanvas.height,drawing:this.fabricCanvas.toJSON(["canvasWidth"])}),this.annotations=this.annotations.sort((function(e,t){return e.time<t.time}))||[];var a=[];return this.annotations.forEach((function(e){return a.push(Object(i["a"])({},e))})),a},onPickPencil:function(){this.isShowingPencilPalette=!this.isShowingPencilPalette},onPickColor:function(){this.isShowingPalette=!this.isShowingPalette},onChangeColor:function(e){this.color=e,this.fabricCanvas.freeDrawingBrush.color=this.color,this.isShowingPalette=!1},onChangeTextColor:function(e){this.textColor=e,this.isShowingPalette=!1},onChangePencil:function(e){this.pencil=e;var t={big:4,medium:2,small:1},s=t[e];this.fabricCanvas.freeDrawingBrush.width=s,this.isShowingPalette=!1},stackAddAction:function(e){var t=e.target;this.$options.doneActionStack.push({type:"add",obj:t}),t.lockScalingX=!0,t.lockScalingY=!0,t.rotation=!0},undoLastAction:function(){var e=this.$options.doneActionStack.pop();e&&e.obj&&("add"===e.type?this.deleteObject(e.obj):"remove"===e.type&&this.addObject(e.obj),this.$options.doneActionStack.pop(),this.$options.undoneActionStack.push(e))},redoLastAction:function(){var e=this.$options.undoneActionStack.pop();e&&("add"===e.type?this.addObject(e.obj):"remove"===e.type&&this.deleteObject(e.obj))},deleteSelection:function(){var e=this.fabricCanvas.getActiveObject();this.deleteObject(e)},deleteObject:function(e){var t=this;e&&e._objects?e._objects.forEach((function(e){t.fabricCanvas.remove(e)})):this.fabricCanvas.remove(e),this.$options.doneActionStack.push({type:"remove",obj:e}),this.saveAnnotations()},addObject:function(e){var t=this;e._objects?e._objects.forEach((function(e){t.fabricCanvas.add(e),t.$options.doneActionStack.pop()})):this.fabricCanvas.add(e),this.$options.doneActionStack.push({type:"add",obj:e}),this.saveAnnotations()},addText:function(){var e=this,t=this.canvas||this.canvasWrapper,s=t.getBoundingClientRect(),i=event.clientX-s.x,n=event.clientY-s.y,o=320,r=12;this.fabricCanvas.getHeight()>o&&(r*=this.fabricCanvas.getHeight()/o);var c=new a["fabric"].IText("Type...",{left:i,top:n,fontFamily:"arial",fill:this.textColor,fontSize:r});this.fabricCanvas.add(c),this.fabricCanvas.setActiveObject(c),c.enterEditing(),c.selectAll(),c.hiddenTextarea.onblur=function(){e.saveAnnotations()}},clearUndoneStack:function(){this.$options.undoneActionStack=[]},reloadAnnotations:function(){if(this.annotations=[],this.preview.annotations){var e=[];this.preview.annotations.forEach((function(t){return e.push(Object(i["a"])({},t))})),this.annotations=e.sort((function(e,t){return e.time<t.time}))||[]}else this.annotations=[];return this.annotations},setupFabricCanvas:function(){var e=this;if(this.annotationCanvas){var t=this.annotationCanvas.id;return this.fabricCanvas=new a["fabric"].Canvas(t),this.fabricCanvas.on("object:moved",this.saveAnnotations),this.fabricCanvas.on("object:added",this.stackAddAction),this.fabricCanvas.on("mouse:up",(function(){e.isDrawing&&(e.clearUndoneStack(),e.saveAnnotations())})),this.fabricCanvas.setDimensions({width:100,height:100}),this.fabricCanvas.freeDrawingBrush.color=this.color,this.fabricCanvas.freeDrawingBrush.width=4,this.fabricCanvas}},clearCanvas:function(){this.fabricCanvas&&this.fabricCanvas.clear()},addTypeArea:function(){var e=a["fabric"].IText.prototype.initHiddenTextarea;a["fabric"].util.object.extend(a["fabric"].IText.prototype,{initHiddenTextarea:function(){e.call(this),this.canvas.wrapperEl.appendChild(this.hiddenTextarea)}})},isFullScreen:function(){return!!(document.fullScreen||document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement||document.fullscreenElement)},removeTypeArea:function(){var e=a["fabric"].IText.prototype.initHiddenTextarea;a["fabric"].util.object.extend(a["fabric"].IText.prototype,{initHiddenTextarea:function(){e.call(this),a["fabric"].document.body.appendChild(this.hiddenTextarea)}})}}}},"487c":function(e,t,s){"use strict";s("99af"),s("b0c0"),s("d3b7");var i=s("edbf");t["a"]={getPlaylists:function(e,t,s){var n="/api/data/projects/".concat(e.id);n+=t?"/episodes/".concat(t.id,"/playlists"):"/playlists",i["a"].get(n,s)},getPlaylist:function(e,t,s){var n="/api/data/projects/".concat(e.id,"/playlists/").concat(t.id);i["a"].get(n,s)},getEntityPreviewFiles:function(e,t){var s="/api/data/playlists/entities/".concat(e.id,"/preview-files");return i["a"].pget(s)},newPlaylist:function(e){var t={name:e.name,project_id:e.production_id,episode_id:e.episode_id,for_client:e.for_client,for_entity:e.for_entity,is_for_all:e.is_for_all};return i["a"].ppost("/api/data/playlists/",t)},updatePlaylist:function(e,t){var s={};e.name&&(s.name=e.name),void 0!==e.for_client&&(s.for_client=e.for_client),e.shots&&(s.shots=e.shots),e.for_entity&&(s.for_entity=e.for_entity),i["a"].put("/api/data/playlists/".concat(e.id),s,t)},deletePlaylist:function(e,t){i["a"].del("/api/data/playlists/".concat(e.id),t)},deleteBuildJob:function(e,t){return new Promise((function(t,s){var n="/api/data/playlists/".concat(e.playlist_id,"/jobs/").concat(e.id);i["a"].del(n,(function(e){e?s(e):t()}))}))},runPlaylistBuild:function(e){return new Promise((function(t,s){var n="/api/data/playlists/".concat(e.id,"/build/mp4");i["a"].get(n,(function(e){e?s(e):t()}))}))},loadTempPlaylist:function(e,t){var s="/api/data/projects/".concat(e.id,"/playlists/temp");return i["a"].ppost(s,{task_ids:t})}}},"48c6":function(e,t,s){"use strict";s("caad"),s("d3b7");var i=s("db82"),n=s.n(i),a=s("4360"),o=s("9fb0"),r={logIn:function(e,t,s){n.a.post("/api/auth/login").send({email:e,password:t}).end((function(e,t){if(e)t.body.default_password&&(e.default_password=t.body.default_password,e.token=t.body.token),s(e);else if(t.body.login){var i=t.body.user,n=t.body.ldap;a["a"].commit(o["ab"],{isLdap:n}),s(null,i)}else a["a"].commit(o["if"]),s(new Error("Login failed"))}))},logout:function(e){n.a.get("/api/auth/logout").end((function(t,s){t&&(console.error(t),e(t)),a["a"].commit(o["jf"]),e()}))},resetPassword:function(e){return new Promise((function(t,s){n.a.post("/api/auth/reset-password").send({email:e}).end((function(e,i){e?s(e):t()}))}))},resetChangePassword:function(e,t,s){return new Promise((function(i,a){n.a.put("/api/auth/reset-password").send({token:e,password:t,password2:s}).end((function(e,t){e?a(e):i()}))}))},isServerLoggedIn:function(e){n.a.get("/api/auth/authenticated").end((function(t,s){if(t&&s&&[401,422].includes(s.statusCode))a["a"].commit(o["if"]),e(null);else if(t)a["a"].commit(o["if"]),e(t);else if(s&&null===s.body)a["a"].commit(o["if"]),e(t);else{var i=s.body.user,n=s.body.organisation||{},r=s.body.ldap;n.use_original_file_name=n.use_original_file_name?"true":"false",a["a"].commit(o["te"],n),a["a"].commit(o["hf"],i),e(null,r)}}))},requireAuth:function(e,t,s){var i=function(t){a["a"].state.user.isAuthenticated?(a["a"].commit(o["ab"],{isLdap:t}),s()):a["a"].dispatch("getOrganisation").then((function(){s({path:"/login",query:{redirect:e.fullPath}})})).catch((function(t){console.error(t),s({path:"/login",query:{redirect:e.fullPath}})}))};null===a["a"].state.user.user?r.isServerLoggedIn((function(t,n){t?s({path:"/server-down",query:{redirect:e.fullPath}}):i(n)})):i()},isPasswordValid:function(e,t){return e.length>6&&e===t}};t["a"]=r},4918:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{modal:!0,"is-active":e.active}},[s("div",{staticClass:"modal-background",on:{click:function(t){return e.$emit("cancel")}}}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box content"},[s("h1",{staticClass:"title"},[e._v(" "+e._s(e.$t("main.csv.preview_title"))+" ")]),s("div",{staticClass:"description"},[s("div",{staticClass:"flex-item"},[s("p",[e._v(" "+e._s(e.$t("main.csv.preview_description"))+" "),s("br"),e._v(" "+e._s(e.$t("main.csv.preview_required"))+" ")]),s("div",{directives:[{name:"show",rawName:"v-show",value:!e.disableUpdate,expression:"!disableUpdate"}]},[s("h2",{staticClass:"legend-title"},[e._v(e._s(e.$t("main.csv.options.title")))]),s("checkbox",{attrs:{toggle:!0,label:e.$t("main.csv.options.update")},model:{value:e.updateData,callback:function(t){e.updateData=t},expression:"updateData"}})],1)]),s("div",{staticClass:"flex-item"},[s("ul",{staticClass:"legend"},[s("li",{staticClass:"legend-definition"},[s("span",{staticClass:"legend-term"}),e._v(" "+e._s(e.$t("main.csv.legend_ok"))+" ")]),s("li",{staticClass:"legend-definition"},[s("span",{staticClass:"legend-term ignored"}),e._v(" "+e._s(e.$t("main.csv.legend_ignored"))+" ")]),s("li",{staticClass:"legend-definition"},[s("span",{staticClass:"legend-term missing"}),e._v(" "+e._s(e.$t("main.csv.legend_missing"))+" ")]),s("li",{staticClass:"legend-definition"},[s("span",{staticClass:"legend-term disabled"}),e._v(" "+e._s(e.$t("main.csv.legend_disabled"))+" ")]),s("li",{directives:[{name:"show",rawName:"v-show",value:!e.disableUpdate,expression:"!disableUpdate"}],staticClass:"legend-definition"},[s("span",{staticClass:"legend-term overwrite"}),e._v(" "+e._s(e.$t("main.csv.legend_overwrite"))+" ")])])])]),s("div",{staticClass:"render-container"},[s("table",{staticClass:"render"},[s("colgroup",[e._l(e.parsedCsv[0],(function(t,i){return s("col",{key:"col-"+i,class:e.stateColumn(t)})})),e._l(e.columnsRequired,(function(e){return s("col",{key:"col-missing-"+e,staticClass:"missing"})}))],2),s("thead",[s("tr",{staticClass:"render-headers"},[e._l(e.parsedCsv[0],(function(t,i){return s("th",{key:"header-"+i},[s("div",{staticClass:"render-select"},[s("combobox",{attrs:{options:e.columnOptions,value:t,error:e.isDuplicated(i)},on:{input:e.checkForDuplicate},model:{value:e.columnSelect[i],callback:function(t){e.$set(e.columnSelect,i,t)},expression:"columnSelect[index]"}})],1),e._v(" "+e._s(t||"-")+" ")])})),e._l(e.columnsRequired,(function(t){return s("th",{key:"header-"+t},[e._v(" "+e._s(t)+" ")])}))],2)]),s("tbody",e._l(e.startFrom(e.parsedCsv,1),(function(t,i){return t&&t.length>1?s("tr",{key:"line-"+i,class:{overwrite:e.updateData&&e.existingData(i),disabled:!e.updateData&&e.existingData(i)}},[e._l(t,(function(t,i){return s("td",{key:"cell-"+i},[e._v(" "+e._s(t||"-")+" ")])})),e._l(e.columnsRequired,(function(t){return s("td",{key:"cell-"+t},[e._v(" "+e._s("-")+" ")])}))],2):e._e()})),0)])]),s("div",{staticClass:"render-footer"},[s("button-simple",{attrs:{text:e.$t("main.csv.preview_reupload")},on:{click:e.onReupload}}),s("modal-footer",{attrs:{"error-text":e.$t("main.csv.error_upload"),"is-loading":e.isLoading,"is-disabled":void 0===e.formData,"is-error":e.isError},on:{confirm:e.onConfirmClicked,cancel:function(t){return e.$emit("cancel")}}})],1)])])])},n=[],a=(s("4de4"),s("4160"),s("caad"),s("c975"),s("fb6a"),s("b0c0"),s("2532"),s("159b"),s("2909")),o=s("5530"),r=s("2f62"),c=s("d065"),l=s("992f"),d=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"field"},[s("div",{class:{"checkbox-field":!0,toggle:e.toggle}},[s("input",{ref:"checkbox",staticClass:"visuallyhidden",attrs:{type:"checkbox",id:e.id,disabled:e.disabled},domProps:{checked:e.checked},on:{change:function(t){return e.updateStatus()}}}),s("label",{attrs:{for:e.id}},[s("span",[e._v(e._s(e.label))])])])])},u=[],p={name:"checkbox",model:{prop:"checked",event:"change"},props:{disabled:{default:!1,type:Boolean},label:{default:"",type:String,required:!0},checked:{default:!1,type:Boolean},toggle:{type:Boolean,default:!1}},data:function(){return{id:null}},mounted:function(){this.id=this._uid},computed:{},methods:{updateStatus:function(){this.$emit("change",this.$refs.checkbox.checked)}}},h=p,m=(s("9bb3"),s("2877")),f=Object(m["a"])(h,d,u,!1,null,"98810fa2",null),_=f.exports,v=s("de40"),g=s("d5c9"),y={name:"import-render-modal",mixins:[c["a"]],components:{ButtonSimple:v["a"],Combobox:l["a"],Checkbox:_,ModalFooter:g["a"]},data:function(){return{duplicates:[],formData:null,form:{name:""},updateData:!1}},props:{active:{type:Boolean,default:!1},parsedCsv:{type:Array,default:function(){return[]}},columns:{type:Array,default:function(){return[]}},dataMatchers:{type:Array,default:function(){return[]}},database:{type:Object,default:function(){}},disableUpdate:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},isError:{type:Boolean,default:!1}},mounted:function(){this.formData=null},computed:Object(o["a"])(Object(o["a"])({},Object(r["c"])(["assetMetadataDescriptors","isTVShow","shotMetadataDescriptors"])),{},{columnsRequired:function(){var e=this;return 0!==this.parsedCsv.length?this.columns.filter((function(t){return!e.parsedCsv[0].includes(t)})):void 0},metadataDescriptors:function(){return this.$route.path.indexOf("assets")>0?this.assetMetadataDescriptors:this.shotMetadataDescriptors},columnsAllowed:function(){var e=Object(a["a"])(this.columns);return this.metadataDescriptors.forEach((function(t){e.includes(t.name)||e.push(t.name)})),e},columnOptions:function(){var e=[{label:this.$t("main.csv.choose"),value:this.$t("main.csv.unknown")}];return this.columnsAllowed.forEach((function(t){e.push({label:t,value:t})})),e},columnSelect:function(){return this.parsedCsv[0]},indexMatchers:function(){var e=this,t=[];return this.dataMatchers.forEach((function(s){t.push(e.parsedCsv[0].indexOf(s))})),t}}),methods:Object(o["a"])(Object(o["a"])({},Object(r["b"])([])),{},{onConfirmClicked:function(){this.$emit("confirm",this.parsedCsv,this.updateData)},onReupload:function(){this.$emit("reupload")},startFrom:function(e,t){return e.slice(t)},stateColumn:function(e){if(!this.columnsAllowed.includes(e))return"ignored"},checkForDuplicate:function(){var e=this,t=this.$t("main.csv.unknown");this.duplicates=this.columnSelect.filter((function(t,s){return e.columnSelect.indexOf(t)!==s})).filter((function(e){return e!==t}))},isDuplicated:function(e){if(this.duplicates.includes(this.columnSelect[e]))return!0},existingData:function(e){var t=this.parsedCsv[e+1],s=this.database,i=this.indexMatchers,n="";return i.forEach((function(e){n+=t[e]})),s[n]}})},b=y,k=(s("5645"),Object(m["a"])(b,i,n,!1,null,"ab4aa2e2",null));t["a"]=k.exports},"4b24":function(e,t,s){"use strict";var i=s("ba8a"),n=s.n(i);n.a},"4bd6":function(e,t,s){},"4cd2":function(e,t,s){"use strict";var i=s("9877"),n=s.n(i);n.a},"4ce0":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",e._l(e.checklist,(function(t,i){return s("div",{key:"comment-checklist--"+i,class:{"checklist-entry":!0,flexrow:!0,checked:t.checked}},[s("span",{staticClass:"flexrow-item",on:{click:function(s){return e.toggleEntryChecked(t)}}},[t.checked?s("check-square-icon",{staticClass:"icon"}):s("square-icon",{staticClass:"icon"})],1),s("textarea-autosize",{ref:"checklist-entry-"+i,refInFor:!0,staticClass:"checklist-text flexrow-item",attrs:{type:"text",rows:"1",placeholder:e.$t("comments.task_placeholder")},nativeOn:{keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.addChecklistEntry(i,t))},keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"backspace",void 0,t.key,void 0)?null:e.removeChecklistEntry(i)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:e.focusPrevious(i)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:e.focusNext(i)}]},model:{value:t.text,callback:function(s){e.$set(t,"text",s)},expression:"entry.text"}})],1)})),0)},n=[],a=(s("498a"),s("0a35")),o={name:"checklist",components:{CheckSquareIcon:a["e"],SquareIcon:a["N"]},props:{checklist:{default:function(){return[]},type:Array}},methods:{addChecklistEntry:function(e,t){var s=this;t&&(this.checklist[e].text=this.checklist[e].text.trim()),-1!==e&&e!==this.checklist.length-1||this.checklist.push({text:"",checked:!1}),this.$nextTick((function(){s.focusNext(e)}))},removeChecklistEntry:function(e){var t=this.checklist[e];0===t.text.length&&(this.$emit("remove-task",t),this.focusPrevious(e))},focusPrevious:function(e){if(this.checklist.length>0){0===e&&(e=this.checklist.length),e--;var t="checklist-entry-".concat(e);this.$refs[t][0].$el.focus()}},focusNext:function(e){if(this.checklist.length>0){e===this.checklist.length-1&&(e=-1),e++;var t="checklist-entry-".concat(e);this.$refs[t][0].$el.focus()}},toggleEntryChecked:function(e){e.checked=!e.checked,this.$emit("emit-change")}}},r=o,c=(s("02b9"),s("2877")),l=Object(c["a"])(r,i,n,!1,null,"fed2ad20",null);t["a"]=l.exports},"4d04":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{ref:"wrapper",staticClass:"flexrow search-field-wrapper",on:{click:e.focus}},[s("div",{staticClass:"flexrow-item"},[s("search-icon",{staticClass:"search-icon"})],1),s("div",{staticClass:"flexrow-item search-field"},[s("input",{directives:[{name:"focus",rawName:"v-focus"}],ref:"input",staticClass:"search-input",attrs:{type:"text",placeholder:e.placeholder},on:{input:e.onSearchChange,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSaveClicked(t)},focus:e.setFocusedStyle,blur:e.unsetFocusedStyle}})]),s("div",{staticClass:"flexrow-item erase-search"},[s("span",{staticClass:"tag",on:{click:e.clearSearch}},[e._v(" x ")])]),e.canSave?s("div",{staticClass:"flexrow-item save-search"},[s("button",{staticClass:"button save-button",on:{click:e.onSaveClicked}},[s("save-icon",{staticClass:"icon is-small only-icon"})],1)]):e._e()])},n=[],a=(s("498a"),s("0a35")),o={name:"search-field",data:function(){return{}},props:{placeholder:{type:String,default:""},canSave:{type:Boolean,default:!1}},components:{SaveIcon:a["J"],SearchIcon:a["K"]},computed:{},methods:{onSearchChange:function(){this.$emit("change",this.$refs.input.value)},onSaveClicked:function(){var e=this.$refs.input.value.trim();e.length>0&&this.canSave&&this.$emit("save",e)},getValue:function(e){return this.$refs.input.value},setValue:function(e){this.$refs.input.value=e},focus:function(){this.$refs.input.focus()},clearSearch:function(){this.setValue(""),this.onSearchChange()},setFocusedStyle:function(){this.$refs.wrapper.className="flexrow search-field-wrapper focused"},unsetFocusedStyle:function(){this.$refs.wrapper.className="flexrow search-field-wrapper"}}},r=o,c=(s("4cd2"),s("2877")),l=Object(c["a"])(r,i,n,!1,null,"16287d36",null);t["a"]=l.exports},"4dac":function(e,t,s){},"4f18":function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var i=s("5530"),n=s("2f62"),a={created:function(){},mounted:function(){},beforeDestroy:function(){},computed:Object(i["a"])({},Object(n["c"])(["organisation"])),methods:{formatDuration:function(e){return e?(e/60/this.organisation.hours_by_day).toLocaleString("fullwide",{maximumFractionDigits:2}):0},formatBoolean:function(e){return e?this.$t("main.yes"):this.$t("main.no")}}}},"501a":function(e,t,s){},"51ca":function(e,t,s){"use strict";var i=s("bc80"),n=s.n(i);n.a},"52ad":function(e,t,s){"use strict";s("99af"),s("7db0"),s("c740"),s("4160"),s("d81d"),s("13d5"),s("a434"),s("b0c0"),s("d3b7"),s("07ac"),s("25f0"),s("159b");var i,n=s("ade3"),a=s("5530"),o=s("ba4c"),r=s.n(o),c=s("ce6b"),l=s("7930"),d=s("6185"),u=s("66e7"),p=s("2229"),h=s("2017"),m=s("ca76"),f=s("e07d"),_=s("9fb0"),v={addAdditionalInformation:function(e){if(e&&(e.first_name&&e.last_name?(e.name="".concat(e.first_name," ").concat(e.last_name),e.initials="".concat(e.first_name[0]).concat(e.last_name[0])):e.first_name?(e.name=e.first_name,e.initials=e.first_name[0]):e.last_name?(e.name=e.last_name,e.initials=e.last_name[0]):e.email?(e.name=e.email,e.initials=e.email[0]):e.initials="NN",r.a.set(e,"initials",e.initials.toUpperCase()),e.color=l["a"].fromString(e.name),e.has_avatar&&!e.uniqueHash)){var t=Math.random().toString(36).substring(7);r.a.set(e,"uniqueHash",t),e.avatarPath="/api/pictures/thumbnails/persons/".concat(e.id,".png")}return e},getTaskStatus:function(e){return f["a"].state.taskStatusMap[e]}},g={organisation:{name:"Kitsu",hours_by_day:8,has_avatar:!1,use_original_file_name:"false"},people:[],displayedPeople:[],peopleSearchText:"",peopleIndex:{},personMap:{},isPeopleLoading:!1,isPeopleLoadingError:!0,isImportPeopleModalShown:!1,isImportPeopleLoading:!1,isImportPeopleLoadingError:!1,isEditModalShown:!1,isEditLoading:!1,isEditLoadingError:!1,isDeleteModalShown:!1,isDeleteLoading:!1,isDeleteLoadingError:!1,personCsvFormData:void 0,person:{},personTasks:[],displayedPersonTasks:[],displayedPersonDoneTasks:[],personTasksIndex:{},personTasksSearchText:"",personTaskSelectionGrid:{},personTaskSearchQueries:[],personTasksScrollPosition:0,timesheet:{},personTimeSpentMap:{},personTimeSpentTotal:0},y=Object(a["a"])({},g),b={organisation:function(e){return e.organisation},people:function(e){return e.people},displayedPeople:function(e){return e.displayedPeople},peopleIndex:function(e){return e.peopleIndex},personMap:function(e){return e.personMap},isPeopleLoading:function(e){return e.isPeopleLoading},isPeopleLoadingError:function(e){return e.isPeopleLoadingError},isImportPeopleModalShown:function(e){return e.isImportPeopleModalShown},isImportPeopleLoading:function(e){return e.isImportPeopleLoading},isImportPeopleLoadingError:function(e){return e.isImportPeopleLoadingError},isDeleteModalShown:function(e){return e.isDeleteModalShown},isDeleteLoading:function(e){return e.isDeleteLoading},isDeleteLoadingError:function(e){return e.isDeleteLoadingError},isEditModalShown:function(e){return e.isEditModalShown},isEditLoading:function(e){return e.isEditLoading},isEditLoadingError:function(e){return e.isEditLoadingError},personCsvFormData:function(e){return e.personCsvFormData},displayedPersonTasks:function(e){return e.displayedPersonTasks},displayedPersonDoneTasks:function(e){return e.displayedPersonDoneTasks},personTasksSearchText:function(e){return e.personTasksSearchText},personTaskSearchQueries:function(e){return e.personTaskSearchQueries},personTaskSelectionGrid:function(e){return e.personTaskSelectionGrid},personTasksScrollPosition:function(e){return e.personTasksScrollPosition},getPerson:function(e,t){return function(t){return e.personMap[t]}},getPersonOptions:function(e){return e.people.map((function(e){return{label:"".concat(e.first_name," ").concat(e.last_name),value:e.id}}))},timesheet:function(e){return e.timesheet},personTimeSpentMap:function(e){return e.personTimeSpentMap},personTimeSpentTotal:function(e){return e.personTimeSpentTotal}},k={getOrganisation:function(e){var t=e.commit;return c["a"].getOrganisation().then((function(e){t(_["te"],e)}))},saveOrganisation:function(e,t){var s=e.commit;return t.id=y.organisation.id,c["a"].updateOrganisation(t).then((function(e){s(_["te"],e),Promise.resolve(e)}))},uploadOrganisationLogo:function(e,t){var s=e.commit,i=e.state;return new Promise((function(e,n){var a=i.organisation.id;c["a"].postOrganisationLogo(a,t).then((function(t){s(_["te"],{has_avatar:!0}),e()})).catch(n)}))},loadPeople:function(e,t){var s=e.commit;e.state;s(_["sc"]),c["a"].getPeople((function(e,i){e?s(_["rc"]):s(_["qc"],i.map((function(e){return e.departments=e.departments||"",e}))),t&&t(e)}))},loadPerson:function(e,t){e.commit,e.state;c["a"].getPerson(t,(function(e,t){e&&console.error(e)}))},newPerson:function(e,t){var s=e.commit;e.state;return c["a"].createPerson(t).then((function(e){s(_["Bb"],e),Promise.resolve()}))},newPersonAndInvite:function(e,t){var s=e.commit;e.state;return c["a"].createPerson(t).then(c["a"].invitePerson).then((function(e){s(_["Bb"],e),Promise.resolve()}))},invitePerson:function(e,t){e.commit,e.state;return c["a"].invitePerson(t)},editPerson:function(e,t){var s=e.commit;e.state;return c["a"].updatePerson(t).then((function(e){s(_["Bb"],e),Promise.resolve()}))},deletePeople:function(e,t){var s=e.commit;e.state;return c["a"].deletePerson(t).then((function(){s(_["fb"]),Promise.resolve()}))},uploadPersonFile:function(e,t){var s=e.commit,i=e.state;return s(_["Vb"]),c["a"].postCsv(i.personCsvFormData,t).then((function(){s(_["Tb"]),Promise.resolve()})).catch((function(e){s(_["Ub"]),Promise.reject(e)}))},loadPersonTasks:function(e,t){var s=e.commit,i=(e.state,e.rootGetters),n=t.personId,a=(t.forced,t.date),o=t.callback,r=i.userFilters,l=i.taskTypeMap;s(_["uc"],{personId:n,tasks:[],userFilters:r,taskTypeMap:l}),s(_["tc"],[]),c["a"].getPersonTasks(n,(function(e,t){e&&(t=[]),c["a"].getPersonDoneTasks(n,(function(e,i){e&&(i=[]),s(_["tc"],i),c["a"].getTimeSpents(n,a,(function(e,i){e&&(i=[]),s(_["ud"],i),s(_["uc"],{personId:n,tasks:t,userFilters:r,taskTypeMap:l}),o&&o(e)}))}))}))},loadAggregatedPersonTimeSpents:function(e,t){e.commit,e.state,e.rootGetters;var s=t.personId,i=t.detailLevel,n=t.year,a=t.month,o=t.week,r=t.day;return new Promise((function(e,t){c["a"].getAggregatedPersonTimeSpents(s,i,n,a,o,r).then((function(t){e(t)})).catch((function(e){return t(e)}))}))},showPersonImportModal:function(e,t){var s=e.commit;e.state;s(_["Ge"])},hidePersonImportModal:function(e,t){var s=e.commit;e.state;s(_["Qb"])},setPersonTasksSearch:function(e,t){var s=e.commit;e.state;s(_["ve"],t)},savePersonTasksSearch:function(e,t){var s=e.commit;e.rootGetters;return new Promise((function(e,i){var n=y.personTaskSearchQueries.find((function(e){return e.name===t}));n?e():c["a"].createFilter("persontasks",t,t,null,null,(function(t,n){s(_["ae"],{searchQuery:n}),t?i(t):e(n)}))}))},removePersonTasksSearch:function(e,t){var s=e.commit;e.rootGetters;return new Promise((function(e,i){c["a"].removeFilter(t,(function(n){s(_["Md"],{searchQuery:t}),n?i(n):e()}))}))},setTimeSpent:function(e,t){var s=e.commit,i=t.personId,n=t.taskId,a=t.date,o=t.duration;return new Promise((function(e,t){c["a"].setTimeSpent(n,i,a,o,(function(i,n){i?t(i):(s(_["Ce"],n),e())}))}))},setPersonTasksScrollPosition:function(e,t){var s=e.commit;s(_["ue"],t)},loadTimesheets:function(e,t){var s=e.commit,i=t.detailLevel,n=t.year,a=t.month;return new Promise((function(e,t){var o=1===a.length?"0".concat(parseInt(a)+1):"".concat(a),r=c["a"].getMonthTable;"day"===i&&(r=c["a"].getDayTable),"week"===i&&(r=c["a"].getWeekTable),"year"===i&&(r=c["a"].getYearTable),r(n,o).then((function(t){s(_["sd"],t),e()})).catch(t)}))},peopleSearchChange:function(e,t){var s=e.commit;s(_["rd"],t)}},w=(i={},Object(n["a"])(i,_["sc"],(function(e){e.isPeopleLoading=!0,e.isPeopleLoadingError=!1,e.personMap={}})),Object(n["a"])(i,_["rc"],(function(e){e.isPeopleLoading=!1,e.isPeopleLoadingError=!0})),Object(n["a"])(i,_["qc"],(function(e,t){e.isPeopleLoading=!1,e.isPeopleLoadingError=!1,e.people=Object(p["f"])(t),e.displayedPeople=e.people,e.people.forEach((function(t){t=v.addAdditionalInformation(t),e.personMap[t.id]=t})),e.peopleIndex=Object(h["c"])(e.people)})),Object(n["a"])(i,_["fb"],(function(e,t){if(t){var s=e.people.findIndex((function(e){return e.id===t.id}));s>=0&&e.people.splice(s,1),delete e.personMap[t.id]}if(e.peopleIndex=Object(h["c"])(e.people),e.peopleSearchText){var i=Object(m["e"])(e.peopleSearchText);e.displayedPeople=Object(h["j"])(e.peopleIndex,i)}else e.displayedPeople=e.people})),Object(n["a"])(i,_["Bb"],(function(e,t){var s=Object(a["a"])({},t);s=v.addAdditionalInformation(s);var i=e.people.findIndex((function(e){return e.id===s.id}));if(s.name)if(i>=0?(e.personMap[s.id]=s,delete e.people[i],e.people[i]=e.personMap[s.id]):e.personMap[s.id]||(e.people.push(s),e.personMap[s.id]=s),e.people=Object(p["f"])(e.people),e.peopleIndex=Object(h["c"])(e.people),e.peopleSearchText){var n=Object(m["e"])(e.peopleSearchText);e.displayedPeople=Object(h["j"])(e.peopleIndex,n)}else e.displayedPeople=e.people})),Object(n["a"])(i,_["Vb"],(function(e,t){e.isImportPeopleLoading=!0,e.isImportPeopleLoadingError=!1})),Object(n["a"])(i,_["Tb"],(function(e,t){e.isImportPeopleLoading=!1,e.isImportPeopleLoadingError=!1})),Object(n["a"])(i,_["Ub"],(function(e){e.isImportPeopleLoading=!1,e.isImportPeopleLoadingError=!0})),Object(n["a"])(i,_["Ge"],(function(e){e.isImportPeopleModalShown=!0,e.isImportPeopleLoading=!1,e.isImportPeopleLoadingError=!1})),Object(n["a"])(i,_["Qb"],(function(e){e.isImportPeopleModalShown=!1})),Object(n["a"])(i,_["td"],(function(e,t){e.personCsvFormData=t})),Object(n["a"])(i,_["Xe"],(function(e,t){var s=e.personMap[t];if(s){var i=Math.random().toString(36).substring(7);s.has_avatar=!0,r.a.set(s,"uniqueHash",i),s.avatarPath="/api/pictures/thumbnails/persons/".concat(s.id,".png")}})),Object(n["a"])(i,_["uc"],(function(e,t){var s=t.personId,i=t.tasks,n=t.userFilters,a=t.taskTypeMap;e.person=e.personMap[s],i.forEach(u["e"]),i.forEach((function(e){var t=v.getTaskStatus(e.task_status_id);e.taskStatus=t}));for(var o={},r=0;r<i.length;r++)o[r]={0:!1};e.personTaskSelectionGrid=o,e.personTasks=Object(p["o"])(i,a),e.personTasksIndex=Object(h["g"])(i);var c=Object(m["e"])(e.personTasksSearchText),l=Object(h["j"])(e.personTasksIndex,c);e.displayedPersonTasks=l||e.personTasks,n.persontasks&&n.persontasks.all?e.personTaskSearchQueries=n.persontasks.all:e.personTaskSearchQueries=[]})),Object(n["a"])(i,_["tc"],(function(e,t){t.forEach(u["e"]),e.displayedPersonDoneTasks=t})),Object(n["a"])(i,_["ve"],(function(e,t){e.displayedPersonTasks=[];var s=Object(m["e"])(t),i=Object(h["j"])(e.personTasksIndex,s);e.personTasksSearchText=t,e.displayedPersonTasks=i||e.personTasks})),Object(n["a"])(i,_["ae"],(function(e,t){var s=t.searchQuery;e.personTaskSearchQueries.push(s),e.personTaskSearchQueries=Object(p["d"])(e.personTaskSearchQueries)})),Object(n["a"])(i,_["Md"],(function(e,t){var s=t.searchQuery,i=e.personTaskSearchQueries.findIndex((function(e){return e.name===s.name}));i>=0&&e.personTaskSearchQueries.splice(i,1)})),Object(n["a"])(i,_["od"],(function(e,t){var s=t.comment,i=t.taskId,n=e.personTasks.find((function(e){return e.id===i}));if(n){var a=v.getTaskStatus(s.task_status_id);Object.assign(n,{task_status_id:a.id,task_status_name:a.name,task_status_short_name:a.short_name,task_status_color:a.color}),e.personTasksIndex=Object(h["g"])(e.personTasks)}})),Object(n["a"])(i,_["Od"],(function(e,t){e.personTaskSelectionGrid[t.x]&&(e.personTaskSelectionGrid[t.x][0]=!1)})),Object(n["a"])(i,_["n"],(function(e,t){e.personTaskSelectionGrid[t.x]&&(e.personTaskSelectionGrid[t.x][0]=!0)})),Object(n["a"])(i,_["T"],(function(e,t){e.personTaskSelectionGrid=Object(d["c"])(e.personTaskSelectionGrid)})),Object(n["a"])(i,_["sd"],(function(e,t){e.timesheet=t})),Object(n["a"])(i,_["Ce"],(function(e,t){e.person.id===t.person_id&&(e.personTimeSpentMap[t.task_id]=t),e.personTimeSpentTotal=Object.values(e.personTimeSpentMap).reduce((function(e,t){return t.duration+e}),0)/60})),Object(n["a"])(i,_["ud"],(function(e,t){var s={};t.forEach((function(e){s[e.task_id]=e})),e.personTimeSpentMap=s,e.personTimeSpentTotal=Object.values(e.personTimeSpentMap).reduce((function(e,t){return t.duration+e}),0)/60})),Object(n["a"])(i,_["ue"],(function(e,t){e.personTasksScrollPosition=t})),Object(n["a"])(i,_["rd"],(function(e,t){if(t){var s=Object(m["e"])(t);e.displayedPeople=Object(h["j"])(e.peopleIndex,s),e.peopleSearchText=t}else e.displayedPeople=e.people,e.peopleSearchText=""})),Object(n["a"])(i,_["mf"],(function(e,t){var s=e.personMap[t.id];s&&(Object.assign(s,t),v.addAdditionalInformation(s))})),Object(n["a"])(i,_["te"],(function(e,t){Object.assign(e.organisation,t),e.organisation=Object(a["a"])({},e.organisation)})),Object(n["a"])(i,_["Vd"],(function(e,t){Object.assign(e,Object(a["a"])({},g))})),i);t["a"]={state:y,getters:b,actions:k,mutations:w,helpers:v}},5395:function(e,t,s){},"539a":function(e,t,s){},"54c5":function(e,t,s){"use strict";var i=s("db25"),n=s.n(i);n.a},"55ce":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"search-queries"},[e._l(e.userFilters,(function(t){return s("span",{key:t.id,staticClass:"tag flexrow",on:{click:function(s){return e.changeSearch(s,t)}}},[s("span",{staticClass:"flexrow-item"},[e._v(" "+e._s(t.name)+" ")]),s("button",{staticClass:"edit flexrow-item",on:{click:function(s){return s.preventDefault(),e.editSearch(t)}}},[s("edit2-icon",{staticClass:"edit-icon",attrs:{size:"0.6x"}})],1),s("button",{staticClass:"delete flexrow-item",on:{click:function(s){return s.preventDefault(),e.removeSearch(t)}}})])})),s("edit-search-filter-modal",{ref:"edit-search-modal",attrs:{active:e.modals.edit,"is-loading":e.loading.edit,"is-error":e.errors.edit,"search-query-to-edit":e.searchQueryToEdit},on:{cancel:function(t){e.modals.edit=!1},confirm:e.confirmEditSearch}})],2)},n=[],a=(s("caad"),s("5530")),o=s("2909"),r=s("2f62"),c=s("0a35"),l=s("2229"),d=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{modal:!0,"is-active":e.active}},[s("div",{staticClass:"modal-background",on:{click:function(t){return e.$emit("cancel")}}}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box"},[s("h1",{staticClass:"title"},[e._v(" "+e._s(e.$t("main.search_query_edit"))+" ")]),s("form",{on:{submit:function(e){e.preventDefault()}}},[s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"nameField",attrs:{label:e.$t("assets.fields.name")},on:{enter:e.runConfirmation},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"nameField",attrs:{label:e.$t("main.search_query")},on:{enter:e.runConfirmation},model:{value:e.form.search_query,callback:function(t){e.$set(e.form,"search_query",t)},expression:"form.search_query"}})],1),s("modal-footer",{attrs:{"error-text":e.$t("main.search_query_edit_error"),"is-error":e.isError,"is-loading":e.isLoading},on:{confirm:e.runConfirmation,cancel:function(t){return e.$emit("cancel")}}})],1)])])},u=[],p=(s("b0c0"),s("d065")),h=s("7bf8"),m=s("d5c9"),f={name:"edit-search-filter-modal",mixins:[p["a"]],components:{ModalFooter:m["a"],TextField:h["a"]},props:["active","isLoading","isError","searchQueryToEdit"],data:function(){return this.searchQueryToEdit&&this.searchQueryToEdit.id?{form:{text:this.searchQueryToEdit.text,task_status_id:this.searchQueryToEdit.task_status_id}}:{form:{text:"",task_status_id:null}}},computed:{},methods:{runConfirmation:function(e){e&&13!==e.keyCode&&e.keyCode||this.$emit("confirm",Object(a["a"])({id:this.searchQueryToEdit.id},this.form))}},watch:{searchQueryToEdit:function(){this.searchQueryToEdit&&this.searchQueryToEdit.id?(this.form.id=this.searchQueryToEdit.id,this.form.name=this.searchQueryToEdit.name,this.form.search_query=this.searchQueryToEdit.search_query):this.form={id:"",name:"",search_query:""}},active:function(){var e=this;this.active&&setTimeout((function(){e.$refs.nameField.focus()}),100)}}},_=f,v=s("2877"),g=Object(v["a"])(_,d,u,!1,null,"93cc40be",null),y=g.exports,b={name:"search-query-list",props:{queries:{type:Array,default:function(){return[]}}},components:{Edit2Icon:c["o"],EditSearchFilterModal:y},data:function(){return{searchQueryToEdit:{},errors:{edit:!1},loading:{edit:!1},modals:{edit:!1}}},computed:{userFilters:function(){return Object(l["d"])(Object(o["a"])(this.queries))}},methods:Object(a["a"])(Object(a["a"])({},Object(r["b"])(["updateSearchFilter"])),{},{changeSearch:function(e,t){var s=["delete flexrow","edit flexrow"].includes(e.target.className);s||this.$emit("change-search",t)},editSearch:function(e){this.searchQueryToEdit=e,this.modals.edit=!0},confirmEditSearch:function(e){var t=this;this.loading.edit=!0,this.updateSearchFilter(e).then((function(){t.loading.edit=!1,t.modals.edit=!1})).catch((function(e){console.error(e),t.loading.edit=!1,t.errors.edit=!0}))},removeSearch:function(e){this.$emit("remove-search",e)}})},k=b,w=(s("a068"),Object(v["a"])(k,i,n,!1,null,null,null));t["a"]=w.exports},"562d":function(e,t,s){"use strict";var i=s("1f87"),n=s.n(i);n.a},5645:function(e,t,s){"use strict";var i=s("6c09"),n=s.n(i);n.a},"56a0":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{field:!0,"field--narrow":e.narrow}},[e.label.length>0?s("label",{staticClass:"label"},[e._v(" "+e._s(e.label)+" ")]):e._e(),s("div",{staticClass:"status-combo"},[s("div",{staticClass:"flexrow",on:{click:e.toggleStatusList}},[s("div",{staticClass:"selected-status-line flexrow-item"},[e.currentStatus?s("span",{staticClass:"tag",style:{background:e.backgroundColor(e.currentStatus),color:e.color(e.currentStatus)}},[e._v(" "+e._s(e.currentStatus.short_name)+" ")]):e._e()]),s("chevron-down-icon",{staticClass:"down-icon flexrow-item"})],1),e.showStatusList?s("div",{ref:"select",staticClass:"select-input"},e._l(e.taskStatusList,(function(t){return s("div",{key:t.id,staticClass:"status-line",on:{click:function(s){return e.selectStatus(t)}}},[s("span",{staticClass:"tag",style:{background:e.backgroundColor(t),color:e.color(t)}},[e._v(" "+e._s(t.short_name)+" ")])])})),0):e._e()]),s("combobox-mask",{attrs:{displayed:e.showStatusList},on:{click:e.toggleStatusList}})],1)},n=[],a=s("5530"),o=s("2f62"),r=s("0a35"),c=s("7930"),l=s("dbde"),d={name:"combobox-status",components:{ChevronDownIcon:r["f"],ComboboxMask:l["a"]},data:function(){return{showStatusList:!1}},props:{label:{default:"",type:String},taskStatusList:{default:function(){return[]},type:Array},value:{default:"",type:String},narrow:{default:!1,type:Boolean}},mounted:function(){this.selectedTaskStatus=this.taskStatus},computed:Object(a["a"])(Object(a["a"])({},Object(o["c"])(["isDarkTheme","taskStatusMap"])),{},{currentStatus:function(){return this.value?this.taskStatusMap[this.value]:this.taskStatusList[0]}}),methods:{selectStatus:function(e){this.$emit("input",e.id),this.showStatusList=!1},backgroundColor:function(e){return e&&"todo"!==e.short_name||this.isDarkTheme?e&&"todo"!==e.short_name||!this.isDarkTheme?this.isDarkTheme?c["a"].darkenColor(e.color):e.color:"#5F626A":"#ECECEC"},color:function(e){return!e||"todo"!==e.short_name||this.isDarkTheme?"white":"#333"},toggleStatusList:function(){this.showStatusList=!this.showStatusList}}},u=d,p=(s("1c55"),s("2877")),h=Object(p["a"])(u,i,n,!1,null,"682afbd0",null);t["a"]=h.exports},"56d7":function(e,t,s){"use strict";s.r(t);s("e260"),s("e6cf"),s("cca6"),s("a79d");var i=s("ba4c"),n=s.n(i),a=s("31bd"),o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{theme:!0,dark:e.isDarkTheme}},[e.user&&e.isDataLoading?s("div",{staticClass:"has-text-centered mt2 loading-info"},[s("span",[e._v(e._s(e.$t("main.loading_data"))+"...")]),s("spinner",{staticClass:"mt2"})],1):s("router-view")],1)},r=[],c=(s("c975"),s("5530")),l=s("2f62"),d=s("be83"),u=s("db82"),p=s.n(u),h={init:function(e){var t=this;p.a.get("/api/config").end((function(s,i){if(s)console.error(s);else{var n=i.body.crisp_token;n&&n.length>0&&t.setup(n)}e&&e()}))},setup:function(e){function t(){var e=document,t=e.createElement("script");t.src="https://client.crisp.chat/l.js",t.async=1,e.getElementsByTagName("head")[0].appendChild(t)}window.$crisp=[],window.CRISP_WEBSITE_ID=e,t()}},m={name:"app",components:{Spinner:d["a"]},computed:Object(c["a"])({},Object(l["c"])(["assetMap","assetTypeMap","currentEpisode","currentProduction","episodeMap","isCurrentUserAdmin","isDataLoading","isDarkTheme","isLoginLoading","isSavingCommentPreview","isTVShow","route","personMap","productionMap","sequenceMap","shotMap","taskMap","taskStatusMap","taskTypeMap","user"])),mounted:function(){"true"!==localStorage.getItem("dark-theme")||this.isDarkTheme?(document.documentElement.style.background="#FFF",document.body.style.background="#FFF"):(this.$store.commit("TOGGLE_DARK_THEME"),document.documentElement.style.background="#36393F",document.body.style.background="#36393F"),h.init()},metaInfo:{link:[{rel:"icon",href:"/static/favicon.ico"}]},methods:Object(c["a"])(Object(c["a"])({},Object(l["b"])(["getOrganisation","loadTask","loadAsset","loadAssetType","loadComment","loadEpisode","loadOpenProductions","loadPerson","loadPersonTasks","loadProduction","loadSequence","loadShot","loadTaskStatus","loadTaskType","refreshMetadataDescriptor","removeAsset"])),{},{onAssignation:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],s=e.person_id,i=[e.task_id];t?this.$store.commit("ASSIGN_TASKS",{selectedTaskIds:i,personId:s}):this.$store.commit("UNASSIGN_TASKS",i),this.route.path.indexOf(e.person_id)>0&&this.loadPersonTasks({personId:e.person_id,forced:!0})}}),watch:{isDarkTheme:function(){this.isDarkTheme?(document.documentElement.style.background="#36393F",document.body.style.background="#36393F"):(document.documentElement.style.background="#FFF",document.body.style.background="#FFF")}},socket:{events:{"project:new":function(e){this.productionMap[e.project_id]||this.loadProduction(e.project_id)},"project:update":function(e){this.productionMap[e.project_id]?this.loadProduction(e.project_id):this.loadOpenProductions()},"project:delete":function(e){this.productionMap[e.project_id]&&this.$store.commit("REMOVE_PRODUCTION",{id:e.project_id})},"sequence:new":function(e){!this.sequenceMap[e.sequence_id]&&this.currentProduction&&this.currentProduction.id===e.project_id&&this.loadSequence(e.sequence_id)},"sequence:update":function(e){this.sequenceMap[e.sequence_id]&&this.loadSequence(e.sequence_id)},"sequence:delete":function(e){this.sequenceMap[e.sequence_id]&&this.$store.commit("REMOVE_SEQUENCE",{id:e.sequence_id})},"episode:new":function(e){!this.episodeMap[e.episode_id]&&this.currentProduction&&this.currentProduction.id===e.project_id&&this.loadEpisode(e.episode_id)},"episode:update":function(e){this.episodeMap[e.episode_id]&&this.loadEpisode(e.episode_id)},"episode:delete":function(e){this.episodeMap[e.episode_id]&&this.$store.commit("REMOVE_EPISODE",{id:e.episode_id})},"shot:new":function(e){var t=this;this.shotMap[e.shot_id]||!this.currentProduction||this.currentProduction.id!==e.project_id||this.isTVShow&&this.currentEpisode.id!==e.episode_id||setTimeout((function(){t.loadShot(e.shot_id)}),1e3)},"shot:update":function(e){this.shotMap[e.shot_id]&&this.loadShot(e.shot_id)},"shot:delete":function(e){this.shotMap[e.shot_id]&&this.$store.commit("REMOVE_SHOT",{id:e.shot_id})},"asset:new":function(e){var t=this;!this.assetMap[e.asset_id]&&this.currentProduction&&this.currentProduction.id===e.project_id&&setTimeout((function(){t.loadAsset(e.asset_id)}),1e3)},"asset:update":function(e){this.assetMap[e.asset_id]&&this.loadAsset(e.asset_id)},"asset:delete":function(e){this.assetMap[e.asset_id]&&this.$store.commit("REMOVE_ASSET",{id:e.asset_id})},"task:delete":function(e){var t=this.taskMap[e.task_id];t&&this.$store.commit("DELETE_TASK_END",t)},"task-type:new":function(e){this.taskTypeMap[e.task_type_id]||this.loadTaskType(e.task_type_id)},"task-type:update":function(e){},"task-type:delete":function(e){this.taskTypeMap[e.task_type_id]&&this.$store.commit("DELETE_TASK_TYPE_END",{id:e.task_type_id})},"task-status:new":function(e){this.taskStatusMap[e.task_status_id]||this.loadTaskStatus(e.task_status_id)},"task-status:update":function(e){this.taskStatusMap[e.task_status_id]&&this.loadTaskStatus(e.task_status_id)},"task-status:delete":function(e){this.taskStatusMap[e.task_status_id]&&this.$store.commit("DELETE_TASK_STATUS_END",{id:e.task_status_id})},"asset-type:new":function(e){this.assetTypeMap[e.asset_type_id]||this.loadAssetType(e.asset_type_id)},"asset-type:update":function(e){this.assetTypeMap[e.asset_type_id]&&this.loadAssetType(e.asset_type_id)},"asset-type:delete":function(e){this.assetTypeMap[e.asset_type_id]&&this.$store.commit("DELETE_ASSET_TYPE_END",{id:e.asset_type_id})},"person:new":function(e){this.personMap[e.person_id]||this.loadPerson(e.person_id)},"person:update":function(e){this.personMap[e.person_id]&&this.loadPerson(e.person_id)},"person:delete":function(e){var t=this.personMap[e.person_id];t&&(this.$store.commit("DELETE_PEOPLE_START",t),this.$store.commit("DELETE_PEOPLE_END",t))},"task:assign":function(e){this.onAssignation(e)},"task:unassign":function(e){this.onAssignation(e,!1)},"comment:new":function(e){var t=e.comment_id;this.isSavingCommentPreview||this.loadComment({commentId:t}).catch(console.error)},"task:update":function(e){var t=this;this.taskMap[e.task_id]&&this.$nextTick((function(){t.loadTask({taskId:e.task_id})}))},"metadata-descriptor:new":function(e){this.refreshMetadataDescriptor(e.metadata_descriptor_id)},"metadata-descriptor:update":function(e){this.refreshMetadataDescriptor(e.metadata_descriptor_id)},"metadata-descriptor:delete":function(e){this.$store.commit("DELETE_METADATA_DESCRIPTOR_END",{id:e.metadata_descriptor_id})},"organisation:update":function(e){this.isCurrentUserAdmin&&this.getOrganisation()}}}},f=m,_=(s("5c0b"),s("2877")),v=Object(_["a"])(f,o,r,!1,null,null,null),g=v.exports,y=s("a925"),b={assets:{cast_in:"Cast in",delete_error:"An error occured while deleting this asset. There are probably data linked to it. Are you sure this asset type has no task linked to it?",delete_text:"Are you sure you want to remove {name} from your database?",edit_fail:"Saving failed, it may be due to the fact that an asset with a similar name already exists.",edit_success:"Asset {name} successfully edited.",edit_title:"Edit asset",empty_list:"There is no asset in the production. What about creating some?",empty_list_client:"There is no asset in this production.",new_asset:"Create an asset",new_assets:"Add assets",new_success:"Asset {name} successfully created.",no_cast_in:"This asset is not cast in any shot.",number:"asset | assets",restore_text:"Are you sure you want to restore {name} into your database?",restore_error:"An error occured while restoring this asset.",tasks:"Asset tasks",title:"Assets",fields:{description:"Description",episode:"Ep.",name:"Name",production:"Prod",time_spent:"Time",type:"Type",hidden_from_client:"Displayed to client"}},asset_types:{all_asset_types:"All asset types",create_error:"An error occured while saving this asset type. Are you sure there is no asset type with similar name?",delete_text:"Are you sure you want to remove {name} from your database?",delete_error:"An error occured while deleting this asset type. There are probably data linked to it. Are you sure this asset type has no asset linked to it?",edit_title:"Edit asset type",new_asset_type:"Add an asset type",number:"asset type | asset types",title:"Asset Types",production_title:"Asset Types Stats",fields:{name:"Name"}},breakdown:{all_assets:"All available assets",edit_label:"Change the asset's label",empty:"Empty casting",label:"Label",picture_mode:"Switch to picture mode",text_mode:"Switch to text mode",title:"Breakdown",options:{fixed:"fixed",animate:"animate"}},comments:{add_attachment:"Add attachment",add_checklist:"Add checklist",add_comment:"Add a comment...",add_preview:"Attach preview",change_preview:"Change preview",comment_from_client:"Comment from client",edit_title:"Edit comment",empty_text:"This comment is empty",edit_error:"An error occured while editing comment. Please contact our support team.",error:"An error occured while posting comment",no_file_attached:"No file attached",pin:"Pin",pinned:"Pinned",post_status:"Post comment",retake:"Retake",revision:"revision",set_status_to:"Set status to",task_placeholder:"New item...",text:"Text",unpin:"Unpin",validated:"Validated!",validation_required:"Validation Required",fields:{text:"text"}},custom_actions:{create_error:"An error occured while saving this custom custom action. Are you sure that there is no other action with the same name?",delete_text:"Are you sure you want to remove custom action {name} from your database?",delete_error:"An error occured while deleting this custom custom action.",edit_title:"Edit a custom action",new_custom_action:"Add a custom action",number:"custom action | custom actions",run_for_selection:"Run custom action for selected tasks:",title:"Custom Actions",fields:{name:"Name",url:"URL",entity_type:"Entity Type",is_ajax:"Use AJAX"},entity_types:{all:"All",shot:"Shot",asset:"Asset"}},entities:{build_filter:{asset_type:"Asset type",all_types:"All asset types",assignation:"Assignation",assignation_exists_for:"Assignations exists for",assigned_to:"Assigned to",descriptor:"Metadata",equal:"Equal",in:"In",no_assignation_for:"No assignation exists for",no_filter:"No filter",not_equal:"Not equal",not_assigned_to:"Not assigned to",status:"Task status",thumbnail:"Thumbnail presence",title:"Filter on...",union_and:"Match all the following filters",union_or:"Match one of the following filters",with_thumbnail:"With thumbnail",without_thumbnail:"Without thumbnail"},thumbnails:{error:"An error occured while uploading thumbnails",explaination:"Adding a thumbnail requires to set a new preview. In order to set several thumbnails at the same time, you must chose first a task type that will be used to create the new previews. The thumbnails will be set from this new preview.",explaination_two:"Then you have to select the files you want to upload. To find the right entities, the file names must match the following pattern:",shots_pattern:'"SequenceName ShotName" eg. SQ01_SH01.',assets_pattern:'"AssetType AssetName" eg. Environment_Forest.',select_files:"Select Files",selected_files:"Selected Files",select_task_type:"Select Task Type",title:"Add Thumbnails",undefined:"Undefined",undefined_pattern:"Undefined",upload:"Add Thumbnails"}},estimation:{title:"Estimation"},episodes:{all_episodes:"All episodes",edit_error:"An error occured while saving this episode. Are you sure there is no episode with similar name?",delete_error:"An error occured while deleting this episode. There are probably data linked to it. Are you sure this episode has no sequence linked to it?",delete_text:"Are you sure you want to remove {name} from your database? Every related shots and previews will be deleted. Pleas confirm by typing the episode name below.",edit_title:"Edit episode",empty_list:"There is no episode in the production. What about creating some?",empty_list_client:"There is no episode in this production.",new_episode:"New episode",number:"episode | episodes",title:"Episode Stats",fields:{name:"name",description:"description"}},keyboard:{altdown:"Move task selection down",altj:"Select previous preview",altk:"Select next preview",altleft:"Move task selection left",altright:"Move task selection right",altup:"Move task selection up",annotations:"Annotations",draw:"Set draw mode on",navigation:"Navigation",redo:"Redo",undo:"Undo",playlist_navigation:"Playlist navigation",remove_annotation:"Remove annotation",shortcuts:"Shortcuts"},login:{back_to_login:"Go back to login page",forgot_password:"Forgot password?",login:"Log in",login_failed:"Log in failed, please verify your credentials",login_page:"Cancel",redirecting:"Redirecting in {secondsLeft} seconds...",reset_change_password:"Change password",reset_change_password_form_failed:"There is a problem with the password you gave. Please, verify that it is at least 7 chars long and that both passwords match.",reset_change_password_failed:"Changing password failed. Please, restart the whole procedure again.",reset_change_password_succeed:"Your password was changed successfully. Please, go back to the login page to use it.",reset_change_password_title:"Enter a new password",reset_password:"Reset Password",reset_password_failed:"Resetting you password failed. Please verify your email.",reset_password_succeed:"Resetting your password succeeded. Please check your inbox.",reset_password_title:"Enter your email to reset your password",title:"Log in to Kitsu",fields:{email:"Email",password:"Password",password2:"Password again"}},logs:{current_date_label:"Show logs for",events:"events listed for the current day",empty_list:"There is no logs for the selected date.",title:"Logs"},main:{about:"About",add:"add",all:"All",all_assets:"All assets",admin:"Admin",after:"After",before:"Before",cancel:"Cancel",clear_selection:"Clear current selection",close:"Close",confirmation:"Confirm",confirmation_and_stay:"Confirm and stay",date:"Date",dark_theme:"Dark Theme",days_spent:"day spent | days spent",days_estimated:"day estimated | days estimated",delete:"Delete",delete_all:"Delete all",delete_text:"Are you sure you want to remove {name} from your database?",documentation:"Documentation",edit:"Edit",empty_comment:"Empty comment",end_date:"End date",files_selected:"files selected",for:"For",from:"From",go_productions:"Go to productions",history:"history",info:"Information",or:"or",no:"No",less_filters:"Less filters",loading:"Loading...",loading_data:"Loading data",loading_error:"An error occured while loading data.",logout:"Logout",modify:"Modify",minimize:"Minimize",main_pack:"Main Pack",maximize:"Maximize",more_filters:"More filters",nb_frames:"frame | frames",person:"Person",profile:"Profile",production:"Production",remove:"Remove",reload:"Reload",save:"Save",search_query:"Search query",search_query_edit:"Edit search filter",search_query_edit_error:"An error occured while updating this search filter.",sort_by:"Sort by",sorted_by:"Sorted by",start_date:"Start date",studio:"Studio",to:"To",tutorials:"Tutorials",user:"User",white_theme:"White Theme",yes:"Yes",csv:{choose:"Choose",error_upload:"An error occured while uploading your CSV.",export_file:"Export",import_file:"Import",import_title:"Import data from a CSV",legend:"Legend",legend_ok:"Recognized data",legend_ignored:"Ignored data",legend_missing:"Missing data",legend_disabled:"Data that will no be updated or created",legend_overwrite:"Data that will be updated",paste:"Paste",paste_code:"Please paste here your CSV data:",preview:"Preview",preview_episode_name:"Episode name",preview_title:"Preview of your imported data",preview_description:"Upload a .csv file to populate your board with posts.",preview_required:"NB: Headers must be included as first row.",preview_reupload:"Reupload .CSV file",required_fields:"Your CSV requires the following columns",select_file:"Please select a file from one of your folder:",tab_select_file:"Upload a CSV file",tab_paste_code:"Paste a CSV data",unknown:"Unknown column",upload_file:"Browse",options:{title:"Options",update:"Update existing data"}}},menu:{assign_tasks:"Assign tasks",change_priority:"Change priority",change_status:"Change status",create_tasks:"Create tasks",delete_tasks:"Delete tasks",generate_playlists:"Generate playlists",run_custom_action:"Run custom action",set_estimations:"Set estimations"},news:{all:"All",commented_on:"commented on",infos:"Infos",no_news:"There is no news for this production or for this filter.",only_comments:"Only comments",only_previews:"Only previews",hide_stats:"Hide stats",news:"news",set_preview_on:"set preview on",show_stats:"Show stats",task_status:"Task status",task_type:"Task type",title:"News Feed"},not_found:{text:"There was something wrong with the link you clicked on, we encourage you to come back on the home page.",title:"Page not found... are your looking for something you deleted?"},notifications:{and_change_status:"and changed status to",assigned_you:"assigned you to",commented_on:"commented on",mention_you_on:"mentioned you on",no_notifications:"There is currently no notification for you for your current projects.",unread_notifications:"unread notification | unread notifications",title:"Notifications",with_preview:"with a preview"},people:{active:"Active",active_persons:"active person | active persons",add_member_to_team:"Add a member to the team: ",create_invite:"Create and send invitation",create_error:"An  error occured while creating this person. Please contact our support team for more information.",delete_error:"An error occured while deleting this person. There are probably data linked to it. Are you sure this person has no assignation or wrote no comment?",delete_text:"Are you sure you want to remove {personName} from your database? Every related comments and previews will be deleted. Please confirm by typing the full person name below.",edit_title:"Edit person",empty_team:"There is no one listed in the project team.",invite:"Send an invitation",invite_error:"An error occured while sending the invitation",invite_success:"Invitation was successfully sent",new_person:"Add a new employee",no_task_assigned:"There are no running tasks assigned to you",persons:"person | persons",running_tasks:"Running tasks",select_person:"Select a person...",team:"Team",title:"People",unactive:"Unactive",csv:{import_file:"Import a .csv file",export_file:"Download as a .csv file",import_title:"Import data from a CSV file",required_fields:"Your CSV file requires the following columns",select_file:"Please select a file from one of your folder:",error_upload:"An error occured while uploading your CSV file."},fields:{first_name:"First name",last_name:"Last name",email:"Email",phone:"Phone",role:"Role",old_password:"Current password",password:"New password",password_2:"New password (repeat)",active:"Active"},list:{name:"Name",email:"Email",phone:"Phone",role:"Role",active:"Active"},role:{admin:"Studio Manager",client:"Client",manager:"Supervisor",user:"Artist",undefined:"",vendor:"Vendor"}},playlists:{add_assets:"Add assets",add_selection:"Add selection",add_shots:"Add shots",add_sequence:"Add whole sequence",add_episode:"Add whole episode",add_movie:"Add whole movie",apply_task_type_change:"This will set the last revison for given task type on all shots.",available_build:"Available builds",build_daily:"Daily pending",build_weekly:"All Pending",build_mp4:"Build .mp4 (beta)",building:"Building...",client_playlist:"Client Playlist",create_for_selection:"Generate a playlist for shot selection",create_title:"Create playlist",created_at:"Created at:",delete_text:"Are you sure you want to remove {name} from your database?",delete_error:"An error occured while deleting this playlist.",edit_error:"An error occured while saving this playlist.",download_zip:"Download .zip",failed:"Failed",for_client:"The Client",for_studio:"The Studio",edit_title:"Edit playlist",last_creation:"Last creations",last_modification:"Last modifications",loading_error:"A server error occured. Playlists cannot be loaded.",new_playlist:"Add a playlist",no_build:"No build",no_playlist:"There is currently no playlist for this project or episode.",no_preview:"No preview",no_selection:"Please select a playlist on the left.",no_sequence_for_episode:"There is no sequence for this episode",no_shot_for_production:"There is no shot for this production",select_shot:"Please select a shot in the right column",select_playlist:"Please select a playlist in the left column",select_task_type:"Change task type for all shots",title:"Playlists",updated_at:"Updated at:",remove:"remove",fields:{name:"Name",created_at:"Creation date",updated_at:"Update date",for_entity:"Select entity to display",for_client:"To be shared with"},actions:{annotation:"Annotation",annotation_draw:"Draw annotations",annotation_text:"Double click on the preview to add some text",annotation_delete:"Delete annotation",annotation_redo:"Redo annotation",annotation_undo:"Undo annotation",annotation_big:"Big",annotation_medium:"Medium",annotation_small:"Small",change_task_type:"Change task type",current_time:"Position in the video",comments:"Show/Hide comments",delete:"Delete playlist",display_revision:"Display revision",download:"Download playlist",download_file:"Download file",edit:"Edit playlist",entity_list:"Show/Hide entity list",entity_index:"Index of current entity in the playlist",entities_number:"Number of entities in the playlist",frame_number:"Frame number",files_add:"Add a file to the revision",files_delete:"Delete and remove file from the revision",files_next:"Next file for this revision",files_position:"File index for this revision",files_previous:"Previous file for this revision",fullscreen:"See file in full screen",looping:"Loop on current video",mute:"Mute",unmute:"Unmute",next_frame:"Next frame",next_shot:"Next entity",number_of_files:"Number of files for this revision",max_duration:"Video duration",pause:"Pause",play:"Play",previous_frame:"Previous frame",previous_shot:"Previous entity",save_playlist:"Save playlist",see_original_file:"Open original file in a new tab",speed:"Change speed",split_screen:"Compare with other task types"}},productions:{current:"Selected production",delete_text:"Are you sure you want to remove {name} from your database? Please, confirm by typing the name of the project you want to delete in the text field.",delete_error:"An error occured while deleting this production. There are probably data linked to it. Are you sure this production has no task, shot or asset linked to it? Kitsu doesn't allow production deletion. If you don't want to see the production anymore, you can close it instead.",edit_error:"An error occured while editing production. Please contact our support team.",edit_title:"Edit production",new_production:"Add a production",number:"production | productions",open_productions:"My productions",picture:"Change picture",title:"Productions",home:{create_new:"Create a new production",empty:"You don't have any production open. What about creating a new one?",no_task:"You have no task assigned. See your supervisor to see what you can do!",no_prod_for_client:"You don't have access to any production. Contact your contractor to obtain an access.",title:"Running Productions",welcome:"Welcome to Kitsu"},fields:{fps:"FPS",name:"Name",ratio:"Ratio",resolution:"Resolution",status:"Status",type:"Type"},metadata:{add_explaination:"Add specific data required by this project.",add_failed:"An error occured while adding metadata to your project.",add_new_values:"There is currently no available values.",available_values:"Available values",choices:"List of values",delete_text:"Are you sure you want to delete this column and related data for all assets of this production?",delete_error:"An error occured while deleting this metadata column.",error:"An error occured while adding the metadata column. Make sure there is no column with similar name and that all fields are filled. If the problem is persists, please contact the support team.",free:"Free value",title:"Add metadata column"},status:{closed:"Closed",open:"Open",active:"Open",archived:"Closed"},type:{short:"Short",featurefilm:"Feature Film",tvshow:"TV Show"}},profile:{change_avatar:"Change avatar",info_title:"Information",language:"Language",notifications_enabled:"Email notifications enabled",notifications_slack_enabled:"Slack notifications enabled",notifications_slack_user:"Slack username",password_title:"Change password",timezone:"Timezone",title:"Your Profile",avatar:{title:"Change avatar",error_upload:"There was an error while uploading picture."},change_password:{button:"Change password",error:"An error occured while changing password. Please verify your current password.",success:"Your password was successfully changed!",unvalid:"Your new password confirmation doesn't match or your password is too short (7 chars, at least, is expected)."},save:{button:"Save changes",error:"An error occured while saving changes"}},settings:{change_logo:"Change logo",integrations:"Integrations",logo:"Studio logo",no_logo:"There is no logo set.",set_logo:"Set studio logo",title:"Settings",fields:{name:"Studio name",hours_by_day:"Hours by day",slack_token:"Slack Token (Optional)",use_original_name:"Use original file name for downloads"},production:{empty_list:"The list is currently empty. It means that all data from the main settings are available to users. Add some entries to limit choices for this production."},save:{button:"Save settings",error:"A server error occured while saving settings"}},task_status:{create_error:"An error occured while saving this task status. Are you sure there is no task status with similar name?",delete_text:"Are you sure you want to remove {name} from your database?",delete_error:"An error occured while deleting this task status. There are probably data linked to it. Are you sure this task status has no task linked to it?",edit_title:"Edit task status",number:"task status | task status",new_task_status:"Add a task status",title:"Task Status",fields:{color:"Color",is_artist_allowed:"Is artist allowed",is_client_allowed:"Is client allowed",is_done:"Is done",is_reviewable:"Is reviewable",is_retake:"Has retake value",name:"Name",short_name:"Short name"}},task_types:{delete_text:"Are you sure you want to remove {name} from your database?",delete_error:"An error occured while deleting this task type. There are probably data linked to it. Are you sure this task type has no task linked to it?",edit_title:"Edit task type",create_error:"An error occured while creating the task type. Please, check that there is no task type with similar name.",new_task_type:"Add a task type",number:"task type | task types",title:"Task Types",fields:{dedicated_to:"For",color:"Color",name:"Name",allow_timelog:"Timelog",priority:"Priority"}},sequences:{all_sequences:"All sequences",edit_error:"An error occured while saving this sequence. Are you sure there is no sequence with similar name?",delete_text:"Are you sure you want to remove {name} from your database? Every related shots and previews will be deleted. Please confirm by typing the sequence name below.",delete_error:"An error occured while deleting this sequence. There are probably data linked to it. Are you sure this sequence has no shot linked to it?",edit_title:"Edit sequence",empty_list:"There is no sequence in the production. What about creating some?",empty_list_client:"There is no sequence in this production.",new_sequence:"New sequence",number:"sequence | sequences",title:"Sequence Stats",fields:{name:"name",description:"description"}},schedule:{title:"Schedule",title_main:"Main Schedule",overall_man_days:"Man-days",md:"md",zoom_level:"Zoom level",milestone:{add_milestone:"Add milestone for",edit_milestone:"Edit milestone for",name:"Name",error:"An error occured while adding or editing the milestone. Please try again."}},quota:{average:"Average",count_label:"Count mode",detail_label:"Detail level",details_name:"Name",details_seconds:"Seconds",details_frames:"Frames",month_label:"Month",no_quota:"There is no quota for this task type.",name:"Name",quota_day:"Quota per day",quota_week:"Quota per week",quota_month:"Quota per month",year_label:"Year",title:"Quota",type_label:"Type"},shots:{casting:"Shot casting",creation_explaination:"To add shots you need first to create an episode and a sequence. Type an episode name in the bottom of the left column then click on add to create a new episode. Select this episode and repeat the same operation for sequence. Finally select a sequence and type a shot name in the field in the bottom of the right column. Click on the add button below. Your first shot was created. You can now add many more! If it's not a TV Show, you have to directly create a sequence.",delete_text:"Are you sure you want to remove {name} from your database?",delete_error:"An error occured while deleting this shot. There are probably data linked to it. Are you sure this shot has no task linked to it?",edit_success:"Shot {name} successfully edited.",edit_fail:"Creation or edition failed, an error occured. Make sure that you are not renaming the shot with a name already listed for given sequence.",edit_title:"Edit shot",empty_list:"There is no shot in the production. What about creating some?",empty_list_client:"There is no shot in this production.",episodes:"Episodes",history:"Shot values history",new_shot:"Add a shot",new_shots:"Add shots",new_sequences:"Add sequences",new_episodes:"Add episodes",no_casting:"The shot casting is empty.",number:"shot | shots",manage:"Create shots",new_success:"Shot {name} successfully created.",padding:"Shot Padding",restore_text:"Are you sure you want to restore {name} into your database?",restore_error:"An error occured while restoring this shot.",sequences:"Sequences",tasks:"Shot Tasks",title:"Shots",fields:{description:"Description",nb_frames:"Frames",episode:"Episode",frame_in:"In",frame_out:"Out",fps:"FPS",name:"Name",production:"Prod",sequence:"Sequence",time_spent:"Time"}},server_down:{text:"Please contact your vendor support, your system administrator or your ITdepartment to understand what is going wrong.",title:"Kitsu encountered an error while reaching its data API."},statistics:{count:"Counts",count_mode:"Count",data_mode:"Data",display_mode:"Display",frames:"Frames",pie:"Pie charts",retakes:"Retakes",status:"Status",shots:"Shots"},tasks:{add_preview:"Add preview",add_preview_error:"An error occured while adding preview.",assign:"Assign one task to: | Assign {nbSelectedTasks} tasks to:",back_to_list:"back to list",bigger:"Widen task panel",change_status_to:"Change task status to:",change_preview:"Change preview",change_priority:"Change priority to:",clear_assignations:"clear assignations",comment_image:"Attach an image to your comment",create_for_selection:"Create task for each empty cell:",create_tasks:"Add tasks",create_tasks_shot:"Add tasks for current shots",create_tasks_shot_explaination:"You are going to create a new task for each shot of current project for the given task type. Do you want to continue?",create_tasks_shot_failed:"A server error occured while proceeding creations.",create_tasks_asset:"Add tasks for current assets",create_tasks_asset_explaination:"You are going to create a new task for each asset of current project for the given task type. Do you want to continue?",create_tasks_asset_failed:"A server error occured while proceeding creations.",current:"Task to do",current_status:"Current status :",delete_all_text:"Are you sure you want to delete all tasks for given {name}? Please, confirm by typing the task type name of the tasks you want to delete in the text field.",delete_all_error:"Deleting all tasks for given task type failed.",delete_error:"An error occured while deleting task.",delete_comment:"Are you sure you want to delete comment?",delete_comment_error:"An error occured while deleting comment.",delete_for_selection:"Delete selected tasks:",delete_preview:"Are you sure you want to delete this preview?",delete_preview_error:"An error occured while deleting preview.",edit_comment:"Edit comment",done:"Done",download_pdf_file:"Download .{extension} file",feedback:"feedback",full_screen:"Display in full screen",for_selection:"For current list and filters",for_project:"For project",hide_assignations:"Hide assignations",hide_infos:"Hide additional information",my_tasks:"My tasks",next:"next task",no_assignation_right:"You are not allowed to manage assignations",no_comment:"There is currently no comment for this task.",no_preview:"There is currently no preview for this task.",no_task_selected:"No task selected",number:"task | tasks",preview:"Previews",previous:"previous task",unsubscribe_notifications:"Unsubscribe from notifications",set_estimations:"Set estimations for selected tasks:",set_preview:"Set this preview as thumbnail",set_preview_error:"An error occured while setting preview as thumbnail",set_preview_done:"This preview is used as thumbnail for the current entity.",select_preview_file:"Please select a file (picture, movie or others) from your hard drive to be used as a preview for the current task:",show_assignations:"Show assignations",show_infos:"Show additional information",subscribe_notifications:"Subscribe to notifications",select_image_file:"Please select the picture from your hard drive you want to attach to your comment:",tasks:"Tasks",validation:"Validation",with_comment:"With a comment...",fields:{asset_type:"Asset type",assignees:"Assignees",count:"Count",due_date:"Due date",duration:"Duration",end_date:"Validation date",entity:"Entity",entity_name:"Name",estimated_quota:"Avg. Quota",estimation:"Estimation",frames:"Fram.",last_comment:"Last comment",last_comment_date:"Last comment",priority:"Priority",production:"Prod",real_end_date:"Validation date",real_start_date:"WIP date",retake_count:"Retakes",seconds:"Seconds",sequence:"Sequence",start_date:"Start date",task_status:"Status",task_status_short_name:"Status",task_type:"Type"},colors:{title:"Coloring",neutral:"Neutral",status:"Status color",late:"Late in red"},priority:{emergency:"Emergency",normal:"Normal",high:"High",very_high:"Very High"}},timesheets:{detail_level:"Detail level",done_tasks:"Done tasks",export_timesheet:"Export Timesheet",hours:"hours",month:"Month",time_spents:"Time Spent (hours)",title:"Timesheets",year:"Year"},wrong_browser:{title:"Your browser is not supported by Kitsu",text:"Kitsu can only be used with Firefox and Chrome browsers."}},k={assets:{cast_in:"Echado en",delete_error:"Se ha producido un error al borrar este asset. Es probable que haya datos vinculados a l. Est seguro de que este tipo de asset no tiene ninguna tarea vinculada a l?",delete_text:"Est seguro de que desea eliminar {name} de su base de datos?",edit_fail:"La creacin o edicin fall, se produjo un error.",edit_success:"Asset fijo {name} tratado con xito.",edit_title:"Editar asset fijo",empty_list:"No hay ningn asset en la produccin. Qu tal si creamos algunos?",empty_list_client:"No hay ningn asset en esta produccin.",new_asset:"Aadir un asset",new_assets:"Aadir assets",new_success:"Asset fijo {name} creado con xito.",no_cast_in:"Este asset no es lanzado en ninguna toma.",number:"bienes",restore_text:"Est seguro de que desea restaurar {name} en su base de datos?",restore_error:"Se ha producido un error al restaurar este asset.",tasks:"Tareas de los assets",title:"Assets",fields:{description:"Descripcin",episode:"Ep.",name:"Nombre",production:"Prod",time_spent:"Tiempo",type:"Tipo",hidden_from_client:"Mostrado al cliente"}},asset_types:{all_asset_types:"Todos los tipos de assets",delete_text:"Est seguro de que desea eliminar {name} de su base de datos?",delete_error:"Se ha producido un error al borrar este tipo de asset. Es probable que haya datos vinculados a l. Est seguro de que este tipo de asset no tiene ningn asset vinculado a l?",edit_title:"Editar tipo de asset fijo",new_asset_type:"Aadir un tipo de asset fijo",number:"tipo de assets | tipos de assets",title:"Tipos de assets",production_title:"Estadsticas de tipos de assets",fields:{name:"Nombre"}},breakdown:{all_assets:"Todos los assets disponibles",edit_label:"Cambiar la etiqueta de asset",empty:"Fundicin en vaco",label:"Etiqueta",text_mode:"Mode de texto",title:"Casting",options:{fixed:"fijo",animate:"animado"}},comments:{add_attachment:"Aadir un anexo...",add_comment:"Aadir un comentario...",add_checklist:"Agregar lista de verificacin",add_preview:"Adjuntar vista previa",change_preview:"Cambiar la vista previa",choose:"Choose",comment_from_client:"Comentario del cliente",empty_text:"Este comentario est vaco",edit_title:"Editar cmo",error:"Se ha producido un error al publicar un comentario",no_file_attached:"No se adjunta ningn archivo",post_status:"Publicar cmo",retake:"Retomar",pin:"Alfiler",pinned:"inmovilizado",revision:"modificacin",text:"Texto",unpin:"Desenganchar",validated:"Validado!",validation_required:"Validacin Requerida",set_status_to:"Fijar el status en",task_placeholder:"Nuevo articulo...",fields:{text:"texto"}},custom_actions:{delete_text:"Est seguro de que desea eliminar una accin personalizada {name} de su base de datos?",delete_error:"Se ha producido un error al eliminar esta accin personalizada.",edit_title:"Editar una accin personalizada",new_custom_action:"Aadir una accin personalizada",number:"accin personalizada | acciones personalizadas",run_for_selection:"Ejecute una accin personalizada para las tareas seleccionadas:",title:"Acciones personalizadas",fields:{name:"Nombre",url:"URL",entity_type:"Tipo de entidad",is_ajax:"Usar AJAX"},entity_types:{all:"Todos",shot:"Plan",asset:"Asset"}},entities:{build_filter:{asset_type:"Tipo de asset",all_types:"Todo tipos de asset",assignation:"Asignacin",assignation_exists_for:"La asignacin existe para",assigned_to:"Asignado a",descriptor:"Metadatos",equal:"Igual",in:"En",no_assignation_for:"No existe ninguna asignacin para",no_filter:"No hay filtro",not_equal:"No igual",not_assigned_to:"No asignado a",status:"Estado de la tarea",thumbnail:"Presencia de la miniatura",title:"Filtro en...",with_thumbnail:"Con la miniatura",without_thumbnail:"Sin_imagen_pulgada"},thumbnails:{error:"Un error ocurri mientras suba las miniaturas",explaination:"Aadir una miniatura requiere establecer una nueva vista previa. Para establecer varias miniaturas al mismo tiempo, debe elegir primero un tipo de tarea que se utilizar para crear las nuevas vistas previas. Las miniaturas se establecern desde esta nueva vista previa",explaination_two:"Entonces tienes que seleccionar los archivos que quieres subir. Para encontrar las entidades correctas, los nombres de los archivos deben coincidir con el siguiente patrn:",shots_pattern:"NombreDeSecuencia NombreDeDisparo, por ejemplo SQ01_SH01.",assets_pattern:"Nombre de asset del tipo de asset, por ejemplo, Environment_Forest.",select_files:"Seleccion archivos",selected_files:"Archivos seleccionados",select_task_type:"Seleccionar tipo de tarea",title:"Add Thumbnails",undefined:"indefinido",undefined_pattern:"Indefinido",upload:"Agregar miniaturas"}},episodes:{all_episodes:"Todos los episodios",delete_error:"Se ha producido un error al borrar este episodio. Es probable que haya datos vinculados a l. Ests seguro de que este episodio no tiene una secuencia vinculada a l?",delete_text:"Est seguro de que desea eliminar {name} de su base de datos?",edit_title:"Editar episodio",empty_list:"No hay ningn episodio en la produccin. Qu tal si creamos algunos?",empty_list_client:"No hay ningn episodio en esta produccin.",new_episode:"Nuevo episodio",number:"episodio | episodios",title:"Estadsticas del episodio",fields:{name:"denominar",description:"descripcin"}},estimation:{title:"Estimacin"},keyboard:{altdown:"Mueve la seleccin de una tarea hacia abajo",altj:"Seleccione la vista previa",altk:"Seleccione el siguiente preview",altleft:"Mueve la seleccin de una tarea a la izquierda",altright:"Mueve la seleccin de una tarea a la derecha",altup:"Mueve la seleccin de una tarea hacia arriba",annotations:"Anotaciones",draw:"Activar el modo de dibujo",navigation:"Navegacin",playlist_navigation:"Navegacin de las Paylists",redo:"Redo",remove_annotation:"Eliminar anotacin",undo:"Undo",shortcuts:"Atajos de teclado"},login:{back_to_login:"Voler al login",forgot_password:"Olvid su contrasea?",login:"Iniciar sesin",login_failed:"Error de inicio de sesin, por favor verifique sus credenciales",login_page:"Cancelar",redirecting:"Redirigiendo en {secondsLeft} segundos",reset_change_password:"Cambiar contrasea",reset_change_password_form_failed:"Hay un problema con la contrasea que dio. Por favor, verifique que tenga al menos 7 caracteres y que ambas contraseas coincidan.",reset_change_password_failed:"Error al cambiar la contrasea. Por favor, reinicie todo el procedimiento de nuevo.",reset_change_password_succeed:"Su contrasea ha sido cambiada con xito. Por favor, vuelva a la pgina de inicio de sesin para utilizarlo.",reset_change_password_title:"Introduzca una nueva contrasea",reset_password:"Restablecer contrasea",reset_password_failed:"Error al restablecer la contrasea. Por favor, verifique su correo electrnico.",reset_password_succeed:"Restablecer contrasea correctamente. Por favor, compruebe su bandeja de entrada.",reset_password_title:"Ingrese su correo electrnico para restablecer su contrasea",title:"Iniciar sesin en Kitsu",fields:{email:"Correo electrnico",password:"Contrasea",password2:"Contrasea de nuevo"}},main:{about:"Acerca de",add:"aadir",all:"Todos",all_assets:"Todos assets",admin:"Admin",cancel:"Cancelar",clear_selection:"Borrar la seleccin actual",days_estimated:"da estimado | das estimados",documentation:"Documentacin",close:"Cerrar",confirmation:"Confirmar",confirmation_and_stay:"Confirmar y quedarse",date:"Fecha",dark_theme:"Tema oscuro",days_spent:"das pasados | das pasados",delete:"Borrar",delete_all:"Borrar todo",delete_text:"Est seguro de que desea eliminar {name} de su base de datos?",edit:"Tratar",empty_comment:"Vaciar comentario",end_date:"Fecha de finalizacin",files_selected:"archivos seleccionados",for:"Para",go_productions:"Ir a producciones",history:"trayectoria",info:"Informacin",main_pack:"Main Pack",or:"o",no:"No",loading:"Carga...",loading_data:"Carga de datos",loading_error:"Se ha producido un error al cargar los datos.",logout:"Cierre de sesin",modify:"Modificar",minimize:"Minimizar",maximize:"Maximizar",nb_frames:"marcos | marcos",person:"person",profile:"Perfil",production:"Produccin",remove:"Quitar",save:"Guardar",sort_by:"Ordenar por",sorted_by:"Ordenado por",start_date:"Fecha de inicio",studio:"Estudio",user:"Usuario",tutorials:"Tutorials",white_theme:"Tema Blanco",yes:"S",csv:{choose:"Elige",export_file:"Exportar",error_upload:"Se ha producido un error al cargar el archivo CSV.",import_file:"Importar",import_title:"Importar datos de un archivo CSV",legend:"Leyenda",legend_ok:"Datos reconocidos",legend_ignored:"Datos ignorados",legend_missing:"Datos perdidos",legend_disabled:"Datos que no sern actualizados ni creados",legend_overwrite:"Datos que sern actualizados",paste:"Pegar",paste_code:"Por favor, pegue aqu sus datos CSV:",preview:"See preview",preview_episode_name:"Nombre del episodio",preview_title:"Vista previa de sus datos importados",preview_description:"Sube un archivo .csv para llenar tu pizarra con posts",preview_required:"NB: Los encabezados deben ser incluidos como primera fila.",preview_reupload:"Subir de nuevo el archivo .CSV",required_fields:"Su archivo CSV requiere las siguientes columnas",select_file:"Por favor, seleccione un archivo de una de sus carpetas:",tab_select_file:"Subir un archivo CSV",tab_paste_code:"Pegar un dato CSV",upload_file:"Navegar",unknown:"Columna desconocida",options:{title:"Opciones",update:"Actualizar los datos existentes"}}},menu:{assign_tasks:"Asignar tareas",change_priority:"Modificar prioridad",change_status:"Status de modificacin",create_tasks:"Crear tareas",delete_tasks:"Borrar medidas",generate_playlists:"Generar playlists",run_custom_action:"Ejecutar una accin personalizada",set_estimations:"Fijar estimaciones"},news:{all:"Todos",commented_on:"comentado",infos:"Informacin",no_news:"No hay noticias de esta produccin ni de este filtro.",only_comments:"Slo comentarios",only_previews:"Slo previsualizaciones",set_preview_on:"establecer vista previa en",task_status:"Status de la tarea",task_type:"Tipo de tarea",title:"ltimas noticias"},not_found:{text:"Haba algo mal en el enlace en el que hiciste clic, te animamos a que vuelvas a la pgina de inicio.",title:"Pgina no encontrada... buscas algo que has borrado?"},notifications:{and_change_status:"y ha cambiado el status a",assigned_you:"te asign a",commented_on:"comentado",mention_you_on:"te mencion en",no_notifications:"Actualmente no hay ninguna notificacin para usted para sus proyectos actuales.",title:"Notificaciones",unread_notifications:"notificacin no leda | notificaciones no ledas",with_preview:"con una vista previa"},people:{active:"Activada",active_persons:"Persona activada | Personas activadas",add_member_to_team:"Aada un miembro al equipo:",create_invite:"Crear y enviar invitacin",delete_error:"Se ha producido un error al borrar a esta persona. Es probable que haya datos vinculados a l. Est seguro de que esta persona no tiene ninguna cita o escribi ningn comentario?",delete_text:"Est seguro de que desea eliminar {personName} de su base de datos?",edit_title:"Tratar persona",empty_team:"No hay nadie en el equipo del proyecto.",invite:"Enviar invitacin",invite_error:"Se ha producido un error al enviar la invitacin",invite_success:"La invitacin fue enviada con xito",new_person:"Aadir un nuevo empleado",no_task_assigned:"No hay tareas de ejecucin asignadas a usted",persons:"persona | personas",running_tasks:"Ejecutar tareas",select_person:"Seleccione una persona....",team:"Equipo",title:"Gente",unactive:"Inasset",csv:{import_file:"Importar un archivo.csv",export_file:"Descargar como archivo.csv",import_title:"Importar datos de un archivo CSV",required_fields:"Su archivo CSV requiere las siguientes columnas",select_file:"Por favor, seleccione un archivo de una de sus carpetas:",error_upload:"Se ha producido un error al cargar el archivo CSV."},fields:{first_name:"Nombre de pila",last_name:"Apellido",email:"Correo electrnico",phone:"llamar",role:"Papel",old_password:"Contrasea actual",password:"Nueva contrasea",password_2:"Nueva contrasea (repetir)",active:"Asset"},list:{name:"Nombre",email:"Correo electrnico",phone:"llamar",role:"Papel",active:"Asset"},role:{admin:"Director del estudio",client:"Mandante",manager:"Supervisor",user:"Artista CG",undefined:"",vendor:"Proveedor"}},playlists:{add_selection:"Aade la seleccin",add_shots:"Aadir shots",add_assets:"Aadir assets",add_sequence:"Aadir secuencia completa",add_episode:"Aadir episodio completa",add_movie:"Aadir film completa",building:"Edificio",apply_task_type_change:"Esto posicionar la ltima revisin para el tipo de tarea dada en todos los shots.",available_build:"Construcciones disponibles",build_daily:"Diario pendiente",build_weekly:"Todos Pendientes",build_mp4:"Construir .mp4",client_playlist:"Playlist clave",created_at:"Creado en:",create_title:"Crear playlist",create_for_selection:"Crear una playlist para la seleccin",delete_text:"Est seguro de que desea eliminar {name} de su base de datos?",delete_error:"Se ha producido un error al eliminar esta lista de reproduccin.",download_zip:"Descargar.zip",edit_title:"Editar lista de reproduccin",failed:"Fallido",for_client:"El cliente",for_studio:"El estudio",last_creation:"Ultimas creaciones",last_modification:"Ultimas modificaciones",loading_error:"Se ha producido un error en el servidor. Las listas de reproduccin no se pueden cargar.",new_playlist:"Aadir una lista de reproduccin",no_build:"Sin construccin",no_playlist:"Actualmente no hay ninguna lista de reproduccin para este proyecto.",no_preview:"No hay vista previa de esta toma",no_selection:"Por favor, seleccione una lista de reproduccin a la izquierda.",no_sequence_for_episode:"No hay secuencia para este episodio",no_shot_for_production:"No hay ninguna toma para esta produccin.",no_shot_for_sequence:"No hay ninguna toma para esta secuencia",select_shot:"Por favor, seleccione una toma en la columna de la derecha",select_playlist:"Por favor, seleccione una lista de reproduccin en la columna de la izquierda",select_task_type:"Cambiar el tipo de tarea para todos los planes",title:"Listas de reproduccin",updated_at:"Actualizado en:",remove:"quitar",fields:{created_at:"Creado en",for_client:"Par compartir con",for_entity:"Para la entidad",name:"Nombre",updated_at:"Actualizado en"},actions:{annotation:"Anotacin",annotation_text:"Doble clic en la vista previa para aadir algo de texto",annotation_delete:"Borrar anotacin",annotation_redo:"Redo anotacin",annotation_undo:"Deshacer anotacin",annotation_big:"Grande",annotation_medium:"Medium",annotation_small:"Pequea",change_task_type:"Cambiar el tipo de tarea",comments:"Mostrar/ocultar comentarios",delete:"Borrar playlist",download:"Descargar",edit:"Editar playlist",entity_list:"Mostrar/ocultar lista de entidades",fullscreen:"Fullscreen",next_frame:"Prxima frame",next_shot:"Prxima shot",pause:"Pausa",play:"Jugar",previous_frame:"Anterior frame",previous_shot:"Anterior shot",split_screen:"Split screen",speed:"Cambiar velocidad"}},productions:{current:"Produccin seleccionada",delete_text:"Est seguro de que desea eliminar {name} de su base de datos?",delete_error:"Se ha producido un error al eliminar esta produccin. Es probable que haya datos vinculados a l. Ests seguro de que esta produccin no tiene ninguna tarea, toma o asset relacionado con ella? Kitsu no permite la eliminacin de la produccin. Si no quieres ver ms la produccin, puedes cerrarla.",edit_title:"Editar produccin",new_production:"Aadir una produccin",number:"produccin | producciones",open_productions:"Mis producciones",picture:"Cambiar imagen",title:"Producciones",home:{create_new:"Crear una nueva produccin",empty:"No tienes ninguna produccin abierta. Qu tal si creamos uno nuevo?",no_task:"No tiene ninguna tarea asignada. Consulte a su supervisor para ver qu puede hacer!",no_prod_for_client:"No tienes acceso a ninguna produccin. Pngase en contacto con su contratista para obtener un acceso.",title:"Producciones en marcha",welcome:"Bienvenido a Kitsu"},fields:{fps:"SPD",name:"Nombre",ratio:"razonar",resolution:"Resolucin",status:"Estado",type:"Tipo"},metadata:{add_explaination:"Aada los datos especficos requeridos por este proyecto.",add_failed:"Se ha producido un error al aadir metadatos al proyecto.",add_new_values:"Actualmente no hay valores disponibles.",available_values:"Valores disponibles",choices:"Lista de valores",delete_text:"Est seguro de que desea borrar esta columna y los datos relacionados para todos los assets de esta produccin?",delete_error:"Se ha producido un error al eliminar esta columna de metadatos.",error:"Se ha producido un error al aadir la columna de metadatos. Asegrese de que no hay ninguna columna con un nombre similar y que todos los campos estn completos. Si el problema persiste, pngase en contacto con el equipo de soporte.",free:"Valor libre",title:"Add metadata column"},status:{closed:"Cerrado",open:"Abrir",active:"Abrir",archived:"Cerrado"},type:{short:"Corto",featurefilm:"Largometraje",tvshow:"programa de televisin"}},profile:{change_avatar:"Cambiar avatar",info_title:"Informacin",language:"Idioma",notifications_enabled:"Notificaciones de correo electrnico habilitadas",notifications_slack_enabled:"Notificaciones de Slack activadas",notifications_slack_user:"Slack ID",password_title:"Cambiar contrasea",timezone:"Zona horaria",title:"Su perfil",avatar:{title:"Cambiar avatar",error_upload:"Se ha producido un error al subir la imagen."},change_password:{button:"Cambiar contrasea",error:"Se ha producido un error al cambiar la contrasea. Por favor, verifique su contrasea actual.",success:"Su contrasea ha sido cambiada con xito!",unvalid:"La confirmacin de su nueva contrasea no coincide o es demasiado corta (se esperan al menos 7 caracteres)."},save:{button:"Guardar cambios",error:"Se ha producido un error al guardar los cambios"}},quota:{average:"Promedio",count_label:"Modo de conteo",detail_label:"Nivel de detalle",details_name:"Nombre",details_seconds:"Segundos",details_frames:"Frames",month_label:"Mes",no_quota:"No hay cuota para este tipo de tarea",name:"Nombre",quota_day:"Cuota por da",quota_week:"Cuota por semana",quota_month:"Cuota por mes",year_label:"Ao",title:"Cupos",type_label:"Tipo"},settings:{change_logo:"Cambiar logotipo",integrations:"Integraciones",logo:"Estudio de logotipos",no_logo:"No hay conjunto de logotipos.",set_logo:"Logotipo de estudio",title:"Ajustes",fields:{name:"Nombre del estudio",hours_by_day:"Horas por da",slack_token:"Slack token (opcional)",use_original_name:"Usar el nombre del archivo original para las descargas"},production:{empty_list:"La lista est actualmente vaca. Significa que todos los datos de los ajustes principales estn disponibles para los usuarios. Aada algunas entradas para limitar las opciones de esta produccin."},save:{button:"Grabar parametrizaciones",error:"Se ha producido un error del servidor al guardar la configuracin"}},task_status:{delete_text:"Est seguro de que desea eliminar {name} de su base de datos?",delete_error:"Se ha producido un error al borrar este estado de la tarea. Es probable que haya datos vinculados a l. Est seguro de que este status de tarea no tiene ninguna tarea vinculada a l?",edit_title:"Editar el estado de la tarea",number:"estado de la tarea | estado de la tarea",new_task_status:"Aadir un status de tarea",title:"Estado de la tarea",fields:{color:"Color",is_artist_allowed:"Se permite al artista",is_client_allowed:"Se permite al cliente",is_done:"Se hace",is_reviewable:"Es revisable",is_retake:"Tiene valor de retomar",name:"Nombre",short_name:"Denominacin breve"}},task_types:{delete_text:"Est seguro de que desea eliminar {name} de su base de datos?",delete_error:"Se ha producido un error al eliminar este tipo de tarea. Es probable que haya datos vinculados a l. Est seguro de que este tipo de tarea no tiene ninguna tarea vinculada a ella?",edit_title:"Tratar tipo de tarea",new_task_type:"Aadir un tipo de tarea",number:"tipo de tarea | tipos de tarea",title:"Tipos de tareas",fields:{dedicated_to:"Para",color:"Color",name:"Nombre",allow_timelog:"Registro de tiempo",priority:"Prioridad"}},sequences:{all_sequences:"Todas las secuencias",delete_text:"Est seguro de que desea eliminar {name} de su base de datos?",delete_error:"Se ha producido un error al borrar esta secuencia. Es probable que haya datos vinculados a l. Ests seguro de que esta secuencia no tiene ninguna toma vinculada a ella?",edit_title:"Tratar secuencia",empty_list:"No hay ninguna secuencia en la produccin. Qu tal si creamos algunos?",empty_list_client:"No hay secuencia en esta produccin.",new_sequence:"Nueva secuencia",number:"secuencia | secuencias",title:"Estadsticas de secuencia",fields:{name:"denominar",description:"descripcin"}},schedule:{title:"Calendario",title_main:"Calendario principal",overall_man_days:"Das-hombre",md:"md",zoom_level:"Nivel de zoom",milestone:{add_milestone:"Aadir hito para",edit_milestone:"Tratar hito para",name:"Nombre",error:"Se ha producido un error al aadir o editar el hito. Por favor, intntalo de nuevo."}},shots:{casting:"Casting",creation_explaination:'Para aadir tomas, primero tienes que crear un episodio y una secuencia. Escriba el nombre de un episodio en la parte inferior de la columna de la izquierda y luego haga clic en aadir para crear un nuevo episodio. Seleccione este episodio y repita la misma operacin para la secuencia. Finalmente seleccione una secuencia y escriba el nombre de una toma en el campo en la parte inferior de la columna derecha. Haga clic en el botn "Agregar" que aparece a continuacin. Tu primera toma fue creada. Ahora puede aadir muchos ms! Si no es un programa de televisin, tienes que crear directamente una secuencia.',delete_text:"Est seguro de que desea eliminar {name} de su base de datos?",delete_error:"Se ha producido un error al borrar esta imagen. Es probable que haya datos vinculados a l. Ests seguro de que esta toma no tiene ninguna tarea relacionada con ella?",edit_success:"Plan {name} editado con xito.",edit_fail:"La creacin o edicin fall, se produjo un error. Asegrese de que no est renombrando la toma con un nombre ya listado para una secuencia dada.",edit_title:"Editar foto",empty_list:"No hay ninguna toma en la produccin. Qu tal si creamos algunos?",empty_list_client:"No hay ninguna toma en esta produccin.",episodes:"Episodios",history:"Historial de valores plan",new_shot:"Agregar una foto",new_shots:"Aadir tomas",new_sequences:"Aadir secuencias",new_episodes:"Aadir episodios",no_casting:"El lanzamiento de granadas est vaco.",number:"Plan | Disparos",manage:"Crear tomas",new_success:"Plan {name} creado con xito.",padding:"Acolchado de chupitos",restore_text:"Est seguro de que desea restaurar {name} en su base de datos?",restore_error:"Se ha producido un error al restaurar esta toma.",sequences:"Secuencias",tasks:"Tareas de los chupitos",title:"Plans",fields:{description:"Descripcin",nb_frames:"Marcos",episode:"Episodio",frame_in:"En",frame_out:"Fuera",fps:"SPD",name:"Nombre",production:"Prod",sequence:"Secuencia",time_spent:"Tiempo"}},server_down:{text:"Pngase en contacto con el servicio de asistencia tcnica de su proveedor, su administrador de sistemas o su departamento de TI para comprender qu es lo que est fallando.",title:"Kitsu encontr un error al alcanzar su API de datos."},statistics:{count:"Conteos",count_mode:"Modo de recuento",display_mode:"Modo de visualizacin",frames:"Marcos",pie:"Grficos circulares",shots:"Plans"},tasks:{add_preview:"Aadir vista previa",add_preview_error:"Se ha producido un error al aadir la vista previa.",assign:"Asigne una tarea a: | Asignar {nbSelectedTasks} tareas a:",back_to_list:"volver a la lista",bigger:"Ampliar el panel de tareas",change_status_to:"Cambiar el estado de la tarea a:",change_preview:"Cambiar la vista previa",change_priority:"Cambiar la prioridad a:",clear_assignations:"asignaciones claras",comment_image:"Adjunte una imagen a su comentario",create_for_selection:"Crear tarea para cada celda vaca:",create_tasks:"Aadir tareas",create_tasks_shot:"Aadir tareas para las tomas actuales",create_tasks_shot_explaination:"Va a crear una nueva tarea para cada toma de la lista actual para el tipo de tarea dado. Quieres continuar?",create_tasks_shot_failed:"Se ha producido un error en el servidor durante el proceso de creacin.",create_tasks_asset:"Aadir tareas para los assets actuales",create_tasks_asset_explaination:"Va a crear una nueva tarea para cada asset fijo de la lista actual para el tipo de tarea en cuestin. Quieres continuar?",create_tasks_asset_failed:"Se ha producido un error en el servidor durante el proceso de creacin.",current:"Tarea a realizar",current_status:"Situacin actual",delete_all_text:"Est seguro de que desea eliminar todas las tareas de {name}? Por favor, confirme escribiendo el nombre del tipo de tarea que desea eliminar en el campo de texto.",delete_all_error:"Ha fallado la eliminacin de todas las tareas de un determinado tipo de tarea.",delete_error:"Se ha producido un error al eliminar la tarea.",delete_comment:"Ests seguro de que quieres borrar el ltimo comentario?",delete_comment_error:"Se ha producido un error al eliminar un comentario.",delete_for_selection:"Eliminar tareas seleccionadas:",delete_preview:"Ests seguro de que quieres borrar esta vista previa?",delete_preview_error:"Se ha producido un error al eliminar la vista previa.",edit_comment:"Editar cmo",done:"Hecho",download_pdf_file:"Descargar archivo.{extension}",feedback:"retroalimentacin",full_screen:"Visualizacin en pantalla completa",hide_assignations:"Suprimir asignaciones",hide_infos:"Ocultar informacin adicional",my_tasks:"Mis tareas",next:"tarea siguiente",no_assignation_right:"No se le permite gestionar asignaciones",no_comment:"Actualmente no hay ningn comentario para esta tarea.",no_preview:"Actualmente no hay ninguna vista previa para esta tarea.",no_task_selected:"Ninguna tarea seleccionada",number:"tarea | tareas",preview:"Previsualizaciones",previous:"tarea previa",unsubscribe_notifications:"Darse de baja de las notificaciones",select_image_file:"Por favor, selecciona la imagen de tu disco duro que quieres adjuntar a tu comentario:",set_estimations:"Establecer estimaciones para las tareas seleccionadas:",set_preview:"Establecer esta vista previa como miniatura",set_preview_error:"Se ha producido un error al configurar la vista previa como miniatura.",set_preview_done:"Esta vista previa se utiliza como miniatura para la entidad actual.",select_preview_file:"Por favor, seleccione una imagen de su disco duro para utilizarla como vista previa de la tarea actual:",show_assignations:"Mostrar asignaciones",show_infos:"Mostrar informacin adicional",subscribe_notifications:"Suscribirse a las notificaciones",tasks:"Tareas",validation:"Validacin",with_comment:"Con un comentario...",fields:{asset_type:"Tipo de asset",assignees:"Asignados",count:"Cuenta",end_date:"Fecha de finalizacin",due_date:"Dos fechas",duration:"Duracin",entity:"Entidad",entity_name:"Nombre",estimation:"Estimacin",frames:"Marco.",last_comment:"ltimo comentario",last_comment_date:"ltimo comentario",priority:"Prioridad",production:"Prod",real_end_date:"Fecha de validacin",real_start_date:"Fecha WIP",retake_count:"Reasignaciones",start_date:"Fecha de inicio",sequence:"Secuencia",task_status:"Estado",task_status_short_name:"Estado",task_type:"Tipo"},colors:{title:"Colorear",neutral:"Neutral",status:"Color de estado",late:"Tarde en rojo"},priority:{emergency:"Emergencia",normal:"Normal",high:"Alto",very_high:"Muy Alto"}},timesheets:{detail_level:"Nivel de detalle",done_tasks:"Tareas realizadas",export_timesheet:"Hoja de horas de exportacin",hours:"horario",month:"Mes",time_spents:"Tiempo empleado (horas)",title:"Hojas horarias",year:"Ao"},wrong_browser:{title:"Tu navegador no es compatible con Kitsu",text:"Kitsu slo puede ser usado con navegadores Firefox y Chrome."}},w={assets:{cast_in:"Eingieen",delete_error:"Beim Lschen dieses Assets ist ein Fehler aufgetreten. Wahrscheinlich sind damit Daten verknpft. Sind Sie sicher, dass dieser Anlagentyp keine Aufgabe hat, die mit ihm verbunden ist?",delete_text:"Sind Sie sicher, dass Sie {name} aus Ihrer Datenbank entfernen mchten?",edit_fail:"Erstellung oder Ausgabe fehlgeschlagen, ein Fehler ist aufgetreten.",edit_success:"Anlage {name} erfolgreich bearbeitet.",edit_title:"Anlage bearbeiten",empty_list:"In der Produktion gibt es keine Anlage. Wie wre es mit der Erstellung von solchen?",empty_list_client:"Es gibt keine Anlage in dieser Produktion.",new_asset:"Hinzufgen einer Anlage",new_assets:"Assets hinzufgen",new_success:"Anlage {name} erfolgreich erstellt.",no_cast_in:"Dieser Gegenstand wird in keinem Schuss geworfen.",number:"Vermgenswerte",restore_text:"Sind Sie sicher, dass Sie {name} in Ihrer Datenbank wiederherstellen mchten?",restore_error:"Bei der Wiederherstellung dieses Assets ist ein Fehler aufgetreten.",tasks:"Asset-Aufgaben",title:"Vermgenswerte",fields:{description:"Beschreibung",episode:"Ep.",hidden_from_client:"Vor dem Kunden verborgen",name:"Name",production:"Produkt",time_spent:"Zeit",type:"Typ"}},asset_types:{all_asset_types:"Alle asset typen",delete_text:"Sind Sie sicher, dass Sie {name} aus Ihrer Datenbank entfernen mchten?",delete_error:"Beim Lschen dieses Anlagentyps ist ein Fehler aufgetreten. Wahrscheinlich sind damit Daten verknpft. Sind Sie sicher, dass diese Anlageart keine Anlage mit ihr verbunden hat?",edit_title:"Anlagenart bearbeiten",new_asset_type:"Hinzufgen einer Anlagenart",number:"asset type | asset types",title:"Vermgensarten",production_title:"Vermgensarten Statistiken",fields:{name:"Name"}},breakdown:{all_assets:"Alle verfgbaren Vermgenswerte",edit_label:"Etikett bearbeiten",empty:"Leerguss",label:"Etikett",title:"Aufschlsselung",options:{fixed:"festgelegt",animate:"animierte"}},comments:{add_attachment:"Anhang hinzufgen",add_comment:"Einen Kommentar hinzufgen...",add_checklist:"Checkliste hinzufgen",add_preview:"Vorschau anhngen",comment_from_client:"Kommentar von die Kunde",change_preview:"nderungsvorschau",empty_text:"Dieser Kommentar ist leer",edit_title:"Bearbeiten Sie, wie",error:"Beim Posten von Kommentaren ist ein Fehler aufgetreten.",no_file_attached:"Keine Datei angehngt",post_status:"Verffentlichen Sie, wie",retake:"Wiederaufnahme",pin:"Pin",pinned:"Pinned",revision:"berarbeitung",task_placeholder:"Neuer Artikel",text:"Text",unpin:"Unbekannt",validated:"Validiert!",validation_required:"Validierung erforderlich",set_status_to:"Status auf setzen",fields:{text:"Text"}},custom_actions:{delete_text:"Sind Sie sicher, dass Sie benutzerdefinierte Aktionen {name} aus Ihrer Datenbank entfernen mchten?",delete_error:"Beim Lschen dieser benutzerdefinierten Aktion ist ein Fehler aufgetreten.",edit_title:"Bearbeiten einer benutzerdefinierten Aktion",new_custom_action:"Hinzufgen einer benutzerdefinierten Aktion",number:"benutzerdefinierte Aktion | benutzerdefinierte Aktionen",run_for_selection:"Benutzerdefinierte Aktion fr ausgewhlte Aufgaben ausfhren:",title:"Benutzerdefinierte Aktionen",fields:{name:"Name",url:"URL",entity_type:"Entittstyp",is_ajax:"AJAX verwenden"},entity_types:{all:"Alle",shot:"Erschossen",asset:"Vermgen"}},entities:{build_filter:{assignation:"Zuweisung",assignation_exists_for:"Zuordnungen existieren fr",assigned_to:"Zugewiesen an",descriptor:"Metadaten",equal:"Gleich",no_assignation_for:"Keine Zuordnung vorhanden fr",no_filter:"Kein Filter",not_equal:"Nicht gleich",not_assigned_to:"Nicht zugeordnet zu",status:"Aufgabenstatus",thumbnail:"Anwesenheit von Miniaturbildern",Titel:"Filter an...",with_thumbnail:"Mit Vorschaubild",without_thumbnail:"Ohne Miniaturansicht",title:"Filter on..."},thumbnails:{error:"Beim Hochladen von Miniaturbildern ist ein Fehler aufgetreten",explaination:"Das Hinzufgen einer Miniaturansicht erfordert die Einstellung einer neuen Vorschau. Um mehrere Miniaturansichten gleichzeitig festzulegen, mssen Sie zunchst einen Aufgabentyp auswhlen, der fr die Erstellung der neuen Vorschauen verwendet wird. Die Miniaturansichten werden von dieser neuen Vorschau aus eingestellt.",explaination_two:"Dann mssen Sie die Dateien auswhlen, die Sie hochladen mchten. Um die richtigen Entitten zu finden, mssen die Dateinamen dem folgenden Muster entsprechen:",shots_pattern:'SequenceName ShotName" z.B. SQ01_SH01',assets_pattern:'AssetType AssetName" z.B. Umgebung_Wald',select_files:"Dateien auswhlen",selected_files:"Ausgewhlte Dateien",select_task_type:"Aufgabentyp auswhlen",title:"Thumbnails hinzufgen",undefined:"Unbestimmt",undefined_pattern:"Undefiniert",upload:"Thumbnails hinzufgen"}},episodes:{all_episodes:"Alle Episoden",delete_error:"Beim Lschen dieser Episode ist ein Fehler aufgetreten. Wahrscheinlich sind damit Daten verknpft. Bist du sicher, dass diese Episode keine Sequenz hat, die mit ihr verbunden ist?",delete_text:"Sind Sie sicher, dass Sie {name} aus Ihrer Datenbank entfernen mchten?",edit_title:"Episode bearbeiten",empty_list:"Es gibt keine Episode in der Produktion. Wie wre es mit der Erstellung von solchen?",empty_list_client:"Es gibt keine Episode in dieser Produktion.",new_episode:"Neue Episode",number:"episode | episoden",title:"Episodenstatistiken",fields:{name:"Name",description:"Beschreibung"}},keyboard:{altdown:"Verschiebt die Auswahl einer Aufgabe nach unten",altj:"Vorherige vorschau auswhlen",altk:"Nchste vorschau auswhlen",altleft:"Verschiebt die Auswahl einer Aufgabe nach links",altright:"Verschiebt die Auswahl einer Aufgabe nach rechts",altup:"Verschiebt die Auswahl einer Aufgabe nach oben",annotations:"Anmerkungen",draw:"Zeichnungsmodus einschalten",navigation:"Navigation",playlist_navigation:"Playlist navigation",redo:"Redo",remove_annotation:"Annotation entfernen",undo:"Undo",shortcuts:"Tastaturkrzel"},login:{back_to_login:"Zurck zum Login",forgot_password:"Passwort vergessen?",login:"Einloggen",login_failed:"Die Anmeldung ist fehlgeschlagen, bitte berprfen Sie Ihre Zugangsdaten.",login_page:"Abbrechen",redirecting:"Umleitung",reset_change_password:"Passwort ndern",reset_change_password_form_failed:"Es gibt ein Problem mit dem von dir angegebenen Passwort. Bitte berprfen Sie, ob es mindestens 7 Zeichen lang ist und ob beide Passwrter bereinstimmen.",reset_change_password_failed:"Die nderung des Passworts ist fehlgeschlagen. Bitte starten Sie den gesamten Vorgang erneut.",reset_change_password_succeed:"Dein Passwort wurde erfolgreich gendert. Bitte gehen Sie zurck zur Login-Seite, um sie zu verwenden.",reset_change_password_title:"Geben Sie ein neues Passwort ein",reset_password:"Passwort zurcksetzen",reset_password_failed:"Passwort zurcksetzen fehlgeschlagen. Bitte berprfen Sie Ihre E-Mail-Adresse.",reset_password_succeed:"Passwort zurcksetzen erfolgreich. Bitte berprfen Sie Ihren Posteingang.",reset_password_title:"Gib deine E-Mail-Adresse ein, um dein Passwort zurckzusetzen.",title:"Einloggen bei Kitsu",fields:{email:"E-Mail",password:"Passwort",password2:"Passwort wiederholen"}},main:{about:"ber",add:"hinzufgen",all:"Alle",all_assets:"Alle assets",admin:"Admin",cancel:"Abbrechen",clear_selection:"Aktuelle Auswahl lschen",documentation:"Dokumentation",close:"Schlieen",confirmation:"Besttigen",confirmation_and_stay:"Besttigen und bleiben",date:"Datum",dark_theme:"Dunkles Thema",days_spent:"Tag verbracht | Tage verbracht",delete:"Lschen",delete_all:"Alle lschen",delete_text:"Sind Sie sicher, dass Sie {name} aus Ihrer Datenbank entfernen mchten?",edit:"Bearbeiten",empty_comment:"Leerer Kommentar",end_date:"Enddatum",files_selected:"Ausgewhlte dateien",for:"Fr",go_productions:"Zu den Produktionen",history:"Historie",info:"Informationen",or:"oder",no:"Nein",loading:"Laden...",loading_data:"Laden von Daten",loading_error:"Beim Laden von Daten ist ein Fehler aufgetreten.",logout:"Abmeldung",modify:"Modify",minimize:"Minimieren",maximize:"Maximieren",nb_frames:"frame | frames",profile:"Profil",production:"Produktion",remove:"Entfernen",save:"Speichern",start_date:"Startdatum",sort_by:"Sortierent",sorted_by:"Sortiert nach",studio:"Studio",tutorials:"Tutorials",user:"Benutzer",white_theme:"Weies Thema",yes:"Ja",csv:{choose:"Auswhlen",unknown:"Unbekannte Spalte",error_upload:"Beim Hochladen Ihrer CSV-Datei ist ein Fehler aufgetreten",export_file:"Exportieren",import_file:"Importieren",import_title:"Daten aus einem CSV importieren",legend:"Legende",legend_ok:"Erkannte Daten",legend_ignored:"Ignorierte Daten",legend_missing:"Fehlende Daten",legend_disabled:"Daten, die nicht aktualisiert oder erstellt werden",legend_overwrite:"Daten, die aktualisiert werden",paste:"Einfgen",paste_code:"Bitte fgen Sie hier Ihre CSV-Daten ein:",preview:"Vorschau",preview_episode_name:"Episodenname",preview_title:"Vorschau Ihrer importierten Daten",preview_description:"Laden Sie eine .csv-Datei hoch, um Ihr Forum mit Beitrgen zu fllen",preview_required:"NB: Kopfzeilen mssen als erste Zeile eingefgt werden",preview_reupload:"CSV-Datei erneut hochladen",required_fields:"Ihr CSV erfordert die folgenden Spalten",select_file:"Bitte whlen Sie eine Datei aus einem Ihrer Ordner:",tab_select_file:"Laden Sie eine CSV-Datei hoch",tab_paste_code:"CSV-Daten einfgen",upload_file:"Durchsuchen",options:{title:"Optionen",update:"Bestehende Daten aktualisieren"}}},menu:{assign_tasks:"Aufgaben zuweisen",change_priority:"Prioritt ndern",change_status:"Status ndern",create_tasks:"Aufgaben erstellen",delete_tasks:"Aufgaben lschen",generate_playlists:"Wiedergabelisten generieren",run_custom_action:"Benutzerdefinierte Aktion ausfhren",set_estimations:"Schtzungen festlegen"},news:{all:"Alle",commented_on:"kommentiert",infos:"Infos",no_news:"Es gibt keine Neuigkeiten fr diese Produktion oder fr diesen Filter.",only_comments:"Nur Kommentare",only_previews:"Nur Vorschauen",set_preview_on:"Vorschau einstellen auf",task_status:"Aufgabenstatus",task_type:"Aufgabentyp",title:"News Feed"},not_found:{text:"Mit dem Link, auf den du geklickt hast, war etwas nicht in Ordnung, wir empfehlen dir, auf der Homepage wieder vorbeizuschauen.",title:"Seite nicht gefunden.... suchen Sie nach etwas, das Sie gelscht haben?"},notifications:{and_change_status:"und nderte den Status auf",assigned_you:"die Sie zugeordnet haben",commented_on:"kommentiert",mention_you_on:"hat dich erwhnt",no_notifications:"Fr Ihre aktuellen Projekte gibt es derzeit keine Benachrichtigung fr Sie.",title:"Benachrichtigungen",with_preview:"mit einer Vorschau"},people:{active:"Aktiv",add_member_to_team:"Fge ein Mitglied zum Team hinzu:",create_invite:"Einladung erstellen und versenden",delete_error:"Beim Lschen dieser Person ist ein Fehler aufgetreten. Wahrscheinlich sind damit Daten verknpft. Sind Sie sicher, dass diese Person keine Zuordnung hat oder keinen Kommentar geschrieben hat?",delete_text:"Sind Sie sicher, dass Sie {personName} aus Ihrer Datenbank entfernen mchten?",edit_title:"Person bearbeiten",empty_team:"Im Projektteam ist niemand gelistet.",invite:"Einladung senden",invite_error:"Beim Senden der Einladung ist ein Fehler aufgetreten.",invite_success:"Einladung wurde erfolgreich versendet",new_person:"Einen neuen Mitarbeiter hinzufgen",no_task_assigned:"Es gibt keine laufenden Aufgaben, die Ihnen zugeordnet sind.",persons:"Person | Personen",running_tasks:"Laufende Aufgaben",select_person:"Eine Person auswhlen.....",team:"Team",title:"Menschen",unactive:"Inaktiv",csv:{import_file:"Importieren einer.csv-Datei",export_file:"Als.csv-Datei herunterladen",import_title:"Daten aus einer CSV-Datei importieren",required_fields:"Ihre CSV-Datei bentigt die folgenden Spalten",select_file:"Bitte whlen Sie eine Datei aus einem Ihrer Ordner aus:",error_upload:"Beim Hochladen Ihrer CSV-Datei ist ein Fehler aufgetreten."},fields:{first_name:"Vorname",last_name:"Nachname",email:"E-Mail",phone:"Phone",role:"Rolle",old_password:"Aktuelles Passwort",password:"Neues Passwort",password_2:"Neues Passwort (wiederholen)",active:"Aktiv"},list:{name:"Name",email:"E-Mail",phone:"Phone",role:"Rolle",active:"Aktiv"},role:{admin:"Studio-Manager",client:"Client",manager:"Vorgesetzter",undefined:"",user:"CG Artist",vendor:"Anbieter"}},playlists:{add_assets:"Assets hinzufgen",add_selection:"Auswahl hinzufgen",add_shots:"Shots hinzufgen",add_episode:"Ganze episode hinzufgen",add_movie:"Ganze film hinzufgen",add_sequence:"Ganze sequenz hinzufgen",apply_task_type_change:"Dadurch wird die letzte Revision fr den gegebenen Aufgabentyp auf allen shots positioniert.",available_build:"Verfgbare Builds",building:"Gebude",build_daily:"Tglich ausstehend",build_weekly:"Alle ausstehend",build_mp4:"Build .mp4",client_playlist:"Kunde Playlist",created_at:"Erstellen Sie die:",create_for_selection:"Zur Auswahl erstellen",create_title:"Playlist erstellen",delete_text:"Sind Sie sicher, dass Sie {name} aus Ihrer Datenbank entfernen mchten?",delete_error:"Beim Lschen dieser Playlist ist ein Fehler aufgetreten.",download_zip:"Download.zip",edit_title:"Wiedergabeliste bearbeiten",failed:"Fehlgeschlagen",for_client:"Der Kunde",for_studio:"Das Studio",last_creation:"Neueste kreationen",last_modification:"Neueste nderungen",loading_error:"Es ist ein Serverfehler aufgetreten. Wiedergabelisten knnen nicht geladen werden.",new_playlist:"Eine Wiedergabeliste hinzufgen",no_build:"Kein Build",no_playlist:"Fr dieses Projekt gibt es derzeit keine Playlist.",no_preview:"Keine Vorschau fr diese Aufnahme",no_selection:"Bitte whlen Sie links eine Playlist aus.",no_sequence_for_episode:"Es gibt keine Sequenz fr diese Episode.",no_shot_for_production:"Fr diese Produktion gibt es keine Chance.",no_shot_for_sequence:"Es gibt keinen Schuss fr diese Sequenz.",select_shot:"Bitte whlen Sie einen Schuss in der rechten Spalte aus.",select_playlist:"Bitte whlen Sie eine Playlist in der linken Spalte aus.",select_task_type:"ndern Sie den Aufgabentyp fr alle shots",title:"Wiedergabelisten",updated_at:"Gendert am",remove:"entfernen",actions:{edit:"Playliste bearbeiten",delete:"Playliste lschen",fullscreen:"Vollbild",download:"Herunterladen...",entity_list:"Entity-Liste anzeigen/verbergen",comments:"Kommentare anzeigen/verbergen",annotation:"Anmerkung",annotation_text:"Doppelklicken Sie auf die Vorschau, um etwas Text hinzuzufgen",annotation_delete:"Annotation lschen",annotation_redo:"Annotation wiederholen",annotation_undo:"Annotation rckgngig machen",annotation_big:"Gro",annotation_medium:"Medium",annotation_small:"Klein",change_task_type:"Aufgabentyp ndern",split_screen:"Geteilter Bildschirm",next_shot:"Nchster shot",previous_shot:"Vorherige shot",next_frame:"Nchstes Bild",previous_frame:"Vorheriges Bild",play:"Spielen",pause:"Pause"},fields:{created_at:"Erstellt bei",for_client:"Zum teilen mit",for_entity:"Fr Entitt",name:"Name",updated_at:"Aktualisiert bei"}},productions:{current:"Ausgewhlte Produktion",delete_text:"Sind Sie sicher, dass Sie {name} aus Ihrer Datenbank entfernen mchten?",delete_error:"Beim Lschen dieser Produktion ist ein Fehler aufgetreten. Wahrscheinlich sind damit Daten verknpft. Sind Sie sicher, dass diese Produktion keine Aufgabe, keinen Schuss oder Vermgenswert hat, der mit ihr verbunden ist? Kitsu erlaubt es nicht, die Produktion zu lschen. Wenn du die Produktion nicht mehr sehen willst, kannst du sie stattdessen schlieen.",edit_title:"Produktion bearbeiten",new_production:"Eine Produktion hinzufgen",number:"Produktion | Produktionen",open_productions:"Meine Produktionen",picture:"Bild ndern",title:"Produktionen",home:{create_new:"Erstellen Sie eine neue Produktion",empty:"Du hast keine offene Produktion. Wie wre es mit der Erstellung eines neuen?",no_task:"Du hast keine Aufgabe zugewiesen. Wenden Sie sich an Ihren Vorgesetzten, um zu sehen, was Sie tun knnen!",no_prod_for_client:"Du hast keinen Zugang zu einer Produktion. Wenden Sie sich an Ihren Auftragnehmer, um einen Zugang zu erhalten.",title:"Laufende Produktionen",welcome:"Willkommen bei Kitsu"},fields:{fps:"FPS",name:"Name",ratio:"Ratio",resolution:"Auflsung",status:"Status",type:"Typ"},metadata:{add_explaination:"Fgen Sie spezifische Daten hinzu, die fr dieses Projekt erforderlich sind.",add_failed:"Beim Hinzufgen von Metadaten zu Ihrem Projekt ist ein Fehler aufgetreten.",add_new_values:"Es sind derzeit keine Werte verfgbar.",available_values:"Verfgbare Werte",choices:"Liste der Werte",delete_text:"Sind Sie sicher, dass Sie diese Spalte und die zugehrigen Daten fr alle Anlagen dieser Produktion lschen mchten?",delete_error:"Beim Lschen dieser Metadatenspalte ist ein Fehler aufgetreten.",error:"Beim Hinzufgen der Metadatenspalte ist ein Fehler aufgetreten. Stellen Sie sicher, dass es keine Spalte mit hnlichem Namen gibt und dass alle Felder ausgefllt sind. Wenn das Problem weiterhin besteht, wenden Sie sich bitte an das Support-Team.",free:"Freier Wert",title:"Metadatenspalte hinzufgen"},status:{closed:"Geschlossen",open:"Offen",active:"Offen",archived:"Geschlossen"},type:{short:"Kurz",featurefilm:"Spielfilm",tvshow:"TV-Show"}},profile:{change_avatar:"Avatar ndern",info_title:"Informationen",language:"Sprache",notifications_enabled:"E-Mail-Benachrichtigungen aktiviert",notifications_slack_enabled:"Slack-Benachrichtigungen aktiviert",notifications_slack_user:"Slack-Benutzername",password_title:"Passwort ndern",timezone:"Zeitzone",title:"Dein Profil",avatar:{title:"Avatar ndern",error_upload:"Beim Hochladen des Bildes ist ein Fehler aufgetreten."},change_password:{button:"Passwort ndern",error:"Beim ndern des Passworts ist ein Fehler aufgetreten. Bitte berprfen Sie Ihr aktuelles Passwort.",success:"Dein Passwort wurde erfolgreich gendert!",unvalid:"Deine neue Passwort-Besttigung stimmt nicht oder dein Passwort ist zu kurz (es werden mindestens 7 Zeichen erwartet)."},save:{button:"nderungen speichern",error:"Beim Speichern von nderungen ist ein Fehler aufgetreten."}},quota:{average:"Durchschnitt",count_label:"Zhlmodus",detail_label:"Detaillierungsgrad",details_name:"Name",details_seconds:"Sekunden",details_frames:"Frames",month_label:"Monat",no_quota:"Fr diese Art von Aufgaben gibt es keine Quote.",name:"Nom",quota_day:"Quote pro Tag",quota_week:"Quote pro Woche",quota_month:"Quote pro Monat",year_label:"Jahr",title:"Quoten",type_label:"Typ"},settings:{change_logo:"Logo ndern",integrations:"Integrationen",logo:"Logo-Studio",no_logo:"Es gibt kein Logo-Set.",set_logo:"Logo Studio-Set",title:"Einstellungen",fields:{name:"Studio-Name",hours_by_day:"Stunden am Tag",slack_token:"Slack Token (Optional)",use_original_name:"Original-Dateinamen fr Downloads verwenden"},production:{empty_list:"Die Liste ist derzeit leer. Das bedeutet, dass den Benutzern alle Daten aus den Haupteinstellungen zur Verfgung stehen. Fgen Sie einige Eintrge hinzu, um die Auswahl fr diese Produktion einzuschrnken."},save:{button:"Einstellungen speichern",error:"Beim Speichern von Einstellungen ist ein Serverfehler aufgetreten."}},task_status:{delete_text:"Sind Sie sicher, dass Sie {name} aus Ihrer Datenbank entfernen mchten?",delete_error:"Beim Lschen dieses Aufgabenstatus ist ein Fehler aufgetreten. Wahrscheinlich sind damit Daten verknpft. Sind Sie sicher, dass dieser Aufgabenstatus keine Aufgabe zugeordnet hat?",edit_title:"Aufgabenstatus bearbeiten",number:"Aufgabenstatus | Aufgabenstatus",new_task_status:"Hinzufgen eines Aufgabenstatus",title:"Aufgabenstatus",fields:{is_artist_allowed:"Ist der Knstler erlaubt",is_client_allowed:"Ist der Kunde erlaubt",color:"Farbe",is_done:"Ist erledigt",is_reviewable:"Ist berprfbar",is_retake:"Hat Wiederholungswert",name:"Name",short_name:"Kurzname"}},task_types:{delete_text:"Sind Sie sicher, dass Sie {name} aus Ihrer Datenbank entfernen mchten?",delete_error:"Beim Lschen dieses Aufgabentyps ist ein Fehler aufgetreten. Wahrscheinlich sind damit Daten verknpft. Sind Sie sicher, dass dieser Aufgabentyp keine Aufgabe hat, die mit ihm verknpft ist?",edit_title:"Aufgabentyp bearbeiten",new_task_type:"Hinzufgen eines Aufgabentyps",number:"Aufgabentyp | Aufgabentypen",title:"Aufgabentypen",fields:{dedicated_to:"Fr",color:"Farbe",name:"Name",allow_timelog:"Zeiterfassung",priority:"Prioritt"}},sequences:{all_sequences:"Alle Sequenzen",delete_text:"Sind Sie sicher, dass Sie {name} aus Ihrer Datenbank entfernen mchten?",delete_error:"Beim Lschen dieser Sequenz ist ein Fehler aufgetreten. Wahrscheinlich sind damit Daten verknpft. Bist du sicher, dass diese Sequenz keinen Schuss damit zu tun hat?",edit_title:"Sequenz bearbeiten",empty_list:"Es gibt keine Reihenfolge in der Produktion. Wie wre es mit der Erstellung von solchen?",empty_list_client:"In dieser Produktion gibt es keine Reihenfolge.",new_sequence:"Neue Sequenz",number:"Sequenz | Sequenzen",title:"Sequenz-Statistiken",fields:{name:"Name",description:"Beschreibung"}},schedule:{title:"Zeitplan",title_main:"Hauptterminplan",overall_man_days:"Manntage",md:"md",zoom_level:"Zoomstufe",milestone:{add_milestone:"Meilenstein hinzufgen fr",edit_milestone:"Meilenstein bearbeiten fr",name:"Name",error:"Beim Hinzufgen oder Bearbeiten des Meilensteins ist ein Fehler aufgetreten. Bitte versuchen Sie es erneut."}},shots:{casting:"Druckguss",creation_explaination:"Um Aufnahmen hinzuzufgen, musst du zuerst eine Episode und eine Sequenz erstellen. Geben Sie unten in der linken Spalte einen Episodennamen ein und klicken Sie dann auf Hinzufgen, um eine neue Episode zu erstellen. Whlen Sie diese Episode aus und wiederholen Sie den gleichen Vorgang fr die Sequenz. Whlen Sie schlielich eine Sequenz aus und geben Sie einen Schussnamen in das Feld unten in der rechten Spalte ein. Klicken Sie auf die Schaltflche Hinzufgen unten. Dein erster Schuss wurde erstellt. Du kannst jetzt viel mehr hinzufgen! Wenn es sich nicht um eine TV-Show handelt, mssen Sie direkt eine Sequenz erstellen.",delete_text:"Sind Sie sicher, dass Sie {name} aus Ihrer Datenbank entfernen mchten?",delete_error:"Beim Lschen dieses Schusses ist ein Fehler aufgetreten. Wahrscheinlich sind damit Daten verknpft. Bist du sicher, dass diese Aufnahme keine Aufgabe hat?",edit_success:"Shot {name} erfolgreich bearbeitet.",edit_fail:"Erstellung oder Ausgabe fehlgeschlagen, ein Fehler ist aufgetreten. Achte darauf, dass du den Schuss nicht mit einem Namen umbenennst, der bereits fr eine bestimmte Sequenz vergeben wurde.",edit_title:"Schuss bearbeiten",empty_list:"Es gibt keinen Schuss in der Produktion. Wie wre es mit der Erstellung von solchen?",empty_list_client:"In dieser Produktion gibt es keine Aufnahme.",episodes:"Episoden",history:"Filmaufnahme werte historie",new_shot:"Einen Schuss hinzufgen",new_shots:"Schsse hinzufgen",new_sequences:"Sequenzen hinzufgen",new_episodes:"Episoden hinzufgen",no_casting:"Der Schuss ist leer.",number:"Schuss | Schsse",manage:"Schsse erstellen",new_success:"Schuss {name} erfolgreich erstellt.",padding:"Schusspolsterung",restore_text:"Sind Sie sicher, dass Sie {name} in Ihrer Datenbank wiederherstellen mchten?",restore_error:"Bei der Wiederherstellung dieser Aufnahme ist ein Fehler aufgetreten.",sequences:"Sequenzen",tasks:"Schuss-Aufgaben",title:"Shots",fields:{description:"Beschreibung",nb_frames:"Rahmen",episode:"Episode",frame_in:"In",frame_out:"Aus",fps:"FPS",name:"Name",production:"Produkt",sequence:"Sequenz",time_spent:"Zeit"}},server_down:{text:"Bitte wenden Sie sich an Ihren Lieferantensupport, Ihren Systemadministrator oder Ihre IT-Abteilung, um zu erfahren, was schief luft.",title:"Kitsu ist beim Erreichen seiner Daten-API auf einen Fehler gestoen."},statistics:{count:"Zhlt",count_mode:"Zhlmodus",display_mode:"Anzeigemodus",frames:"Rahmen",pie:"Kreisdiagramme",shots:"Shots"},tasks:{add_preview:"Vorschau hinzufgen",add_preview_error:"Beim Hinzufgen einer Vorschau ist ein Fehler aufgetreten.",assign:"Weisen Sie eine Aufgabe zu: | Aufgaben zuweisen {nbSelectedTasks} Aufgaben zu:",back_to_list:"zurck zur Liste",bigger:"Erweitern Sie das Aufgabenfeld",change_status_to:"ndern des Aufgabenstatus in:",change_preview:"nderungsvorschau",change_priority:"ndern Sie die Prioritt auf:",clear_assignations:"klare Zuordnungen",comment_image:"Ihrem Kommentar ein Bild anhngen",create_for_selection:"Erstellen Sie eine Aufgabe fr jede leere Zelle:",create_tasks:"Aufgaben hinzufgen",create_tasks_shot:"Aufgaben fr aktuelle Aufnahmen hinzufgen",create_tasks_shot_explaination:"Du wirst eine neue Aufgabe fr jeden Schuss der aktuellen Liste fr den angegebenen Aufgabentyp erstellen. Willst du fortfahren?",create_tasks_shot_failed:"Beim Fortfahren der Erstellung ist ein Serverfehler aufgetreten.",create_tasks_asset:"Hinzufgen von Aufgaben fr aktuelle Assets",create_tasks_asset_explaination:"Sie werden fr jede Khlstelle der aktuellen Liste fr den angegebenen Aufgabentyp eine neue Aufgabe erstellen. Willst du fortfahren?",create_tasks_asset_failed:"Beim Fortfahren der Erstellung ist ein Serverfehler aufgetreten.",current:"Zu erledigende Aufgabe",current_status:"Aktueller Status :",delete_all_text:"Sind Sie sicher, dass Sie alle Aufgaben fr bestimmte {name}} lschen mchten? Bitte besttigen Sie dies, indem Sie den Namen des Aufgabentyps der zu lschenden Aufgaben in das Textfeld eingeben.",delete_all_error:"Das Lschen aller Aufgaben fr einen bestimmten Aufgabentyp ist fehlgeschlagen.",delete_error:"Beim Lschen der Aufgabe ist ein Fehler aufgetreten.",delete_comment:"Sind Sie sicher, dass Sie den letzten Kommentar lschen mchten?",delete_comment_error:"Beim Lschen eines Kommentars ist ein Fehler aufgetreten.",delete_for_selection:"Lschen Sie ausgewhlte Aufgaben:",delete_preview:"Sind Sie sicher, dass Sie diese Vorschau lschen mchten?",delete_preview_error:"Beim Lschen der Vorschau ist ein Fehler aufgetreten.",edit_comment:"Bearbeiten Sie, wie",done:"Erledigt",download_pdf_file:"Datei herunterladen .{extension} Datei",feedback:"Rckmeldung",full_screen:"Anzeige im Vollbildmodus",hide_assignations:"Zuordnungen ausblenden",hide_infos:"Zustzliche Informationen ausblenden",my_tasks:"Meine Aufgaben",next:"nchste Aufgabe",no_assignation_right:"Sie drfen keine Zuordnungen verwalten.",no_comment:"Zu dieser Aufgabe gibt es derzeit keinen Kommentar.",no_preview:"Fr diese Aufgabe gibt es derzeit keine Vorschau.",no_task_selected:"Keine Aufgabe ausgewhlt",number:"Aufgabe | Aufgaben",preview:"Vorschauen",previous:"vorherige Aufgabe",unsubscribe_notifications:"Abmeldung von Benachrichtigungen",set_estimations:"Setzt Schtzungen fr ausgewhlte Aufgaben:",select_image_file:"Bitte whlen Sie das Bild von Ihrer Festplatte aus, das Sie Ihrem Kommentar beifgen mchten",set_preview:"Diese Vorschau als Miniaturansicht festlegen",set_preview_error:"Bei der Einstellung der Vorschau als Miniaturansicht ist ein Fehler aufgetreten.",set_preview_done:"Diese Vorschau wird als Miniaturansicht fr das aktuelle Objekt verwendet.",select_preview_file:"Bitte whlen Sie ein Bild von Ihrer Festplatte aus, das Sie als Vorschau fr die aktuelle Aufgabe verwenden mchten:",show_assignations:"Zuordnungen anzeigen",show_infos:"Zustzliche Informationen anzeigen",subscribe_notifications:"Benachrichtigungen abonnieren",validation:"Validierung",tasks:"Aufgaben",with_comment:"Mit einem Kommentar...",fields:{asset_type:"Anlagenart",assignees:"Zessionare",end_date:"Enddatum",due_date:"Zwei Termine",duration:"Dauer",entity:"Entitt",entity_name:"Name",estimation:"Schtzung",frames:"Fram.",last_comment:"Letzter Kommentar",last_comment_date:"Letzter Kommentar",priority:"Prioritt",production:"Produkt",real_end_date:"Validierungsdatum",real_start_date:"WIP-Datum",retake_count:"Wiederholungen",sequence:"Sequenz",start_date:"Startdatum",task_status:"Status",task_status_short_name:"Status",task_type:"Typ"},colors:{title:"Einfrbung",neutral:"Neutral",status:"Statusfarbe",late:"Spt in Rot"},priority:{emergency:"Notfall",normal:"Normal",high:"Hoch",very_high:"Sehr hoch"}},timesheets:{detail_level:"Detaillierungsgrad",done_tasks:"Erledigte Aufgaben",export_timesheet:"Zeiterfassung exportieren",hours:"Stunden",month:"Monat",time_spents:"Zeitaufwand (Stunden)",title:"Stundenzettel",year:"Jahr"},wrong_browser:{title:"Dein Browser wird von Kitsu nicht untersttzt.",text:"Kitsu kann nur mit Firefox und Chrome-Browsern verwendet werden."}},C={assets:{cast_in:"",delete_error:"        .           ",delete_text:"    {name}    ",edit_fail:"     .",edit_success:" {name}   .",edit_title:" ",empty_list:"         ",empty_list_client:"     .",new_asset:"  ",new_assets:"  ",new_success:" {name}    .",no_cast_in:"        .",number:" | ",restore_text:"  {name}    ",restore_error:"       ",tasks:" ",title:"",fields:{description:"",episode:"",name:"",production:"",time_spent:"",type:"",hidden_from_client:"    "}},asset_types:{all_asset_types:" ",delete_text:"    {name}    ",delete_error:"        .          ",edit_title:"  ",new_asset_type:"   ",number:"  |  ",title:" ",production_title:"  ",fields:{name:""}},breakdown:{all_assets:"  ",edit_label:"  ",empty:"  ",label:"",text_mode:"   ",title:" ",options:{fixed:"",animate:""}},comments:{add_comment:"  ...",add_checklist:"   ",add_attachment:"  ",add_preview:"  ",task_placeholder:" ...",change_preview:"  ",comment_from_client:" ",empty_text:" ",edit_title:" ",error:"     .",no_file_attached:"   ",post_status:" ",retake:" ",pin:" ",pinned:" ",revision:"",unpin:"   ",validated:" !",validation_required:"  ",text:"",set_status_to:"  ",fields:{text:""}},custom_actions:{delete_text:"        {name}   ",delete_error:"       .",edit_title:"   ",new_custom_action:"    ",number:"  |  ",run_for_selection:"      :",title:" ",fields:{name:"",url:"",entity_type:"",is_ajax:"  AJAX"},entity_types:{all:"",shot:"",asset:""}},entities:{build_filter:{asset_type:" ",all_types:"  ",assignation:"",assignation_exists_for:"   ",assigned_to:" ",descriptor:"Metadata",equal:"",in:"",no_assignation_for:"   ",no_filter:" ",not_equal:" ",not_assigned_to:"  ",status:" ",thumbnail:" ",title:"  ...",with_thumbnail:" ",without_thumbnail:"  "},thumbnails:{error:"      .",explaination:"       .                          .",explaination_two:"          .               :",shots_pattern:'"    " eg. SQ01_SH01.',assets_pattern:'"    " eg. Environment_Forest.',select_files:"  ",selected_files:"   ",select_task_type:"  ",title:"   ",undefined:" ",undefined_pattern:" ",upload:"   "}},estimation:{title:""},episodes:{all_episodes:"  ",delete_error:"        .       .          ",delete_text:"  {name}               .            ?",edit_title:" ",empty_list:"     .      ",empty_list_client:"      .",new_episode:" ",number:" |  ",title:"  ",fields:{name:"",description:""}},keyboard:{altdown:"     ",altj:"   ",altk:"   ",altleft:"     ",altright:"     ",altup:"     ",annotations:" ",draw:"  ",navigation:"",redo:" ",undo:"",playlist_navigation:"  ",remove_annotation:"  ",shortcuts:" "},login:{back_to_login:"   ",forgot_password:"     ",login:"",login_failed:"        .",login_page:"",redirecting:"  {secondsLeft} ...",reset_change_password:"  ",reset_change_password_form_failed:"    .      7       .",reset_change_password_failed:"   .      .",reset_change_password_succeed:"      .          .",reset_change_password_title:"    ",reset_password:"  ",reset_password_failed:"    .      .",reset_password_succeed:"      .     .",reset_password_title:"        .",title:"  Kitsu",fields:{email:"",password:" ",password2:"   "}},main:{about:"",add:" ",all:"",all_assets:" ",admin:"",cancel:"",clear_selection:" ",close:"",confirmation:"",confirmation_and_stay:"  ",date:"",dark_theme:" ",days_spent:"/  ",days_estimated:"/  ",delete:"",delete_all:" ",delete_text:"     {name}   ",documentation:"",edit:"",empty_comment:"  ",end_date:" ",files_selected:"   ",for:"",go_productions:"   ",history:"",info:"",or:"",no:"",loading:"...",loading_data:"  ",loading_error:"      .",logout:"",modify:" ",minimize:" ",main_pack:" ",maximize:" ",nb_frames:" |  ",person:"",profile:"",production:"",remove:"",save:"",sort_by:"  ",sorted_by:"   ",start_date:" ",studio:"",tutorials:" ",user:"",white_theme:" ",yes:"",csv:{choose:"",error_upload:"  CSV   .",export_file:"",import_file:"",import_title:"     CSV",legend:"",legend_ok:"   ",legend_ignored:"   ",legend_missing:"   ",legend_disabled:"      .",legend_overwrite:"    ",paste:"",paste_code:"   CSV    .:",preview:" ",preview_episode_name:" ",preview_title:"      ",preview_description:"Upload a .csv file to populate your board with posts.",preview_required:"NB: Headers must be included as first row.",preview_reupload:"   .CSV",required_fields:" CSV       .",select_file:"  CSV    :",tab_select_file:"  CSV",tab_paste_code:"   CSV",unknown:" ",upload_file:"",options:{title:" ",update:"   "}}},menu:{assign_tasks:"  ",change_priority:" ",change_status:" ",create_tasks:" ",delete_tasks:" ",generate_playlists:"  ",run_custom_action:"  ",set_estimations:" "},news:{all:"",commented_on:"   ",infos:"",no_news:"       .",only_comments:" ",only_previews:"   ",set_preview_on:"   ",task_status:" ",task_type:" ",title:" "},not_found:{text:"              .     .",title:"    ...         "},notifications:{and_change_status:"    ",assigned_you:"    ",commented_on:"   ",mention_you_on:"     ",no_notifications:"          .",unread_notifications:"|   ",title:"",with_preview:"  "},people:{active:"",active_persons:" |  ",add_member_to_team:"     : ",create_invite:"    ",delete_error:"       .        .              ",delete_text:"     {personName}         .        .",edit_title:" ",empty_team:"      ",invite:"  ",invite_error:"      .",invite_success:"     .",new_person:"   ",no_task_assigned:"          .",persons:" | ",running_tasks:"   ",select_person:" ...",team:"",title:"",unactive:"",csv:{import_file:"   .csv",export_file:"    .csv",import_title:"     csv",required_fields:" csv      :",select_file:"       :",error_upload:"      ."},fields:{first_name:"",last_name:" ",email:"",phone:"",role:"",old_password:" ",password:" ",password_2:"  ( )",active:""},list:{name:"",email:"",phone:"",role:"",active:""},role:{admin:" ",client:"",manager:"",user:"",undefined:"",vendor:""}},playlists:{add_assets:"  ",add_selection:"  ",add_shots:"   ",add_sequence:"   ",add_episode:"    ",add_movie:"   ",apply_task_type_change:"           .",available_build:"  ",build_daily:"  ",build_weekly:"   ",build_mp4:"Build .mp4 (beta)",building:"  ...",client_playlist:"  ",create_for_selection:"      ",create_title:"  ",created_at:"   :",delete_text:"     {name}   ",delete_error:"       .",download_zip:"Download .zip",failed:"",for_client:"",for_studio:"",edit_title:"  ",last_creation:"  ",last_modification:" ",loading_error:"  .      .",new_playlist:"   ",no_build:" ",no_playlist:"            .",no_preview:"  ",no_selection:"        .",no_sequence_for_episode:"      .",no_shot_for_production:"      .",select_shot:"         .",select_playlist:"         .",select_task_type:"     ",title:" ",updated_at:"   :",remove:"",fields:{name:"",created_at:" ",updated_at:" ",for_entity:"     .",for_client:"   "},actions:{edit:"  ",delete:"   ",fullscreen:" ",download:"...",entity_list:"/  ",comments:"/ ",annotation:" ",annotation_text:"     .",annotation_delete:"  ",annotation_redo:" ",annotation_undo:"  ",annotation_big:"",annotation_medium:"",annotation_small:"",change_task_type:"  ",split_screen:"   ",next_shot:" ",previous_shot:" ",next_frame:" ",previous_frame:" ",play:"",pause:""}},productions:{current:"  ",delete_text:"     {name}                .",delete_error:"      .             Kitsu     .          .",edit_title:" ",new_production:"  ",number:" |  ",open_productions:"  ",picture:" ",title:" ",home:{create_new:"  ",empty:"      .       ",no_task:"    .          .",no_prod_for_client:"      .         .",title:"    ",welcome:" Kitsu  ."},fields:{fps:"FPS",name:"",ratio:" ",resolution:" ",status:"",type:""},metadata:{add_explaination:"Add specific data required by this project.",add_failed:"An error occured while adding metadata to your project.",add_new_values:"There is currently no available values.",available_values:"Available values",choices:"List of values",delete_text:"Are you sure you want to delete this column and related data for all assets of this production?",delete_error:"An error occured while deleting this metadata column.",error:"An error occured while adding the metadata column. Make sure there is no column with similar name and that all fields are filled. If the problem is persists, please contact the support team.",free:"Free value",title:"Add metadata column"},status:{closed:" ",open:"",active:"",archived:" "},type:{short:" ",featurefilm:" ",tvshow:""}},profile:{change_avatar:"",info_title:"",language:"",notifications_enabled:"  ",notifications_slack_enabled:"  ",notifications_slack_user:"  ",password_title:"  ",timezone:" ",title:" ",avatar:{title:" ",error_upload:"      ."},change_password:{button:"  ",error:"     .       .",success:"     !",unvalid:"          (   7  )."},save:{button:" ",error:"     ."}},settings:{change_logo:" ",integrations:"",logo:" ",no_logo:"   .",set_logo:"  ",title:"",fields:{name:" ",hours_by_day:"  ",slack_token:"Slack Token (Optional)",use_original_name:"      ."},save:{button:" ",error:"     ."}},task_status:{delete_text:"     {name}   ",delete_error:"       .           ",edit_title:"  ",number:" |   ",new_task_status:"   ",title:" ",fields:{is_artist_allowed:"   ",is_client_allowed:"   ",color:"",is_done:" ",is_reviewable:" ",is_retake:"",name:"",short_name:" "}},task_types:{delete_text:"     {name}   ",delete_error:"       .           ",edit_title:"  ",new_task_type:"   ",number:" |  ",title:" ",fields:{dedicated_to:"",color:"",name:"",allow_timelog:" ",priority:""}},sequences:{all_sequences:"  ",delete_text:"     {name}              .         .",delete_error:"      .        ",edit_title:" ",empty_list:"      .    ",empty_list_client:"      .",new_sequence:" ",number:" |  ",title:"  ",fields:{name:"",description:""}},schedule:{title:" ",title_main:"  ",overall_man_days:"-",md:"md",zoom_level:" ",milestone:{add_milestone:"    ",edit_milestone:"   ",name:"",error:"          .    ."}},quota:{average:"",count_label:" ",detail_label:" ",details_name:"",details_seconds:"",details_frames:"",month_label:"",no_quota:"        .",name:"",quota_day:"  ",quota_week:"  ",quota_month:"  ",year_label:"",title:"/ ",type_label:""},shots:{casting:"  ",creation_explaination:"              .               .            .                 .      .           .           .",delete_text:"     {name}   ",delete_error:"      .         ",edit_success:" {name}    .",edit_fail:"    .   .                    .",edit_title:" ",empty_list:"      .     ",empty_list_client:"      .",episodes:" ",history:"Shot values history",new_shot:"  ",new_shots:"   ",new_sequences:"   ",new_episodes:"   ",no_casting:"    .",number:" |  ",manage:"  ",new_success:" {name}     .",padding:"  ",restore_text:"     {name}   ",restore_error:"      .",sequences:" ",tasks:" ",title:" ",fields:{description:"",nb_frames:"",episode:"",frame_in:"",frame_out:"",fps:"FPS",name:"",production:"",sequence:"",time_spent:""}},server_down:{text:"Please contact your vendor support, your system administrator or your IT department to understand what is going wrong.",title:"Kitsu encountered an error while reaching its data API."},statistics:{count:"",count_mode:" ",display_mode:" ",frames:"",pie:" pie",shots:" "},tasks:{add_preview:"   ",add_preview_error:"       .",assign:"    : |    {nbSelectedTasks}  :",back_to_list:"  ",bigger:"  ",change_status_to:"    :",change_preview:"  ",change_priority:"   :",clear_assignations:"   ",comment_image:"     .",create_for_selection:"        :",create_tasks:"  ",create_tasks_shot:"      ",create_tasks_shot_explaination:"         .   ",create_tasks_shot_failed:"       .",create_tasks_asset:"     ",create_tasks_asset_explaination:"           .   ",create_tasks_asset_failed:"       .",current:"  ",current_status:"  :",delete_all_text:"        {name}                   .",delete_all_error:"            .",delete_error:"      .",delete_comment:"       ",delete_comment_error:"      .",delete_for_selection:"    :",delete_preview:"         ",delete_preview_error:"       .",edit_comment:" ",done:" ",download_pdf_file:"Download .{extension} file",feedback:"",full_screen:"    ",hide_assignations:"    ",hide_infos:"   ",my_tasks:" ",next:" ",no_assignation_right:"       .",no_comment:"        .",no_preview:"         .",no_task_selected:"   ",number:" | ",preview:"  ",previous:" ",unsubscribe_notifications:"   ",set_estimations:"     :",set_preview:"       ",set_preview_error:"          .",set_preview_done:"         .",select_preview_file:"        .",show_assignations:"   ",show_infos:"  ",subscribe_notifications:"  ",select_image_file:"           .",tasks:"",validation:"",with_comment:"  ...",fields:{asset_type:" ",assignees:"",count:"",due_date:" ",duration:"",end_date:" ",entity:"",entity_name:"",estimated_quota:"Avg. Quota",estimation:"",frames:".",last_comment:" ",last_comment_date:" ",priority:"",production:"",real_end_date:" ",real_start_date:"   ",retake_count:" ",seconds:"",sequence:"",start_date:" ",task_status:"",task_status_short_name:"",task_type:""},colors:{title:" ",neutral:"",status:" ",late:"   "},priority:{emergency:"",normal:"",high:"",very_high:" "}},timesheets:{detail_level:" ",done_tasks:"  ",export_timesheet:"   ",hours:"",month:"",time_spents:"   (  )",title:" ",year:""},wrong_browser:{title:"Kitsu      .",text:"Kitsu          ."}},S={asset_types:{all_asset_types:"Tous les types d'assets",create_error:"Une erreur est survenue en crant l'asset. tes vous sr qu'il n'y a pas un asset avec un nom similaire ?",delete_error:"Une erreur est survenue en supprimant un type d'asset. tes vous sr qu'aucun asset est li  ce type d'asset?",delete_text:"tes vous sur de vouloir enlever {name} de la base de donnes ?",edit_title:"Modifier le type d'asset",new_asset_type:"Ajouter un type d'asset",number:"type d'asset | types d'assets",production_title:"Stats types d'assets",title:"Types d'assets",fields:{name:"Nom"}},assets:{cast_in:"Prsent dans",delete_text:"Etes vous sr de vouloir retirer {name} de la base de donnes ?",delete_error:"Une erreur est survenue en crant l'asset, tes vous sr de vouloir que l'asset n'ait plus aucun lien ?",edit_fail:"La cration ou l'dition a chou, une erreur est survenue.",edit_title:"Modifier asset",edit_success:"Asset {name} dit avec succs.",empty_list:"Il n'y a pas d'asset dans la production. Voulez vous en crer ?",empty_list_client:"Il n'y a pas d'asset dans la production.",new_asset:"Ajouter un asset",new_assets:"Ajouter des assets",new_success:"Asset {name} cr avec succs.",no_cast_in:"Cet asset n'apparait dans aucun shot.",number:"asset | assets",restore_text:"tes vous sr de vouloir restaurer {name} dans votre base de donnes ?",restore_error:"Une erreur est survenue en restaurant l'asset.",tasks:"Tches de fabrication",title:"Assets",fields:{description:"Description",episode:"p.",name:"Nom",production:"Prod",time_spent:"Jours",type:"Type",hidden_from_client:"Visible par le client"}},breakdown:{all_assets:"Tous les assets disponibles",empty:"Casting vide",title:"Casting",edit_label:"Changer le label de l'asset",label:"Label",picture_mode:"Passer en mode image",text_mode:"Passer en mode texte",options:{fixed:"fixe",animate:"anim"}},comments:{add_checklist:"Ajout checklist",add_comment:"Ajouter un commentaire...",add_attachment:"Ajouter une pice jointe",add_preview:"Attacher un fichier",change_preview:"Changer previz",comment_from_client:"Commentaire du client",edit_title:"Modifier le commentaire",edit_error:"Une erreur est survenue en ditant le commentaire",error:"Une erreur est survenue en postant le commentaire",empty_text:"Ce commentaire est vide",no_file_attached:"Aucun fichier attach",pin:"pingler",pinned:"pingl",post_status:"Publier",retake:"Reprise",revision:"rvision",set_status_to:"Positionner le statut ",task_placeholder:"Nouvel lment...",unpin:"Dspingler",text:"Texte",validated:"Valid !",validation_required:"Validation requise",fields:{text:"Texte"}},custom_actions:{delete_text:"tes-vous sr de supprimer l'action personnalise {name} de la base de donnes?",delete_error:"Une erreur est survenue en supprimant l'action personnalise.",create_error:"Une erreur est survenue durant la cration. tes vous sr qu'aucune action a un nom similaire ?",edit_title:"Modifier une action personnalise",new_custom_action:"Ajouter une action personnalise",number:"action pesonnalise | actions personnalises",run_for_selection:"Lancer une action personnalise pour les tche slectionnes :",title:"Actions",fields:{name:"Nom",url:"URL",entity_type:"Type d'entit",is_ajax:"Utiliser AJAX"},entity_types:{all:"Tous",shot:"Plan",asset:"Asset"}},entities:{build_filter:{asset_type:"Type d'asset",all_types:"Tous les types d'assets",assignation:"Assignation",assignation_exists_for:"Des assignations existent pour",assigned_to:"Assign ",descriptor:"Metadata",equal:"gal",in:"Dans",no_assignation_for:"Pas d'assignation pour",no_filter:"Pas de filtre",not_equal:"Pas gal",not_assigned_to:"Pas assign ",status:"Statut de tche",thumbnail:"A une vignette",title:"Filtr sur...",union_and:"Valide tous les filtres suivants",union_or:"Valide un des filtres suivants",with_thumbnail:"Avec vignette",without_thumbnail:"Sans vignette"},thumbnails:{error:"Une erreur s'est produite en tlversant les vignettes",explaination:"L'ajout d'une vignette ncessite de publier un nouvel aperu. Afin de dfinir plusieurs vignettes en mme temps, vous devez d'abord choisir un type de tche qui sera utilis pour publier les nouveaux aperus. Les vignettes seront dfinies  partir de ce nouvel aperu.",explaination_two:"Ensuite, vous devez slectionner les fichiers que vous voulez tlcharger. Pour trouver les bonnes entits, les noms de fichiers doivent correspondre au modle suivant :",shots_pattern:'"SequenceName ShotName" ex. SQ01_SH01.',assets_pattern:'"AssetType AssetName" ex. Environnement_Fort.',select_files:"Slectionner les fichiers",selected_files:"Fichiers slectionns",select_task_type:"Slectionner un type de tche",undefined:"Non dfini",undefined_pattern:"Non dfini",title:"Ajouter des vignettes",upload:"Tlverser des vignettes"}},episodes:{all_episodes:"Tous les pisodes",edit_title:"diter pisode",delete_text:"Etes vous sr de vouloir retirer {name} de la base de donnes ?Tous les plans et prviz lis seront supprims. Pour confirmer, tapez le nom de l'pisode en dessous",delete_error:"Une erreur est survenue en crant le plan, tes vous sr que la squence n'a plus aucun lien ?",edit_error:"Une erreur est survenue en sauvegardant l'pisode. tes vous sr qu'aucun pisode existe avec un nom similaire ?",empty_list:"Il n'y a pas d'pisodes dans la production. Voulez vous en crer ?",empty_list_client:"Il n'y a pas d'pisode pour cette production.",new_episode:"Nouvel pisode",number:"pisode | pisodes",title:"Stats pisodes",fields:{name:"Nom",description:"Description"}},estimation:{title:"Estimation"},keyboard:{altdown:"Dplace la slection d'une tche vers le bas",altj:"Selectionne le preview prcdent",altk:"Selectionne le preview suivant",altleft:"Dplace la slection d'une tche vers la gauche",altright:"Dplace la slection d'une tche vers la droite",altup:"Dplace la slection d'une tche vers le haut",annotations:"Annotations",draw:"Dmarre le mode dessin",playlist_navigation:"Navigation dans une playlist",navigation:"Navigation",redo:"Redo",undo:"Undo",remove_annotation:"Supprimme l'annotation slectionne",shortcuts:"Raccourcis claviers"},login:{back_to_login:"Revenir  la page de connexion",forgot_password:"Mot de passe oubli?",login:"Se connecter",login_failed:"La connexion a chou, vrifiez vos identifiants",login_page:"Annuler",redirecting:"Redirection dans {secondsLeft} secondes...",reset_change_password:"Changer le mot de passe",reset_change_password_form_failed:"Il y a un problme avec le mot de passe donn. S'il vous plait, verifiez qu'il y a au moins 7 caractrs et que les deux mots de passe correspondent.",reset_change_password_failed:"Le changement de mot de passe a chou. Recommencez toute la procdure.",reset_change_password_succeed:"Le mot de passe a chang. Revenez  la page de connexion pour vous identifier avec.",reset_change_password_title:"Entrez un nouveau mot de passe",reset_password:"Rinitialiser le mot de passe",reset_password_failed:"La rinitialisation du mot de passe a chou. S'il vous plait vrifiez votre email.",reset_password_succeed:"La rinitialisation du mot de passe a russi. Consultez votre boite mail pour la suite de la procdure.",reset_password_title:"Entrez votre mail pour rinitialiser le mot de passe",title:"Se connecter  Kitsu",fields:{email:"Adresse Mail",password:"Mot de passe",password2:"Mot de passe  nouveau"}},main:{about:" propos",add:"Ajouter",all:"Tous",all_assets:"Tous les assets",admin:"Admin",back_to_list:"retour  la liste",cancel:"Annuler",confirmation:"Confirmer",confirmation_and_stay:"Confirmer et rester",clear_selection:"Effacer la slection",close:"Fermer",date:"Date",days_spent:"jour pass | jours passs",days_spents:"jours passs",days_estimated:"jour estimat | jours estims",edit:"Modifier",dark_theme:"Thme sombre",delete:"Supprimer",delete_all:"Supprimer tout",documentation:"Documentation",delete_text:"Etes vous sr de vouloir supprimer {name} de la base de donnes ?",empty_comment:"Commentaire vide",end_date:"Date de fin",files_selected:"Fichiers slectionns",for:"Pour",go_productions:"Aller aux productions",history:"Historique",info:"Information",loading:"Chargement...",loading_data:"Chargement des donnes",loading_error:"Une erreur est survenue en chargeant les donnes.",logout:"Se dconnecter",person:"Personne",main_pack:"Main Pack",maximize:"Maximiser",minimize:"Minimiser",modify:"Modifier",nb_frames:"frames",no:"non",or:"ou",production:"Production",profile:"Profil",remove:"Enlever",studio:"Studio",user:"Utilisateur",save:"Enregistrer",sort_by:"Trier par",sorted_by:"Tri(e)s par",start_date:"Date de dbut",tutorials:"Tutorials",white_theme:"Thme blanc",yes:"oui",csv:{choose:"Choisir",unknown:"Colonne inconnue",error_upload:"Une erreur est survenue en tleversant votre fichier .csv.",export_file:"Exporter",import_file:"Importer",import_title:"Importer depuis un .csv",legend:"Lgende",legend_ok:"Donnes reconnue",legend_ignored:"Donnes ignore",legend_missing:"Donnes manquante",legend_disabled:"Donnes qui ne seront pas mises  jour",legend_overwrite:"Donnes qui seront mises  jour",paste:"Coller",paste_code:"Coller vos donnes CSV :",preview:"Aperu",preview_episode_name:"Nom de l'pisode",preview_title:"Aperu de vos donnes  importer",preview_description:"Importer un fichier .csv pour peupler votre board avec des posts. Vous pouvez aussi ajouter de nouvelles colonnes.",preview_required:"Note: La premire ligne doit spcifier les enttes.",preview_reupload:"Rimporter un fichier .CSV",required_fields:"Le fichier CSV  importer doit comporter les colonnes suivantes :",select_file:"Slectionner un fichier depuis votre dossier :",tab_select_file:"Importer un fichier CSV",tab_paste_code:"Coller des donnes CSV",upload_file:"Parcourir",options:{title:"Options",update:"Mettre  jour les donnes"}}},menu:{assign_tasks:"Assigner des tches",create_tasks:"Crer des tches",change_status:"Changer le statut",change_priority:"Change priority",delete_tasks:"Supprimer des tches",generate_playlists:"Gnrer des playlists",run_custom_action:"Lancer des actions",set_estimations:"Dfinir estimations"},not_found:{text:"Le lien que vous avez charg ne correspond  rien. Retournez sur la page d'accueil pour reprendre la navigation",title:"Page non trouv... Est-ce que vous cherchez quelque chose que vous avez supprim ?"},notifications:{and_change_status:"et chang le statut ",assigned_you:"vous a assign ",commented_on:"a comment",mention_you_on:"vous a mentionn sur",no_notifications:"Il n'y a pas encore de notifications pour vous pour les projets en cours",title:"Notifications",unread_notifications:"notification non lue | notifications non lues",with_preview:"avec une version"},news:{all:"Tous",commented_on:"a comment sur",infos:"Infos",no_news:"Il n'y a pas de nouveauts pour cette production ou ce filtre",only_comments:"Seulement les commentaires",only_previews:"Seulement les previews",set_preview_on:"a mis un preview sur",task_status:"Statut de tche",task_type:"Type de tche",title:"Flux de nouveauts "},playlists:{add_assets:"Ajouter des assets",add_selection:"Ajouter la slection",add_shots:"Ajouter des plans",add_episode:"Ajouter l'pisode",add_movie:"Ajouter tout le film",add_sequence:"Ajouter squence",apply_task_type_change:"Cela positionnera la dernire rvision du type de tche donn pour tous les plans.",available_build:"Builds disponibles",build_daily:"Valid. quotidienne",build_weekly:"Valid. hebodomadaire",build_mp4:"Construire .mp4 (beta)",building:"En cours...",client_playlist:"Playlist Client",created_at:"Cr le :",create_for_selection:"Crer une playlist pour la slection courante",create_title:"Crer playlist",delete_text:"tes vous sr de vouloir supprimer {name} de la base de donnes ?",delete_error:"Une erreur est survenue en supprimant la playlist.",edit_error:"Une erreur est survenue en sauvegardant la playlist. tes vous sr qu'aucune playlist n'existe avec un nom similaire ?",download_zip:"Tlcharger en .zip",failed:"Echec",for_client:"Pour le client",for_studio:"Pour le studio",edit_title:"Modifier la playlist",last_creation:"Dernires crations",last_modification:"Dernires modifications",no_preview:"Aucune prviz",remove:"enlever",loading_error:"Une erreur serveur est apparue, les playlists ne peuvent pas tre charges.",new_playlist:"Ajouter une playlist",no_build:"Pas de build",no_playlist:"Il n'y a pas de playlist pour ce projet.",no_selection:"Slctionnez une playlist sur la gauche.",no_sequence_for_episode:"Il n'y a pas de squence pour cette pisode",no_shot_for_production:"Il n'y pas de plan pour cette production",select_shot:"Slectionnez un plan dans la colonne de droite",select_playlist:"Slectionnez une playlist dans la colonne de gauche",select_task_type:"Changer le type de tche pour tous les plans",title:"Playlists",updated_at:"Mis  jour le:",fields:{name:"Nom",created_at:"Date de cration",updated_at:"Date de m..j",for_client:"A partager avec",for_entity:"Slectionne le type d'entit  afficher"},actions:{annotation:"Annotation",annotation_text:"Double clic sur la preview pour ajouter du texte",annotation_delete:"Supprimer l'annotation",annotation_redo:"Refaire annotation",annotation_undo:"Annuler annotation",annotation_big:"Gros",annotation_medium:"Moyen",annotation_small:"Petit",comments:"Montrer/Cacher les commentaires",change_task_type:"Changer le task type",delete:"Supprimer la playlist",download:"Tlcharger",edit:"Modifier la playlist",entity_list:"Montrer/Cacher la liste d'entits",fullscreen:"Plein cran",next_shot:"Prochain shot",next_frame:"Prochaine frame",previous_frame:"Frame prcdente",previous_shot:"Shot prcdent",pause:"Pause",play:"Lecture",save_playlist:"Sauvegarde la playlist",speed:"Changer la vitesse",split_screen:"Partager l'cran"}},people:{active:"Prsents",active_persons:"prsent | prsents",add_member_to_team:"Ajouter un membre  l'quipe: ",create_invite:"Crer et envoyer une invitation",create_error:"Une erreur est survenue en crant l'utilisateur. tes vous sr qu'il n'y a pas un utilisateur avec un nom ou un email similaire ?",delete_text:"tes vous srde vouloir retirer {personName} de la base de donnes?Tous les commentaires et prviz lis seront supprims. Pour confirmer, tapez le nom complet de la personne en dessous",delete_error:"Une erreur est survenue lors de la suppression. Il y a probablement des donnes lies  elle. Etes vous sur que cette personne n'a aucune tche assigne et n'a fait aucun commentaire ?",edit_title:"Modifier les informations de",empty_team:"Personne n'a t affect  cette production.",episodes:"pisodes",history:"Historique des valeurs de plans",invite:"Envoyer une invitation",invite_error:"Une erreur est survenue en envoyant l'invitation.",invite_success:"L'invitation a t envoy avec succs.",no_task_assigned:"Il n'y a aucune tche assigne.",new_person:"Ajouter un employ",padding:"Ecart",persons:"Personnes",picture:"Changer l'image",running_tasks:"Tches en cours",select_person:"Slectionner une personne...",team:"quipe",title:"Employs",unactive:"Absents",csv:{error_upload:"Une erreur est survenue en important votre fichier CSV.",export_file:"Tlcharger",import_file:"Importer",import_title:"Import employees from a CSV file",required_fields:"Le fichier CSV  importer doit comporter les colonnes suivantes :",select_file:"Slectionnez un fichier de votre disque dur :"},list:{active:"Actif",email:"Adresse Mail",name:"Nom",phone:"Tlphone",role:"Rle"},fields:{active:"Actif",email:"Adresse email",first_name:"Prnom",last_name:"Nom",old_password:"Mot de passe actuel",password:"Nouveau mot de passe",password_2:"Rptez le nouveau mot de passe",phone:"Tlphone",role:"Rle"},role:{admin:"Studio Manager",client:"Client",manager:"Superviseur",undefined:"",user:"Graphiste",vendor:"Fournisseur"}},productions:{current:"Production slectionne ",delete_text:"tes vous srde vouloir retirer {name} de la base de donnes ? Veuiller indiquer le nom du projet dans le champ.",delete_error:"Une erreur est survenue lors de la suppression. Il y a probablement des donnes lies  cette production. Etes vous sur que cette production n'a aucune tche, shot ou asset li ? Kitsu n'autorise pas la suppression de production. Si vous ne souhaitez plus la voir apparaitre, vous pouvez fermer la production.",edit_title:"Modifier la production",new_production:"Ajouter une production",number:"production | productions",open_productions:"Mes productions",picture:"Changer l'image",title:"Productions",home:{create_new:"Crer une nouvelle production",empty:"Vous n'avez pas de production ouverte, voulez vous en crer une nouvelle ?",no_task:"Vous n'avez pas de tches assignes. Demandez  votre superviseur ce que vous pouvez faire !",no_prod_for_client:"Vous n'avez accs  aucune production. Contactez votre prestataire pour obtenir un accs",title:"Productions en cours",welcome:"Bienvenue sur Kitsu"},fields:{fps:"FPS",name:"Name",ratio:"Ratio",resolution:"Resolution",status:"Status",type:"Type"},metadata:{add_explaination:"Ajouter des donnes spcifiques au projet.",add_failed:"Une erreur s'est produite en ajoutant des mtadonnes au projet.",add_new_values:"Il n'y a pour le moment aucune valeur enregistre.",available_values:"Valeurs disponibles",choices:"Liste de valeurs",delete_text:"tes vous sr de vouloir supprimmer cette colonne et toutes les donnes lies?",delete_error:"Une erreur est survenue en supprimant la colone de mtadonnes.",error:"Une erreur est survenue en ajoutant la colone de mtadonnes. Assurez vous qu'aucune colonne ne porte le mme nom et que les champs sont bien renseigns. Si le problme persiste, contactez le support.",free:"Valeur libre",title:"Ajouter une colonne de mtadonnes"},status:{active:"Ouvert",archived:"Ferm",open:"Ouvert",closed:"Ferm"},type:{short:"Format court",featurefilm:"Long Mtrage",tvshow:"Srie tl"}},profile:{change_avatar:"Changer Avatar",info_title:"Informations",language:"Langue",notifications_enabled:"Notifications mail actives",notifications_slack_enabled:"Notifications Slack actives",notifications_slack_user:"Nom d'utilisateur Slack",password_title:"Changement de mot de passe",timezone:"Fuseau horaire",title:"Votre Profil",avatar:{title:"Changer votre avatar",error_upload:"Une erreur est survenue en envoyant l'image."},change_password:{button:"Changez de mot de passe",success:"Votre mot de passe a t chang avec succs !",unvalid:"Les nouveaux mots de passe sont diffrents ou votre mot de passe est trop court (7 caractres minimum).",error:"Une erreur s'est produite lors du changement de mot de passe. Veuillez vrifier votre mot de pass actuel."},save:{button:"Sauvegardez vos changements",error:"Une erreur est survenue pendant la sauvegarde de vos changememts."}},schedule:{md:"jh",overall_man_days:"Jours Homme",title:"Planning",title_main:"Planning principal",zoom_level:"Niveau de zoom",milestone:{add_milestone:"Ajouter milestone",delete_milestone:"Supprimer milestone",edit_milestone:"Modifier milestone",error:"Error",name:"Name"}},quota:{average:"Moyenne",count_label:"Mode de comptage",detail_label:"Niveau de dtail",details_name:"Nom",details_seconds:"Secondes",details_frames:"Frames",month_label:"Mois",no_quota:"Il n'y a pas de quota pour ce type de tche.",name:"Nom",quota_day:"Quota par jour",quota_week:"Quota par semaine",quota_month:"Quota par mois",year_label:"Anne",title:"Quotas",type_label:"Type"},sequences:{all_sequences:"Toutes les squences",delete_text:"Etes vous sr de vouloir retirer {name} de la base de donnes ?Tous les plans et prviz lis seront supprims. Pour confirmer, tapez le nom de la squence en dessous",delete_error:"Une erreur est survenue en crant le plan, tes vous sr que la squence n'a plus aucun lien ?",edit_error:"Une erreur est survenue en sauvegardant la squence. tes vous sr qu'aucune squence n'existe avec un nom similaire ?",edit_title:"diter squence",empty_list:"Il n'y a pas de squence dans la production. Voulez vous en crer ?",empty_list_client:"Il n'y pas de squences dans cette production.",number:"squence | squences",new_sequence:"Nouvelle squence",title:"Stats squences",fields:{name:"Nom",description:"Description"}},settings:{change_logo:"Changer logo",integrations:"Intgrations",logo:"Logo du studio",no_logo:"Aucun logo n' a t positionn.",set_logo:"Changer le logo",title:"Paramtres",fields:{name:"Nom du studio",slack_token:"Token Slack (optionnel)",hours_by_day:"Heures par jour",use_original_name:"Utiliser les noms de fichiers originaux pour le tlchargement"},production:{empty_list:"La liste est vide. Cela signifie que tous les entres sont disponibles aux utilisateurs. Ajouter des lments  cette liste si vous voulez limiter les choix disponibles aux utilisateurs."},save:{button:"Sauvegarder les paramtres",error:"Une erreur serveur est survenue en sauvegardant les paramtres"}},server_down:{text:"Contactez votre fournisseur, votre administrateur systme ou votre dpartement informatique pour comprendre ce qui ne va pas.",title:"Kitsu a rencontr une erreur en communiquant avec son APIde donnes."},shots:{casting:"Casting",creation_explaination:"Pour ajouter des shot, you devez d'abord crer un pisode. Taper le nom de l'pisode dans la colonne de gauche en bas. Slctionnez cette pisode et rptez l'opration pour crer une squence. Enfin crez un shot en slectionnant la squence cre, en tapant son nom en bas de la colonne de droite. Cliquez sur le bouton add pour ajouter le shot. Vous pouvez maintenant crer de nombreux shots. Si cette production n'est pas une srie, vous pouvez directement crer une squence).",delete_text:"Etes vous sr de vouloir retirer {name} de la base de donnes ?",delete_error:"Une erreur est survenue en crant le plan, tes vous sr que le plan n'a plus aucun lien ?",description:"Description",edit_fail:"La cration ou l'dition a chou, une erreur est survenue. Assurez-vous qu'il n'y pas dj un shot portant le nom que vous donnez pour la sqence choisie.",episodes:"pisodes",edit_title:"Modifier plan",edit_success:"Plan {name} dit avec succs.",empty_list:"Il n'y a pas de plans dans la production. Voulez vous en crer ?",empty_list_client:"Il n'y pas de plans dans cette production.",history:"historique",no_casting:"Le casting du plan est vide.",number:"plan | plans",new_episodes:"Ajouter des pisodes",new_sequences:"Ajouter des squences",new_shot:"Ajouter un plan",new_shots:"Ajouter des plans",new_success:"Plan {name} cr avec succs.",manage:"Crer des plans",restore_error:"Une erreur est survenue en restorant le plan.",restore_text:"Etes vous sr de vouloir restorer {name} dans la base de donnes ?",sequence:"Squence",sequences:"Squences",tasks:"Tches de fabrication",padding:"Distance",title:"Plans",fields:{name:"Plan",episode:"pisode",sequence:"Squence",frame_in:"In",frame_out:"Out",fps:"FPS",nb_frames:"Frames",description:"Description",production:"Prod",time_spent:"Temps pass"}},statistics:{count:"Comptages",count_mode:"Mode de comptage",display_mode:" Mode d'affichage",frames:"Frames",pie:"Graphiques",shots:"Plans"},task_status:{create_error:"Une erreur est survenue en crant le statut. tes vous sr qu'il n'y a pas un statut avec un nom similaire ?",delete_text:"tes vous sur de vouloir retirer {name} de la base de donnes ?",delete_error:"Une erreur est survenue lors de la suppression du statut de tche. tes vous sr qu'aucune tche n'est li  ce statut de tche ?",edit_title:"Modifier statut",number:"statut | statuts de tche",new_task_status:"Ajouter un statut de tche",title:"Statuts de tche",fields:{color:"Couleur",is_artist_allowed:"Autoris aux artistes",is_client_allowed:"Autoris aux clents",is_done:"Est termin",is_retake:"A valeur de retake",is_reviewable:"Est vrifiable",name:"Nom",short_name:"Nom court"}},task_types:{create_error:"Une erreur est survenue en crant le type de tche. tes vous sr qu'il n'y a pas un type avec un nom similaire ?",delete_text:"tes vous sur de vouloir retirer {name} de la base de donnes ?",delete_error:"Une erreur est survenue lors de la suppression du type de tche. tes vous sr qu'aucune tche n'est li  ce type de tche ?",edit_title:"Modifier le type de tches",number:"type de tche | types de tches",new_task_type:"Ajouter un type de tche",title:"Types de tches",fields:{allow_timelog:"Temps pass",name:"Nom",color:"Couleur",priority:"Priorit",dedicated_to:"Pour"}},tasks:{add_preview:"Attacher une prviz",add_preview_error:"Une erreur est survenue en ajoutant la preview.",assign:"Assigner une tche  : | Assigner {nbSelectedTasks} tches  :",back_to_list:"Retour  la liste",bigger:"largir le panneau de tche",change_status_to:"Changer le statut de la tche  : ",change_priority:"Changer le priorit de la tche  : ",change_preview:"Modifier preview",clear_assignations:"effacer les assignations",comment_image:"Comment image",create_tasks:"Ajouter des tches",create_tasks_shot:"Ajouter des tches pour les plans affichs",create_tasks_shot_explaination:"Vous allez crer une nouvelle tche pour chaque plan du projet. Est-ce que vous voulez continuer ?",create_tasks_shot_failed:"Une erreur serveur est survenue pendant la cration des tches.",create_tasks_asset:"Ajouter des tches pour les assets affichs",create_tasks_asset_explaination:"Vous allez crer une nouvelle tche pour chaque asset du projet. Est-ce que vous voulez continuer ?",create_tasks_asset_failed:"Une erreur serveur est survenue pendant la cration des tches.",create_for_selection:"Crer une tche pour chaque cellule vide :",current:"Tches  faire",current_status:"Statut actuel :",delete_all_error:"Supprimer toutes les tches pour ce type de tche a chou",delete_all_text:"tes vous sr de vouloir supprimmer toutes les tches pour {name}? S'il vous plait, confirmez en tapant the nom du type de tches des tches que vous souhaitez supprimmer.",delete_comment:"tes vous sr de vouloir supprimer ce commentaire ?",delete_comment_error:"Une erreur est survenue en supprimant le commentaire.",delete_error:"Une erreur est survenue en supprimant la tche.",delete_for_selection:"Delete selected tasks:",delete_preview:"tes vous sr de vouloir supprimer cette prviz ?",delete_preview_error:"Une erreur est survenue en supprimant la preview.",edit_comment:"diter commentaire",done:"Termines",download_pdf_file:"Tlcharger le fichier .{extension}",feedback:"retours",full_screen:"Afficher en plein cran",hide_assignations:"Cacher assignations",hide_infos:"Cacher informations additionnelles",my_tasks:"Mes tches",no_preview:"Il n'y a pas de prviz pour cette tche.",no_task_selected:"Pas de tche slectionne",no_comment:"Il n'y a pas de commentaires pour cette tche.",no_assignation_right:"vous n'tes pas autoris  grer les assigations.",number:"tche | tches",next:"Suivante",preview:"Pr-visualisation",previous:"Prcdente",select_image_file:"Choisissez une image sur votre disque dur:",select_preview_file:"Choisissez une preview sur votre disque dur:",set_estimations:"Donner une estimation pour les tches slectionnes :",set_preview:"Utilisez cette previz comme vignette",set_preview_error:"Une erreur est survenue en utilisant cette vignette.",set_preview_done:"Cette previz sert de vignette  l'entit courante.",subscribe_notifications:"S'abonner aux notifications",show_assignations:"Voir assignations",show_infos:"Montrer informations additionnelles",unsubscribe_notifications:"Se dsabonner des notifications",tasks:"Tches",with_comment:"Avec un commentaire...",validation:"Validation",fields:{asset_type:"Type d'asset",assignees:"Assigns",count:"Nombre",duration:"Duration",due_date:"Pour le",end_date:"Date de fin",estimated_quota:"Quota Moy.",estimation:"Estimation",entity:"Entit",entity_name:"Nom",frames:"Frames",last_comment_date:"Dernier comm.",priority:"Priorit",production:"Prod",real_end_date:"Date de valid.",real_start_date:"Date de WIP",start_date:"Date de dbut",retake_count:"Retakes",seconds:"Secondes",sequence:"Squence",task_status:"Statut",last_comment:"Dernier commentaire",task_status_short_name:"Statut",task_type:"Type"},colors:{title:"Coloration",neutral:"Neutre",status:"Couleur des status",late:"En retard en rouge"},priority:{emergency:"Urgence",normal:"Normale",high:"Haute",very_high:"Trs haute"}},timesheets:{detail_level:"Niveau de dtail",done_tasks:"Tches termines",export_timesheet:"Exporter la feuille de temps",month:"Mois",hours:"heures",title:"Feuille de temps",time_spents:"Temps pass (heures)",year:"Anne"},wrong_browser:{title:"Votre navigateur n'est pas pris en charges par Kitsu",text:"Kitsu ne peut tre utilis qu'avec les navigateurs Firefox et Chrome."}},T={assets:{cast_in:"",delete_error:". . ?",delete_text:"{name}?",edit_fail:", .",edit_success:"{name}.",edit_title:"",empty_list:". ?",empty_list_client:".",new_asset:"",new_assets:"",new_success:"{name}.",no_cast_in:".",number:" | ()",restore_text:"{name}?",restore_error:".",tasks:"()",title:"()",fields:{description:"",episode:"",name:"",production:"",type:""}},asset_types:{delete_text:"{name}?",delete_error:". . ?",edit_title:"",new_asset_type:"",number:" | ()",title:"()",fields:{name:""}},breakdown:{all_assets:"",select_shot:".",selected_shot:"{sequence_name} / {name}",save_error:".",title:""},comments:{add_comment:"...",add_preview:"",change_preview:"",empty_text:"",edit_title:"",error:"",no_file_attached:"",post_status:"",retake:"",validated:"!",validation_required:"",set_status_to:"",fields:{text:""}},custom_actions:{delete_text:"{name}?",delete_error:".",edit_title:"",new_custom_action:"",number:" | ()",run_for_selection:":",title:"()",fields:{name:"",url:"URL",entity_type:""},entity_types:{all:"",shot:"",asset:""}},episodes:{delete_error:". . ?",delete_text:"{name}?",edit_title:"",empty_list:". ?",empty_list_client:".",new_episode:"",number:" | ()",title:"()",fields:{name:"",description:""}},login:{forgot_password:"?",login:"",login_failed:", ",login_page:"",reset_change_password:"",reset_change_password_form_failed:". 6.",reset_change_password_failed:". .",reset_change_password_succeed:". .",reset_change_password_title:"",reset_password:"",reset_password_failed:". .",reset_password_succeed:". .",reset_password_title:"",title:"Kitsu",fields:{email:"",password:"",password2:""}},main:{add:"",all:"",admin:"",cancel:"",clear_selection:"",documentation:"",close:"",confirmation:"",confirmation_and_stay:", ",dark_theme:"",delete:"",delete_all:"",delete_text:"{name}?",edit:"",empty_comment:"",history:"",info:"",or:"",no:"",loading_data:"",loading_error:".",logout:"",modify:"",minimize:"",maximize:"",profile:"",production:"",remove:"",save:"",studio:"",user:"",white_theme:"",yes:"",csv:{export_file:"",error_upload:"CSV.",import_file:"",import_title:"CSV",required_fields:"CSV",select_file:":"}},menu:{assign_tasks:"",change_priority:"",change_status:"",create_tasks:"",delete_tasks:"",run_custom_action:""},not_found:{text:", .",title:"..., ?"},notifications:{and_change_status:", ",commented_on:", ",no_notifications:".",title:"()",with_preview:""},people:{active:"",add_member_to_team:": ",delete_error:". . ?",delete_text:"{personName}?",edit_title:"",empty_team:".",new_person:"",no_task_assigned:".",persons:" | ()",running_tasks:"",select_person:"...",team:"",title:"()",unactive:"",csv:{import_file:".csv",export_file:".csv",import_title:"CSV",required_fields:"CSV",select_file:":",error_upload:"CSV."},fields:{first_name:"",last_name:"",email:"",phone:"",role:"",old_password:"",password:"",password_2:"()",active:""},list:{name:"",email:"",phone:"",role:"",active:""},role:{admin:"",client:"",manager:"",user:"CG"}},playlists:{add_shots:"",delete_text:"{name}?",delete_error:".",edit_title:"",loading_error:". .",new_playlist:"",no_playlist:".",no_selection:".",no_sequence_for_episode:"",no_shot_for_production:"",no_shot_for_sequence:"",select_shot:"",select_playlist:"",title:"()",remove:"",fields:{name:""}},productions:{current:"",delete_text:"{name}?",delete_error:". . , ?",edit_title:"",new_production:"",number:" | ()",open_productions:"",picture:"",title:"()",home:{create_new:"",empty:". ?",no_task:". !",no_prod_for_client:". .",title:"",welcome:"Kitsu"},fields:{fps:"FPS",name:"",ratio:"",resolution:"",status:"",type:""},metadata:{add_explaination:".",add_failed:".",add_new_values:".",available_values:"",choices:"",delete_text:"?",delete_error:".",error:". , . , .",free:"",title:""},status:{closed:"",open:"",active:"",archived:""},type:{short:"",featurefilm:"",tvshow:""}},profile:{info_title:"",language:"",password_title:"",timezone:"",title:"",change_avatar:"",avatar:{title:""},change_password:{button:"",error:". .",success:"!",unvalid:"(7)."},save:{button:"",error:""}},task_status:{delete_text:"{name}?",delete_error:". . ?",edit_title:"",number:" | ()",new_task_status:"",title:"()",fields:{color:"",is_done:"",is_reviewable:"",is_artist_allowed:"",name:"",short_name:""}},task_types:{delete_text:"{name}?",delete_error:". . ?",edit_title:"",new_task_type:"",number:" | ()",title:"()",fields:{dedicated_to:"",color:"",name:"",allow_timelog:"",priority:""}},sequences:{delete_text:"{name}?",delete_error:". . ?",edit_title:"",empty_list:". ?",empty_list_client:".",new_sequence:"",number:" | ()",title:"()",fields:{name:"",description:""}},shots:{casting:"",delete_text:"{name}?",delete_error:". . ?",edit_success:"{name}.",edit_fail:", . .",edit_title:"",empty_list:". ?",empty_list_client:".",new_shot:"",new_shots:"",new_sequences:"",new_episodes:"",no_casting:".",number:" | ()",manage:"",new_success:"{name}.",restore_text:"{name}?",restore_error:".",tasks:"()",title:"()",fields:{description:"",episode:"",frame_in:"",frame_out:"",fps:"FPS",name:"",production:"",sequence:""}},server_down:{text:", IT.",title:"KitsuAPI."},tasks:{add_preview:"",add_preview_error:".",assign:": | {nbSelectedTasks}:",back_to_list:"",change_status_to:":",change_preview:"",change_priority:":",clear_assignations:"",create_for_selection:":",create_tasks:"",create_tasks_shot:"",create_tasks_shot_explaination:". ?",create_tasks_shot_failed:".",create_tasks_asset:"",create_tasks_asset_explaination:". ?",create_tasks_asset_failed:".",current:"",current_status:":",delete_all_text:"{name}? .",delete_all_error:".",delete_error:".",delete_comment:"?",delete_comment_error:"",delete_for_selection:":",delete_preview:"?",delete_preview_error:".",edit_comment:"",done:"",download_pdf_file:".{extension}",feedback:"",full_screen:"",hide_assignations:"",my_tasks:"()",next:"",no_assignation_right:"",no_comment:".",no_preview:".",preview:"()",previous:"",unsubscribe_notifications:"",set_preview:"",set_preview_error:"",set_preview_done:".",select_preview_file:":",show_assignations:"",subscribe_notifications:"",validation:"",tasks:"()",fields:{assignees:"()",end_date:"",entity:"",last_comment:"",production:"",task_status:"",task_type:""},priority:{emergency:"",normal:"",high:"",very_high:""}},timesheets:{detail_level:"",done_tasks:"",hours:"",month:"",time_spents:"()",title:"()",year:""}},x={assets:{cast_in:" ",delete_error:"   .      - .          ?",delete_text:",    {name}   ?",edit_fail:"  . ,        .",edit_success:" {name}  .",edit_title:" ",empty_list:"     . ?",empty_list_client:"      .",new_asset:" ",new_assets:" ",new_success:" {name}  .",no_cast_in:"       .",number:" | ",restore_text:" ,    {name}   ?",restore_error:"   .",tasks:"  ",title:"",fields:{description:"",episode:"",name:"",production:"",time_spent:"",type:"",hidden_from_client:" "}},asset_types:{all_asset_types:"  ",create_error:"     .  ,        ?",delete_text:" ,    {name}   ?",delete_error:"     .      - .  ,       - ?",edit_title:"  ",new_asset_type:"  ",number:"  |  ",title:" ",production_title:"   ",fields:{name:""}},breakdown:{all_assets:" ",edit_label:"  ",empty:" ",label:"",picture_mode:"   ",text_mode:"   ",title:"",options:{fixed:"",animate:""}},comments:{add_attachment:" ",add_checklist:" ",add_comment:" ...",add_preview:" ",change_preview:" ",comment_from_client:" ",edit_title:" ",empty_text:" ",edit_error:"   . ,   .",error:"   ",no_file_attached:"  ",pin:"",pinned:"",post_status:" ",retake:"",revision:"",set_status_to:" ",task_placeholder:" ...",text:"",unpin:"",validated:"!",validation_required:" ",fields:{text:""}},custom_actions:{create_error:"    .  ,       ?",delete_text:",      {name}   ?",delete_error:"     ",edit_title:"  ",new_custom_action:"  ",number:"  |  ",run_for_selection:"     :",title:" ",fields:{name:"",url:"URL",entity_type:" ",is_ajax:" AJAX"},entity_types:{all:"",shot:"",asset:""}},entities:{build_filter:{asset_type:" ",all_types:"  ",assignation:"",assignation_exists_for:" ",assigned_to:"",descriptor:"",equal:"",in:"",no_assignation_for:"  ",no_filter:" ",not_equal:" ",not_assigned_to:" ",status:" ",thumbnail:" ",title:"...",union_and:"   ",union_or:"    ",with_thumbnail:" ",without_thumbnail:" "},thumbnails:{error:"   ",explaination:"     .     ,         .        .",explaination_two:"    .    ,     :",shots_pattern:'"SequenceName_ShotName" . SQ01_SH01.',assets_pattern:'"AssetType_AssetName" . _.',select_files:" ",selected_files:" ",select_task_type:"  ",title:" ",undefined:"",undefined_pattern:"",upload:" "}},estimation:{title:""},episodes:{all_episodes:" ",edit_error:"    .  ,       ?",delete_error:"    .      - .  ,        - ?",delete_text:",    {name}   ?       . ,     .",edit_title:" ",empty_list:"     . ?",empty_list_client:"      .",new_episode:" ",number:" | ",title:" ",fields:{name:"",description:""}},keyboard:{altdown:"   ",altj:"   ",altk:"  ",altleft:"   ",altright:"   ",altup:"   ",annotations:"",draw:"  ",navigation:"",redo:"",undo:"",playlist_navigation:"  ",remove_annotation:" ",shortcuts:""},login:{back_to_login:"   ",forgot_password:" ?",login:"",login_failed:" . ,      ",login_page:"",redirecting:"  {secondsLeft} ...",reset_change_password:" ",reset_change_password_form_failed:" ,   ,  .   ,       7      ",reset_change_password_failed:"   . ,    .",reset_change_password_succeed:"   .     ,   .",reset_change_password_title:"  ",reset_password:" ",reset_password_failed:"   .    .",reset_password_succeed:"  . ,   .",reset_password_title:"  ,   ",title:"  Kitsu",fields:{email:"",password:"",password2:" "}},main:{about:" ",add:"",all:"",all_assets:" ",admin:"",cancel:"",clear_selection:" ",close:"",confirmation:"",confirmation_and_stay:"  ",date:"",dark_theme:" ",days_spent:"  |  ",days_estimated:"  |  ",delete:"",delete_all:" ",delete_text:",    {name}   ?",documentation:"",edit:"",empty_comment:" ",end_date:" ",files_selected:" ",for:"",go_productions:"  ",history:"",info:"",or:"",no:"",loading:"...",loading_data:" ",loading_error:"   ",logout:"",modify:"",minimize:"",main_pack:"Main Pack",maximize:"",nb_frames:" | ",person:"",profile:"",production:"",remove:"",save:"",sort_by:" ",sorted_by:" ",start_date:" ",studio:"",tutorials:"",user:"",white_theme:" ",yes:"",csv:{choose:"",error_upload:"   CSV.",export_file:"",import_file:"",import_title:"   CSV",legend:"",legend_ok:" ",legend_ignored:" ",legend_missing:" ",legend_disabled:"     ",legend_overwrite:"  ",paste:"",paste_code:"    CSV:",preview:"",preview_episode_name:" ",preview_title:"  ",preview_description:" .csv     .",preview_required:"NB:      .",preview_reupload:" .CSV  ",required_fields:" CSV   ",select_file:" :",tab_select_file:"  CSV",tab_paste_code:"  CSV",unknown:" ",upload_file:"",options:{title:"",update:"  "}}},menu:{assign_tasks:" ",change_priority:" ",change_status:" ",create_tasks:" ",delete_tasks:" ",generate_playlists:" ",run_custom_action:"  ",set_estimations:" "},news:{all:"",commented_on:"()",infos:"",no_news:"        .",only_comments:" ",only_previews:" ",set_preview_on:" ",task_status:" ",task_type:" ",title:" "},not_found:{text:"-     .     .",title:"  ...    -,   ?"},notifications:{and_change_status:" ()  ",assigned_you:"()  ",commented_on:"()",mention_you_on:"()  ",no_notifications:"      ",unread_notifications:"  |  ",title:"",with_preview:" "},people:{active:"",active_persons:"  |  ",add_member_to_team:"   ",create_invite:"   ",create_error:"     .   .",delete_error:"     .      - .             ?",delete_text:"     {personName}   ?       . ,      .",edit_title:" ",empty_team:"     .",invite:" ",invite_error:"    ",invite_success:"  ",new_person:"  ",no_task_assigned:"     ",persons:" | ",running_tasks:" ",select_person:" ...",team:"",title:"",unactive:"",csv:{import_file:" .csv ",export_file:"  .csv ",import_title:"   CSV",required_fields:"  CSV   ",select_file:" :",error_upload:"  CSV  ."},fields:{first_name:"",last_name:"",email:"",phone:"",role:"",old_password:" ",password:" ",password_2:"  ()",active:""},list:{name:"",email:"",phone:"",role:"",active:""},role:{admin:"",client:"",manager:"",user:"",undefined:" ",vendor:""}},playlists:{add_assets:" ",add_selection:" selection",add_shots:" ",add_sequence:" ",add_episode:" ",add_movie:" ",apply_task_type_change:"        .",available_build:" ",build_daily:" ",build_weekly:" ",build_mp4:" .mp4 (beta)",building:"...",client_playlist:" ",create_for_selection:"    ",create_title:" ",created_at:" :",delete_text:",    {name}   ?",delete_error:"   .",edit_error:"   .",download_zip:" .zip",failed:"",for_client:"",for_studio:"",edit_title:" ",last_creation:" ",last_modification:" ",loading_error:"   .    .",new_playlist:" ",no_build:" ",no_playlist:"       ",no_preview:" ",no_selection:"  .",no_sequence_for_episode:"    ",no_shot_for_production:"    ",select_shot:"    ",select_playlist:"    ",select_task_type:"     ",title:"",updated_at:":",remove:"",fields:{name:"",created_at:" ",updated_at:" ",for_entity:"   ",for_client:" "},actions:{annotation:"",annotation_text:"       ",annotation_delete:" ",annotation_redo:" ",annotation_undo:" ",annotation_big:"",annotation_medium:"",annotation_small:"",change_task_type:"  ",comments:"/ ",delete:" ",download:"...",edit:" ",entity_list:"/  ",fullscreen:" ",next_frame:" ",next_shot:" ",pause:"",play:"",previous_frame:" ",previous_shot:" ",save_playlist:" ",speed:" ",split_screen:" "}},productions:{current:" ",delete_text:"     {name}   ? ,        .",delete_error:"    .      - .         ,   ? Kitsu      .        ,     .",edit_error:"    .   .",edit_title:" ",new_production:" ",number:" | ",open_productions:" ",picture:" ",title:"",home:{create_new:"  ",empty:"     . ?",no_task:"   .    ",no_prod_for_client:"     .      .",title:"  ",welcome:"   Kitsu"},fields:{fps:"FPS",name:"",ratio:" ",resolution:"",status:"",type:""},metadata:{add_explaination:"     .",add_failed:"      .",add_new_values:"     .",available_values:" ",choices:" ",delete_text:",             ?",delete_error:"     .",error:"    . ,            .   ,   .",free:" ",title:"  "},status:{closed:"",open:"",active:"",archived:""},type:{short:"",featurefilm:"",tvshow:" "}},profile:{change_avatar:" ",info_title:"",language:"",notifications_enabled:"   ?",notifications_slack_enabled:"   Slack?",notifications_slack_user:"   Slack",password_title:" ",timezone:" ",title:"",avatar:{title:" ",error_upload:"   "},change_password:{button:" ",error:"   .    .",success:"   !",unvalid:"        (   7- )."},save:{button:" ",error:"   "}},settings:{change_logo:" ",integrations:"",logo:" ",no_logo:" ",set_logo:"  ",title:"",fields:{name:" ",hours_by_day:"  ",slack_token:" Slack ()",use_original_name:"     "},production:{empty_list:" .  ,       .  ,      ."},save:{button:" ",error:"      "}},task_status:{create_error:"     .  ,       ?",delete_text:",    {name}   ?",delete_error:"    .      - .  ,       - ?",edit_title:"  ",number:"  |  ",new_task_status:"  ",title:" ",fields:{color:"",is_artist_allowed:" ",is_client_allowed:" ",is_done:"",is_reviewable:" ",is_retake:"  ",name:"",short_name:" "}},task_types:{delete_text:",    {name}   ?",delete_error:"     .      - .  ,       - ?",edit_title:"  ",create_error:"    . ,         .",new_task_type:"  ",number:"  |  ",title:" ",fields:{dedicated_to:"",color:"",name:"",allow_timelog:" ",priority:""}},sequences:{all_sequences:" ",edit_error:"    .  ,       ?",delete_text:",    {name}   ?       .     .",delete_error:"   .      - .  ,       - ?",edit_title:" ",empty_list:"     . ?",empty_list_client:"      .",new_sequence:" ",number:" | ",title:" ",fields:{name:".",description:""}},schedule:{title:"",title_main:" ",overall_man_days:"-",md:"/",zoom_level:"",milestone:{add_milestone:"  ",edit_milestone:"  ",name:"",error:"     .  ."}},quota:{average:"",count_label:"",detail_label:" ",details_name:"",details_seconds:"",details_frames:"",month_label:"",no_quota:"      ",name:"",quota_day:"  ",quota_week:"  ",quota_month:"  ",year_label:"",title:"",type_label:""},shots:{casting:" ",creation_explaination:'         .         "",    .          .             .  "" .     .    !     ,     .',delete_text:",    {name}   ?",delete_error:"   .      - .  ,       - ?",edit_success:" {name} .",edit_fail:":     . ,      ,      .",edit_title:" ",empty_list:"     . ?",empty_list_client:"      .",episodes:"",history:" ",new_shot:" ",new_shots:" ",new_sequences:" ",new_episodes:" ",no_casting:"   ",number:" | ",manage:" ",new_success:" {name}  .",padding:"Shot Padding",restore_text:" ,    {name}   ?",restore_error:"   ",sequences:"",tasks:"  ",title:"",fields:{description:"",nb_frames:"",episode:"",frame_in:"In",frame_out:"Out",fps:"FPS",name:"",production:"",sequence:"",time_spent:""}},server_down:{text:"   ,     ,    .",title:"     Kitsu."},statistics:{count:"",count_mode:" ",display_mode:" ",frames:"",pie:" ",shots:""},tasks:{add_preview:" ",add_preview_error:"   .",assign:" : |  {nbSelectedTasks} :",back_to_list:"  ",bigger:"  ",change_status_to:"   :",change_preview:" ",change_priority:"  :",clear_assignations:" ",comment_image:"   ",create_for_selection:"    :",create_tasks:" ",create_tasks_shot:"    ",create_tasks_shot_explaination:"           . ?",create_tasks_shot_failed:"      .",create_tasks_asset:"    ",create_tasks_asset_explaination:"          . ?",create_tasks_asset_failed:"      .",current:" ",current_status:" :",delete_all_text:",       {name}?      ,   .",delete_all_error:"      .",delete_error:"   ",delete_comment:",     ?",delete_comment_error:"   .",delete_for_selection:"  :",delete_preview:",     ? ",delete_preview_error:"   .",edit_comment:" ",done:"",download_pdf_file:" .{extension} ",feedback:" ",full_screen:"   ",hide_assignations:" ",hide_infos:"  ",my_tasks:" ",next:" ",no_assignation_right:"    ",no_comment:"       .",no_preview:"       .",no_task_selected:"  ",number:" | ",preview:"",previous:" ",unsubscribe_notifications:"  ",set_estimations:"  :",set_preview:"    ",set_preview_error:"     ",set_preview_done:"       ",select_preview_file:"          ",show_assignations:" ",show_infos:"  ",subscribe_notifications:"  ",select_image_file:"   ,      .",tasks:"",validation:"",with_comment:" ...",fields:{asset_type:" ",assignees:"",count:"-",due_date:" ",duration:"",end_date:" ",entity:"",entity_name:"",estimated_quota:" ",estimation:"",frames:"",last_comment:" ",last_comment_date:" ",priority:"",production:"",real_end_date:" ",real_start_date:"WIP ",retake_count:"",seconds:"",sequence:"",start_date:" ",task_status:"",task_status_short_name:"",task_type:""},colors:{title:"",neutral:"",status:" ",late:"!"},priority:{emergency:"!",normal:"",high:"",very_high:" "}},timesheets:{detail_level:" ",done_tasks:" ",export_timesheet:" ",hours:"",month:"",time_spents:"  ()",title:"",year:""},wrong_browser:{title:"Kitsu    ",text:"Kitsu   Firefox  Chrome"}},E={de:w,en:b,es:k,fa:C,fr:S,zh:T,ru:x};n.a.use(y["a"]);var P=new y["a"]({locale:"en",fallbackLocale:"en",messages:E}),O=P,A=(s("99af"),s("4160"),s("a630"),s("3ca3"),s("159b"),{install:function(e){e.directive("columns-resizable",{componentUpdated:function(e){if(e.id){e.classList.contains("resizable")||(e.className+=" resizable");var t=Array.from(e.getElementsByClassName("name")),s=Array.from(e.getElementsByClassName("metadata-descriptor")),i=t.concat(s),n=function(t,s){var i,n,a;s.addEventListener("mousedown",(function(s){n=s.target.parentElement,i=s.pageX,a=n.offsetWidth,document.addEventListener("mousemove",(function(s){if(n){var o=s.pageX-i,r=a+o+"px";n.style.minWidth=r,n.style.width=r,localStorage.setItem("".concat(e.id,"-").concat(t.textContent),r)}}))})),document.addEventListener("mouseup",(function(e){n=void 0,i=void 0,a=void 0,document.onmousemove=null}))};i.forEach((function(t){if(!t.getElementsByClassName("resizable-knob").length>0){var s=document.createElement("div");s.className="resizable-knob",t.appendChild(s),n(t,s)}var i=localStorage.getItem("".concat(e.id,"-").concat(t.textContent));i&&(t.style.minWidth=i,t.style.width=i)}))}else console.error("Resizable headers must be in a thead with an id")}})}}),j=s("8c4f"),D=(s("d3b7"),s("337f")),M=s.n(D),I=s("48c6"),$=s("7f45"),L=s.n($),F=s("4360"),N={setLocale:function(){var e=F["a"].state.user.user.locale;O.locale=e.substring(0,2),"zh_Hans_CN"===e?L.a.locale("zh_CN"):L.a.locale(e.substring(0,2))}},q=N,R={setTimezone:function(){var e=F["a"].state.user.user.timezone||L.a.tz.guess();L.a.tz.setDefault(e)}},B=s("9fb0"),V=function(e){F["a"].commit(B["ab"]),F["a"].dispatch("loadContext").then((function(){F["a"].commit(B["Z"]),e()})).catch((function(e){console.error("An init operation failed: ",e)}))},z=V,U=s("0f9a"),H=s("ef8b"),G=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"columns fixed-page"},[s("div",{staticClass:"column main-column"},[s("div",{staticClass:"assets page"},[s("div",{staticClass:"asset-list-header page-header"},[s("div",{staticClass:"level header-title"},[s("div",{staticClass:"level-left flexcolumn"},[s("div",{staticClass:"filters-area flexcolumn-item"},[s("div",{staticClass:"flexrow"},[s("search-field",{ref:"asset-search-field",staticClass:"flexrow-item",attrs:{"can-save":!0,placeholder:"ex: props modeling=wip"},on:{change:e.onSearchChange,save:e.saveSearchQuery}}),s("button-simple",{staticClass:"flexrow-item",attrs:{title:e.$t("entities.build_filter.title"),icon:"funnel"},on:{click:function(t){e.modals.isBuildFilterDisplayed=!0}}})],1)])]),s("div",{staticClass:"level-right flexrow"},[e.isCurrentUserClient?e._e():s("div",{staticClass:"flexrow"},[s("show-assignations-button",{staticClass:"flexrow-item"}),s("show-infos-button",{staticClass:"flexrow-item"}),s("div",{staticClass:"flexrow-item"})],1),e.isCurrentUserManager?s("div",{staticClass:"flexrow"},[s("button-simple",{staticClass:"flexrow-item",attrs:{title:e.$t("entities.thumbnails.title"),icon:"image"},on:{click:e.showAddThumbnailsModal}}),s("button-simple",{staticClass:"flexrow-item",attrs:{title:e.$t("main.csv.import_file"),icon:"upload"},on:{click:e.showImportModal}}),s("button-simple",{staticClass:"flexrow-item",attrs:{icon:"download",title:e.$t("main.csv.export_file")},on:{click:e.onExportClick}}),s("button-simple",{staticClass:"flexrow-item",attrs:{text:e.$t("assets.new_asset"),icon:"plus"},on:{click:e.showNewModal}})],1):e._e()])]),s("div",{staticClass:"query-list"},[e.isAssetsLoading||e.initialLoading?e._e():s("search-query-list",{attrs:{queries:e.assetSearchQueries},on:{"change-search":e.changeSearch,"remove-search":e.removeSearchQuery}})],1)]),s("sorting-info",{attrs:{label:e.$t("main.sorted_by"),sorting:e.assetSorting},on:{"clear-sorting":function(t){return e.onChangeSortClicked(null)}}}),s("asset-list",{ref:"asset-list",attrs:{"displayed-assets":e.displayedAssetsByType,"is-loading":e.isAssetsLoading||e.initialLoading,"is-error":e.isAssetsLoadingError,"validation-columns":e.assetValidationColumns},on:{"change-sort":e.onChangeSortClicked,"create-tasks":e.showCreateTasksModal,"delete-all-tasks":e.onDeleteAllTasksClicked,"new-clicked":e.showNewModal,"edit-clicked":e.onEditClicked,"delete-clicked":e.onDeleteClicked,"restore-clicked":e.onRestoreClicked,"add-metadata":e.onAddMetadataClicked,"edit-metadata":e.onEditMetadataClicked,"delete-metadata":e.onDeleteMetadataClicked,scroll:e.saveScrollPosition}})],1)]),1===e.nbSelectedTasks?s("div",{staticClass:"column side-column"},[s("task-info",{attrs:{task:Object.values(e.selectedTasks)[0]}})],1):e._e(),s("edit-asset-modal",{ref:"edit-asset-modal",attrs:{active:e.modals.isNewDisplayed,"is-loading":e.loading.edit,"is-loading-stay":e.loading.stay,"is-error":e.errors.edit,"is-success":e.success.edit,"asset-to-edit":e.assetToEdit},on:{confirm:e.confirmEditAsset,confirmAndStay:e.confirmNewAssetStay,cancel:function(t){e.modals.isNewDisplayed=!1}}}),s("delete-modal",{ref:"delete-asset-modal",attrs:{active:e.modals.isDeleteDisplayed,"is-loading":e.loading.delete,"is-error":e.errors.delete,text:e.deleteText(),"error-text":e.$t("assets.delete_error")},on:{confirm:e.confirmDeleteAsset,cancel:function(t){e.modals.isDeleteDisplayed=!1}}}),s("delete-modal",{ref:"restore-asset-modal",attrs:{active:e.modals.isRestoreDisplayed,"is-loading":e.loading.restore,"is-error":e.loading.delete,text:e.restoreText(),"error-text":e.$t("assets.restore_error")},on:{confirm:e.confirmRestoreAsset,cancel:function(t){e.modals.isRestoreDisplayed=!1}}}),s("hard-delete-modal",{ref:"delete-all-tasks-modal",attrs:{active:e.modals.isDeleteAllTasksDisplayed,"is-loading":e.loading.deleteAllTasks,"is-error":e.errors.deleteAllTasks,text:e.deleteAllTasksText(),"error-text":e.$t("tasks.delete_all_error"),"lock-text":e.deleteAllTasksLockText,"selection-option":!0},on:{confirm:e.confirmDeleteAllTasks,cancel:function(t){e.modals.isDeleteAllTasksDisplayed=!1}}}),s("delete-modal",{ref:"delete-metadata-modal",attrs:{active:e.modals.isDeleteMetadataDisplayed,"is-loading":e.loading.deleteMetadata,"is-error":e.errors.deleteMetadata,text:e.$t("productions.metadata.delete_text"),"error-text":e.$t("productions.metadata.delete_error")},on:{confirm:e.confirmDeleteMetadata,cancel:function(t){e.modals.isDeleteMetadataDisplayed=!1}}}),s("import-render-modal",{attrs:{active:e.modals.isImportRenderDisplayed,"is-loading":e.loading.importing,"is-error":e.errors.importing,"parsed-csv":e.parsedCSV,"form-data":e.assetsCsvFormData,columns:e.columns,"data-matchers":e.dataMatchers,database:e.filteredAssets},on:{reupload:e.resetImport,confirm:e.uploadImportFile,cancel:e.hideImportRenderModal}}),s("import-modal",{ref:"import-modal",attrs:{active:e.modals.isImportDisplayed,"is-loading":e.loading.importing,"is-error":e.errors.importing,"form-data":e.assetsCsvFormData,columns:e.columns},on:{confirm:e.renderImport,cancel:e.hideImportModal}}),s("create-tasks-modal",{attrs:{active:e.modals.isCreateTasksDisplayed,"is-loading":e.loading.creatingTasks,"is-loading-stay":e.loading.taskStay,"is-error":e.errors.creatingTasks,title:e.$t("tasks.create_tasks_asset"),text:e.$t("tasks.create_tasks_asset_explaination"),"error-text":e.$t("tasks.create_tasks_asset_failed")},on:{confirm:e.confirmCreateTasks,"confirm-and-stay":e.confirmCreateTasksAndStay,cancel:e.hideCreateTasksModal}}),s("add-metadata-modal",{attrs:{active:e.modals.isAddMetadataDisplayed,"is-loading":e.loading.addMetadata,"is-loading-stay":e.loading.addMetadata,"is-error":e.errors.addMetadata,"descriptor-to-edit":e.descriptorToEdit},on:{confirm:e.confirmAddMetadata,cancel:function(t){e.modals.isAddMetadataDisplayed=!1}}}),s("add-thumbnails-modal",{ref:"add-thumbnails-modal",attrs:{parent:"assets",active:e.modals.isAddThumbnailsDisplayed,"is-loading":e.loading.addThumbnails,"is-error":e.errors.addThumbnails},on:{confirm:e.confirmAddThumbnails,cancel:e.hideAddThumbnailsModal}}),s("build-filter-modal",{ref:"build-filter-modal",attrs:{active:e.modals.isBuildFilterDisplayed},on:{confirm:e.confirmBuildFilter,cancel:function(t){e.modals.isBuildFilterDisplayed=!1}}})],1)},W=[],Y=(s("4de4"),s("7db0"),s("a15b"),s("a434"),s("b0c0"),s("b64b"),s("2909")),K=s("c1df"),Q=s.n(K),X=s("3455"),J=s("d359"),Z=s("2229"),ee=s("8c97"),te=(s("ac1f"),s("841c"),{created:function(){},mounted:function(){},beforeDestroy:function(){},computed:{},methods:{setSearchFromUrl:function(){var e=this.searchField.getValue(),t=this.$route.query.search;!e&&t&&this.searchField.setValue(t)},setSearchInUrl:function(){var e=this.searchField.getValue();this.$route.query.search!==e&&this.$router.push({query:{search:e}})},changeSearch:function(e){this.searchField.setValue(e.search_query),this.searchField.$emit("change",e.search_query),this.resizeHeaders&&this.resizeHeaders()},focusSearchField:function(){this.searchField&&this.searchField.focus()}}}),se={created:function(){},mounted:function(){},beforeDestroy:function(){},computed:{},methods:{showImportModal:function(){this.modals.isImportDisplayed=!0},hideImportModal:function(){this.modals.isImportDisplayed=!1},showImportRenderModal:function(){this.modals.isImportRenderDisplayed=!0},hideImportRenderModal:function(){this.modals.isImportRenderDisplayed=!1},showCreateTasksModal:function(){this.modals.isCreateTasksDisplayed=!0},hideCreateTasksModal:function(){this.modals.isCreateTasksDisplayed=!1},showAddThumbnailsModal:function(){this.modals.isAddThumbnailsDisplayed=!0},hideAddThumbnailsModal:function(){this.modals.isAddThumbnailsDisplayed=!1}}},ie=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"data-list"},[s("div",{directives:[{name:"scroll",rawName:"v-scroll",value:e.onBodyScroll,expression:"onBodyScroll"}],ref:"body",staticClass:"datatable-wrapper"},[s("table-header-menu",{ref:"headerMenu",attrs:{"is-minimized":e.hiddenColumns[e.lastHeaderMenuDisplayed],"is-current-user-admin":e.isCurrentUserAdmin},on:{"minimize-clicked":function(t){return e.onMinimizeColumnToggled()},"delete-all-clicked":function(t){return e.onDeleteAllTasksClicked()},"sort-by-clicked":function(t){return e.onSortByTaskTypeClicked()}}}),s("table-metadata-header-menu",{ref:"headerMetadataMenu",attrs:{"is-current-user-admin":e.isCurrentUserAdmin},on:{"edit-clicked":function(t){return e.onEditMetadataClicked()},"delete-clicked":function(t){return e.onDeleteMetadataClicked()},"sort-by-clicked":function(t){return e.onSortByMetadataClicked()}}}),s("table",{staticClass:"datatable"},[s("thead",{directives:[{name:"columns-resizable",rawName:"v-columns-resizable"}],staticClass:"datatable-head",attrs:{id:"datatable-asset"}},[s("tr",[e.isTVShow?s("th",{ref:"th-episode",staticClass:"episode",attrs:{scope:"col"}},[e._v(" "+e._s(e.$t("assets.fields.episode"))+" ")]):e._e(),s("th",{ref:"th-name",staticClass:"name datatable-row-header",attrs:{scope:"col"}},[s("div",{staticClass:"flexrow"},[s("span",{staticClass:"flexrow-item"},[e._v(" "+e._s(e.$t("assets.fields.name"))+" ")]),e.isCurrentUserAdmin&&!e.isLoading?s("button-simple",{staticClass:"is-small flexrow-item",attrs:{icon:"plus",text:""},on:{click:e.onAddMetadataClicked}}):e._e()],1)]),!e.isCurrentUserClient&&e.isShowInfos&&e.isAssetDescription?s("th",{ref:"th-description",staticClass:"description",attrs:{scope:"col"}},[e._v(" "+e._s(e.$t("assets.fields.description"))+" ")]):e._e(),e._l(e.assetMetadataDescriptors,(function(t){return e.isShowInfos?s("th",{key:t.id,staticClass:"metadata-descriptor",attrs:{scope:"col"}},[s("div",{staticClass:"flexrow"},[s("span",{staticClass:"flexrow-item descriptor-name"},[e._v(" "+e._s(t.name)+" ")]),s("chevron-down-icon",{staticClass:"header-icon flexrow-item",on:{click:function(s){return e.showMetadataHeaderMenu(t.id,s)}}})],1)]):e._e()})),!e.isCurrentUserClient&&e.isShowInfos&&e.isAssetTime?s("th",{ref:"th-spent",staticClass:"time-spent",attrs:{scope:"col"}},[e._v(" "+e._s(e.$t("assets.fields.time_spent"))+" ")]):e._e(),e._l(e.displayedValidationColumns,(function(t){return e.isLoading?e._e():s("th",{key:t,class:{"validation-cell":!e.hiddenColumns[t],"hidden-validation-cell":e.hiddenColumns[t]},attrs:{scope:"col"}},[s("div",{staticClass:"flexrow validation-content",style:e.getValidationStyle(t)},[e.isCurrentUserClient?s("span",{staticClass:"flexrow-item datatable-dropdown task-type-name",staticStyle:{"margin-right":"0"}},[e._v(" "+e._s(e.hiddenColumns[t]?"":e.taskTypeMap[t].name)+" ")]):s("router-link",{staticClass:"flexrow-item datatable-dropdown task-type-name",staticStyle:{"margin-right":"0"},attrs:{to:e.taskTypePath(t)}},[e._v(" "+e._s(e.hiddenColumns[t]?"":e.taskTypeMap[t].name)+" ")]),s("chevron-down-icon",{staticClass:"header-icon flexrow-item",on:{click:function(s){return e.showHeaderMenu(t,s)}}})],1)])})),s("th",{staticClass:"actions",attrs:{scope:"col"}},[e.isCurrentUserManager&&e.displayedAssets.length>0&&!e.isLoading?s("button-simple",{class:{"is-small":!0,highlighted:e.isEmptyTask},attrs:{icon:"plus",text:e.$t("tasks.create_tasks")},on:{click:function(t){return e.$emit("create-tasks")}}}):e._e()],1)],2)]),e._l(e.displayedAssets,(function(t,i){return!e.isLoading&&e.isListVisible?s("tbody",{key:e.getGroupKey(t,i,"asset_type_id"),staticClass:"datatable-body"},[s("tr",{staticClass:"datatable-type-header"},[s("th",{attrs:{scope:"rowgroup",colspan:e.visibleColumns}},[s("span",{staticClass:"datatable-row-header"},[e._v(" "+e._s(t[0]?t[0].asset_type_name:"")+" ")])])]),e._l(t,(function(t,n){return s("tr",{key:t.id,staticClass:"datatable-row",class:{canceled:t.canceled},attrs:{scope:"row"}},[e.isTVShow?s("td",{staticClass:"episode"},[e._v(" "+e._s(e.episodeMap[t.episode_id]?e.episodeMap[t.episode_id].name:"MP")+" ")]):e._e(),s("th",{class:{"datatable-row-header":!0,name:!0,bold:!t.canceled}},[s("div",{staticClass:"flexrow"},[s("entity-thumbnail",{attrs:{entity:t,"empty-height":32}}),s("router-link",{staticClass:"asset-link",attrs:{to:e.assetPath(t.id),title:t.full_name}},[e._v(" "+e._s(t.name)+" ")])],1)]),!e.isCurrentUserClient&&e.isShowInfos&&e.isAssetDescription?s("description-cell",{staticClass:"description",attrs:{entry:t}}):e._e(),e._l(e.assetMetadataDescriptors,(function(i){return e.isShowInfos?s("td",{key:t.id+"-"+i.id,staticClass:"metadata-descriptor"},[s("div",{staticClass:"ellipsis",attrs:{title:t.data?t.data[i.field_name]:""}},[e._v(" "+e._s(t.data?t.data[i.field_name]:"")+" ")])]):e._e()})),!e.isCurrentUserClient&&e.isShowInfos&&e.isAssetTime?s("td",{staticClass:"time-spent"},[e._v(" "+e._s(e.formatDuration(t.timeSpent))+" ")]):e._e(),e._l(e.displayedValidationColumns,(function(a,o){return e.isLoading?e._e():s("validation-cell",{key:a+"-"+t.id,ref:"validation-"+e.getIndex(n,i)+"-"+o,refInFor:!0,class:{"validation-cell":!e.hiddenColumns[a],"hidden-validation-cell":e.hiddenColumns[a]},attrs:{column:e.taskTypeMap[a],entity:t,"task-test":e.taskMap[t.validations[a]],selected:e.assetSelectionGrid[e.getIndex(n,i)][o],rowX:e.getIndex(n,i),columnY:o,minimized:e.hiddenColumns[a],"is-static":!0,"is-assignees":e.isShowAssignations},on:{select:e.onTaskSelected,unselect:e.onTaskUnselected}})})),e.isCurrentUserManager?s("row-actions",{attrs:{entry:t},on:{"edit-clicked":function(s){return e.$emit("edit-clicked",t)},"delete-clicked":function(s){return e.$emit("delete-clicked",t)},"restore-clicked":function(s){return e.$emit("restore-clicked",t)}}}):s("td",{staticClass:"actions"})],2)}))],2):e._e()}))],2)],1),s("table-info",{attrs:{"is-loading":e.isLoading,"is-error":e.isError}}),!e.isEmptyList||e.isCurrentUserClient||e.isLoading?e._e():s("div",{staticClass:"has-text-centered"},[e._m(0),s("p",{staticClass:"info"},[e._v(e._s(e.$t("assets.empty_list")))]),s("button-simple",{staticClass:"level-item big-button",attrs:{text:e.$t("assets.new_assets")},on:{click:function(t){return e.$emit("new-clicked")}}})],1),e.isEmptyList&&e.isCurrentUserClient&&!e.isLoading?s("div",{staticClass:"has-text-centered"},[e._m(1),s("p",{staticClass:"info"},[e._v(e._s(e.$t("assets.empty_list_client")))])]):e._e(),e.isEmptyList||e.isLoading?e._e():s("p",{staticClass:"has-text-centered nb-assets"},[e._v(" "+e._s(e.displayedAssetsLength)+" "+e._s(e.$tc("assets.number",e.displayedAssetsLength))+" ("+e._s(e.formatDuration(e.displayedAssetsTimeSpent))+" "+e._s(e.$tc("main.days_spent",e.displayedAssetsTimeSpent))+") ")])],1)},ne=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("p",{staticClass:"info"},[i("img",{attrs:{src:s("66a5")}})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("p",{staticClass:"info"},[i("img",{attrs:{src:s("66a5")}})])}],ae=s("0a35"),oe=s("e9c6"),re=s("4f18"),ce=s("1338"),le=s("0fcb"),de=s("de40"),ue=s("bb21"),pe=s("03b1"),he=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"header-menu hidden"},[s("div",{on:{click:function(t){return e.$emit("minimize-clicked")}}},[e.isMinimized?s("span",[e._v(" "+e._s(e.$t("main.maximize"))+" ")]):s("span",[e._v(e._s(e.$t("main.minimize")))])]),s("div",{on:{click:function(t){return e.$emit("sort-by-clicked")}}},[e._v(" "+e._s(e.$t("main.sort_by"))+" ")]),e.isCurrentUserAdmin?s("div",{staticClass:"error",on:{click:function(t){return e.$emit("delete-all-clicked")}}},[e._v(" "+e._s(e.$t("main.delete_all"))+" ")]):e._e()])},me=[],fe={name:"table-header-menu",props:{isMinimized:{type:Boolean,default:!1},isCurrentUserAdmin:{type:Boolean,default:!1}},data:function(){return{}},computed:Object(c["a"])({},Object(l["c"])([])),methods:Object(c["a"])({},Object(l["b"])([]))},_e=fe,ve=(s("7369"),Object(_["a"])(_e,he,me,!1,null,"9fb3cb4a",null)),ge=ve.exports,ye=s("e60b"),be=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"header-menu hidden"},[e.isCurrentUserAdmin?s("div",{on:{click:function(t){return e.$emit("edit-clicked")}}},[e._v(" "+e._s(e.$t("main.edit"))+" ")]):e._e(),s("div",{on:{click:function(t){return e.$emit("sort-by-clicked")}}},[e._v(" "+e._s(e.$t("main.sort_by"))+" ")]),e.isCurrentUserAdmin?s("div",{staticClass:"error",on:{click:function(t){return e.$emit("delete-clicked")}}},[e._v(" "+e._s(e.$t("main.delete"))+" ")]):e._e()])},ke=[],we={name:"table-metadata-header-menu",props:{isCurrentUserAdmin:{type:Boolean,default:!1}},data:function(){return{}},computed:Object(c["a"])({},Object(l["c"])([])),methods:Object(c["a"])({},Object(l["b"])([]))},Ce=we,Se=(s("de95"),Object(_["a"])(Ce,be,ke,!1,null,"49d47fdd",null)),Te=Se.exports,xe=s("cb0e"),Ee={name:"asset-list",mixins:[oe["a"],re["a"],ce["a"]],components:{ButtonSimple:de["a"],DescriptionCell:le["a"],EntityThumbnail:ue["a"],ChevronDownIcon:ae["f"],RowActions:pe["a"],TableInfo:ye["a"],TableHeaderMenu:ge,TableMetadataHeaderMenu:Te,ValidationCell:xe["a"]},props:{displayedAssets:{type:Array,default:function(){return[]}},isLoading:{type:Boolean,default:!0},isError:{type:Boolean,default:!0},validationColumns:{type:Array,default:function(){return[]}}},data:function(){return{lastSelection:null,hiddenColumns:{},lastHeaderMenuDisplayed:null}},computed:Object(c["a"])(Object(c["a"])({},Object(l["c"])(["assets","assetFilledColumns","assetMetadataDescriptors","assetSearchText","assetSelectionGrid","episodeMap","currentEpisode","currentProduction","displayedAssetsLength","displayedAssetsTimeSpent","nbSelectedTasks","isAssetDescription","isCurrentUserAdmin","isCurrentUserClient","isCurrentUserManager","isShowAssignations","isShowInfos","isAssetTime","isTVShow","selectedTasks","taskMap","taskTypeMap"])),{},{createTasksPath:function(){return this.getPath("create-asset-tasks")},isEmptyList:function(){return 0===this.displayedAssetsLength&&!this.isLoading&&!this.isError&&(!this.assetSearchText||0===this.assetSearchText.length)},isEmptyTask:function(){return!this.isEmptyList&&!this.isLoading&&this.validationColumns&&0===this.validationColumns.length},isListVisible:function(){return!this.isLoading&&!this.isError&&this.displayedAssetsLength>0},visibleColumns:function(){var e=1;return e+=this.isTVShow?1:0,e+=!this.isCurrentUserClient&&this.isShowInfos&&this.isAssetDescription?1:0,e+=this.assetMetadataDescriptors.length,e+=!this.isCurrentUserClient&&this.isShowInfos&&this.isAssetTime?1:0,e+=this.displayedValidationColumns.length,e},displayedValidationColumns:function(){var e=this;return this.validationColumns.filter((function(t){return e.assetFilledColumns[t]&&(!e.hiddenColumns[t]||e.isShowInfos)}))}}),methods:Object(c["a"])(Object(c["a"])({},Object(l["b"])(["displayMoreAssets"])),{},{onBodyScroll:function(e,t){this.$emit("scroll",t.scrollTop);var s=this.$refs.body.scrollHeight-this.$refs.body.offsetHeight;s<t.scrollTop+100&&this.loadMoreAssets()},loadMoreAssets:function(){this.displayMoreAssets()},getIndex:function(e,t){var s=0,i=0;while(s<t)i+=this.displayedAssets[s].length,s++;return e+i},newAssetPath:function(){return this.getPath("new-asset")},assetPath:function(e){return this.getPath("asset",e)},taskTypePath:function(e){var t={name:"task-type",params:{production_id:this.currentProduction.id,task_type_id:e,type:"assets"}};return this.isTVShow&&this.currentEpisode&&(t.name="episode-task-type",t.params.episode_id=this.currentEpisode.id),t},getPath:function(e,t){var s={name:e,params:{production_id:this.currentProduction.id}};return this.isTVShow&&this.currentEpisode&&(s.name="episode-".concat(e),s.params.episode_id=this.currentEpisode.id),t&&(s.params.asset_id=t),s},resizeHeaders:function(){return!0}}),watch:{validationColumns:function(){this.initHiddenColumns(this.validationColumns,this.hiddenColumns)}}},Pe=Ee,Oe=(s("bc89"),Object(_["a"])(Pe,ie,ne,!1,null,"ca1cfdde",null)),Ae=Oe.exports,je=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{modal:!0,"is-active":e.active}},[s("div",{staticClass:"modal-background",on:{click:function(t){return e.$emit("cancel")}}}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box content"},[s("h1",{staticClass:"title"},[e._v(" "+e._s(e.$t("productions.metadata.title"))+" ")]),s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"nameField",attrs:{label:e.$t("assets.fields.name")},on:{enter:e.confirm},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),s("combobox",{directives:[{name:"focus",rawName:"v-focus"}],ref:"typeField",attrs:{label:e.$t("assets.fields.type"),options:e.typeOptions},on:{enter:e.confirm},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}}),s("combobox-boolean",{directives:[{name:"focus",rawName:"v-focus"}],ref:"hiddenField",attrs:{label:e.$t("assets.fields.hidden_from_client")},on:{enter:e.confirm},model:{value:e.form.for_client,callback:function(t){e.$set(e.form,"for_client",t)},expression:"form.for_client"}}),"choices"===e.type?s("div",[s("p",{staticClass:"strong"},[e._v(" "+e._s(e.$t("productions.metadata.available_values"))+" ")]),e.form.values.length>0?s("div",{ref:"valueList",staticClass:"choice-value-wrapper"},e._l(e.form.values,(function(t){return s("p",{key:t,staticClass:"choice-value"},[s("span",[e._v(" "+e._s(t)+" ")]),s("span",{staticClass:"remove-button pull-right",on:{click:function(s){return e.removeValue(t)}}},[e._v(" x ")])])})),0):s("div",[e._v(" "+e._s(e.$t("productions.metadata.add_new_values"))+" ")]),s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"addChoiceField",attrs:{"button-label":e.$t("Add value")},on:{enter:e.addValue},model:{value:e.valueToAdd,callback:function(t){e.valueToAdd=t},expression:"valueToAdd"}})],1):e._e(),s("modal-footer",{attrs:{"error-text":e.$t("productions.metadata.error"),"is-loading":e.isLoading,"is-disabled":!e.isFormFilled},on:{confirm:e.confirm,cancel:function(t){return e.$emit("cancel")}}})],1)])])},De=[],Me=(s("ddb0"),s("d065")),Ie=s("66e7"),$e=s("992f"),Le=s("4636"),Fe=s("d5c9"),Ne=s("7bf8"),qe={name:"add-metadata-modal",mixins:[Me["a"]],components:{Combobox:$e["a"],ComboboxBoolean:Le["a"],ModalFooter:Fe["a"],TextField:Ne["a"]},props:{active:{type:Boolean,default:!1},descriptorToEdit:{type:Object,default:function(){}},isLoading:{type:Boolean,default:!1},isError:{type:Boolean,default:!1}},data:function(){return{form:{name:"",for_client:"false",values:[]},valueToAdd:"",type:"free",typeOptions:[{label:this.$t("productions.metadata.free"),value:"free"},{label:this.$t("productions.metadata.choices"),value:"choices"}]}},mounted:function(){this.reset()},computed:Object(c["a"])(Object(c["a"])({},Object(l["c"])([])),{},{isFormFilled:function(){return this.form.name.length>0&&(this.form.values.length>0||"free"===this.type)},valueList:function(){return this.$refs.valueList}}),methods:Object(c["a"])(Object(c["a"])({},Object(l["b"])([])),{},{addValue:function(){var e=this,t=this.$refs.addChoiceField.value;return!this.form.values.find((function(e){return e===t}))&&t&&(this.form.values.push(t),this.valueToAdd="",this.$nextTick((function(){e.valueList.scrollTop=e.valueList.scrollHeight}))),t},confirm:function(){return"free"===this.type&&(this.form.values=[]),this.$emit("confirm",this.form)},removeValue:function(e){this.form.values=Object(Ie["f"])(this.form.values,e)},reset:function(){this.form={name:"",values:[]},this.valueToAdd="",this.descriptorToEdit.name&&(this.form={id:this.descriptorToEdit.id,name:"".concat(this.descriptorToEdit.name),values:Object(Y["a"])(this.descriptorToEdit.choices),for_client:this.descriptorToEdit.for_client?"true":"false"}),this.type=this.form.values.length>0?"choices":"free"}}),watch:{active:function(){var e=this;this.active&&(this.reset(),this.$nextTick((function(){e.$refs.nameField.focus()})))}}},Re=qe,Be=(s("66c0"),Object(_["a"])(Re,je,De,!1,null,"e4740810",null)),Ve=Be.exports,ze=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:{modal:!0,"is-active":e.active}},[i("div",{staticClass:"modal-background",on:{click:function(t){return e.$emit("cancel")}}}),i("div",{staticClass:"modal-content"},[i("div",{staticClass:"box content"},[i("h1",{staticClass:"title"},[e._v(" "+e._s(e.$t("entities.thumbnails.title"))+" ")]),i("p",[e._v(" "+e._s(e.$t("entities.thumbnails.explaination"))+" ")]),i("combobox-task-type",{attrs:{label:e.$t("entities.thumbnails.select_task_type"),"task-type-list":e.taskTypeList},model:{value:e.taskTypeId,callback:function(t){e.taskTypeId=t},expression:"taskTypeId"}}),i("p",[e._v(" "+e._s(e.$t("entities.thumbnails.explaination_two"))+" "+e._s(e.$t("entities.thumbnails."+e.parent+"_pattern"))+" ")]),i("label",{staticClass:"label"},[e._v(" "+e._s(e.$t("entities.thumbnails.select_files"))+" ")]),i("file-upload",{ref:"preview-field",attrs:{label:e.$t("main.csv.upload_file"),accept:e.extensions,multiple:!0},on:{fileselected:e.onFileSelected}}),e.thumbnailList.length>0?i("label",{staticClass:"label mt2"},[e._v(" "+e._s(e.$t("entities.thumbnails.selected_files"))+" ")]):e._e(),e._l(e.thumbnailList,(function(t){return i("div",{key:t.id,staticClass:"thumbnail-line flexrow"},[t.src?e._e():i("img",{staticClass:"flexrow-item",attrs:{src:s("10de"),width:"150",height:"100"}}),t.src?i("img",{staticClass:"flexrow-item",attrs:{src:t.src,width:"150",height:"100"}}):e._e(),i("span",{staticClass:"flexrow-item"},[e._v(" "+e._s(t.parentName)+" / "+e._s(t.name)+" ")]),e.loading[t.id]?i("spinner",{attrs:{size:10}}):e._e(),e.uploaded[t.id]?i("check-icon"):e._e()],1)})),i("modal-footer",{attrs:{"error-text":e.$t("entities.thumbnails.error"),"is-loading":e.isLoading,"is-disabled":!e.isFormFilled},on:{confirm:e.confirm,cancel:function(t){return e.$emit("cancel")}}})],2)])])},Ue=[],He=(s("d81d"),s("2ca0"),s("2b3d"),s("7d26")),Ge=s("0263"),We=s("e4fd"),Ye=s("4085"),Ke={name:"add-thumbnails-modal",mixins:[Me["a"]],components:{CheckIcon:ae["d"],ComboboxTaskType:We["a"],FileUpload:Ye["a"],ModalFooter:Fe["a"],Spinner:d["a"]},props:{active:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},isError:{type:Boolean,default:!1},parent:{type:String,required:!0}},data:function(){return{extensions:".png,.jpg,.mp4,.mov",forms:[],loading:{},taskTypeId:null,uploaded:{},thumbnailList:[]}},mounted:function(){this.reset()},computed:Object(c["a"])(Object(c["a"])({},Object(l["c"])(["assetValidationColumns","shotValidationColumns","taskTypeMap","taskMap"])),{},{isFormFilled:function(){return this.thumbnailList.length>0},taskTypeList:function(){var e=this;return this.isAssets?this.assetValidationColumns.map((function(t){return e.taskTypeMap[t]})):this.shotValidationColumns.map((function(t){return e.taskTypeMap[t]}))},isAssets:function(){return this.$route.path.indexOf("assets")>-1}}),methods:Object(c["a"])(Object(c["a"])({},Object(l["b"])([])),{},{reset:function(){this.taskTypeList.length>0&&(this.taskTypeId=this.taskTypeList[0].id),this.$refs["preview-field"].reset&&this.$refs["preview-field"].reset(),this.thumbnailList=[],this.loading={},this.uploaded={}},confirm:function(){return this.$emit("confirm",this.forms.map(this.addTaskInformation))},addEntityToEntityMap:function(e){var t="";return t=this.isAssets?ee["a"].slugify("".concat(e.asset_type_name,"_").concat(e.name)):ee["a"].slugify("".concat(e.sequence_name,"_").concat(e.name)),this.entityMap[t]=e,this.entityMap},addTaskInformation:function(e){var t=this.slugifyFilename(e),s=this.entityMap[t],i=this.taskMap[s.validations[this.taskTypeId]];return e.task=i,e},onFileSelected:function(e){return this.entityMap={},this.uploaded={},this.isAssets?He["a"].cache.assets.forEach(this.addEntityToEntityMap):Ge["a"].cache.shots.forEach(this.addEntityToEntityMap),this.forms=this.filterForms(e),this.buildThumbnailList()},filterForms:function(e){var t=this;return e.filter((function(e){var s=t.slugifyFilename(e),i=t.entityMap[s];return i&&i.validations[t.taskTypeId]}))},buildThumbnailList:function(){var e=this;return this.thumbnailList=this.forms.map((function(t){var s=e.entityMap[e.slugifyFilename(t)],i=e.prepareImagePreview(t),n=e.isAssets?s.asset_type_name:s.sequence_name;return t.asset=s,{parentName:n,name:s.name,id:s.id,src:i}})),this.thumbnailList},slugifyFilename:function(e){var t=e.get("file").name;return ee["a"].slugify(t.substring(0,t.length-3))},prepareImagePreview:function(e){return e.get("file").type.startsWith("image")?window.URL.createObjectURL(e.get("file")):""},markLoading:function(e){this.loading={},this.loading[e]=!0},markUploaded:function(e){this.uploaded[e]=!0}}),watch:{active:function(){this.active&&this.reset()}}},Qe=Ke,Xe=(s("6c25"),Object(_["a"])(Qe,ze,Ue,!1,null,"78132146",null)),Je=Xe.exports,Ze=s("c31e"),et=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{modal:!0,"is-active":e.active}},[s("div",{staticClass:"modal-background",on:{click:function(t){return e.$emit("cancel")}}}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box content"},[s("page-title",{attrs:{text:e.title}}),s("p",[e._v(e._s(e.text))]),s("form",{staticClass:"widden",on:{submit:function(e){e.preventDefault()}}},[s("combobox-task-type",{attrs:{"task-type-list":e.isAssetTasks?e.assetTaskTypes:e.shotTaskTypes},model:{value:e.form.task_type_id,callback:function(t){e.$set(e.form,"task_type_id",t)},expression:"form.task_type_id"}})],1),s("div",{staticClass:"flexrow"},[s("div",{staticClass:"filler"}),s("combobox",{staticClass:"flexrow-item",attrs:{options:e.selectionOptions,"with-margin":!1},model:{value:e.selectionOnly,callback:function(t){e.selectionOnly=t},expression:"selectionOnly"}}),s("a",{class:{button:!0,"flexrow-item":!0,"is-primary":!0,"is-loading":e.isLoadingStay},on:{click:e.confirmAndStayClicked}},[e._v(" "+e._s(e.$t("main.confirmation_and_stay"))+" ")]),s("a",{class:{button:!0,"flexrow-item":!0,"is-primary":!0,"is-loading":e.isLoading},on:{click:e.confirmClicked}},[e._v(" "+e._s(e.$t("main.confirmation"))+" ")]),s("button",{staticClass:"button is-link",on:{click:function(t){return e.$emit("cancel")}}},[e._v(" "+e._s(e.$t("main.cancel"))+" ")])],1),e.isError?s("p",{staticClass:"error has-text-right info-message"},[e._v(" "+e._s(e.errorText)+" ")]):e._e()],1)])])},tt=[],st=s("8d07"),it={name:"create-task-modal",mixins:[Me["a"]],components:{Combobox:$e["a"],ComboboxTaskType:We["a"],PageTitle:st["a"]},props:{active:{type:Boolean,default:!1},errorText:{type:String,default:""},isError:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},isLoadingStay:{type:Boolean,default:!1},isSuccess:{type:Boolean,default:!1},text:{type:String,default:""},title:{type:String,default:""}},data:function(){return{form:{task_type_id:""},selectionOnly:"false",selectionOptions:[{label:this.$t("tasks.for_selection"),value:"true"},{label:this.$t("tasks.for_project"),value:"false"}]}},computed:Object(c["a"])(Object(c["a"])({},Object(l["c"])(["taskTypes","assetTaskTypes","shotTaskTypes"])),{},{isAssetTasks:function(){return this.$route.path.indexOf("assets")>=0}}),methods:Object(c["a"])(Object(c["a"])({},Object(l["b"])([])),{},{confirmClicked:function(){this.$emit("confirm",{form:this.form,selectionOnly:"true"===this.selectionOnly})},confirmAndStayClicked:function(){this.$emit("confirm-and-stay",{form:this.form,selectionOnly:"true"===this.selectionOnly})}}),mounted:function(){this.isAssetTasks?this.assetTaskTypes.length>0&&(this.form.task_type_id=this.assetTaskTypes[0].id):this.shotTaskTypes.length>0&&(this.form.task_type_id=this.shotTaskTypes[0].id)}},nt=it,at=(s("2254"),Object(_["a"])(nt,et,tt,!1,null,"d28c3902",null)),ot=at.exports,rt=s("5f48"),ct=s("813f"),lt=s("440f"),dt=s("4918"),ut=s("2c1a"),pt=s("4d04"),ht=s("55ce"),mt=function(e,t){var s=t._c;return t.props.sorting.length>0?s("div",{staticClass:"has-text-right"},[t._v(" "+t._s(t.props.label)+" "+t._s(t.props.sorting[0].name)+" "),s("a",{on:{click:function(e){return t.listeners["clear-sorting"]()}}},[t._v("x")])]):t._e()},ft=[],_t={name:"sorting-info",functional:!0,props:{label:{default:"Sorted by",type:String},sorting:{default:function(){return[]},type:Array}}},vt=_t,gt=Object(_["a"])(vt,mt,ft,!0,null,null,null),yt=gt.exports,bt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("button",{class:{"level-item":!0,button:!0,"is-toggle":!0,"is-on":e.isShowAssignations},attrs:{title:e.$t(e.isShowAssignations?"tasks.hide_assignations":"tasks.show_assignations")},on:{click:e.toggleAssignations}},[s("users-icon",{staticClass:"icon is-small"})],1)},kt=[],wt={name:"show-assignations-button",components:{UsersIcon:ae["T"]},props:{},computed:Object(c["a"])({},Object(l["c"])(["isShowAssignations"])),methods:Object(c["a"])(Object(c["a"])({},Object(l["b"])(["showAssignations","hideAssignations"])),{},{toggleAssignations:function(){this.isShowAssignations?this.hideAssignations():this.showAssignations()}}),mounted:function(){"false"===localStorage.getItem("show-assignations")?this.hideAssignations():this.showAssignations()},watch:{isShowAssignations:function(){localStorage.setItem("show-assignations",this.isShowAssignations,{expires:"1M"})}}},Ct=wt,St=Object(_["a"])(Ct,bt,kt,!1,null,null,null),Tt=St.exports,xt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("button",{class:{"level-item":!0,button:!0,"is-toggle":!0,"is-on":e.isShowInfos},attrs:{title:e.$t(e.isShowInfos?"tasks.hide_infos":"tasks.show_infos")},on:{click:e.toggleInfos}},[s("database-icon",{staticClass:"icon is-small"})],1)},Et=[],Pt={name:"show-infos-button",components:{DatabaseIcon:ae["m"]},props:{},computed:Object(c["a"])({},Object(l["c"])(["isShowInfos"])),methods:Object(c["a"])(Object(c["a"])({},Object(l["b"])(["showInfos","hideInfos"])),{},{toggleInfos:function(){this.isShowInfos?this.hideInfos():this.showInfos()}}),mounted:function(){"false"===localStorage.getItem("show-infos")?this.hideInfos():this.showInfos()},watch:{isShowInfos:function(){localStorage.setItem("show-infos",this.isShowInfos,{expires:"1M"})}}},Ot=Pt,At=Object(_["a"])(Ot,xt,Et,!1,null,null,null),jt=At.exports,Dt=s("9d94"),Mt={name:"assets",mixins:[te,se],components:{AssetList:Ae,AddMetadataModal:Ve,AddThumbnailsModal:Je,BuildFilterModal:Ze["a"],ButtonSimple:de["a"],CreateTasksModal:ot,DeleteModal:rt["a"],EditAssetModal:ct["a"],HardDeleteModal:ut["a"],ImportModal:lt["a"],ImportRenderModal:dt["a"],SearchField:pt["a"],SearchQueryList:ht["a"],ShowAssignationsButton:Tt,ShowInfosButton:jt,SortingInfo:yt,TaskInfo:Dt["a"]},data:function(){return{assetToDelete:{},assetToRestore:{},assetToEdit:{},assetFilters:[{type:"Type",value:{name:"open"}}],assetFilterTypes:["Type"],columns:["Type","Name","Description"],deleteAllTasksLockText:null,descriptorToEdit:{},errors:{addMetadata:!1,addThumbnails:!1,creatingTasks:!1,delete:!1,deleteMetadata:!1,edit:!1,restore:!1,importing:!1},initialLoading:!0,loading:{addMetadata:!1,addThumbnails:!1,creatingTasks:!1,deleteAllTasks:!1,deleteMetadata:!1,delete:!1,edit:!1,importing:!1,restore:!1,stay:!1,taskStay:!1},modals:{isAddMetadataDisplayed:!1,isAddThumbnailsDisplayed:!1,isBuildFilterDisplayed:!1,isCreateTasksDisplayed:!1,isDeleteDisplayed:!1,isDeleteAllTasksDisplayed:!1,isDeleteMetadataDisplayed:!1,isImportDisplayed:!1,isImportRenderDisplayed:!1,isNewDisplayed:!1},parsedCSV:[],success:{edit:!1}}},created:function(){this.setLastProductionScreen("assets")},mounted:function(){var e=this;this.assetSearchText.length>0&&this.searchField.setValue(this.assetSearchText),this.$refs["asset-list"].setScrollPosition(this.assetListScrollPosition),this.onSearchChange(),this.resetCsvColumns(),this.$refs["asset-list"].setScrollPosition(this.assetListScrollPosition);var t=function(){e.$refs["asset-list"]&&(e.onSearchChange(),e.resetCsvColumns(),e.$refs["asset-list"].setScrollPosition(e.assetListScrollPosition))};Object.keys(this.assetMap).length<2||this.assetValidationColumns.length>0&&!Object.keys(this.assetMap)[0].validations?setTimeout((function(){e.loadAssets().then((function(){setTimeout((function(){e.initialLoading=!1,t()}),500)}))}),0):(this.isAssetsLoading||(this.initialLoading=!1),t())},computed:Object(c["a"])(Object(c["a"])({},Object(l["c"])(["assetMap","assetsPath","assetListScrollPosition","assetsCsvFormData","assetSearchText","assetSearchQueries","assetTypes","assetValidationColumns","currentEpisode","currentProduction","displayedAssetsByType","episodeMap","openProductions","isAssetsLoading","isAssetsLoadingError","isCurrentUserClient","isCurrentUserManager","isAssetTime","isTVShow","nbSelectedTasks","selectedTasks","assetSorting","taskTypeMap","taskTypes"])),{},{newAssetPath:function(){return this.getPath("new-asset")},addThumbnailsModal:function(){return this.$refs["add-thumbnails-modal"]},searchField:function(){return this.$refs["asset-search-field"]},filteredAssets:function(){var e=this,t={};return this.displayedAssetsByType.forEach((function(s){s.forEach((function(s){var i="";e.isTVShow&&s.episode_id&&(i+=e.episodeMap[s.episode_id].name),i+="".concat(s.asset_type_name).concat(s.name),t[i]=!0}))})),t},tvShowPageTitle:function(){var e=this.currentProduction?this.currentProduction.name:"",t="";return this.currentEpisode&&(t=this.currentEpisode.name,"all"===this.currentEpisode.id&&(t=this.$t("main.all")),"main"===this.currentEpisode.id&&(t="Main Pack")),"".concat(e," - ").concat(t)+" | ".concat(this.$t("assets.title")," - Kitsu")},shortPageTitle:function(){var e=this.currentProduction?this.currentProduction.name:"";return"".concat(e," ").concat(this.$t("assets.title")," - Kitsu")},dataMatchers:function(){return this.isTVShow?["Episode","Type","Name"]:["Type","Name"]}}),methods:Object(c["a"])(Object(c["a"])({},Object(l["b"])(["addMetadataDescriptor","changeAssetSort","commentTaskWithPreview","createTasks","deleteAllAssetTasks","deleteAsset","deleteMetadataDescriptor","editAsset","getAssetsCsvLines","loadAssets","loadEpisodes","newAsset","removeAssetSearch","restoreAsset","saveAssetSearch","setLastProductionScreen","setAssetSearch","setPreview","uploadAssetFile"])),{},{showNewModal:function(){this.assetToEdit={},this.modals.isNewDisplayed=!0},onEditClicked:function(e){this.assetToEdit=e,this.modals.isNewDisplayed=!0},onDeleteClicked:function(e){this.assetToDelete=e,this.modals.isDeleteDisplayed=!0},onRestoreClicked:function(e){this.assetToRestore=e,this.modals.isRestoreDisplayed=!0},confirmNewAssetStay:function(e){var t=this;this.loading.stay=!0,this.success.edit=!1,this.newAsset(e).then((function(){t.loading.stay=!1,t.loading.edit=!1,t.resetLightEditModal(),t.$refs["edit-asset-modal"].focusName(),t.success.edit=!0})).catch((function(e){console.error(e),t.loading.stay=!1,t.loading.edit=!1,t.success.edit=!1,t.errors.edit=!0}))},confirmEditAsset:function(e){var t=this,s="newAsset";this.loading.edit=!0,this.errors.edit=!1,this.assetToEdit&&this.assetToEdit.id&&(s="editAsset",e.id=this.assetToEdit.id),this[s](e).then((function(e){t.loading.edit=!1,t.modals.isNewDisplayed=!1})).catch((function(e){console.error(e),t.loading.edit=!1,t.errors.edit=!0}))},confirmDeleteAsset:function(){var e=this;this.loading.delete=!0,this.errors.delete=!1,this.deleteAsset(this.assetToDelete).then((function(t){e.loading.delete=!1,e.modals.isDeleteDisplayed=!1})).catch((function(t){console.error(t),e.loading.delete=!1,e.errors.delete=!0}))},confirmRestoreAsset:function(){var e=this;this.loading.restore=!0,this.errors.restore=!1,this.restoreAsset(this.assetToRestore).then((function(t){e.loading.restore=!1,e.modals.isRestoreDisplayed=!1})).catch((function(t){console.error(t),e.loading.restore=!1,e.errors.restore=!0}))},confirmBuildFilter:function(e){this.modals.isBuildFilterDisplayed=!1,this.$refs["asset-search-field"].setValue(e),this.onSearchChange()},confirmCreateTasks:function(e){var t=this,s=e.form,i=e.selectionOnly;this.loading.creatingTasks=!0,this.runTasksCreation(s,i).then((function(){t.reset(),t.hideCreateTasksModal(),t.loading.creatingTasks=!1}))},confirmCreateTasksAndStay:function(e){var t=this,s=e.form,i=e.selectionOnly;this.loading.taskStay=!0,this.runTasksCreation(s,i).then((function(){t.reset(),t.loading.taskStay=!1}))},runTasksCreation:function(e,t){var s=this;return this.errors.creatingTasks=!1,this.createTasks({type:"assets",task_type_id:e.task_type_id,project_id:this.currentProduction.id,selectionOnly:t}).catch((function(e){s.errors.creatingTasks=!0,console.error(e)}))},confirmDeleteAllTasks:function(e){var t=this,s=this.taskTypes.find((function(e){return e.name===t.deleteAllTasksLockText})).id,i=this.currentProduction.id;this.errors.deleteAllTasks=!1,this.loading.deleteAllTasks=!0,this.deleteAllAssetTasks({projectId:i,taskTypeId:s,selectionOnly:e}).then((function(){t.loading.deleteAllTasks=!1,e||t.loadAssets(),t.modals.isDeleteAllTasksDisplayed=!1})).catch((function(e){console.error(e),t.loading.deleteAllTasks=!1,t.errors.deleteAllTasks=!0}))},confirmDeleteMetadata:function(){var e=this;this.errors.deleteMetadata=!1,this.loading.deleteMetadata=!0,this.deleteMetadataDescriptor(this.descriptorIdToDelete).then((function(){e.errors.deleteMetadata=!1,e.loading.deleteMetadata=!1,e.modals.isDeleteMetadataDisplayed=!1})).catch((function(t){console.error(t),e.errors.deleteMetadata=!0,e.loading.deleteMetadata=!1}))},resetLightEditModal:function(){var e={name:"",entity_type_id:this.assetToEdit.entity_type_id,production_id:this.currentProduction.id};this.assetToEdit=e},resetEditModal:function(){var e={name:""};this.assetTypes.length>0&&(e.asset_type_id=this.assetTypes[0].id),e.production_id=this.currentProduction.id,this.assetToEdit=e},deleteText:function(){var e=this.assetToDelete;return e?this.$t("assets.delete_text",{name:e.name}):""},deleteAllTasksText:function(){return this.$t("tasks.delete_all_text",{name:this.deleteAllTasksLockText})},restoreText:function(){var e=this.assetToRestore;return e?this.$t("assets.restore_text",{name:e.name}):""},renderImport:function(e,t){var s=this;this.loading.importing=!0,this.errors.importing=!1,this.formData=e,"file"===t&&(e=e.get("file")),X["a"].processCSV(e).then((function(e){s.parsedCSV=e,s.hideImportModal(),s.loading.importing=!1,s.showImportRenderModal()}))},uploadImportFile:function(e,t){var s=this,i=new FormData,n="import.csv",a=X["a"].turnEntriesToCsvString(e),o=new File([a],n,{type:"text/csv"});i.append("file",o),this.loading.importing=!0,this.errors.importing=!1,this.$store.commit("ASSET_CSV_FILE_SELECTED",i),this.uploadAssetFile(t).then((function(){s.hideImportRenderModal(),s.loading.importing=!1,s.loadEpisodes().catch(console.error),s.loadAssets()})).catch((function(e){console.error(e),s.loading.importing=!1,s.errors.importing=!0}))},resetImport:function(){this.errors.importing=!1,this.hideImportRenderModal(),this.$store.commit("ASSET_CSV_FILE_SELECTED",null),this.$refs["import-modal"].reset(),this.showImportModal()},onSearchChange:function(){var e=this.$refs["asset-search-field"].getValue();1!==e.length&&(this.setAssetSearch(e),this.setSearchInUrl())},saveSearchQuery:function(e){this.saveAssetSearch(e).then((function(){})).catch((function(e){e&&console.error(e)}))},removeSearchQuery:function(e){this.removeAssetSearch(e).then((function(){})).catch((function(e){e&&console.error(e)}))},saveScrollPosition:function(e){this.$store.commit("SET_ASSET_LIST_SCROLL_POSITION",e)},getPath:function(e){var t={name:e,params:{production_id:this.currentProduction.id}};return this.isTVShow&&this.currentEpisode&&(t.name="episode-".concat(e),t.params.episode_id=this.currentEpisode.id),t},onDeleteAllTasksClicked:function(e){var t=this.taskTypeMap[e];this.deleteAllTasksLockText=t.name,this.modals.isDeleteAllTasksDisplayed=!0},confirmAddMetadata:function(e){var t=this;this.loading.addMetadata=!0,e.entity_type="Asset",this.addMetadataDescriptor(e).then((function(){t.loading.addMetadata=!1,t.modals.isAddMetadataDisplayed=!1})).catch((function(e){console.error(e),t.loading.addMetadata=!1,t.errors.addMetadata=!0}))},confirmAddThumbnails:function(e){var t=this,s=function(e){return t.addThumbnailsModal.markLoading(e.task.entity_id),t.commentTaskWithPreview({taskId:e.task.id,commentText:"",taskStatusId:e.task.task_status_id,form:e}).then((function(s){s.newComment;var i=s.preview;return t.setPreview({taskId:e.task.id,entityId:e.task.entity_id,previewId:i.id})})).then((function(){return t.addThumbnailsModal.markUploaded(e.task.entity_id),Promise.resolve()}))};this.loading.addThumbnails=!0,J["a"].runPromiseMapAsSeries(e,s).then((function(){t.loading.addThumbnails=!1,t.modals.isAddThumbnailsDisplayed=!1}))},onAddMetadataClicked:function(){this.descriptorToEdit={},this.modals.isAddMetadataDisplayed=!0},onDeleteMetadataClicked:function(e){this.descriptorIdToDelete=e,this.modals.isDeleteMetadataDisplayed=!0},onEditMetadataClicked:function(e){this.descriptorToEdit=this.currentProduction.descriptors.find((function(t){return t.id===e})),this.modals.isAddMetadataDisplayed=!0},onExportClick:function(){var e=this;this.getAssetsCsvLines().then((function(t){var s=[Q()().format("YYYY-MM-DD"),"kitsu",e.currentProduction.name,e.$t("assets.title")];e.currentEpisode&&s.splice(3,0,e.currentEpisode.name);var i=ee["a"].slugify(s.join("_")),n=e.isTVShow?["Episode"]:[];n=n.concat([e.$t("assets.fields.type"),e.$t("assets.fields.name"),e.$t("assets.fields.description")]),Object(Z["d"])(Object(Y["a"])(e.currentProduction.descriptors)).filter((function(e){return"Asset"===e.entity_type})).forEach((function(e){n.push(e.name)})),e.isAssetTime&&n.push(e.$t("shots.fields.time_spent")),e.assetValidationColumns.forEach((function(t){n.push(e.taskTypeMap[t].name)})),X["a"].buildCsvFile(i,[n].concat(t))}))},resetCsvColumns:function(){var e=this.isTVShow?["Episode"]:[];this.columns=e.concat(["Type","Name","Description"])},onChangeSortClicked:function(e){this.changeAssetSort(e)},reset:function(){var e=this;this.initialLoading=!0,this.loadAssets().then((function(){e.initialLoading=!1,e.setSearchFromUrl(),e.onSearchChange()}))}}),watch:{currentProduction:function(){this.$refs["asset-search-field"].setValue(""),this.$store.commit("SET_ASSET_LIST_SCROLL_POSITION",0),this.resetCsvColumns(),this.initialLoading=!0,this.isTVShow||this.reset()},currentEpisode:function(){this.$refs["asset-search-field"].setValue(""),this.$store.commit("SET_ASSET_LIST_SCROLL_POSITION",0),this.isTVShow&&this.currentEpisode&&this.reset(),this.resetCsvColumns()},displayedAssets:function(){}},metaInfo:function(){return this.isTVShow?{title:this.tvShowPageTitle}:{title:this.shortPageTitle}}},It=Mt,$t=(s("a309"),Object(_["a"])(It,G,W,!1,null,"5ad9fbbd",null)),Lt=$t.exports,Ft=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"login hero is-fullheight"},[s("div",{staticClass:"container has-text-centered"},[s("div",{staticClass:"box has-text-left"},[e._m(0),s("form",[s("div",{staticClass:"field mt1"},[s("p",{staticClass:"control has-icon"},[s("input",{directives:[{name:"focus",rawName:"v-focus"}],staticClass:"input is-medium email",attrs:{type:"text",placeholder:e.$t("login.fields.email")},on:{input:e.updateEmail,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.confirmLogIn(t)}}}),s("span",{staticClass:"icon"},[s("mail-icon",{attrs:{width:"20",height:"20"}})],1)])]),s("div",{staticClass:"field"},[s("p",{staticClass:"control has-icon"},[s("input",{staticClass:"input is-medium password",attrs:{type:"password",placeholder:e.$t("login.fields.password")},on:{input:e.updatePassword,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.confirmLogIn(t)}}}),s("span",{staticClass:"icon"},[s("lock-icon",{attrs:{width:"20",height:"20"}})],1)])])]),s("p",{staticClass:"control"},[s("a",{class:{button:!0,"main-button":!0,"is-fullwidth":!0,"is-loading":e.isLoginLoading},on:{click:e.confirmLogIn}},[e._v(" "+e._s(e.$t("login.login"))+" ")])]),s("p",{directives:[{name:"show",rawName:"v-show",value:e.isLoginError,expression:"isLoginError"}],staticClass:"control error"},[e._v(" "+e._s(e.$t("login.login_failed"))+" ")]),s("p",{staticClass:"has-text-centered"},[s("router-link",{attrs:{to:{name:"reset-password"}}},[e._v(" "+e._s(e.$t("login.forgot_password"))+" ")])],1)])])])},Nt=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"has-text-centered login-header"},[i("img",{attrs:{src:s("ad6c")}}),i("h1",{staticClass:"title"},[e._v(" Kitsu ")])])}],qt={name:"login",components:{MailIcon:ae["y"],LockIcon:ae["x"]},computed:Object(c["a"])({},Object(l["c"])(["isLoginLoading","isLoginError"])),methods:Object(c["a"])(Object(c["a"])({},Object(l["b"])(["logIn"])),{},{updateEmail:function(e){this.$store.dispatch("changeEmail",e.target.value)},updatePassword:function(e){this.$store.dispatch("changePassword",e.target.value)},confirmLogIn:function(){var e=this;this.logIn((function(t,s){t&&(t.default_password?e.$router.push({name:"reset-change-password",params:{token:t.token}}):console.error(t)),s&&e.$router.push("/")}))}}),metaInfo:function(){return{title:this.$t("login.title")}}},Rt=qt,Bt=(s("ca1b"),Object(_["a"])(Rt,Ft,Nt,!1,null,"813ef5c6",null)),Vt=Bt.exports,zt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"main"},[s("topbar"),s("action-topbar"),s("sidebar"),s("router-view")],1)},Ut=[],Ht=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"topbar"},[s("div",{class:{"is-active":!e.isUserMenuHidden},attrs:{id:"c-mask-user-menu"},on:{click:function(t){return e.toggleUserMenu()}}}),s("nav",{staticClass:"nav"},[s("div",{staticClass:"nav-left"},[e.isCurrentUserClient?e._e():s("a",{staticClass:"nav-item sidebar-button",class:{selected:!e.isSidebarHidden},attrs:{id:"toggle-menu-button"},on:{click:function(t){return e.toggleSidebar()}}},[e._v("  ")]),e.isProductionContext?s("div",{class:{"nav-item":!0}},[s("div",{staticClass:"level"},[s("div",{staticClass:"level-item"},[s("combobox",{staticClass:"context-selector",attrs:{options:e.openProductionOptions,"is-top":!0},model:{value:e.currentProductionId,callback:function(t){e.currentProductionId=t},expression:"currentProductionId"}}),s("strong",[e._v(" > ")]),s("combobox",{staticClass:"context-selector",attrs:{options:e.sectionOptions,"is-top":!0},model:{value:e.currentProjectSection,callback:function(t){e.currentProjectSection=t},expression:"currentProjectSection"}}),e.isEpisodeContext?s("strong",[e._v(" > ")]):e._e(),e.isEpisodeContext?s("combobox",{staticClass:"context-selector",attrs:{options:e.currentEpisodeOptions,"is-top":!0},model:{value:e.currentEpisodeId,callback:function(t){e.currentEpisodeId=t},expression:"currentEpisodeId"}}):e._e()],1)])]):e.lastProduction&&"/open-productions"!==e.$route.path?s("div",{staticClass:"nav-item"},[s("router-link",{staticClass:"flexrow",attrs:{to:e.lastSectionPath}},[s("chevron-left-icon"),e._v(" "+e._s(e.$t("main.go_productions"))+" ")],1)],1):e._e()]),s("div",{staticClass:"nav-right"},[e.isCurrentUserArtist?s("router-link",{staticClass:"nav-item",attrs:{to:{name:"todos-tab",params:{tab:"todos"}}}},[e._v(" "+e._s(e.$t("tasks.my_tasks"))+" ")]):e._e(),e.isCurrentUserArtist?s("router-link",{staticClass:"nav-item",attrs:{to:{name:"todos-tab",params:{tab:"timesheets"}}}},[e._v(" "+e._s(e.$t("timesheets.title"))+" ")]):e._e(),s("notification-bell"),s("div",{ref:"user-name",class:{"nav-item":!0,"user-nav":!0,active:!e.isUserMenuHidden},on:{click:e.toggleUserMenu}},[s("people-avatar",{ref:"avatar",staticClass:"avatar",attrs:{"no-cache":!0,person:e.user,"is-link":!1}}),s("people-name",{staticClass:"user-name",attrs:{person:e.user}})],1)],1)]),s("nav",{directives:[{name:"show",rawName:"v-show",value:!e.isUserMenuHidden,expression:"!isUserMenuHidden"}],ref:"user-menu",staticClass:"user-menu"},[s("ul",[s("li",[s("router-link",{attrs:{to:"/profile"},nativeOn:{click:function(t){return e.toggleUserMenu()}}},[e._v(" "+e._s(e.$t("main.profile"))+" ")])],1),s("li",{on:{click:e.toggleDarkTheme}},[e.isDarkTheme?s("span",[e._v(" "+e._s(e.$t("main.white_theme"))+" ")]):s("span",[e._v(" "+e._s(e.$t("main.dark_theme"))+" ")])]),s("li",[s("a",{attrs:{href:"https://kitsu.cg-wire.com",target:"_blank"}},[e._v(" "+e._s(e.$t("main.documentation"))+" ")])]),s("li",[s("a",{attrs:{href:"https://www.youtube.com/playlist?list=PLp_1gB5ZBHXqnQgZ4TCrAt7smxesaDo29",target:"_blank"}},[e._v(" "+e._s(e.$t("main.tutorials"))+" ")])]),s("li",[s("a",{on:{click:function(t){e.display.shortcutModal=!0}}},[e._v(" "+e._s(e.$t("keyboard.shortcuts"))+" ")])]),e._m(0),e._m(1),s("li",[s("a",{attrs:{href:"https://cg-wire.com/en/about.html",target:"_blank"}},[e._v(" "+e._s(e.$t("main.about"))+" ")])]),s("li",{on:{click:e.onLogoutClicked}},[e._v(" "+e._s(e.$t("main.logout"))+" ")]),s("li",{staticClass:"version"},[e._v(" Kitsu "+e._s(e.kitsuVersion)+" ")])])]),s("shortcut-modal",{attrs:{active:e.display.shortcutModal},on:{cancel:function(t){e.display.shortcutModal=!1}}})],1)},Gt=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("li",[s("a",{attrs:{href:"https://slack.cg-wire.com",target:"_blank"}},[e._v(" Slack ")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("li",[s("a",{attrs:{href:"https://cgwire.canny.io",target:"_blank"}},[e._v(" Roadmap ")])])}],Wt=(s("caad"),s("2532"),s("1276"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"nav-item"},[s("router-link",{attrs:{to:{name:"notifications"}}},[e.isNewNotification?s("span",{staticClass:"number",attrs:{title:e.unreadNotificationsLength+" "+e.$tc("notifications.unread_notifications",e.unreadNotificationsLength)}},[e._v(" "+e._s(e.unreadNotificationsLength)+" ")]):s("bell-icon",{class:e.notificationBellClass})],1)],1)}),Yt=[],Kt={name:"notification-bell",components:{BellIcon:ae["c"]},props:{isWhite:{type:Boolean,default:!1}},computed:Object(c["a"])(Object(c["a"])({},Object(l["c"])(["isNewNotification","unreadNotificationsLength"])),{},{notificationBellClass:function(){return this.isNewNotification?{"has-notifications":!0}:this.isWhite?{"has-no-notifications":!0,white:!0}:{"has-no-notifications":!0}}})},Qt=Kt,Xt=(s("2833"),Object(_["a"])(Qt,Wt,Yt,!1,null,"1187ad7f",null)),Jt=Xt.exports,Zt=s("eb8c"),es=s("0073"),ts=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{modal:!0,"is-active":e.active}},[s("div",{staticClass:"modal-background",on:{click:function(t){return e.$emit("cancel")}}}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box content"},[s("h1",{staticClass:"title"},[e._v(" "+e._s(e.$t("keyboard.shortcuts"))+" ")]),e._l(e.shortcutGroups,(function(t){return s("div",{key:t.label,staticClass:"mt2"},[s("h3",[e._v(" "+e._s(e.$t(t.label))+" ")]),e._l(t.shortcuts,(function(t,i){return s("div",{key:"shortcut-"+i,staticClass:"shortcut"},[s("div",{staticClass:"shortcut-key-wrapper"},e._l(t.keys,(function(n,a){return s("div",{key:"shortcut-key-"+i+"-"+a},[s("span",{staticClass:"shortcut-key"},[e._v(e._s(n))]),a!==t.keys.length-1?s("span",{staticClass:"shortcut-plus"},[e._v("+ ")]):e._e()])})),0),s("span",{staticClass:"shortcut-text"},[e._v(e._s(t.text))])])}))],2)})),s("div",{staticClass:"has-text-right modal-footer"},[s("button",{staticClass:"button is-link",on:{click:function(t){return e.$emit("cancel")}}},[e._v(" "+e._s(e.$t("main.cancel"))+" ")])])],2)])])},ss=[],is={name:"shot-history-modal",mixins:[Me["a"]],components:{},props:{active:{type:Boolean,default:!1}},data:function(){return{shortcutGroups:[{label:"keyboard.navigation",shortcuts:[{keys:["Alt",""],text:this.$t("keyboard.altleft")},{keys:["Alt",""],text:this.$t("keyboard.altup")},{keys:["Alt",""],text:this.$t("keyboard.altright")},{keys:["Alt",""],text:this.$t("keyboard.altdown")}]},{label:"keyboard.playlist_navigation",shortcuts:[{keys:["Alt","j"],text:this.$t("keyboard.altj")},{keys:["Alt","k"],text:this.$t("keyboard.altk")}]},{label:"keyboard.annotations",shortcuts:[{keys:["Ctrl","z"],text:this.$t("keyboard.undo")},{keys:["Alt","r"],text:this.$t("keyboard.redo")},{keys:["Alt","d"],text:this.$t("keyboard.draw")},{keys:["Suppr"],text:this.$t("keyboard.remove_annotation")}]}]}},mounted:function(){this.reset()},computed:Object(c["a"])({},Object(l["c"])([])),methods:Object(c["a"])(Object(c["a"])({},Object(l["b"])(["loadShotHistory"])),{},{reset:function(){},formatDate:function(e){}})},ns=is,as=(s("3c99"),Object(_["a"])(ns,ts,ss,!1,null,"8f3219b2",null)),os=as.exports,rs=s("9224"),cs={name:"topbar",components:{Combobox:$e["a"],ChevronLeftIcon:ae["g"],NotificationBell:Jt,PeopleName:es["a"],PeopleAvatar:Zt["a"],ShortcutModal:os},data:function(){return{currentProductionId:this.$route.params.production_id,currentEpisodeId:this.$route.params.episode_id,currentProjectSection:this.isCurrentUserClient?"playlists":"assets",kitsuVersion:rs["a"],silent:!1,display:{shortcutModal:!1}}},mounted:function(){var e=this.$refs["user-menu"],t=this.$refs["user-name"];if(t){var s=t.clientWidth;s>100&&(e.style.width="".concat(s,"px"),t.style.width="".concat(s,"px"))}this.currentProjectSection=this.getCurrentSectionFromRoute(),this.setProductionFromRoute()},computed:Object(c["a"])(Object(c["a"])({},Object(l["c"])(["assetsPath","currentEpisode","currentProduction","episodes","episodeOptions","isCurrentUserArtist","isCurrentUserAdmin","isCurrentUserClient","isCurrentUserVendor","isDarkTheme","isSidebarHidden","isUserMenuHidden","isTVShow","isNewNotification","lastProductionScreen","lastProductionViewed","openProductions","openProductionOptions","productionMap","user"])),{},{assetSections:function(){return["assets","assetTypes","playlists"]},currentEpisodeOptions:function(){return this.assetSections.includes(this.currentProjectSection)||["playlists"].includes(this.currentProjectSection)?[{label:this.$t("main.all_assets"),value:"all"},{label:"Main Pack",value:"main"}].concat(this.episodeOptions):this.episodeOptions},isShotPage:function(){return this.$route.params.episode_id},isProductionContext:function(){return void 0!==this.$route.params.production_id||this.$route.path.indexOf("tasks")>0},isEpisodeContext:function(){return this.isTVShow&&this.isShotPage&&this.episodes.length>0},lastProduction:function(){var e=this.productionMap[this.lastProductionViewed];return e||(e=this.currentProduction),e},lastSectionPath:function(){var e=this.lastProduction,t=this.lastProductionScreen,s={name:t,params:{production_id:e.id}};return"tvshow"===e.production_type&&(s.name="episode-".concat(t),s.params.episode_id=e.first_episode_id),s},sectionOptions:function(){var e=[{label:this.$t("assets.title"),value:"assets"},{label:this.$t("shots.title"),value:"shots"},{label:this.$t("sequences.title"),value:"sequences"},{label:this.$t("episodes.title"),value:"episodes"},{label:this.$t("asset_types.production_title"),value:"assetTypes"},{label:this.$t("playlists.title"),value:"playlists"}];if(this.isCurrentUserClient){var t=e.pop();e=[t].concat(e)}else e=e.concat([{label:this.$t("news.title"),value:"newsFeed"},{label:this.$t("breakdown.title"),value:"breakdown"},{label:this.$t("schedule.title"),value:"schedule"},{label:this.$t("quota.title"),value:"quota"},{label:this.$t("people.team"),value:"team"}]),this.isCurrentUserAdmin&&(e=e.concat([{label:this.$t("settings.title"),value:"production-settings"}]));return this.isCurrentUserVendor&&(e=[{label:this.$t("assets.title"),value:"assets"},{label:this.$t("shots.title"),value:"shots"},{label:this.$t("sequences.title"),value:"sequences"},{label:this.$t("episodes.title"),value:"episodes"},{label:this.$t("asset_types.production_title"),value:"assetTypes"}]),this.isTVShow||this.isCurrentUserClient?this.isTVShow||e.splice(4,1):e.splice(3,1),e}}),methods:Object(c["a"])(Object(c["a"])({},Object(l["b"])(["clearEpisodes","loadEpisodes","loadMilestones","incrementNotificationCounter","logout","setProduction","setCurrentEpisode","toggleDarkTheme","toggleSidebar","toggleUserMenu"])),{},{onLogoutClicked:function(){var e=this;this.logout((function(t,s){e.$socket.disconnect(),t&&console.error(t),e.toggleUserMenu(),s&&e.$router.push("/login")}))},getCurrentSectionFromRoute:function(){var e="",t=this.$route.path.split("/");return this.isTVShow&&(e=t[5]),e||(e=t[3],"episodes"===e&&6===t.length&&(e=t[5])),"asset-types"===e&&(e="assetTypes"),"news-feed"===e&&(e="newsFeed"),e},updateContext:function(e){e?this.setProductionFromRoute():this.clearContext()},clearContext:function(){this.silent=!0,this.currentProductionId=null,this.currentProjectSection=null,this.isTVShow||(this.setCurrentEpisode(null),this.currentEpisodeId=null),this.setProduction(null),this.silent=!1},setProductionFromRoute:function(){var e=this.$route.params.production_id,t=this.$route.params.episode_id;this.isProductionChanged(e)?this.configureProduction(e):this.isEpisodeChanged(t)?this.configureEpisode(t):this.updateCombosFromRoute()},configureProduction:function(e){var t=this;this.setProduction(e),this.isTVShow?this.loadEpisodes().then((function(e){t.updateCombosFromRoute()})).catch(console.error):(this.clearEpisodes(),this.updateCombosFromRoute())},configureEpisode:function(e){var t=this;this.episodes.length<2?this.loadEpisodes().then((function(e){t.setEpisodeFromRoute(),t.updateCombosFromRoute()})).catch(console.error):(this.setEpisodeFromRoute(),this.updateCombosFromRoute())},isProductionChanged:function(e){return!this.currentProduction||this.currentProductionId!==e||this.currentProduction.id!==e},isEpisodeChanged:function(e){return this.isTVShow&&(!this.currentEpisode||this.currentEpisodeId!==e||this.currentEpisode.id!==e)},setEpisodeFromRoute:function(){var e=this.$route.params.episode_id;this.isEpisodeChanged(e)?e&&this.isTVShow&&this.setCurrentEpisode(e):e||(this.silent=!0,this.clearEpisodes(),this.currentEpisodeId=null,this.silent=!1)},updateCombosFromRoute:function(){var e=this,t=this.$route.params.production_id,s=this.$route.params.episode_id,i=this.getCurrentSectionFromRoute();this.silent=!0,this.currentProductionId=t,this.currentProjectSection=i,this.currentProjectSection=null,this.$nextTick((function(){e.currentProjectSection=i,e.currentEpisodeId=null,e.$nextTick((function(){e.currentEpisodeId=s,e.silent=!1}))}))},updateRoute:function(){if(!this.silent){var e=this.$route.params.production_id,t=this.$route.params.episode_id,s=this.getCurrentSectionFromRoute(),i=this.currentProjectSection,n=i&&this.$route.path.indexOf("manage")<0,a=i!==s||e!==this.currentProductionId||this.currentEpisodeId&&t&&t!==this.currentEpisodeId;n&&a&&("newsFeed"===i&&(i="news-feed"),"assetTypes"===i&&(i="production-asset-types"),this.pushContextRoute(i))}},pushContextRoute:function(e){var t=this.assetSections.includes(e),s=this.productionMap[this.currentProductionId],i="tvshow"===s.production_type,n=this.currentEpisodeId;!n&&i&&(n=t?"all":this.episodes.length>0?this.episodes[0].id:s.first_episode_id);var a={name:e,params:{production_id:this.currentProductionId}};a=this.episodifyRoute(a,e,n,i),a&&a.params.production_id&&this.$router.push(a)},episodifyRoute:function(e,t,s,i){var n=i&&"team"!==t&&"news-feed"!==t&&"schedule"!==t&&"production-settings"!==t&&"episodes"!==t;return n?(e.name="episode-".concat(t),e.params.episode_id=s):"episodes"!==t||i||(e.name=this.isCurrentUserClient?"playlists":"assets"),e},resetEpisodeForTVShow:function(){var e=this.currentProjectSection||this.getCurrentSectionFromRoute(),t=this.assetSections.includes(e),s=["all","main"].includes(this.currentEpisodeId),i=this.productionMap[this.currentProductionId];if(i){var n="tvshow"===i.production_type;s&&(t||(this.currentEpisodeId=this.episodes.length>0?this.episodes[0].id:null)),n?t&&!this.currentEpisodeId?(this.currentEpisodeId="all",this.setCurrentEpisode(this.currentEpisodeId)):this.currentEpisode?!this.currentEpisodeId&&this.currentEpisode&&(this.currentEpisodeId=this.currentEpisode.id):(this.currentEpisodeId||(this.episodes.length>0?this.currentEpisodeId=this.episodes[0].id:this.currentEpisodeId=i.first_episode_id),this.setCurrentEpisode(this.currentEpisodeId)):this.currentEpisodeId=null}}}),watch:{$route:function(){var e=this.$route.params.production_id;e&&this.updateContext(e)},currentProductionId:function(){this.updateRoute(),this.resetEpisodeForTVShow(),this.currentProduction.isTVShow&&this.loadEpisodes().catch(console.error)},currentProjectSection:function(){this.silent||(this.resetEpisodeForTVShow(),this.updateRoute())},currentEpisodeId:function(){this.silent||this.updateRoute()},currentEpisode:function(){this.currentEpisode?this.currentEpisodeId!==this.currentEpisode.id&&(this.currentEpisodeId=this.currentEpisode.id):this.currentEpisodeId=null},currentProduction:function(){var e=this;this.$nextTick((function(){e.loadMilestones()}))}},socket:{events:{"notification:new":function(e){this.user.id===e.person_id&&"notifications"!==this.$route.name&&this.incrementNotificationCounter()},"person:update":function(e){this.user.id===e.person_id&&this.$refs.avatar.reloadAvatar()}}}},ls=cs,ds=(s("ceb9"),Object(_["a"])(ls,Ht,Gt,!1,null,"6cdebfee",null)),us=ds.exports,ps=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{class:{"action-topbar":!0,hidden:e.isHidden}},[s("div",{staticClass:"flexrow action-bar"},[s("div",{staticClass:"flexrow-item more-menu-icon",on:{click:e.toggleMenu}},[s("div",{staticClass:"flexrow"},[s("span",{staticClass:"flexrow-item hide-small-screen"},[e._v(" "+e._s(e.currentMenuLabel)+" ")]),s("chevron-down-icon",{staticClass:"flexrow-item"})],1)]),"assignation"===e.selectedBar?s("div",{staticClass:"flexrow-item"},[e.isCurrentUserManager?s("div",{staticClass:"flexrow"},[s("div",{staticClass:"assignation flexrow-item hide-small-screen"},[e._v(" "+e._s(e.$tc("tasks.assign",e.nbSelectedTasks,{nbSelectedTasks:e.nbSelectedTasks}))+" ")]),s("div",{staticClass:"flexrow-item combobox-item"},[s("people-field",{ref:"assignation-field",attrs:{people:e.currentTeam},model:{value:e.person,callback:function(t){e.person=t},expression:"person"}})],1),e.isAssignationLoading?s("div",{},[s("spinner",{attrs:{"is-white":!0,size:25}})],1):e._e(),e.isAssignationLoading?e._e():s("div",{staticClass:"flexrow-item"},[s("button",{staticClass:"button is-success confirm-button",on:{click:e.confirmAssign}},[e._v(" "+e._s(e.$t("main.confirmation"))+" ")])]),e.isAssignationLoading?e._e():s("div",{staticClass:"flexrow-item hide-small-screen"},[e._v(" "+e._s(e.$t("main.or"))+" ")]),e.isAssignationLoading?e._e():s("div",{staticClass:"flexrow-item hide-small-screen"},[s("button",{staticClass:"button is-link clear-assignation-button hide-small-screen",on:{click:e.clearAssignation}},[e._v(" "+e._s(e.$t("tasks.clear_assignations"))+" ")])])]):s("div",{staticStyle:{"padding-left":"1em"}},[e._v(" "+e._s(e.$t("tasks.no_assignation_right"))+" ")])]):e._e(),"change-status"===e.selectedBar?s("div",{staticClass:"flexrow-item"},[s("div",{staticClass:"flexrow"},[s("div",{staticClass:"flexrow-item strong bigger hide-small-screen"},[e._v(" "+e._s(e.$t("tasks.change_status_to"))+" ")]),s("div",{staticClass:"flexrow-item"},[s("combobox-status",{attrs:{"task-status-list":e.taskStatusForCurrentUser},model:{value:e.taskStatusId,callback:function(t){e.taskStatusId=t},expression:"taskStatusId"}})],1),e.isChangeStatusLoading?e._e():s("div",{staticClass:"flexrow-item"},[s("button",{staticClass:"button is-success confirm-button",on:{click:e.confirmTaskStatusChange}},[e._v(" "+e._s(e.$t("main.confirmation"))+" ")])]),e.isChangeStatusLoading?s("div",{staticClass:"flexrow-item"},[s("spinner",{attrs:{"is-white":!0}})],1):e._e(),e.isChangeStatusLoading?e._e():s("div",{staticClass:"flexrow-item"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.statusComment,expression:"statusComment"}],staticClass:"comment-text input",attrs:{type:"text",placeholder:e.$t("tasks.with_comment")},domProps:{value:e.statusComment},on:{keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.ctrlKey?e.confirmTaskStatusChange(t):null},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.metaKey?e.confirmTaskStatusChange(t):null}],input:function(t){t.target.composing||(e.statusComment=t.target.value)}}})])])]):e._e(),"priorities"===e.selectedBar?s("div",{staticClass:"flexrow-item"},[s("div",{staticClass:"flexrow"},[s("div",{staticClass:"flexrow-item strong bigger hide-small-screen"},[e._v(" "+e._s(e.$t("tasks.change_priority"))+" ")]),s("div",{staticClass:"flexrow-item priority-combobox"},[s("combobox",{attrs:{options:e.priorityOptions},model:{value:e.priority,callback:function(t){e.priority=t},expression:"priority"}})],1),e.isChangePriorityLoading?e._e():s("div",{staticClass:"flexrow-item"},[s("button",{staticClass:"button is-success confirm-button",on:{click:e.confirmPriorityChange}},[e._v(" "+e._s(e.$t("main.confirmation"))+" ")])]),e.isChangePriorityLoading?s("div",{staticClass:"flexrow-item"},[s("spinner",{attrs:{"is-white":!0}})],1):e._e()])]):e._e(),"tasks"===e.selectedBar?s("div",{staticClass:"flexrow-item"},[s("div",{staticClass:"flexrow"},[s("div",{staticClass:"flexrow-item strong bigger hide-small-screen"},[e._v(" "+e._s(e.$t("tasks.create_for_selection"))+" ")]),e.isCreationLoading?s("div",{staticClass:"flexrow-item"},[s("spinner",{attrs:{"is-white":!0}})],1):s("div",{staticClass:"flexrow-item"},[s("button",{staticClass:"button is-success confirm-button",on:{click:e.confirmTaskCreation}},[e._v(" "+e._s(e.$t("main.confirmation"))+" ")])])])]):e._e(),"playlists"===e.selectedBar?s("div",{staticClass:"flexrow-item"},[s("div",{staticClass:"flexrow"},[s("div",{staticClass:"flexrow-item strong bigger hide-small-screen"},[e._v(" "+e._s(e.$t("playlists.create_for_selection"))+" ")]),s("div",{staticClass:"flexrow-item"},[s("button",{staticClass:"button is-success confirm-button",on:{click:e.confirmPlaylistGeneration}},[e._v(" "+e._s(e.$t("main.confirmation"))+" ")])])])]):e._e(),"delete-tasks"===e.selectedBar?s("div",{staticClass:"flexrow-item"},[s("div",{staticClass:"flexrow"},[s("div",{staticClass:"flexrow-item strong bigger hide-small-screen"},[e._v(" "+e._s(e.$t("tasks.delete_for_selection"))+" ")]),e.isDeletionLoading?s("div",{staticClass:"flexrow-item"},[s("spinner",{attrs:{"is-white":!0}})],1):s("div",{staticClass:"flexrow-item"},[s("button",{staticClass:"button is-danger confirm-button",on:{click:e.confirmTaskDeletion}},[e._v(" "+e._s(e.$t("main.confirmation"))+" ")])]),e.errors.deleteTask?s("div",{staticClass:"flexrow-item error"},[e._v(" "+e._s(e.$t("tasks.delete_error"))+" ")]):e._e()])]):e._e(),"custom-actions"===e.selectedBar?s("div",{staticClass:"flexrow-item"},[s("div",{staticClass:"flexrow"},[s("div",{staticClass:"flexrow-item strong bigger hide-small-screen"},[e._v(" "+e._s(e.$t("custom_actions.run_for_selection"))+" ")]),s("div",{staticClass:"flexrow-item combobox-item"},[s("combobox-model",{attrs:{models:e.customActions},model:{value:e.customAction,callback:function(t){e.customAction=t},expression:"customAction"}})],1),e.customAction&&!e.customAction.is_ajax?s("div",{staticClass:"flexrow-item"},[s("form",{attrs:{target:"_blank",method:"POST",action:e.customAction.url}},[s("input",{attrs:{type:"hidden",id:"personid",name:"personid"},domProps:{value:e.user.id}}),s("input",{attrs:{type:"hidden",id:"personemail",name:"personemail"},domProps:{value:e.user.email}}),s("input",{attrs:{type:"hidden",id:"projectid",name:"projectid"},domProps:{value:e.currentProduction?e.currentProduction.id:null}}),s("input",{attrs:{type:"hidden",id:"currentpath",name:"currentpath"},domProps:{value:e.currentUrl}}),s("input",{attrs:{type:"hidden",id:"currentserver",name:"currentserver"},domProps:{value:e.currentHost}}),s("input",{attrs:{type:"hidden",id:"selection",name:"selection"},domProps:{value:e.selectedTaskIds}}),s("input",{attrs:{type:"hidden",id:"entitytype",name:"entitytype"},domProps:{value:e.currentEntityType}}),s("button",{staticClass:"button is-success",attrs:{type:"submit"}},[e._v(" "+e._s(e.$t("main.confirmation"))+" ")])])]):s("div",{staticClass:"flexrow-item"},[s("button",{staticClass:"button is-success",on:{click:e.runCustomAction}},[e._v(" "+e._s(e.$t("main.confirmation"))+" ")])])])]):e._e(),s("div",{staticClass:"flexrow-item clear-selection-container has-text-right"},[s("div",{staticClass:"flexrow has-text-right"},[s("div",{staticStyle:{flex:"1"}}),s("notification-bell",{staticClass:"flexrow-item",attrs:{"is-white":!0}}),s("div",{staticClass:"clear-selection flexrow flexrow-item",on:{click:e.clearSelectedTasks}},[s("x-icon",{staticClass:"flexrow-item"}),s("span",{staticClass:"flexrow-item hide-small-screen"},[e._v(" "+e._s(e.$t("main.clear_selection"))+" ")])],1)],1)])]),s("div",{ref:"moreMenu",class:{"more-menu":!0,"is-hidden":e.isMoreMenuDisplayed}},[(e.isCurrentViewAsset||e.isCurrentViewShot)&&e.isCurrentUserManager?s("div",{staticClass:"more-menu-item",on:{click:function(t){return e.selectBar("assignation")}}},[e._v(" "+e._s(e.$t("menu.assign_tasks"))+" ")]):e._e(),e.isCurrentUserManager?s("div",{staticClass:"more-menu-item",on:{click:function(t){return e.selectBar("change-status")}}},[e._v(" "+e._s(e.$t("menu.change_status"))+" ")]):e._e(),(e.isCurrentViewAsset||e.isCurrentViewShot||e.isCurrentViewPerson)&&e.isCurrentUserManager?s("div",{staticClass:"more-menu-item",on:{click:function(t){return e.selectBar("priorities")}}},[e._v(" "+e._s(e.$t("menu.change_priority"))+" ")]):e._e(),(e.isCurrentViewAsset||e.isCurrentViewShot)&&!e.isCurrentViewTaskType&&e.isCurrentUserManager?s("div",{staticClass:"more-menu-item",on:{click:function(t){return e.selectBar("tasks")}}},[e._v(" "+e._s(e.$t("menu.create_tasks"))+" ")]):e._e(),e.isCurrentViewAsset||e.isCurrentViewShot||e.isCurrentViewTaskType?s("div",{staticClass:"more-menu-item",on:{click:function(t){return e.selectBar("playlists")}}},[e._v(" "+e._s(e.$t("menu.generate_playlists"))+" ")]):e._e(),(e.isCurrentViewAsset||e.isCurrentViewShot)&&e.isCurrentUserManager?s("div",{staticClass:"more-menu-item",on:{click:function(t){return e.selectBar("delete-tasks")}}},[e._v(" "+e._s(e.$t("menu.delete_tasks"))+" ")]):e._e(),!e.isCurrentViewTaskType&&e.isCurrentUserManager?s("div",{staticClass:"more-menu-item",on:{click:function(t){return e.selectBar("custom-actions")}}},[e._v(" "+e._s(e.$t("menu.run_custom_action"))+" ")]):e._e()])]),s("div",{class:{"menu-mask":!0,"is-hidden":e.isMoreMenuDisplayed},on:{click:e.toggleMenu}}),s("view-playlist-modal",{attrs:{active:e.modals.playlist,"task-ids":e.selectedTaskIds},on:{cancel:e.hidePlaylistModal}})],1)},hs=[],ms=(s("c740"),s("a9e3"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("combobox",{attrs:{label:e.label,disabled:e.disabled,options:e.modelOptions,value:e.currentModelId},on:{input:e.emitValue,enter:e.emitEnter}})}),fs=[],_s={name:"combobox-model",components:{Combobox:$e["a"]},props:{label:{default:"",type:String},value:{default:function(){},type:Object},models:{default:function(){return[]},type:Array},disabled:{default:!1,type:Boolean}},data:function(){return{currentModelId:"",modelMap:{},modelOptions:[]}},mounted:function(){this.reset()},computed:{},methods:{emitValue:function(e){this.currentModelId=e;var t=this.modelMap[this.currentModelId];this.$emit("input",t)},emitEnter:function(e){this.currentModelId=e;var t=this.modelMap[this.currentModelId];this.$emit("enter",t)},reset:function(){var e=this;this.models.length>0&&(this.currentModelId=this.models[0].id,this.modelMap={},this.modelOptions=this.models.map((function(e){return{label:e.name,value:e.id}})),this.models.forEach((function(t){e.modelMap[t.id]=t})))}},watch:{models:function(){this.reset()}}},vs=_s,gs=Object(_["a"])(vs,ms,fs,!1,null,"7a8e9a6c",null),ys=gs.exports,bs=s("56a0"),ks=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{dark:!0,modal:!0,"is-active":e.active},attrs:{id:"temp-playlist-modal"}},[s("div",{staticClass:"modal-background",on:{click:function(t){return e.$emit("cancel")}}}),s("div",{staticClass:"modal-content wide"},[s("div",{staticClass:"box"},[e.isPlaylistPage?e._e():s("playlist-player",{ref:"playlist-player",attrs:{playlist:e.currentPlaylist,entities:e.currentEntities,"is-loading":e.isLoading,"temp-mode":!0,"is-asset-playlist":e.isAssetPlaylist},on:{"save-clicked":e.onSaveClicked,annotationchanged:e.onAnnotationChanged}})],1)]),s("edit-playlist-modal",{attrs:{active:e.modals.edit,"is-loading":e.loading.edit,"is-error":e.errors.edit,"playlist-to-edit":e.playlistToEdit,"type-disabled":!0},on:{confirm:e.savePlaylist,cancel:function(t){e.modals.edit=!1}}})],1)},ws=[],Cs=(s("07ac"),s("d49e")),Ss=s("1ea9"),Ts={name:"view-playlist-modal",mixins:[Me["a"]],components:{EditPlaylistModal:Cs["a"],PlaylistPlayer:Ss["a"]},props:{active:{default:!1,type:Boolean}},data:function(){return{currentEntities:{},currentPlaylist:{id:"temp",name:"Temporary playlist",shots:[],for_entity:"shot"},errors:{edit:!1},loading:{edit:!1},modals:{edit:!1},playlistToEdit:{},isLoading:!1}},computed:Object(c["a"])(Object(c["a"])({},Object(l["c"])(["currentEpisode","currentProduction","isTVShow","selectedTasks","shotMap","taskMap"])),{},{isPlaylistPage:function(){return this.$route.path.indexOf("playlist")>0},taskIds:function(){return Object.keys(this.selectedTasks)},playlistPlayer:function(){return this.$refs["playlist-player"]},isAssetPlaylist:function(){return this.currentPlaylist.shots.length>0&&void 0===this.currentPlaylist.shots[0].sequence_name}}),methods:Object(c["a"])(Object(c["a"])({},Object(l["b"])(["editPlaylist","loadPlaylists","loadTempPlaylist","newPlaylist","updatePreviewAnnotation"])),{},{onAnnotationChanged:function(e){var t=e.preview,s=e.annotations,i=t.task_id;this.updatePreviewAnnotation({taskId:i,preview:t,annotations:s})},setupEntities:function(e){var t={};e.forEach((function(e){t[e.id]=e})),this.currentPlaylist.shots=Object.values(t),this.currentEntities=t},initPlaylistPlayer:function(){this.playlistPlayer.setupFabricCanvas()},onSaveClicked:function(){this.errors.editPlaylist=!1,this.playlistToEdit={for_entity:this.isAssetPlaylist?"asset":"shot"},this.modals.edit=!0},savePlaylist:function(e){var t=this,s={name:e.name,production_id:this.currentProduction.id,for_client:e.for_client,for_entity:e.for_entity,is_for_all:e.is_for_all};this.isTVShow&&this.currentEpisode&&(s.episode_id=this.currentEpisode.id),this.errors.edit=!1,this.loading.edit=!0,this.newPlaylist(s).then((function(e){Object.assign(t.currentPlaylist,{id:e.id,name:e.name,for_client:e.for_client,for_entity:e.for_entity,is_for_all:e.is_for_all}),t.editPlaylist({data:t.currentPlaylist,callback:function(e){e?t.errors.edit=!0:t.modals.edit=!1,t.loading.edit=!1,t.loadPlaylists()}})})).catch((function(e){console.error(e),t.errors.edit=!0}))}}),watch:{active:function(){var e=this;this.active?(this.currentEntities={},this.initPlaylistPlayer(),this.isLoading=!0,this.loadTempPlaylist(this.taskIds).then((function(t){e.setupEntities(t),e.isLoading=!1,e.isAssetPlaylist?e.currentPlaylist.for_entity="asset":e.currentPlaylist.for_entity="shot"})).catch(console.error)):(this.playlistPlayer.pause(),this.currentEntities={})}}},xs=Ts,Es=(s("5c0c"),Object(_["a"])(xs,ks,ws,!1,null,"6ed0cf16",null)),Ps=Es.exports,Os=s("9616"),As={name:"action-topbar",components:{ChevronDownIcon:ae["f"],Combobox:$e["a"],ComboboxModel:ys,ComboboxStatus:bs["a"],NotificationBell:Jt,PeopleField:Os["a"],Spinner:d["a"],XIcon:ae["W"],ViewPlaylistModal:Ps},data:function(){return{currentTeam:[],customAction:{},customActions:[],isAssignationLoading:!1,isChangePriorityLoading:!1,isChangeStatusLoading:!1,isCreationLoading:!1,isDeletionLoading:!1,isMoreMenuDisplayed:!0,person:null,priority:"0",selectedBar:"assignation",selectedTaskIds:[],taskStatusId:"",statusComment:"",modals:{playlist:!1},priorityOptions:[{label:this.$t("tasks.priority.normal"),value:"0"},{label:this.$t("tasks.priority.high"),value:"1"},{label:this.$t("tasks.priority.very_high"),value:"2"},{label:this.$t("tasks.priority.emergency"),value:"3"}],errors:{deleteTask:!1}}},computed:Object(c["a"])(Object(c["a"])({},Object(l["c"])(["allCustomActions","assetMap","assetCustomActions","currentProduction","getPersonOptions","isCurrentUserManager","nbSelectedTasks","nbSelectedValidations","organisation","people","personMap","selectedTasks","shotCustomActions","taskStatusForCurrentUser","user"])),{},{isHidden:function(){return 0===this.nbSelectedTasks&&0===this.nbSelectedValidations||!(this.isCurrentViewAsset||this.isCurrentViewTodos||this.isCurrentViewShot)},currentUrl:function(){return this.$route.path},currentHost:function(){return window.location.host},currentEntityType:function(){return this.isCurrentViewAsset?"asset":"shot"},defaultCustomAction:function(){return this.customActions.length>0?this.customActions[0]:{}},isCurrentViewAsset:function(){return this.$route.path.indexOf("asset")>0&&!this.$route.params.asset_id},isCurrentViewShot:function(){return this.$route.path.indexOf("shot")>0&&!this.$route.params.shot_id},isCurrentViewTodos:function(){return this.$route.path.indexOf("todos")>0||this.$route.path.indexOf("people/")>0},isCurrentViewPerson:function(){return this.$route.path.indexOf("people/")>0},isCurrentViewPersonTasks:function(){return this.$route.path.indexOf("todos")>0},isCurrentViewTaskType:function(){return this.$route.path.indexOf("task-type")>0},isList:function(){return this.isCurrentViewAsset||this.isCurrentViewShot},selectedPersonId:function(){return this.person?this.person.id:null},currentProductionTeam:function(){return this.currentProduction?this.currentProduction.team:[]},currentMenuLabel:function(){var e={assignation:"menu.assign_tasks","change-status":"menu.change_status",priorities:"menu.change_priority",playlists:"menu.generate_playlists",tasks:"menu.create_tasks","delete-tasks":"menu.delete_tasks","custom-actions":"menu.run_custom_action"};return this.$t(e[this.selectedBar])},storagePrefix:function(){var e="todos-";return(this.isCurrentViewAsset||this.isCurrentViewShot)&&(e="entities-"),this.isCurrentViewTaskType&&(e="tasks-"),e}}),methods:Object(c["a"])(Object(c["a"])({},Object(l["b"])(["assignSelectedTasks","createSelectedTasks","deleteSelectedTasks","unassignSelectedTasks","changeSelectedTaskStatus","changeSelectedPriorities","clearSelectedTasks","postCustomAction"])),{},{confirmAssign:function(){var e=this;this.selectedPersonId&&(this.isAssignationLoading=!0,this.assignSelectedTasks({personId:this.selectedPersonId,callback:function(){e.isAssignationLoading=!1}}))},confirmTaskStatusChange:function(){var e=this;this.isChangeStatusLoading=!0,this.taskStatusId||(this.taskStatusId=this.taskStatusForCurrentUser[0].id),this.changeSelectedTaskStatus({taskStatusId:this.taskStatusId,comment:this.statusComment}).then((function(){e.statusComment="",e.isChangeStatusLoading=!1})).catch((function(t){console.error(t),e.isChangeStatusLoading=!1}))},confirmPriorityChange:function(){var e=this;this.isChangePriorityLoading=!0,this.changeSelectedPriorities({priority:Number(this.priority),callback:function(){e.isChangePriorityLoading=!1}})},confirmTaskCreation:function(){var e=this,t=this.$route.path.indexOf("shots")>0?"shots":"assets";this.isCreationLoading=!0,this.createSelectedTasks({type:t,projectId:this.currentProduction.id}).then((function(){e.isCreationLoading=!1})).catch((function(t){e.isCreationLoading=!1,console.error(t)}))},confirmTaskDeletion:function(){var e=this;this.isDeletionLoading=!0,this.errors.deleteTask=!1,this.deleteSelectedTasks().then((function(){e.isDeletionLoading=!1})).catch((function(t){console.error(t),e.isDeletionLoading=!1,e.errors.deleteTask=!0}))},confirmPlaylistGeneration:function(){this.modals.playlist=!0},hidePlaylistModal:function(){this.modals.playlist=!1},clearAssignation:function(){var e=this;this.isAssignationLoading=!0,this.unassignSelectedTasks({callback:function(){e.isAssignationLoading=!1}})},selectBar:function(e){localStorage.setItem("".concat(this.storagePrefix,"-selected-bar"),e,{expires:"1M"}),this.selectedBar=e,this.toggleMenu()},toggleMenu:function(){this.isMoreMenuDisplayed=!this.isMoreMenuDisplayed},setCurrentTeam:function(){var e=this;return this.people.length>10&&this.currentProduction?this.currentTeam=Object(Z["f"])(this.currentProduction.team.map((function(t){return e.personMap[t]}))):this.currentTeam=this.people,this.currentTeam},runCustomAction:function(){this.postCustomAction({data:{entitytype:this.currentEntityType,originurl:this.currentUrl,originserver:this.currentHost,selection:this.selectedTaskIds,productionid:this.currentProduction.id,userid:this.user.id,useremail:this.user.email},url:this.customAction.url})},onKeyDown:function(e){27===e.keyCode&&(this.modals.playlist||this.$store.commit("CLEAR_SELECTED_TASKS"))}}),mounted:function(){this.customAction=this.defaultCustomAction,this.setCurrentTeam()},watch:{isHidden:function(){if(this.isHidden)window.removeEventListener("keydown",this.onKeyDown);else{window.addEventListener("keydown",this.onKeyDown);var e=this.storagePrefix,t=localStorage.getItem("".concat(e,"-selected-bar"));t?this.selectedBar=t:this.isCurrentViewAsset||this.isCurrentViewShot?this.selectedBar="assignation":this.selectedBar="change-status"}},nbSelectedTasks:function(){var e=this;if(this.selectedTaskIds=Object.keys(this.selectedTasks),this.nbSelectedTasks>0){for(var t=!1,s=!1,i=0,n=Object.keys(this.selectedTasks);i<n.length;i++){var a=n[i],o=this.selectedTasks[a];o.sequence_name?t=!0:s=!0}if(this.customActions=t&&s?this.allCustomActions:t?this.shotCustomActions:this.assetCustomActions,this.customActions.length>0){var r=this.customAction.url&&this.customActions.findIndex((function(t){return t.id===e.customAction.id}))>=0;r||(this.customAction=this.customActions[0])}}},selectedBar:function(){var e=this;"assignation"===this.selectedBar&&this.$nextTick((function(){e.$refs["assignation-field"].focus()}))},currentProduction:function(){this.setCurrentTeam()},currentProductionTeam:function(){this.setCurrentTeam()},people:function(){this.setCurrentTeam()},$route:function(){this.selectedTaskIds=Object.keys(this.selectedTasks),this.nbSelectedTasks>0&&this.clearSelectedTasks()}}},js=As,Ds=(s("dd6e"),Object(_["a"])(js,ps,hs,!1,null,"5faa40b7",null)),Ms=Ds.exports,Is=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"navbar"},[i("aside",{class:{hidden:e.isSidebarHidden}},[i("div",[i("router-link",{staticClass:"home-link",attrs:{to:"/"},on:{click:function(t){return e.toggleSidebar()}}},[i("div",{staticClass:"company-logo has-text-centered"},[e.organisation&&e.organisation.has_avatar?i("img",{attrs:{src:e.logoPath}}):i("img",{attrs:{src:s("ad6c")}})])]),i("section",[e.isCurrentUserClient?e._e():i("div",[i("h2",[e._v(e._s(e.$t("main.user")))]),i("p",{on:{click:function(t){return e.toggleSidebar()}}},[i("router-link",{attrs:{to:{name:"todos"}}},[e._v(" "+e._s(e.$t("tasks.my_tasks"))+" ")])],1),i("p",{on:{click:function(t){return e.toggleSidebar()}}},[i("router-link",{attrs:{to:{name:"open-productions"}}},[e._v(" "+e._s(e.$t("productions.open_productions"))+" ")])],1)]),e.isCurrentUserClient||e.isCurrentUserVendor?e._e():i("div",[i("h2",[e._v(e._s(e.$t("main.studio")))]),e.isCurrentUserAdmin?i("p",{on:{click:function(t){return e.toggleSidebar()}}},[i("router-link",{attrs:{to:{name:"productions"}}},[e._v(" "+e._s(e.$t("productions.title"))+" ")])],1):e._e(),e.isCurrentUserAdmin?i("p",{on:{click:function(t){return e.toggleSidebar()}}},[i("router-link",{attrs:{to:{name:"people"}}},[e._v(" "+e._s(e.$t("people.title"))+" ")])],1):e._e(),i("p",{on:{click:function(t){return e.toggleSidebar()}}},[i("router-link",{attrs:{to:{name:"timesheets"}}},[e._v(" "+e._s(e.$t("timesheets.title"))+" ")])],1),e.isCurrentUserAdmin?i("p",{on:{click:function(t){return e.toggleSidebar()}}},[i("router-link",{attrs:{to:{name:"main-schedule"}}},[e._v(" "+e._s(e.$t("schedule.title_main"))+" ")])],1):e._e()]),e.isCurrentUserAdmin?i("div",[i("h2",[e._v(e._s(e.$t("main.admin")))]),i("p",{on:{click:function(t){return e.toggleSidebar()}}},[i("router-link",{attrs:{to:"/task-types"}},[e._v(" "+e._s(e.$t("task_types.title"))+" ")])],1),i("p",{on:{click:function(t){return e.toggleSidebar()}}},[i("router-link",{staticClass:"task-status-link",attrs:{to:"/task-status"}},[e._v(" "+e._s(e.$t("task_status.title"))+" ")])],1),i("p",{on:{click:function(t){return e.toggleSidebar()}}},[i("router-link",{attrs:{to:"/asset-types"}},[e._v(" "+e._s(e.$t("asset_types.title"))+" ")])],1),i("p",{on:{click:function(t){return e.toggleSidebar()}}},[i("router-link",{attrs:{to:{name:"custom-actions"}}},[e._v(" "+e._s(e.$t("custom_actions.title"))+" ")])],1),i("p",{on:{click:function(t){return e.toggleSidebar()}}},[i("router-link",{attrs:{to:{name:"settings"}}},[e._v(" "+e._s(e.$t("settings.title"))+" ")])],1),i("p",{on:{click:function(t){return e.toggleSidebar()}}},[i("router-link",{attrs:{to:{name:"logs"}}},[e._v(" "+e._s(e.$t("logs.title"))+" ")])],1)]):e._e()])],1)]),i("div",{class:{"is-active":!e.isSidebarHidden},attrs:{id:"c-mask"},on:{click:function(t){return e.toggleSidebar()}}})])},$s=[],Ls={name:"sidebar",data:function(){return{title:"",logoPath:""}},mounted:function(){this.reset()},computed:Object(c["a"])({},Object(l["c"])(["isSidebarHidden","isCurrentUserAdmin","isCurrentUserClient","isCurrentUserManager","isCurrentUserVendor","organisation"])),methods:Object(c["a"])(Object(c["a"])({},Object(l["b"])(["toggleSidebar"])),{},{reset:function(){this.title=this.organisation.name,this.logoPath="/api/pictures/thumbnails/organisations/"+"".concat(this.organisation.id,".png?t=")+(new Date).toISOString()}}),watch:{organisation:function(){this.reset()}}},Fs=Ls,Ns=(s("7cc4"),Object(_["a"])(Fs,Is,$s,!1,null,"77a93da8",null)),qs=Ns.exports,Rs={name:"main-wrapper",components:{ActionTopbar:Ms,Topbar:us,Sidebar:qs},mounted:function(){this.$socket.connect()}},Bs=Rs,Vs=(s("c266"),Object(_["a"])(Bs,zt,Ut,!1,null,null,null)),zs=Vs.exports,Us=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"columns fixed-page"},[s("div",{staticClass:"column main-column"},[s("div",{staticClass:"notifications page"},[e.loading.notifications||e.notifications&&0!==e.notifications.length?e._e():s("div",{staticClass:"empty-list has-text-centered"},[e._v(" "+e._s(e.$t("notifications.no_notifications"))+" ")]),e.loading.notifications?s("div",{staticClass:"has-text-centered"},[s("spinner")],1):e._e(),e._l(e.notifications,(function(t){return s("div",{directives:[{name:"show",rawName:"v-show",value:!e.loading.notifications,expression:"!loading.notifications"}],key:t.id,class:{notification:!0,unread:!t.read,selected:t.id===e.currentNotificationId},on:{click:function(s){return e.onNotificationSelected(t)}}},[s("div",{staticClass:"flexrow notification-line"},[s("div",{staticClass:"flexrow-item"},[s("div",{staticClass:"flexrow"},[e.isMention(t)?s("at-sign-icon",{staticClass:"icon flexrow-item"}):e._e(),e.isComment(t)?s("message-square-icon",{staticClass:"icon flexrow-item"}):e._e(),e.isAssignation(t)?s("user-icon",{staticClass:"icon flexrow-item"}):e._e(),s("task-type-name",{staticClass:"task-type-name",attrs:{"task-type":e.buildTaskTypeFromNotification(t),"production-id":t.project_id}})],1),s("div",{staticClass:"mt1"},[t.change?s("validation-tag",{staticClass:"validation-tag flexrow-item mt1",attrs:{task:e.buildTaskFromNotification(t)}}):e._e()],1)]),s("div",{staticClass:"flexrow-item comment-content"},[s("div",[s("div",{staticClass:"notification-info flexrow"},[e.personMap[t.author_id]?s("people-avatar",{staticClass:"flexrow-item",attrs:{person:e.personMap[t.author_id],size:30}}):e._e(),s("router-link",{staticClass:"person-name flexrow-item",attrs:{to:{name:"person",params:{person_id:t.author_id}}}},[e._v(" "+e._s(e.personName(t))+" ")]),e.isComment(t)?s("span",{staticClass:"explaination flexrow-item"},[e._v(" "+e._s(e.$t("notifications.commented_on"))+" ")]):e._e(),e.isAssignation(t)?s("span",{staticClass:"explaination flexrow-item"},[e._v(" "+e._s(e.$t("notifications.assigned_you"))+" ")]):e._e(),e.isMention(t)?s("span",{staticClass:"explaination flexrow-item"},[e._v(" "+e._s(e.$t("notifications.mention_you_on"))+" ")]):e._e(),s("router-link",{staticClass:" flexrow-item",attrs:{to:e.entityPath(t)}},[e._v(" "+e._s(t.project_name)+" / "+e._s(t.full_entity_name)+" ")])],1)]),(e.isComment(t)||e.isMention(t))&&t.comment_text?s("div",{staticClass:"comment-text",domProps:{innerHTML:e._s(e.renderComment(t.comment_text,t.mentions,e.personMap))}}):e._e(),t.preview_file_id?s("div",{staticClass:"flexrow"},[s("paperclip-icon",{staticClass:"icon flexrow-item"}),t.preview_file_id?s("div",{staticClass:"thumbnail-picture-wrapper flexrow-item"},[s("entity-thumbnail",{attrs:{entity:{preview_file_id:t.preview_file_id},height:40}})],1):e._e()],1):e._e(),!e.isComment(t)&&!e.isMention(t)||t.comment_text?e._e():s("div",{staticClass:"comment-text"},[e._v(" "+e._s(e.$t("comments.empty_text"))+" ")]),s("div",{staticClass:"date flexrow"},[s("span",{staticClass:"flexrow-item"},[e._v(" "+e._s(e.formatDate(t.created_at))+" ")])])])])])}))],2)]),e.currentTask?s("div",{staticClass:"column side-column is-hidden-mobile hide-small-screen"},[s("task-info",{attrs:{task:e.currentTask,"is-loading":e.loading.currentTask}})],1):e._e()])},Hs=[],Gs=(s("fb6a"),s("0e54")),Ws=s.n(Gs),Ys=s("66be"),Ks=s("274f"),Qs=s("fe13"),Xs={name:"notification-page",components:{AtSignIcon:ae["b"],EntityThumbnail:ue["a"],PaperclipIcon:ae["C"],PeopleAvatar:Zt["a"],MessageSquareIcon:ae["A"],Spinner:d["a"],TaskInfo:Dt["a"],TaskTypeName:Ks["a"],UserIcon:ae["S"],ValidationTag:Qs["a"]},data:function(){return{loading:{notifications:!1,currentTask:!0},errors:{notifications:!1},currentTask:null,currentNotificationId:null}},created:function(){this.clearNotifications()},mounted:function(){var e=this;this.loading.notifications=!0,this.errors.notifications=!1,this.currentTask=null,this.loadNotifications().then((function(){e.loading.notifications=!1})).catch((function(t){console.error(t),e.errors.notifications=!0}))},computed:Object(c["a"])({},Object(l["c"])(["notifications","personMap","taskTypeMap","taskStatusMap","personMap","user"])),methods:Object(c["a"])(Object(c["a"])({},Object(l["b"])(["clearNotifications","loadNotification","loadNotifications","loadTask","markAllNotificationsAsRead"])),{},{entityPath:function(e){var t=this.taskTypeMap[e.task_type_id],s=t.for_shots?"shot":"asset",i={name:"task",params:{production_id:e.project_id,task_id:e.task_id,type:s}};return e.episode_id&&(i.name="episode-task",i.params.episode_id=e.episode_id),i},formatDate:function(e){var t=L.a.tz(e,"UTC");return e=L()(t.format()).fromNow(),e[0].toUpperCase()+e.slice(1)},compileMarkdown:function(e){return Ws()(e||"")},personName:function(e){var t=this.personMap[e.author_id];return t?t.full_name:""},buildTaskFromNotification:function(e){return{id:e.task_id,task_status_id:e.task_status_id,task_type_id:e.task_type_id,episode_id:e.episode_id}},buildTaskTypeFromNotification:function(e){return Object(c["a"])(Object(c["a"])({},this.taskTypeMap[e.task_type_id]),{},{episode_id:e.episode_id})},onNotificationSelected:function(e){var t=this;this.loading.currentTask=!0,this.loadTask({taskId:e.task_id}).then((function(s){t.loading.currentTask=!1,t.currentTask=s,t.currentNotificationId=e.id})).catch(console.error)},renderComment:Ys["b"],isComment:function(e){return!e.notification_type||"comment"===e.notification_type},isMention:function(e){return"mention"===e.notification_type},isAssignation:function(e){return"assignation"===e.notification_type}}),socket:{events:{"notification:new":function(e){if(this.user.id===e.person_id){var t=e.notification_id;this.loadNotification(t).catch(console.error)}},"preview-file:add-file":function(e){var t=e.comment_id,s=e.preview_file_id;this.$store.commit("NOTIFICATION_ADD_PREVIEW",{previewId:s,commentId:t})}}},beforeDestroy:function(){this.markAllNotificationsAsRead()},metaInfo:function(){return{title:"".concat(this.$t("notifications.title")," - Kitsu")}}},Js=Xs,Zs=(s("54c5"),Object(_["a"])(Js,Us,Hs,!1,null,"5501ee23",null)),ei=Zs.exports,ti=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"open-productions page"},[e.isOpenProductionsLoading?i("div",{staticClass:"has-text-centered"},[i("spinner")],1):e._e(),!e.isOpenProductionsLoading&&e.openProductions.length>0?i("div",{staticClass:"flexrow open-productions-header"},[i("h1",{staticClass:"title flexrow-item"},[i("img",{attrs:{src:s("ad6c"),width:"23"}}),e._v(" "+e._s(e.$t("productions.home.title"))+" ")]),i("div",{staticClass:"filler"}),e.isCurrentUserAdmin?i("div",{staticClass:"button flexrow-item"},[i("a",{on:{click:e.showNewModal}},[e._v(" "+e._s(e.$t("productions.home.create_new"))+" ")])]):e._e()]):e._e(),!e.isOpenProductionsLoading&&e.openProductions.length>0?i("div",{staticClass:"open-productions-box"},[i("img",{attrs:{src:""}}),i("div",{class:{"open-productions-list":!0,"is-grid":e.openProductions&&e.openProductions.length>4}},e._l(e.openProductions,(function(t){return i("div",{key:t.id,staticClass:"open-production has-text-centered"},[i("router-link",{attrs:{to:e.getPath(t)}},[i("div",{staticClass:"avatar has-text-centered",style:{background:e.getAvatarColor(t)}},[t.has_avatar?i("img",{attrs:{src:e.getThumbnailPath(t)}}):i("span",[e._v(" "+e._s(e.generateAvatar(t))+" ")])]),i("div",{staticClass:"production-name"},[e._v(" "+e._s(t.name)+" ")])])],1)})),0)]):i("div",{staticClass:"has-text-centered welcome"},[e._m(0),i("h1",{staticClass:"title has-text-centered"},[e._v(" "+e._s(e.$t("productions.home.welcome"))+" ")]),e.isCurrentUserAdmin?i("div",[i("p",{staticClass:"has-text-centered info"},[e._v(" "+e._s(e.$t("productions.home.empty"))+" ")]),i("p",{staticClass:"has-text-centered"},[i("button-simple",{staticClass:"level-item big-button",attrs:{text:e.$t("productions.home.create_new"),"is-responsive":!1},on:{click:e.showNewModal}})],1)]):e.isCurrentUserClient?i("div",[i("p",{staticClass:"has-text-centered"},[e._v(" "+e._s(e.$t("productions.home.no_prod_for_client"))+" ")])]):e.isCurrentUserManager?e._e():i("div",[i("p",{staticClass:"has-text-centered"},[e._v(" "+e._s(e.$t("productions.home.no_task"))+" ")])])]),i("edit-production-modal",{attrs:{active:e.modals.isNewDisplayed,"is-loading":e.loading.edit,"is-error":e.errors.edit},on:{confirm:e.confirmEditProduction,cancel:e.hideNewModal}})],1)},si=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("p",{staticClass:"kitsu-logo info"},[i("img",{attrs:{src:s("cb88")}})])}],ii=s("7930"),ni=s("1d3d"),ai={name:"open-productions",components:{ButtonSimple:de["a"],EditProductionModal:ni["a"],Spinner:d["a"]},data:function(){return{errors:{edit:!1},loading:{edit:!1},modals:{isNewDisplayed:!1}}},computed:Object(c["a"])({},Object(l["c"])(["isCurrentUserAdmin","isCurrentUserManager","isCurrentUserClient","isOpenProductionsLoading","lastProductionScreen","openProductions"])),methods:Object(c["a"])(Object(c["a"])({},Object(l["b"])(["newProduction"])),{},{generateAvatar:function(e){var t=e.name.length>0?e.name[0]:"P";return t.toUpperCase()},getAvatarColor:function(e){return ii["a"].fromString(e.name)},getPath:function(e){return this.sectionPath(e,this.lastProductionScreen)},sectionPath:function(e,t){var s={name:t,params:{production_id:e.id}};return"tvshow"===e.production_type&&(s.name="episode-".concat(t),s.params.episode_id="assets"!==t?e.first_episode_id:"all"),s},getThumbnailPath:function(e){return"/api/pictures/thumbnails/projects/".concat(e.id,".png")},confirmEditProduction:function(e){var t=this;this.errors.edit=!1,this.loading.edit=!0,this.newProduction(e).then((function(){t.modals.isNewDisplayed=!1,t.loading.edit=!1})).catch((function(e){console.error(e),t.loading.edit=!1,t.errors.edit=!0}))},showNewModal:function(){this.modals.isNewDisplayed=!0},hideNewModal:function(){this.modals.isNewDisplayed=!1}}),watch:{},metaInfo:function(){return{title:"".concat(this.$t("productions.home.title")," - Kitsu")}}},oi=ai,ri=(s("06c3"),Object(_["a"])(oi,ti,si,!1,null,"a4c35432",null)),ci=ri.exports,li=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"columns fixed-page"},[s("div",{staticClass:"column main-column"},[s("div",{directives:[{name:"scroll",rawName:"v-scroll",value:e.onBodyScroll,expression:"onBodyScroll"}],ref:"body",staticClass:"news page"},[s("div",{staticClass:"timeline-wrapper"},[s("div",{staticClass:"has-text-right filler filter-button"},[s("span",{on:{click:e.toggleFilters}},[e.isFiltersDisplayed?[e._v(" "+e._s(e.$t("main.less_filters"))+" ")]:[e._v(" "+e._s(e.$t("main.more_filters"))+" ")]],2),e._v("  "),s("span",{on:{click:e.toggleStats}},[e.isStatsDisplayed?[e._v(" "+e._s(e.$t("news.hide_stats"))+" ")]:[e._v(" "+e._s(e.$t("news.show_stats"))+" ")]],2)]),s("div",{staticClass:"filters flexrow"},[s("combobox-status",{staticClass:"flexrow-item selector",attrs:{label:e.$t("news.task_status"),"task-status-list":e.taskStatusList},model:{value:e.taskStatusId,callback:function(t){e.taskStatusId=t},expression:"taskStatusId"}}),s("combobox-task-type",{staticClass:"flexrow-item selector",attrs:{label:e.$t("news.task_type"),"task-type-list":e.taskTypeList},model:{value:e.taskTypeId,callback:function(t){e.taskTypeId=t},expression:"taskTypeId"}}),s("div",{staticClass:"field flexrow-item selector"},[s("label",{staticClass:"label person-label"},[e._v(" "+e._s(e.$t("main.person"))+" ")]),s("people-field",{attrs:{people:e.team,big:!0},model:{value:e.person,callback:function(t){e.person=t},expression:"person"}})],1)],1),s("div",{directives:[{name:"show",rawName:"v-show",value:e.isFiltersDisplayed,expression:"isFiltersDisplayed"}],staticClass:"filters flexrow mt1"},[s("date-field",{staticClass:"flexrow-item",attrs:{"disabled-dates":{from:e.today},label:e.$t("main.from"),"with-margin":!1},model:{value:e.after,callback:function(t){e.after=t},expression:"after"}}),s("date-field",{staticClass:"flexrow-item",attrs:{label:e.$t("main.to"),"disabled-dates":{from:e.today},"with-margin":!1},model:{value:e.before,callback:function(t){e.before=t},expression:"before"}}),s("combobox",{staticClass:"flexrow-item selector",attrs:{label:e.$t("news.infos"),options:e.previewOptions},model:{value:e.previewMode,callback:function(t){e.previewMode=t},expression:"previewMode"}})],1),e.isStatsDisplayed?s("div",{staticClass:"stats mt1"},[e._v(" "+e._s(e.newsTotal)+" "+e._s(e.$t("news.news"))+" - "),e._l(e.renderedStats,(function(t){return[s("span",{key:"stat-value-"+t.name.toLowerCase(),staticClass:"tag stat-tag",style:{background:t.color,color:"TODO"===t.name?"#666":"white"}},[e._v(" "+e._s(t.name)+" ")]),e._v(" : "+e._s(t.value)+" ")]}))],2):e._e(),s("div",{staticClass:"timeline"},[e.loading.news||e.newsList&&0!==e.newsList.length?e._e():s("div",{staticClass:"empty-list has-text-centered"},[e._v(" "+e._s(e.$t("news.no_news"))+" ")]),e.loading.news?s("div",{staticClass:"has-text-centered mt2"},[s("spinner")],1):e._e(),e._l(e.newsListByDay,(function(t){return s("div",{key:t.length>0?t[0].created_at:""},[s("div",{staticClass:"has-text-centered subtitle timeline-entry"},[s("span",{staticClass:"big-dot"}),e._v(" "+e._s(t.length>0?e.formatDay(t[0].created_at):"")+" ")]),e._l(t,(function(t){return s("div",{key:"news-"+t.id,ref:"news-"+t.id,refInFor:!0},["comments"===e.previewMode?s("div",[s("div",{class:{"news-line":!0,"timeline-entry":!0,flexrow:!0,selected:t.id===e.currentNewsId},on:{click:function(s){return s.preventDefault(),e.onNewsSelected(t)}}},[s("span",{class:{dot:!0,red:e.hasRetakeValue(t),green:e.hasDoneValue(t)}}),s("span",{staticClass:"date flexrow-item"},[e._v(" "+e._s(e.formatTime(t.created_at))+" ")]),s("div",{staticClass:"flexrow-item task-type-wrapper"},[s("task-type-name",{staticClass:"task-type-name",attrs:{"task-type":e.buildTaskTypeFromNews(t),"production-id":e.currentProduction.id,"is-static":!0}})],1),s("div",{staticClass:"flexrow-item validation-wrapper"},[t.change?s("validation-tag",{staticClass:"validation-tag",attrs:{task:e.buildTaskFromNews(t),"is-static":!0}}):e._e()],1),s("div",{staticClass:"flexrow-item comment-content"},[s("div",[s("div",{staticClass:"news-info flexrow"},[e.personMap[t.author_id]?s("people-avatar",{staticClass:"flexrow-item",attrs:{person:e.personMap[t.author_id],size:30,"font-size":14,"is-link":!1}}):e._e(),s("span",{staticClass:"explaination flexrow-item"},[s("span",{staticClass:"strong person-name"},[e._v(" "+e._s(e.personName(t))+" ")]),s("span",[e._v(" "+e._s(e.$t("news.commented_on"))+" ")]),t.entity_preview_file_id?s("entity-thumbnail",{staticClass:"ml05",attrs:{entity:{id:t.task_entity_id,preview_file_id:t.entity_preview_file_id}}}):e._e(),s("span",{staticClass:"strong"},[e._v(" "+e._s(t.full_entity_name)+" ")])],1)],1)])])])]):e._e(),t.preview_file_id&&"previews"===e.previewMode?s("div",{staticClass:"preview"},[s("div",{class:{"news-line":!0,"timeline-entry":!0,flexrow:!0,selected:t.id===e.currentNewsId},on:{click:function(s){return s.preventDefault(),e.onNewsSelected(t)}}},[s("span",{class:{dot:!0,red:e.hasRetakeValue(t),green:e.hasDoneValue(t)}}),s("span",{staticClass:"date flexrow-item"},[e._v(" "+e._s(e.formatTime(t.created_at))+" ")]),s("div",{staticClass:"flexrow-item task-type-wrapper"},[s("task-type-name",{staticClass:"task-type-name",attrs:{"task-type":e.buildTaskTypeFromNews(t),"production-id":e.currentProduction.id}})],1),s("div",{staticClass:"flexrow-item comment-content"},[s("div",[s("div",{staticClass:"news-info flexrow"},[e.personMap[t.author_id]?s("people-avatar",{staticClass:"flexrow-item",attrs:{person:e.personMap[t.author_id],size:30,"no-link":!0}}):e._e(),s("span",{staticClass:"explaination flexrow-item"},[s("span",{staticClass:"strong person-name"},[e._v(" "+e._s(e.personName(t))+" ")]),s("span",[e._v(" "+e._s(e.$t("news.set_preview_on"))+" ")]),t.entity_preview_file_id?s("entity-thumbnail",{staticClass:"ml05",attrs:{entity:{id:t.task_entity_id,preview_file_id:t.entity_preview_file_id}}}):e._e(),s("span",{staticClass:"strong"},[e._v(" "+e._s(t.full_entity_name)+" ")])],1)],1)])])]),"previews"==e.previewMode?s("div",{staticClass:"has-text-centered"},[s("preview-player",{attrs:{previews:[{id:t.preview_file_id,extension:t.preview_file_extension}],"read-only":!0,light:!0,big:!0}})],1):e._e()]):e._e()])}))],2)}))],2)])])]),e.currentTask?s("div",{staticClass:"column side-column is-hidden-mobile hide-small-screen"},[s("task-info",{attrs:{task:e.currentTask,"is-loading":e.loading.currentTask}})],1):e._e()])},di=[],ui=s("3657"),pi=s("d37c"),hi=s("6aac"),mi={name:"news-page",components:{Combobox:$e["a"],ComboboxStatus:bs["a"],ComboboxTaskType:We["a"],DateField:pi["a"],EntityThumbnail:ue["a"],PeopleAvatar:Zt["a"],PeopleField:Os["a"],TaskTypeName:Ks["a"],ValidationTag:Qs["a"],Spinner:d["a"],TaskInfo:Dt["a"],PreviewPlayer:hi["a"]},data:function(){return{after:null,before:null,currentNewsId:null,currentPage:1,currentTask:null,isFiltersDisplayed:!1,isStatsDisplayed:!1,errors:{news:!1},loading:{more:!1,news:!1,currentTask:!0},person:null,previewMode:"comments",previewOptions:[{label:this.$t("news.only_comments"),value:"comments"},{label:this.$t("news.only_previews"),value:"previews"}],taskStatusId:"",taskTypeId:""}},mounted:function(){this.$options.silent=!0,this.previewMode=localStorage.getItem("news:preview-mode")||"comments",this.taskTypeId=localStorage.getItem("news:task-type-id")||"",this.taskStatusId=localStorage.getItem("news:task-status-id")||"",this.$options.silent=!1,window.addEventListener("keydown",this.onKeyDown,!1),(0===this.newsList.length||this.currentProduction&&this.newsList[0].project_id!==this.currentProduction.id)&&!this.loading.news&&this.init()},beforeDestroy:function(){window.removeEventListener("keydown",this.onKeyDown)},computed:Object(c["a"])(Object(c["a"])({},Object(l["c"])(["currentProduction","newsList","newsTotal","newsStats","newsListByDay","personMap","productionTaskStatuses","productionTaskTypes","taskStatusMap","taskTypeMap","taskStatusMap","taskStatus","taskTypes","user"])),{},{params:function(){var e={productionId:this.currentProduction.id,only_preview:"previews"===this.previewMode,page_size:"previews"===this.previewMode?6:50,task_type_id:""!==this.taskTypeId?this.taskTypeId:void 0,task_status_id:""!==this.taskStatusId?this.taskStatusId:void 0,person_id:this.person?this.person.id:void 0,page:this.currentPage,before:Object(ui["d"])(this.before),after:Object(ui["d"])(this.after)};return e},taskStatusList:function(){return[{id:"",color:"#999",short_name:this.$t("news.all")}].concat(Object(Z["d"])(Object(Y["a"])(this.productionTaskStatuses)))},taskTypeList:function(){return[{id:"",color:"#999",name:this.$t("news.all")}].concat(Object(Z["d"])(Object(Y["a"])(this.productionTaskTypes)))},team:function(){var e=this;return this.currentProduction.team.map((function(t){return e.personMap[t]})).sort((function(e,t){return e.full_name.localeCompare(t.full_name)}))},timezone:function(){return this.user.timezone||L.a.tz.guess()},today:function(){return L()().toDate()},renderedStats:function(){var e=this;return this.newsStats?Object.keys(this.newsStats).map((function(t){var s=e.taskStatusMap[t].short_name.toUpperCase(),i=e.taskStatusMap[t].color;return{name:s,color:i,value:e.newsStats[t]}})).sort((function(e,t){return e.name.localeCompare(t.name)})):""}}),methods:Object(c["a"])(Object(c["a"])({},Object(l["b"])(["loadNews","loadSingleNews","loadMoreNews","loadTask"])),{},{onKeyDown:function(e){if(this.newsList&&this.newsList.length>0&&e.altKey){var t=this.lastSelection?this.lastSelection:0;[37,38].includes(e.keyCode)?(t=t-1<0?t=this.newsList.length-1:t-1,this.onNewsSelected(this.newsList[t])):[39,40].includes(e.keyCode)&&(t=t+1>=this.newsList.length?t=0:t+1,this.onNewsSelected(this.newsList[t]))}},loadFollowingNews:function(){var e=this;this.loading.more||this.loading.news||(this.loading.more=!0,this.currentPage+=1,this.loadMoreNews(this.params).then((function(){e.loading.more=!1})))},formatDay:function(e){var t=L.a.tz(e,"UTC").tz(this.timezone);return t.format("LL")},formatTime:function(e){var t=L.a.tz(e,"UTC").tz(this.timezone);return t.format("HH:mm")},personName:function(e){var t=this.personMap[e.author_id];return t?t.full_name:""},buildTaskFromNews:function(e){return{id:e.task_id,task_status_id:e.task_status_id,task_type_id:e.task_type_id,episode_id:e.episode_id}},buildTaskTypeFromNews:function(e){return Object(c["a"])(Object(c["a"])({},this.taskTypeMap[e.task_type_id]),{},{episode_id:e.episode_id})},onNewsSelected:function(e){var t=this;this.loading.currentTask=!0;var s=this.newsList.findIndex((function(t){return t.id===e.id}));this.lastSelection!==s?(this.lastSelection=s,this.loadTask({taskId:e.task_id}).then((function(s){t.loading.currentTask=!1,t.currentTask=s,t.currentNewsId=e.id})).catch(console.error),this.scrollToLine(e)):(this.lastSelection=-1,this.currentTask=null,this.currentNewsId="")},scrollToLine:function(e){var t=this.$refs["news-".concat(e.id)];if(t&&this.$refs.body){var s=30,i=t[0].getBoundingClientRect(),n=this.$refs.body.getBoundingClientRect(),a=i.bottom>n.bottom-s,o=i.top<n.top+s;if(a){var r=i.bottom-n.bottom+s;this.setScrollPosition(this.$refs.body.scrollTop+r)}else if(o){var c=n.top-i.top+s;this.setScrollPosition(this.$refs.body.scrollTop-c)}}},setScrollPosition:function(e){this.$refs.body&&(this.$refs.body.scrollTop=e)},init:function(){var e=this;this.$options.silent||(this.currentPage=1,this.loading.news=!0,this.errors.news=!1,this.currentTask=null,this.loadNews(this.params).then((function(){e.loading.news=!1})).catch((function(t){console.error(t),e.loading.news=!1,e.errors.news=!0})))},onBodyScroll:function(e,t){var s=this.$refs.body.scrollHeight-this.$refs.body.offsetHeight;s<t.scrollTop+100&&(this.newsList.length%50===0&&"comments"===this.previewMode||this.newsList.length%6===0&&"previews"===this.previewMode)&&this.loadFollowingNews()},getPreviewPath:function(e){var t=e.preview_file_id,s=e.preview_file_extension;return"/api/pictures/originals/preview-files/".concat(t,".").concat(s)},getPreviewDlPath:function(e){var t=e.preview_file_id;return"/api/pictures/originals/preview-files/".concat(t,"/download")},hasRetakeValue:function(e){var t=this.taskStatusMap[e.task_status_id];return!!t&&(e.change&&t.is_retake)},hasDoneValue:function(e){var t=this.taskStatusMap[e.task_status_id];return!!t&&(e.change&&t.is_done)},toggleFilters:function(){this.isFiltersDisplayed=!this.isFiltersDisplayed},toggleStats:function(){this.isStatsDisplayed=!this.isStatsDisplayed}}),socket:{events:{"preview-file:add-file":function(e){var t=e.comment_id,s=e.preview_file_id,i=e.extension;this.$store.commit("NEWS_ADD_PREVIEW",{previewId:s,commentId:t,extension:i})},"news:new":function(e){e.project_id!==this.currentProduction.id||this.taskTypeId&&this.taskTypeId!==e.task_type_id||this.taskStatusId&&this.taskStatusId!==e.task_status_id||this.loadSingleNews({productionId:this.currentProduction.id,newsId:e.news_id})}}},watch:{currentProduction:function(){this.loading.news||this.init()},previewMode:function(){localStorage.setItem("news:preview-mode",this.previewMode),this.init()},taskTypeId:function(){localStorage.setItem("news:task-type-id",this.taskTypeId),this.init()},taskStatusId:function(){localStorage.setItem("news:task-status-id",this.taskStatusId),this.init()},person:function(){this.init()},before:function(){this.init()},after:function(){this.init()}},metaInfo:function(){return this.currentProduction?{title:"".concat(this.currentProduction.name," ").concat(this.$t("news.title")," - Kitsu")}:{title:"".concat(this.$t("news.title")," - Kitsu")}}},fi=mi,_i=(s("51ca"),Object(_["a"])(fi,li,di,!1,null,"29fdeba8",null)),vi=_i.exports,gi=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"columns fixed-page"},[s("div",{staticClass:"column main-column"},[s("div",{staticClass:"shots page"},[s("div",{staticClass:"shot-list-header page-header"},[s("div",{staticClass:"level header-title"},[s("div",{staticClass:"level-left flexcolumn"},[s("div",{staticClass:"filters-area flexcolumn-item"},[s("div",{staticClass:"flexrow"},[s("search-field",{ref:"shot-search-field",attrs:{"can-save":!0,placeholder:"ex: e01 s01 anim=wip"},on:{change:e.onSearchChange,save:e.saveSearchQuery}}),s("button-simple",{staticClass:"flexrow-item",attrs:{title:e.$t("entities.build_filter.title"),icon:"funnel"},on:{click:function(){return e.modals.isBuildFilterDisplayed=!0}}})],1)])]),s("div",{staticClass:"level-right"},[e.isCurrentUserClient?e._e():s("div",{staticClass:"flexrow"},[s("show-assignations-button",{staticClass:"flexrow-item"}),s("show-infos-button",{staticClass:"flexrow-item"}),s("div",{staticClass:"flexrow-item"})],1),e.isCurrentUserManager?s("div",{staticClass:"flexrow"},[s("button-simple",{staticClass:"flexrow-item",attrs:{title:e.$t("entities.thumbnails.title"),icon:"image"},on:{click:e.showAddThumbnailsModal}}),s("button-simple",{staticClass:"flexrow-item",attrs:{title:e.$t("main.csv.import_file"),icon:"upload"},on:{click:e.showImportModal}}),s("button-simple",{staticClass:"flexrow-item",attrs:{icon:"download",title:e.$t("main.csv.export_file")},on:{click:e.onExportClick}}),s("button-simple",{staticClass:"flexrow-item",attrs:{text:e.$t("shots.manage"),icon:"plus"},on:{click:e.showManageShots}})],1):e._e()])]),s("div",{staticClass:"query-list"},[e.isShotsLoading||e.initialLoading?e._e():s("search-query-list",{attrs:{queries:e.shotSearchQueries},on:{"change-search":e.changeSearch,"remove-search":e.removeSearchQuery}})],1)]),s("sorting-info",{attrs:{label:e.$t("main.sorted_by"),sorting:e.shotSorting},on:{"clear-sorting":function(t){return e.onChangeSortClicked(null)}}}),s("shot-list",{ref:"shot-list",attrs:{"displayed-shots":e.displayedShotsBySequence,"is-loading":e.isShotsLoading||e.initialLoading,"is-error":e.isShotsLoadingError,"validation-columns":e.shotValidationColumns},on:{"add-metadata":e.onAddMetadataClicked,"add-shots":e.showManageShots,"change-sort":e.onChangeSortClicked,"create-tasks":e.showCreateTasksModal,"delete-all-tasks":e.onDeleteAllTasksClicked,"delete-clicked":e.onDeleteClicked,"delete-metadata":e.onDeleteMetadataClicked,"edit-clicked":e.onEditClicked,"edit-metadata":e.onEditMetadataClicked,"restore-clicked":e.onRestoreClicked,scroll:e.saveScrollPosition,"shot-history":e.showShotHistoryModal,"sequence-clicked":e.onSequenceClicked}})],1)]),1===e.nbSelectedTasks?s("div",{staticClass:"column side-column"},[s("task-info",{attrs:{task:Object.values(e.selectedTasks)[0]}})],1):e._e(),s("manage-shots-modal",{attrs:{active:e.modals.isManageDisplayed,"is-loading":e.loading.manage,"is-error":!1,"is-success":!1},on:{cancel:e.hideManageShots}}),s("edit-shot-modal",{attrs:{active:e.modals.isNewDisplayed,"is-loading":e.loading.edit,"is-error":e.errors.edit,"shot-to-edit":e.shotToEdit},on:{cancel:function(t){e.modals.isNewDisplayed=!1},confirm:e.confirmEditShot}}),s("delete-modal",{ref:"delete-shot-modal",attrs:{active:e.modals.isDeleteDisplayed,"is-loading":e.loading.del,"is-error":e.errors.del,text:e.deleteText(),"error-text":e.$t("shots.delete_error")},on:{cancel:function(t){e.modals.isDeleteDisplayed=!1},confirm:e.confirmDeleteShot}}),s("delete-modal",{ref:"restore-shot-modal",attrs:{active:e.modals.isRestoreDisplayed,"is-loading":e.loading.restore,"is-error":e.errors.restore,text:e.restoreText(),"error-text":e.$t("shots.restore_error")},on:{cancel:function(t){e.modals.isDeleteDisplayed=!1},confirm:e.confirmRestoreShot}}),s("delete-modal",{ref:"delete-metadata-modal",attrs:{active:e.modals.isDeleteMetadataDisplayed,"is-loading":e.loading.deleteMetadata,"is-error":e.errors.deleteMetadata,text:e.$t("productions.metadata.delete_text"),"error-text":e.$t("productions.metadata.delete_error")},on:{cancel:function(t){e.modals.isDeleteMetadataDisplayed=!1},confirm:e.confirmDeleteMetadata}}),s("hard-delete-modal",{ref:"delete-all-tasks-modal",attrs:{active:e.modals.isDeleteAllTasksDisplayed,"is-loading":e.loading.deleteAllTasks,"is-error":e.errors.deleteAllTasks,text:e.deleteAllTasksText(),"error-text":e.$t("tasks.delete_all_error"),"lock-text":e.deleteAllTasksLockText,"selection-option":!0},on:{cancel:function(t){e.modals.isDeleteAllTasksDisplayed=!1},confirm:e.confirmDeleteAllTasks}}),s("import-render-modal",{attrs:{active:e.modals.isImportRenderDisplayed,"is-loading":e.loading.importing,"is-error":e.errors.importing,"parsed-csv":e.parsedCSV,"form-data":e.shotsCsvFormData,columns:e.columns,dataMatchers:e.dataMatchers,database:e.filteredShots},on:{reupload:e.resetImport,cancel:e.hideImportRenderModal,confirm:e.uploadImportFile}}),s("import-modal",{ref:"import-modal",attrs:{active:e.modals.isImportDisplayed,"is-loading":e.loading.importing,"is-error":e.errors.importing,"form-data":e.shotsCsvFormData,columns:e.columns},on:{cancel:e.hideImportModal,confirm:e.renderImport}}),s("create-tasks-modal",{attrs:{active:e.modals.isCreateTasksDisplayed,"is-loading":e.loading.creatingTasks,"is-loading-stay":e.loading.creatingTasksStay,"is-error":e.errors.creatingTasks,title:e.$t("tasks.create_tasks_shot"),text:e.$t("tasks.create_tasks_shot_explaination"),"error-text":e.$t("tasks.create_tasks_shot_failed")},on:{cancel:e.hideCreateTasksModal,confirm:e.confirmCreateTasks,"confirm-and-stay":e.confirmCreateTasksAndStay}}),s("add-metadata-modal",{attrs:{active:e.modals.isAddMetadataDisplayed,"is-loading":e.loading.addMetadata,"is-loading-stay":e.loading.addMetadata,"is-error":e.errors.addMetadata,"descriptor-to-edit":e.descriptorToEdit},on:{cancel:e.closeMetadataModal,confirm:e.confirmAddMetadata}}),s("add-thumbnails-modal",{ref:"add-thumbnails-modal",attrs:{parent:"shots",active:e.modals.isAddThumbnailsDisplayed,"is-loading":e.loading.addThumbnails,"is-error":e.errors.addThumbnails},on:{cancel:e.hideAddThumbnailsModal,confirm:e.confirmAddThumbnails}}),s("shot-history-modal",{attrs:{active:e.modals.isShotHistoryDisplayed,shot:e.historyShot},on:{cancel:e.hideShotHistoryModal}}),s("build-filter-modal",{ref:"build-filter-modal",attrs:{active:e.modals.isBuildFilterDisplayed,"entity-type":"shot"},on:{cancel:function(t){e.modals.isBuildFilterDisplayed=!1},confirm:e.confirmBuildFilter}})],1)},yi=[],bi=s("162b"),ki=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{modal:!0,"is-active":e.active}},[s("div",{staticClass:"modal-background",on:{click:function(t){return e.$emit("cancel")}}}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box"},[s("page-title",{staticClass:"title",attrs:{text:e.$t("shots.manage")}}),s("div",{staticClass:"explaination"},[e._v(e._s(e.$t("shots.creation_explaination")))]),s("div",[s("div",{staticClass:"flexrow"},[s("span",{staticClass:"filler"}),s("combobox",{ref:"shot-padding",staticClass:"shot-padding flexrow-item",attrs:{label:e.$t("shots.padding"),options:e.shotPaddingOptions},model:{value:e.shotPadding,callback:function(t){e.shotPadding=t},expression:"shotPadding"}})],1)]),s("div",{staticClass:"shot-columns"},[e.isTVShow?s("div",{staticClass:"shot-column"},[s("h2",{staticClass:"subtitle"},[e._v(e._s(e.$t("shots.episodes")))]),s("div",{staticClass:"list"},e._l(e.episodes,(function(t){return s("div",{key:t.id,class:{"entity-line":!0,selected:t.id===e.selectedEpisodeId},on:{click:function(s){return e.selectEpisode(t.id)}}},[e._v(" "+e._s(t.name)+" ")])})),0),s("div",{staticClass:"field"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.names.episode,expression:"names.episode"},{name:"focus",rawName:"v-focus"}],ref:"addEpisodeInput",staticClass:"input",attrs:{placeholder:"EP01",type:"text"},domProps:{value:e.names.episode},on:{keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"tab",9,t.key,"Tab")?null:e.focusAddSequence(t)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addEpisode(t)}],input:function(t){t.target.composing||e.$set(e.names,"episode",t.target.value)}}}),s("button",{class:{button:!0,"is-success":!0,"is-loading":e.loading.addEpisode},attrs:{disabled:!e.isAddEpisodeAllowed},on:{click:e.addEpisode}},[e._v(" "+e._s(e.$t("main.add"))+" ")])])]):e._e(),s("div",{staticClass:"shot-column"},[s("h2",{staticClass:"subtitle"},[e._v(e._s(e.$t("shots.sequences")))]),s("div",{staticClass:"list"},e._l(e.displayedSequences,(function(t){return s("div",{key:t.id,class:{"entity-line":!0,selected:t.id===e.selectedSequenceId},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"tab",9,t.key,"Tab")?null:e.focusAddShot(t)},click:function(s){return e.selectSequence(t.id)}}},[e._v(" "+e._s(t.name)+" ")])})),0),s("div",{staticClass:"field"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.names.sequence,expression:"names.sequence"}],ref:"addSequenceInput",staticClass:"input",attrs:{placeholder:"SQ01",type:"text"},domProps:{value:e.names.sequence},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addSequence(t)},input:function(t){t.target.composing||e.$set(e.names,"sequence",t.target.value)}}}),s("button",{class:{button:!0,"is-success":!0,"is-loading":e.loading.addSequence},attrs:{disabled:!e.isAddSequenceAllowed},on:{click:e.addSequence}},[e._v(" "+e._s(e.$t("main.add"))+" ")])])]),s("div",{staticClass:"shot-column"},[s("h2",{staticClass:"subtitle"},[e._v(e._s(e.$t("shots.title")))]),s("div",{staticClass:"list"},e._l(e.displayedShots,(function(t){return s("div",{key:t.id,staticClass:"entity-line"},[e._v(" "+e._s(t.name)+" ")])})),0),s("div",{staticClass:"field"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.names.shot,expression:"names.shot"}],ref:"addShotInput",staticClass:"input",attrs:{placeholder:"SH01",type:"text"},domProps:{value:e.names.shot},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addShot(t)},input:function(t){t.target.composing||e.$set(e.names,"shot",t.target.value)}}})]),s("div",{staticClass:"field"},[s("button",{class:{button:!0,"is-success":!0,"is-loading":e.loading.addShot},attrs:{disabled:!e.isAddShotAllowed||e.loading.addShot},on:{click:e.addShot}},[e._v(" "+e._s(e.$t("main.add"))+" ")])])])]),s("p",{staticClass:"has-text-right modal-footer"},[s("button",{staticClass:"button is-link",on:{click:function(t){return e.$emit("cancel")}}},[e._v(" "+e._s(e.$t("main.close"))+" ")])])],1)])])},wi=[],Ci={name:"manage-shot-modal",mixins:[Me["a"]],components:{Combobox:$e["a"],PageTitle:st["a"]},props:{active:{default:!0,type:Boolean}},data:function(){return{names:{episode:"",sequence:"",shot:""},loading:{addEpisode:!1,addSequence:!1,addShot:!1},displayedSequences:[],displayedShots:[],selectedEpisodeId:null,selectedSequenceId:null,shotPaddingOptions:[{label:"1",padding:"1"},{label:"2",padding:"2"},{label:"10",padding:"10"}],shotPadding:"1"}},watch:{active:function(){var e=this;this.active&&(this.shotPadding="1",setTimeout((function(){e.isTVShow?e.$refs.addEpisodeInput.focus():e.$refs.addSequenceInput.focus()}),100))},sequences:function(){this.displayedSequences=this.sequences,this.displayedShots=[]}},computed:Object(c["a"])(Object(c["a"])({},Object(l["c"])(["currentProduction","episodes","isTVShow","sequences","shotMap"])),{},{isAddEpisodeAllowed:function(){var e=this,t=""===this.names.episode,s=this.episodes.find((function(t){return e.names.episode===t.name}));return!t&&!s},isAddSequenceAllowed:function(){var e=this,t=""===this.names.sequence,s=this.displayedSequences.find((function(t){return e.names.sequence===t.name}));return!t&&!s&&(this.selectedEpisodeId||!this.isTVShow)},isAddShotAllowed:function(){var e=this,t=""===this.names.shot,s=this.displayedShots.find((function(t){return e.names.shot===t.name}));return!t&&!s&&this.selectedSequenceId}}),methods:Object(c["a"])(Object(c["a"])({},Object(l["b"])(["newEpisode","newSequence","newShot","setCurrentEpisode"])),{},{focusAddSequence:function(){this.$refs.addSequenceInput.focus()},focusAddShot:function(){this.$refs.addShotInput.focus()},selectEpisode:function(e){this.isTVShow?(this.selectedEpisodeId=e,this.$router.push({name:"episode-shots",params:{production_id:this.currentProduction.id,episode_id:e}})):(this.selectedEpisodeId=e,this.displayedSequences=this.sequences.filter((function(t){return t.parent_id===e})),this.displayedShots=[])},selectSequence:function(e){this.selectedSequenceId=e,this.displayedShots=Object.values(this.shotMap).filter((function(t){return t.sequence_id===e}))},addEpisode:function(){var e=this;if(this.isAddEpisodeAllowed){var t=this.names.episode;if(t.length>0){this.loading.addEpisode=!0;var s={name:this.names.episode,project_id:this.currentProduction.id};this.newEpisode(s).then((function(t){e.loading.addEpisode=!1,e.selectEpisode(t.id),e.names.episode=ee["a"].generateNextName(t.name)})).catch(console.error)}}},addSequence:function(){var e=this;if(this.isAddSequenceAllowed){var t=this.names.sequence;if(t.length>0&&(this.selectedEpisodeId||!this.isTVShow)){this.loading.addSequence=!0;var s={name:this.names.sequence,episode_id:this.selectedEpisodeId,project_id:this.currentProduction.id};this.newSequence(s).then((function(t){e.loading.addSequence=!1,e.selectEpisode(e.selectedEpisodeId),e.selectSequence(t.id),e.names.sequence=ee["a"].generateNextName(t.name)})).catch(console.error)}}},addShot:function(){var e=this;if(this.isAddShotAllowed&&!this.loading.addShot){var t=this.names.shot;if(this.loading.addShot=!0,t.length>0&&this.selectedSequenceId){var s={name:this.names.shot,sequence_id:this.selectedSequenceId,project_id:this.currentProduction.id};this.newShot(s).then((function(t){e.loading.addShot=!1,e.selectSequence(e.selectedSequenceId),e.names.shot=ee["a"].generateNextName(t.name,parseInt(e.shotPadding))})).catch(console.error)}}}})},Si=Ci,Ti=(s("1b99"),Object(_["a"])(Si,ki,wi,!1,null,"812a5366",null)),xi=Ti.exports,Ei=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{modal:!0,"is-active":e.active}},[s("div",{staticClass:"modal-background",on:{click:function(t){return e.$emit("cancel")}}}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box content"},[s("h1",{staticClass:"title"},[e._v(" "+e._s(e.$t("shots.history"))+" ")]),s("table",{ref:"headerWrapper",staticClass:"table"},[s("thead",{staticClass:"table-header"},[s("tr",[s("th",{staticClass:"date"},[e._v(e._s(e.$t("main.date")))]),s("th",{staticClass:"name"},[e._v(e._s(e.$t("shots.fields.name")))]),s("th",{staticClass:"frame-in"},[e._v(e._s(e.$t("shots.fields.frame_in")))]),s("th",{staticClass:"frame-out"},[e._v(e._s(e.$t("shots.fields.frame_out")))]),s("th",{staticClass:"table-filler"})])])]),e.isLoading?e._e():s("div",{staticClass:"table-body"},[s("table",{staticClass:"table"},[s("tbody",{staticClass:"table-body"},e._l(e.versions,(function(t){return s("tr",{key:t.id,staticClass:"shot-version"},[s("td",{staticClass:"date"},[e._v(" "+e._s(e.formatDate(t.created_at))+" ")]),s("td",{staticClass:"name"},[e._v(" "+e._s(t.name)+" ")]),s("td",{staticClass:"frame-in"},[e._v(" "+e._s(t.data.frame_in)+" ")]),s("td",{staticClass:"frame-out"},[e._v(" "+e._s(t.data.frame_out)+" ")]),s("td",{staticClass:"table-filler"})])})),0)])]),s("table-info",{attrs:{"is-loading":e.isLoading,"is-error":e.isError}}),s("div",{staticClass:"has-text-right modal-footer"},[s("button",{staticClass:"button is-link",on:{click:function(t){return e.$emit("cancel")}}},[e._v(" "+e._s(e.$t("main.cancel"))+" ")])])],1)])])},Pi=[],Oi={name:"shot-history-modal",mixins:[Me["a"]],components:{TableInfo:ye["a"]},props:{active:{type:Boolean,default:!1},shot:{type:Object,default:function(){}}},data:function(){return{isError:!1,isLoading:!1,versions:[]}},mounted:function(){this.reset()},computed:Object(c["a"])({},Object(l["c"])([])),methods:Object(c["a"])(Object(c["a"])({},Object(l["b"])(["loadShotHistory"])),{},{reset:function(){this.versions=[],this.isError=!1,this.isLoading=!1},loadData:function(){var e=this;return this.isError=!1,this.isLoading=!0,this.loadShotHistory(this.shot.id).then((function(t){e.versions=t,e.isLoading=!1})).catch((function(t){console.error(t),e.isLoading=!1,e.isError=!0}))},formatDate:function(e){return Object(ui["c"])(e)}}),watch:{active:function(){this.active&&(this.reset(),this.loadData())}}},Ai=Oi,ji=(s("562d"),Object(_["a"])(Ai,Ei,Pi,!1,null,"4b48238a",null)),Di=ji.exports,Mi=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"data-list"},[s("div",{directives:[{name:"scroll",rawName:"v-scroll",value:e.onBodyScroll,expression:"onBodyScroll"}],ref:"body",staticClass:"datatable-wrapper"},[s("table-header-menu",{ref:"headerMenu",attrs:{"is-minimized":e.hiddenColumns[e.lastHeaderMenuDisplayed],"is-current-user-admin":e.isCurrentUserAdmin},on:{"minimize-clicked":function(t){return e.onMinimizeColumnToggled()},"delete-all-clicked":function(t){return e.onDeleteAllTasksClicked()},"sort-by-clicked":function(t){return e.onSortByTaskTypeClicked()}}}),s("table-metadata-header-menu",{ref:"headerMetadataMenu",attrs:{"is-current-user-admin":e.isCurrentUserAdmin},on:{"edit-clicked":function(t){return e.onEditMetadataClicked()},"delete-clicked":function(t){return e.onDeleteMetadataClicked()},"sort-by-clicked":function(t){return e.onSortByMetadataClicked()}}}),s("table",{staticClass:"datatable"},[s("thead",{directives:[{name:"columns-resizable",rawName:"v-columns-resizable"}],staticClass:"datatable-head",attrs:{id:"datatable-shot"}},[s("tr",[s("th",{ref:"th-shot",staticClass:"name shot-name datatable-row-header",attrs:{scope:"col"}},[s("div",{staticClass:"flexrow"},[s("span",{staticClass:"flexrow-item"},[e._v(" "+e._s(e.$t("shots.fields.name"))+" ")]),e.isCurrentUserAdmin&&!e.isLoading?s("button-simple",{staticClass:"is-small flexrow",attrs:{icon:"plus",text:""},on:{click:e.onAddMetadataClicked}}):e._e()],1)]),!e.isCurrentUserClient&&e.isShowInfos&&e.isShotDescription?s("th",{staticClass:"description",attrs:{scope:"col"}},[e._v(" "+e._s(e.$t("shots.fields.description"))+" ")]):e._e(),e._l(e.shotMetadataDescriptors,(function(t){return e.isShowInfos?s("th",{key:t.id,staticClass:"metadata-descriptor",attrs:{scope:"col"}},[s("div",{staticClass:"flexrow"},[s("span",{staticClass:"flexrow-item datatable-dropdown"},[e._v(" "+e._s(t.name)+" ")]),s("chevron-down-icon",{staticClass:"header-icon flexrow-item",on:{click:function(s){return e.showMetadataHeaderMenu(t.id,s)}}})],1)]):e._e()})),!e.isCurrentUserClient&&e.isShowInfos&&e.isTime?s("th",{ref:"th-spent",staticClass:"time-spent",attrs:{scope:"col"}},[e._v(" "+e._s(e.$t("shots.fields.time_spent"))+" ")]):e._e(),e.isFrames&&e.isShowInfos?s("th",{staticClass:"frames",attrs:{scope:"col"}},[e._v(" "+e._s(e.$t("shots.fields.nb_frames"))+" ")]):e._e(),e.isFrameIn&&e.isShowInfos?s("th",{staticClass:"framein",attrs:{scope:"col"}},[e._v(" "+e._s(e.$t("shots.fields.frame_in"))+" ")]):e._e(),e.isFrameOut&&e.isShowInfos?s("th",{staticClass:"frameout",attrs:{scope:"col"}},[e._v(" "+e._s(e.$t("shots.fields.frame_out"))+" ")]):e._e(),e.isFps&&e.isShowInfos?s("th",{staticClass:"fps",attrs:{scope:"col"}},[e._v(" "+e._s(e.$t("shots.fields.fps"))+" ")]):e._e(),e._l(e.displayedValidationColumns,(function(t){return e.isLoading?e._e():s("th",{key:t,class:{"validation-cell":!e.hiddenColumns[t],"hidden-validation-cell":e.hiddenColumns[t]},attrs:{scope:"col"}},[s("div",{staticClass:"flexrow validation-content",style:e.getValidationStyle(t)},[e.isCurrentUserClient?s("span",{staticClass:"flexrow-item datatable-dropdown task-type-name",staticStyle:{"margin-right":"0"}},[e._v(" "+e._s(e.hiddenColumns[t]?"":e.taskTypeMap[t].name)+" ")]):s("router-link",{staticClass:"flexrow-item datatable-dropdown task-type-name",staticStyle:{"margin-right":"0"},attrs:{to:e.taskTypePath(t)}},[e._v(" "+e._s(e.hiddenColumns[t]?"":e.taskTypeMap[t].name)+" ")]),s("chevron-down-icon",{staticClass:"header-icon flexrow-item",on:{click:function(s){return e.showHeaderMenu(t,s)}}})],1)])})),s("th",{staticClass:"actions",attrs:{scope:"col"}},[e.isCurrentUserManager?s("button-simple",{class:{"is-small":!0,highlighted:e.isEmptyTask},attrs:{icon:"plus",text:e.$t("tasks.create_tasks")},on:{click:function(t){return e.$emit("create-tasks")}}}):e._e()],1)],2)]),e._l(e.displayedShots,(function(t,i){return!e.isLoading&&e.isListVisible?s("tbody",{key:e.getGroupKey(t,i,"sequence_id"),staticClass:"datatable-body"},[s("tr",{staticClass:"datatable-type-header"},[s("th",{attrs:{scope:"rowgroup",colspan:e.visibleColumns}},[s("span",{staticClass:"datatable-row-header",on:{click:function(s){return e.$emit("sequence-clicked",t[0].sequence_name)}}},[e._v(" "+e._s(t[0]?t[0].sequence_name:"")+" ")])])]),e._l(t,(function(t,n){return s("tr",{key:t.id,staticClass:"datatable-row",class:{canceled:t.canceled}},[s("th",{class:{"datatable-row-header":!0,"shot-name":!0,name:!0,bold:!t.canceled},attrs:{scope:"row"}},[s("div",{staticClass:"flexrow"},[s("entity-thumbnail",{attrs:{entity:t,"empty-height":32}}),s("router-link",{attrs:{to:e.shotPath(t.id),title:t.full_name}},[e._v(" "+e._s(t.name)+" ")])],1)]),!e.isCurrentUserClient&&e.isShowInfos&&e.isShotDescription?s("description-cell",{staticClass:"description",attrs:{entry:t}}):e._e(),e._l(e.shotMetadataDescriptors,(function(i){return e.isShowInfos?s("td",{key:t.id+"-"+i.id,staticClass:"metadata-descriptor"},[s("div",{staticClass:"ellipsis",attrs:{title:t.data?t.data[i.field_name]:""}},[e._v(" "+e._s(t.data?t.data[i.field_name]:"")+" ")])]):e._e()})),!e.isCurrentUserClient&&e.isShowInfos&&e.isTime?s("td",{staticClass:"time-spent"},[e._v(" "+e._s(e.formatDuration(t.timeSpent))+" ")]):e._e(),e.isFrames&&e.isShowInfos?s("td",{staticClass:"frames"},[e._v(" "+e._s(t.nb_frames)+" ")]):e._e(),e.isFrameIn&&e.isShowInfos?s("td",{staticClass:"framein"},[e._v(" "+e._s(t.data&&t.data.frame_in?t.data.frame_in:"")+" ")]):e._e(),e.isFrameOut&&e.isShowInfos?s("td",{staticClass:"frameout"},[e._v(" "+e._s(t.data&&t.data.frame_out?t.data.frame_out:"")+" ")]):e._e(),e.isFps&&e.isShowInfos?s("td",{staticClass:"fps"},[e._v(" "+e._s(t.data&&t.data.fps?t.data.fps:"")+" ")]):e._e(),e._l(e.displayedValidationColumns,(function(a,o){return e.isLoading?e._e():s("validation-cell",{key:a+"-"+t.id,ref:"validation-"+e.getIndex(n,i)+"-"+o,refInFor:!0,class:{"validation-cell":!e.hiddenColumns[a],"hidden-validation-cell":e.hiddenColumns[a]},attrs:{column:e.taskTypeMap[a],entity:t,"task-test":e.taskMap[t.validations[a]],minimized:e.hiddenColumns[a],selected:e.shotSelectionGrid[e.getIndex(n,i)][o],rowX:e.getIndex(n,i),columnY:o,"is-assignees":e.isShowAssignations},on:{select:e.onTaskSelected,unselect:e.onTaskUnselected}})})),e.isCurrentUserManager?s("row-actions",{attrs:{entry:t,"hide-history":!1},on:{"delete-clicked":function(s){return e.$emit("delete-clicked",t)},"edit-clicked":function(s){return e.$emit("edit-clicked",t)},"history-clicked":function(s){return e.$emit("shot-history",t)},"restore-clicked":function(s){return e.$emit("restore-clicked",t)}}}):s("td",{staticClass:"actions"})],2)}))],2):e._e()}))],2)],1),s("table-info",{attrs:{"is-loading":e.isLoading,"is-error":e.isError}}),!e.isEmptyList||e.isCurrentUserClient||e.isLoading?e._e():s("div",{staticClass:"has-text-centered"},[e._m(0),s("p",{staticClass:"info"},[e._v(e._s(e.$t("shots.empty_list")))]),s("button-simple",{staticClass:"level-item big-button",attrs:{text:e.$t("shots.new_shots")},on:{click:function(t){return e.$emit("add-shots")}}})],1),e.isEmptyList&&e.isCurrentUserClient&&!e.isLoading?s("div",{staticClass:"has-text-centered"},[e._m(1),s("p",{staticClass:"info"},[e._v(e._s(e.$t("shots.empty_list_client")))])]):e._e(),e.isEmptyList||e.isLoading?e._e():s("p",{staticClass:"has-text-centered nb-shots"},[e._v(" "+e._s(e.displayedShotsLength)+" "+e._s(e.$tc("shots.number",e.displayedShotsLength))+" ("+e._s(e.formatDuration(e.displayedShotsTimeSpent))+" "+e._s(e.$tc("main.days_spent",e.displayedShotsTimeSpent))+", "+e._s(e.displayedShotsFrames)+" "+e._s(e.$tc("main.nb_frames",e.displayedShotsFrames))+") ")])],1)},Ii=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("p",{staticClass:"info"},[i("img",{attrs:{src:s("732b")}})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("p",{staticClass:"info"},[i("img",{attrs:{src:s("732b")}})])}],$i={name:"shot-list",mixins:[oe["a"],ce["a"],re["a"]],props:{displayedShots:{type:Array,default:function(){return[]}},isError:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},validationColumns:{type:Array,default:function(){return[]}}},data:function(){return{lastSelection:null,hiddenColumns:{},lastHeaderMenuDisplayed:null}},components:{ButtonSimple:de["a"],ChevronDownIcon:ae["f"],DescriptionCell:le["a"],EntityThumbnail:ue["a"],RowActions:pe["a"],TableHeaderMenu:ge,TableMetadataHeaderMenu:Te,TableInfo:ye["a"],ValidationCell:xe["a"]},computed:Object(c["a"])(Object(c["a"])({},Object(l["c"])(["currentProduction","currentEpisode","displayedShotsLength","displayedShotsTimeSpent","displayedShotsFrames","isCurrentUserAdmin","isCurrentUserManager","isCurrentUserClient","isFps","isFrames","isFrameIn","isFrameOut","isSingleEpisode","isShotDescription","isShowAssignations","isShowInfos","isTime","isTVShow","nbSelectedTasks","shotFilledColumns","shotMap","shotMetadataDescriptors","shotSearchText","shotSelectionGrid","taskMap","taskTypeMap"])),{},{isEmptyList:function(){return this.displayedShots&&0===this.displayedShots[0].length&&!this.isLoading&&!this.isError&&(!this.shotSearchText||0===this.shotSearchText.length)},createTasksPath:function(){return this.getPath("create-shot-tasks")},manageShotsPath:function(){var e={name:"manage-shots",params:{production_id:this.currentProduction.id}};return this.isTVShow&&this.currentEpisode&&(e.name="episode-manage-shots",e.params.episode_id=this.currentEpisode.id),e},isEmptyTask:function(){return!this.isEmptyList&&!this.isLoading&&this.validationColumns&&0===this.validationColumns.length},isListVisible:function(){return!this.isLoading&&!this.isError&&this.displayedShotsLength>0},visibleColumns:function(){var e=2;return e+=!this.isCurrentUserClient&&this.isShowInfos&&this.isShotDescription?1:0,e+=this.shotMetadataDescriptors.length,e+=!this.isCurrentUserClient&&this.isShowInfos&&this.isTime?1:0,e+=this.isShowInfos?1:0,e+=this.isShowInfos&&this.isFrameIn?1:0,e+=this.isShowInfos&&this.isFrameOut?1:0,e+=this.isShowInfos&&this.isFps?1:0,e+=this.displayedValidationColumns.length,e},displayedValidationColumns:function(){var e=this;return this.validationColumns.filter((function(t){return e.shotFilledColumns[t]&&(!e.hiddenColumns[t]||e.isShowInfos)}))}}),methods:Object(c["a"])(Object(c["a"])({},Object(l["b"])(["displayMoreShots"])),{},{onBodyScroll:function(e,t){this.$emit("scroll",t.scrollTop);var s=this.$refs.body.scrollHeight-this.$refs.body.offsetHeight;s<t.scrollTop+100&&this.loadMoreShots()},loadMoreShots:function(){this.displayMoreShots()},resizeHeaders:function(){return!0},taskTypePath:function(e){return this.isTVShow&&this.currentEpisode?{name:"episode-task-type",params:{production_id:this.currentProduction.id,episode_id:this.currentEpisode.id,task_type_id:e,type:"shots"}}:{name:"task-type",params:{production_id:this.currentProduction.id,task_type_id:e,type:"shots"}}},shotPath:function(e){return this.getPath("shot",e)},editPath:function(e){return this.getPath("edit-shot",e)},deletePath:function(e){return this.getPath("delete-shot",e)},restorePath:function(e){return this.getPath("restore-shot",e)},getPath:function(e,t){var s={name:e,params:{production_id:this.currentProduction.id}};return this.isTVShow&&this.currentEpisode&&(s.name="episode-".concat(e),s.params.episode_id=this.currentEpisode.id),t&&(s.params.shot_id=t),s},getIndex:function(e,t){var s=0,i=0;while(s<t)i+=this.displayedShots[s].length,s++;return e+i}}),watch:{validationColumns:function(){this.initHiddenColumns(this.validationColumns,this.hiddenColumns)}}},Li=$i,Fi=(s("edda"),Object(_["a"])(Li,Mi,Ii,!1,null,"744289ce",null)),Ni=Fi.exports,qi={name:"shots",mixins:[te,se],components:{AddMetadataModal:Ve,AddThumbnailsModal:Je,BuildFilterModal:Ze["a"],ButtonSimple:de["a"],CreateTasksModal:ot,DeleteModal:rt["a"],EditShotModal:bi["a"],ImportModal:lt["a"],HardDeleteModal:ut["a"],ManageShotsModal:xi,ImportRenderModal:dt["a"],SearchField:pt["a"],SearchQueryList:ht["a"],SortingInfo:yt,ShotHistoryModal:Di,ShowAssignationsButton:Tt,ShowInfosButton:jt,ShotList:Ni,TaskInfo:Dt["a"]},data:function(){return{initialLoading:!0,deleteAllTasksLockText:null,descriptorToEdit:{},formData:null,historyShot:{},parsedCSV:[],shotToDelete:null,shotToEdit:null,taskTypeForTaskDeletion:null,modals:{isAddMetadataDisplayed:!1,isAddThumbnailsDisplayed:!1,isBuildFilterDisplayed:!1,isCreateTasksDisplayed:!1,isDeleteDisplayed:!1,isDeleteMetadataDisplayed:!1,isDeleteAllTasksDisplayed:!1,isImportRenderDisplayed:!1,isImportDisplayed:!1,isManageDisplayed:!1,isNewDisplayed:!1,isRestoreDisplayed:!1,isShotHistoryDisplayed:!1},loading:{addMetadata:!1,addThumbnails:!1,creatingTasks:!1,creatingTasksStay:!1,deleteAllTasks:!1,deleteMetadata:!1,edit:!1,del:!1,importing:!1,restore:!1,stay:!1},errors:{addMetadata:!1,deleteMetadata:!1,creatingTasks:!1,deleteAllTasks:!1,importing:!1}}},computed:Object(c["a"])(Object(c["a"])({},Object(l["c"])(["currentEpisode","currentProduction","displayedShotsBySequence","episodeMap","episodes","isCurrentUserClient","isCurrentUserManager","isFrames","isFrameIn","isFrameOut","isFps","isTime","isShotsLoading","isShotsLoadingError","isShowAssignations","isTVShow","nbSelectedTasks","openProductions","sequences","selectedTasks","shotMap","shotFilledColumns","shotsCsvFormData","shotSearchQueries","shotSearchText","shotsPath","shotValidationColumns","shotListScrollPosition","shotSorting","taskTypeMap"])),{},{searchField:function(){return this.$refs["shot-search-field"]},addThumbnailsModal:function(){return this.$refs["add-thumbnails-modal"]},columns:function(){var e=["Sequence","Name","Description","Nb Frames","FPS","Frame In","Frame Out"];return this.isTVShow&&e.unshift("Episode"),e},dataMatchers:function(){var e=["Sequence","Name"];return this.isTVShow&&e.unshift("Episode"),e},filteredShots:function(){var e=this,t={};return this.displayedShotsBySequence.forEach((function(s){s.forEach((function(s){var i="".concat(s.sequence_name).concat(s.name);e.isTVShow&&(i=s.episode_name+i),t[i]=!0}))})),t}}),created:function(){this.setLastProductionScreen("shots")},mounted:function(){var e=this,t=function(){e.loadShots((function(t){setTimeout((function(){e.initialLoading=!1}),200),t||setTimeout((function(){e.onSearchChange(),e.$refs["shot-list"].setScrollPosition(e.shotListScrollPosition)}),500)}))};this.shotSearchText.length>0&&this.$refs["shot-search-field"].setValue(this.shotSearchText),Object.keys(this.shotMap).length<2||this.shotValidationColumns.length>0&&!Object.keys(this.shotMap)[0].validations?setTimeout((function(){e.currentProduction&&e.episodes.length>0&&e.episodes[0].project_id!==e.currentProduction.id?e.loadEpisodes().then((function(){return t()})).catch(console.error):t()}),100):(this.isShotsLoading||(this.initialLoading=!1),this.onSearchChange(),this.$refs["shot-list"].setScrollPosition(this.shotListScrollPosition))},methods:Object(c["a"])(Object(c["a"])({},Object(l["b"])(["addMetadataDescriptor","createTasks","changeShotSort","commentTaskWithPreview","deleteAllShotTasks","deleteShot","deleteMetadataDescriptor","editShot","getShotsCsvLines","hideAssignations","loadEpisodes","loadShots","removeShotSearch","restoreShot","saveShotSearch","setLastProductionScreen","setPreview","setShotSearch","showAssignations","uploadShotFile"])),{},{confirmAddMetadata:function(e){var t=this;this.loading.addMetadata=!0,e.entity_type="Shot",this.addMetadataDescriptor(e).then((function(){t.loading.addMetadata=!1,t.modals.isAddMetadataDisplayed=!1})).catch((function(e){console.error(e),t.loading.addMetadata=!1,t.errors.addMetadata=!0}))},closeMetadataModal:function(){this.modals.isAddMetadataDisplayed=!1},confirmDeleteMetadata:function(){var e=this;this.errors.deleteMetadata=!1,this.loading.deleteMetadata=!0,this.deleteMetadataDescriptor(this.descriptorIdToDelete).then((function(){e.errors.deleteMetadata=!1,e.loading.deleteMetadata=!1,e.modals.isDeleteMetadataDisplayed=!1})).catch((function(t){console.error(t),e.errors.deleteMetadata=!0,e.loading.deleteMetadata=!1}))},onAddMetadataClicked:function(){this.descriptorToEdit={},this.modals.isAddMetadataDisplayed=!0},onDeleteMetadataClicked:function(e){this.descriptorIdToDelete=e,this.modals.isDeleteMetadataDisplayed=!0},onDeleteClicked:function(e){this.shotToDelete=e,this.modals.isDeleteDisplayed=!0},onEditClicked:function(e){this.shotToEdit=e,this.modals.isNewDisplayed=!0},onRestoreClicked:function(e){this.shotToRestore=e,this.modals.isRestoreDisplayed=!0},onEditMetadataClicked:function(e){this.descriptorToEdit=this.currentProduction.descriptors.find((function(t){return t.id===e})),this.modals.isAddMetadataDisplayed=!0},confirmEditShot:function(e){var t=this;e.id=this.shotToEdit.id,this.loading.edit=!0,this.errors.edit=!1,this.editShot(e).then((function(){t.loading.edit=!1,t.modals.isNewDisplayed=!1})).catch((function(e){console.error(e),t.loading.edit=!1,t.errors.edit=!0}))},confirmDeleteAllTasks:function(e){var t=this,s=this.taskTypeForTaskDeletion.id,i=this.currentProduction.id;this.errors.deleteAllTasks=!1,this.loading.deleteAllTasks=!0,this.deleteAllShotTasks({projectId:i,taskTypeId:s,selectionOnly:e}).then((function(){t.loading.deleteAllTasks=!1,t.modals.isDeleteAllTasksDisplayed=!1})).catch((function(e){console.error(e),t.loading.deleteAllTasks=!1,t.errors.deleteAllTasks=!0}))},confirmDeleteShot:function(){var e=this;this.loading.del=!0,this.errors.del=!1,this.deleteShot(this.shotToDelete).then((function(){e.loading.del=!1,e.modals.isDeleteDisplayed=!1})).catch((function(t){console.error(t),e.loading.del=!1,e.errors.del=!0}))},confirmRestoreShot:function(){var e=this;this.loading.restore=!0,this.errors.restore=!1,this.restoreShot(this.shotToRestore).then((function(){e.loading.restore=!1,e.modals.isRestoreDisplayed=!1})).catch((function(t){console.error(t),e.loading.restore=!1,e.errors.restore=!0}))},confirmAddThumbnails:function(e){var t=this,s=function(e){return t.addThumbnailsModal.markLoading(e.task.entity_id),t.commentTaskWithPreview({taskId:e.task.id,commentText:"",taskStatusId:e.task.task_status_id,form:e}).then((function(s){s.newComment;var i=s.preview;return t.setPreview({taskId:e.task.id,entityId:e.task.entity_id,previewId:i.id})})).then((function(){return t.addThumbnailsModal.markUploaded(e.task.entity_id),Promise.resolve()}))};this.loading.addThumbnails=!0,J["a"].runPromiseMapAsSeries(e,s).then((function(){t.loading.addThumbnails=!1,t.modals.isAddThumbnailsDisplayed=!1}))},confirmCreateTasks:function(e){var t=this,s=e.form,i=e.selectionOnly;this.loading.creatingTasks=!0,this.runTasksCreation(s,i).then((function(){t.reset(),t.hideCreateTasksModal(),t.loading.creatingTasks=!1})).catch((function(e){t.errors.creatingTasks=!0,console.errror(e)}))},confirmCreateTasksAndStay:function(e){var t=this,s=e.form,i=e.selectionOnly;this.loading.creatingTasksStay=!0,this.runTasksCreation(s,i).then((function(){t.reset(),t.loading.creatingTasksStay=!1})).catch((function(e){t.errors.creatingTasks=!0,console.errror(e)}))},runTasksCreation:function(e,t){return this.errors.creatingTasks=!1,this.createTasks({task_type_id:e.task_type_id,project_id:this.currentProduction.id,type:"shots",selectionOnly:t})},reset:function(){var e=this;this.initialLoading=!0,this.loadShots((function(t){t&&console.error(t),e.initialLoading=!1}))},resetEditModal:function(){var e={name:""};this.sequences.length>0&&(e.sequence_id=this.sequences[0].id),this.openProductions.length>0&&(e.production_id=this.openProductions[0].id),this.shotToEdit=e},deleteText:function(){var e=this.shotToDelete;return e?this.$t("shots.delete_text",{name:e.name}):""},deleteAllTasksText:function(){var e=this.taskTypeForTaskDeletion;return e?this.$t("tasks.delete_all_text",{name:e.name}):""},restoreText:function(){var e=this.shotToRestore;return e?this.$t("shots.restore_text",{name:e.name}):""},renderImport:function(e,t){var s=this;this.loading.importing=!0,this.errors.importing=!1,this.formData=e,"file"===t&&(e=e.get("file")),X["a"].processCSV(e).then((function(e){s.parsedCSV=e,s.hideImportModal(),s.loading.importing=!1,s.showImportRenderModal()}))},uploadImportFile:function(e,t){var s=this,i=new FormData,n="import.csv",a=X["a"].turnEntriesToCsvString(e),o=new File([a],n,{type:"text/csv"});i.append("file",o),this.loading.importing=!0,this.errors.importing=!1,this.$store.commit("SHOT_CSV_FILE_SELECTED",i),this.uploadShotFile(t).then((function(){s.loading.importing=!1,s.loadEpisodes().catch(console.error),s.hideImportRenderModal(),s.loadShots()})).catch((function(e){console.error(e),s.loading.importing=!1,s.errors.importing=!0}))},resetImport:function(){this.errors.importing=!1,this.hideImportRenderModal(),this.$store.commit("SHOT_CSV_FILE_SELECTED",null),this.$refs["import-modal"].reset(),this.showImportModal()},onDeleteAllTasksClicked:function(e){var t=this.taskTypeMap[e];this.taskTypeForTaskDeletion=t,this.deleteAllTasksLockText=t.name,this.modals.isDeleteAllTasksDisplayed=!0},onSequenceClicked:function(e){this.searchField.setValue("".concat(this.shotSearchText," ").concat(e)),this.onSearchChange()},onSearchChange:function(){var e=this.searchField.getValue();1!==e.length&&(this.setShotSearch(e),this.setSearchInUrl())},saveScrollPosition:function(e){this.$store.commit("SET_SHOT_LIST_SCROLL_POSITION",e)},saveSearchQuery:function(e){this.saveShotSearch(e).catch(console.error)},removeSearchQuery:function(e){this.removeShotSearch(e).catch(console.error)},getPath:function(e){var t={name:e,params:{production_id:this.currentProduction.id}};return this.isTVShow&&this.currentEpisode&&(t.name="episode-".concat(e),t.params.episode_id=this.currentEpisode.id),t},showManageShots:function(){this.modals.isManageDisplayed=!0},hideManageShots:function(){this.modals.isManageDisplayed=!1},showShotHistoryModal:function(e){this.historyShot=e,this.modals.isShotHistoryDisplayed=!0},hideShotHistoryModal:function(){this.modals.isShotHistoryDisplayed=!1},onExportClick:function(){var e=this;this.getShotsCsvLines().then((function(t){var s=[Q()().format("YYYY-MM-DD"),"kitsu",e.currentProduction.name,e.$t("shots.title")];e.currentEpisode&&s.splice(3,0,e.currentEpisode.name);var i=ee["a"].slugify(s.join("_")),n=["Sequence","Name","Description"];e.currentEpisode&&n.splice(0,0,"Episode"),Object(Z["d"])(Object(Y["a"])(e.currentProduction.descriptors)).filter((function(e){return"Shot"===e.entity_type})).forEach((function(e){n.push(e.name)})),e.isTime&&n.push("Time spent"),e.isFrames&&n.push("Nb Frames"),e.isFrameIn&&n.push("Frame In"),e.isFrameOut&&n.push("Frame Out"),e.isFps&&n.push("FPS"),e.shotValidationColumns.forEach((function(t){n.push(e.taskTypeMap[t].name),n.push("Assignations")})),X["a"].buildCsvFile(i,[n].concat(t))}))},onChangeSortClicked:function(e){this.changeShotSort(e)},confirmBuildFilter:function(e){this.modals.isBuildFilterDisplayed=!1,this.$refs["shot-search-field"].setValue(e),this.onSearchChange()}}),watch:{currentProduction:function(){var e=this;this.$refs["shot-search-field"].setValue(""),this.$store.commit("SET_SHOT_LIST_SCROLL_POSITION",0),this.initialLoading=!0,this.isTVShow||this.loadShots((function(){e.initialLoading=!1,e.setSearchFromUrl(),e.onSearchChange()}))},currentEpisode:function(){var e=this,t=function(){e.initialLoading=!0,e.loadShots((function(){e.setSearchFromUrl(),e.onSearchChange(),e.initialLoading=!1}))};this.isTVShow&&this.currentEpisode&&(this.currentProduction&&this.episodes.length>0&&this.episodes[0].project_id!==this.currentProduction.id?this.loadEpisodes().then((function(){return t()})).catch(console.error):t())}},metaInfo:function(){return this.isTVShow?{title:"".concat(this.currentProduction?this.currentProduction.name:"")+" - ".concat(this.currentEpisode?this.currentEpisode.name:"")+" | ".concat(this.$t("shots.title")," - Kitsu")}:{title:"".concat(this.currentProduction.name," ").concat(this.$t("shots.title")," - Kitsu")}}},Ri=qi,Bi=(s("62ab"),Object(_["a"])(Ri,gi,yi,!1,null,"4e46f37e",null)),Vi=Bi.exports,zi=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"task-type columns fixed-page"},[s("div",{staticClass:"column main-column"},[s("div",{ref:"page",staticClass:"task-type page"},[s("div",{ref:"header",staticClass:"task-type-header page-header flexrow-item"},[s("div",{staticClass:"flexcolumn-item flexrow"},[s("router-link",{staticClass:"back-link flexrow-item",attrs:{to:e.backPath}},[s("chevron-left-icon")],1),s("task-type-name",{staticClass:"flexrow-item",attrs:{"task-type":e.currentTaskType}}),s("div",{staticClass:"filler"}),s("div",{staticClass:"flexrow-item"},[e.isActiveTab("schedule")?e._e():s("button-simple",{attrs:{icon:"download",title:e.$t("main.csv.export_file")},on:{click:e.onExportClick}})],1)],1),s("div",{staticClass:"tabs mt1"},[s("ul",[s("li",{class:{"is-active":e.isActiveTab("tasks")}},[s("router-link",{attrs:{to:e.tasksPath}},[e._v(" "+e._s(e.$t("tasks.tasks"))+" ")])],1),s("li",{class:{"is-active":e.isActiveTab("schedule")}},[s("router-link",{attrs:{to:e.schedulePath}},[e._v(" "+e._s(e.$t("schedule.title"))+" ")])],1),s("li",{class:{"is-active":e.isActiveTab("estimation")}},[s("router-link",{attrs:{to:e.estimationPath}},[e._v(" "+e._s(e.$t("estimation.title"))+" ")])],1)])]),s("div",{staticClass:"flexcolumn-item flexrow"},[s("div",{staticClass:"flexrow-item"},[s("search-field",{ref:"task-search-field",attrs:{"can-save":!0,placeholder:"ex: retake chara"},on:{change:e.onSearchChange,save:e.saveSearchQuery}})],1),s("div",{staticClass:"filler"}),e.isActiveTab("tasks")?s("div",{staticClass:"flexrow-item"},[s("combobox",{attrs:{label:e.$t("main.sorted_by"),options:e.sortOptions,"locale-key-prefix":"tasks.fields."},model:{value:e.currentSort,callback:function(t){e.currentSort=t},expression:"currentSort"}})],1):e._e(),e.isActiveTab("schedule")&&e.isCurrentUserManager?s("div",{staticClass:"flexrow-item field"},[s("label",{staticClass:"label"},[e._v(" "+e._s(e.$t("main.start_date"))+" ")]),s("datepicker",{attrs:{"wrapper-class":"datepicker","input-class":"date-input input",language:e.locale,"disabled-dates":e.startDisabledDates,"monday-first":!0,format:"yyyy-MM-dd"},model:{value:e.schedule.selectedStartDate,callback:function(t){e.$set(e.schedule,"selectedStartDate",t)},expression:"schedule.selectedStartDate"}})],1):e._e(),e.isActiveTab("schedule")&&e.isCurrentUserManager?s("div",{staticClass:"flexrow-item field"},[s("label",{staticClass:"label"},[e._v(" "+e._s(e.$t("main.end_date"))+" ")]),s("datepicker",{attrs:{"wrapper-class":"datepicker","input-class":"date-input input",language:e.locale,"disabled-dates":e.endDisabledDates,"monday-first":!0,format:"yyyy-MM-dd"},model:{value:e.schedule.selectedEndDate,callback:function(t){e.$set(e.schedule,"selectedEndDate",t)},expression:"schedule.selectedEndDate"}})],1):e._e(),e.isActiveTab("schedule")?s("div",{staticClass:"flexrow-item color-option"},[s("combobox",{staticClass:"flexrow-item",attrs:{label:e.$t("tasks.colors.title"),options:e.schedule.colorOptions,"locale-key-prefix":"tasks.colors."},model:{value:e.schedule.currentColor,callback:function(t){e.$set(e.schedule,"currentColor",t)},expression:"schedule.currentColor"}})],1):e._e(),e.isActiveTab("schedule")?s("div",{staticClass:"flexrow-item zoom-level"},[e.isActiveTab("schedule")?s("combobox-number",{attrs:{label:e.$t("schedule.zoom_level"),options:e.schedule.zoomOptions},model:{value:e.schedule.zoomLevel,callback:function(t){e.$set(e.schedule,"zoomLevel",t)},expression:"schedule.zoomLevel"}}):e._e()],1):e._e()])]),s("div",{staticClass:"query-list"},[e.loading.entities?e._e():s("search-query-list",{attrs:{queries:e.searchQueries},on:{"change-search":e.changeSearch,"remove-search":e.removeSearchQuery}})],1),e.isActiveTab("tasks")?s("task-list",{ref:"task-list",attrs:{tasks:e.tasks,"is-assets":e.isAssets,"is-loading":e.loading.entities,"is-error":e.errors.entities},on:{"task-selected":e.onTaskSelected}}):e._e(),e.isActiveTab("schedule")?s("div",{staticClass:"task-type-schedule flexrow-item"},[s("schedule",{ref:"schedule-widget",attrs:{"start-date":e.schedule.startDate,"end-date":e.schedule.endDate,hierarchy:e.schedule.scheduleItems,"zoom-level":e.schedule.zoomLevel,height:e.schedule.scheduleHeight,"is-loading":e.loading.entities,"is-estimation-linked":!0},on:{"item-changed":e.saveTaskScheduleItem,"root-element-expanded":e.expandPersonElement,"estimation-changed":e.updateEstimation}})],1):e._e(),e.isActiveTab("estimation")?s("div",{staticClass:"task-type-estimation flexrow-item"},[s("estimation-helper",{ref:"estimation-widget",attrs:{"is-assets":e.isAssets,tasks:e.tasks},on:{"estimation-changed":e.updateEstimation}})],1):e._e()],1)]),1===e.nbSelectedTasks?s("div",{staticClass:"column side-column"},[s("task-info",{attrs:{task:Object.values(e.selectedTasks)[0]}})],1):e._e()])},Ui=[],Hi=(s("498a"),s("2430")),Gi=s("ceca"),Wi=s.n(Gi),Yi=s("2017"),Ki=s("ca76"),Qi=s("fa33"),Xi=s("1e4c"),Ji=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"estimation-wrapper"},[s("div",{staticClass:"estimation-helper columns"},[s("div",{ref:"body",staticClass:"task-list column datatable-wrapper"},[s("table",{staticClass:"datatable"},[s("thead",{staticClass:"datatable-head"},[s("tr",[s("th",{staticClass:"assignees"},[e._v(" "+e._s(e.$t("tasks.fields.assignees"))+" ")]),s("th",{staticClass:"thumbnail"}),e.isAssets?s("th",{staticClass:"asset-type"},[e._v(" "+e._s(e.$t("tasks.fields.asset_type"))+" ")]):s("th",{staticClass:"sequence"},[e._v(" "+e._s(e.$t("tasks.fields.sequence"))+" ")]),s("th",{staticClass:"name"},[e._v(" "+e._s(e.$t("tasks.fields.entity_name"))+" ")]),e.isAssets?e._e():s("th",{staticClass:"frames numeric-cell"},[e._v(" "+e._s(e.$t("tasks.fields.frames"))+" ")]),e.isAssets?e._e():s("th",{staticClass:"seconds numeric-cell"},[e._v(" "+e._s(e.$t("tasks.fields.seconds").substring(0,3))+". ")]),s("th",{staticClass:"estimation numeric-cell"},[e._v(" "+e._s(e.$t("tasks.fields.estimation").substring(0,3))+". ")]),s("th",{staticClass:"empty"})])]),s("tbody",{staticClass:"datatable-body"},e._l(e.tasksByPerson,(function(t,i){return s("tr",{key:t.id,ref:"task-"+t.id,refInFor:!0,class:{"datatable-row":!0,selected:e.selectionGrid[t.id],"task-line":!0}},[s("td",{staticClass:"assignees flexrow"},e._l(t.assignees,(function(i){return t.assignees.length>1?s("people-avatar",{key:t.id+"-"+i,staticClass:"flexrow-item",attrs:{person:e.personMap[i],size:30,"font-size":17}}):e._l(t.assignees,(function(i){return s("span",{key:t.id+"-"+i,staticClass:"flexrow"},[s("people-avatar",{staticClass:"flexrow-item",attrs:{person:e.personMap[i],size:30,"font-size":17}}),s("people-name",{staticClass:"flexrow-item",attrs:{person:e.personMap[i]}})],1)}))})),1),s("td",{staticClass:"thumbnail"},[s("entity-thumbnail",{attrs:{entity:e.getEntity(t.entity.id),width:50,height:33,"empty-width":50,"empty-height":31}})],1),e.isAssets?s("td",{staticClass:"asset-type"},[e._v(" "+e._s(e.getEntity(t.entity.id).asset_type_name)+" ")]):s("td",{staticClass:"sequence"},[e._v(" "+e._s(e.getEntity(t.entity.id).sequence_name)+" ")]),s("td",{staticClass:"name"},[e._v(" "+e._s(e.getEntity(t.entity.id).name)+" ")]),e.isAssets?e._e():s("td",{staticClass:"frames numeric-cell"},[e._v(" "+e._s(e.getEntity(t.entity.id).nb_frames)+" ")]),e.isAssets?e._e():s("td",{staticClass:"frames numeric-cell"},[e._v(" "+e._s(e.getSeconds(t))+" ")]),s("td",{staticClass:"estimation numeric-cell",on:{click:function(s){return e.selectTask(s,t,i)}}},[e.isCurrentUserManager?s("input",{ref:t.id+"-estimation",refInFor:!0,staticClass:"input stylehidden",domProps:{value:e.formatDuration(t.estimation)},on:{blur:e.onInputBlur,change:function(s){return e.estimationUpdated(s,t,i)},keydown:e.onKeyDown,mouseout:e.onInputMouseOut,mouseover:e.onInputMouseOver}}):s("span",[e._v(" "+e._s(e.formatDuration(t.estimation))+" ")])]),s("td")])})),0)])]),s("div",{staticClass:"person-list column datatable-wrapper"},[s("table",{staticClass:"datatable"},[s("thead",{ref:"thead",staticClass:"datatable-head"},[s("tr",[s("th",{staticClass:"assignees"},[e._v(" "+e._s(e.$t("tasks.fields.assignees"))+" ")]),s("th",{staticClass:"count numeric-cell"},[e._v(" "+e._s(e.$t("tasks.fields.count"))+" ")]),s("th",{staticClass:"frames numeric-cell"},[e._v(" "+e._s(e.$t("tasks.fields.frames"))+" ")]),s("th",{staticClass:"seconds numeric-cell"},[e._v(" "+e._s(e.$t("tasks.fields.seconds").substring(0,3))+". ")]),s("th",{staticClass:"estimation numeric-cell"},[e._v(" "+e._s(e.$t("tasks.fields.estimation").substring(0,3))+". ")]),s("th",{staticClass:"quota numeric-cell"},[e._v(" "+e._s(e.$t("tasks.fields.estimated_quota"))+". ")]),s("th",{staticClass:"empty"})])]),s("tbody",{staticClass:"datatable-body"},e._l(e.assignees,(function(t){return s("tr",{key:t.id,ref:"person-"+t.id,refInFor:!0,class:{"datatable-row":!0,"task-line":!0}},[s("td",{staticClass:"person flexrow"},[s("people-avatar",{staticClass:"flexrow-item",attrs:{person:t,size:30,"font-size":17}}),s("people-name",{staticClass:"flexrow-item",attrs:{person:t}})],1),s("td",{staticClass:"count numeric-cell"},[e._v(" "+e._s(t.count)+" ")]),s("td",{staticClass:"frames numeric-cell"},[e._v(" "+e._s(t.frames)+" ")]),s("td",{staticClass:"seconds numeric-cell"},[e._v(" "+e._s(t.seconds)+" ")]),s("td",{staticClass:"estimation numeric-cell"},[e._v(" "+e._s(t.estimation)+" ")]),s("td",{staticClass:"quota numeric-cell"},[e._v(" "+e._s(t.quota)+" ")]),s("td")])})),0)])])])])},Zi=[],en=(s("4ec9"),s("b680"),s("6062"),s("eb23")),tn=s("bcd2"),sn={name:"estimation-helper",mixins:[en["a"],re["a"]],components:{EntityThumbnail:ue["a"],PeopleAvatar:Zt["a"],PeopleName:es["a"]},props:{isAssets:{type:Boolean,default:!0},tasks:{type:Array,default:function(){return[]}}},data:function(){return{lastSelection:0,lastShiftSelection:0,selectionGrid:{}}},mounted:function(){},computed:Object(c["a"])(Object(c["a"])({},Object(l["c"])(["assetMap","currentProduction","isCurrentUserManager","organisation","personMap","shotMap"])),{},{assignees:function(){var e=this,t=new Set,s=new Map,i=new Map,n=new Map,a=new Map,o=[];return this.tasks.forEach((function(o){var r=e.getEntity(o.entity_id);o.assignees.forEach((function(c){if(t.add(c),s.set(c,(s.get(c)||0)+1),a.set(c,(a.get(c)||0)+o.estimation),!e.isAssets){var l=r.nb_frames||0,d=Object(tn["c"])(l,e.currentProduction,r);i.set(c,(i.get(c)||0)+d),n.set(c,(n.get(c)||0)+l)}}))})),t.forEach((function(t,s){return o.push(e.personMap[s])})),o.sort(Wi()("name")).map((function(t){var o=a.get(t.id)||0,r=i.get(t.id)||0,l=n.get(t.id)||0,d=Object(ui["n"])(e.organisation,o),u=o>0?r/d:0;return Object(c["a"])(Object(c["a"])({},t),{},{count:s.get(t.id)||0,estimation:e.formatDuration(o),frames:l,quota:u.toFixed(2),seconds:r.toFixed(2)})}))},tasksByPerson:function(){return Object(Y["a"])(this.tasks).sort(Wi()(this.compareFirstAssignees))}}),methods:Object(c["a"])(Object(c["a"])({},Object(l["b"])(["updateTask"])),{},{frameToSeconds:tn["c"],getEntity:function(e){return this.isAssets?this.assetMap[e]:this.shotMap[e]},compareFirstAssignees:function(e,t){if(e.assignees.length>0&&t.assignees.length>0){var s=this.personMap[e.assignees[0]],i=this.personMap[t.assignees[0]];return s.name.localeCompare(i.name)}return e.assignees.length>0?-1:t.assignees.length>0?1:-1},getSeconds:function(e){var t=this.getEntity(e.entity_id);return Object(tn["c"])(t.nb_frames,this.currentProduction,t)},estimationUpdated:function(e,t){var s=e.target.value;if(s&&s.length>0){var i=parseFloat(e.target.value);this.saveEstimations(i,t)}},saveEstimations:function(e,t){var s=this,i=Object.keys(this.selectionGrid);i.length>1?i.forEach((function(t){s.$emit("estimation-changed",{taskId:t,days:e})})):this.$emit("estimation-changed",{taskId:t.id,days:e})},onKeyDown:function(e){"Tab"===e.key?(this.pauseEvent(e),e.shiftKey?this.selectPrevious():this.selectNext()):"ArrowDown"===e.key?(this.pauseEvent(e),this.selectNext(e.shiftKey)):"ArrowUp"===e.key&&(this.pauseEvent(e),this.selectPrevious(e.shiftKey))},clearSelection:function(){this.selectionGrid={}},addToSelection:function(e){n.a.set(this.selectionGrid,e,!0)},selectTask:function(e,t,s){e.shiftKey?(e.ctrlKey||e.metaKey||this.clearSelection(),this.selectTaskRange(s)):(e.ctrlKey||e.metaKey||this.clearSelection(),this.selectSingleTask(s)),this.isCurrentUserManager&&this.focusInput(this.$refs[this.tasksByPerson[s].id+"-estimation"][0])},selectPrevious:function(e){var t=this.lastSelection;t=t-1<0?t=this.tasksByPerson.length-1:t-1,this.selectTask({shiftKey:e},this.tasksByPerson[t],t)},selectNext:function(e){var t=this.lastSelection;t=t+1>=this.tasksByPerson.length?t=0:t+1,this.selectTask({shiftKey:e},this.tasksByPerson[t],t)},selectSingleTask:function(e){var t=this.tasksByPerson[e];this.addToSelection(t.id),this.lastSelection=e,this.lastShiftSelection=e},selectTaskRange:function(e){var t=this,s=[];this.lastSelection=e,s=this.lastShiftSelection>e?Object(ui["q"])(e,this.lastShiftSelection):Object(ui["q"])(this.lastShiftSelection,e);var i=s.map((function(e){return t.tasksByPerson[e].id}));i.forEach((function(e){t.addToSelection(e)}))}})},nn=sn,an=(s("68b5"),Object(_["a"])(nn,Ji,Zi,!1,null,"bbabb860",null)),on=an.exports,rn=s("d7c7"),cn=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"data-list"},[s("div",{directives:[{name:"scroll",rawName:"v-scroll",value:e.onBodyScroll,expression:"onBodyScroll"}],ref:"body",staticClass:"datatable-wrapper"},[s("table",{staticClass:"datatable"},[s("thead",{ref:"thead",staticClass:"datatable-head"},[s("tr",[s("th",{ref:"th-thumbnail",staticClass:"thumbnail"}),e.isAssets?s("th",{ref:"th-type",staticClass:"asset-type"},[e._v(" "+e._s(e.$t("tasks.fields.asset_type"))+" ")]):s("th",{ref:"th-type",staticClass:"sequence"},[e._v(" "+e._s(e.$t("tasks.fields.sequence"))+" ")]),s("th",{ref:"th-name",staticClass:"name"},[e._v(" "+e._s(e.$t("tasks.fields.entity_name"))+" ")]),s("th",{ref:"th-status",staticClass:"status"},[e._v(" "+e._s(e.$t("tasks.fields.task_status"))+" ")]),s("th",{ref:"th-assignees",staticClass:"assignees"},[e._v(" "+e._s(e.$t("tasks.fields.assignees"))+" ")]),e.isAssets?e._e():s("th",{ref:"th-frames",staticClass:"frames"},[e._v(" "+e._s(e.$t("tasks.fields.frames"))+" ")]),s("th",{ref:"th-estimation",staticClass:"estimation"},[e._v(" "+e._s(e.$t("tasks.fields.estimation").substring(0,3))+". ")]),s("th",{ref:"th-duration",staticClass:"duration"},[e._v(" "+e._s(e.$t("tasks.fields.duration").substring(0,3))+". ")]),s("th",{ref:"th-retake-count",staticClass:"retake-count"},[e._v(" "+e._s(e.$t("tasks.fields.retake_count"))+" ")]),s("th",{ref:"th-estimation",staticClass:"start-date"},[e._v(" "+e._s(e.$t("tasks.fields.start_date"))+" ")]),s("th",{ref:"th-estimation",staticClass:"due-date"},[e._v(" "+e._s(e.$t("tasks.fields.due_date"))+" ")]),s("th",{ref:"th-status",staticClass:"real-start-date"},[e._v(" "+e._s(e.$t("tasks.fields.real_start_date"))+" ")]),s("th",{ref:"th-status",staticClass:"real-end-date"},[e._v(" "+e._s(e.$t("tasks.fields.real_end_date"))+" ")]),s("th",{ref:"th-status",staticClass:"last-comment-date"},[e._v(" "+e._s(e.$t("tasks.fields.last_comment_date"))+" ")]),s("th",{ref:"",staticClass:"empty"})])]),s("tbody",{staticClass:"datatable-body"},e._l(e.displayedTasks,(function(t,i){return s("tr",{key:t.id,ref:"task-"+t.id,refInFor:!0,class:{"task-line":!0,"datatable-row":!0,selected:e.selectionGrid[t.id]},on:{click:function(s){return e.selectTask(s,i,t)}}},[s("td",{staticClass:"thumbnail flexrow"},[s("entity-thumbnail",{staticClass:"flexrow-item",attrs:{entity:e.getEntity(t.entity.id),width:50,height:33,"empty-width":50,"empty-height":33}})],1),e.isAssets?s("td",{staticClass:"asset-type"},[e._v(" "+e._s(e.getEntity(t.entity.id).asset_type_name)+" ")]):s("td",{staticClass:"sequence"},[e._v(" "+e._s(e.getEntity(t.entity.id).sequence_name)+" ")]),s("td",{staticClass:"name"},[e._v(" "+e._s(e.getEntity(t.entity.id).name)+" ")]),s("validation-cell",{staticClass:"status unselectable",attrs:{"task-test":t,"is-border":!1,"is-assignees":!1,selectable:!1,"is-static":!0}}),s("td",{staticClass:"assignees"},[s("div",{staticClass:"flexrow"},e._l(t.assignees,(function(i){return s("people-avatar",{key:t.id+"-"+i,staticClass:"flexrow-item",attrs:{person:e.personMap[i],size:30,"font-size":17}})})),1)]),e.isAssets?e._e():s("td",{staticClass:"frames"},[e._v(" "+e._s(e.getEntity(t.entity.id).nb_frames)+" ")]),s("td",{staticClass:"estimation"},[e.selectionGrid[t.id]?s("input",{ref:t.id+"-estimation",refInFor:!0,staticClass:"input",domProps:{value:e.formatDuration(t.estimation)},on:{change:function(t){return e.updateEstimation(t.target.value)}}}):s("span",[e._v(" "+e._s(e.formatDuration(t.estimation))+" ")])]),s("td",{class:{duration:!0,error:e.isEstimationBurned(t)}},[e._v(" "+e._s(e.formatDuration(t.duration))+" ")]),s("td",{staticClass:"retake-count"},e._l(t.retake_count,(function(t){return s("span",{key:t},[e._v("  ")])})),0),s("td",{staticClass:"start-date"},[e.selectionGrid[t.id]?s("datepicker",{attrs:{"wrapper-class":"datepicker","input-class":"date-field input",language:e.locale,"monday-first":!0,value:e.getDate(t.start_date),format:"yyyy-MM-dd"},on:{input:e.updateStartDate}}):s("span",[e._v(" "+e._s(e.formatDate(t.start_date))+" ")])],1),s("td",{staticClass:"due-date"},[e.selectionGrid[t.id]?s("datepicker",{attrs:{"wrapper-class":"datepicker","input-class":"date-field input",language:e.locale,"monday-first":!0,value:e.getDate(t.due_date),format:"yyyy-MM-dd"},on:{input:e.updateDueDate}}):s("span",[e._v(" "+e._s(e.formatDate(t.due_date))+" ")])],1),s("td",{staticClass:"real-start-date"},[e._v(" "+e._s(e.formatDate(t.real_start_date))+" ")]),s("td",{staticClass:"real-end-date"},[e._v(" "+e._s(e.formatDate(t.end_date))+" ")]),s("td",{staticClass:"last-comment-date"},[e._v(" "+e._s(e.formatDate(t.last_comment_date))+" ")]),s("td")],1)})),0)])]),s("table-info",{attrs:{"is-loading":e.isLoading,"is-error":e.isError}}),e.isLoading?e._e():s("p",{staticClass:"has-text-centered nb-tasks"},[e._v(" "+e._s(e.tasks.length)+" "+e._s(e.$tc("tasks.number",e.tasks.length))+" ("+e._s(e.formatDuration(e.timeEstimated))+" "+e._s(e.$tc("main.days_estimated",e.isTimeEstimatedPlural))+", "+e._s(e.formatDuration(e.timeSpent))+" "+e._s(e.$tc("main.days_spent",e.isTimeSpentPlural))),e.isAssets?e._e():s("span",[e._v(", "+e._s(e.nbFrames)+" "+e._s(e.$tc("main.nb_frames",e.nbFrames)))]),e._v(") ")])],1)},ln=[],dn=(s("13d5"),{name:"task-list",mixins:[en["a"],re["a"]],components:{Datepicker:Qi["a"],EntityThumbnail:ue["a"],PeopleAvatar:Zt["a"],TableInfo:ye["a"],ValidationCell:xe["a"]},data:function(){return{lastSelection:null,page:1,selectionGrid:{},selectedDate:L()().toDate()}},props:{isAssets:{type:Boolean,default:!0},isError:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},tasks:{type:Array,default:function(){return[]}},taskType:{type:Object,default:function(){}}},mounted:function(){window.addEventListener("keydown",this.onKeyDown,!1),this.$nextTick(this.resizeHeaders)},beforeDestroy:function(){window.removeEventListener("keydown",this.onKeyDown)},computed:Object(c["a"])(Object(c["a"])({},Object(l["c"])(["assetMap","nbSelectedTasks","personMap","user","selectedTasks","shotMap","taskMap"])),{},{timeSpent:function(){return this.tasks.reduce((function(e,t){return e+t.duration}),0)},isTimeSpentPlural:function(){return Math.floor((this.timeSpent?this.timeSpent:0)/60/8)<=1},timeEstimated:function(){return this.tasks.reduce((function(e,t){return e+t.estimation}),0)},isTimeEstimatedPlural:function(){return Math.floor((this.timeEstimated?this.timeEstimated:0)/60/8)<=1},nbFrames:function(){var e=this,t=0;return this.tasks.forEach((function(s){var i=e.shotMap[s.entity.id];i&&i.nb_frames&&(t+=i.nb_frames)})),t},displayedTasks:function(){return this.tasks&&this.tasks.length>0?this.tasks.slice(0,60*this.page):[]},locale:function(){return"fr_FR"===this.user.locale?Hi["fr"]:Hi["en"]}}),methods:Object(c["a"])(Object(c["a"])({},Object(l["b"])(["addSelectedTask","addSelectedTasks","clearSelectedTasks","updateTask","removeSelectedTask"])),{},{getDate:function(e){return e?L()(e,"YYYY-MM-DD").toDate():null},updateEstimation:function(e){var t=Object(ui["b"])(this.organisation,e);this.updateTasksEstimation({estimation:t})},updateStartDate:function(e){var t=this;Object.keys(this.selectionGrid).forEach((function(s){var i=t.taskMap[s],n=L()(e),a=i.due_date?L()(i.due_date):null,o=Object(ui["f"])(n,a,Object(ui["n"])(t.organisation,i.estimation));t.updateTask({taskId:s,data:o}).catch(console.error)}))},updateDueDate:function(e){var t=this;Object.keys(this.selectionGrid).forEach((function(s){var i=t.taskMap[s],n=i.start_date?L()(i.start_date):null,a=L()(e),o=Object(ui["e"])(n,a,Object(ui["n"])(t.organisation,i.estimation));t.updateTask({taskId:s,data:o}).catch(console.error)}))},formatDate:function(e){return e?L()(e).format("YYYY-MM-DD"):""},isEstimationBurned:function(e){return e.estimation&&e.estimation>0&&e.duration>e.estimation},onBodyScroll:function(e,t){this.$emit("scroll",t.scrollTop);var s=this.$refs.body.scrollHeight-this.$refs.body.offsetHeight;s<t.scrollTop+100&&this.page++},getEntity:function(e){return this.isAssets?this.assetMap[e]:this.shotMap[e]},onKeyDown:function(e){if(this.tasks.length>0&&e.altKey){var t=this.lastSelection?this.lastSelection:0;[37,38].includes(e.keyCode)?(t=t-1<0?t=this.tasks.length-1:t-1,this.selectTask({},t,this.tasks[t])):[39,40].includes(e.keyCode)&&(t=t+1>=this.tasks.length?t=0:t+1,this.selectTask({},t,this.tasks[t]))}},selectTask:function(e,t,s){var i=this;if(!(e&&e.target&&(["INPUT"].includes(e.target.nodeName)||["HEADER"].includes(e.target.parentNode.nodeName)||["cell day selected"].includes(e.target.className)))){var a=this.selectionGrid[s.id],o=Object.keys(this.selectionGrid).length>1;if(e.ctrlKey||e.metaKey||e.shiftKey||(this.clearSelectedTasks({task:s}),this.resetSelection()),e.shiftKey){this.selectionGrid={};var r=[];r=this.lastSelection>t?Object(ui["q"])(t,this.lastSelection):Object(ui["q"])(this.lastSelection,t);var c=r.map((function(e){return{task:i.tasks[e]}}));c.forEach((function(e){n.a.set(i.selectionGrid,e.task.id,!0)})),this.addSelectedTasks(c)}else this.selectionGrid[s.id]?(this.removeSelectedTask({task:s}),n.a.set(this.selectionGrid,s.id,void 0)):a&&!o||(this.addSelectedTask({task:s}),this.$emit("task-selected",s),n.a.set(this.selectionGrid,s.id,!0),this.lastSelection=t);this.scrollToLine(s.id)}},setScrollPosition:function(e){this.$refs.body&&(this.$refs.body.scrollTop=e)},scrollToLine:function(e){var t=this.$refs["task-"+e];if(t&&this.$refs.body){var s=30,i=t[0].getBoundingClientRect(),n=this.$refs.body.getBoundingClientRect(),a=i.bottom>n.bottom-s,o=i.top<n.top+s;if(a){var r=i.bottom-n.bottom+s;this.setScrollPosition(this.$refs.body.scrollTop+r)}else if(o){var c=n.top-i.top+s;this.setScrollPosition(this.$refs.body.scrollTop-c)}}},resetSelection:function(){this.selectionGrid={},this.lastSelection=null},getTableData:function(){var e=this,t=[this.isAssets?this.$t("tasks.fields.asset_type"):this.$t("tasks.fields.sequence"),this.$t("tasks.fields.entity_name"),this.$t("tasks.fields.task_status"),this.$t("tasks.fields.assignees"),this.$t("tasks.fields.estimation"),this.$t("tasks.fields.duration"),this.$t("tasks.fields.retake_count"),this.$t("tasks.fields.start_date"),this.$t("tasks.fields.due_date"),this.$t("tasks.fields.real_start_date"),this.$t("tasks.fields.real_end_date"),this.$t("tasks.fields.last_comment_date")];this.isAssets||t.splice(4,0,"otot");var s=[t];return this.tasks.forEach((function(t){var i=t.assignees.map((function(t){var s=e.personMap[t];return s?s.name:""})).join(", "),n=[e.isAssets?e.getEntity(t.entity.id).asset_type_name:e.getEntity(t.entity.id).sequence_name,e.getEntity(t.entity.id).name,t.task_status_short_name,i,e.formatDuration(t.estimation),e.formatDuration(t.duration),t.retake_count,e.formatDate(t.start_date),e.formatDate(t.due_date),e.formatDate(t.real_start_date),e.formatDate(t.end_date),e.formatDate(t.last_comment_date)];if(!e.isAssets){var a=e.getEntity(t.entity.id).nb_frames;n.splice(4,0,a)}s.push(n)})),s},updateTasksEstimation:function(e){var t=this,s=e.estimation;Object.keys(this.selectionGrid).forEach((function(e){var i=t.taskMap[e],n={estimation:s};if(i.start_date){var a=L()(i.start_date),o=i.due_date?L()(i.due_date):null;n=Object(ui["f"])(a,o,Object(ui["n"])(t.organisation,s)),n.estimation=s}t.updateTask({taskId:e,data:n}).catch(console.error)}))}}),watch:{tasks:function(){this.page=1,this.resetSelection(),this.$nextTick(this.resizeHeaders)},nbSelectedTasks:function(){0===this.nbSelectedTasks&&this.resetSelection()}}}),un=dn,pn=(s("cd3a"),Object(_["a"])(un,cn,ln,!1,null,"fc2bb706",null)),hn=pn.exports,mn={name:"task-type-page",mixins:[re["a"],te],components:{ButtonSimple:de["a"],ChevronLeftIcon:ae["g"],Combobox:$e["a"],ComboboxNumber:Xi["a"],Datepicker:Qi["a"],EstimationHelper:on,Schedule:rn["a"],SearchField:pt["a"],SearchQueryList:ht["a"],TaskList:hn,TaskInfo:Dt["a"],TaskTypeName:Ks["a"]},entityListCache:[],data:function(){return{activeTab:"tasks",currentSort:"entity_name",currentScheduleItem:null,currentTask:null,isAssets:!0,tasks:[],selection:{},errors:{entities:!1},loading:{entities:!1},schedule:{currentColor:"status",endDate:Q()().add(3,"months"),scheduleItems:[],scheduleHeight:800,selectedEndDate:Q()().add(3,"months").toDate(),selectedStartDate:Q()().add(-1,"months").toDate(),startDate:Q()().add(-1,"months"),zoomLevel:1,zoomOptions:[{label:"1",value:1},{label:"2",value:2},{label:"3",value:3}],colorOptions:[{label:"Neutral",value:"neutral"},{label:"Status",value:"status"},{label:"Late",value:"late"}]}}},created:function(){if(this.currentProduction){var e={productionId:this.currentProduction.id};this.currentEpisode&&(e.episodeId=this.currentEpisode.id),this.$store.commit("RESET_PRODUCTION_PATH",e)}else this.setProduction(this.$route.params.production_id)},mounted:function(){var e=this;this.isAssets=this.$route.path.includes("assets"),this.updateActiveTab(),setTimeout((function(){e.initData(!1),e.$refs["schedule-widget"]&&e.$refs["schedule-widget"].scrollToToday()}),100),window.addEventListener("resize",this.resetScheduleHeight)},beforeDestroy:function(){window.removeEventListener("resize",this.resetScheduleHeight)},computed:Object(c["a"])(Object(c["a"])({},Object(l["c"])(["assetMap","assetsPath","currentEpisode","currentProduction","currentTaskType","isCurrentUserManager","isTVShow","nbSelectedTasks","organisation","personMap","selectedTasks","sequenceSubscriptions","shotsByEpisode","shotMap","shotsPath","taskSearchQueries","taskStatusMap","taskMap","user"])),{},{entityMap:function(){return this.isAssets?this.assetMap:this.shotMap},locale:function(){return"fr_FR"===this.user.locale?Hi["fr"]:Hi["en"]},startDisabledDates:function(){return{to:Object(ui["p"])(this.currentProduction.start_date).toDate(),from:this.schedule.endDate.toDate(),days:[6,0]}},endDisabledDates:function(){return{to:this.schedule.startDate.toDate(),from:Object(ui["p"])(this.currentProduction.end_date).toDate(),days:[6,0]}},assetTasks:function(){return this.getTasks(Object.values(this.assetMap))},shotTasks:function(){return this.getTasks(Object.values(this.shotMap))},title:function(){return this.currentProduction?this.isTVShow&&this.currentEpisode?"".concat(this.currentProduction.name," / ")+"".concat(this.currentEpisode.name," / ")+"".concat(this.currentTaskType.name):"".concat(this.currentProduction.name," / ").concat(this.currentTaskType.name):"Loading..."},backPath:function(){return this.isActiveTab("schedule")?{name:"schedule",params:{production_id:this.currentProduction.id}}:this.currentTaskType.for_shots?this.shotsPath:this.assetsPath},tasksPath:function(){return this.getRoute("task-type")},schedulePath:function(){return this.getRoute("task-type-schedule")},estimationPath:function(){return this.getRoute("task-type-estimation")},sortOptions:function(){return["entity_name","task_status_short_name","priority","estimation","duration","retake_count","due_date","real_start_date","end_date","last_comment_date"].map((function(e){return{label:e,value:e}}))},searchQueries:function(){return this.isAssets?this.taskSearchQueries.filter((function(e){return"Asset"===e.entity_type})):this.taskSearchQueries},scheduleTeam:function(){var e=this,t=this.currentProduction.team.map((function(t){return e.personMap[t]}));return Object(Z["f"])(t)},scheduleWidget:function(){return this.$refs["schedule-widget"]},searchField:function(){return this.$refs["task-search-field"]}}),methods:Object(c["a"])(Object(c["a"])({},Object(l["b"])(["clearSelectedTasks","initTaskType","loadEpisodeScheduleItems","loadScheduleItems","removeTaskSearch","saveScheduleItem","saveTaskSearch","setProduction","subscribeToSequence","updateTask","unsubscribeFromSequence"])),{},{initData:function(e){var t=this;this.resetTasks(),this.focusSearchField(),0===this.tasks.length?(this.loading.entities=!0,this.errors.entities=!1,this.initTaskType(e).then(this.setCurrentScheduleItem).then((function(){t.loading.entities=!1,t.resetTasks(),t.focusSearchField();var e=t.searchField?t.searchField.getValue():"";e&&t.onSearchChange(e),setTimeout((function(){t.setSearchFromUrl()}),200),t.isActiveTab("schedule")&&(t.resetScheduleItems(),t.$refs["schedule-widget"].scrollToToday())})).catch((function(e){console.error(e),t.loading.entities=!1,t.errors.entities=!0}))):(this.loading.entities=!0,this.setCurrentScheduleItem().then((function(){t.loading.entities=!1,t.isActiveTab("schedule")&&(t.resetScheduleItems(),t.$refs["schedule-widget"].scrollToToday())})))},setCurrentScheduleItem:function(){var e=this;return this.isTVShow?this.loadEpisodeScheduleItems({production:this.currentProduction,taskType:this.currentTaskType}).then((function(t){t?(e.currentScheduleItem=t.find((function(t){return t.task_type_id===e.currentTaskType.id&&t.object_id===e.currentEpisode.id})),Promise.resolve(e.currentScheduleItem)):Promise.resolve([])})):this.loadScheduleItems(this.currentProduction).then((function(t){t?(e.currentScheduleItem=t.find((function(t){return t.task_type_id===e.currentTaskType.id})),Promise.resolve(e.currentScheduleItem)):Promise.resolve([])}))},isActiveTab:function(e){return this.activeTab===e},updateActiveTab:function(){this.$route.path.indexOf("schedule")>0?this.activeTab="schedule":this.$route.path.indexOf("estimation")>0?this.activeTab="estimation":this.activeTab="tasks"},getRoute:function(e){var t=this.$route.params.task_type_id,s=this.currentTaskType?this.currentTaskType.id:t,i={name:e,params:{production_id:this.currentProduction.id,task_type_id:s}};return this.isTVShow&&this.currentEpisode&&(i.name="episode-".concat(i.name),i.params.episode_id=this.currentEpisode.id),i},onSearchChange:function(e){var t=this;if(e&&1!==e.length){e=e.toLowerCase().trim();var s=this.currentProduction.descriptors.filter((function(e){return e.entityType===t.isAssets?"Asset":"Shot"})),i=Object(Ki["e"])(e)||[],n=Object(Ki["c"])(e)||[],a=Object(Ki["b"])(s,e);if(i.length>0||n.length>0||a.length>0){var o=[],r=Object(Ki["f"])(this.$options.taskIndex,e).concat(a);i.length>0?o=Object(Yi["j"])(this.$options.taskIndex,i):(this.resetTasks(),o=this.tasks),o=Object(Ki["a"])(o,r,this.taskMap),this.tasks=this.sortTasks(o),this.isActiveTab("schedule")&&this.resetScheduleItems()}else this.resetTasks(),this.isActiveTab("schedule")&&this.resetScheduleItems()}else this.resetTasks(),this.isActiveTab("schedule")&&this.resetScheduleItems();this.setSearchInUrl(),this.clearSelectedTasks()},saveSearchQuery:function(e){var t=this.isAssets?"Asset":"Shot";this.saveTaskSearch({searchQuery:e,entityType:t}).then((function(){})).catch((function(e){console.error(e)}))},removeSearchQuery:function(e){this.removeTaskSearch(e).then((function(){})).catch((function(e){console.error(e)}))},onTaskSelected:function(e){this.currentTask=e},resetTasks:function(){var e=this,t=this.assetTasks;this.isAssets||(t=this.shotTasks),t=t.filter((function(t){var s=e.entityMap[t.entity_id];return!s.canceled})),this.tasks=this.sortTasks(t),this.resetTaskIndex()},resetTaskIndex:function(){this.$options.taskIndex=Object(Yi["f"])(this.tasks,this.personMap),this.$options.taskIndex.me=Object(Yi["j"])(this.$options.taskIndex,this.user.full_name.split(" "))},getTasks:function(e){var t=this,s=[];return e.forEach((function(e){e.tasks.forEach((function(i){var n=t.taskMap[i];n.data=e.data,n&&n.task_type_id===t.currentTaskType.id&&s.push(n)}))})),s},sortTasks:function(e){e||(e=this.tasks);var t=["task_status_short_name","entity_name","due_date"].includes(this.currentSort);return e.sort(Wi()(this.currentSort,t?1:-1).thenBy("entity_name"))},onExportClick:function(){var e=this.$refs["task-list"].getTableData(),t=[Object(ui["d"])(Q()()),this.currentProduction.name,this.currentTaskType.name,"tasks"];this.currentEpisode&&t.splice(1,0,this.currentEpisode.name);var s=ee["a"].slugify(t.join("_"));X["a"].buildCsvFile(s,e)},updateEstimation:function(e){var t=e.taskId,s=e.days,i=e.item,n=Object(ui["b"])(this.organisation,s),a=this.taskMap[t],o={estimation:n};a.start_date||(a.start_date=Object(ui["d"])(Q()()));var r=Object(ui["p"])(a.start_date),c=a.due_date?Object(ui["p"])(a.due_date):null;o=Object(ui["f"])(r,c,Object(ui["n"])(this.organisation,n)),o.estimation=n,i&&!i.startDate&&(i.startDate=Object(ui["p"])(o.end_date)),i&&!i.endDate&&(i.endDate=Object(ui["p"])(o.end_date)),i&&i.startDate&&i.endDate&&(i.parentElement.startDate=this.getMinDate(i.parentElement),i.parentElement.endDate=this.getMaxDate(i.parentElement)),this.updateTask({taskId:t,data:o}).catch(console.error)},resetScheduleItems:function(){var e=this,t=this.buildAssignationMap(),s=this.scheduleTeam.map((function(s){return e.buildPersonElement(s,t)})).filter((function(e){return e})).filter((function(e){return e.children.length>0}));0!==t.unassigned.length&&(s=s.concat([this.buildPersonElement({id:"unassigned"},t)])),this.schedule.scheduleItems=s},buildAssignationMap:function(){var e={unassigned:[]};return this.scheduleTeam.forEach((function(t){t&&(e[t.id]=[])})),this.tasks.forEach((function(t){t.assignees.length>0?t.assignees.forEach((function(s){e[s]||(e[s]=[]),e[s].push(t)})):e.unassigned.push(t)})),e},buildPersonElement:function(e,t){var s=this;if(!e)return null;var i,n,a,o=0,r=t[e.id];a="unassigned"===e.id?{avatar:!1,id:e.id,name:"Unassigned",color:"#888",for_shots:!1,priority:1,expanded:!0,loading:!1,children:[],editable:!1}:{avatar:!0,has_avatar:e.has_avatar,avatarPath:e.avatarPath,uniqueHash:e.uniqueHash,initials:e.initials,id:e.id,name:e.full_name,color:e.color,for_shots:!1,priority:1,expanded:!0,loading:!1,children:[],editable:!1};var l=r.map((function(e){var t,r=e.estimation,l=Q()();if(e.start_date?l=Object(ui["p"])(e.start_date):e.real_start_date&&(l=Object(ui["p"])(e.real_start_date)),e.due_date?t=Object(ui["p"])(e.due_date):e.end_date?t=Object(ui["p"])(e.end_date):e.estimation&&(t=l.add(r,"days")),!t||t.isSameOrBefore(l)){var d=5===l.isoWeekday()?3:1;t=l.add(d,"days")}if(l||(l=Q()()),!t.isSameOrAfter(l)){var u=5===l.isoWeekday()?3:1;t=l.clone().add(u,"days")}return r&&(o+=r),i&&!i.isAfter(l)||(i=l.clone()),n&&!n.isBefore(t)||(n=t.clone()),Object(c["a"])(Object(c["a"])({},e),{},{name:e.entity_name,startDate:l,endDate:t,expanded:!1,loading:!1,man_days:r,editable:s.isCurrentUserManager,unresizable:r>0,parentElement:a,color:s.getTaskElementColor(e,t),children:[]})}));return Object.assign(a,{children:l,startDate:i,endDate:n,man_days:o}),a},getTaskElementColor:function(e,t){if("status"===this.schedule.currentColor){var s=this.taskStatusMap[e.task_status_id].color;return"#f5f5f5"===s&&(s="#999"),s}if("late"===this.schedule.currentColor){var i=!this.taskStatusMap[e.task_status_id].is_done&&t.isBefore(Q()());return i?"#FF3860":"#999"}return null},saveTaskScheduleItem:function(e){var t=this;this.$options.savingBuffer||(this.$options.savingBuffer={}),this.$options.savingBuffer[e.id]?this.$options.savingBuffer[e.id]=e:(this.$options.savingBuffer[e.id]=e,setTimeout((function(){e=Object(c["a"])({},t.$options.savingBuffer[e.id]),e.startDate&&e.endDate&&(e.parentElement.startDate=t.getMinDate(e.parentElement),e.parentElement.endDate=t.getMaxDate(e.parentElement),t.updateTask({taskId:e.id,data:{start_date:e.startDate.format("YYYY-MM-DD"),due_date:e.endDate.format("YYYY-MM-DD")}})),t.$options.savingBuffer[e.id]=void 0}),1e3))},getMinDate:function(e){var t=this.schedule.endDate.clone();return e.children.forEach((function(e){e.startDate&&e.startDate.isBefore(t)&&(t=e.startDate)})),t.clone()},getMaxDate:function(e){var t=this.schedule.startDate.clone();return e.children.forEach((function(e){e.endDate&&e.endDate.isAfter(t)&&(t=e.endDate)})),t.clone()},expandPersonElement:function(e){e.expanded=!e.expanded},resetScheduleHeight:function(){var e=this;this.$nextTick((function(){if(e.isActiveTab("schedule")){var t=e.$refs.page.offsetHeight,s=e.$refs.header.offsetHeight;e.schedule.scheduleHeight=t-s+20,e.$refs["schedule-widget"].resetScheduleSize()}}))}}),watch:{$route:function(){this.updateActiveTab()},currentProduction:function(){this.initData(!0)},currentSort:function(){this.sortTasks(),this.$refs["task-list"].resetSelection(),this.clearSelectedTasks()},"schedule.currentColor":function(){this.resetScheduleItems()},activeTab:function(){var e=this;this.isActiveTab("schedule")&&(this.resetScheduleItems(),this.resetScheduleHeight(),this.$nextTick((function(){e.$refs["schedule-widget"]&&e.$refs["schedule-widget"].scrollToToday()})))},currentScheduleItem:function(){this.currentScheduleItem&&(this.schedule.startDate=Object(ui["p"])(this.currentScheduleItem.start_date),this.schedule.endDate=Object(ui["p"])(this.currentScheduleItem.end_date),this.schedule.selectedStartDate=this.schedule.startDate.toDate(),this.schedule.selectedEndDate=this.schedule.endDate.toDate())},"schedule.selectedStartDate":function(){var e=Object(ui["d"])(this.schedule.selectedStartDate);e!==this.currentScheduleItem.start_date&&(this.schedule.startDate=Object(ui["p"])(e),this.currentScheduleItem.startDate=this.schedule.startDate,this.currentScheduleItem.endDate=this.schedule.endDate,this.saveScheduleItem(this.currentScheduleItem))},"schedule.selectedEndDate":function(){var e=Object(ui["d"])(this.schedule.selectedEndDate);e!==this.currentScheduleItem.end_date&&(this.schedule.endDate=Object(ui["p"])(e),this.currentScheduleItem.startDate=this.schedule.startDate,this.currentScheduleItem.endDate=this.schedule.endDate,this.saveScheduleItem(this.currentScheduleItem))}},socket:{events:{"task:update":function(e){this.taskMap[e.task_id]&&setTimeout(this.resetTaskIndex,1e3)}}},metaInfo:function(){return{title:"".concat(this.title," - Kitsu")}}},fn=mn,_n=(s("c864"),Object(_["a"])(fn,zi,Ui,!1,null,"d98b96ce",null)),vn=_n.exports,gn=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"columns fixed-page"},[s("div",{staticClass:"column main-column"},[s("div",{staticClass:"todos page"},[s("div",{staticClass:"task-tabs tabs"},[s("ul",[s("li",{class:{"is-active":e.isTabActive("todos")}},[s("router-link",{attrs:{to:{name:"todos"}}},[e._v(" "+e._s(e.$t("tasks.current"))+" ")])],1),s("li",{class:{"is-active":e.isTabActive("done")},on:{click:function(t){return e.selectTab("done")}}},[s("router-link",{attrs:{to:{name:"todos-tab",params:{tab:"done"}}}},[e._v(" "+e._s(e.$t("tasks.done"))+" ("+e._s(e.displayedDoneTasks.length)+") ")])],1),s("li",{class:{"is-active":e.isTabActive("timesheets")},on:{click:function(t){return e.selectTab("timesheets")}}},[s("router-link",{attrs:{to:{name:"todos-tab",params:{tab:"timesheets"}}}},[e._v(" "+e._s(e.$t("timesheets.title"))+" ")])],1)])]),s("div",{staticClass:"flexrow"},[e.isTabActive("done")?e._e():s("search-field",{ref:"todos-search-field",class:{"search-field":!0,"flexrow-item":!0},attrs:{"can-save":!0},on:{change:e.onSearchChange,save:e.saveSearchQuery}}),s("span",{staticClass:"flexrow-item push-right"}),s("span",{staticClass:"flexrow-item"}),s("combobox",{staticClass:"flexrow-item",attrs:{label:e.$t("main.sorted_by"),options:e.sortOptions,"locale-key-prefix":"tasks.fields."},model:{value:e.currentSort,callback:function(t){e.currentSort=t},expression:"currentSort"}})],1),e.isTabActive("todos")||e.isTabActive("timesheets")?s("div",{staticClass:"query-list"},[s("search-query-list",{attrs:{queries:e.todoSearchQueries},on:{"change-search":e.changeSearch,"remove-search":e.removeSearchQuery}})],1):e._e(),e.isTabActive("todos")?s("todos-list",{ref:"todo-list",attrs:{tasks:e.sortedTasks,"is-loading":e.isTodosLoading,"is-error":e.isTodosLoadingError,"selection-grid":e.todoSelectionGrid},on:{scroll:e.setTodoListScrollPosition}}):e._e(),e.isTabActive("done")?s("div"):e._e(),e.isTabActive("done")?s("todos-list",{ref:"done-list",attrs:{tasks:e.displayedDoneTasks,"is-loading":e.isTodosLoading,"is-error":e.isTodosLoadingError,done:!0}}):e._e(),e.isTabActive("timesheets")?s("timesheet-list",{ref:"timesheet-list",attrs:{tasks:e.loggableTodos,"done-tasks":e.loggableDoneTasks,"is-loading":e.isTodosLoading,"is-error":e.isTodosLoadingError,"time-spent-map":e.timeSpentMap,"time-spent-total":e.timeSpentTotal,"hide-done":e.todosSearchText.length>0||0===e.loggableDoneTasks.length},on:{"date-changed":e.onDateChanged,"time-spent-change":e.onTimeSpentChange}}):e._e()],1)]),1===e.nbSelectedTasks?s("div",{staticClass:"column side-column"},[s("task-info",{attrs:{task:Object.values(e.selectedTasks)[0]}})],1):e._e()])},yn=[],bn=s("b11e"),kn=s("e739"),wn={name:"todos",components:{Combobox:$e["a"],SearchField:pt["a"],SearchQueryList:ht["a"],TaskInfo:Dt["a"],TimesheetList:bn["a"],TodosList:kn["a"]},data:function(){return{activeTab:"todos",currentSort:"priority",selectedDate:L()().format("YYYY-MM-DD"),sortOptions:["entity_name","priority","task_status_short_name","due_date","estimation","last_comment_date"].map((function(e){return{label:e,value:e}}))}},mounted:function(){var e=this;this.updateActiveTab(),this.todosSearchText.length>0&&this.$refs["todos-search-field"].setValue(this.todosSearchText),this.$nextTick((function(){e.loadTodos({date:e.selectedDate,callback:function(){e.todoList&&e.$nextTick((function(){e.todoList.setScrollPosition(e.todoListScrollPosition)})),e.resizeHeaders()}})}))},afterDestroy:function(){this.$store.commit("USER_LOAD_TODOS_END",{tasks:[],userFilters:{},taskTypeMap:this.taskTypeMap})},computed:Object(c["a"])(Object(c["a"])({},Object(l["c"])(["displayedDoneTasks","displayedTodos","isTodosLoading","isTodosLoadingError","nbSelectedTasks","selectedTasks","taskMap","taskTypeMap","todosSearchText","timeSpentMap","timeSpentTotal","todoListScrollPosition","todoSelectionGrid","todoSearchQueries","user"])),{},{loggableTodos:function(){var e=this;return this.sortedTasks.filter((function(t){return e.taskTypeMap[t.task_type_id].allow_timelog}))},loggableDoneTasks:function(){var e=this;return this.displayedDoneTasks.filter((function(t){return e.taskTypeMap[t.task_type_id].allow_timelog}))},todoList:function(){return this.$refs["todo-list"]},haveDoneList:function(){return this.$refs["done-list"]},sortedTasks:function(){var e="entity_name"===this.currentSort,t="priority"===this.currentSort,s="due_date"===this.currentSort,i=Object(Y["a"])(this.displayedTodos);return e?i.sort(Wi()("project_name").thenBy("task_type_name").thenBy("full_entity_name")):t?i.sort(Wi()("priority",-1).thenBy((function(e,t){return e.due_date?t.due_date?e.due_date.localeCompare(t.due_date):-1:1})).thenBy("project_name").thenBy("task_type_name").thenBy("entity_name")):s?i.sort(Wi()((function(e,t){return e.due_date?t.due_date?e.due_date.localeCompare(t.due_date):-1:1})).thenBy("project_name").thenBy("task_type_name").thenBy("entity_name")):i.sort(Wi()(this.currentSort,-1).thenBy("project_name").thenBy("task_type_name").thenBy("entity_name"))}}),methods:Object(c["a"])(Object(c["a"])({},Object(l["b"])(["loadTodos","loadOpenProductions","removeTodoSearch","saveTodoSearch","setTodoListScrollPosition","setTodosSearch","setTimeSpent"])),{},{isTabActive:function(e){return this.activeTab===e},resizeHeaders:function(){var e=this;this.$nextTick((function(){e.todoList&&e.todoList.resizeHeaders(),e.haveDoneList&&e.haveDoneList.resizeHeaders()}))},selectTab:function(e){var t=this;this.activeTab=e,this.resizeHeaders(),setTimeout((function(){t.$refs["todos-search-field"]&&t.$refs["todos-search-field"].focus()}),300)},updateActiveTab:function(){["done","timesheets"].includes(this.$route.params.tab)?this.activeTab=this.$route.params.tab:this.activeTab="todos"},onSearchChange:function(e){this.setTodosSearch(e)},changeSearch:function(e){this.$refs["todos-search-field"].setValue(e.search_query),this.$refs["todos-search-field"].$emit("change",e.search_query)},saveSearchQuery:function(e){this.saveTodoSearch(e).then((function(){})).catch((function(e){e&&console.error(e)}))},removeSearchQuery:function(e){this.removeTodoSearch(e).then((function(){})).catch((function(e){e&&console.error(e)}))},onDateChanged:function(e){this.selectedDate=L()(e).format("YYYY-MM-DD"),this.loadTodos({date:this.selectedDate,forced:!0})},onTimeSpentChange:function(e){e.personId=this.user.id,e.date=this.selectedDate,this.setTimeSpent(e)},onAssignation:function(e){var t=this;this.user.id===e.person_id&&this.loadOpenProductions((function(){t.loadTodos({forced:!0,date:t.selectedDate,callback:function(){t.todoList&&t.$nextTick((function(){t.todoList.setScrollPosition(t.todoListScrollPosition)})),t.resizeHeaders()}})}))}}),socket:{events:{"task:assign":function(e){this.onAssignation(e)},"task:unassign":function(e){this.onAssignation(e)}}},watch:{$route:function(){this.updateActiveTab()}},metaInfo:function(){return{title:"".concat(this.$t("tasks.my_tasks")," - Kitsu")}}},Cn=wn,Sn=(s("1fe2"),Object(_["a"])(Cn,gn,yn,!1,null,"7a872f27",null)),Tn=Sn.exports,xn=function(){return s.e("chunk-c007b93a").then(s.bind(null,"319f"))},En=function(){return s.e("chunk-7382a092").then(s.bind(null,"0dd7"))},Pn=function(){return s.e("chunk-9e830486").then(s.bind(null,"fd5f"))},On=function(){return s.e("chunk-4145322a").then(s.bind(null,"38fe"))},An=function(){return s.e("chunk-0c27f0a7").then(s.bind(null,"a591"))},jn=function(){return s.e("chunk-6e2b0e55").then(s.bind(null,"33f5"))},Dn=function(){return s.e("chunk-2d22d490").then(s.bind(null,"f79b"))},Mn=function(){return s.e("chunk-960a5bea").then(s.bind(null,"a01b"))},In=function(){return s.e("chunk-9fe120a2").then(s.bind(null,"6893"))},$n=function(){return s.e("chunk-ce1d7ae0").then(s.bind(null,"d1e3"))},Ln=function(){return s.e("chunk-ccd52404").then(s.bind(null,"4e82"))},Fn=function(){return s.e("chunk-3ab4c4a2").then(s.bind(null,"d46a"))},Nn=function(){return s.e("chunk-3ae12d7b").then(s.bind(null,"9633"))},qn=function(){return s.e("chunk-4c7b7186").then(s.bind(null,"cd92"))},Rn=function(){return s.e("chunk-ea37888e").then(s.bind(null,"8bb6"))},Bn=function(){return s.e("chunk-a59446dc").then(s.bind(null,"421c"))},Vn=function(){return s.e("chunk-2d21082e").then(s.bind(null,"b7cf"))},zn=function(){return s.e("chunk-2d0dacb1").then(s.bind(null,"6cb0"))},Un=function(){return s.e("chunk-66358ab0").then(s.bind(null,"e186"))},Hn=function(){return s.e("chunk-2d0cfa35").then(s.bind(null,"6522"))},Gn=function(){return s.e("chunk-405200c6").then(s.bind(null,"2e31"))},Wn=function(){return s.e("chunk-8d9a78d2").then(s.bind(null,"d214"))},Yn=function(){return s.e("chunk-388fcd3b").then(s.bind(null,"de06"))},Kn=function(){return s.e("chunk-79c8754b").then(s.bind(null,"99a3"))},Qn=function(){return s.e("chunk-62c85ea4").then(s.bind(null,"24d0"))},Xn=function(){return s.e("chunk-6add4672").then(s.bind(null,"129d"))},Jn=function(){return s.e("chunk-3a2f2d50").then(s.bind(null,"9f1e"))},Zn=function(){return s.e("chunk-e2daab76").then(s.bind(null,"56b8"))},ea=function(){return s.e("chunk-2d0c7360").then(s.bind(null,"503b"))},ta=[{path:"",component:zs,beforeEnter:function(e,t,s){var i=M.a.getParser(window.navigator.userAgent),n=i.satisfies({chrome:">20.1.1432",firefox:">31",vivaldi:">2.8"});if(!n)return s({name:"wrong-browser"});I["a"].requireAuth(e,t,(function(e){e?s(e):(R.setTimezone(),q.setLocale(),0===F["a"].state.productions.openProductions.length?z((function(e){e?s({name:"server-down"}):U["a"].getters.isCurrentUserArtist(U["a"].state)?s({name:"todos"}):s({name:"open-productions"})})):U["a"].getters.isCurrentUserArtist(U["a"].state)?(F["a"].commit("DATA_LOADING_END"),s({name:"todos"})):(F["a"].commit("DATA_LOADING_END"),s({name:"open-productions"})))}))}},{path:"/",component:zs,beforeEnter:function(e,t,s){I["a"].requireAuth(e,t,(function(e){e?s(e):(R.setTimezone(),q.setLocale(),0===H["a"].state.taskTypes.length?z((function(){F["a"].commit("DATA_LOADING_END"),s()})):(F["a"].commit("DATA_LOADING_END"),s()))}))},children:[{path:"",name:"home"},{path:"asset-types",component:xn,children:[{path:"new",component:xn},{name:"edit-asset-type",path:"edit/:asset_type_id",component:xn},{name:"delete-asset-type",path:"delete/:asset_type_id",component:xn}]},{name:"custom-actions",path:"custom-actions",component:On,children:[{name:"custom-actions-new",path:"new",component:On},{name:"edit-custom-action",path:"edit/:custom_action_id",component:On},{name:"delete-custom-action",path:"delete/:custom_action_id",component:On}]},{name:"notifications",path:"notifications",component:ei},{path:"open-productions",component:ci,name:"open-productions"},{path:"people",component:In,name:"people",children:[{path:"new",component:In,name:"new-people"},{path:"edit/:person_id",component:In,name:"edit-person"},{name:"delete-person",path:"delete/:person_id",component:In}]},{path:"people/:person_id",component:Mn,name:"person",children:[{path:":tab",component:Mn,name:"person-tab"}]},{path:"/main-schedule",component:jn,name:"main-schedule"},{path:"/timesheets",component:Xn,name:"timesheets",children:[{path:"year/:year",component:Xn,name:"timesheets-year"},{path:"year/:year/persons/:person_id",component:Xn,name:"timesheets-year-person"},{path:"month/:year",component:Xn,name:"timesheets-month"},{path:"month/:year/:month/persons/:person_id",component:Xn,name:"timesheets-month-person"},{path:"week/:year",component:Xn,name:"timesheets-week"},{path:"week/:year/:week/persons/:person_id",component:Xn,name:"timesheets-week-person"},{path:"day/:year/:month",component:Xn,name:"timesheets-day"},{path:"day/:year/:month/:day/persons/:person_id",component:Xn,name:"timesheets-day-person"}]},{path:"/logs",component:Un,name:"logs"},{path:"profile",component:Bn,name:"profile",children:[{path:"change-avatar",component:Bn,name:"change-avatar"}]},{path:"settings",component:Gn,name:"settings"},{name:"task-types",path:"task-types",component:Zn,children:[{path:"new",component:Zn},{name:"edit-task-type",path:"edit/:task_type_id",component:Zn},{name:"delete-task-type",path:"delete/:task_type_id",component:Zn}]},{name:"task-status",path:"task-status",component:Jn,children:[{name:"new-task-status",path:"new",component:Jn},{name:"edit-task-status",path:"edit/:task_status_id",component:Jn},{name:"delete-task-status",path:"delete/:task_status_id",component:Jn}]},{path:"todos",component:Tn,name:"todos",children:[{path:":tab",component:Tn,name:"todos-tab"}]},{path:"productions",component:Ln,name:"productions",children:[{path:"new",component:Ln,name:"productions-new"},{path:"edit/:production_edit_id",component:Ln,name:"edit-production"},{path:"delete/:production_delete_id",component:Ln,name:"delete-production"}]},{path:"productions/:production_id/team",component:Qn,name:"team"},{path:"productions/:production_id/news-feed",component:vi,name:"news-feed"},{path:"productions/:production_id/schedule",component:Nn,name:"schedule"},{path:"productions/:production_id/production-settings",component:Rn,name:"production-settings"},{path:"productions/:production_id/quota",component:qn,name:"quota",children:[{path:"month/:year",component:qn,name:"quota-month"},{path:"month/:year/:month/persons/:person_id",component:qn,name:"quota-month-person"},{path:"week/:year",component:qn,name:"quota-week"},{path:"week/:year/:week/persons/:person_id",component:qn,name:"quota-week-person"},{path:"day/:year/:month",component:qn,name:"quota-day"},{path:"day/:year/:month/:day/persons/:person_id",component:qn,name:"quota-day-person"}]},{path:"productions/:production_id/episodes/:episode_id/quota",component:qn,name:"episode-quota",children:[{path:"month/:year",component:qn,name:"episode-quota-month"},{path:"month/:year/:month/persons/:person_id",component:qn,name:"episode-quota-month-person"},{path:"week/:year",component:qn,name:"episode-quota-week"},{path:"week/:year/:week/persons/:person_id",component:qn,name:"episode-quota-week-person"},{path:"day/:year/:month",component:qn,name:"episode-quota-day"},{path:"day/:year/:month/:day/persons/:person_id",component:qn,name:"episode-quota-day-person"}]},{path:"productions/:production_id/playlists",component:$n,name:"playlists",children:[{name:"playlist",path:":playlist_id",component:$n},{name:"delete-playlist",path:":playlist_id/delete",component:$n},{name:"edit-playlist",path:":playlist_id/edit",component:$n}]},{path:"productions/:production_id/breakdown",component:Pn,name:"breakdown",children:[{path:"sequences/:sequence_id",component:Pn,name:"breakdown-sequence"},{path:"asset-types/:asset_type_id",component:Pn,name:"breakdown-asset-type"}]},{path:"productions/:production_id/assets",component:Lt,name:"assets",children:[{path:"new",component:Lt,name:"new-asset"},{path:"edit/:asset_id",component:Lt,name:"edit-asset"},{path:"delete/:asset_id",component:Lt,name:"delete-asset"},{path:"restore/:asset_id",component:Lt,name:"restore-asset"},{path:"delete-all-tasks/:task_type_id",component:Lt,name:"delete-all-asset-tasks"}]},{path:"productions/:production_id/assets/:asset_id",component:En,name:"asset"},{path:"productions/:production_id/shots",component:Vi,name:"shots",children:[{path:"delete-all-tasks/:task_type_id",component:Vi,name:"delete-all-shot-tasks"},{path:"edit/:shot_id",component:Vi,name:"edit-shot"},{path:"delete/:shot_id",component:Vi,name:"delete-shot"},{path:"restore/:shot_id",component:Vi,name:"restore-shot"}]},{path:"productions/:production_id/shots/:shot_id",component:Yn,name:"shot"},{path:"productions/:production_id/sequences",component:Wn,name:"sequences",children:[{path:"edit/:sequence_id",component:Wn,name:"edit-sequence"},{path:"delete/:sequence_id",component:Wn,name:"delete-sequence"}]},{path:"productions/:production_id/asset-types",component:Fn,name:"production-asset-types"},{path:"productions/:production_id/:type/task-types/:task_type_id",component:vn,name:"task-type",children:[{name:"task-type-schedule",path:"schedule",component:vn},{name:"task-type-estimation",path:"estimation",component:vn}]},{name:"task",path:"productions/:production_id/:type/tasks/:task_id",component:Kn,children:[{name:"task-delete",path:"delete",component:Kn},{name:"task-change-preview",path:"comments/:comment_id/change-preview",component:Kn},{name:"task-preview",path:"previews/:preview_id",component:Kn},{name:"task-edit-comment",path:"comments/:comment_id/edit",component:Kn},{name:"task-delete-comment",path:"comments/:comment_id/delete",component:Kn}]},{path:"productions/:production_id/episodes",component:An,name:"episodes",children:[{path:"edit/:episode_id",component:An,name:"edit-episode"},{path:"delete/:episode_id",component:An,name:"delete-episode"}]},{path:"productions/:production_id/episodes/:episode_id/schedule",component:Nn,name:"episode-schedule"},{path:"productions/:production_id/episodes/:episode_id/playlists",component:$n,name:"episode-playlists",children:[{name:"episode-playlist",path:":playlist_id",component:$n},{name:"episode-delete-playlist",path:":playlist_id/delete",component:$n},{name:"episode-edit-playlist",path:":playlist_id/edit",component:$n}]},{path:"productions/:production_id/episodes/:episode_id/breakdown",component:Pn,name:"episode-breakdown",children:[{path:"sequences/:sequence_id",component:Pn,name:"episode-breakdown-sequence"},{path:"asset-types/:asset_type_id",component:Pn,name:"episode-breakdown-asset-type"}]},{path:"productions/:production_id/episodes/:episode_id/assets",component:Lt,name:"episode-assets",children:[{path:"new",component:Lt,name:"episode-new-asset"},{path:"edit/:asset_id",component:Lt,name:"episode-edit-asset"},{path:"delete/:asset_id",component:Lt,name:"episode-delete-asset"},{path:"restore/:asset_id",component:Lt,name:"episode-restore-asset"},{path:"delete-all-tasks/:task_type_id",component:Lt,name:"episode-delete-all-asset-tasks"}]},{path:"productions/:production_id/episodes/:episode_id/assets/:asset_id",component:En,name:"episode-asset"},{path:"productions/:production_id/episodes/:episode_id/shots",component:Vi,name:"episode-shots",children:[{path:"shots/manage",component:Vi,name:"episode-manage-shots"},{path:"delete-all-tasks/:task_type_id",component:Vi,name:"episode-delete-all-shot-tasks"},{path:"edit/:shot_id",component:Vi,name:"episode-edit-shot"},{path:"delete/:shot_id",component:Vi,name:"episode-delete-shot"},{path:"shots/restore/:shot_id",component:Vi,name:"episode-restore-shot"}]},{path:"productions/:production_id/episodes/:episode_id/shots/:shot_id",component:Yn,name:"episode-shot"},{path:"productions/:production_id/episodes/:episode_id/asset-types",component:Fn,name:"episode-production-asset-types"},{path:"productions/:production_id/episodes/:episode_id/sequences",component:Wn,name:"episode-sequences",children:[{path:"edit/:sequence_id",component:Wn,name:"episode-edit-sequence"},{path:"delete/:sequence_id",component:Wn,name:"episode-delete-sequence"}]},{path:"productions/:production_id/episodes/:episode_id/:type/task-types/:task_type_id",component:vn,name:"episode-task-type",children:[{name:"episode-task-type-schedule",path:"schedule",component:vn},{name:"episode-task-type-estimation",path:"estimation",component:vn}]},{path:"productions/:production_id/episodes/:episode_id/:type/tasks/:task_id",name:"episode-task",component:Kn,children:[{name:"episode-task-delete",path:"delete",component:Kn},{name:"episode-task-change-preview",path:"comments/:comment_id/change-preview",component:Kn},{name:"episode-task-preview",path:"previews/:preview_id",component:Kn},{name:"episode-task-edit-comment",path:"comments/:comment_id/edit",component:Kn},{name:"episode-task-delete-comment",path:"comments/:comment_id/delete",component:Kn}]}]},{path:"/login",component:Vt,name:"login"},{path:"/reset-password",component:Vn,name:"reset-password"},{path:"/reset-change-password/:token",component:zn,name:"reset-change-password"},{path:"/server-down",component:Hn,name:"server-down"},{path:"/wrong-browser",component:ea,name:"wrong-browser"},{path:"/*",component:Dn,name:"not-found"}];n.a.use(j["a"]);var sa=function(e,t,s){return s||{x:0,y:0}},ia=new j["a"]({mode:"history",scrollBehavior:sa,routes:ta}),na=s("d051"),aa=s.n(na),oa=s("30ef"),ra=s.n(oa),ca=s("58ca"),la=s("d842"),da=s("00e7"),ua=s.n(da),pa=s("df76"),ha=s.n(pa),ma=s("caf9"),fa=s("b9dd"),_a=s("3f9d"),va=s("e37d"),ga=s("6c34"),ya=s.n(ga);s("a507");n.a.use(ya.a,"/events"),n.a.config.productionTip=!1,n.a.use(aa.a),n.a.use(ca["a"]),n.a.use(A),n.a.use(va["a"]),n.a.use(la["a"],{adapter:ra.a}),n.a.use(ua.a),n.a.use(ma["a"]),n.a.use(fa["a"]),n.a.use(ha.a),n.a.use(_a["a"]),Object(a["sync"])(F["a"],ia),n.a.directive("focus",{inserted:function(e){e.focus()}}),n.a.prototype.$locale={change:function(e){O.locale=e},current:function(){return O.locale}},new n.a({el:"#app",components:{App:g},template:"<App/>",i18n:O,router:ia,store:F["a"]}),n.a.config.keyCodes.backspace=8},"585c":function(e,t,s){},"58f5":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",{staticClass:"name"},[s("task-type-name",{attrs:{"task-type":e.taskType,"production-id":e.productionId}})],1)},n=[],a=s("5530"),o=s("2f62"),r=s("274f"),c={name:"task-type-cell",components:{TaskTypeName:r["a"]},props:{taskType:{type:Object,default:null},productionId:{type:String,default:null}},computed:Object(a["a"])(Object(a["a"])({},Object(o["c"])([])),{},{color:function(){return"#000000"===this.entry.color.toUpperCase()?"$grey-strong":this.entry.color}}),methods:Object(a["a"])({},Object(o["b"])([]))},l=c,d=(s("6767"),s("2877")),u=Object(d["a"])(l,i,n,!1,null,"7b0f7d82",null);t["a"]=u.exports},"5a10":function(e,t,s){},"5b23":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{modal:!0,"is-active":e.active}},[s("div",{staticClass:"modal-background",on:{click:function(t){return e.$emit("cancel")}}}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box"},[e.commentToEdit&&e.commentToEdit.id?s("h1",{staticClass:"title"},[e._v(" "+e._s(e.$t("comments.edit_title"))+" ")]):e._e(),s("form",{on:{submit:function(e){e.preventDefault()}}},[s("combo-box-status",{attrs:{label:e.$t("task_status.title"),"task-status-list":e.taskStatusForCurrentUser},model:{value:e.form.task_status_id,callback:function(t){e.$set(e.form,"task_status_id",t)},expression:"form.task_status_id"}}),s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[e._v(" "+e._s(e.$t("comments.text"))+" ")]),s("at-ta",{attrs:{members:e.team,"name-key":"full_name",limit:"2"},scopedSlots:e._u([{key:"item",fn:function(t){return[s("div",{staticClass:"flexrow"},[s("people-avatar",{staticClass:"flexrow-item",attrs:{person:t.item,size:20,"no-cache":!0}}),s("span",{staticClass:"flexrow-item"},[e._v(" "+e._s(t.item.full_name)+" ")])],1)]}}])},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.form.text,expression:"form.text"},{name:"focus",rawName:"v-focus"}],ref:"textField",staticClass:"input",domProps:{value:e.form.text},on:{keyup:[function(t){return t.ctrlKey?e.runConfirmation(t):null},function(t){return t.metaKey?e.runConfirmation(t):null}],input:function(t){t.target.composing||e.$set(e.form,"text",t.target.value)}}})])],1)],1),s("modal-footer",{attrs:{"error-text":e.$t("comments.edit_error"),"is-error":e.isError,"is-loading":e.isLoading},on:{confirm:e.runConfirmation,cancel:function(t){return e.$emit("cancel")}}})],1)])])},n=[],a=s("5530"),o=s("2f62"),r=s("d065"),c=s("53ff"),l=s.n(c),d=s("56a0"),u=s("d5c9"),p=s("eb8c"),h={name:"edit-comment-modal",mixins:[r["a"]],components:{AtTa:l.a,ComboBoxStatus:d["a"],ModalFooter:u["a"],PeopleAvatar:p["a"]},props:["active","cancelRoute","isLoading","isError","commentToEdit","team"],data:function(){return this.commentToEdit&&this.commentToEdit.id?{form:{text:this.commentToEdit.text,task_status_id:this.commentToEdit.task_status_id}}:{form:{text:"",task_status_id:null}}},computed:Object(a["a"])({},Object(o["c"])(["taskStatusForCurrentUser"])),methods:{runConfirmation:function(e){e&&13!==e.keyCode&&e.keyCode||this.$emit("confirm",Object(a["a"])({id:this.commentToEdit.id},this.form))}},watch:{commentToEdit:function(){this.commentToEdit&&this.commentToEdit.id?(this.form.text=this.commentToEdit.text,this.form.task_status_id=this.commentToEdit.task_status_id):this.form={text:"",task_status_id:null}},active:function(){var e=this;this.active&&setTimeout((function(){e.$refs.textField.focus()}),100)}}},m=h,f=(s("e30e"),s("2877")),_=Object(f["a"])(m,i,n,!1,null,"53b9829e",null);t["a"]=_.exports},"5bf3":function(e,t,s){"use strict";var i=s("82ea"),n=s.n(i);n.a},"5c0b":function(e,t,s){"use strict";var i=s("9c0c"),n=s.n(i);n.a},"5c0c":function(e,t,s){"use strict";var i=s("e4c2"),n=s.n(i);n.a},"5c3d":function(e,t,s){e.exports=s.p+"img/spinner.c09255da.svg"},"5e11":function(e,t,s){},"5e4b":function(e,t,s){},"5f48":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{modal:!0,"delete-modal":!0,"is-active":e.active}},[s("div",{staticClass:"modal-background",on:{click:function(t){return e.$emit("cancel")}}}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box"},[s("p",{staticClass:"text"},[e._v(e._s(e.text))]),e.isError?s("p",{staticClass:"is-danger"},[e._v(e._s(e.errorText))]):e._e(),s("p",{staticClass:"has-text-right"},[s("a",{class:{button:!0,"is-danger":!0,"is-loading":e.isLoading},on:{click:function(t){return e.$emit("confirm")}}},[e._v(" "+e._s(e.$t("main.confirmation"))+" ")]),s("button",{staticClass:"button is-link",on:{click:function(t){return e.$emit("cancel")}}},[e._v(" "+e._s(e.$t("main.cancel"))+" ")])])])])])},n=[],a=s("5530"),o=s("2f62"),r=s("d065"),c={name:"delete-modal",mixins:[r["a"]],props:["text","active","isLoading","isError","errorText"],computed:Object(a["a"])({},Object(o["c"])([])),methods:Object(a["a"])({},Object(o["b"])([]))},l=c,d=(s("3f2a"),s("2877")),u=Object(d["a"])(l,i,n,!1,null,"a0cd0e0e",null);t["a"]=u.exports},6170:function(e,t,s){"use strict";var i=s("11ca"),n=s.n(i);n.a},6185:function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"a",(function(){return a})),s.d(t,"c",(function(){return o}));s("b64b");var i=s("5530"),n=function(e,t){for(var s={},i=0;i<e;i++){s[i]||(s[i]={});for(var n=0;n<t;n++)s[i][n]=!1}return s},a=function(e,t,s,n){for(var a=Object(i["a"])({},e),o=t;o<s;o++){a[o]||(a[o]={});for(var r=0;r<n;r++)a[o][r]=!1}return a},o=function(e){for(var t=Object.keys(e).length,s=e[0]?Object.keys(e[0]).length:0,i=0;i<t;i++)for(var n=0;n<s;n++)e[i][n]&&(e[i][n]=!1);return e}},"620e":function(e,t,s){"use strict";var i=s("cc90"),n=s.n(i);n.a},"62ab":function(e,t,s){"use strict";var i=s("0c5b"),n=s.n(i);n.a},"66a5":function(e,t,s){e.exports=s.p+"img/empty_asset.bf75a153.png"},"66be":function(e,t,s){"use strict";s.d(t,"a",(function(){return a})),s.d(t,"b",(function(){return o}));s("99af"),s("4160"),s("ac1f"),s("5319"),s("159b");var i=s("0e54"),n=s.n(i),a=function(e){var t="transparent";return e&&(t=e.task_type_color),{"border-left":"4px solid ".concat(t)}},o=function(e,t,s){var i=n()(e||"");return t&&t.forEach((function(e){var t=s[e];i=i.replace("@".concat(t.full_name),'<a class="mention" href="/people/'.concat(t.id,'">@').concat(t.full_name,"</a>"))})),i}},"66c0":function(e,t,s){"use strict";var i=s("9374"),n=s.n(i);n.a},"66e7":function(e,t,s){"use strict";s.d(t,"e",(function(){return r})),s.d(t,"i",(function(){return c})),s.d(t,"h",(function(){return l})),s.d(t,"f",(function(){return d})),s.d(t,"c",(function(){return u})),s.d(t,"d",(function(){return p})),s.d(t,"a",(function(){return h})),s.d(t,"g",(function(){return m})),s.d(t,"b",(function(){return f}));s("99af"),s("4de4"),s("7db0"),s("c740"),s("4160"),s("fb6a"),s("a434"),s("159b");var i=s("2909"),n=s("b85c"),a=s("ba4c"),o=s.n(a),r=function(e){"Shot"===e.entity_type_name?(e.episode_name?e.full_entity_name="".concat(e.episode_name," / ").concat(e.sequence_name," / ").concat(e.entity_name):e.full_entity_name="".concat(e.sequence_name," / ").concat(e.entity_name),e.entity_path={name:"shot",params:{production_id:e.project_id,shot_id:e.entity_id}}):(e.full_entity_name="".concat(e.entity_type_name," / ").concat(e.entity_name),e.entity_path={name:"asset",params:{production_id:e.project_id,asset_id:e.entity_id}})},c=function(e,t){var s=e.find((function(e){return e.id===t.id}));return s&&Object.assign(s,t),s},l=function(e,t){return e.filter((function(e){return e.id!==t.id}))},d=function(e,t){return e.filter((function(e){return e!==t}))},u=function(e){var t={};return e.forEach((function(e){e.validations?Object.assign(t,e.validations):e.tasks.forEach((function(e){t[e.task_type_id]=e.id}))})),t},p=function(e,t){var s,i=[],a=[],o=null,r=Object(n["a"])(e);try{for(r.s();!(s=r.n()).done;){var c=s.value;o&&c[t]!==o[t]&&(i.push(a.slice(0)),a=[]),a.push(c),o=c}}catch(l){r.e(l)}finally{r.f()}return i.push(a),i},h=function(e,t,s){e[t]||o.a.set(e,t,[]),e[t].find((function(e){return e===s}))||e[t].push(s)},m=function(e,t,s){var i=e[t].findIndex((function(e){return e===s}));null!==i&&e[t].splice(i,1)},f=function(e,t,s){var n=Object(i["a"])(e),a=n[t];return n.splice(t,1),n.splice(s,0,a),n}},6767:function(e,t,s){"use strict";var i=s("539a"),n=s.n(i);n.a},6896:function(e,t,s){},"68b5":function(e,t,s){"use strict";var i=s("a161"),n=s.n(i);n.a},6913:function(e,t,s){},"6aac":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{ref:"container",staticClass:"preview-player dark"},[s("div",{staticClass:"preview",style:{height:e.defaultHeight+"px"}},[s("div",{ref:"canvas-wrapper",staticClass:"canvas-wrapper",attrs:{oncontextmenu:"return false;"}},[s("canvas",{ref:"annotation-canvas",staticClass:"canvas",attrs:{id:"annotation-canvas"}})]),s("preview-viewer",{ref:"preview-viewer",staticClass:"preview-viewer",attrs:{name:"player1",big:e.big,"default-height":e.defaultHeight,"full-screen":e.fullScreen,"is-ordering":e.isOrdering,"is-comparing":e.isComparing,"is-muted":e.isMuted,"is-repeating":e.isRepeating,light:e.light,preview:e.currentPreview},on:{"size-changed":e.fixCanvasSize,"duration-changed":e.changeMaxDuration,"time-update":e.updateTime,"play-ended":e.pause}}),s("preview-viewer",{directives:[{name:"show",rawName:"v-show",value:e.isComparing&&e.previewToCompare,expression:"isComparing && previewToCompare"}],ref:"comparison-preview-viewer",staticClass:"comparison-preview-viewer",attrs:{name:"player2",big:e.big,"default-height":e.defaultHeight,"full-screen":e.fullScreen,"is-comparing":e.isComparing,"is-muted":!0,"is-repeating":e.isRepeating,light:e.light,preview:e.previewToCompare}})],1),s("div",{ref:"button-bar",staticClass:"button-bar"},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.isMovie,expression:"isMovie"}],staticClass:"video-progress pull-bottom"},[s("progress",{ref:"progress",attrs:{value:"0",min:"0"},on:{click:e.onProgressClicked}})]),s("annotation-bar",{directives:[{name:"show",rawName:"v-show",value:e.isMovie,expression:"isMovie"}],ref:"annotation-bar",attrs:{annotations:e.annotations,maxDurationRaw:e.videoDuration,width:e.width},on:{"select-annotation":e.onAnnotationClicked}}),s("div",{ref:"buttons",staticClass:"buttons flexrow pull-bottom"},[e.isMovie?s("div",{staticClass:"left flexrow"},[e.isPlaying?s("button-simple",{staticClass:"flexrow-item",attrs:{title:e.$t("playlists.actions.pause"),icon:"pause"},on:{click:e.onPlayPauseClicked}}):s("button-simple",{staticClass:"flexrow-item",attrs:{title:e.$t("playlists.actions.play"),icon:"play"},on:{click:e.onPlayPauseClicked}}),e.fullScreen?s("button-simple",{attrs:{active:e.isRepeating,title:e.$t("playlists.actions.looping"),icon:"repeat"},on:{click:e.onRepeatClicked}}):e._e(),e.isMuted?s("button-simple",{staticClass:"flexrow-item",attrs:{title:e.$t("playlists.actions.unmute"),icon:"soundoff"},on:{click:e.onToggleSoundClicked}}):s("button-simple",{staticClass:"flexrow-item",attrs:{title:e.$t("playlists.actions.mute"),icon:"soundon"},on:{click:e.onToggleSoundClicked}}),s("span",{staticClass:"flexrow-item time-indicator",attrs:{title:e.$t("playlists.actions.current_time")}},[e._v(" "+e._s(e.currentTime)+" ")]),!e.light||e.readOnly||e.fullScreen?s("span",{staticClass:"flexrow-item time-indicator"},[e._v(" / ")]):e._e(),!e.light||e.readOnly||e.fullScreen?s("span",{staticClass:"flexrow-item time-indicator",attrs:{title:e.$t("playlists.actions.max_duration")}},[e._v(" "+e._s(e.maxDuration)+" ")]):e._e(),s("span",{staticClass:"flexrow-item time-indicator mr1",attrs:{title:e.$t("playlists.actions.frame_number")}},[e._v(" ("+e._s(e.currentFrame)+") ")])],1):e._e(),s("div",{staticClass:"flexrow flexrow-item"},[e.taskTypeOptions.length>0&&e.fullScreen?s("button-simple",{staticClass:"ml1",attrs:{active:e.isComparing,icon:"compare",title:e.$t("playlists.actions.split_screen")},on:{click:e.onCompareClicked}}):e._e(),!e.isComparing||e.light&&!e.fullScreen?e._e():s("combobox",{staticClass:"comparison-combobox dark",attrs:{options:e.taskTypeOptions,"is-dark":!0,thin:!0},model:{value:e.taskTypeId,callback:function(t){e.taskTypeId=t},expression:"taskTypeId"}}),!e.isComparing||e.light&&!e.fullScreen?e._e():s("combobox",{staticClass:"comparison-combobox dark",attrs:{options:e.previewFileOptions,"is-dark":!0,thin:!0},model:{value:e.previewToCompareId,callback:function(t){e.previewToCompareId=t},expression:"previewToCompareId"}})],1),s("div",{staticClass:"filler"}),s("div",{staticClass:"flexrow"},[e.isMovie||e.isPicture?s("div",{staticClass:"flexrow"},[!e.readOnly&&e.fullScreen?s("button-simple",{staticClass:"flexrow-item",attrs:{icon:"undo",title:e.$t("playlists.actions.annotation_undo")},on:{click:e.undoLastAction}}):e._e(),!e.readOnly&&e.fullScreen?s("button-simple",{staticClass:"flexrow-item flexrow-item",attrs:{title:e.$t("playlists.actions.annotation_redo"),icon:"redo"},on:{click:e.redoLastAction}}):e._e(),!e.readOnly&&e.fullScreen?s("button-simple",{staticClass:"flexrow-item",attrs:{icon:"remove",title:e.$t("playlists.actions.annotation_delete")},on:{click:e.onDeleteClicked}}):e._e(),s("transition",{attrs:{name:"slide"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.isTyping&&(!e.light||e.fullScreen),expression:"isTyping && (!light || fullScreen)"}],staticClass:"annotation-tools"},[s("color-picker",{attrs:{isOpen:e.isShowingPalette,color:this.textColor,palette:this.palette},on:{TogglePalette:e.onPickColor,change:e.onChangeTextColor}})],1)]),e.readOnly||e.light&&!e.fullScreen?e._e():s("button-simple",{staticClass:"flexrow-item",attrs:{icon:"type",active:e.isTyping,title:e.$t("playlists.actions.annotation_text")},on:{click:e.onTypeClicked}}),s("transition",{attrs:{name:"slide"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.isDrawing&&(!e.light||e.fullScreen),expression:"isDrawing && (!light || fullScreen)"}],staticClass:"annotation-tools"},[s("pencil-picker",{attrs:{isOpen:e.isShowingPencilPalette,pencil:e.pencil,sizes:this.pencilPalette},on:{"toggle-palette":e.onPickPencil,change:e.onChangePencil}}),s("color-picker",{attrs:{isOpen:e.isShowingPalette,color:this.color,palette:this.palette},on:{TogglePalette:e.onPickColor,change:e.onChangeColor}})],1)]),e.readOnly||e.light&&!e.fullScreen?e._e():s("button-simple",{staticClass:"flexrow-item",attrs:{icon:"pencil",active:e.isDrawing,title:e.$t("playlists.actions.annotation_draw")},on:{click:e.onPencilAnnotateClicked}})],1):e._e(),!e.readOnly&&e.fullScreen&&e.isPicture?s("div",{staticClass:"separator"}):e._e(),!e.readOnly&&e.isPicture?s("a",{staticClass:"button flexrow-item",attrs:{href:e.originalPath,title:e.$t("playlists.actions.see_original_file"),target:"blank"}},[s("arrow-up-right-icon",{staticClass:"icon is-small"})],1):e._e(),!e.fullScreen||e.fullScreen&&(e.previews.length>1||e.lastPreviewFiles.length>1)?s("div",{staticClass:"separator"}):e._e(),e.currentPreview?s("browsing-bar",{attrs:{"current-index":e.currentIndex,previews:e.previews,"read-only":e.readOnly,light:e.light,"full-screen":e.fullScreen},on:{"add-preview-clicked":function(t){return e.$emit("add-extra-preview")},"next-clicked":e.onNextClicked,"previous-clicked":e.onPreviousClicked,"remove-preview-clicked":e.onRemovePreviewClicked,"current-index-clicked":function(t){e.isOrdering=!e.isOrdering}}}):e._e(),s("div",{staticClass:"flexrow"},[e.fullScreen?s("div",{staticClass:"flexrow"},e._l(e.lastPreviewFiles,(function(t){return s("span",{key:"last-preview-"+t.id,class:{"previous-preview-file":!0,"current-preview-file":e.isCurrentRevision(t)},attrs:{title:e.getRevisionTitle(t)},on:{click:function(s){return e.changeCurrentPreview(t)}}},[e._v(" "+e._s(t.revision)+" ")])})),0):e._e()]),e.lastPreviewFiles.length>1&&e.fullScreen?s("div",{staticClass:"separator"}):e._e(),s("a",{staticClass:"button flexrow-item",attrs:{href:e.originalDlPath,title:e.$t("playlists.actions.download_file")}},[s("download-icon",{staticClass:"icon is-small"})],1),e.isFullScreenEnabled?s("button-simple",{staticClass:"flexrow-item",attrs:{title:e.$t("playlists.actions.fullscreen"),icon:"maximize"},on:{click:e.onFullscreenClicked}}):e._e()],1)])],1),e.light&&!e.fullScreen||!e.isOrdering?e._e():s("div",{ref:"revision-previews",staticClass:"flexrow revision-previews"},e._l(e.previews,(function(t,i){return s("div",{key:t.id,staticClass:"flexrow-item revision-preview"},[s("revision-preview",{attrs:{"preview-file":t,index:i,"is-selected":e.currentPreview.id===t.id},on:{selected:function(t){return e.onRevisionPreviewSelected(i+1)},"preview-dropped":e.onRevisionPreviewDropped}})],1)})),0)])},n=[],a=(s("99af"),s("cb29"),s("4de4"),s("7db0"),s("c740"),s("4160"),s("caad"),s("d81d"),s("b0c0"),s("b64b"),s("1393"),s("159b"),s("5530")),o=s("7a94"),r=s("2f62"),c=s("bcd2"),l=s("484d"),d={created:function(){},mounted:function(){},beforeDestroy:function(){},computed:{isFullScreenEnabled:function(){return!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitSupportsFullscreen||document.webkitFullscreenEnabled||document.createElement("picture").webkitRequestFullScreen)}},methods:{isFullScreen:function(){return!!(document.fullScreen||document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement||document.fullscreenElement)},documentExitFullScreen:function(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()},documentSetFullScreen:function(e){e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullScreen?e.webkitRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen()}}},u=s("eb23"),p=s("0a35"),h=s("8707"),m=s("de40"),f=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"left flexrow"},[e.isBigDisplay?s("button-simple",{staticClass:"flexrow-item",attrs:{icon:"left",title:e.$t("playlists.actions.files_previous")},on:{click:function(t){return e.$emit("previous-clicked")}}}):e._e(),e.isBigDisplay?s("div",{staticClass:"flexrow-item bar-element current-index",attrs:{title:e.$t("playlists.actions.files_position")},on:{click:function(t){return e.$emit("current-index-clicked")}}},[s("span",[e._v(e._s(e.currentIndex))]),e.fullScreen?s("span",[e._v(" / "+e._s(e.previews.length))]):e._e()]):e._e(),e.isBigDisplay?s("button-simple",{staticClass:"flexrow-item",attrs:{icon:"right",title:e.$t("playlists.actions.files_next")},on:{click:function(t){return e.$emit("next-clicked")}}}):e._e(),e.readOnly||e.fullScreen?e._e():s("button-simple",{staticClass:"flexrow-item",attrs:{icon:"plus",title:e.$t("playlists.actions.files_add")},on:{click:function(t){return e.$emit("add-preview-clicked")}}}),e.readOnly||e.fullScreen||e.light?e._e():s("button-simple",{staticClass:"flexrow-item",attrs:{icon:"delete",title:e.$t("playlists.actions.files_delete")},on:{click:function(t){return e.$emit("remove-preview-clicked")}}}),e.isBigDisplay?s("div",{staticClass:"separator"}):e._e()],1)},_=[],v=(s("a9e3"),{name:"browsing-bar",components:{ButtonSimple:m["a"]},props:{currentIndex:{type:Number,default:0},fullScreen:{type:Boolean,default:!1},light:{type:Boolean,default:!1},previews:{type:Array,default:function(){return[]}},readOnly:{type:Boolean,default:!1}},computed:Object(a["a"])(Object(a["a"])({},Object(r["c"])([])),{},{isBigDisplay:function(){return(!this.light||this.fullScreen)&&this.previews.length>1}}),methods:Object(a["a"])({},Object(r["b"])([])),watch:{}}),g=v,y=(s("8bd3"),s("2877")),b=Object(y["a"])(g,f,_,!1,null,"e2bc0c18",null),k=b.exports,w=s("7096"),C=s("992f"),S=s("7f06"),T=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"wrapper flexrow"},[s("drag",{attrs:{"transfer-data":e.index},on:{drag:e.onDragged}},[s("div",{class:{"flerow-item":!0,"revision-preview":!0,selected:e.isSelected},on:{click:function(t){return t.preventDefault(),e.onSelected(t)}}},[e.hasThumbnail?s("light-entity-thumbnail",{attrs:{width:"150px",height:"103px","preview-file-id":e.previewFile.id}}):s("span",{attrs:{title:e.originalName}},[e._v(" ."+e._s(e.previewFile.extension)+" ")])],1)]),s("drop",{on:{drop:e.onDropped}},[s("div",{ref:"drop-area",staticClass:"drop-area flexrow-item"})])],1)},x=[],E=s("d793"),P={name:"revision-preview",components:{LightEntityThumbnail:E["a"]},data:function(){return{}},props:{index:{required:!0,type:Number},isSelected:{default:!1,type:Boolean},previewFile:{required:!0,type:Object}},mounted:function(){this.setListeners()},computed:Object(a["a"])(Object(a["a"])({},Object(r["c"])(["isCurrentUserManager"])),{},{dropArea:function(){return this.$refs["drop-area"]},hasThumbnail:function(){return["mp4","png"].includes(this.previewFile.extension)},originalName:function(){return"".concat(this.previewFile.original_name,".").concat(this.previewFile.extension)}}),methods:{onSelected:function(){this.$emit("selected",this.index)},setListeners:function(){this.dropArea.addEventListener("dragover",this.onDragover),this.dropArea.addEventListener("dragleave",this.onDragleave)},onDragged:function(){},onDragleave:function(){this.dropArea.style.background="transparent",this.dropArea.style.width="15px"},onDragover:function(){this.dropArea.style.width="60px"},onDropped:function(e){this.dropArea.style.background="transparent",this.dropArea.style.width="15px",this.$emit("preview-dropped",{previousIndex:e,newIndex:this.index})}},watch:{}},O=P,A=(s("6170"),Object(y["a"])(O,T,x,!1,null,"581dbb13",null)),j=A.exports,D=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{ref:"container",staticClass:"preview-viewer dark"},[s("video-viewer",{directives:[{name:"show",rawName:"v-show",value:e.isMovie,expression:"isMovie"}],ref:"video-viewer",staticClass:"video-viewer",attrs:{name:e.name,big:e.big,"default-height":e.defaultHeight,"is-comparing":e.isComparing,"is-muted":e.isMuted,"is-repeating":e.isRepeating,light:e.light,preview:e.preview},on:{"size-changed":function(t){return e.$emit("size-changed",t)},"duration-changed":function(t){return e.$emit("duration-changed",t)},"time-update":function(t){return e.$emit("time-update",t)},"play-ended":function(t){return e.$emit("play-ended")}}}),s("picture-viewer",{directives:[{name:"show",rawName:"v-show",value:e.isPicture,expression:"isPicture"}],ref:"picture-viewer",attrs:{big:e.big,"default-height":e.defaultHeight,"full-screen":e.fullScreen,"is-comparing":e.isComparing,light:e.light,preview:e.preview},on:{"size-changed":function(t){return e.$emit("size-changed",t)}}}),s("div",{directives:[{name:"show",rawName:"v-show",value:e.isFile,expression:"isFile"}],staticClass:"center",style:{height:e.defaultHeight+"px"}},[e.isFile?s("a",{ref:"preview-file",staticClass:"button mt2",attrs:{href:e.originalDlPath,title:e.fileTitle}},[s("download-icon",{staticClass:"icon"}),s("span",{staticClass:"text"},[e._v(" "+e._s(e.$t("tasks.download_pdf_file",{extension:e.extension}))+" ")])],1):e._e()])],1)},M=[],I=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{ref:"container",staticClass:"picture-player"},[s("div",{ref:"picture-wrapper",staticClass:"picture-wrapper",attrs:{oncontextmenu:"return false;"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:!e.isLoading,expression:"!isLoading"}],ref:"picture-subwrapper",staticClass:"picture-subwrapper"},[s("div",{ref:"loupe",staticClass:"loupe",style:{background:"url("+e.pictureDlPath+")"},attrs:{id:"loupe"}}),s("div",{directives:[{name:"show",rawName:"v-show",value:e.isGif,expression:"isGif"}]},[s("img",{ref:"picture-gif",attrs:{src:e.pictureGifPath}})]),s("div",{directives:[{name:"show",rawName:"v-show",value:!e.isGif,expression:"!isGif"}]},[s("img",{directives:[{name:"show",rawName:"v-show",value:e.fullScreen,expression:"fullScreen"}],ref:"picture-big",attrs:{id:"picture-big",src:e.pictureDlPath}}),s("img",{directives:[{name:"show",rawName:"v-show",value:!e.fullScreen,expression:"!fullScreen"}],ref:"picture",attrs:{id:"picture",src:e.picturePath}})])]),e.isLoading?s("spinner"):e._e()],1)])},$=[],L=s("be83"),F={name:"picture-viewer",components:{Spinner:L["a"]},mixins:[u["a"],d],props:{big:{type:Boolean,default:!1},defaultHeight:{type:Number,default:0},fullScreen:{type:Boolean,default:!1},isComparing:{type:Boolean,default:!1},light:{type:Boolean,default:!1},preview:{type:Object,default:function(){}}},data:function(){return{isLoading:!0,picturePath:"",pictureDlPath:"",pictureGifPath:""}},mounted:function(){this.container.style.height=this.defaultHeight+"px",this.isLoading=!0,this.picture.complete&&(this.isLoading=!1,this.onWindowResize()),this.picture.addEventListener("load",this.endLoading),this.pictureBig.addEventListener("load",this.endLoading),this.pictureGif.addEventListener("load",this.endLoading),window.addEventListener("resize",this.onWindowResize),this.setPicturePath()},beforeDestroy:function(){window.removeEventListener("resize",this.onWindowResize)},computed:{container:function(){return this.$refs.container},picture:function(){return this.$refs.picture},pictureBig:function(){return this.$refs["picture-big"]},pictureGif:function(){return this.$refs["picture-gif"]},pictureWrapper:function(){return this.$refs["picture-wrapper"]},pictureSubWrapper:function(){return this.$refs["picture-subwrapper"]},extension:function(){return this.preview?this.preview.extension:""},isGif:function(){return"gif"===this.extension},isMovie:function(){return"mp4"===this.extension},pictureOriginalPath:function(){if(this.preview){var e=this.preview.id;return"/api/pictures/originals/preview-files/".concat(e,".png")}return""}},methods:{getNaturalDimensions:function(){var e={naturalWidth:0,naturalHeight:0};return this.fullScreen||!this.picture.naturalWidth||this.isGif?this.fullScreen&&this.pictureBig.naturalWidth&&!this.isGif?e=this.pictureBig:this.pictureGif.naturalWidth&&this.isGif&&(e=this.pictureGif):e=this.picture,{height:e.naturalHeight,width:e.naturalWidth}},getDimensions:function(){var e=1,t=this.getNaturalDimensions();t.width>0&&(e=t.height/t.width);var s=t.width;s>this.container.offsetWidth&&(s=this.container.offsetWidth);var i=Math.floor(s*e);return i>this.defaultHeight&&(i=this.defaultHeight),s=Math.floor(i/e),{width:s,height:i}},onWindowResize:function(){var e=this,t=(new Date).getTime();this.lastCall=this.lastCall||0,t-this.lastCall>600&&(this.lastCall=t,this.$nextTick((function(){e.resetPicture()})))},endLoading:function(){this.isLoading=!1,this.$nextTick(this.resetPicture)},resetPicture:function(){var e=this.defaultHeight+"px";this.container.style.height=e,this.pictureWrapper&&(this.pictureWrapper.style.height=e),this.pictureSubWrapper&&(this.pictureWrapper.style["max-height"]=e,this.pictureSubWrapper.style["max-height"]=e);var t=this.getDimensions(),s=t.width,i=t.height;this.picture.style.width=s+"px",this.picture.style.height=i+"px",this.pictureBig.style.width=s+"px",this.pictureBig.style.height=i+"px",this.pictureGif.style.width=s+"px",this.pictureGif.style.height=i+"px",this.picture.width=s,this.picture.height=i,this.pictureBig.width=s,this.pictureBig.height=i,this.pictureGif.width=s,this.pictureGif.height=i,this.isMovie||this.$emit("size-changed",t)},setPicturePath:function(){if(this.isGif){var e=this.preview.id;this.pictureGifPath="/api/pictures/originals/preview-files/".concat(e,".gif")}else if(this.preview){var t=this.preview.id;this.picturePath="/api/pictures/previews/preview-files/".concat(t,".png")}this.setPictureDlPath()},setPictureDlPath:function(){if(this.preview){var e=this.preview.id;this.pictureDlPath="/api/pictures/originals/preview-files/".concat(e,"/download")}else this.pictureDlPath=""},showLoupe:function(){this.$refs.loupe.style.display="block"},hideLoupe:function(){this.$refs.loupe.style.display="none"},updateLoupePosition:function(e,t){var s=t.width,i=t.height,n=parseInt(s.substring(0,s.length-2)),a=parseInt(i.substring(0,i.length-2)),o=Math.max(e.pointer.x-150,0),r=Math.max(e.pointer.y-150,0);o=Math.min(o,n-300),r=Math.min(r,a-300),this.$refs.loupe.style.left=o+"px",this.$refs.loupe.style.top=r+"px";var c=Math.max(e.pointer.x,0),l=Math.max(e.pointer.y,0);c=Math.min(c,n),l=Math.min(l,a);var d=this.getNaturalDimensions(),u=d.width/n,p=Math.min(u*c-150,d.width-300),h=Math.min(u*l-150,d.height-300);this.$refs.loupe.style["background-position"]="-".concat(p,"px -").concat(h,"px")}},watch:{fullScreen:function(){this.fullScreen?(this.isLoading=!0,this.setPictureDlPath(),this.pictureBig.complete&&(this.isLoading=!1)):this.setPicturePath()},isLoading:function(){this.isLoading||setTimeout(this.resetPicture,100)},light:function(){this.onWindowResize()},isComparing:function(){var e=this;setTimeout((function(){e.resetPicture()}),20)},preview:function(){this.isLoading=!0,this.setPicturePath(),this.setPictureDlPath(),this.currentIndex>1&&(this.currentIndex=1),this.fullScreen?this.pictureBig.complete&&(this.resetPicture(),this.isLoading=!1):(this.picture.complete&&(this.isLoading=!1),this.$nextTick(this.resetPicture))}}},N=F,q=(s("c8f4"),Object(y["a"])(N,I,$,!1,null,"27ac8689",null)),R=q.exports,B=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{ref:"container",staticClass:"video-player"},[s("div",{ref:"video-wrapper",staticClass:"video-wrapper"},[e.isLoading?s("div",{staticClass:"loading-background"},[s("spinner",{staticClass:"spinner"})],1):e._e(),s("video",{ref:"movie",staticClass:"annotation-movie",style:{display:e.isLoading?"none":"block"},attrs:{id:"annotation-movie",preload:"auto",src:e.moviePath,poster:e.posterPath}})])])},V=[],z={name:"video-viewer",mixins:[u["a"]],components:{Spinner:L["a"]},props:{name:{type:String,default:""},big:{type:Boolean,default:!1},isComparing:{type:Boolean,default:!1},isDrawing:{type:Boolean,default:!1},isTyping:{type:Boolean,default:!1},isMuted:{type:Boolean,default:!1},isRepeating:{type:Boolean,default:!1},light:{type:Boolean,default:!1},preview:{type:Object,default:function(){}},defaultHeight:{type:Number,default:0}},data:function(){return{annotations:[],currentTime:"00:00.000",currentTimeRaw:0,isLoading:!1,maxDuration:"00:00.000",videoDuration:0}},mounted:function(){var e=this;this.container&&(this.container.style.height=this.defaultHeight+"px",this.isLoading=!0,this.isRepeating=!1,this.isMuted&&(this.video.muted=this.isMuted),setTimeout((function(){e.video&&(e.video.addEventListener("focus",(function(){this.blur()}),!1),e.video.addEventListener("loadedmetadata",(function(){e.configureVideo(),e.onWindowResize(),e.isLoading=!1})),e.video.addEventListener("ended",(function(){e.isLoading=!1})),e.video.addEventListener("error",(function(){e.$refs.movie.style.height=e.defaultHeight+"px",e.isLoading=!1})),window.addEventListener("resize",e.onWindowResize),e.video.addEventListener("timeupdate",e.onTimeUpdate))}),0))},beforeDestroy:function(){this.pause(),window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("resize",this.onWindowResize)},computed:Object(a["a"])(Object(a["a"])({},Object(r["c"])(["currentProduction"])),{},{currentFrame:function(){return Object(c["a"])(this.currentTimeRaw,this.fps)},container:function(){return this.$refs.container},fps:function(){return this.currentProduction.fps||24},isVideo:function(){return this.$refs.movie&&this.videoDuration&&this.videoDuration>0},moviePath:function(){return"mp4"===this.extension?"/api/movies/originals/preview-files/".concat(this.preview.id,".mp4"):null},movieDlPath:function(){return this.preview?"/api/movies/originals/preview-files/".concat(this.preview.id,"/download"):""},posterPath:function(){return"mp4"===this.extension?"/api/pictures/previews/preview-files/".concat(this.preview.id,".png"):null},video:function(){return this.$refs.movie},videoWrapper:function(){return this.$refs["video-wrapper"]},extension:function(){return this.preview?this.preview.extension:""},isMovie:function(){return"mp4"===this.extension}}),methods:{formatFrame:c["a"],formatTime:c["b"],getNaturalDimensions:function(){return{height:this.video.videoHeight,width:this.video.videoWidth}},getDimensions:function(){var e=this.getNaturalDimensions(),t=e.height/e.width,s=this.container.parentElement.parentElement,i=Math.min(e.width,s.offsetWidth);this.isComparing&&(i=Math.min(e.width,s.offsetWidth/2));var n=Math.floor(i*t);return n=Math.min(n,this.defaultHeight),i=Math.floor(n/t),n=Math.floor(i*t),n=Math.min(n,this.defaultHeight),{width:i,height:n}},setCurrentTime:function(e){e=Object(c["d"])(e,this.fps),this.video.currentTime=e},configureVideo:function(){this.video.addEventListener("timeupdate",this.onTimeUpdate),this.video.onended=this.onVideoEnd,0===this.video.currentTime&&this.mountVideo()},mountVideo:function(){if(this.isMovie&&(this.video.mute=!0,this.videoDuration=this.video.duration,this.isLoading=!1,this.$emit("duration-changed",this.videoDuration),this.container)){var e=this.getDimensions(),t=e.width,s=e.height;s>0&&(this.container.style.height=this.defaultHeight+"px",this.videoWrapper.style.width=t+"px",this.videoWrapper.style.height=s+"px",this.video.style.width=t+"px",this.video.style.height=s+"px",this.$emit("size-changed",{width:t,height:s}))}},onTimeUpdate:function(e){this.video?this.currentTimeRaw=this.video.currentTime:this.currentTimeRaw=0,this.$emit("time-update",this.currentTimeRaw)},play:function(){this.video.play()},pause:function(){this.video.pause()},toggleMute:function(){this.video.muted=!this.video.muted},goPreviousFrame:function(){var e=this.video.currentTime-1/this.fps;e<0?this.setCurrentTime(0):this.setCurrentTime(e)},goNextFrame:function(){var e=this.video.currentTime+1/this.fps;e>this.video.duration?this.setCurrentTime(this.video.duration):this.setCurrentTime(e)},onVideoEnd:function(){this.isPlaying=!1,this.isRepeating?(this.video.currentTime=0,this.play()):this.$emit("play-ended")},onWindowResize:function(e){var t=this,s=(new Date).getTime();this.lastCall=this.lastCall||0,s-this.lastCall>600&&(this.lastCall=s,this.$nextTick((function(){t.mountVideo(),e&&"function"===typeof e&&e()})))}},watch:{preview:function(){this.maxDuration="00:00.000",this.pause()},light:function(){this.onWindowResize()},isComparing:function(){this.mountVideo()},isMuted:function(){this.video.muted=this.isMuted}}},U=z,H=(s("d265"),Object(y["a"])(U,B,V,!1,null,"328c55a2",null)),G=H.exports,W={name:"preview-viewer",mixins:[u["a"]],components:{DownloadIcon:p["n"],PictureViewer:R,VideoViewer:G},props:{name:{type:String,default:""},big:{type:Boolean,default:!1},defaultHeight:{type:Number,default:0},isComparing:{type:Boolean,default:!1},fullScreen:{type:Boolean,default:!1},isMuted:{type:Boolean,default:!1},isRepeating:{type:Boolean,default:!1},light:{type:Boolean,default:!1},preview:{type:Object,default:function(){}}},data:function(){return{}},mounted:function(){},beforeDestroy:function(){},computed:Object(a["a"])(Object(a["a"])({},Object(r["c"])(["currentProduction"])),{},{container:function(){return this.$refs.container},videoViewer:function(){return this.$refs["video-viewer"]},pictureViewer:function(){return this.$refs["picture-viewer"]},fileTitle:function(){return this.preview?this.preview.original_name+"."+this.preview.extension:""},extension:function(){return this.preview?this.preview.extension:""},isMovie:function(){return"mp4"===this.extension},isPdf:function(){return"pdf"===this.extension},isPicture:function(){return["gif","png","jpg","jpeg"].includes(this.extension)},is3DModel:function(){return"obj"===this.extension},isFile:function(){return!this.isPicture&&!this.isMovie},originalPath:function(){if(this.preview){var e=this.preview.id,t=this.extension?this.extension:"png",s=this.isMovie?"movies":"pictures";return"/api/".concat(s,"/originals/preview-files/").concat(e,".").concat(t)}return""},originalDlPath:function(){if(this.preview){var e=this.isMovie?"movies":"pictures";return"/api/".concat(e,"/originals/preview-files/")+"".concat(this.preview.id,"/download")}return""}}),methods:Object(a["a"])(Object(a["a"])({},Object(r["b"])(["updateRevisionPreviewPosition"])),{},{formatFrame:c["a"],formatTime:c["b"],resetVideo:function(){this.videoViewer&&this.videoViewer.mountVideo()},updateTime:function(e){this.currentTimeRaw=e,this.currentTime=this.formatTime(this.currentTimeRaw)},changeMaxDuration:function(e){e?(this.maxDuration=this.formatTime(e),this.videoDuration=e):(this.maxDuration="00:00.000",this.videoDuration=0)},play:function(){this.isPlaying=!0,this.isDrawing=!1,this.videoViewer&&this.videoViewer.play()},pause:function(){this.isPlaying=!1,this.videoViewer&&this.videoViewer.pause()},goPreviousFrame:function(){this.videoViewer.goPreviousFrame()},goNextFrame:function(){this.videoViewer.goNextFrame()},onVideoEnd:function(){this.isPlaying=!1,this.isRepeating&&(this.videoViewer.currentTime=0,this.play())},onPlayPauseClicked:function(){this.isPlaying?this.pause():this.play()},onRepeatClicked:function(){this.isRepeating?this.isRepeating=!1:this.isRepeating=!0},getDimensions:function(){var e={width:0,height:0};return this.container&&(e.width=this.container.offsetWidth,e.height=this.container.offsetHeight),e},resetPicture:function(){this.pictureViewer&&this.pictureViewer.resetPicture()},getPreviewDimensions:function(){return this.isMovie?this.videoViewer.getDimensions():this.isPicture?this.pictureViewer.getDimensions():{width:0,height:0}},setCurrentTime:function(e){this.videoViewer.setCurrentTime(e)},getCurrentTimeRaw:function(e){return this.videoViewer.currentTimeRaw},showLoupe:function(){this.pictureViewer.showLoupe()},hideLoupe:function(){this.pictureViewer.hideLoupe()},updateLoupePosition:function(e,t){this.pictureViewer.updateLoupePosition(e,t)}}),watch:{preview:function(){this.isMovie?(this.pause(),this.maxDuration="00:00.000"):this.isPicture&&(this.pause(),setTimeout(this.pictureViewer.resetPicture,10))}}},Y=W,K=(s("3447"),Object(y["a"])(Y,D,M,!1,null,"57e7a01e",null)),Q=K.exports,X={name:"preview-player",mixins:[l["a"],u["a"],d],components:{ArrowUpRightIcon:p["a"],AnnotationBar:h["a"],ButtonSimple:m["a"],BrowsingBar:k,ColorPicker:w["a"],Combobox:C["a"],DownloadIcon:p["n"],PencilPicker:S["a"],PreviewViewer:Q,RevisionPreview:j},props:{previews:{type:Array,default:function(){return[]}},entityPreviewFiles:{type:Object,default:function(){}},taskTypeMap:{type:Object,default:function(){}},light:{type:Boolean,default:!1},readOnly:{type:Boolean,default:!1},lastPreviewFiles:{type:Array,default:function(){return[]}},big:{type:Boolean,default:!1}},data:function(){return{annotations:[],currentIndex:1,fullScreen:!1,color:"#ff3860",currentTime:"00:00.000",currentTimeRaw:0,isComparing:!1,isDrawing:!1,isLoading:!1,isMuted:!1,isPlaying:!1,isOrdering:!1,isRepeating:!1,isTyping:!1,maxDuration:"00:00.000",palette:["#ff3860","#008732","#5E60BA","#f57f17"],pencil:"big",pencilPalette:["big","medium","small"],previewToCompare:null,previewToCompareId:null,taskTypeId:this.entityPreviewFIles?Object.keys(this.entityPreviewFiles)[0]:null,textColor:"#ff3860",videoDuration:0,width:0}},mounted:function(){this.container&&(this.configureEvents(),this.setupFabricCanvas(),this.reloadAnnotations(),this.isPicture&&this.loadAnnotation(this.getAnnotation(0)),this.resetPreviewFileMap())},beforeDestroy:function(){this.removeEvents()},computed:Object(a["a"])(Object(a["a"])({},Object(r["c"])(["currentProduction"])),{},{container:function(){return this.$refs.container},canvasWrapper:function(){return this.$refs["canvas-wrapper"]},previewViewer:function(){return this.$refs["preview-viewer"]},comparisonViewer:function(){return this.$refs["comparison-preview-viewer"]},progress:function(){return this.$refs.progress},progressBar:function(){return this.$refs["progress-bar"]},currentFrame:function(){return Object(c["a"])(this.currentTimeRaw,this.fps)},currentPreview:function(){return this.previews&&this.previews.length>0&&this.currentIndex-1<this.previews.length?this.previews[this.currentIndex-1]:{}},defaultHeight:function(){if(this.fullScreen){var e=screen.height;return this.isOrdering&&(e-=140),this.isMovie?e-=60:e-=30,e}var t=screen.height>800?470:300;return this.isMovie&&(t=screen.height>800?442:272),screen.width>1300&&(!this.light||this.big)?t:200},fps:function(){return this.currentProduction.fps||24},extension:function(){return this.currentPreview?this.currentPreview.extension:""},isPicture:function(){return["gif","png","jpg","jpeg"].includes(this.extension)},isMovie:function(){return"mp4"===this.extension},is3DModel:function(){return"obj"===this.extension},isPdf:function(){return"pdf"===this.extension},isFile:function(){return!this.isPicture&&!this.isMovie},isFullScreenEnabled:function(){return!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitSupportsFullscreen||document.webkitFullscreenEnabled||document.createElement("video").webkitRequestFullScreen)},originalPath:function(){if(this.currentPreview){var e=this.currentPreview.id,t=this.extension?this.extension:"png",s=this.isMovie?"movies":"pictures";return"/api/".concat(s,"/originals/preview-files/").concat(e,".").concat(t)}return""},originalDlPath:function(){if(this.currentPreview){var e=this.isMovie?"movies":"pictures";return"/api/".concat(e,"/originals/preview-files/")+"".concat(this.currentPreview.id,"/download")}return""},taskTypeOptions:function(){var e=this;if(!this.entityPreviewFiles)return[];var t=Object.keys(this.entityPreviewFiles);return t.filter((function(t){var s=e.entityPreviewFiles[t].filter((function(e){return["mp4","png"].includes(e.extension)}));return s.length>0&&e.taskTypeMap[t]})).map((function(t){var s=e.taskTypeMap[t];return{label:s.name,value:s.id}}))},previewFileOptions:function(){if(!this.entityPreviewFiles)return[];var e=this.entityPreviewFiles[this.taskTypeId];return e&&e.length>0?e.map((function(e){return{label:"v".concat(e.revision),value:e.id}})):[]}}),methods:Object(a["a"])(Object(a["a"])({},Object(r["b"])(["updateRevisionPreviewPosition"])),{},{formatFrame:c["a"],formatTime:c["b"],isCurrentRevision:function(e){return e.revision===this.currentPreview.revision},getRevisionTitle:function(e){return"".concat(this.$t("playlists.actions.display_revision"))+" ".concat(e.revision)},updateTime:function(e){this.updateProgressBar(e),this.currentTimeRaw=e,this.currentTime=this.formatTime(this.currentTimeRaw),this.isPlaying||this.loadAnnotation()},configureVideo:function(){this.isPlaying=!1,this.isMuted=!1,this.isRepeating=!1},changeMaxDuration:function(e){e?(this.maxDuration=this.formatTime(e),this.videoDuration=e,this.progress.setAttribute("max",this.videoDuration)):(this.maxDuration="00:00.000",this.videoDuration=0,this.progress.setAttribute("max",0))},play:function(){this.isPlaying=!0,this.isDrawing=!1,this.previewViewer&&(this.clearCanvas(),this.previewViewer.play(),this.comparisonViewer&&this.isComparing&&this.comparisonViewer.play())},pause:function(){this.isPlaying=!1,this.previewViewer&&this.previewViewer.pause(),this.comparisonViewer&&this.comparisonViewer.pause()},goPreviousFrame:function(){this.previewViewer.goPreviousFrame(),this.comparisonViewer&&this.comparisonViewer.goPreviousFrame(),this.clearCanvas()},goNextFrame:function(){this.previewViewer.goNextFrame(),this.comparisonViewer&&this.comparisonViewer.goNextFrame(),this.clearCanvas()},onVideoEnd:function(){this.isPlaying=!1,this.isRepeating&&(this.setCurrentTime(0),this.play())},onPlayPauseClicked:function(){this.clearFocus(),this.isPlaying?this.pause():this.play()},onRepeatClicked:function(){this.clearFocus(),this.isRepeating?this.isRepeating=!1:this.isRepeating=!0},onToggleSoundClicked:function(){this.clearFocus(),this.isMuted=!this.isMuted},getDimensions:function(){var e={width:0,height:0};return this.container&&(e.width=this.container.offsetWidth,e.height=this.container.offsetHeight),e},getCurrentPreviewDimensions:function(){var e=this.previewViewer.getPreviewDimensions();return e},setupFabricCanvas:function(){var e=this,t=new o["fabric"].Canvas("annotation-canvas",{fireRightClick:!0}),s=this.getDimensions(),i=s.width,n=s.height;t.setDimensions({width:i,height:n}),t.freeDrawingBrush.color=this.color,t.freeDrawingBrush.width=4,t.off("object:added",this.stackAddAction),t.on("object:added",this.stackAddAction),t.off("object:moved",this.saveAnnotations),t.on("object:moved",this.saveAnnotations),t.on("mouse:up",(function(){e.isDrawing&&(e.clearUndoneStack(),e.saveAnnotations())})),t.on("mouse:move",this.onCanvasMouseMoved),t.on("mouse:down",this.onCanvasClicked),t.on("mouse:up",this.onCanvasReleased),this.fabricCanvas=t},fixCanvasSize:function(e){var t=this,s=e.width,i=e.height;if(this.fabricCanvas){this.fabricCanvas.setDimensions({width:s,height:i}),this.fabricCanvas.width=s,this.fabricCanvas.height=i;var n=this.container.offsetWidth,a=this.container.offsetHeight,o=Math.round((n-s)/2);this.isComparing&&(o=Math.round((n/2-s)/2));var r=this.isMovie?60:32;this.isOrdering&&(r+=140);var c=Math.round((a-r-i)/2);this.canvasWrapper&&(this.canvasWrapper.style.top=c+"px",this.canvasWrapper.style.left=o+"px",this.canvasWrapper.style.width=s+"px",this.canvasWrapper.style.height=i+"px",setTimeout((function(){t.fabricCanvas.calcOffset(),t.fabricCanvas.setDimensions({width:s,height:i}),t.width=t.getDimensions().width,t.$nextTick(t.refreshCanvas())}),10))}},setFullScreen:function(){var e=this;this.documentSetFullScreen(this.container),this.container.setAttribute("data-fullscreen",!0),this.fullScreen=!0,this.fixCanvasSize(this.getCurrentPreviewDimensions()),this.$nextTick((function(){e.clearFocus(),e.reloadAnnotations(),e.loadAnnotation()}))},exitFullScreen:function(){var e=this;this.documentExitFullScreen(),this.container.setAttribute("data-fullscreen",!1),this.isComparing=!1,this.fullScreen=!1,this.fixCanvasSize(this.getCurrentPreviewDimensions()),this.$nextTick((function(){e.clearFocus(),e.reloadAnnotations(),e.loadAnnotation()}))},onFullscreenClicked:function(){this.fullScreen?(this.removeTypeArea(),this.exitFullScreen()):(this.addTypeArea(),this.setFullScreen())},onFullScreenChange:function(){var e=this;this.fullScreen&&!this.isFullScreen()&&(this.isComparing=!1,this.fullScreen=!1,this.$nextTick((function(){e.previewViewer.resetVideo(),e.previewViewer.resetPicture(),e.fixCanvasSize(e.getCurrentPreviewDimensions()),e.reloadAnnotations(),e.loadAnnotation()})))},onCompareClicked:function(){var e=this;this.clearFocus(),this.isComparing?this.isComparing=!1:(this.isComparing=!0,this.taskTypeId=this.taskTypeOptions[0].value,this.previewToCompareId="",this.$nextTick((function(){e.previewToCompareId=e.previewFileOptions[0].value})),this.isDrawing=!1)},setDefaultComparisonTaskType:function(){var e=this;if(!this.entityPreviewFiles)return"";var t=Object.keys(this.entityPreviewFiles);if(t&&t.length>0){var s=this.taskTypeOptions.find((function(t){return e.entityPreviewFiles[t.value].findIndex((function(t){return t.id===e.currentPreview.id}))>=0}));s?this.taskTypeId=s.value:this.taskTypeOptions.length>0&&(this.taskTypeId=this.taskTypeOptions[0].value),this.taskTypeId&&this.setDefaultComparisonPreview()}else this.previewToCompareId=null},setDefaultComparisonPreview:function(){var e=this;if(!this.entityPreviewFiles)return"";var t=this.entityPreviewFiles[this.taskTypeId];t?(t=t.filter((function(t){return t.id!==e.currentPreview.id})),t.length>0?this.previewToCompareId=t[0].id:this.previewToCompareId=null):this.previewToCompareId=null},resetPreviewFileMap:function(){var e=this;if(this.previewFileMap={},this.entityPreviewFiles){var t=this.entityPreviewFiles[this.taskTypeId];t&&t.forEach((function(t){e.previewFileMap[t.id]=t}))}},onDeleteClicked:function(){this.clearFocus(),this.deleteSelection()},onChangeColor:function(e){this.color=e,this.fabricCanvas.freeDrawingBrush.color=this.color,this.isShowingPalette=!1},onPencilAnnotateClicked:function(){this.clearFocus(),this.isDrawing?this.isDrawing=!1:(this.isTyping=!1,this.isDrawing=!0)},onTypeClicked:function(){this.clearFocus(),this.isTyping?this.isTyping=!1:(this.isDrawing=!1,this.isTyping=!0)},refreshCanvas:function(){this.clearCanvas(),this.annotations.length>0&&(this.isMovie?this.loadAnnotation():this.isPicture&&this.loadAnnotation(this.getAnnotation(0)))},getAnnotation:function(e){return this.isMovie?(e=Object(c["d"])(e,this.fps),this.annotations.find((function(t){return t.time===e}))):this.isPicture?this.annotations[0]:void 0},getAnnotationStyles:function(e,t){return{cursor:"pointer",position:"relative",display:"inline-block",left:this.getTimelinePosition(e.time,t)+"px"}},onAnnotationClicked:function(e){this.loadAnnotation(e)},saveAnnotations:function(){var e=0;if(this.isMovie){var t=this.previewViewer.getCurrentTimeRaw();e=Object(c["d"])(t,this.fps)||0}var s=this.getAnnotation(e),i=this.getNewAnnotations(e,s);this.readOnly||this.$emit("annotation-changed",{preview:this.currentPreview,annotations:i})},loadAnnotation:function(e){var t=this,s=0;if(e||(s=Object(c["d"])(this.currentTimeRaw,this.fps),e=this.getAnnotation(s),e)){this.fabricCanvas||this.setupFabricCanvas(),this.isMovie&&(s=e.time||0,this.previewViewer.pause(),s=Object(c["d"])(s,this.fps),this.setCurrentTime(s)),this.clearCanvas();var i=1,n=1;e.width&&(i=this.fabricCanvas.width/e.width,n=this.fabricCanvas.width/e.width),e.height&&(n=this.fabricCanvas.height/e.height),e.drawing.objects.forEach((function(s){var r={left:s.left*i,top:s.top*n,fill:"transparent",stroke:s.stroke,strokeWidth:s.strokeWidth,radius:s.radius*i,width:s.width,height:s.height,scaleX:s.scaleX*i,scaleY:s.scaleY*n};if("path"===s.type){var c=1;s.canvasWidth&&(c=e.width/t.fabricCanvas.width);var l=new o["fabric"].Path(s.path,Object(a["a"])(Object(a["a"])({},r),{},{strokeWidth:s.strokeWidth*c,canvasWidth:s.canvasWidth}));l.setControlsVisibility({mt:!1,mb:!1,ml:!1,mr:!1,bl:!1,br:!1,tl:!1,tr:!1,mtr:!1}),t.fabricCanvas.add(l)}else if("i-text"===s.type||"text"===s.type){var d=new o["fabric"].Text(s.text,Object(a["a"])(Object(a["a"])({},r),{},{fill:s.fill,left:s.left*i,top:s.top*n,fontFamily:s.fontFamily,fontSize:s.fontSize,width:s.width*i}));t.fabricCanvas.add(d)}}))}else this.isMovie||console.error("Annotations are malformed and cannot be loaded.",s)},reloadAnnotations:function(){if(this.annotations=[],this.currentPreview.annotations){var e=[];this.currentPreview.annotations.forEach((function(t){return e.push(Object(a["a"])({},t))})),this.annotations=e.sort((function(e,t){return e.time<t.time}))||[]}else this.annotations=[];return this.annotations},onKeyDown:function(e){var t=this;if(!["INPUT","TEXTAREA"].includes(e.target.tagName))if(46===e.keyCode)this.deleteSelection();else if(37===e.keyCode)this.goPreviousFrame();else if(39===e.keyCode)this.goNextFrame();else{if(32===e.keyCode)return this.onPlayPauseClicked(),this.pauseEvent(e),!1;68===e.keyCode?(this.container.focus(),this.pauseEvent(e),this.onPencilAnnotateClicked()):e.ctrlKey&&e.altKey&&68===e.keyCode?this.onPencileAnnotateClicked():e.ctrlKey&&90===e.keyCode?this.undoLastAction():e.altKey&&82===e.keyCode?this.redoLastAction():27===e.keyCode&&this.fullScreen&&(this.isComparing=!1,this.fullScreen=!1,this.$nextTick((function(){t.reloadAnnotations(),t.loadAnnotation()})))}},configureEvents:function(){window.addEventListener("keydown",this.onKeyDown,!1),this.container.addEventListener("fullscreenchange",this.onFullScreenChange,!1),this.container.addEventListener("mozfullscreenchange",this.onFullScreenChange,!1),this.container.addEventListener("MSFullscreenChange",this.onFullScreenChange,!1),this.container.addEventListener("webkitfullscreenchange",this.onFullScreenChange,!1)},removeEvents:function(){window.removeEventListener("keydown",this.onKeyDown)},changeCurrentPreview:function(e){this.$emit("change-current-preview",e)},onAddPreviewClicked:function(){this.$emit("add-preview")},onRemovePreviewClicked:function(){this.$emit("remove-extra-preview",this.currentPreview)},onPreviousClicked:function(){this.currentIndex>1?this.currentIndex--:this.currentIndex=this.previews.length},onNextClicked:function(){this.currentIndex<this.previews.length?this.currentIndex++:this.currentIndex=1},displayFirst:function(){this.currentIndex>1&&(this.currentIndex=1)},displayLast:function(){this.currentIndex=this.previews.length},onCanvasMouseMoved:function(e){if(this.isPicture&&this.$options.loupe){var t=this.canvasWrapper.style.width,s=this.canvasWrapper.style.height;this.previewViewer.updateLoupePosition(e,{width:t,height:s})}},onCanvasClicked:function(e){if(e.button>1&&this.isPicture&&this.fullScreen){this.$options.loupe=!0,this.previewViewer.showLoupe();var t=this.canvasWrapper.style.width,s=this.canvasWrapper.style.height;return this.previewViewer.updateLoupePosition(e,{width:t,height:s}),!1}},onCanvasReleased:function(e){if(this.isPicture&&this.$options.loupe)return this.previewViewer.hideLoupe(),this.$options.loupe=!1,!1},getTimelinePosition:function(e,t){if(this.$refs.movie){var s=Math.round(e/this.$refs.movie.duration*this.progress.offsetWidth);return s=s-10*t-5,s<0&&(s=0),s+10>this.progress.offsetWidth&&(s-=5),s}return 0},onProgressClicked:function(e){var t=this.progress.offsetLeft;0!==t||this.fullScreen||(t=this.progress.parentElement.offsetParent.offsetLeft);var s=(e.pageX-t)/this.progress.offsetWidth,i=Object(c["d"])(s*this.videoDuration,this.fps);this.setCurrentTime(i)},setCurrentTime:function(e){this.previewViewer.setCurrentTime(e),this.comparisonViewer&&this.comparisonViewer.setCurrentTime(e)},updateProgressBar:function(e){this.progress.getAttribute("max")||this.progress.setAttribute("max",this.videoDuration),this.progress.value=e},onRevisionPreviewSelected:function(e){this.currentIndex=e},onRevisionPreviewDropped:function(e){var t=this,s=e.previousIndex,i=e.newIndex,n=this.previews[s];this.updateRevisionPreviewPosition({previousIndex:s,newIndex:i,revision:this.currentPreview.revision,taskId:this.currentPreview.task_id,previewId:n.id}).catch(console.error),this.$nextTick((function(){t.currentIndex=i+1}))}}),watch:{currentPreview:function(){this.reloadAnnotations(),this.isMovie?(this.configureVideo(),this.pause(),this.maxDuration="00:00.000",this.isDrawing=!1,this.isComparing&&(this.isComparing=!1)):this.isPicture&&(this.pause(),this.isDrawing=!1,this.refreshCanvas(),setTimeout(this.previewViewer.resetPicture,10),this.comparisonViewer&&setTimeout(this.comparisonViewer.resetPicture,20)),this.setDefaultComparisonTaskType()},"currentPreview.revision":function(){this.currentIndex=1},previewToCompareId:function(){var e=this;this.$nextTick((function(){e.comparisonViewer&&e.comparisonViewer.pause(),e.previewToCompare=e.previewFileMap[e.previewToCompareId],e.setCurrentTime(0),e.isComparing&&e.pause()}))},taskTypeId:function(){this.resetPreviewFileMap(),this.setDefaultComparisonPreview()},isComparing:function(){var e=this;this.isComparing||(this.comparisonViewer&&this.comparisonViewer.pause(),this.taskTypeId="",this.previewToCompareId=""),this.$nextTick((function(){e.fixCanvasSize(e.getCurrentPreviewDimensions())}))},isDrawing:function(){this.fabricCanvas&&(this.fabricCanvas.isDrawingMode=this.isDrawing)},isOrdering:function(){var e=this;this.$nextTick((function(){e.fixCanvasSize(e.getCurrentPreviewDimensions()),e.previewViewer.resetVideo(),e.previewViewer.resetPicture()}))},isTyping:function(){var e=this.canvasWrapper.getElementsByClassName("upper-canvas")[0];this.isTyping&&e?e.addEventListener("dblclick",this.addText):e.removeEventListener("dblclick",this.addText)}}},J=X,Z=(s("7528"),Object(y["a"])(J,i,n,!1,null,"4b40edac",null));t["a"]=Z.exports},"6be5":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("article",{ref:"wrapper",class:{"add-comment":!0,"word-break":!0,media:!0,"is-dragging":e.isDragging},on:{drop:e.onDrop,dragover:e.onDragover,dragleave:e.onDragleave}},[e.light?e._e():s("figure",{staticClass:"media-left"},[s("div",{staticClass:"level"},[s("div",{staticClass:"level-left"},[s("people-avatar",{staticClass:"level-item",attrs:{person:e.user}})],1)])]),s("div",{staticClass:"media-content"},[s("at-ta",{attrs:{members:e.team,"name-key":"full_name",limit:2},scopedSlots:e._u([{key:"item",fn:function(t){return[s("div",{staticClass:"flexrow"},[s("people-avatar",{staticClass:"flexrow-item",attrs:{person:t.item,size:20,"no-cache":!0}}),s("span",{staticClass:"flexrow-item"},[e._v(" "+e._s(t.item.full_name)+" ")])],1)]}}])},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.text,expression:"text"},{name:"focus",rawName:"v-focus"}],ref:"comment-textarea",staticClass:"textarea flexrow-item",attrs:{placeholder:e.$t("comments.add_comment"),disabled:e.isLoading},domProps:{value:e.text},on:{keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.ctrlKey?e.runAddComment(e.text,e.attachment,e.checklist,e.task_status_id):null},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.metaKey?e.runAddComment(e.text,e.attachment,e.checklist,e.task_status_id):null}],input:function(t){t.target.composing||(e.text=t.target.value)}}})]),e.checklist.length>0?s("checklist",{attrs:{checklist:e.checklist},on:{"remove-task":e.removeTask}}):e._e(),s("div",{staticClass:"flexrow preview-section"},[s("button",{staticClass:"button flexrow-item",on:{click:function(t){return e.$emit("add-preview")}}},[e._v(" "+e._s(e.$t("comments.add_preview"))+" ")]),s("span",{staticClass:"attachment-file flexrow-item"},[e.isFileAttached?e._e():s("em",[e._v(" "+e._s(e.$t("comments.no_file_attached"))+" ")]),e.isFileAttached?s("em",[e._v(" "+e._s(e.attachedFileName)+" ")]):e._e()])]),s("group-button",{staticClass:"mt1"},[s("combobox-status",{staticClass:"status-selector",attrs:{narrow:!0,"task-status-list":e.taskStatus},model:{value:e.task_status_id,callback:function(t){e.task_status_id=t},expression:"task_status_id"}}),s("button-simple",{class:{button:!0,active:0!==e.checklist.length},attrs:{icon:"list",title:e.$t("comments.add_checklist")},on:{click:function(t){return e.addChecklistEntry(-1)}}}),s("button-simple",{class:{button:!0,active:0!==e.attachment.length},attrs:{icon:"image",title:e.$t("comments.add_attachment")},on:{click:function(t){return e.onAddCommentAttachmentClicked()}}}),s("button",{class:{button:!0,"is-primary":!0,"is-loading":e.isLoading},style:{"background-color":e.taskStatusColor},on:{click:function(t){return e.runAddComment(e.text,e.attachment,e.checklist,e.task_status_id)}}},[e._v(" "+e._s(e.$t("comments.post_status"))+" ")])],1),e.isError?s("div",{staticClass:"error pull-right"},[s("em",[e._v(e._s(e.$t("comments.error")))])]):e._e()],1),s("add-comment-image-modal",{ref:"add-comment-image-modal",attrs:{active:e.modals.addCommentAttachment,"is-loading":e.loading.addCommentAttachment,"is-error":e.errors.addCommentAttachment},on:{cancel:e.onCloseCommentAttachment,confirm:e.createCommentAttachment}})],1)},n=[],a=(s("7db0"),s("4160"),s("5530")),o=s("2f62"),r=s("66e7"),c=s("7930"),l=s("53ff"),d=s.n(l),u=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{modal:!0,"is-active":e.active}},[s("div",{staticClass:"modal-background",on:{click:function(t){return e.$emit("cancel")}}}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box content"},[s("h1",{staticClass:"title"},[e._v(" "+e._s(e.$t("tasks.comment_image"))+" ")]),s("p",[e._v(" "+e._s(e.$t("tasks.select_image_file"))+" ")]),s("file-upload",{ref:"image-field",attrs:{label:e.$t("main.csv.upload_file"),accept:e.extensions,multiple:!0},on:{fileselected:e.onFileSelected}}),e.isError?s("p",{staticClass:"error"},[e._v(" "+e._s(e.$t("tasks.add_preview_error"))+" ")]):e._e(),s("p",{staticClass:"has-text-right"},[s("a",{class:{button:!0,"is-primary":!0,"is-loading":e.isLoading,"is-disabled":void 0==e.forms},on:{click:function(t){return e.confirm()}}},[e._v(" "+e._s(e.$t("main.confirmation"))+" ")]),s("button",{staticClass:"button is-link",on:{click:function(t){return e.$emit("cancel")}}},[e._v(" "+e._s(e.$t("main.cancel"))+" ")])])],1)])])},p=[],h=s("d065"),m=s("4085"),f={name:"add-preview-modal",mixins:[h["a"]],components:{FileUpload:m["a"]},props:{active:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},isError:{type:Boolean,default:!1},isEditing:{type:Boolean,default:!1},extensions:{type:String,default:".png,.jpg,.mp4,.mov,.obj,.pdf,.ma,.mb,.zip,.rar,.jpeg,.blend,.wmv,.m4v,.ai,.comp,.exr,.psd,.hip,.gif,.ae,.fla,.flv,.swf"}},data:function(){return{forms:null}},mounted:function(){this.forms=null},computed:Object(a["a"])({},Object(o["c"])([])),methods:Object(a["a"])(Object(a["a"])({},Object(o["b"])([])),{},{onFileSelected:function(e){this.forms=e},confirm:function(){this.$emit("confirm",this.forms)},reset:function(){this.$refs["image-field"].reset(),this.forms=null}}),watch:{active:function(){this.reset()}}},_=f,v=(s("ba2b"),s("2877")),g=Object(v["a"])(_,u,p,!1,null,"5f0af5dc",null),y=g.exports,b=s("56a0"),k=s("eb8c"),w=function(){var e,t=this,s=t.$createElement,i=t._self._c||s;return i("div",{class:(e={"group-button":!0},e["group-button--"+t.align]=!0,e)},[t._t("default")],2)},C=[],S=(s("caad"),{name:"group-button",props:{align:{default:"right",type:String,validator:function(e){return["right","left","center"].includes(e)}}}}),T=S,x=(s("44e8"),Object(v["a"])(T,w,C,!1,null,"55ed4403",null)),E=x.exports,P=s("de40"),O=s("4ce0"),A={name:"add-comment",components:{AtTa:d.a,AddCommentImageModal:y,ComboboxStatus:b["a"],PeopleAvatar:k["a"],GroupButton:E,ButtonSimple:P["a"],Checklist:O["a"]},data:function(){return{isDragging:!1,text:"",attachment:[],checklist:[],task_status_id:this.task.task_status_id,errors:{addCommentAttachment:!1},loading:{addCommentAttachment:!1},modals:{addCommentAttachment:!1}}},props:{addComment:{type:Function,default:null},isLoading:{type:Boolean,default:null},isError:{type:Boolean,default:null},light:{type:Boolean,default:!1},task:{type:Object,default:function(){return[]}},taskStatus:{type:Array,default:function(){return[]}},user:{type:Object,default:function(){}},attachedFileName:{type:String,default:""},team:{type:Array,default:function(){return[]}}},mounted:function(){var e=this;["drag","dragstart","dragend","dragover","dragenter","dragleave","drop"].forEach((function(t){e.$refs.wrapper&&e.$refs.wrapper.addEventListener(t,(function(e){e.preventDefault(),e.stopPropagation()}))}))},computed:Object(a["a"])(Object(a["a"])({},Object(o["c"])(["isDarkTheme"])),{},{isFileAttached:function(){return void 0!==this.attachedFileName&&this.attachedFileName.length>0},taskStatusColor:function(){var e=this,t=this.taskStatus.find((function(t){return t.id===e.task_status_id}))||this.taskStatus[0];if("todo"===t.short_name)return"#666";var s=t.color;return this.isDarkTheme?c["a"].darkenColor(s):s},isAddChecklistAllowed:function(){var e=this,t=this.taskStatus.find((function(t){return t.id===e.task_status_id}))||this.taskStatus[0];return t.is_retake&&0===this.checklist.length}}),methods:{runAddComment:function(e,t,s,i){this.$emit("add-comment",e,t,s,i),this.text="",this.attachment=[],this.checklist=[]},updateValue:function(e){this.task_status_id=this.$refs.statusSelect.value},focus:function(){this.$refs["comment-textarea"].focus()},onDragover:function(){this.isDragging=!0},onDragleave:function(){this.isDragging=!1},onDrop:function(e){for(var t=[],s=0;s<e.dataTransfer.files.length;s++){var i=new FormData;i.append("file",e.dataTransfer.files[s]),t.push(i)}this.$emit("file-drop",t),this.isDragging=!1},onAddCommentAttachmentClicked:function(e){this.modals.addCommentAttachment=!0},createCommentAttachment:function(e){this.onCloseCommentAttachment(),this.attachment=e},onCloseCommentAttachment:function(){this.modals.addCommentAttachment=!1},addChecklistEntry:function(e){-1!==e&&e!==this.checklist.length-1||this.checklist.push({text:"",checked:!1})},removeTask:function(e){this.checklist=Object(r["f"])(this.checklist,e)},setValue:function(e){var t=this;this.checklist=e.checklist,this.$nextTick((function(){t.$refs["comment-textarea"].value=e.text}))}},watch:{task:function(){this.task_status_id=this.task.task_status_id}}},j=A,D=(s("fc42"),Object(v["a"])(j,i,n,!1,null,"d457fe8a",null));t["a"]=D.exports},"6c09":function(e,t,s){},"6c25":function(e,t,s){"use strict";var i=s("0daf"),n=s.n(i);n.a},7096:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"color-wrapper"},[s("button",{class:{"color-picker":!0},style:{color:e.color},attrs:{type:"button",title:e.color},on:{click:e.togglePalette}}),s("div",{directives:[{name:"show",rawName:"v-show",value:e.isOpen,expression:"isOpen"}],class:{"color-palette":!0}},e._l(e.palette,(function(t){return s("label",{key:t,style:{color:t},attrs:{title:t}},[s("input",{attrs:{type:"radio"},domProps:{value:t},on:{click:function(s){return e.onColorPicked(t)}}})])})),0)])},n=[],a={name:"colorpicker",props:{color:{type:String},palette:{type:Array}},data:function(){return{isOpen:!1}},computed:{},methods:{togglePalette:function(){this.isOpen=!this.isOpen},onColorPicked:function(e){this.$emit("change",e),this.isOpen=!1}}},o=a,r=(s("f54c"),s("2877")),c=Object(r["a"])(o,i,n,!1,null,"effe3110",null);t["a"]=c.exports},7128:function(e,t,s){},7203:function(e,t,s){"use strict";var i=s("e92a"),n=s.n(i);n.a},"732b":function(e,t,s){e.exports=s.p+"img/empty_shot.8f70da90.png"},7369:function(e,t,s){"use strict";var i=s("29f8"),n=s.n(i);n.a},"736c":function(e,t,s){"use strict";var i=s("43ea"),n=s.n(i);n.a},7528:function(e,t,s){"use strict";var i=s("2b2c"),n=s.n(i);n.a},"78e2":function(e,t,s){"use strict";var i=s("6913"),n=s.n(i);n.a},7930:function(e,t,s){"use strict";s("fb6a");var i=s("4710"),n=s.n(i),a=s("6929"),o=s.n(a),r={},c={};t["a"]={darkenColor:function(e){return r[e]||(r[e]=o()(e).darken(.3).saturate(.6)),r[e]},fromString:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=new n.a({lightness:.7,saturation:.8});return(t||localStorage&&"true"===localStorage.getItem("dark-theme"))&&(s=new n.a({lightness:.6,saturation:.8})),s.hex(e)},hexToRGBa:function(e,t){var s=parseInt(e.slice(1,3),16),i=parseInt(e.slice(3,5),16),n=parseInt(e.slice(5,7),16);return t?"rgba("+s+", "+i+", "+n+", "+t+")":"rgb("+s+", "+i+", "+n+")"},lightenColor:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.3;return c[e+t]||(c[e+t]=o()(e).fade(t)),c[e+t]},validationTextColor:function(e){return e&&"todo"!==e.task_status_short_name&&"wtg"!==e.task_status_short_name?"white":"#333"}}},"7bf8":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"field"},[e.label?s("label",{staticClass:"label"},[e._v(e._s(e.label))]):e._e(),s("p",{staticClass:"control flexrow"},[s("input",{ref:"input",class:"input flexrow-item"+e.inputClass,attrs:{placeholder:e.placeholder,type:e.type,disabled:e.disabled,maxlength:e.maxlength,min:"0"},domProps:{value:e.value},on:{input:function(t){return e.updateValue()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.emitEnter()}}}),e.buttonLabel?s("button",{staticClass:"button flexrow-item",on:{click:function(t){return e.emitEnter()}}},[e._v(" "+e._s(e.buttonLabel)+" ")]):e._e()])])},n=[],a=(s("a9e3"),s("5530")),o=s("2f62"),r={name:"text-field",props:{disabled:{default:!1,type:Boolean},label:{default:"",type:String},value:{default:"",type:[String,Number]},placeholder:{default:"",type:String},type:{default:"text",type:String},inputClass:{default:"",type:String},buttonLabel:{default:"",type:String},maxlength:{default:524288,type:Number}},computed:Object(a["a"])({},Object(o["c"])([])),methods:Object(a["a"])(Object(a["a"])({},Object(o["b"])([])),{},{emitEnter:function(){this.$emit("enter",this.$refs.input.value)},updateValue:function(){this.$emit("input",this.$refs.input.value)},focus:function(){this.$refs.input.focus()}})},c=r,l=(s("e5e6"),s("2877")),d=Object(l["a"])(c,i,n,!1,null,"f5484cc6",null);t["a"]=d.exports},"7c92":function(e,t,s){"use strict";var i=s("ffaf"),n=s.n(i);n.a},"7cc4":function(e,t,s){"use strict";var i=s("be9d"),n=s.n(i);n.a},"7d26":function(e,t,s){"use strict";s("a4d3"),s("e01a"),s("99af"),s("4de4"),s("7db0"),s("c740"),s("4160"),s("caad"),s("d81d"),s("fb6a"),s("a434"),s("b0c0"),s("b64b"),s("d3b7"),s("07ac"),s("25f0"),s("2532"),s("3ca3"),s("159b"),s("ddb0");var i,n=s("ade3"),a=s("5530"),o=s("2909"),r=s("ba4c"),c=s.n(r),l=s("edbf"),d={getAssets:function(e,t){var s="/api/data/assets/with-tasks";return e&&(s+="?project_id=".concat(e.id)),t&&(s+="&episode_id=".concat(t.id)),l["a"].pget(s)},getAsset:function(e){return l["a"].getModel("assets",e)},newAsset:function(e){var t={name:e.name,description:e.description,data:e.data};"null"!==e.source_id&&(t.episode_id=e.source_id);var s="/api/data/projects/".concat(e.project_id,"/asset-types/")+"".concat(e.entity_type_id,"/assets/new");return l["a"].ppost(s,t)},updateAsset:function(e){var t={name:e.name,description:e.description,entity_type_id:e.entity_type_id,project_id:e.project_id,data:e.data};return("null"===e.source_id||e.source_id)&&(t.source_id=e.source_id),l["a"].pput("/api/data/entities/".concat(e.id),t)},deleteAsset:function(e){return e.canceled?l["a"].pdel("/api/data/assets/".concat(e.id,"?force=true")):l["a"].pdel("/api/data/assets/".concat(e.id))},restoreAsset:function(e,t){var s={canceled:!1};return l["a"].pput("/api/data/entities/".concat(e.id),s)},postCsv:function(e,t,s){var i="/api/import/csv/projects/".concat(e.id,"/assets");return s&&(i+="?update=true"),l["a"].ppost(i,t)}},u=s("ce6b"),p=s("fa53"),h=s("ef8b"),m=s("f83f"),f=s("52ad"),_=s("de26"),v=s("2229"),g=s("6185"),y=s("66e7"),b=s("09d3"),k=s("2017"),w=s("ca76"),C=s("9fb0"),S={getCurrentProduction:function(){return m["a"].getters.currentProduction(m["a"].state)},getTaskStatus:function(e){return p["a"].state.taskStatusMap[e]},getTaskType:function(e){return h["a"].state.taskTypeMap[e]},getTask:function(e){return p["a"].state.taskMap[e]},getPerson:function(e){return f["a"].state.personMap[e]},setListStats:function(e,t){var s=0;t?(t.forEach((function(e){s+=e.timeSpent})),Object.assign(e,{displayedAssetsLength:t.length,displayedAssetsTimeSpent:s})):Object.assign(e,{displayedAssetsLength:0,displayedAssetsTimeSpent:0})},populateTask:function(e,t,s){return e.name=S.getTaskType(e.task_type_id).priority.toString(),e.task_status_short_name=S.getTaskStatus(e.task_status_id).short_name,Object.assign(e,{project_id:t.production_id,episode_id:t.source_id,entity_name:"".concat(t.asset_type_name," / ").concat(t.name),entity_type_name:t.asset_type_name,entity:{id:t.id,preview_file_id:t.preview_file_id}}),e},populateAndRegisterAsset:function(e,t,s,i,n,a,o){var r={},c=0;e[o.asset_type]||(e[o.asset_type_id]={id:o.asset_type_id,name:o.asset_type_name}),o.production_id=n.id,o.project_name=n.name,o.production_name=n.name;var l=[];return o.tasks.forEach((function(e){o.full_name="".concat(o.asset_type_name," / ").concat(o.name),S.populateTask(e,o),e.assignees.length>1&&(e.assignees=e.assignees.sort((function(e,t){return i[e].name.localeCompare(i[t].name)})));var n=s[e.task_type_id];a[n.name]||(a[n.name]=e.task_type_id),c+=e.duration,l.push(e.id),r[e.task_type_id]=e.id,t[e.id]=e})),o.tasks=l,o.validations=r,o.timeSpent=c,o},sortValidationColumns:function(e,t,s){var i=Object(o["a"])(e);return Object(v["p"])(i,s)},buildResult:function(e,t){var s=t.assetSearch,i=t.production,n=t.sorting,a=t.taskStatusMap,o=t.taskTypeMap,r=t.persons,c=t.taskMap,l=Object.values(o),d=Object.keys(a).map((function(e){return a[e]})),u=s,p=Object(w["e"])(u)||[],h=Object(w["d"])({entryIndex:T.assetIndex,assetTypes:e.assetTypes,taskTypes:l,taskStatuses:d,descriptors:i.descriptors||[],persons:r,query:u}),m=Object(k["j"])(T.assetIndex,p)||T.assets;m=Object(w["a"])(m,h,c),m=Object(v["a"])(m,n,a,o,c),T.result=m;var f=m.slice(0,_["a"]),b=f.length,C=e.nbValidationColumns;e.displayedAssets=f,e.assetFilledColumns=Object(y["c"])(f),S.setListStats(e,m),e.assetSearchText=u,e.assetSelectionGrid=Object(g["b"])(b,C)}},T={assetIndex:{},assetTypeIndex:{},assets:[]},x={assetMap:{},assetValidationColumns:[],nbValidationColumns:0,filteredAssets:[],displayedAssets:[],displayedAssetsLength:0,displayedAssetsTimeSpent:0,assetFilledColumns:{},assetSearchText:"",assetSelectionGrid:{},assetSearchQueries:[],assetSorting:[],displayedAssetTypes:[],displayedAssetTypesLength:0,assetTypeSearchText:"",assetTypeStats:{},assetTypes:[],isAssetsLoading:!1,isAssetsLoadingError:!1,isAssetDescription:!1,isAssetTime:!1,assetsCsvFormData:null,assetCreated:"",personTasks:[],assetListScrollPosition:0},E=Object(a["a"])({},x),P={assets:function(e){return T.assets},assetMap:function(e){return e.assetMap},assetSearchText:function(e){return e.assetSearchText},assetSearchQueries:function(e){return e.assetSearchQueries},assetSelectionGrid:function(e){return e.assetSelectionGrid},assetValidationColumns:function(e){return e.assetValidationColumns},isAssetsLoading:function(e){return e.isAssetsLoading},isAssetsLoadingError:function(e){return e.isAssetsLoadingError},displayedAssets:function(e){return e.displayedAssets},displayedAssetsLength:function(e){return e.displayedAssetsLength},displayedAssetsTimeSpent:function(e){return e.displayedAssetsTimeSpent},assetFilledColumns:function(e){return e.assetFilledColumns},displayedAssetTypes:function(e){return e.displayedAssetTypes},displayedAssetTypesLength:function(e){return e.displayedAssetTypesLength},assetTypeSearchText:function(e){return e.assetTypeSearchText},assetTypeStats:function(e){return e.assetTypeStats},assetTypeListScrollPosition:function(e){return e.assetTypeListScrollPosition},assetSorting:function(e){return e.assetSorting},assetListScrollPosition:function(e){return e.assetListScrollPosition},displayedAssetsByType:function(e){return Object(y["d"])(e.displayedAssets,"asset_type_name")},assetsByType:function(e){var t=e.displayedAssets.filter((function(e){return!e.canceled}));return Object(y["d"])(t,"asset_type_name")},assetCreated:function(e){return e.assetCreated},isAssetTime:function(e){return e.isAssetTime},isAssetDescription:function(e){return e.isAssetDescription},assetsCsvFormData:function(e){return e.assetsCsvFormData}},O={loadAssets:function(e){var t=e.commit,s=e.state,i=e.rootGetters,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=i.currentProduction,o=i.userFilters,r=i.personMap,c=i.currentEpisode,l=i.isTVShow,u=i.taskTypeMap,p=i.taskMap;return l&&!c||s.isAssetsLoading?Promise.resolve([]):(n&&(c=null),t(C["ac"]),d.getAssets(a,c).then((function(e){return t(C["Yb"],{production:a,assets:e,userFilters:o,personMap:r,taskMap:p,taskTypeMap:u}),Promise.resolve(e)})).catch((function(e){return console.error("an error occured while loading assets",e),t(C["Zb"]),Promise.resolve([])})))},loadAsset:function(e,t){var s=e.commit,i=e.state,n=e.rootGetters,a=n.personMap,o=n.currentProduction,r=n.taskMap,c=n.taskTypeMap;return d.getAsset(t).then((function(e){i.assetMap[e.id]?s(C["Ne"],e):s(C["b"],{asset:e,taskTypeMap:c,taskMap:r,personMap:a,production:o})})).catch((function(e){return console.error(e)}))},newAsset:function(e,t){var s=e.commit,i=e.dispatch,n=e.state,a=e.rootGetters;return T.assets.find((function(e){return e.name===t.name}))?Promise.reject(new Error("Asset already exsists")):d.newAsset(t).then((function(e){var t=a.assetTypeMap;s(C["wb"],{newAsset:e,assetTypeMap:t});var o=n.assetValidationColumns,r=o.map((function(t){return i("createTask",{entityId:e.id,projectId:e.project_id,taskTypeId:t,type:"assets"})}));return Promise.all(r).then((function(){return Promise.resolve(e)}))}))},editAsset:function(e,t){var s=e.commit,i=(e.state,e.rootState),n=t.name&&T.assets.find((function(e){return e.name===t.name&&t.id!==e.id}));if(n)return Promise.reject(new Error("Asset already exsists"));var a=i.assetTypes.assetTypeMap;return d.updateAsset(t).then((function(e){return s(C["wb"],{newAsset:e,assetTypeMap:a}),Promise.resolve(e)}))},deleteAsset:function(e,t){var s=e.commit,i=e.state;return d.deleteAsset(t).then((function(){var e=i.assetMap[t.id];return e&&e.tasks.length>0&&!e.canceled?s(C["t"],e):s(C["Fd"],t),Promise.resolve(t)}))},restoreAsset:function(e,t){var s=e.commit;e.state;return d.restoreAsset(t).then((function(){return s(C["Xd"],t),Promise.resolve(t)}))},uploadAssetFile:function(e,t){var s=e.commit,i=e.state,n=S.getCurrentProduction();return s(C["Sb"]),d.postCsv(n,i.assetsCsvFormData,t).then((function(){s(C["Rb"]),Promise.resolve()}))},setAssetSearch:function(e,t){var s=e.commit,i=(e.state,e.rootGetters),n=i.taskStatusMap,a=i.taskTypeMap,o=i.taskMap,r=i.currentProduction,c=i.people;s(C["ge"],{assetSearch:t,taskMap:o,taskStatusMap:n,taskTypeMap:a,persons:c,production:r})},saveAssetSearch:function(e,t){var s=e.commit,i=e.rootGetters;return new Promise((function(e,n){var a=E.assetSearchQueries.find((function(e){return e.name===t})),o=i.currentProduction;a?e():u["a"].createFilter("asset",t,t,o.id,null,(function(t,i){s(C["Zd"],{searchQuery:i,production:o}),t?n(t):e(i)}))}))},removeAssetSearch:function(e,t){var s=e.commit,i=e.rootGetters;return new Promise((function(e,n){var a=i.currentProduction;u["a"].removeFilter(t,(function(i){s(C["Gd"],{searchQuery:t,production:a}),i?n(i):e()}))}))},displayMoreAssets:function(e){var t=e.commit,s=e.rootGetters;t(C["sb"],{taskTypeMap:s.taskTypeMap,taskStatusMap:s.taskStatusMap,taskMap:s.taskMap,production:s.currentProduction})},initAssetTypes:function(e){e.commit;var t=e.dispatch;e.state,e.rootState,e.rootGetters;return t("setLastProductionScreen","production-asset-types"),t("loadAssets").then((function(){return t("computeAssetTypeStats"),Promise.resolve()}))},setAssetTypeListScrollPosition:function(e){var t=e.commit;t(C["xe"])},computeAssetTypeStats:function(e){var t=e.commit,s=e.rootGetters,i=s.taskStatusMap,n=s.taskMap;t(C["V"],{taskStatusMap:i,taskMap:n})},setAssetTypeSearch:function(e,t){var s=e.commit;s(C["he"],t)},getAssetsCsvLines:function(e){var t=e.state,s=e.rootGetters,i=s.currentProduction,n=s.episodeMap,a=T.assets;T.result&&T.result.length>0&&(a=T.result);var r=a.map((function(e){var a=[];return s.isTVShow&&a.push(e.episode_id?n[e.episode_id].name:"MP"),a=a.concat([e.asset_type_name,e.name,e.description]),Object(v["d"])(Object(o["a"])(i.descriptors)).filter((function(e){return"Asset"===e.entity_type})).forEach((function(t){a.push(e.data[t.field_name])})),t.isAssetTime&&a.push(e.timeSpent),t.assetValidationColumns.forEach((function(t){var i=s.taskMap[e.validations[t]];i?a.push(i.task_status_short_name):a.push("")})),a}));return r},changeAssetSort:function(e,t){var s=e.commit,i=e.rootGetters,n=i.taskStatus,a=i.taskTypeMap,o=i.taskMap,r=i.currentProduction,c=i.people,l=t?[t]:[];s(C["G"],{taskStatusMap:n,taskTypeMap:a,taskMap:o,production:r,persons:c,sorting:l})},deleteAllAssetTasks:function(e,t){e.commit;var s=e.dispatch,i=(e.state,t.projectId),n=t.taskTypeId,a=t.selectionOnly,o=[];return a&&(o=T.result.filter((function(e){return e.validations[n]})).map((function(e){return e.validations[n]}))),s("deleteAllTasks",{projectId:i,taskTypeId:n,taskIds:o})}},A=(i={},Object(n["a"])(i,C["P"],(function(e){T.assets=[],e.assetMap={},T.result=[],e.assetValidationColumns=[],T.assetIndex={},e.displayedAssets=[],e.assetFilledColumns={},S.setListStats(e,[]),e.assetSearchQueries=[]})),Object(n["a"])(i,C["ac"],(function(e){T.assets=[],T.result=[],e.assetMap={},e.isAssetsLoading=!0,e.isAssetsLoadingError=!1,e.assetValidationColumns=[],T.assetIndex={},e.displayedAssets=[],e.assetFilledColumns={},S.setListStats(e,[]),e.assetSearchQueries=[]})),Object(n["a"])(i,C["Zb"],(function(e){e.isAssetsLoading=!1,e.isAssetsLoadingError=!0})),Object(n["a"])(i,C["Yb"],(function(e,t){var s=t.production,i=t.assets,n=t.userFilters,a=t.personMap,o=t.taskMap,r=t.taskTypeMap,c={},l={},d=!1,u=!1;i=Object(v["b"])(i),T.assets=i,T.result=i,T.assetIndex=Object(k["a"])(i),e.assetMap={},i.forEach((function(t){S.populateAndRegisterAsset(l,o,r,a,s,c,t),e.assetMap[t.id]=t,!d&&t.timeSpent>0&&(d=!0),!u&&t.description&&(u=!0)}));var p=Object.values(l);T.assetTypeIndex=Object(k["c"])(p);var h=T.assets.slice(0,_["a"]),m=Object(y["c"])(h);e.assetValidationColumns=S.sortValidationColumns(Object.values(c),m,r),e.isAssetTime=d,e.isAssetDescription=u,e.isAssetsLoading=!1,e.isAssetsLoadingError=!1,e.nbValidationColumns=e.assetValidationColumns.length,e.displayedAssets=h,S.setListStats(e,T.assets),e.assetFilledColumns=m,e.assetTypes=p,e.displayedAssetTypes=p,e.displayedAssetTypesLength=p.length;var f=e.displayedAssets.length,b=e.nbValidationColumns;e.assetSelectionGrid=Object(g["b"])(f,b),n.asset&&n.asset[s.id]?e.assetSearchQueries=n.asset[s.id]:e.assetSearchQueries=[]})),Object(n["a"])(i,C["b"],(function(e,t){var s=t.taskTypeMap,i=t.taskMap,n=t.personMap,a=t.production,o=t.asset;o.tasks=Object(v["o"])(o.tasks,s),o.validations={},o.production_id=o.project_id,o.episode_id=o.source_id,S.populateAndRegisterAsset({},i,s,n,a,{},o),T.assets.push(o),T.assets=Object(v["b"])(T.assets),e.assetMap[o.id]=o,e.displayedAssets.push(o),e.displayedAssets=Object(v["b"])(e.displayedAssets),S.setListStats(e,T.assets),e.assetFilledColumns=Object(y["c"])(e.displayedAssets);var r=e.displayedAssets.length,c=e.nbValidationColumns;e.assetSelectionGrid=Object(g["b"])(r,c),e.assetMap[o.id]=o,T.assetIndex=Object(k["a"])(T.assets)})),Object(n["a"])(i,C["Ne"],(function(e,t){Object.assign(e.assetMap[t.id],t),T.assetIndex=Object(k["a"])(T.assets)})),Object(n["a"])(i,C["Fd"],(function(e,t){e.assetMap[t.id]&&(delete e.assetMap[t.id],T.assets=Object(y["h"])(T.assets,t),e.displayedAssets=Object(y["h"])(e.displayedAssets,t),t.timeSpent&&(e.displayedAssetsTimeSpent-=t.timeSpent),e.assetFilledColumns=Object(y["c"])(e.displayedAssets),S.setListStats(e,T.assets),T.assetIndex=Object(k["a"])(T.assets))})),Object(n["a"])(i,C["r"],(function(e,t){e.assetsCsvFormData=t})),Object(n["a"])(i,C["Sb"],(function(e){})),Object(n["a"])(i,C["Rb"],(function(e){e.assetsCsvFormData=null})),Object(n["a"])(i,C["wb"],(function(e,t){var s=t.newAsset,i=t.assetTypeMap;e.assetCreated=s.name;var n=e.assetMap[s.id],a=i[s.entity_type_id];if(a&&(s.asset_type_name=a.name,s.asset_type_id=a.id),s.tasks=[],n)s.episode_id=s.source_id,Object.assign(n,s),e.displayedAssets=Object(v["b"])(e.displayedAssets);else{s.validations={},s.production_id=s.project_id,s.episode_id=s.source_id,T.assets.push(s),T.assets=Object(v["b"])(T.assets),e.displayedAssets.push(s),e.displayedAssets=Object(v["b"])(e.displayedAssets),e.assetFilledColumns=Object(y["c"])(e.displayedAssets),e.displayedAssetsLength=T.assets.length;var o=e.displayedAssets.length,r=e.nbValidationColumns;e.assetSelectionGrid=Object(g["b"])(o,r),e.assetMap[s.id]=s}s.description&&!e.isAssetDescription&&(e.isAssetDescription=!0),T.assetIndex=Object(k["a"])(T.assets)})),Object(n["a"])(i,C["t"],(function(e,t){t.canceled=!0})),Object(n["a"])(i,C["Xd"],(function(e,t){var s=e.assetMap[t.id];s.canceled=!1,T.assetIndex=Object(k["a"])(T.assets)})),Object(n["a"])(i,C["nb"],(function(e,t){var s=e.displayedAssets.find((function(e){return e.id===t.entity_id}));if(s){var i=JSON.parse(JSON.stringify(s.validations));delete s.validations,c.a.set(s,"validations",i);var n=JSON.parse(JSON.stringify(s.tasks)),a=n.findIndex((function(e){return e===t.id}));n.splice(a,1),c.a.set(s,"tasks",n)}})),Object(n["a"])(i,C["od"],(function(e,t){t.comment,t.taskId})),Object(n["a"])(i,C["ge"],(function(e,t){var s=e.assetSorting;t.sorting=s,S.buildResult(e,t)})),Object(n["a"])(i,C["Zd"],(function(e,t){var s=t.searchQuery;e.assetSearchQueries.includes(s)||(e.assetSearchQueries.push(s),e.assetSearchQueries=Object(v["d"])(e.assetSearchQueries))})),Object(n["a"])(i,C["Gd"],(function(e,t){var s=t.searchQuery,i=e.assetSearchQueries.findIndex((function(e){return e.name===s.name}));i>=0&&e.assetSearchQueries.splice(i,1)})),Object(n["a"])(i,C["sb"],(function(e,t){t.taskTypeMap,t.taskStatusMap,t.taskMap,t.production;var s=T.result,i=e.displayedAssets.length+_["a"];if(i<s.length+_["a"]){e.displayedAssets=s.slice(0,e.displayedAssets.length+_["a"]),e.assetFilledColumns=Object(y["c"])(e.displayedAssets);var n=e.displayedAssets.length-_["a"],a=e.displayedAssets.length,o=e.nbValidationColumns;n>=0&&(e.assetSelectionGrid=Object(g["a"])(e.assetSelectionGrid,n,a,o))}})),Object(n["a"])(i,C["je"],(function(e,t){e.assetSearchText=""})),Object(n["a"])(i,C["we"],(function(e,t){var s=t.entityId,i=(t.taskId,t.previewId),n=t.taskMap,a=e.assetMap[s];a&&(a.preview_file_id=i,a.tasks.forEach((function(e){var t=n[e];t.entity.preview_file_id=i})))})),Object(n["a"])(i,C["fe"],(function(e,t){e.assetListScrollPosition=t})),Object(n["a"])(i,C["xe"],(function(e,t){e.assetTypeListScrollPosition=t})),Object(n["a"])(i,C["Od"],(function(e,t){e.assetSelectionGrid[0]&&e.assetSelectionGrid[t.x]&&(e.assetSelectionGrid[t.x][t.y]=!1)})),Object(n["a"])(i,C["n"],(function(e,t){e.assetSelectionGrid[0]&&e.assetSelectionGrid[t.x]&&(e.assetSelectionGrid[t.x][t.y]=!0)})),Object(n["a"])(i,C["o"],(function(e,t){var s=JSON.parse(JSON.stringify(e.assetSelectionGrid));t.forEach((function(e){s[0]&&s[e.x]&&(s[e.x][e.y]=!0)})),e.assetSelectionGrid=s})),Object(n["a"])(i,C["T"],(function(e,t){var s=JSON.parse(JSON.stringify(e.assetSelectionGrid));e.assetSelectionGrid=Object(g["c"])(s)})),Object(n["a"])(i,C["pd"],(function(e,t){var s=e.assetMap[t.entity_id];s&&t&&(t=S.populateTask(t,s),s.tasks.push(t),s.validations||(s.validations={}),c.a.set(s.validations,t.task_type_id,t.id))})),Object(n["a"])(i,C["Y"],(function(e,t){t.forEach((function(t){if(t){var s=e.assetMap[t.entity_id];if(s){var i=Object(a["a"])({},s.validations);c.a.set(i,t.task_type_id,t.id),delete s.validations,c.a.set(s,"validations",i)}}}))})),Object(n["a"])(i,C["he"],(function(e,t){var s=Object(w["e"])(t),i=Object(k["j"])(T.assetTypeIndex,s)||e.assetTypes;Object.assign(e,{displayedAssetTypes:i,displayedAssetTypesLength:i?i.length:0,assetTypeSearchText:t})})),Object(n["a"])(i,C["V"],(function(e,t){var s=t.taskStatusMap,i=t.taskMap;e.assetTypeStats=Object(b["a"])(T.assets,"asset_type_id",s,i)})),Object(n["a"])(i,C["G"],(function(e,t){var s=t.taskStatusMap,i=t.taskTypeMap,n=t.taskMap,a=t.production,o=t.persons,r=t.sorting,c=e.assetSearchText;e.assetSorting=r,S.buildResult(e,{assetSearch:c,taskStatusMap:s,taskTypeMap:i,taskMap:n,production:a,persons:o,sorting:r})})),Object(n["a"])(i,C["Qe"],(function(e,t){var s=t.descriptor,i=t.previousDescriptorFieldName;"Asset"===s.entity_type&&i&&T.assets.forEach((function(e){e.data[s.field_name]=e.data[i],delete e.data[i]}))})),Object(n["a"])(i,C["Vd"],(function(e){T.assets=[],T.assetIndex={},T.result=[],Object.assign(e,Object(a["a"])({},x))})),i);t["a"]={state:E,getters:P,actions:O,mutations:A,cache:T}},"7e8e":function(e,t,s){},"7f06":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"pencil-wrapper"},[s("button",{staticClass:"pencil-picker",class:{medium:"medium"===e.pencil,small:"small"===e.pencil},attrs:{type:"button",title:e.$t("playlists.actions.annotation_"+e.pencil)},on:{click:e.togglePalette}}),s("div",{directives:[{name:"show",rawName:"v-show",value:e.isOpen,expression:"isOpen"}],staticClass:"pencil-palette"},e._l(e.sizes,(function(t){return s("label",{key:t,class:{medium:"medium"===t,small:"small"===t},attrs:{title:e.$t("playlists.actions.annotation_"+t)}},[s("input",{attrs:{type:"radio"},domProps:{value:t},on:{click:function(s){return e.onPencilPicked(t)}}})])})),0)])},n=[],a={name:"pencilpicker",props:{pencil:{type:String},sizes:{type:Array}},data:function(){return{isOpen:!1}},computed:{},methods:{togglePalette:function(){this.isOpen=!this.isOpen},onPencilPicked:function(e){this.$emit("change",e),this.isOpen=!1}}},o=a,r=(s("fbf3"),s("2877")),c=Object(r["a"])(o,i,n,!1,null,"7690204b",null);t["a"]=c.exports},8108:function(e,t,s){},"813f":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{modal:!0,"is-active":e.active}},[s("div",{staticClass:"modal-background",on:{click:function(t){return e.$emit("cancel")}}}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box"},[e.assetToEdit&&this.assetToEdit.id?s("h1",{staticClass:"title"},[e._v(" "+e._s(e.$t("assets.edit_title"))+" "+e._s(e.assetToEdit.name)+" ")]):s("h1",{staticClass:"title"},[e._v(" "+e._s(e.$t("assets.new_asset"))+" ")]),s("form",{on:{submit:function(e){e.preventDefault()}}},[s("combobox",{attrs:{label:e.$t("assets.fields.type"),options:e.productionAssetTypeOptions},model:{value:e.form.entity_type_id,callback:function(t){e.$set(e.form,"entity_type_id",t)},expression:"form.entity_type_id"}}),e.isTVShow?s("combobox",{attrs:{label:e.$t("assets.fields.episode"),options:e.episodeOptions},model:{value:e.form.source_id,callback:function(t){e.$set(e.form,"source_id",t)},expression:"form.source_id"}}):e._e(),s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"nameField",attrs:{label:e.$t("assets.fields.name")},on:{enter:e.runConfirmation},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),s("textarea-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"descriptionField",attrs:{label:e.$t("assets.fields.description")},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}}),e._l(e.assetMetadataDescriptors,(function(t){return s("div",{key:t.id},[t.choices.length>0?s("combobox",{attrs:{label:t.name,options:e.getDescriptorChoicesOptions(t)},model:{value:e.form.data[t.field_name],callback:function(s){e.$set(e.form.data,t.field_name,s)},expression:"form.data[descriptor.field_name]"}}):s("text-field",{attrs:{label:t.name},on:{enter:e.runConfirmation},model:{value:e.form.data[t.field_name],callback:function(s){e.$set(e.form.data,t.field_name,s)},expression:"form.data[descriptor.field_name]"}})],1)}))],2),s("div",{staticClass:"has-text-right"},[e.assetToEdit&&e.assetToEdit.id?e._e():s("a",{class:{button:!0,"is-primary":!0,"is-loading":e.isLoadingStay},attrs:{disabled:this.form.name&&0===this.form.name.length},on:{click:e.confirmAndStayClicked}},[e._v(" "+e._s(e.$t("main.confirmation_and_stay"))+" ")]),s("a",{class:{button:!0,"is-primary":!0,"is-loading":e.isLoading},attrs:{disabled:this.form.name&&0===this.form.name.length},on:{click:e.confirmClicked}},[e._v(" "+e._s(e.$t("main.confirmation"))+" ")]),s("button",{staticClass:"button is-link",on:{click:function(t){return e.$emit("cancel")}}},[e._v(" "+e._s(e.$t("main.close"))+" ")]),e.isError?s("p",{staticClass:"error has-text-right info-message"},[e._v(" "+e._s(e.$t("assets.edit_fail"))+" ")]):e._e(),e.isSuccess?s("p",{staticClass:"success has-text-right info-message"},[e._v(" "+e._s(e.assetSuccessText)+" ")]):e._e()])])])])},n=[],a=(s("a4d3"),s("e01a"),s("99af"),s("d81d"),s("b0c0"),s("2909")),o=s("5530"),r=s("2f62"),c=s("d065"),l=s("7bf8"),d=s("1149"),u=s("992f"),p={name:"edit-asset-modal",mixins:[c["a"]],components:{TextField:l["a"],TextareaField:d["a"],Combobox:u["a"]},props:{active:{type:Boolean,default:!1},text:{type:String,default:""},isError:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},isLoadingStay:{type:Boolean,default:!1},isSuccess:{type:Boolean,default:!1},assetToEdit:{type:Object,default:function(){}},errorText:{type:String,default:""}},data:function(){return{form:{name:"",description:"",source_id:null,data:{}},assetSuccessText:""}},computed:Object(o["a"])(Object(o["a"])({},Object(r["c"])(["assets","assetCreated","assetMetadataDescriptors","assetTypes","currentProduction","currentEpisode","episodes","productionAssetTypes","productionAssetTypeOptions","isTVShow","openProductions"])),{},{episodeOptions:function(){var e=this.episodes.map((function(e){return{label:e.name,value:e.id}}));return e.unshift({label:this.$t("main.main_pack"),value:"null"}),e}}),mounted:function(){this.resetForm(),this.assetSuccessText=""},methods:Object(o["a"])(Object(o["a"])({},Object(r["b"])([])),{},{runConfirmation:function(){this.form.name.length>0&&(this.isEditing()?this.confirmClicked():this.confirmAndStayClicked())},focusName:function(){this.$refs.nameField.focus()},confirmAndStayClicked:function(){this.$emit("confirmAndStay",this.form)},confirmClicked:function(){this.$emit("confirm",this.form)},isEditing:function(){return this.assetToEdit&&this.assetToEdit.id},getDescriptorChoicesOptions:function(e){var t=e.choices.map((function(e){return{label:e,value:e}}));return[{label:"",value:""}].concat(Object(a["a"])(t))},resetForm:function(){this.isEditing()?this.form={entity_type_id:this.assetToEdit.asset_type_id,project_id:this.assetToEdit.project_id,name:this.assetToEdit.name,description:this.assetToEdit.description,source_id:this.assetToEdit.source_id||this.assetToEdit.episode_id,data:Object(o["a"])({},this.assetToEdit.data)||{}}:(!this.form.entity_type_id&&this.productionAssetTypes.length>0&&(this.form.entity_type_id=this.productionAssetTypes[0].id),this.openProductions.length>0&&(this.form.project_id=this.currentProduction?this.currentProduction.id:""),this.form.name="",this.form.description="",this.form.source_id=this.currentEpisode?this.currentEpisode.id:null,this.form.data={})}}),watch:{assetToEdit:function(){this.resetForm()},assetCreated:function(){this.isEditing()?this.assetSuccessText=this.$t("assets.edit_success",{name:this.assetCreated}):this.assetSuccessText=this.$t("assets.new_success",{name:this.assetCreated})},active:function(){var e=this;this.assetSuccessText="",this.resetForm(),this.active&&setTimeout((function(){e.$refs.nameField.focus()}),100)}}},h=p,m=(s("0224"),s("2877")),f=Object(m["a"])(h,i,n,!1,null,"6dd51a7c",null);t["a"]=f.exports},8204:function(e,t,s){"use strict";var i=s("a14f"),n=s.n(i);n.a},"82ea":function(e,t,s){},"86a1":function(e,t,s){},8707:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{ref:"playlist-annotation",staticClass:"annotation-bar"},e._l(e.annotations,(function(t,i){return s("span",{key:"annotation-"+i,staticClass:"annotation-mark",style:{left:e.getAnnotationPosition(t)+"px"},on:{click:function(s){return e.$emit("select-annotation",t)}}})})),0)},n=[],a=(s("a9e3"),{name:"annotation-bar",props:{annotations:{default:function(){return[]},type:Array},maxDurationRaw:{default:0,type:Number},width:{default:0,type:Number}},methods:{getAnnotationPosition:function(e){var t=e.time/this.maxDurationRaw,s=this.width,i=this.$parent.progress;if(0===s&&i){var n=i.getBoundingClientRect();s=n.width}var a=s*t-3;return a>=s&&(a-=this.isFullScreen()?9:6),a},isFullScreen:function(){return!!(document.fullScreen||document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement||document.fullscreenElement)}}}),o=a,r=(s("3722"),s("2877")),c=Object(r["a"])(o,i,n,!1,null,"0696ae30",null);t["a"]=c.exports},8751:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("h2",{staticClass:"subtitle"},[e._v(e._s(e.text))])},n=[],a={name:"page-subtitle",props:{text:{default:"",type:String}}},o=a,r=(s("fb36"),s("2877")),c=Object(r["a"])(o,i,n,!1,null,"67ee08da",null);t["a"]=c.exports},"89e1":function(e,t,s){"use strict";var i=s("3418"),n=s.n(i);n.a},"8ab4":function(e,t,s){"use strict";var i=s("1dc9"),n=s.n(i);n.a},"8bc7":function(e,t,s){"use strict";var i=s("b4e3"),n=s.n(i);n.a},"8bd3":function(e,t,s){"use strict";var i=s("3519"),n=s.n(i);n.a},"8bd9":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.isEmpty?i("div",{staticClass:"empty-comment"},[i("div",{staticClass:"flexrow content-wrapper"},[i("span",{staticClass:"round-task-status-name flexrow-item",style:{border:"1px solid "+("todo"===e.comment.task_status.short_name?"grey":e.statusColor),color:"todo"===e.comment.task_status.short_name?"grey":e.statusColor}},[e._v(" "+e._s(e.comment.task_status.short_name)+" ")]),i("people-avatar",{staticClass:"flexrow-item",attrs:{person:e.comment.person,size:25,"font-size":12}}),i("people-name",{staticClass:"flexrow-item",attrs:{person:e.comment.person}}),i("span",{staticClass:"filler"}),i("span",{staticClass:"flexrow-item date",attrs:{title:e.fullDate}},[e._v(" "+e._s(e.shortDate)+" ")]),i("div",{staticClass:"flexrow-item menu-wrapper"},[i("chevron-down-icon",{staticClass:"menu-icon",on:{click:e.toggleCommentMenu}}),i("comment-menu",{ref:"menu",attrs:{"is-editable":e.editable,"is-empty":!0},on:{"pin-clicked":function(t){return e.$emit("pin-comment",e.comment)},"edit-clicked":function(t){e.$emit("edit-comment",e.comment),e.toggleCommentMenu()},"delete-clicked":function(t){e.$emit("delete-comment",e.comment),e.toggleCommentMenu()}}})],1)],1)]):i("article",{class:{comment:!0,pinned:e.comment.pinned,highlighted:e.highlighted},style:{"box-shadow":e.boxShadowStyle}},[i("div",{staticClass:"content-wrapper full"},[i("div",{staticClass:"flexrow"},[i("span",{staticClass:"round-task-status-name",style:{"background-color":e.statusColor,color:"todo"===e.comment.task_status.short_name?"#333":"white"}},[e._v(" "+e._s(e.comment.task_status.short_name)+" ")]),i("people-avatar",{staticClass:"flexrow-item",attrs:{size:25,"font-size":12,person:e.comment.person}}),i("strong",{staticClass:"flexrow-item"},[i("people-name",{attrs:{person:e.comment.person}})],1),i("div",{staticClass:"filler"}),i("span",{staticClass:"flexrow-item date",attrs:{title:e.fullDate}},[e._v(" "+e._s(e.shortDate)+" ")]),i("div",{staticClass:"flexrow-item menu-wrapper"},[i("chevron-down-icon",{staticClass:"menu-icon",on:{click:e.toggleCommentMenu}}),i("comment-menu",{ref:"menu",attrs:{"is-pinned":e.comment.pinned,"is-editable":e.editable},on:{"pin-clicked":function(t){return e.$emit("pin-comment",e.comment)},"edit-clicked":function(t){e.$emit("edit-comment",e.comment),e.toggleCommentMenu()},"delete-clicked":function(t){e.$emit("delete-comment",e.comment),e.toggleCommentMenu()}}})],1)],1),i("div",{staticClass:"flexrow-item comment-content"},[i("div",{staticClass:"content"},["client"===e.personMap[e.comment.person_id].role?i("p",{staticClass:"client-comment"},[i("span",[e._v(" "+e._s(e.$t("comments.comment_from_client"))+" "),i("copy-icon",{staticClass:"copy-icon",attrs:{size:"1.1x"},on:{click:function(t){return e.$emit("duplicate-comment",e.comment)}}})],1)]):e._e(),e.comment.text?i("p",{staticClass:"comment-text",domProps:{innerHTML:e._s(e.renderComment(e.comment.text,e.comment.mentions,e.personMap))}}):e._e(),e.checklist.length>0?i("checklist",{staticClass:"checklist",attrs:{checklist:e.checklist,disabled:!e.isChangeChecklistAllowed},on:{"remove-task":e.removeTask,"emit-change":e.emitChangeEvent},nativeOn:{keyup:function(t){return e.emitChangeEvent(t)}}}):e._e(),e.taskStatus.is_done&&e.isLast?i("p",[i("img",{attrs:{src:s("ce80")}})]):e._e(),e.comment.attachment_files.length>0?i("p",[e._l(e.pictureAttachments,(function(t){return i("a",{key:t.id,attrs:{href:e.getAttachmentPath(t),title:t.name,target:"_blank"}},[i("img",{staticClass:"attachment",attrs:{src:e.getAttachmentPath(t)}})])})),e._l(e.fileAttachments,(function(t){return i("a",{key:t.id,staticClass:"flexrow",attrs:{href:e.getAttachmentPath(t),title:t.name,target:"_blank"}},[i("paperclip-icon",{staticClass:"flexrow-item attachment-icon",attrs:{size:"1x"}}),i("span",{staticClass:"flexrow-item"},[e._v(" "+e._s(t.name)+" ")])],1)}))],2):e._e(),e.comment.text.length>0?i("div",{staticClass:"comment-like",attrs:{title:e.isLikedBy},on:{click:function(t){return e.acknowledgeComment(e.comment)}}},[i("button",{class:{"like-button":!0,"like-button--empty":void 0===e.comment.like},attrs:{type:"button",disabled:"comment.person_id !== user.id"}},[i("thumbs-up-icon",{attrs:{size:"1x"}}),i("span",[e._v(e._s(e.comment.acknowledgements.length))])],1)]):e._e(),e.comment.pinned?i("p",{staticClass:"pinned-text"},[e._v(" "+e._s(e.$t("comments.pinned"))+" ")]):e._e()],1)])]),e.comment.previews.length>0?i("div",{staticClass:"flexrow content-wrapper preview-info"},[i("router-link",{staticClass:"flexrow-item round-task-status-name revision",attrs:{to:e.previewRoute}},[e._v(" Revision "+e._s(e.comment.previews[0].revision)+" ")])],1):e._e(),e.isAddChecklistAllowed?i("div",{staticClass:"has-text-centered add-checklist",on:{click:function(t){return e.addChecklistEntry()}}},[e._v(" "+e._s(e.$t("comments.add_checklist"))+" ")]):e._e()])])},n=[],a=(s("4de4"),s("caad"),s("a15b"),s("d81d"),s("b0c0"),s("5530")),o=s("2909"),r=s("c1df"),c=s.n(r),l=s("2f62"),d=s("66e7"),u=s("66be"),p=s("2229"),h=s("3657"),m=s("7930"),f=s("0a35"),_=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{ref:"main",staticClass:"comment-menu hidden"},[s("div",{directives:[{name:"show",rawName:"v-show",value:!e.isEmpty,expression:"!isEmpty"}],on:{click:e.onPinClicked}},[e.isPinned?s("span",[e._v(" "+e._s(e.$t("comments.unpin"))+" ")]):s("span",[e._v(e._s(e.$t("comments.pin")))])]),e.isEditable?s("div",{on:{click:function(t){return e.$emit("edit-clicked")}}},[e._v(" "+e._s(e.$t("main.edit"))+" ")]):e._e(),e.isEditable?s("div",{staticClass:"error",on:{click:function(t){return e.$emit("delete-clicked")}}},[e._v(" "+e._s(e.$t("main.delete"))+" ")]):e._e()])},v=[],g={name:"comment-menu",props:{isPinned:{type:Boolean,default:!1},isCurrentUserAdmin:{type:Boolean,default:!1},isEditable:{type:Boolean,default:!0},isEmpty:{type:Boolean,default:!1}},data:function(){return{}},computed:Object(a["a"])({},Object(l["c"])([])),methods:Object(a["a"])(Object(a["a"])({},Object(l["b"])([])),{},{toggle:function(){var e=this.$refs.main;"comment-menu"===e.className?e.className="comment-menu hidden":e.className="comment-menu"},onPinClicked:function(){this.$emit("pin-clicked"),this.toggle()}})},y=g,b=(s("2b21"),s("2877")),k=Object(b["a"])(y,_,v,!1,null,"3ad24a12",null),w=k.exports,C=s("eb8c"),S=s("0073"),T=s("4ce0"),x={name:"comment",components:{Checklist:T["a"],ChevronDownIcon:f["f"],CopyIcon:f["j"],CommentMenu:w,PaperclipIcon:f["C"],PeopleAvatar:C["a"],PeopleName:S["a"],ThumbsUpIcon:f["O"]},data:function(){return{checklist:[]}},props:{comment:{type:Object,default:function(){}},task:{type:Object,default:null},highlighted:{type:Boolean,default:!1},editable:{type:Boolean,default:!1},light:{type:Boolean,default:!1},isFirst:{type:Boolean,default:!1},isLast:{type:Boolean,default:!1}},mounted:function(){var e=this;this.comment.checklist&&(this.$options.silent=!0,this.checklist=Object(o["a"])(this.comment.checklist),this.$nextTick().then((function(){e.$options.silent=!1})))},computed:Object(a["a"])(Object(a["a"])({},Object(l["c"])(["currentProduction","isDarkTheme","user","personMap","taskMap","taskTypeMap","taskStatusMap"])),{},{isEmpty:function(){return 0===this.comment.text.length&&(!this.comment.checklist||0===this.comment.checklist.length)&&0===this.comment.attachment_files.length&&0===this.comment.previews.length&&!(this.isFirst&&this.taskStatus.is_done)},previewRoute:function(){var e={name:"task",params:{task_id:this.comment.object_id,production_id:this.currentProduction.id}};this.comment.previews.length>0&&(e={name:"task-preview",params:{task_id:this.comment.object_id,preview_id:this.comment.previews[0].id,production_id:this.currentProduction.id}}),this.task.episode_id?(e.name="episode-".concat(e.name),e.params.episode_id=this.task.episode_id):this.task.entity&&this.task.entity.episode_id&&(e.name="episode-".concat(e.name),e.params.episode_id=this.task.entity.episode_id);var t=this.taskTypeMap[this.task.task_type_id];return e.params.type=t.for_shots?"shots":"assets",e},deleteCommentPath:function(){return this.getPath("task-delete-comment")},editCommentPath:function(){return this.getPath("task-edit-comment")},addPreviewPath:function(){return this.getPath("task-add-preview")},taskStatus:function(){var e=this.taskStatusMap[this.comment.task_status.id];return e||this.comment.task_status},isAddChecklistAllowed:function(){return this.taskStatus.is_retake&&0===this.checklist.length&&this.user.id===this.comment.person_id},isChangeChecklistAllowed:function(){return this.taskStatus.is_retake&&this.user.id===this.comment.person_id},isLikedBy:function(){var e=this,t=this.comment.acknowledgements.map((function(t){return e.personMap[t]}));return Object(p["d"])(t).map((function(e){return e.name})).join(", ")},pictureAttachments:function(){return this.comment.attachment_files.filter((function(e){return["png","jpg","jpeg","gif"].includes(e.extension)}))},fileAttachments:function(){return this.comment.attachment_files.filter((function(e){return!["png","jpg","jpeg","gif"].includes(e.extension)}))},commentDate:function(){return Object(h["p"])(this.comment.created_at)},fullDate:function(){return this.commentDate.tz(this.user.timezone).format("YYYY-MM-DD HH:mm:ss")},shortDate:function(){return c()().diff(this.commentDate,"days")>1?this.commentDate.tz(this.user.timezone).format("MM/DD"):this.commentDate.tz(this.user.timezone).format("HH:mm")},boxShadowStyle:function(){return"0 0 3px 2px ".concat(this.comment.task_status.color,"1F")},statusColor:function(){var e=this.comment.task_status.color;return this.isDarkTheme&&!this.isEmpty?m["a"].darkenColor(e):e}}),methods:{formatDate:function(e){return Object(h["c"])(e)},getPath:function(e){var t={name:e,params:{task_id:this.comment.object_id,comment_id:this.comment.id}};return this.$route.params.episode_id&&(t.name="episode-".concat(t.name),t.params.episode_id=this.$route.params.episode_id),t},getAttachmentPath:function(e){return"/api/data/attachment-files/".concat(e.id,"/file")},toggleCommentMenu:function(){this.$refs.menu.toggle()},addChecklistEntry:function(){this.checklist.push({text:"",checked:!1})},removeTask:function(e){this.checklist=Object(d["f"])(this.checklist,e)},emitChangeEvent:function(e){var t=(new Date).getTime();this.lastCall=this.lastCall||0,t-this.lastCall>1e3&&(this.lastCall=t,this.$emit("checklist-updated",this.comment,this.checklist.filter((function(e){return e.text&&e.text.length>0}))))},acknowledgeComment:function(e){this.$emit("ack-comment",e)},renderComment:u["b"]},watch:{checklist:function(){this.$options.silent||this.emitChangeEvent()}}},E=x,P=(s("7c92"),Object(b["a"])(E,i,n,!1,null,"e66dfb6e",null));t["a"]=P.exports},"8c97":function(e,t,s){"use strict";s("fb6a"),s("4d63"),s("ac1f"),s("25f0"),s("466d"),s("4d90"),s("5319");t["a"]={generateNextName:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s=e.match(/\d+$/);if(s){var i=s[0],n=e.substring(0,e.length-i.length),a=parseInt(i);return 1===a&&10===t?a=10:a+=t,n+String(a).padStart(i.length,"0")}return""},shortenText:function(e,t){var s=e||"";return void 0!==e&&e.length>t&&(s=e.slice(0,t)+"...",s=s.replace(/\n/g," ")),s},slugify:function(e){e=e.replace(/^\s+|\s+$/g,"").toLowerCase();for(var t="/_,:",s="aaaaeeeeiiiioooouuuunc------",i=0,n=t.length;i<n;i++)e=e.replace(new RegExp(t.charAt(i),"g"),s.charAt(i));return e.replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"_").replace(/-+/g,"_")}}},"8d07":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("h1",{staticClass:"title hide-small-screen"},[e._v(e._s(e.text))])},n=[],a={name:"page-title",props:{text:{default:"",type:String}}},o=a,r=s("2877"),c=Object(r["a"])(o,i,n,!1,null,"ead134bc",null);t["a"]=c.exports},"8d35":function(e,t,s){},9224:function(e){e.exports=JSON.parse('{"a":"0.12.24"}')},9374:function(e,t,s){},9505:function(e,t,s){"use strict";var i=s("dfbe"),n=s.n(i);n.a},9560:function(e,t,s){"use strict";var i=s("d766"),n=s.n(i);n.a},"95cb":function(e,t,s){},9616:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-autocomplete",{ref:"autocomplete",attrs:{items:e.items,"get-label":e.getAssignationLabel,"component-item":e.assignationItem,"min-len":1,"auto-select-one-item":!1,"input-attrs":{placeholder:this.$t("people.select_person"),class:e.big?"big v-autocomplete-input":"v-autocomplete-input"}},on:{"update-items":e.update,input:e.onChange},model:{value:e.item,callback:function(t){e.item=t},expression:"item"}})},n=[],a=(s("b0c0"),s("5530")),o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"flexrow"},[s("people-avatar",{staticClass:"flexrow-item",attrs:{"no-cache":!0,person:e.item,size:30}}),s("span",{staticClass:"flexrow-item"},[e._v(" "+e._s(e.item.name)+" ")])],1)},r=[],c=s("eb8c"),l={name:"assignation-item",components:{PeopleAvatar:c["a"]},props:{item:{required:!0},searchText:{required:!0}},computed:{nonHighilightedText:function(){return this.searchText===this.item.first_name?"&nbsp;"+this.item.name.substring(this.searchText.length):this.item.name.substring(this.searchText.length)}}},d=l,u=(s("620e"),s("2877")),p=Object(u["a"])(d,o,r,!1,null,"c09f3b40",null),h=p.exports,m=s("2f62"),f=s("2017"),_={name:"people-field",data:function(){return{assignationItem:h,items:[],item:{},searchText:""}},created:function(){this.items=this.people,this.item=this.value,this.index=Object(f["c"])(this.people)},mounted:function(){var e=this;this.items=this.people,this.$refs.autocomplete.$el.children[0].children[0].addEventListener("keyup",(function(t){13===t.keyCode&&e.item&&e.$emit("enter"),e.searchText=e.$refs.autocomplete.$el.children[0].children[0].value,e.item||0!==e.searchText.length||(e.items=[])}))},props:{value:{type:Object,default:function(){}},people:{type:Array,default:function(){return[]}},big:{type:Boolean,default:!1}},computed:Object(a["a"])({},Object(m["c"])(["peopleIndex"])),methods:{getAssignationLabel:function(e){return e?e.name:""},update:function(e){if(e&&e.length>0){var t=Object(f["j"])(this.index,[e]);this.items=t}else this.items=this.people},onChange:function(){this.$emit("input",this.item)},clear:function(){this.item=null},focus:function(){var e=this.$el.querySelector(".v-autocomplete-input");e&&e.focus()}},watch:{item:function(){this.item||(this.items=this.people)},people:function(){this.items=null,this.items=this.people,this.index=Object(f["c"])(this.people)}}},v=_,g=(s("f883"),Object(u["a"])(v,i,n,!1,null,null,null));t["a"]=g.exports},9856:function(e,t,s){"use strict";var i=s("3dcc"),n=s.n(i);n.a},9877:function(e,t,s){},"992f":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{field:e.withMargin}},[e.label.length>0?s("label",{staticClass:"label"},[e._v(" "+e._s(e.label)+" ")]):e._e(),s("p",{staticClass:"control"},[s("span",{class:{select:!0,"is-top":this.isTop}},[s("select",{ref:"select",class:{thin:e.thin,"select-input":!0,error:this.error},style:{width:e.width?e.width+"px":void 0},attrs:{disabled:e.disabled},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.emitEnter()},change:e.updateValue}},e._l(e.options,(function(t,i){return s("option",{key:i+"-"+t.label+"-"+t.value,domProps:{value:t.value||t.label,selected:e.value===t.value}},[e._v(" "+e._s(e.getOptionLabel(t))+" ")])})),0)])])])},n=[],a=(s("a9e3"),{name:"combobox",props:{label:{default:"",type:String},value:{default:"",type:[Object,String]},options:{default:function(){return[]},type:Array},localeKeyPrefix:{default:"",type:String},isTop:{default:!1,type:Boolean},disabled:{default:!1,type:Boolean},error:{default:!1,type:Boolean},thin:{default:!1,type:Boolean},width:{type:Number},withMargin:{default:!0,type:Boolean}},computed:{},methods:{updateValue:function(){this.$emit("input",this.$refs.select.value)},emitEnter:function(){this.$emit("enter",this.$refs.select.value)},getOptionLabel:function(e){return this.localeKeyPrefix.length>0?this.$t(this.localeKeyPrefix+e.label.toLowerCase()):e.label}}}),o=a,r=(s("997e"),s("2877")),c=Object(r["a"])(o,i,n,!1,null,"2144b8c0",null);t["a"]=c.exports},"997e":function(e,t,s){"use strict";var i=s("4bd6"),n=s.n(i);n.a},9989:function(e,t,s){"use strict";var i=s("6896"),n=s.n(i);n.a},"9bb3":function(e,t,s){"use strict";var i=s("3fac"),n=s.n(i);n.a},"9c0c":function(e,t,s){},"9d8b":function(e,t,s){"use strict";s.d(t,"e",(function(){return i})),s.d(t,"d",(function(){return n})),s.d(t,"a",(function(){return o})),s.d(t,"b",(function(){return r})),s.d(t,"f",(function(){return l})),s.d(t,"c",(function(){return d}));s("b0c0");var i=function(e,t,s,i,n){var a=e.project_id?e.project_id:t.id,o={name:"task",params:{production_id:a,task_id:e.id}};s&&i&&(o.name="episode-task",o.params.episode_id=e.episode_id||i.id);var r=n[e.task_type_id];return o.params.type=r.for_shots?"shots":"assets",o},n=function(e,t){if(e){var s=e.entity_type_name,i=e.entity?e.entity.id:e.entity_id,n={name:"Shot"===s?"shot":"asset",params:{production_id:e.project_id}};return"Shot"===s?n.params.shot_id=i:n.params.asset_id=i,t&&(n.name="episode-".concat(n.name),n.params.episode_id=t),n}return{name:"open-productions"}},a=function(e,t){return{name:e,params:{production_id:t}}},o=function(e,t){return t&&(e.name="episode-".concat(e.name),e.params.episode_id=t),e},r=function(e,t,s,i){var n={name:i?"".concat(i,"-playlist"):"playlist",params:{production_id:e,playlist_id:s}};return o(n,t)},c=function(e,t,s){return o(a(e,t),s)},l=function(e,t,s,i){var n=c("task-type-schedule",t,s);return n.params.task_type_id=e,n.params.type=i,n},d=function(e){return a("schedule",e)}},"9d94":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.task?s("div",{ref:"side-panel",staticClass:"side task-info",style:e.panelStyle},[s("div",{staticClass:"page-header"},[s("div",{staticClass:"flexrow header-title"},[s("div",{staticClass:"title flexrow-item"},[s("router-link",{attrs:{to:e.taskEntityPath}},[e._v(" "+e._s(e.task?e.title:"Loading...")+" ")])],1),e.currentTaskType?s("task-type-name",{staticClass:"flexrow-item task-type",attrs:{"task-type":e.currentTaskType,"production-id":e.currentProduction.id}}):e._e()],1),s("div",{staticClass:"flexrow task-information"},[e.isWide&&e.isPreview?s("button-simple",{staticClass:"flexrow-item change-wideness-button",attrs:{icon:"right",title:e.$t("tasks.bigger")},on:{click:e.toggleWidth}}):e.isPreview?s("button-simple",{staticClass:"flexrow-item change-wideness-button",attrs:{icon:"left",title:e.$t("tasks.bigger")},on:{click:e.toggleWidth}}):e._e(),e.isCurrentUserManager&&e.isPreview&&"gif"!==e.extension?s("button-simple",{staticClass:"flexrow-item set-thumbnail-button",attrs:{icon:"image",disabled:!e.isSetThumbnailAllowed,title:e.$t("tasks.set_preview")},on:{click:e.setCurrentPreviewAsEntityThumbnail}}):e._e(),e.isAssigned?e._e():s("subscribe-button",{staticClass:"flexrow-item",attrs:{subscribed:e.isAssigned||e.isSubscribed},on:{click:e.toggleSubscribe}}),s("validation-tag",{staticClass:"is-medium flexrow-item",attrs:{task:e.task,"is-static":!0}}),s("div",{staticClass:"filler"}),e.isPreview?s("div",{staticClass:"preview-list flexrow"},[e._l(e.lastFivePreviews,(function(t,i){return s("span",{key:"preview-"+t.id,class:{"flexrow-item":!0,selected:e.currentPreviewIndex===i},on:{click:function(t){return e.onPreviewChanged(i)}}},[e._v(" "+e._s(t.revision)+" ")])})),s("router-link",{staticClass:"history-button flexrow-item",attrs:{to:e.taskPath}},[e._v(" ... ")])],2):e._e()],1)]),s("div",{ref:"task-columns",staticClass:"task-columns"},[e.isPreview?s("div",{staticClass:"task-column preview-column"},[s("div",{staticClass:"preview-column-content"},[s("div",{staticClass:"preview"},[e.taskPreviews&&e.taskPreviews.length>0?s("div",[s("preview-player",{ref:"preview-player",attrs:{"entity-preview-files":e.taskEntityPreviews,"last-preview-files":e.lastFivePreviews,previews:e.currentPreview.previews,"task-type-map":e.taskTypeMap,light:!e.isWide,"read-only":!e.isCurrentUserManager},on:{"annotation-changed":e.onAnnotationChanged,"change-current-preview":e.changeCurrentPreview,"add-extra-preview":e.onAddExtraPreview,"remove-extra-preview":e.onRemoveExtraPreview}})],1):e._e(),e.taskPreviews&&0!==e.taskPreviews.length?e._e():s("div",{staticClass:"no-preview"},[s("em",[e._v(e._s(e.$t("tasks.no_preview")))])])])])]):e._e(),s("div",{staticClass:"task-column comments-column"},[s("div",[s("div",[e.isCommentingAllowed?s("add-comment",{ref:"add-comment",attrs:{user:e.user,team:e.currentTeam,task:e.task,"task-status":e.getTaskStatusForCurrentUser(e.task.project_id),light:!0,"is-loading":e.loading.addComment,"attached-file-name":e.attachedFileName,"is-error":e.errors.addComment},on:{"add-comment":e.addComment,"add-preview":e.onAddPreviewClicked,"file-drop":e.selectFile}}):e._e(),e.taskComments&&e.taskComments.length>0&&!e.loading.task?s("div",{staticClass:"comments"},e._l(e.taskComments,(function(t,i){return s("comment",{key:"comment"+t.id,attrs:{comment:t,task:e.task,light:!0,"add-preview":e.onAddPreviewClicked,"is-first":0===i,"is-last":i===e.pinnedCount,editable:t.person&&e.user.id===t.person.id},on:{"duplicate-comment":e.onDuplicateComment,"pin-comment":e.onPinComment,"edit-comment":e.onEditComment,"delete-comment":e.onDeleteComment,"checklist-updated":e.saveComment,"ack-comment":e.onAckComment}})})),1):e.loading.task?e._e():s("div",{staticClass:"no-comment"},[s("em",[e._v(" "+e._s(e.$t("tasks.no_comment"))+" ")])])],1)]),e.loading.task?s("div",{staticClass:"has-text-centered"},[s("spinner")],1):e._e()])]),s("add-preview-modal",{ref:"add-preview-modal",attrs:{active:e.modals.addPreview,"is-loading":e.loading.addPreview,"is-error":e.errors.addPreview},on:{cancel:e.onClosePreview,fileselected:e.selectFile,confirm:e.onClosePreview}}),s("add-preview-modal",{ref:"add-extra-preview-modal",attrs:{active:e.modals.addExtraPreview,"is-loading":e.loading.addExtraPreview,"is-error":e.errors.addExtraPreview,"form-data":e.addExtraPreviewFormData,extensions:".png,.jpg,.jpeg"},on:{cancel:e.onCloseExtraPreview,fileselected:e.selectFile,confirm:e.createExtraPreview}}),s("edit-comment-modal",{attrs:{active:e.modals.editComment,"is-loading":e.loading.editComment,"is-error":e.errors.editComment,"comment-to-edit":e.commentToEdit,team:e.currentTeam},on:{confirm:e.confirmEditTaskComment,cancel:e.onCancelEditComment}}),s("delete-modal",{attrs:{active:e.modals.deleteComment,"is-loading":e.loading.deleteComment,"is-error":e.errors.deleteComment,text:e.$t("tasks.delete_comment"),"error-text":e.$t("tasks.delete_comment_error")},on:{confirm:e.confirmDeleteTaskComment,cancel:e.onCancelDeleteComment}}),s("delete-modal",{attrs:{active:e.modals.deleteExtraPreview,"is-loading":e.loading.deleteExtraPreview,"is-error":e.errors.deleteExtraPreview,text:e.$t("tasks.delete_preview"),"error-text":e.$t("tasks.delete_preview_error")},on:{cancel:e.onCancelRemoveExtraPreview,confirm:e.confirmDeleteTaskPreview}})],1):s("div",{staticClass:"side task-info has-text-centered"},[e._v(" "+e._s(e.$t("tasks.no_task_selected"))+" ")])},n=[],a=(s("99af"),s("4de4"),s("7db0"),s("c740"),s("caad"),s("c975"),s("a15b"),s("d81d"),s("fb6a"),s("45fc"),s("b0c0"),s("2532"),s("5530")),o=s("2f62"),r=s("9d8b"),c=s("66be"),l=s("6be5"),d=s("ee35"),u=s("de40"),p=s("8bd9"),h=s("5f48"),m=s("5b23"),f=s("be83"),_=s("d228"),v=s("274f"),g=s("fe13"),y=s("6aac"),b={name:"task-info",components:{AddComment:l["a"],AddPreviewModal:d["a"],ButtonSimple:u["a"],Comment:p["a"],DeleteModal:h["a"],EditCommentModal:m["a"],PreviewPlayer:y["a"],Spinner:f["a"],SubscribeButton:_["a"],TaskTypeName:v["a"],ValidationTag:g["a"]},props:{task:{type:Object,default:function(){}},isLoading:{type:Boolean,default:!0},isPreview:{type:Boolean,default:!0}},data:function(){return{addExtraPreviewFormData:null,attachedFileName:"",attachedImage:"",currentPreviewIndex:0,currentPreviewPath:"",currentPreviewDlPath:"",commentToEdit:null,isSubscribed:!1,isWide:!1,otherPreviews:[],taskComments:[],taskPreviews:[],errors:{addComment:!1,addPreview:!1,addExtraPreview:!1,editComment:!1,deleteComment:!1,confirmDeleteTaskPreview:!1,task:!1},loading:{addComment:!1,addPreview:!1,addExtraPreview:!1,editComment:!1,deleteComment:!1,confirmDeleteTaskPreview:!1,task:!1},modals:{addPreview:!1,addExtraPreview:!1,editComment:!1,deleteComment:!1,deleteExtraPreview:!1}}},mounted:function(){this.loadTaskData(),this.$refs["add-comment"]&&(this.$refs["add-comment"].text=this.lastCommentDraft)},beforeDestroy:function(){if(this.$refs["add-comment"]){var e="".concat(this.$refs["add-comment"].text);this.$store.commit("SET_LAST_COMMENT_DRAFT",e)}},computed:Object(a["a"])(Object(a["a"])({},Object(o["c"])(["currentEpisode","currentProduction","getTaskComment","getTaskComments","getTaskPreviews","isCurrentUserClient","isCurrentUserManager","isSingleEpisode","isTVShow","lastCommentDraft","personMap","previewFormData","productionMap","taskEntityPreviews","getTaskStatusForCurrentUser","taskTypeMap","user"])),{},{currentTeam:function(){var e=this,t=this.productionMap[this.task.project_id];return t.team.map((function(t){return e.personMap[t]}))},title:function(){if(this.task){var e=this.task.full_entity_name||this.task.entity_name;return"".concat(e)}return"Loading..."},isAssigned:function(){var e=this;return!!this.task&&this.task.assignees.some((function(t){return t===e.user.id}))},isCommentingAllowed:function(){var e=this,t=this.isCurrentUserManager,s=this.task.assignees.find((function(t){return t===e.user.id})),i=this.$route.path.indexOf("playlist")>0&&this.isCurrentUserClient;return t||s||i},isSetThumbnailAllowed:function(){return this.currentPreviewId&&this.task&&this.task.entity&&this.currentPreviewId!==this.task.entity.preview_file_id&&"gif"!==this.extension},currentTaskType:function(){return this.task?this.taskTypeMap[this.task.task_type_id]:null},currentPreview:function(){var e=this.currentPreviewIndex;return this.taskPreviews&&this.taskPreviews.length>0?this.taskPreviews[e]:null},currentPreviewId:function(){var e=this.currentPreviewIndex;return this.taskPreviews&&this.taskPreviews.length>0&&this.taskPreviews[e]?this.taskPreviews[e].id:null},extension:function(){var e=this.currentPreviewIndex;return this.taskPreviews&&this.taskPreviews.length>0?this.taskPreviews[e].extension:""},isStandardPreview:function(){return this.taskPreviews&&this.taskPreviews.length>0&&["ai","blend","ma","mb","pdf","psd","rar","ae","fla","flv","swf","zip"].includes(this.extension)},isMoviePreview:function(){return this.taskPreviews&&this.taskPreviews.length>0&&"mp4"===this.extension},isPicturePreview:function(){return this.taskPreviews&&this.taskPreviews.length>0&&["png","gif"].includes(this.extension)},is3DModelPreview:function(){return this.taskPreviews&&this.taskPreviews.length>0&&"obj"===this.extension},moviePath:function(){var e=null;return e=this.currentPreview.id,"/api/movies/originals/preview-files/".concat(e,".mp4")},tasktypeStyle:function(){return Object(c["a"])(this.task)},taskPath:function(){return Object(r["e"])(this.task,this.currentProduction,this.isTVShow,this.currentEpisode,this.taskTypeMap)},taskEntityPath:function(){var e=this.$route.params.episode_id;return Object(r["d"])(this.task,e)},lastFivePreviews:function(){return this.taskPreviews?this.taskPreviews.slice(0,5):[]},panelStyle:function(){return{width:this.isWide?700:350}},pinnedCount:function(){return this.taskComments?this.taskComments.filter((function(e){return e.pinned})).length:0},previewPlayer:function(){return this.$refs["preview-player"]}}),methods:Object(a["a"])(Object(a["a"])({},Object(o["b"])(["ackComment","addCommentExtraPreview","commentTask","commentTaskWithPreview","deleteTaskComment","deleteTaskPreview","editTaskComment","loadPreviewFileFormData","loadTask","loadTaskComments","loadTaskSubscribed","refreshPreview","pinComment","setPreview","subscribeToTask","unsubscribeFromTask","updatePreviewAnnotation"])),{},{loadTaskData:function(){var e=this;this.task&&(this.loading.task=!0,this.errors.task=!1,this.loadTaskComments({taskId:this.task.id,entityId:this.task.entity_id}).then((function(){return e.loadTaskSubscribed({taskId:e.task.id})})).then((function(t){e.loading.task=!1,e.reset(),e.isSubscribed=t})).catch((function(t){console.error(t),e.errors.task=!0})))},addComment:function(e,t,s,i){var n=this,a={taskId:this.task.id,taskStatusId:i,attachment:t,checklist:s,comment:e},o="commentTask";this.attachedFileName&&(o="commentTaskWithPreview"),this.loading.addComment=!0,this.errors.addComment=!1,this.$store.dispatch(o,a).then((function(){n.$refs["add-preview-modal"].reset(),n.$refs["add-comment-image-modal"]&&n.$refs["add-comment-image-modal"].reset(),n.reset(),n.attachedFileName="",n.loading.addComment=!1})).catch((function(e){console.error(e),n.errors.addComment=!0,n.loading.addComment=!1}))},reset:function(){var e=this;this.task&&(this.taskComments=this.getTaskComments(this.task.id),this.taskPreviews=this.getTaskPreviews(this.task.id),this.setOtherPreviews(),this.currentPreviewPath=this.getOriginalPath(),this.currentPreviewDlPath=this.getOriginalDlPath(),this.$nextTick((function(){e.$refs["add-comment"]&&e.$refs["add-comment"].focus()})))},focusCommentTextarea:function(){this.$refs["add-comment"]&&this.$refs["add-comment"].focus()},getOriginalPath:function(){var e=this.currentPreviewId,t=this.extension?this.extension:"png";return"/api/pictures/originals/preview-files/".concat(e,".").concat(t)},getOriginalDlPath:function(){var e=this.currentPreviewId;return"/api/pictures/originals/preview-files/".concat(e,"/download")},setOtherPreviews:function(){var e=this;return this.taskPreviews&&(this.otherPreviews=this.taskPreviews.filter((function(t){return t.id!==e.currentPreviewId&&"mp4"===t.extension}))),this.otherPreviews},selectFile:function(e){this.loadPreviewFileFormData(e),this.attachedFileName=e.map((function(e){return e.get("file").name})).join(", ")},createExtraPreview:function(){var e=this,t=this.currentPreviewIndex;this.errors.addExtraPreview=!1,this.loading.addExtraPreview=!0,this.addCommentExtraPreview({taskId:this.task.id,commentId:this.taskComments[0].id,previewId:this.taskPreviews[t].id}).then((function(){e.loading.addExtraPreview=!1,e.$refs["add-extra-preview-modal"].reset(),e.reset(),setTimeout((function(){e.$refs["preview-player"].displayLast()}),0),e.modals.addExtraPreview=!1})).catch((function(t){console.error(t),e.loading.addExtraPreview=!1,e.errors.addExtraPreview=!0}))},onPreviewAdded:function(e){var t=e.task_id,s=e.comment_id,i=e.preview_file_id,n=e.revision,a=e.extension,o=this.getTaskComment(t,s);this.task&&(t!==this.task.id||!o||0!==o.previews.length&&o.previews[0].id===i||(this.$store.commit("ADD_PREVIEW_END",{preview:{id:i,revision:n,extension:a},taskId:t,commentId:s,comment:o}),this.reset()))},onAnnotationChanged:function(e){var t=e.preview,s=e.annotations,i=this.task.id;this.updatePreviewAnnotation({taskId:i,preview:t,annotations:s})},onAddPreviewClicked:function(e){this.modals.addPreview=!0},onAddExtraPreview:function(){this.modals.addExtraPreview=!0},onRemoveExtraPreview:function(e){this.currentExtraPreviewId=e.id,this.modals.deleteExtraPreview=!0},onCancelRemoveExtraPreview:function(){this.modals.deleteExtraPreview=!1},onClosePreview:function(){this.modals.addPreview=!1},onCloseExtraPreview:function(){this.modals.addExtraPreview=!1},onPreviewChanged:function(e){this.currentPreviewIndex=e,this.currentPreviewPath=this.getOriginalPath(),this.currentPreviewDlPath=this.getOriginalDlPath()},changeCurrentPreview:function(e){var t=this.taskPreviews.findIndex((function(t){return t.id===e.id}));(t||0===t)&&(this.currentPreviewIndex=t,this.currentPreviewPath=this.getOriginalPath(),this.currentPreviewDlPath=this.getOriginalDlPath())},setCurrentPreviewAsEntityThumbnail:function(){this.setPreview({taskId:this.task.id,entityId:this.task.entity.id,previewId:this.currentPreviewId})},toggleSubscribe:function(){this.task&&!this.isAssigned&&(this.isSubscribed?(this.unsubscribeFromTask(this.task.id),this.isSubscribed=!1):(this.subscribeToTask(this.task.id),this.isSubscribed=!0))},toggleWidth:function(){this.isWide=!this.isWide;var e=this.$refs["side-panel"];this.isWide?e.parentElement.style["min-width"]="700px":e.parentElement.style["min-width"]="350px"},onAckComment:function(e){this.ackComment(e)},onDuplicateComment:function(e){this.$refs["add-comment"].setValue(e)},onPinComment:function(e){this.pinComment(e)},onEditComment:function(e){this.commentToEdit=e,this.modals.editComment=!0},onDeleteComment:function(e){this.commentToEdit=e,this.modals.deleteComment=!0},onCancelEditComment:function(e){this.modals.editComment=!1},onCancelDeleteComment:function(e){this.modals.deleteComment=!1},saveComment:function(e,t){this.editTaskComment({taskId:this.task.id,comment:e,checklist:t})},confirmDeleteTaskComment:function(){var e=this;this.loading.deleteComment=!0,this.errors.deleteComment=!1;var t=this.commentToEdit.id;this.deleteTaskComment({taskId:this.task.id,commentId:t}).then((function(){e.reset(),e.loading.deleteComment=!1,e.modals.deleteComment=!1})).catch((function(t){console.error(t),e.loading.deleteComment=!1,e.errors.deleteComment=!0}))},confirmEditTaskComment:function(e){var t=this;this.loading.editComment=!0,this.errors.editComment=!1,this.editTaskComment({taskId:this.task.id,comment:e}).then((function(){t.loading.editComment=!1,t.modals.editComment=!1})).catch((function(e){console.error(e),t.loading.editComment=!1,t.errors.editComment=!0}))},getCurrentTaskComments:function(){return this.getTaskComments(this.task.id)},confirmDeleteTaskPreview:function(){var e=this;this.loading.deleteExtraPreview=!0,this.errors.deleteExtraPreview=!1;var t=this.currentExtraPreviewId,s=this.getCurrentTaskComments().find((function(e){return e.previews.findIndex((function(e){return e.id===t}))>=0}));this.previewPlayer.displayFirst(),this.deleteTaskPreview({taskId:this.task.id,commentId:s.id,previewId:t}).then((function(){e.loading.deleteExtraPreview=!1,e.modals.deleteExtraPreview=!1})).catch((function(t){console.error(t),e.loading.deleteExtraPreview=!1,e.errors.deleteExtraPreview=!0}))},onRemoteAcknowledge:function(e,t){if(this.task){var s=this.getTaskComment(this.task.id,e.comment_id),i=this.personMap[e.person_id];s&&i&&(this.user.id===i.id?("ack"===t&&!s.acknowledgements.includes(i.id)||"unack"===t&&s.acknowledgements.includes(i.id))&&this.$store.commit("ACK_COMMENT",{comment:s,user:i}):this.$store.commit("ACK_COMMENT",{comment:s,user:i}))}}}),watch:{task:function(){this.attachedFileName="",this.currentPreviewIndex=0,this.loadTaskData()},isLoading:function(){this.task.loading=this.isLoading}},socket:{events:{"preview-file:add-file":function(e){this.onPreviewAdded(e)},"preview-file:update":function(e){var t=this.taskPreviews.filter((function(t){return t.id===e.preview_file_id}));t&&this.task&&this.refreshPreview({taskId:this.task.id,previewId:e.preview_file_id}).then((function(){}))},"comment:acknowledge":function(e){this.onRemoteAcknowledge(e,"ack")},"comment:unacknowledge":function(e){this.onRemoteAcknowledge(e,"unack")}}}},k=b,w=(s("1a5d"),s("2877")),C=Object(w["a"])(k,i,n,!1,null,"c924aef8",null);t["a"]=C.exports},"9e64":function(e,t,s){},"9fb0":function(e,t,s){"use strict";s.d(t,"Je",(function(){return i})),s.d(t,"Ke",(function(){return n})),s.d(t,"Le",(function(){return a})),s.d(t,"se",(function(){return o})),s.d(t,"sc",(function(){return r})),s.d(t,"qc",(function(){return c})),s.d(t,"rc",(function(){return l})),s.d(t,"Ge",(function(){return d})),s.d(t,"Qb",(function(){return u})),s.d(t,"td",(function(){return p})),s.d(t,"Vb",(function(){return h})),s.d(t,"Tb",(function(){return m})),s.d(t,"Ub",(function(){return f})),s.d(t,"fb",(function(){return _})),s.d(t,"Bb",(function(){return v})),s.d(t,"uc",(function(){return g})),s.d(t,"tc",(function(){return y})),s.d(t,"ve",(function(){return b})),s.d(t,"ae",(function(){return k})),s.d(t,"Md",(function(){return w})),s.d(t,"Ce",(function(){return C})),s.d(t,"sd",(function(){return S})),s.d(t,"ud",(function(){return T})),s.d(t,"ue",(function(){return x})),s.d(t,"rd",(function(){return E})),s.d(t,"te",(function(){return P})),s.d(t,"lf",(function(){return O})),s.d(t,"kf",(function(){return A})),s.d(t,"mf",(function(){return j})),s.d(t,"H",(function(){return D})),s.d(t,"Xe",(function(){return M})),s.d(t,"Ze",(function(){return I})),s.d(t,"Ye",(function(){return $})),s.d(t,"af",(function(){return L})),s.d(t,"bf",(function(){return F})),s.d(t,"ef",(function(){return N})),s.d(t,"gf",(function(){return q})),s.d(t,"ff",(function(){return R})),s.d(t,"cf",(function(){return B})),s.d(t,"df",(function(){return V})),s.d(t,"De",(function(){return z})),s.d(t,"Zc",(function(){return U})),s.d(t,"ad",(function(){return H})),s.d(t,"We",(function(){return G})),s.d(t,"Ee",(function(){return W})),s.d(t,"Qc",(function(){return Y})),s.d(t,"od",(function(){return K})),s.d(t,"pd",(function(){return Q})),s.d(t,"Lb",(function(){return X})),s.d(t,"Kb",(function(){return J})),s.d(t,"Pc",(function(){return Z})),s.d(t,"Rc",(function(){return ee})),s.d(t,"Y",(function(){return te})),s.d(t,"nb",(function(){return se})),s.d(t,"yb",(function(){return ie})),s.d(t,"cb",(function(){return ne})),s.d(t,"vd",(function(){return ae})),s.d(t,"a",(function(){return oe})),s.d(t,"wd",(function(){return re})),s.d(t,"k",(function(){return ce})),s.d(t,"j",(function(){return le})),s.d(t,"jb",(function(){return de})),s.d(t,"N",(function(){return ue})),s.d(t,"Re",(function(){return pe})),s.d(t,"n",(function(){return he})),s.d(t,"o",(function(){return me})),s.d(t,"Od",(function(){return fe})),s.d(t,"T",(function(){return _e})),s.d(t,"s",(function(){return ve})),s.d(t,"Me",(function(){return ge})),s.d(t,"de",(function(){return ye})),s.d(t,"Td",(function(){return be})),s.d(t,"Oe",(function(){return ke})),s.d(t,"re",(function(){return we})),s.d(t,"Kd",(function(){return Ce})),s.d(t,"Te",(function(){return Se})),s.d(t,"Dc",(function(){return Te})),s.d(t,"Bc",(function(){return xe})),s.d(t,"Cc",(function(){return Ee})),s.d(t,"m",(function(){return Pe})),s.d(t,"Se",(function(){return Oe})),s.d(t,"Nd",(function(){return Ae})),s.d(t,"pc",(function(){return je})),s.d(t,"nc",(function(){return De})),s.d(t,"oc",(function(){return Me})),s.d(t,"Gc",(function(){return Ie})),s.d(t,"Ec",(function(){return $e})),s.d(t,"Fc",(function(){return Le})),s.d(t,"Hb",(function(){return Fe})),s.d(t,"Fb",(function(){return Ne})),s.d(t,"Gb",(function(){return qe})),s.d(t,"mb",(function(){return Re})),s.d(t,"kb",(function(){return Be})),s.d(t,"lb",(function(){return Ve})),s.d(t,"je",(function(){return ze})),s.d(t,"Bd",(function(){return Ue})),s.d(t,"Ad",(function(){return He})),s.d(t,"He",(function(){return Ge})),s.d(t,"Ie",(function(){return We})),s.d(t,"xd",(function(){return Ye})),s.d(t,"Cd",(function(){return Ke})),s.d(t,"zd",(function(){return Qe})),s.d(t,"Ed",(function(){return Xe})),s.d(t,"yd",(function(){return Je})),s.d(t,"Dd",(function(){return Ze})),s.d(t,"f",(function(){return et})),s.d(t,"Qe",(function(){return tt})),s.d(t,"eb",(function(){return st})),s.d(t,"Yc",(function(){return it})),s.d(t,"Wc",(function(){return nt})),s.d(t,"Xc",(function(){return at})),s.d(t,"Pb",(function(){return ot})),s.d(t,"Nb",(function(){return rt})),s.d(t,"Ob",(function(){return ct})),s.d(t,"rb",(function(){return lt})),s.d(t,"pb",(function(){return dt})),s.d(t,"qb",(function(){return ut})),s.d(t,"Uc",(function(){return pt})),s.d(t,"Sc",(function(){return ht})),s.d(t,"Tc",(function(){return mt})),s.d(t,"Mb",(function(){return ft})),s.d(t,"ob",(function(){return _t})),s.d(t,"ic",(function(){return vt})),s.d(t,"gc",(function(){return gt})),s.d(t,"hc",(function(){return yt})),s.d(t,"zb",(function(){return bt})),s.d(t,"db",(function(){return kt})),s.d(t,"fc",(function(){return wt})),s.d(t,"dc",(function(){return Ct})),s.d(t,"ec",(function(){return St})),s.d(t,"xb",(function(){return Tt})),s.d(t,"bb",(function(){return xt})),s.d(t,"fe",(function(){return Et})),s.d(t,"xe",(function(){return Pt})),s.d(t,"P",(function(){return Ot})),s.d(t,"ac",(function(){return At})),s.d(t,"Yb",(function(){return jt})),s.d(t,"Zb",(function(){return Dt})),s.d(t,"cc",(function(){return Mt})),s.d(t,"r",(function(){return It})),s.d(t,"Sb",(function(){return $t})),s.d(t,"Rb",(function(){return Lt})),s.d(t,"wb",(function(){return Ft})),s.d(t,"Xd",(function(){return Nt})),s.d(t,"ge",(function(){return qt})),s.d(t,"Zd",(function(){return Rt})),s.d(t,"Gd",(function(){return Bt})),s.d(t,"sb",(function(){return Vt})),s.d(t,"V",(function(){return zt})),s.d(t,"he",(function(){return Ut})),s.d(t,"b",(function(){return Ht})),s.d(t,"Ne",(function(){return Gt})),s.d(t,"Fd",(function(){return Wt})),s.d(t,"t",(function(){return Yt})),s.d(t,"G",(function(){return Kt})),s.d(t,"U",(function(){return Qt})),s.d(t,"Mc",(function(){return Xt})),s.d(t,"Kc",(function(){return Jt})),s.d(t,"Lc",(function(){return Zt})),s.d(t,"Hc",(function(){return es})),s.d(t,"kc",(function(){return ts})),s.d(t,"Oc",(function(){return ss})),s.d(t,"Nc",(function(){return is})),s.d(t,"bc",(function(){return ns})),s.d(t,"Fe",(function(){return as})),s.d(t,"Wb",(function(){return os})),s.d(t,"Jb",(function(){return rs})),s.d(t,"Ib",(function(){return cs})),s.d(t,"Ab",(function(){return ls})),s.d(t,"nd",(function(){return ds})),s.d(t,"md",(function(){return us})),s.d(t,"ld",(function(){return ps})),s.d(t,"Yd",(function(){return hs})),s.d(t,"d",(function(){return ms})),s.d(t,"Pe",(function(){return fs})),s.d(t,"Jd",(function(){return _s})),s.d(t,"p",(function(){return vs})),s.d(t,"Ue",(function(){return gs})),s.d(t,"Pd",(function(){return ys})),s.d(t,"q",(function(){return bs})),s.d(t,"Ve",(function(){return ks})),s.d(t,"Rd",(function(){return ws})),s.d(t,"u",(function(){return Cs})),s.d(t,"Be",(function(){return Ss})),s.d(t,"ce",(function(){return Ts})),s.d(t,"Sd",(function(){return xs})),s.d(t,"ze",(function(){return Es})),s.d(t,"be",(function(){return Ps})),s.d(t,"Qd",(function(){return Os})),s.d(t,"ne",(function(){return As})),s.d(t,"vb",(function(){return js})),s.d(t,"ub",(function(){return Ds})),s.d(t,"tb",(function(){return Ms})),s.d(t,"Ae",(function(){return Is})),s.d(t,"ye",(function(){return $s})),s.d(t,"le",(function(){return Ls})),s.d(t,"X",(function(){return Fs})),s.d(t,"W",(function(){return Ns})),s.d(t,"ie",(function(){return qs})),s.d(t,"Q",(function(){return Rs})),s.d(t,"oe",(function(){return Bs})),s.d(t,"me",(function(){return Vs})),s.d(t,"Wd",(function(){return zs})),s.d(t,"ab",(function(){return Us})),s.d(t,"Z",(function(){return Hs})),s.d(t,"O",(function(){return Gs})),s.d(t,"I",(function(){return Ws})),s.d(t,"J",(function(){return Ys})),s.d(t,"cd",(function(){return Ks})),s.d(t,"dd",(function(){return Qs})),s.d(t,"bd",(function(){return Xs})),s.d(t,"fd",(function(){return Js})),s.d(t,"ed",(function(){return Zs})),s.d(t,"hf",(function(){return ei})),s.d(t,"jf",(function(){return ti})),s.d(t,"if",(function(){return si})),s.d(t,"ee",(function(){return ii})),s.d(t,"Ud",(function(){return ni})),s.d(t,"D",(function(){return ai})),s.d(t,"B",(function(){return oi})),s.d(t,"A",(function(){return ri})),s.d(t,"F",(function(){return ci})),s.d(t,"E",(function(){return li})),s.d(t,"z",(function(){return di})),s.d(t,"y",(function(){return ui})),s.d(t,"x",(function(){return pi})),s.d(t,"v",(function(){return hi})),s.d(t,"w",(function(){return mi})),s.d(t,"C",(function(){return fi})),s.d(t,"xc",(function(){return _i})),s.d(t,"vc",(function(){return vi})),s.d(t,"wc",(function(){return gi})),s.d(t,"Ac",(function(){return yi})),s.d(t,"yc",(function(){return bi})),s.d(t,"zc",(function(){return ki})),s.d(t,"Eb",(function(){return wi})),s.d(t,"Cb",(function(){return Ci})),s.d(t,"Db",(function(){return Si})),s.d(t,"ib",(function(){return Ti})),s.d(t,"gb",(function(){return xi})),s.d(t,"hb",(function(){return Ei})),s.d(t,"c",(function(){return Pi})),s.d(t,"Id",(function(){return Oi})),s.d(t,"L",(function(){return Ai})),s.d(t,"K",(function(){return ji})),s.d(t,"M",(function(){return Di})),s.d(t,"jc",(function(){return Mi})),s.d(t,"i",(function(){return Ii})),s.d(t,"hd",(function(){return $i})),s.d(t,"Hd",(function(){return Li})),s.d(t,"S",(function(){return Fi})),s.d(t,"lc",(function(){return Ni})),s.d(t,"mc",(function(){return qi})),s.d(t,"gd",(function(){return Ri})),s.d(t,"qd",(function(){return Bi})),s.d(t,"Vc",(function(){return Vi})),s.d(t,"Ic",(function(){return zi})),s.d(t,"Jc",(function(){return Ui})),s.d(t,"Xb",(function(){return Hi})),s.d(t,"R",(function(){return Gi})),s.d(t,"l",(function(){return Wi})),s.d(t,"e",(function(){return Yi})),s.d(t,"id",(function(){return Ki})),s.d(t,"jd",(function(){return Qi})),s.d(t,"kd",(function(){return Xi})),s.d(t,"we",(function(){return Ji})),s.d(t,"pe",(function(){return Zi})),s.d(t,"qe",(function(){return en})),s.d(t,"Vd",(function(){return tn})),s.d(t,"g",(function(){return sn})),s.d(t,"h",(function(){return nn})),s.d(t,"Ld",(function(){return an})),s.d(t,"ke",(function(){return on}));var i="TOGGLE_DARK_THEME",n="TOGGLE_SIDEBAR",a="TOGGLE_USER_MENU",o="SET_LAST_PRODUCTION_SCREEN",r="LOAD_PEOPLE_START",c="LOAD_PEOPLE_END",l="LOAD_PEOPLE_ERROR",d="SHOW_IMPORT_PEOPLE_MODAL",u="HIDE_IMPORT_PEOPLE_MODAL",p="PERSON_CSV_FILE_SELECTED",h="IMPORT_PEOPLE_START",m="IMPORT_PEOPLE_END",f="IMPORT_PEOPLE_ERROR",_="DELETE_PEOPLE_END",v="EDIT_PEOPLE_END",g="LOAD_PERSON_TASKS_END",y="LOAD_PERSON_DONE_TASKS_END",b="SET_PERSON_TASKS_SEARCH",k="SAVE_PERSON_TASKS_SEARCH_END",w="REMOVE_PERSON_TASKS_SEARCH_END",C="SET_TIME_SPENT",S="PEOPLE_TIMESHEET_LOADED",T="PERSON_LOAD_TIME_SPENTS_END",x="SET_PERSON_TASKS_SCROLL_POSITION",E="PEOPLE_SEARCH_CHANGE",P="SET_ORGANISATION",O="USER_SAVE_PROFILE_LOADING",A="USER_SAVE_PROFILE_ERROR",j="USER_SAVE_PROFILE_SUCCESS",D="CHANGE_AVATAR_FILE",M="UPLOAD_AVATAR_END",I="USER_CHANGE_PASSWORD_LOADING",$="USER_CHANGE_PASSWORD_ERROR",L="USER_CHANGE_PASSWORD_SUCCESS",F="USER_CHANGE_PASSWORD_UNVALID",N="USER_LOAD_TODOS_END",q="USER_LOAD_TODOS_START",R="USER_LOAD_TODOS_ERROR",B="USER_LOAD_DONE_TASKS_END",V="USER_LOAD_TIME_SPENTS_END",z="SET_TODOS_SEARCH",U="LOAD_USER_FILTERS_END",H="LOAD_USER_FILTERS_ERROR",G="UPDATE_USER_FILTER",W="SET_TODO_LIST_SCROLL_POSITION",Y="LOAD_TASK_END",K="NEW_TASK_COMMENT_END",Q="NEW_TASK_END",X="EDIT_TASK_END",J="EDIT_TASK_DATES",Z="LOAD_TASK_COMMENTS_END",ee="LOAD_TASK_ENTITY_PREVIEW_FILES_END",te="CREATE_TASKS_END",se="DELETE_TASK_END",ie="EDIT_COMMENT_END",ne="DELETE_COMMENT_END",ae="PIN_COMMENT",oe="ACK_COMMENT",re="PREVIEW_FILE_SELECTED",ce="ADD_PREVIEW_START",le="ADD_PREVIEW_END",de="DELETE_PREVIEW_END",ue="CHANGE_PREVIEW_END",pe="UPDATE_PREVIEW_ANNOTATION",he="ADD_SELECTED_TASK",me="ADD_SELECTED_TASKS",fe="REMOVE_SELECTED_TASK",_e="CLEAR_SELECTED_TASKS",ve="ASSIGN_TASKS",ge="UNASSIGN_TASKS",ye="SAVE_TASK_SEARCH_END",be="REMOVE_TASK_SEARCH_END",ke="UPDATE_COMMENT_CHECKLIST",we="SET_LAST_COMMENT_DRAFT",Ce="REMOVE_FIRST_PREVIEW_FILE_TO_UPLOAD",Se="UPDATE_REVISION_PREVIEW_POSITION",Te="LOAD_PRODUCTIONS_START",xe="LOAD_PRODUCTIONS_END",Ee="LOAD_PRODUCTIONS_ERROR",Pe="ADD_PRODUCTION",Oe="UPDATE_PRODUCTION",Ae="REMOVE_PRODUCTION",je="LOAD_OPEN_PRODUCTIONS_START",De="LOAD_OPEN_PRODUCTIONS_END",Me="LOAD_OPEN_PRODUCTIONS_ERROR",Ie="LOAD_PRODUCTION_STATUS_START",$e="LOAD_PRODUCTION_STATUS_END",Le="LOAD_PRODUCTION_STATUS_ERROR",Fe="EDIT_PRODUCTION_START",Ne="EDIT_PRODUCTION_END",qe="EDIT_PRODUCTION_ERROR",Re="DELETE_PRODUCTION_START",Be="DELETE_PRODUCTION_END",Ve="DELETE_PRODUCTION_ERROR",ze="SET_CURRENT_PRODUCTION",Ue="PRODUCTION_PICTURE_FILE_SELECTED",He="PRODUCTION_AVATAR_UPLOADED",Ge="TEAM_ADD_PERSON",We="TEAM_REMOVE_PERSON",Ye="PRODUCTION_ADD_ASSET_TYPE",Ke="PRODUCTION_REMOVE_ASSET_TYPE",Qe="PRODUCTION_ADD_TASK_TYPE",Xe="PRODUCTION_REMOVE_TASK_TYPE",Je="PRODUCTION_ADD_TASK_STATUS",Ze="PRODUCTION_REMOVE_TASK_STATUS",et="ADD_METADATA_DESCRIPTOR_END",tt="UPDATE_METADATA_DESCRIPTOR_END",st="DELETE_METADATA_DESCRIPTOR_END",it="LOAD_TASK_TYPES_START",nt="LOAD_TASK_TYPES_END",at="LOAD_TASK_TYPES_ERROR",ot="EDIT_TASK_TYPE_START",rt="EDIT_TASK_TYPE_END",ct="EDIT_TASK_TYPE_ERROR",lt="DELETE_TASK_TYPE_START",dt="DELETE_TASK_TYPE_END",ut="DELETE_TASK_TYPE_ERROR",pt="LOAD_TASK_STATUSES_START",ht="LOAD_TASK_STATUSES_END",mt="LOAD_TASK_STATUSES_ERROR",ft="EDIT_TASK_STATUS_END",_t="DELETE_TASK_STATUS_END",vt="LOAD_CUSTOM_ACTIONS_START",gt="LOAD_CUSTOM_ACTIONS_END",yt="LOAD_CUSTOM_ACTIONS_ERROR",bt="EDIT_CUSTOM_ACTION_END",kt="DELETE_CUSTOM_ACTION_END",wt="LOAD_ASSET_TYPES_START",Ct="LOAD_ASSET_TYPES_END",St="LOAD_ASSET_TYPES_ERROR",Tt="EDIT_ASSET_TYPE_END",xt="DELETE_ASSET_TYPE_END",Et="SET_ASSET_LIST_SCROLL_POSITION",Pt="SET_PRODUCTION_ASSET_TYPE_LIST_SCROLL_POSITION",Ot="CLEAR_ASSETS",At="LOAD_ASSETS_START",jt="LOAD_ASSETS_END",Dt="LOAD_ASSETS_ERROR",Mt="LOAD_ASSET_CAST_IN_END",It="ASSET_CSV_FILE_SELECTED",$t="IMPORT_ASSETS_START",Lt="IMPORT_ASSETS_END",Ft="EDIT_ASSET_END",Nt="RESTORE_ASSET_END",qt="SET_ASSET_SEARCH",Rt="SAVE_ASSET_SEARCH_END",Bt="REMOVE_ASSET_SEARCH_END",Vt="DISPLAY_MORE_ASSETS",zt="COMPUTE_ASSET_TYPE_STATS",Ut="SET_ASSET_TYPE_SEARCH",Ht="ADD_ASSET",Gt="UPDATE_ASSET",Wt="REMOVE_ASSET",Yt="CANCEL_ASSET",Kt="CHANGE_ASSET_SORT",Qt="CLEAR_SHOTS",Xt="LOAD_SHOTS_START",Jt="LOAD_SHOTS_END",Zt="LOAD_SHOTS_ERROR",es="LOAD_SEQUENCES_END",ts="LOAD_EPISODES_END",ss="LOAD_SHOT_END",is="LOAD_SHOT_CASTING_END",ns="LOAD_ASSET_CASTING_END",as="SHOT_CSV_FILE_SELECTED",os="IMPORT_SHOTS_END",rs="EDIT_SHOT_END",cs="EDIT_SEQUENCE_END",ls="EDIT_EPISODE_END",ds="NEW_SHOT_END",us="NEW_SEQUENCE_END",ps="NEW_EPISODE_END",hs="RESTORE_SHOT_END",ms="ADD_EPISODE",fs="UPDATE_EPISODE",_s="REMOVE_EPISODE",vs="ADD_SEQUENCE",gs="UPDATE_SEQUENCE",ys="REMOVE_SEQUENCE",bs="ADD_SHOT",ks="UPDATE_SHOT",ws="REMOVE_SHOT",Cs="CANCEL_SHOT",Ss="SET_SHOT_SEARCH",Ts="SAVE_SHOT_SEARCH_END",xs="REMOVE_SHOT_SEARCH_END",Es="SET_SEQUENCE_SEARCH",Ps="SAVE_SEQUENCE_SEARCH_END",Os="REMOVE_SEQUENCE_SEARCH_END",As="SET_EPISODE_SEARCH",js="DISPLAY_MORE_SHOTS",Ds="DISPLAY_MORE_SEQUENCES",Ms="DISPLAY_MORE_EPISODES",Is="SET_SHOT_LIST_SCROLL_POSITION",$s="SET_SEQUENCE_LIST_SCROLL_POSITION",Ls="SET_EPISODE_LIST_SCROLL_POSITION",Fs="COMPUTE_SEQUENCE_STATS",Ns="COMPUTE_EPISODE_STATS",qs="SET_CURRENT_EPISODE",Rs="CLEAR_EPISODES",Bs="SET_EPISODE_STATS",Vs="SET_EPISODE_RETAKE_STATS",zs="RESET_PRODUCTION_PATH",Us="DATA_LOADING_START",Hs="DATA_LOADING_END",Gs="CHANGE_SHOT_SORT",Ws="CHANGE_EMAIL",Ys="CHANGE_PASSWORD",Ks="LOGIN_RUN",Qs="LOGIN_SUCCESS",Xs="LOGIN_FAILURE",Js="LOGOUT_SUCCESS",Zs="LOGOUT_FAILURE",ei="USER_LOGIN",ti="USER_LOGOUT",si="USER_LOGIN_FAIL",ii="SAVE_TODO_SEARCH_END",ni="REMOVE_TODO_SEARCH_END",ai="CASTING_SET_SEQUENCE",oi="CASTING_SET_EPISODE",ri="CASTING_SET_CASTING",ci="CASTING_SET_SHOTS",li="CASTING_SET_SEQUENCES",di="CASTING_SET_ASSET_TYPES",ui="CASTING_SET_ASSET_TYPE",pi="CASTING_SET_ASSETS",hi="CASTING_ADD_TO_CASTING",mi="CASTING_REMOVE_FROM_CASTING",fi="CASTING_SET_LINK_LABEL",_i="LOAD_PLAYLISTS_START",vi="LOAD_PLAYLISTS_END",gi="LOAD_PLAYLISTS_ERROR",yi="LOAD_PLAYLIST_START",bi="LOAD_PLAYLIST_END",ki="LOAD_PLAYLIST_ERROR",wi="EDIT_PLAYLIST_START",Ci="EDIT_PLAYLIST_END",Si="EDIT_PLAYLIST_ERROR",Ti="DELETE_PLAYLIST_START",xi="DELETE_PLAYLIST_END",Ei="DELETE_PLAYLIST_ERROR",Pi="ADD_ENTITY_TO_PLAYLIST",Oi="REMOVE_ENTITY_FROM_PLAYLIST",Ai="CHANGE_PLAYLIST_PREVIEW",ji="CHANGE_PLAYLIST_ORDER",Di="CHANGE_PLAYLIST_TYPE",Mi="LOAD_ENTITY_PREVIEW_FILES_END",Ii="ADD_NEW_JOB",$i="MARK_JOB_AS_DONE",Li="REMOVE_BUILD_JOB",Fi="CLEAR_NOTIFICATIONS",Ni="LOAD_NOTIFICATIONS_END",qi="LOAD_NOTIFICATION_END",Ri="MARK_ALL_NOTIFICATIONS_AS_READ",Bi="NOTIFICATION_ADD_PREVIEW",Vi="LOAD_TASK_SUBSCRIBE_END",zi="LOAD_SEQUENCE_SUBSCRIBE_END",Ui="LOAD_SEQUENCE_SUBSCRIPTION_END",Hi="INCREMENT_NOTIFICATION_COUNTER",Gi="CLEAR_NEWS",Wi="ADD_PREVIOUS_NEWS",Yi="ADD_FIRST_NEWS",Ki="NEWS_ADD_PREVIEW",Qi="NEWS_SET_STATS",Xi="NEWS_SET_TOTAL",Ji="SET_PREVIEW",Zi="SET_IS_SHOW_ASSIGNATIONS",en="SET_IS_SHOW_INFOS",tn="RESET_ALL",sn="ADD_MILESTONE",nn="ADD_MILESTONES",an="REMOVE_MILESTONE",on="SET_CURRENT_SCHEDULE_ITEMS"},a015:function(e,t,s){"use strict";var i=s("d392"),n=s.n(i);n.a},a068:function(e,t,s){"use strict";var i=s("ac61"),n=s.n(i);n.a},a14f:function(e,t,s){},a161:function(e,t,s){},a1ea:function(e,t,s){},a309:function(e,t,s){"use strict";var i=s("585c"),n=s.n(i);n.a},a4d5:function(e,t,s){},a4e2:function(e,t,s){},a5fe:function(e,t,s){},a91d:function(e,t,s){},ab85:function(e,t,s){},ac61:function(e,t,s){},ad12:function(e,t,s){"use strict";var i=s("ab85"),n=s.n(i);n.a},ad6c:function(e,t,s){e.exports=s.p+"img/kitsu.b07d6464.png"},b11e:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"user-timesheet data-list"},[s("div",{staticClass:"flexrow timesheet-header"},[s("div",{staticClass:"flexrow-item current-date"},[s("datepicker",{attrs:{"wrapper-class":"datepicker","input-class":"date-field input",language:e.locale,"disabled-dates":e.disabledDates,"monday-first":!0,format:"yyyy-MM-dd"},model:{value:e.selectedDate,callback:function(t){e.selectedDate=t},expression:"selectedDate"}})],1),s("div",{staticClass:"flexrow time-spent-total"},[e._v(" - "+e._s(e.timeSpentTotal)+" "+e._s(e.$t("timesheets.hours"))+" ")])]),s("div",{directives:[{name:"scroll",rawName:"v-scroll",value:e.onBodyScroll,expression:"onBodyScroll"}],ref:"body",staticClass:"datatable-wrapper"},[s("table",{staticClass:"datatable"},[s("thead",{staticClass:"datatable-head"},[s("tr",[s("th",{ref:"th-prod",staticClass:"datatable-row-header datatable-row-header--nobd production",attrs:{scope:"col"}},[e._v(" "+e._s(e.$t("tasks.fields.production"))+" ")]),s("th",{ref:"th-type",staticClass:"type datatable-row-header datatable-row-header--nobd",style:{left:e.colTypePosX},attrs:{scope:"col"}},[e._v(" "+e._s(e.$t("tasks.fields.task_type"))+" ")]),s("th",{staticClass:"name datatable-row-header",style:{left:e.colNamePosX},attrs:{scope:"col"}},[e._v(" "+e._s(e.$t("tasks.fields.entity"))+" ")]),s("th",{staticClass:"time-spent",attrs:{scope:"col"}},[e._v(" "+e._s(e.$t("timesheets.time_spents"))+" ")])])]),e.tasks.length>0&&!e.isLoading?s("tbody",{staticClass:"datatable-body"},e._l(e.displayedTasks,(function(t,i){return s("tr",{key:t.id+"-"+i,staticClass:"datatable-row"},[s("th",{staticClass:"production datatable-row-header datatable-row-header--nobd",attrs:{scope:"row"}},[s("production-name-cell",{attrs:{entry:e.productionMap[t.project_id],"only-avatar":!0}})],1),s("task-type-cell",{staticClass:"type datatable-row-header datatable-row-header--nobd",style:{left:e.colTypePosX},attrs:{"production-id":t.project_id,"task-type":e.taskTypeMap[t.task_type_id]}}),s("th",{staticClass:"name datatable-row-header",style:{left:e.colNamePosX}},[s("router-link",{attrs:{to:e.entityPath(t)}},[e._v(" "+e._s(t.full_entity_name)+" ")])],1),s("time-slider-cell",{staticClass:"time-spent",attrs:{duration:e.timeSpentMap[t.id]?e.timeSpentMap[t.id].duration/60:0,"task-id":t.id},on:{change:e.onSliderChange}})],1)})),0):e._e(),e.isLoading||e.hideDone?e._e():s("tbody",{staticClass:"datatable-body"},[e.hideDone?e._e():s("tr",{staticClass:"datatable-type-header"},[s("th",{attrs:{colspan:"4",scope:"rowgroup"}},[s("div",{staticClass:"datatable-row-header"},[s("page-subtitle",{attrs:{text:e.$t("timesheets.done_tasks")}})],1)])]),e._l(e.doneTasks,(function(t,i){return s("tr",{key:t+"-"+i,staticClass:"datatable-row"},[s("th",{staticClass:"production datatable-row-header datatable-row-header--nobd",attrs:{scope:"row"}},[s("production-name-cell",{attrs:{entry:e.productionMap[t.project_id],"only-avatar":!0}})],1),s("task-type-cell",{staticClass:"type datatable-row-header datatable-row-header--nobd",style:{left:e.colTypePosX},attrs:{"production-id":t.project_id,"task-type":{id:t.task_type_id,name:t.task_type_name,color:t.task_type_color}}}),s("th",{staticClass:"name datatable-row-header",style:{left:e.colNamePosX}},[s("router-link",{attrs:{to:t.entity_path}},[e._v(" "+e._s(t.full_entity_name)+" ")])],1),s("time-slider-cell",{staticClass:"time-spent",attrs:{duration:e.timeSpentMap[t.id]?e.timeSpentMap[t.id].duration/60:0,"task-id":t.id},on:{change:e.onSliderChange}})],1)}))],2)])]),s("table-info",{attrs:{"is-loading":e.isLoading,"is-error":e.isError}}),e.isLoading?e._e():s("p",{staticClass:"has-text-centered footer-info"},[e._v(" "+e._s(e.tasks.length)+" "+e._s(e.$tc("tasks.tasks",e.tasks.length))+" ")])],1)},n=[],a=(s("fb6a"),s("b0c0"),s("a9e3"),s("5530")),o=s("2f62"),r=s("7f45"),c=s.n(r),l=s("fa33"),d=s("2430"),u=s("de26"),p=s("8751"),h=s("09a4"),m=s("58f5"),f=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("div",{staticClass:"flexrow"},[s("span",{staticClass:"value flexrow-item"},[e._v(" "+e._s(e.value)+" ")]),s("vue-slider",e._b({ref:"slider",staticClass:"flexrow-item slider",model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},"vue-slider",e.options,!1)),s("button",{staticClass:"button flexrow-item",on:{click:function(t){return e.setValue(1)}}},[e._v("1")]),s("button",{staticClass:"button flexrow-item",on:{click:function(t){return e.setValue(4)}}},[e._v("4")]),s("button",{staticClass:"button flexrow-item",on:{click:function(t){return e.setValue(e.organisation.hours_by_day||8)}}},[e._v(" "+e._s(e.organisation.hours_by_day||8)+" ")])],1)])},_=[],v=s("4971"),g=s.n(v),y=(s("24df"),{name:"time-slider-cell",data:function(){return{value:this.duration,options:{show:!0,width:400,min:0,max:10,interval:.5,lazy:!0,marks:!0,hideLabel:!0,piecewise:!0,tooltip:"focus",tooltipPlacement:"bottom",processStyle:{"background-color":"#8F91EB"},railStyle:{background:"#CCC"}}}},components:{VueSlider:g.a},props:{"task-id":{type:String,default:""},duration:{type:Number,default:0}},computed:Object(a["a"])({},Object(o["c"])(["organisation"])),methods:Object(a["a"])(Object(a["a"])({},Object(o["b"])([])),{},{setValue:function(e){this.value=e}}),watch:{value:function(){this.$emit("change",{taskId:this.taskId,duration:this.value})}}}),b=y,k=(s("1ce5"),s("2877")),w=Object(k["a"])(b,f,_,!1,null,"7dfc5216",null),C=w.exports,S=s("e60b"),T={name:"timesheet-list",components:{Datepicker:l["a"],ProductionNameCell:h["a"],PageSubtitle:p["a"],TableInfo:S["a"],TaskTypeCell:m["a"],TimeSliderCell:C},props:{tasks:{default:function(){return[]},type:Array},doneTasks:{default:function(){return[]},type:Array},isLoading:{default:!1,type:Boolean},isError:{default:!1,type:Boolean},done:{default:!1,type:Boolean},timeSpentMap:{default:function(){},type:Object},timeSpentTotal:{default:0,type:Number},hideDone:{default:!1,type:Boolean}},data:function(){return{disabledDates:{to:this.isCurrentUserArtist?c()().startOf("isoWeek").toDate():null,from:c()().toDate()},page:1,selectedDate:c()().toDate(),colTypePosX:"",colNamePosX:""}},mounted:function(){this.colTypePosX=this.$refs["th-prod"].offsetWidth+"px",this.colNamePosX=this.$refs["th-prod"].offsetWidth+this.$refs["th-type"].offsetWidth+"px"},computed:Object(a["a"])(Object(a["a"])({},Object(o["c"])(["isCurrentUserArtist","nbSelectedTasks","productionMap","taskTypeMap","user"])),{},{locale:function(){return"fr_FR"===this.user.locale?d["fr"]:d["en"]},displayedTasks:function(){return this.tasks.slice(0,this.page*(u["a"]/2))}}),methods:Object(a["a"])(Object(a["a"])({},Object(o["b"])([])),{},{onBodyScroll:function(e,t){var s=this.$refs.body.scrollHeight-this.$refs.body.offsetHeight;s<t.scrollTop+100&&this.page++},currentDate:function(){return c()().format("LL")},onSliderChange:function(e){this.$emit("time-spent-change",e)},entityPath:function(e){var t=e.sequence_name?"shot":"asset",s={name:t,params:{production_id:e.project_id}};return"asset"===t?s.params.asset_id=e.entity_id:s.params.shot_id=e.entity_id,e.episode_id&&(s.name="episode-".concat(t),s.params.episode_id=e.episode_id),s}}),watch:{selectedDate:function(){this.$emit("date-changed",this.selectedDate)}}},x=T,E=(s("9560"),Object(k["a"])(x,i,n,!1,null,"4cd57ece",null));t["a"]=E.exports},b16f:function(e,t,s){},b4e3:function(e,t,s){},b61f:function(e,t,s){},ba2b:function(e,t,s){"use strict";var i=s("b61f"),n=s.n(i);n.a},ba8a:function(e,t,s){},bb21:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.isPreview&&e.withLink?s("a",{staticClass:"thumbnail-wrapper",style:{width:e.emptyWidth+"px",height:e.emptyHeight+"px"},attrs:{href:e.originalPath,target:"_blank"}},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.thumbnailPath,expression:"thumbnailPath"}],key:e.thumbnailKey,staticClass:"thumbnail-picture",style:e.imgStyle})]):e.isPreview&&!e.withLink?s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.thumbnailPath,expression:"thumbnailPath"}],key:e.thumbnailKey,staticClass:"thumbnail-picture",staticStyle:{}}):s("span",{class:{"thumbnail-picture":!0,"thumbnail-empty":!0,square:e.square},style:{width:e.emptyWidth+"px",height:e.emptyHeight+"px"}})},n=[],a=(s("a9e3"),{name:"entity-thumbnail",props:{entity:{default:function(){},type:Object},square:{default:!1,type:Boolean},width:{default:null,type:Number},height:{default:null,type:Number},maxWidth:{default:null,type:Number},maxHeight:{default:null,type:Number},emptyHeight:{default:30,type:Number},emptyWidth:{default:50,type:Number},previewFileId:{default:null,type:String},withLink:{default:!0,type:Boolean}},computed:{originalPath:function(){return"/api/pictures/originals/preview-files/"+this.entity.preview_file_id+".png"},isPreview:function(){return this.entity.preview_file_id&&this.entity.preview_file_id.length>0},imgStyle:function(){var e={};return this.maxWidth?e["max-width"]=this.maxWidth+"px":this.width&&(e.width=this.width+"px"),this.maxHeight?e["max-height"]=this.maxHeight+"px":this.height&&(e.height=this.height+"px"),e},thumbnailPath:function(){var e=this.previewFileId||this.entity.preview_file_id;return this.square?"/api/pictures/thumbnails-square/preview-files/"+e+".png":"/api/pictures/thumbnails/preview-files/"+e+".png"},thumbnailKey:function(){var e=this.previewFileId||this.entity.preview_file_id;return"thumbnail-".concat(e)}}}),o=a,r=(s("2d24"),s("2877")),c=Object(r["a"])(o,i,n,!1,null,"024ea0ea",null);t["a"]=c.exports},bc80:function(e,t,s){},bc89:function(e,t,s){"use strict";var i=s("3151"),n=s.n(i);n.a},bcd2:function(e,t,s){"use strict";s.d(t,"d",(function(){return i})),s.d(t,"c",(function(){return n})),s.d(t,"b",(function(){return a})),s.d(t,"a",(function(){return o}));s("4d90");var i=function(e,t){var s=Math.round(1/t*1e3)/1e3,i=Math.round(e/s),n=i*s;return n=Math.round(1e3*n)/1e3,n},n=function(e,t,s){var i=25;return s&&s.fps&&(i=s.fps),t&&t.fps&&(i=t.fps),Math.round(e/i*1e3)/1e3},a=function(e){var t="".concat(Math.round(e%1*1e3)).padStart(3,"0");t="."+t;try{return new Date(1e3*e).toISOString().substr(14,5)+t}catch(s){return console.error(s),"00:00.000"}},o=function(e,t){var s=Math.ceil(e*t);return 0===s&&(s=1),"".concat(s).padStart(3,"0")}},be83:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.isWhite?i("div",{staticClass:"has-text-centered",style:e.sizeStyle},[i("img",{attrs:{src:s("c9e4")}})]):i("div",{staticClass:"has-text-centered",style:e.sizeStyle},[i("img",{attrs:{src:s("5c3d")}})])},n=[],a=(s("a9e3"),{name:"spinner",props:{isWhite:{type:Boolean,default:!1},size:{type:Number}},computed:{sizeStyle:function(){return{width:this.size?this.size+"px":"auto"}}}}),o=a,r=s("2877"),c=Object(r["a"])(o,i,n,!1,null,"3d0407a2",null);t["a"]=c.exports},be9d:function(e,t,s){},c20f:function(e,t,s){},c266:function(e,t,s){"use strict";var i=s("3a7d"),n=s.n(i);n.a},c31e:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{modal:!0,"is-active":e.active}},[s("div",{staticClass:"modal-background",on:{click:function(t){return e.$emit("cancel")}}}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box content"},[s("h1",{staticClass:"title"},[e._v(" "+e._s(e.$t("entities.build_filter.title"))+" ")]),s("combobox",{staticClass:"flexrow-item",attrs:{options:e.general.unionOptions,"locale-key-prefix":"entities.build_filter."},model:{value:e.union,callback:function(t){e.union=t},expression:"union"}}),e.isAssets?s("h3",{staticClass:"subtitle"},[e._v(" "+e._s(e.$t("entities.build_filter.asset_type"))+" ")]):e._e(),e.isAssets?s("div",{staticClass:"flexrow asset-type-filter"},[s("combobox",{staticClass:"flexrow-item",attrs:{options:e.general.operatorOptions,"locale-key-prefix":"entities.build_filter."},model:{value:e.assetTypeFilters.operator,callback:function(t){e.$set(e.assetTypeFilters,"operator",t)},expression:"assetTypeFilters.operator"}}),s("combobox",{staticClass:"flexrow-item",attrs:{options:e.assetTypeOptions},model:{value:e.assetTypeFilters.value,callback:function(t){e.$set(e.assetTypeFilters,"value",t)},expression:"assetTypeFilters.value"}})],1):e._e(),s("h3",{staticClass:"subtitle"},[e._v(" "+e._s(e.$t("entities.build_filter.status"))+" ")]),e._l(e.taskTypeFilters.values,(function(t,i){return s("div",{key:"task-type-"+i,staticClass:"flexrow task-type-filter"},[s("combobox-task-type",{staticClass:"flexrow-item",attrs:{"task-type-list":e.taskTypeList},model:{value:t.id,callback:function(s){e.$set(t,"id",s)},expression:"taskTypeFilter.id"}}),s("combobox",{staticClass:"flexrow-item",attrs:{options:e.general.taskTypeOperatorOptions,"locale-key-prefix":"entities.build_filter."},on:{input:function(s){return e.onTaskTypeOperatorChanged(t)}},model:{value:t.operator,callback:function(s){e.$set(t,"operator",s)},expression:"taskTypeFilter.operator"}}),s("div",{staticClass:"flexrow-item flexrow value-column"},[e._l(t.values,(function(i,n){return s("combobox-status",{key:"task-type-value-"+n,staticClass:"flexrow-item",attrs:{"task-status-list":e.productionTaskStatuses},model:{value:t.values[n],callback:function(s){e.$set(t.values,n,s)},expression:"taskTypeFilter.values[index]"}})})),"in"===t.operator?s("button-simple",{staticClass:"mt05",attrs:{icon:"plus"},on:{click:function(s){return e.addInTaskTypeFilter(t)}}}):e._e()],2),s("button-simple",{staticClass:"mt05",attrs:{icon:"minus"},on:{click:function(s){return e.removeTaskTypeFilter(t)}}})],1)})),s("div",{staticClass:"add-button"},[s("button-simple",{attrs:{icon:"plus"},on:{click:e.addTaskTypeFilter}})],1),e.descriptorOptions.length>0?s("div",[s("h3",{staticClass:"subtitle"},[e._v(" "+e._s(e.$t("entities.build_filter.descriptor"))+" ")]),e._l(e.metadataDescriptorFilters.values,(function(t,i){return s("div",{key:"desc-"+i,staticClass:"flexrow descriptor-filter"},[s("combobox",{staticClass:"flexrow-item",attrs:{options:e.descriptorOptions},on:{input:function(s){return e.onDescriptorChanged(t)}},model:{value:t.id,callback:function(s){e.$set(t,"id",s)},expression:"descriptorFilter.id"}}),s("combobox",{staticClass:"flexrow-item",attrs:{options:e.general.operatorOptions,"locale-key-prefix":"entities.build_filter."},model:{value:t.operator,callback:function(s){e.$set(t,"operator",s)},expression:"descriptorFilter.operator"}}),0===e.getDescriptor(t.id).choices.length?s("text-field",{staticClass:"flexrow-item",attrs:{"input-class":" thin"},model:{value:t.text,callback:function(s){e.$set(t,"text",s)},expression:"descriptorFilter.text"}}):s("combobox",{staticClass:"flexrow-item",attrs:{options:e.getDescriptorChoiceOptions(t.id)},model:{value:t.text,callback:function(s){e.$set(t,"text",s)},expression:"descriptorFilter.text"}}),s("button-simple",{attrs:{icon:"minus"},on:{click:function(s){return e.removeDescriptorFilter(t)}}})],1)})),s("div",{staticClass:"add-button"},[s("button-simple",{attrs:{icon:"plus"},on:{click:e.addDescriptorFilter}})],1)],2):e._e(),e.isCurrentUserVendor?e._e():s("h3",{staticClass:"subtitle"},[e._v(" "+e._s(e.$t("entities.build_filter.assignation"))+" ")]),e.isCurrentUserVendor?e._e():s("div",{staticClass:"flexrow"},[s("combobox",{staticClass:"flexrow-item",attrs:{options:e.assignation.options,"locale-key-prefix":"entities.build_filter."},model:{value:e.assignation.value,callback:function(t){e.$set(e.assignation,"value",t)},expression:"assignation.value"}}),["assigned","unassigned"].includes(e.assignation.value)?s("combobox-task-type",{staticClass:"flexrow-item",attrs:{"task-type-list":e.taskTypeList},model:{value:e.assignation.taskTypeId,callback:function(t){e.$set(e.assignation,"taskTypeId",t)},expression:"assignation.taskTypeId"}}):e._e(),["assignedto","-assignedto"].includes(e.assignation.value)?s("people-field",{staticClass:"flexrow-item",attrs:{people:e.team},model:{value:e.assignation.person,callback:function(t){e.$set(e.assignation,"person",t)},expression:"assignation.person"}}):e._e()],1),s("h3",{staticClass:"subtitle"},[e._v(" "+e._s(e.$t("entities.build_filter.thumbnail"))+" ")]),s("combobox",{attrs:{options:e.hasThumbnail.options,"locale-key-prefix":"entities.build_filter."},model:{value:e.hasThumbnail.value,callback:function(t){e.$set(e.hasThumbnail,"value",t)},expression:"hasThumbnail.value"}}),s("modal-footer",{attrs:{"error-text":e.$t("entities.thumbnails.error")},on:{confirm:e.applyFilter,cancel:function(t){return e.$emit("cancel")}}})],2)])])},n=[],a=(s("99af"),s("4de4"),s("7db0"),s("4160"),s("a15b"),s("d81d"),s("b0c0"),s("d3b7"),s("498a"),s("159b"),s("ddb0"),s("2909")),o=s("5530"),r=s("2f62"),c=s("d065"),l=s("ca76"),d=s("de40"),u=s("992f"),p=s("56a0"),h=s("e4fd"),m=s("d5c9"),f=s("9616"),_=s("7bf8"),v={name:"build-filter-modal",mixins:[c["a"]],components:{ButtonSimple:d["a"],Combobox:u["a"],ComboboxStatus:p["a"],ComboboxTaskType:h["a"],ModalFooter:m["a"],PeopleField:f["a"],TextField:_["a"]},props:{active:{type:Boolean,default:!1},entityType:{type:String,default:"asset"}},data:function(){return{assetTypeFilters:{operator:"=",value:""},assignation:{person:null,taskTypeId:"",value:"nofilter",options:[{label:"no_filter",value:"nofilter"},{label:"assigned_to",value:"assignedto"},{label:"not_assigned_to",value:"-assignedto"},{label:"assignation_exists_for",value:"assigned"},{label:"no_assignation_for",value:"unassigned"}]},general:{operatorOptions:[{label:"equal",value:"="},{label:"not_equal",value:"=-"}],taskTypeOperatorOptions:[{label:"equal",value:"="},{label:"not_equal",value:"=-"},{label:"in",value:"in"}],unionOptions:[{label:"union_and",value:"and"},{label:"union_or",value:"or"}]},hasThumbnail:{value:"nofilter",options:[{label:"no_filter",value:"nofilter"},{label:"with_thumbnail",value:"withthumbnail"},{label:"without_thumbnail",value:"-withthumbnail"}]},metadataDescriptorFilters:{values:[]},taskTypeFilters:{values:[]},union:"and"}},mounted:function(){this.reset(),this.setFiltersFromCurrentQuery()},computed:Object(o["a"])(Object(o["a"])({},Object(r["c"])(["assetMetadataDescriptors","assetTypeMap","assetSearchText","assetValidationColumns","currentProduction","isCurrentUserVendor","people","personMap","productionAssetTypes","productionTaskStatuses","productionTaskTypes","shotMetadataDescriptors","shotSearchText","shotValidationColumns","taskTypeMap","taskStatusMap"])),{},{isAssets:function(){return"asset"===this.entityType},assetTypeOptions:function(){return[{label:this.$t("entities.build_filter.all_types"),value:"-"}].concat(Object(a["a"])(this.productionAssetTypes.map((function(e){return{label:e.name,value:e.id}}))))},taskTypeList:function(){var e=this;return this.isAssets?this.assetValidationColumns.map((function(t){return e.taskTypeMap[t]})):this.shotValidationColumns.map((function(t){return e.taskTypeMap[t]}))},team:function(){var e=this;return this.currentProduction.team.map((function(t){return e.personMap[t]}))},descriptorOptions:function(){return this.metadataDescriptors.map((function(e){return{label:e.name,value:e.id}}))},metadataDescriptors:function(){var e=this.shotMetadataDescriptors;return this.isAssets&&(e=this.assetMetadataDescriptors),e}}),methods:Object(o["a"])(Object(o["a"])({},Object(r["b"])([])),{},{applyFilter:function(){var e=this.buildFilter();this.$emit("confirm",e)},buildFilter:function(){var e="";return e=this.applyAssetTypeChoice(e),e=this.applyTaskTypeChoice(e),e=this.applyDescriptorChoice(e),e=this.applyAssignationChoice(e),e=this.applyThumbnailChoice(e),e=this.applyUnionChoice(e),e.trim()},applyAssetTypeChoice:function(e){var t=this.assetTypeFilters.value;if(t&&"-"!==t){var s="=[";"=-"===this.assetTypeFilters.operator&&(s="=[-");var i=this.assetTypeMap[t];e+=" type".concat(s).concat(i.name,"]")}return e},applyTaskTypeChoice:function(e){var t=this;return this.taskTypeFilters.values.forEach((function(s){var i="=[";"=-"===s.operator&&(i="=[-");var n=t.getTaskType(s.id),a=s.values.map((function(e){return t.taskStatusMap[e].short_name})).join(",");e+=" [".concat(n.name,"]").concat(i).concat(a,"]")})),e},applyDescriptorChoice:function(e){var t=this;return this.metadataDescriptorFilters.values.forEach((function(s){var i=s.operator,n=t.getDescriptor(s.id);e+=" [".concat(n.name,"]").concat(i).concat(s.text)})),e},applyAssignationChoice:function(e){if("nofilter"!==this.assignation.value)if(this.assignation.person){var t=this.assignation.person.name;"-assignedto"===this.assignation.value&&(t="-".concat(t)),e+=" assignedto=[".concat(t,"]")}else if(this.assignation.taskTypeId){var s=this.taskTypeMap[this.assignation.taskTypeId],i="assigned"===this.assignation.value?"assigned":"unassigned";e+=" [".concat(s.name,"]=").concat(i)}return e},applyThumbnailChoice:function(e){return"nofilter"!==this.hasThumbnail.value&&(e+=" ".concat(this.hasThumbnail.value)),e},applyUnionChoice:function(e){return"or"===this.union&&(e=" +(".concat(e.trim(),")")),e},addTaskTypeFilter:function(){var e={id:this.taskTypeList[0].id,operator:"=",values:[this.productionTaskStatuses[0].id]};return this.taskTypeFilters.values.push(e),e},addInTaskTypeFilter:function(e){e.values.push(this.productionTaskStatuses[0].id)},removeTaskTypeFilter:function(e){this.taskTypeFilters.values=this.taskTypeFilters.values.filter((function(t){return t!==e}))},getTaskType:function(e){return this.taskTypeMap[e]},onDescriptorChanged:function(e){var t=this.getDescriptor(e.id);t.choices.length>0?e.text=t.choices[0]:e.text=""},addDescriptorFilter:function(){var e=this.getDescriptor(this.descriptorOptions[0].value),t={id:this.descriptorOptions[0].value,operator:"=",text:e.choices.length>0?e.choices[0]:""};return this.metadataDescriptorFilters.values.push(t),t},removeDescriptorFilter:function(e){this.metadataDescriptorFilters.values=this.metadataDescriptorFilters.values.filter((function(t){return t!==e}))},getDescriptor:function(e){return this.metadataDescriptors.find((function(t){return t.id===e}))},getDescriptorChoiceOptions:function(e){return this.getDescriptor(e).choices.map((function(e){return{label:e,value:e}}))},setFiltersFromCurrentQuery:function(){var e=this,t=this.isAssets?this.assetSearchText:this.shotSearchText;if(t){var s=Object(l["d"])({entryIndex:[],assetTypes:this.productionAssetTypes,taskTypes:this.productionTaskTypes,taskStatuses:this.productionTaskStatuses,descriptors:this.metadataDescriptors,persons:this.people,query:t});s.forEach((function(t){"assettype"===t.type?e.setFiltersFromAssetTypeQuery(t):"status"===t.type?e.setFiltersFromStatusQuery(t):"descriptor"===t.type?e.setFiltersFromDescriptorQuery(t):"assignation"===t.type?e.setFiltersFromAssignationQuery(t):"assignedto"===t.type?e.setFiltersFromAssignedToQuery(t):"thumbnail"===t.type&&e.setFiltersFromThumbnailQuery(t)})),s.union&&this.setUnion()}},setFiltersFromAssetTypeQuery:function(e){this.assetTypeFilters.operator=e.excluding?"=-":"=",this.assetTypeFilters.value=e.assetType.id},setFiltersFromStatusQuery:function(e){var t="=";e.taskStatuses.length>1?t="in":e.excluding&&(t="="),this.taskTypeFilters.values.push({id:e.taskType.id,operator:t,values:e.taskStatuses})},setFiltersFromDescriptorQuery:function(e){this.metadataDescriptorFilters.values.push({id:e.descriptor.id,operator:e.excluding?"=-":"=",text:e.value})},setFiltersFromAssignationQuery:function(e){e.assigned?this.assignation.value="assigned":this.assignation.value="unassigned",this.assignation.taskTypeId=e.taskType.id},setFiltersFromAssignedToQuery:function(e){this.assignation.value=e.excluding?"-assignedto":"assignedto",this.assignation.person=this.people.find((function(t){return t.id===e.personId}))},setFiltersFromThumbnailQuery:function(e){e.excluding?this.hasThumbnail.value="-withthumbnail":this.hasThumbnail.value="withthumbnail"},setUnion:function(){this.union="or"},onTaskTypeOperatorChanged:function(e){"in"!==e.operator&&(e.values=[e.values[0]])},reset:function(){this.assignation.value="nofilter",this.assignation.person=null,this.assignation.taskType="",this.hasThumbnail.value="nofilter",this.metadataDescriptorFilters.values=[],this.taskTypeFilters.values=[],this.assetTypeFilters.operator="=",this.assetTypeFilters.value="-"}}),watch:{active:function(){this.active&&(this.reset(),this.assignation.taskTypeId=this.taskTypeList.length>0?this.taskTypeList[0].id:"",this.setFiltersFromCurrentQuery())}}},g=v,y=(s("89e1"),s("2877")),b=Object(y["a"])(g,i,n,!1,null,"6b0e690e",null);t["a"]=b.exports},c802:function(e,t,s){},c864:function(e,t,s){"use strict";var i=s("1211"),n=s.n(i);n.a},c8f4:function(e,t,s){"use strict";var i=s("eaa7"),n=s.n(i);n.a},c9e4:function(e,t,s){e.exports=s.p+"img/spinner-white.da0c6413.svg"},ca1b:function(e,t,s){"use strict";var i=s("d3c5"),n=s.n(i);n.a},ca76:function(e,t,s){"use strict";s.d(t,"a",(function(){return c})),s.d(t,"e",(function(){return d})),s.d(t,"c",(function(){return u})),s.d(t,"d",(function(){return p})),s.d(t,"f",(function(){return f})),s.d(t,"b",(function(){return y}));s("99af"),s("4de4"),s("7db0"),s("4160"),s("caad"),s("c975"),s("d81d"),s("b0c0"),s("4ec9"),s("d3b7"),s("ac1f"),s("2532"),s("3ca3"),s("466d"),s("5319"),s("1276"),s("2ca0"),s("159b"),s("ddb0");var i=s("2909"),n=s("2017"),a=/\+\(.*\)/,o=/\[([^[]*)\]=\[([^[]*)\]|([^ ]*)=\[([^[]*)\]|([^ ]*)=([^ ]*)|\[([^[]*)\]=([^ ]*)/g,r=/type=\[([^[]*)\]|type=([^ ]*)|type=([^ ]*)/g,c=function(e,t,s){return t&&t.length>0?e.filter((function(e){var i=null;return t.forEach((function(n){return!(!1===i&&!t.union)&&(!(!0!==i||!t.union)||void(i=l[n.type](e,n,s)))})),i})):e},l={assettype:function(e,t,s){var i=!0;return i=t.assetType&&e.asset_type_id===t.assetType.id,t.excluding&&(i=!i),i},assignation:function(e,t,s){var i=s[e.validations[t.taskType.id]];return t.assigned?i&&i.assignees&&i.assignees.length>0:!i||i&&i.assignees&&0===i.assignees.length},assignedto:function(e,t,s){var i=!1;return e.tasks&&e.tasks.forEach((function(e){var n=s[e];i=i||n.assignees.includes(t.personId)})),t.excluding&&(i=!i),i},descriptor:function(e,t,s){var i=!0;if(e.data&&e.data[t.descriptor.field_name]&&t.value){var n=e.data[t.descriptor.field_name];n=n.toLowerCase(),i=n.indexOf(t.value.toLowerCase())>=0}else i=!1;return t.excluding&&(i=!i),i},exclusion:function(e,t,s){return!t.excludedIds[e.id]},status:function(e,t,s){var i=s[e.validations[t.taskType.id]],n=!0;return n=i&&t.taskStatuses.includes(i.task_status_id),t.excluding&&(n=!n),n},thumbnail:function(e,t,s){var i=""!==e.preview_file_id&&void 0!==e.preview_file_id&&null!==e.preview_file_id;return t.excluding?!i:i}},d=function(e){return e?e.replace(a,"").replace(o,"").split(" ").filter((function(e){return e.length>0&&"-"!==e[0]&&"withthumbnail"!==e})):[]},u=function(e){return e.replace(a,"").replace(o,"").split(" ").filter((function(e){return e.length>0&&"-"===e[0]&&"-withthumbnail"!==e})).map((function(e){return e.substring(1)}))},p=function(e){var t=e.entryIndex,s=e.assetTypes,n=e.taskTypes,a=e.taskStatuses,o=e.descriptors,r=e.persons,c=e.query,l=h(c);c=l.query;var d=[].concat(Object(i["a"])(v(s,c)),Object(i["a"])(g(n,a,c)),Object(i["a"])(y(o,c)),Object(i["a"])(b(r,c)),Object(i["a"])(k(c)||[]),Object(i["a"])(m(t,c)));return d.union=l.union,d},h=function(e){var t=e.match(a),s=!1;return t&&(s=!0,e=t[0].substring(2,t[0].length-1)),{query:e,union:s}},m=function(e,t){var s=[],i=u(t)||[];return i.forEach((function(t){var i={},a=Object(n["j"])(e,[t])||[];a.forEach((function(e){i[e.id]=!0})),s.push({type:"exclusion",excludedIds:i})})),s},f=function(e,t){var s=[],i=u(t)||[];return i.forEach((function(t){var i={},a=Object(n["j"])(e,[t])||[];a.forEach((function(e){i[e.id]=!0})),s.push({type:"exclusion",excludedIds:i})})),s},_=function(e){return"["===e[0]?e.substring(1,e.length-1):e},v=function(e,t){if(!t)return[];var s=[],i=t.match(r);return i&&i.forEach((function(t){var i=t.split("="),n=_(i[1]),a=n.startsWith("-");a&&(n=n.substring(1));var o=e.find((function(e){return e.name===n}));s.push({assetType:o,excluding:a,type:"assettype"})})),s},g=function(e,t,s){if(!s)return[];var i=[],a=s.match(o);if(a){var r=Object(n["i"])(e),c=Object(n["h"])(t);a.forEach((function(e){var t=e.split("="),s=_(t[1]),n=s.startsWith("-");n&&(s=s.substring(1));var a=_(t[0]),o=r[a.toLowerCase()];if(o)if("unassigned"===s)i.push({taskType:o[0],assigned:!1,type:"assignation"});else if("assigned"===s)i.push({taskType:o[0],assigned:!0,type:"assignation"});else if(s){var l=s.split(",").map((function(e){return e.toLowerCase()})).filter((function(e){return c[e]})).map((function(e){return c[e].id}));l.length>0&&i.push({taskType:o[0],taskStatuses:l,type:"status",excluding:n})}}))}return i},y=function(e,t){if(!t)return[];var s=[],i=t.match(o);if(i){var a=Object(n["c"])(e,!1);i.forEach((function(e){var t=e.split("="),i=t[1],n=t[0];"["===n[0]&&(n=n.substring(1,n.length-1));var o=a[n.toLowerCase()],r=i.startsWith("-");r&&(i=i.substring(1)),o&&s.push({descriptor:o[0],value:i,type:"descriptor",excluding:r})}))}return s},b=function(e,t){if(!t)return[];var s=[],i=t.match(o);return i&&i.forEach((function(t){var i=new Map;e.filter((function(e){return e.active})).forEach((function(e){var t=e.name.toLowerCase();i.set(t,e)}));var n=t.split("=");if("assignedto"===n[0]){var a=n[1];"["===a[0]&&(a=a.substring(1,a.length-1));var o=a.startsWith("-");o&&(a=a.substring(1));var r=i.get(a.toLowerCase());r&&s.push({personId:r.id,value:a,type:"assignedto",excluding:o})}})),s},k=function(e){var t=[];return e.indexOf("-withthumbnail")>-1?t.push({type:"thumbnail",excluding:!0}):e.indexOf("withthumbnail")>-1&&t.push({type:"thumbnail",excluding:!1}),t}},cb0e:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",{ref:"cell",class:{validation:e.selectable&&!e.isCurrentUserClient,selected:e.selectable&e.selected},style:{"border-left":e.isBorder?"1px solid "+e.column.color:"none",background:e.isBorder?e.getBackground():"transparent"},on:{mouseover:e.onMouseOver,mouseout:e.onMouseOut,click:e.onClick}},[e.minimized?s("div",{staticClass:"wrapper"},[s("span",{staticClass:"tag",style:{background:e.backgroundColor,color:e.color}})]):s("div",{staticClass:"wrapper"},[e.task?s("span",[s("span",{staticClass:"tag",style:{background:e.backgroundColor,color:e.color},attrs:{title:e.taskStatus.name}},[e._v(" "+e._s(e.taskStatus.short_name)+" ")]),e.isCurrentUserClient?e._e():s("span",{staticClass:"priority"},[e._v(" "+e._s(e.priority)+" ")])]):e._e(),e._l(e.assignees,(function(t){return e.isAssignees&&!e.isCurrentUserClient?s("span",{key:"avatar-"+t,staticClass:"avatar has-text-centered",style:{background:e.personMap[t].color,width:"20px",height:"20px","font-size":"10px"},attrs:{title:e.personMap[t].full_name}},[e.personMap[t].has_avatar?s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.avatarPath(t),expression:"avatarPath(personId)"}],key:e.avatarKey(t),attrs:{width:"20",height:"20"}}):s("span",[e._v(" "+e._s(e.personMap[t].initials)+" ")])]):e._e()}))],2)])},n=[],a=(s("99af"),s("c975"),s("a9e3"),s("5530")),o=s("2f62"),r=s("7930"),c={name:"validation-cell",data:function(){return{task:null}},components:{},props:{column:{default:null,type:Object},entity:{default:null,type:Object},taskTest:{default:null,type:Object},isBorder:{default:!0,type:Boolean},isStatic:{default:!1,type:Boolean},isAssignees:{default:!0,type:Boolean},minimized:{default:!1,type:Boolean},selectable:{default:!0,type:Boolean},clickable:{default:!0,type:Boolean},selected:{default:!1,type:Boolean},rowX:{default:0,type:Number},columnY:{default:0,type:Number}},mounted:function(){this.taskTest?this.task=this.taskTest:this.entity&&(this.task=this.taskMap[this.entity.validations[this.column.id]])},computed:Object(a["a"])(Object(a["a"])({},Object(o["c"])(["isDarkTheme","isCurrentUserClient","personMap","taskMap","taskStatusMap"])),{},{assignees:function(){return this.task?this.task.assignees:[]},backgroundColor:function(){return"todo"!==this.taskStatus.short_name||this.isDarkTheme?"todo"===this.taskStatus.short_name&&this.isDarkTheme?"#5F626A":this.isDarkTheme?r["a"].darkenColor(this.taskStatus.color):this.taskStatus.color:"#ECECEC"},color:function(){return"todo"!==this.taskStatus.short_name||this.isDarkTheme?"white":"#333"},priority:function(){return this.task.priority&&!this.taskStatus.is_done?3===this.task.priority?"!!!":2===this.task.priority?"!!":1===this.task.priority?"!":"":""},taskStatus:function(){if(this.task){var e=this.task.task_status_id;return this.taskStatusMap?this.taskStatusMap[e]:{}}return{}}}),methods:Object(a["a"])(Object(a["a"])({},Object(o["b"])([])),{},{getBackground:function(){if(this.isBorder){var e=this.isDarkTheme?.15:.08;return r["a"].hexToRGBa(this.column.color,e)}return"transparent"},onMouseOver:function(e){if(this.selectable&&!this.selected){var t=this.isDarkTheme?"#6E70CA":"#CFD1FF";this.changeStyle(t)}},onMouseOut:function(e){if(this.selectable&&!this.selected){var t=this.getBackground();this.changeStyle(t)}},onClick:function(e){this.clickable&&this.select(e)},changeStyle:function(e){var t=this.isBorder?"1px solid "+this.column.color:"none";this.$refs.cell.style="border-left: ".concat(t,"; background: ").concat(e,";")},select:function(e){var t=!1!==e.isUserClick;this.selectable&&!this.isCurrentUserClient&&(this.$refs.cell&&this.$refs.cell.className.indexOf("selected")<0?this.$emit("select",{entity:this.entity,column:this.column,task:this.task,x:this.rowX,y:this.columnY,isCtrlKey:e.ctrlKey||e.metaKey,isShiftKey:e.shiftKey,isUserClick:t}):this.$emit("unselect",{entity:this.entity,column:this.column,task:this.task,x:this.rowX,y:this.columnY,isCtrlKey:e.ctrlKey||e.metaKey,isShiftKey:e.shiftKey,isUserClick:t}))},avatarPath:function(e){var t=this.personMap[e];return t?t.avatarPath+"?unique="+t.uniqueHash:""},avatarKey:function(e){var t=this.personMap[e];return t?t.id+"-"+t.uniqueHash:""}}),watch:{selected:function(){if(this.selected){var e=this.isDarkTheme?"#5E60BA":"#BFC1FF";this.changeStyle(e)}else{var t=this.getBackground(this.column.color);this.changeStyle(t)}},taskTest:function(){this.taskTest?this.task=this.taskTest:this.entity&&(this.task=this.taskMap[this.entity.validations[this.column.id]])}}},l=c,d=(s("315e"),s("2877")),u=Object(d["a"])(l,i,n,!1,null,"639cf6b8",null);t["a"]=u.exports},cb88:function(e,t,s){e.exports=s.p+"img/studio_collaboration.1e49fa73.png"},cc0e:function(e,t,s){},cc90:function(e,t,s){},cd3a:function(e,t,s){"use strict";var i=s("8108"),n=s.n(i);n.a},ce6b:function(e,t,s){"use strict";s("99af"),s("b0c0"),s("d3b7"),s("498a");var i=s("edbf");t["a"]={getOrganisation:function(){return i["a"].pget("/api/data/organisations").then((function(e){var t={name:"Kitsu",hours_by_day:8,has_avatar:!1,use_original_file_name:!1,chat_token_slack:""};e.length>0&&(t=e[0]),t.use_original_file_name=t.use_original_file_name?"true":"false",Promise.resolve(t)}))},updateOrganisation:function(e){var t={name:e.name,hours_by_day:e.hours_by_day,use_original_file_name:"true"===e.use_original_file_name,chat_token_slack:e.chat_token_slack};return i["a"].pput("/api/data/organisations/".concat(e.id),t)},postOrganisationLogo:function(e,t){return i["a"].ppost("/api/pictures/thumbnails/organisations/".concat(e),t)},getPeople:function(e){i["a"].get("/api/data/persons",e)},getPerson:function(e,t){i["a"].get("/api/data/persons/".concat(e),t)},createPerson:function(e){var t={first_name:e.first_name,last_name:e.last_name,email:e.email.trim(),phone:e.phone,role:e.role,active:e.active};return i["a"].ppost("/api/data/persons/new",t)},invitePerson:function(e){return i["a"].pget("/api/actions/persons/".concat(e.id,"/invite"))},updatePerson:function(e){var t={first_name:e.first_name,last_name:e.last_name,email:e.email.trim(),phone:e.phone,timezone:e.timezone,locale:e.locale,role:e.role,active:e.active,notifications_enabled:"true"===e.notifications_enabled,notifications_slack_enabled:"true"===e.notifications_slack_enabled,notifications_slack_userid:e.notifications_slack_userid};return i["a"].pput("/api/data/persons/".concat(e.id),t)},deletePerson:function(e,t){return i["a"].pdel("/api/data/persons/".concat(e.id,"?force=true"))},postCsv:function(e,t){var s="/api/import/csv/persons";return t&&(s+="?update=true"),i["a"].ppost(s,e)},postAvatar:function(e,t,s){i["a"].post("/api/pictures/thumbnails/persons/".concat(e),t,s)},changePassword:function(e,t){var s={old_password:e.oldPassword,password:e.password,password_2:e.password2};i["a"].post("/api/auth/change-password",s,t)},loadTodos:function(e){i["a"].get("/api/data/user/tasks",e)},loadDone:function(e){i["a"].get("/api/data/user/done-tasks",e)},loadTimeSpents:function(e,t){i["a"].get("/api/data/user/time-spents/".concat(e),t)},getPersonTasks:function(e,t){i["a"].get("/api/data/persons/".concat(e,"/tasks"),t)},getPersonDoneTasks:function(e,t){i["a"].get("/api/data/persons/".concat(e,"/done-tasks"),t)},getUserSearchFilters:function(e){i["a"].get("/api/data/user/filters",e)},updateFilter:function(e){var t={name:e.name,search_query:e.search_query};return i["a"].pput("/api/data/user/filters/".concat(e.id),t)},createFilter:function(e,t,s,n,a,o){var r={list_type:e,name:t,query:s,entity_type:a,project_id:n};i["a"].post("/api/data/user/filters",r,o)},removeFilter:function(e,t){i["a"].del("/api/data/user/filters/".concat(e.id),t)},getTimeSpents:function(e,t,s){i["a"].get("/api/data/persons/".concat(e,"/time-spents/").concat(t),s)},setTimeSpent:function(e,t,s,n,a){var o={duration:60*n};i["a"].post("/api/actions/tasks/".concat(e,"/time-spents/").concat(s,"/persons/").concat(t),o,a)},getDayTable:function(e,t){return i["a"].pget("/api/data/persons/time-spents/day-table/".concat(e,"/").concat(t))},getWeekTable:function(e){return i["a"].pget("/api/data/persons/time-spents/week-table/".concat(e))},getMonthTable:function(e){return i["a"].pget("/api/data/persons/time-spents/month-table/".concat(e))},getYearTable:function(e){return i["a"].pget("/api/data/persons/time-spents/year-table")},getAggregatedPersonTimeSpents:function(e,t,s,n,a,o){var r="/api/data/persons/".concat(e,"/time-spents/");return r+="year"===t?"year/".concat(s):"month"===t?"month/".concat(s,"/").concat(n):"week"===t?"week/".concat(s,"/").concat(a):"day/".concat(s,"/").concat(n,"/").concat(o),i["a"].pget(r)},getContext:function(){return i["a"].pget("/api/data/user/context")}}},ce80:function(e,t,s){e.exports=s.p+"img/validated.a1d2a358.png"},ceb9:function(e,t,s){"use strict";var i=s("7e8e"),n=s.n(i);n.a},d065:function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var i={beforeDestroy:function(){window.removeEventListener("keydown",this.onKeyDown)},computed:{},methods:{onKeyDown:function(e){"Escape"===e.key&&this.$emit("cancel")}},watch:{active:function(){this.active?window.addEventListener("keydown",this.onKeyDown,!1):window.removeEventListener("keydown",this.onKeyDown)}}}},d228:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("button",{staticClass:"button",attrs:{title:e.buttonTitle},on:{click:function(t){return e.$emit("click")}}},[e.subscribed?s("eye-icon",{staticClass:"icon is-small only-icon"}):s("eye-off-icon",{staticClass:"icon is-small only-icon"})],1)},n=[],a=s("0a35"),o={name:"subscribe-button",components:{EyeIcon:a["q"],EyeOffIcon:a["r"]},props:{subscribed:{default:!1,type:Boolean}},computed:{buttonTitle:function(){return this.subscribed?this.$t("tasks.unsubscribe_notifications"):this.$t("tasks.subscribe_notifications")}}},r=o,c=(s("5bf3"),s("2877")),l=Object(c["a"])(r,i,n,!1,null,"76d14e74",null);t["a"]=l.exports},d265:function(e,t,s){"use strict";var i=s("e1cf"),n=s.n(i);n.a},d2ed:function(e,t,s){},d359:function(e,t,s){"use strict";s("13d5"),s("d3b7");t["a"]={runPromiseMapAsSeries:function(e,t){return e.reduce((function(e,s){return e.then((function(){return t(s)}))}),Promise.resolve())}}},d37c:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{field:e.withMargin}},[e.label?s("label",{staticClass:"label"},[e._v(e._s(e.label))]):e._e(),s("p",{staticClass:"control flexrow"},[s("datepicker",{attrs:{"wrapper-class":"datepicker","input-class":{"date-input":!0,input:!0,short:e.shortDate},language:e.locale,"disabled-dates":e.disabledDates,"monday-first":!0,format:"yyyy-MM-dd"},model:{value:e.localValue,callback:function(t){e.localValue=t},expression:"localValue"}}),s("span",{directives:[{name:"show",rawName:"v-show",value:e.localValue,expression:"localValue"}],staticClass:"clear-button",on:{click:e.clearValue}},[e._v(" + ")])],1)])},n=[],a=s("5530"),o=s("2f62"),r=s("2430"),c=s("fa33"),l={name:"text-field",components:{Datepicker:c["a"]},props:{disabledDates:{default:function(){},type:Object},label:{default:"",type:String},shortDate:{default:!0,type:Boolean},value:{default:new Date,type:Date},withMargin:{default:!0,type:Boolean}},data:function(){return{localValue:null}},mounted:function(){this.localValue=this.value},computed:Object(a["a"])(Object(a["a"])({},Object(o["c"])(["user"])),{},{locale:function(){return"fr_FR"===this.user.locale?r["fr"]:r["en"]}}),methods:Object(a["a"])(Object(a["a"])({},Object(o["b"])([])),{},{clearValue:function(){this.localValue=null}}),watch:{localValue:function(){this.$emit("input",this.localValue)}}},d=l,u=(s("9989"),s("2877")),p=Object(u["a"])(d,i,n,!1,null,"4afaedae",null);t["a"]=p.exports},d392:function(e,t,s){},d3c5:function(e,t,s){},d49e:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{modal:!0,"is-active":e.active}},[s("div",{staticClass:"modal-background",on:{click:function(t){return e.$emit("cancel")}}}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box"},[e.isEditing?s("h1",{staticClass:"title"},[e._v(" "+e._s(e.$t("playlists.edit_title"))+" ")]):s("h1",{staticClass:"title"},[e._v(" "+e._s(e.$t("playlists.create_title"))+" ")]),s("form",{on:{submit:function(e){e.preventDefault()}}},[s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"nameField",attrs:{label:e.$t("playlists.fields.name")},on:{enter:e.runConfirmation},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),s("combobox",{attrs:{label:e.$t("playlists.fields.for_client"),options:e.forClientOptions},model:{value:e.forClient,callback:function(t){e.forClient=t},expression:"forClient"}}),e.isEditing?e._e():s("combobox",{attrs:{label:e.$t("playlists.fields.for_entity"),options:e.forEntityOptions,disabled:e.typeDisabled},model:{value:e.form.for_entity,callback:function(t){e.$set(e.form,"for_entity",t)},expression:"form.for_entity"}})],1),s("modal-footer",{attrs:{"error-text":e.$t("playlists.edit_error"),"is-error":e.isError,"is-loading":e.isLoading},on:{confirm:e.runConfirmation,cancel:function(t){return e.$emit("cancel")}}})],1)])])},n=[],a=(s("caad"),s("b0c0"),s("5530")),o=s("992f"),r=s("d5c9"),c=s("7bf8"),l=s("2f62"),d=s("d065"),u={name:"edit-playlist-modal",mixins:[d["a"]],components:{Combobox:o["a"],ModalFooter:r["a"],TextField:c["a"]},props:{active:{type:Boolean,value:!1},isError:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},playlistToEdit:{type:Object,default:function(){}},typeDisabled:{type:Boolean,default:!1}},data:function(){return{forClient:"false",forClientOptions:[{label:this.$t("playlists.for_client"),value:"true"},{label:this.$t("playlists.for_studio"),value:"false"}],form:{name:this.playlistToEdit.name,for_entity:this.playlistToEdit.for_entity||this.defaultForEntity,for_client:this.playlistToEdit.for_client,is_for_all:this.currentEpisode&&"all"===this.currentEpisode.id}}},computed:Object(a["a"])(Object(a["a"])({},Object(l["c"])(["currentEpisode"])),{},{isEditing:function(){return this.playlistToEdit&&this.playlistToEdit.id},forEntityOptions:function(){return this.currentEpisode&&["main","all"].includes(this.currentEpisode.id)?[{label:this.$t("assets.title"),value:"asset"}]:[{label:this.$t("assets.title"),value:"asset"},{label:this.$t("shots.title"),value:"shot"}]},defaultForEntity:function(){var e=this.currentEpisode&&["all","main"].includes(this.currentEpisode.id);return e?"asset":"shot"}}),methods:{runConfirmation:function(){this.form.for_client="true"===this.forClient,this.$emit("confirm",this.form)},resetForm:function(){this.isEditing?(this.form.name=this.playlistToEdit.name,this.form.for_entity=this.playlistToEdit.for_entity,this.form.is_for_all=this.currentEpisode&&"all"===this.currentEpisode.id):this.form={name:this.playlistToEdit.name,for_entity:this.playlistToEdit.for_entity||this.defaultForEntity,for_client:"false",is_for_all:this.currentEpisode&&"all"===this.currentEpisode.id}}},watch:{playlistToEdit:function(){this.resetForm()},active:function(){var e=this;this.active&&(this.forClient=this.playlistToEdit.for_client?"true":"false",this.resetForm(),setTimeout((function(){e.$refs.nameField.focus()}),100))}}},p=u,h=(s("12c5"),s("2877")),m=Object(h["a"])(p,i,n,!1,null,"2a6b2ec6",null);t["a"]=m.exports},d5c9:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("p",{staticClass:"has-text-right"},[s("a",{class:{button:!0,"is-primary":!0,"is-loading":e.isLoading,"is-disabled":e.isDisabled},on:{click:function(t){return e.$emit("confirm")}}},[e._v(" "+e._s(e.confirmLabel||e.$t("main.confirmation"))+" ")]),s("button",{staticClass:"button is-link",on:{click:function(t){return e.$emit("cancel")}}},[e._v(" "+e._s(e.cancelLabel||e.$t("main.cancel"))+" ")])]),e.isError?s("p",{staticClass:"error mt1 has-text-right"},[e._v(" "+e._s(e.errorText)+" ")]):e._e()])},n=[],a=s("5530"),o=s("2f62"),r={name:"modal-footer",components:{},props:{cancelLabel:{type:String,default:""},confirmLabel:{type:String,default:""},errorText:{type:String,default:""},isDisabled:{type:Boolean,default:!1},isError:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1}},computed:Object(a["a"])({},Object(o["c"])([])),methods:Object(a["a"])({},Object(o["b"])([])),watch:{}},c=r,l=(s("a015"),s("2877")),d=Object(l["a"])(c,i,n,!1,null,"1fe06be4",null);t["a"]=d.exports},d766:function(e,t,s){},d793:function(e,t,s){"use strict";var i=function(e,t){var s=t._c;return t.props.previewFileId?s("img",t._b({directives:[{name:"lazy",rawName:"v-lazy",value:"/api/pictures/"+t.props.type+"/preview-files/"+t.props.previewFileId+".png",expression:"'/api/pictures/' + props.type + '/preview-files/' + props.previewFileId + '.png'"}],key:t.props.previewFileId,staticClass:"thumbnail-picture",style:{width:t.props.width,height:t.props.height,"max-width":t.props.maxWidth,"max-height":t.props.maxHeight}},"img",t.data.attrs,!1)):s("span",t._b({class:{"thumbnail-picture":!0,"thumbnail-empty":!0},style:{width:t.props.width,height:t.props.emptyHeight?t.props.emptyHeight:t.props.height}},"span",t.data.attrs,!1))},n=[],a={name:"light-entity-thumbnail",functional:!0,props:{previewFileId:{default:"",type:String},width:{default:"150px",type:String},height:{default:"50px",type:String},maxHeight:{default:"auto",type:String},maxWidth:{default:"auto",type:String},emptyHeight:{type:String},type:{default:"thumbnails",type:String}}},o=a,r=(s("7203"),s("2877")),c=Object(r["a"])(o,i,n,!0,null,null,null);t["a"]=c.exports},d7c7:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"schedule-wrapper"},[s("div",{ref:"schedule",class:e.scheduleClass},[s("div",{ref:"entity-list",staticClass:"entities",on:{mousedown:e.startBrowsingY}},[s("div",{staticClass:"has-text-right total-man-days mr0"},[s("span",{staticClass:"total-value"},[e._v(" "+e._s(e.formatDuration(e.totalManDays))+" "+e._s(e.$t("schedule.md"))+" ")])]),s("div",{staticClass:"entity-name-list"},e._l(e.hierarchy,(function(t){return s("div",{key:"entity-"+t.id},[s("div",{class:{"entity-line":!0,"entity-name":!0,flexrow:!0,root:!0,expanded:t.expanded},style:e.entityLineStyle(t)},[s("span",{staticClass:"expand flexrow-item mr1",on:{click:function(s){return e.expandRootElement(t)}}},[t.expanded?s("chevron-down-icon"):s("chevron-right-icon")],1),t.avatar?s("span",{staticClass:"avatar flexrow-item"},["Project"===t.type?s("production-name",{attrs:{project:t,"only-avatar":!0,size:30}}):s("people-avatar",{attrs:{person:t,"is-link":!1,size:30,"no-cache":!0}})],1):e._e(),t.route?s("router-link",{staticClass:"filler flexrow-item root-element-name",attrs:{to:t.route}},[e._v(" "+e._s(t.name)+" ")]):s("span",{staticClass:"filler flexrow-item root-element-name"},[e._v(" "+e._s(t.name)+" ")]),!t.avatar&&t.editable?s("input",{staticClass:"flexrow-item mr1",attrs:{type:"number",step:"any",placeholder:"0"},domProps:{value:e.formatDuration(t.man_days)},on:{input:function(s){return e.$emit("estimation-changed",{days:s.target.value,item:t})}}}):e._e(),!t.avatar&&t.editable?s("span",{staticClass:"man-days-unit flexrow-item"},[e._v(" "+e._s(e.$t("schedule.md"))+" ")]):e._e(),t.avatar||!t.editable?s("span",{staticClass:"man-days-unit flexrow-item"},[e._v(" "+e._s(e.formatDuration(t.man_days))+" "+e._s(e.$t("schedule.md"))+" ")]):e._e()],1),t.expanded?s("div",{staticClass:"children",style:e.childrenStyle(t)},[t.loading?s("div",{staticClass:"flexrow"},[s("spinner",{staticClass:"child-spinner flexrow-item",staticStyle:{width:"20px",margin:"0 0 10px 10px"}})],1):e._e(),e._l(t.children,(function(i,n){return s("div",{key:"entity-"+i.id,staticClass:"child-name"},[s("div",{staticClass:"entity-line entity-name child-line flexrow",style:e.childNameStyle(t,n)},[i.route?s("router-link",{staticClass:"filler flexrow-item root-element-name",attrs:{to:i.route}},[e._v(" "+e._s(i.name)+" ")]):s("span",{staticClass:"filler flexrow-item"},[e._v(" "+e._s(i.name)+" ")]),i.editable?s("span",{staticClass:"flexrow-item"},[s("input",{staticClass:"man-days-unit flexrow-item",attrs:{type:"number",min:"0",placeholder:"0",step:"any"},domProps:{value:e.formatDuration(i.man_days)},on:{input:function(s){return e.onChildEstimationChanged(s,i,t)}}}),e._v(" "+e._s(e.$t("schedule.md"))+" ")]):s("span",{staticClass:"man-days-unit flexrow-item"},[e._v(" "+e._s(i.man_days)+" "+e._s(e.$t("schedule.md"))+" ")])],1)])}))],2):e._e()])})),0)]),s("div",{staticClass:"timeline"},[s("div",{ref:"timeline-header",staticClass:"timeline-header",on:{mousedown:e.startBrowsingX}},e._l(e.daysAvailable,(function(t,i){return s("div",{key:"header-"+t.text+"-"+i,staticClass:"day",style:e.dayStyle(t)},[e.milestones[t.text]?s("div",{staticClass:"milestone",on:{click:function(s){return e.showEditMilestoneModal(t,e.milestones[t.text])}}},[s("div",{staticClass:"milestone-tooltip",style:e.milestoneTooltipStyle},[s("span",[e._v(" "+e._s(e.milestones[t.text].name)+" ")])]),e._m(0,!0)]):s("div",{staticClass:"milestone"},[e._m(1,!0)]),s("div",{class:{"with-milestones":e.withMilestones,"date-widget":!0}},[s("div",{staticClass:"add-milestone",attrs:{title:e.addMilestoneTitle(t)},on:{click:function(s){return e.showEditMilestoneModal(t,e.milestones[t.text])}}},[s("span",[e._v("+")])]),s("div",{staticClass:"date-name"},[t.newMonth?s("span",{staticClass:"month-name"},[e._v(" "+e._s(t.monthText)+" ")]):e._e(),s("div",{class:e.dayClass(t,i)},[!t.weekend&&e.zoomLevel>2?s("span",[e._v(" "+e._s(t.dayText)+" / ")]):e._e(),t.weekend?e._e():s("span",{staticClass:"day-number"},[e._v(" "+e._s(t.dayNumber)+" ")])])])])])})),0),s("div",{directives:[{name:"scroll",rawName:"v-scroll",value:e.onTimelineScroll,expression:"onTimelineScroll"}],ref:"timeline-content-wrapper",staticClass:"timeline-content-wrapper"},[s("div",{ref:"timeline-content",staticClass:"timeline-content",on:{mousedown:e.startBrowsing,mousewheel:function(t){return e.$emit("change-zoom",t)}}},[s("div",{ref:"timeline-today-position",staticClass:"timeline-position today",style:e.timelineTodayPositionStyle}),s("div",{ref:"timeline-position",staticClass:"timeline-position",style:e.timelinePositionStyle}),e._l(Object.values(e.milestones),(function(t){return s("div",{key:"milestone-"+t.date,staticClass:"milestone-vertical-line",style:e.milestoneLineStyle(t)})})),e._l(e.hierarchy,(function(t){return s("div",{key:"entity-line-"+t.id},[s("div",{staticClass:"entity-line",style:e.entityLineStyle(t)},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.isVisible(t),expression:"isVisible(rootElement)"}],staticClass:"timebar",style:e.timebarStyle(t)},[s("div",{class:{"timebar-left-hand":t.editable&&e.isCurrentUserManager},on:{mousedown:function(s){return e.moveTimebarLeftSide(t,s)}}}),s("div",{staticClass:"filler",on:{mousedown:function(s){return e.moveTimebar(t,s)}}}),s("div",{class:{"timebar-right-hand":t.editable&&e.isCurrentUserManager},on:{mousedown:function(s){return e.moveTimebarRightSide(t,s)}}})])]),t.expanded?s("div",{staticClass:"children",style:e.childrenStyle(t)},[t.loading?s("div",{staticClass:"flexrow"},[s("spinner",{staticClass:"child-spinner flexrow-item",staticStyle:{width:"20px",margin:"0 0 10px 10px",opacity:"0"}})],1):e._e(),e._l(t.children,(function(i){return s("div",{key:"entity-line-"+i.id,staticClass:"entity-line child-line"},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.isVisible(i),expression:"isVisible(childElement)"}],staticClass:"timebar",style:e.timebarChildStyle(i,t,!0),attrs:{title:i.name+" ("+i.startDate.format("DD-MM")+" - "+i.endDate.format("DD-MM")+")"}},[s("div",{class:{"timebar-left-hand":i.editable&&!i.unresizable&&e.isCurrentUserManager},on:{mousedown:function(t){return e.moveTimebarLeftSide(i,t)}}}),s("div",{staticClass:"filler",on:{mousedown:function(t){return e.moveTimebar(i,t)}}}),s("div",{class:{"timebar-right-hand":i.editable&&!i.unresizable&&e.isCurrentUserManager},on:{mousedown:function(t){return e.moveTimebarRightSide(i,t)}}})])])}))],2):e._e()])}))],2)])])]),s("edit-milestone-modal",{ref:"edit-milestone-modal",attrs:{active:e.modals.edit,"is-loading":e.loading.edit,"is-error":e.errors.edit,"milestone-to-edit":e.milestoneToEdit},on:{confirm:e.confirmEditMilestone,cancel:e.hideEditMilestoneModal,"remove-milestone":e.removeMilestone}})],1)},n=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("span",{staticClass:"bull"},[e._v("")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("span",{staticClass:"bull"})])}],a=(s("4de4"),s("4160"),s("caad"),s("13d5"),s("a9e3"),s("159b"),s("5530")),o=s("2f62"),r=s("7f45"),c=s.n(r),l=s("4f18"),d=s("7930"),u=s("3657"),p=s("0a35"),h=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{modal:!0,"is-active":e.active}},[s("div",{staticClass:"modal-background",on:{click:function(t){return e.$emit("cancel")}}}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box content"},[e.isEdit?s("h1",{staticClass:"title"},[e._v(" "+e._s(e.$t("schedule.milestone.edit_milestone"))+": "+e._s(e.milestoneToEdit.date.format("YYYY-MM-DD"))+" ")]):s("h1",{staticClass:"title"},[e._v(" "+e._s(e.$t("schedule.milestone.add_milestone"))+": "+e._s(e.milestoneToEdit.date.format("YYYY-MM-DD"))+" ")]),s("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"nameField",attrs:{label:e.$t("schedule.milestone.name")},on:{enter:e.confirm},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),e.isEdit?s("button-simple",{staticClass:"button is-link error",attrs:{text:"Delete milestone"},on:{click:function(t){return e.$emit("remove-milestone",e.milestoneToEdit)}}}):e._e(),s("modal-footer",{attrs:{"error-text":e.$t("schedule.milestone.error"),"is-error":e.isError,"is-loading":e.isLoading,"is-disabled":!e.isFormFilled},on:{confirm:e.confirm,cancel:function(t){return e.$emit("cancel")}}})],1)])])},m=[],f=(s("b0c0"),s("d065")),_=s("de40"),v=s("d5c9"),g=s("7bf8"),y={name:"edit-milestone-modal",mixins:[f["a"]],components:{ButtonSimple:_["a"],ModalFooter:v["a"],TextField:g["a"]},props:{active:{type:Boolean,default:!1},milestoneToEdit:{type:Object,default:function(){}},isLoading:{type:Boolean,default:!1},isError:{type:Boolean,default:!1}},data:function(){return{form:{name:""}}},mounted:function(){this.reset()},computed:Object(a["a"])(Object(a["a"])({},Object(o["c"])([])),{},{isEdit:function(){return void 0!==this.milestoneToEdit.id},isFormFilled:function(){return this.form.name.length>0}}),methods:Object(a["a"])(Object(a["a"])({},Object(o["b"])([])),{},{confirm:function(){return this.$emit("confirm",this.form)},reset:function(){this.form={id:this.milestoneToEdit.id||void 0,name:"".concat(this.milestoneToEdit.name||""),date:this.milestoneToEdit.date}}}),watch:{active:function(){var e=this;this.active&&(this.reset(),this.$nextTick((function(){e.$refs.nameField.focus()})))}}},b=y,k=s("2877"),w=Object(k["a"])(b,h,m,!1,null,"541fbff2",null),C=w.exports,S=s("eb8c"),T=s("4736"),x=s("be83"),E={name:"schedule",mixins:[l["a"]],components:{ChevronDownIcon:p["f"],ChevronRightIcon:p["h"],EditMilestoneModal:C,PeopleAvatar:S["a"],ProductionName:T["a"],Spinner:x["a"]},data:function(){return{currentMilestoneDate:null,isBrowsingX:!1,isBrowsingY:!1,isChangeSize:!1,milestoneToEdit:{date:c()()},timelineDisplayedDaysIndex:{},errors:{edit:!1},modals:{edit:!1},loading:{edit:!1}}},props:{endDate:{type:Object,required:!0},isError:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!0},height:{type:Number,default:0},hierarchy:{default:function(){return[]},type:Array},startDate:{type:Object,required:!0},isEstimationLinked:{type:Boolean,default:!1},withMilestones:{type:Boolean,default:!0},zoomLevel:{type:Number,default:2}},mounted:function(){this.resetScheduleSize(),document.addEventListener("mouseup",this.stopBrowsing),document.addEventListener("mousemove",this.onMouseMove),window.addEventListener("resize",this.resetScheduleSize)},destroyed:function(){document.removeEventListener("mouseup",this.stopBrowsing),document.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("resize",this.resetScheduleSize),document.body.style.cursor="default"},computed:Object(a["a"])(Object(a["a"])({},Object(o["c"])(["isCurrentUserManager","organisation","milestones"])),{},{cellWidth:function(){return 20*this.zoomLevel},daysAvailable:function(){var e=[],t=Object(u["p"])(this.startDate.format("YYYY-MM-DD")),s=t.clone().add(-1,"days"),i=s.toDate(),n=Object(u["p"])(this.endDate.format("YYYY-MM-DD")),a=n.toDate();i.isoweekday=s.isoWeekday(),i.monthday=s.month();while(i<a){var o=new Date(Number(i));o.setDate(i.getDate()+1),o.isoweekday=i.isoweekday+1,o.isoweekday>7&&(o.isoweekday=1,o.newWeek=!0),o.monthday=i.monthday+1,o.getMonth()!==i.getMonth()&&(o.newMonth=!0,o.monthday=1),[6,7].includes(o.isoweekday)&&(o.weekend=!0);var r=Object(u["p"])(c()(o).format("YYYY-MM-DD"));r.newWeek=o.newWeek,r.newMonth=o.newMonth,r.weekend=o.weekend,r.text=r.format("YYYY-MM-DD"),r.monthText=r.format("MMMM"),r.dayNumber=r.format("DD"),r.dayText=r.format("ddd")[0],e.push(r),i=o}return e.length>1&&!0===e[0].weekend?(e[0].newMonth=!1,e[1].newMonth=!0,e.length>2&&!0===e[1].weekend?(e[1].newMonth=!1,e[2].newMonth=!0):e.length>2&&(e[1].newMonth=!0)):e.length>0&&(e[0].newMonth=!0),e},displayedDays:function(){return this.daysAvailable.filter((function(e){return!e.weekend}))},nbDisplayedDays:function(){return this.displayedDays.length},displayedDaysIndex:function(){var e=0,t={};return this.displayedDays.forEach((function(s){t[s.text]=e,e++})),t},totalManDays:function(){return this.hierarchy.reduce((function(e,t){var s=e,i=t.man_days;return t.man_days&&("string"===typeof i&&(i=parseInt(i)),s=e+i),s}),0)},entityList:function(){return this.$refs["entity-list"]},schedule:function(){return this.$refs.schedule},timelineContent:function(){return this.$refs["timeline-content"]},timelineContentWrapper:function(){return this.$refs["timeline-content-wrapper"]},timelineHeader:function(){return this.$refs["timeline-header"]},timelinePosition:function(){return this.$refs["timeline-position"]},scheduleClass:function(){var e={schedule:!0,unselectable:!0};return e["zoom-level-".concat(this.zoomLevel)]=!0,e},timelinePositionStyle:function(){return{width:"".concat(this.cellWidth,"px")}},timelineTodayPositionStyle:function(){var e=c()(),t=e.isAfter(this.startDate)&&e.isBefore(this.endDate);return{width:"".concat(this.cellWidth,"px"),left:"".concat(this.getTimebarLeft({startDate:e})-5,"px"),display:t?"block":"none"}},milestoneTooltipStyle:function(){return{left:-40-10*(3-this.zoomLevel)+"px"}},dayBeforeStartDate:function(){return this.startDate.clone().add(-1,"days")},dayAfterEndDate:function(){return this.endDate.clone().add(1,"days")}}),methods:Object(a["a"])(Object(a["a"])({},Object(o["b"])(["deleteMilestone","saveMilestone"])),{},{isVisible:function(e){var t=e.startDate.isSameOrAfter(this.startDate),s=e.endDate.isSameOrBefore(this.dayAfterEndDate);return t&&s},resetScheduleSize:function(){this.height&&(this.schedule.style.height="".concat(this.height,"px")),this.timelineContent&&(this.timelineContent.style.width=this.nbDisplayedDays*this.cellWidth+"px",this.timelineContentWrapper.style.height=this.schedule.offsetHeight-250+"px",this.entityList.style.height=this.schedule.offsetHeight-169+"px")},onMouseMove:function(e){this.isChangeStartDate?this.changeStartDate(e):this.isChangeEndDate?this.changeEndDate(e):this.isChangeDates?this.changeDates(e):(this.isBrowsingX&&this.scrollScheduleLeft(e),this.isBrowsingY&&this.scrollScheduleTop(e)),this.updatePositionBarPosition(e)},onChildEstimationChanged:function(e,t,s){var i=e.target.value;this.isEstimationLinked&&(t.man_days=Object(u["b"])(this.organisation,i),s.man_days=s.children.reduce((function(e,t){var s=e,i=t.man_days;return t.man_days&&(s=e+i),s}),0),i>0&&(t.endDate=Object(u["a"])(t.startDate,i))),this.$emit("estimation-changed",{taskId:t.id,days:i,item:t})},updatePositionBarPosition:function(e){var t=this.timelineContentWrapper.scrollLeft+e.clientX;t-=320,t=Math.floor(t/this.cellWidth)*this.cellWidth,this.timelinePosition.style.left=t+"px"},isValidItemDates:function(e,t){return e&&t&&e.isSameOrAfter(this.startDate.clone().add(-1,"hour"))&&t.isSameOrBefore(this.endDate.clone().add(1,"day"))&&e.isSameOrBefore(t)&&t.isSameOrAfter(e)},getDisplayedDaysIndex:function(e){6===e.isoWeekday()&&(e=e.add(-1,"days")),7===e.isoWeekday()&&(e=e.add(-2,"days"));var t=e.format("YYYY-MM-DD");return this.displayedDaysIndex[t]},changeDates:function(e){var t=e.clientX-this.initialClientX-this.cellWidth/2,s=Math.ceil(t/this.cellWidth);this.lastStartDate.isBefore(this.startDate)&&(this.lastStartDate=this.startDate.clone()),this.lastEndDate.isBefore(this.startDate)&&(this.lastEndDate=this.startDate.clone().add(1,"days"));var i=this.lastStartDate,n=this.lastEndDate,a=this.getDisplayedDaysIndex(i),o=this.getDisplayedDaysIndex(n),r=o-a,c=this.getDisplayedDaysIndex(i);c+=s,c<0&&(c=0);var l=this.displayedDays[c];if(l||(l=this.displayedDays[c-1]),l||(l=this.displayedDays[c-2]),l){var d=this.displayedDays[c+r];this.isValidItemDates(l,d)&&(this.currentElement.startDate=l,this.currentElement.endDate=d,this.$emit("item-changed",this.currentElement))}},changeStartDate:function(e){var t=e.clientX-this.initialClientX+this.cellWidth/2,s=Math.floor(t/this.cellWidth),i=this.lastStartDate,n=this.currentElement.endDate,a=this.getDisplayedDaysIndex(i),o=this.getDisplayedDaysIndex(n);a+=s,a>o&&(a=o),a<0&&(a=0);var r=this.displayedDays[a];this.isValidItemDates(r,this.currentElement.endDate)&&(this.currentElement.startDate=r,this.$emit("item-changed",this.currentElement))},changeEndDate:function(e){var t=e.clientX-this.initialClientX+this.cellWidth/2,s=Math.ceil(t/this.cellWidth);this.currentElement.startDate.isBefore(this.startDate)&&(this.currentElement.startDate=this.startDate.clone()),this.currentElement.endDate.isBefore(this.startDate)&&(this.currentElement.endDate=this.startDate.clone().add(1,"days")),this.lastEndDate.isBefore(this.startDate)&&(this.lastEndDate=this.startDate.clone().add(1,"days"));var i=this.currentElement.startDate,n=this.lastEndDate,a=this.getDisplayedDaysIndex(i),o=this.getDisplayedDaysIndex(n);o+=s-1,o<a&&(o=a),o>this.displayedDaysIndex.length&&(o=this.displayedDaysIndex.length-1);var r=this.displayedDays[o];this.isValidItemDates(this.currentElement.startDate,r)&&(this.currentElement.endDate=r,this.$emit("item-changed",this.currentElement))},moveTimebar:function(e,t){!this.isChangeStartDate&&!this.isChangeEndDate&&e.editable&&this.isCurrentUserManager&&(this.isChangeDates=!0,this.isChangeStartDate=!1,this.isChangeEnd=!1,this.currentElement=e,this.lastStartDate=e.startDate.clone(),this.lastEndDate=e.endDate.clone(),this.initialClientX=t.clientX,document.body.style.cursor="ew-resize")},moveTimebarLeftSide:function(e,t){!this.isChangeDates&&!this.isChangeEndDate&&e.editable&&this.isCurrentUserManager&&(this.isChangeDates=!1,this.isChangeStartDate=!0,this.isChangeEndDate=!1,this.currentElement=e,e.endDate||(e.endDate=e.startDate.clone().add(1,"days")),this.lastStartDate=e.startDate.clone(),this.lastEndDate=e.endDate.clone(),this.initialClientX=t.clientX,document.body.style.cursor="w-resize")},moveTimebarRightSide:function(e,t){!this.isChangeDates&&!this.isChangeStartDate&&e.editable&&this.isCurrentUserManager&&(this.isChangeDates=!1,this.isChangeStartDate=!1,this.isChangeEndDate=!0,this.currentElement=e,e.endDate||(e.endDate=e.startDate.clone().add(1,"days")),this.lastStartDate=e.startDate.clone(),this.lastEndDate=e.endDate.clone(),this.initialClientX=t.clientX,document.body.style.cursor="e-resize")},onTimelineScroll:function(e,t){var s=t.scrollTop;this.entityList.scrollTop=s;var i=t.scrollLeft;this.timelineHeader.scrollLeft=i},scrollScheduleLeft:function(e){var t=this.timelineContentWrapper.scrollLeft,s=t-e.movementX;this.timelineContentWrapper.scrollLeft=s,this.timelineHeader.scrollLeft=s},scrollScheduleTop:function(e){var t=this.timelineContentWrapper.scrollTop,s=t-e.movementY;this.timelineContentWrapper.scrollTop=s,this.entityList.scrollTop=s},scrollToToday:function(){var e=this;setTimeout((function(){var t=c()();if(t.isAfter(e.startDate)&&t.isBefore(e.endDate)){var s=e.getTimebarLeft({startDate:t})-5,i=s-(e.schedule.offsetWidth/2-300);e.timelineContentWrapper.scrollLeft=i,e.timelineHeader.scrollLeft=i}}),10)},startBrowsing:function(e){this.isChangeStartDate||this.isChangeEndDate||this.isChangeDates||(document.body.style.cursor="grabbing",this.isBrowsingX=!0,this.isBrowsingY=!0)},startBrowsingX:function(e){document.body.style.cursor="grabbing",this.isBrowsingX=!0},startBrowsingY:function(e){document.body.style.cursor="grabbing",this.isBrowsingY=!0},stopBrowsing:function(e){document.body.style.cursor="default",this.isChangeStartDate=!1,this.isChangeEndDate=!1,this.isChangeDates=!1,this.isBrowsingX=!1,this.isBrowsingY=!1},businessDiff:function(e,t){if(e.isSame(t))return 0;var s=e.clone().endOf("isoweek"),i=t.clone().startOf("isoweek"),n=i.diff(s,"days");if(t.diff(e,"days")>6){var a=5*n/7,o=s.isoWeekday()-e.isoWeekday();0===e.isoWeekday()&&--o;var r=t.isoWeekday()-i.isoWeekday();return 6===t.day()&&--r,Math.ceil(o+a+r-1)}var l=c()(e),d=0;while(l.isBefore(t,"day"))0!==l.day()&&6!==l.day()&&d++,l.add(1,"days");return d},dayClass:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{"day-name":!0,"new-week":e.newWeek||!1,"new-month":e.newMonth||0===t||!1}},dayStyle:function(e){return{"min-width":e.weekend?"0px":this.cellWidth+"px","max-width":e.weekend?"0px":this.cellWidth+"px"}},entityLineStyle:function(e){var t={"background-color":e.color};return e.expanded&&(t["margin-bottom"]="0"),t},timebarStyle:function(e){return{left:this.getTimebarLeft(e)+"px",width:this.getTimebarWidth(e)+"px",cursor:e.editable?"ew-resize":"default"}},timebarChildStyle:function(e,t){return{left:this.getTimebarLeft(e)+"px",width:this.getTimebarWidth(e)+"px",cursor:e.editable?"ew-resize":"default",background:e.color||t.color}},getTimebarLeft:function(e){var t=e.startDate||this.startDate,s=this.businessDiff(this.startDate,t)||0;return s*this.cellWidth+5},getTimebarWidth:function(e){var t=e.startDate||this.startDate,s=e.endDate||e.startDate&&e.startDate.clone().add(1,"days")||this.startDate.clone().add(1,"days");if(e.man_days>0&&!e.end_date&&!e.endDate){var i=Math.ceil(e.man_days);s=Object(u["a"])(t,i-1)}var n=this.businessDiff(t,s);return n>0?(n+1)*this.cellWidth-10:this.cellWidth-10},expandRootElement:function(e){this.$emit("root-element-expanded",e)},expandChildElement:function(e){},childNameStyle:function(e,t){var s=t%2===0,i=s?.7:.9;return{background:d["a"].lightenColor(e.color,i)}},childrenStyle:function(e){return{"border-bottom":"1px solid "+e.color}},showEditMilestoneModal:function(e,t){this.modals.edit=!0,t?(t.date=Object(u["p"])(t.date),this.milestoneToEdit=t):this.milestoneToEdit={date:e}},hideEditMilestoneModal:function(){this.modals.edit=!1},confirmEditMilestone:function(e){var t=this;this.loading.edit=!0,this.saveMilestone(e).then((function(){t.modals.edit=!1,t.loading.edit=!1})).catch((function(e){console.error(e),t.loading.edit=!1,t.errors.edit=!0}))},removeMilestone:function(e){var t=this;this.loading.edit=!0,this.deleteMilestone(e).then((function(){t.modals.edit=!1,t.loading.edit=!1})).catch((function(e){console.error(e),t.loading.edit=!1,t.errors.edit=!0}))},milestoneLineStyle:function(e){var t=Object(u["p"])(this.startDate.format("YYYY-MM-DD")),s=Object(u["p"])(e.date);if(t.isSameOrBefore(s)){var i=this.businessDiff(t,s);return{left:(i+.5)*this.cellWidth+"px"}}return{display:"none"}},addMilestoneTitle:function(e){return"".concat(this.$t("schedule.milestone.add_milestone")," ")+"".concat(e.format("YYYY-MM-DD"))}}),socket:{},watch:{startDate:function(){this.resetScheduleSize(),this.scrollToToday()},endDate:function(){this.resetScheduleSize()},zoomLevel:function(){this.resetScheduleSize()},isLoading:function(){this.$nextTick(this.resetScheduleSize)},height:function(){this.$nextTick(this.resetScheduleSize)}}},P=E,O=(s("d8dd"),Object(k["a"])(P,i,n,!1,null,"6f319c43",null));t["a"]=O.exports},d8a5:function(e,t,s){},d8dd:function(e,t,s){"use strict";var i=s("db7c"),n=s.n(i);n.a},da36:function(e,t,s){},db25:function(e,t,s){},db7c:function(e,t,s){},dbde:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{"c-mask":!0,"is-active":e.displayed},on:{click:function(t){return e.$emit("click")}}})},n=[],a={name:"combobox-mask",props:{displayed:{type:Boolean,default:!1}},computed:{}},o=a,r=s("2877"),c=Object(r["a"])(o,i,n,!1,null,"5261c2a0",null);t["a"]=c.exports},dd6e:function(e,t,s){"use strict";var i=s("cc0e"),n=s.n(i);n.a},de26:function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var i=30},de40:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("button",{class:{button:!0,active:e.active,"is-on":e.isOn},attrs:{title:e.title},on:{click:function(t){return e.$emit("click")}}},["undo"===e.icon?s("corner-left-down-icon",{class:e.iconClass}):e._e(),"redo"===e.icon?s("corner-right-down-icon",{class:e.iconClass}):e._e(),"save"===e.icon?s("save-icon",{class:e.iconClass}):e._e(),"plus"===e.icon?s("plus-icon",{class:e.iconClass}):e._e(),"minus"===e.icon?s("minus-icon",{class:e.iconClass}):e._e(),"comment"===e.icon?s("message-square-icon",{class:e.iconClass}):e._e(),"download"===e.icon?s("download-icon",{class:e.iconClass}):e._e(),"upload"===e.icon?s("upload-icon",{class:e.iconClass}):e._e(),"film"===e.icon?s("film-icon",{class:e.iconClass}):e._e(),"play"===e.icon?s("play-icon",{class:e.iconClass}):e._e(),"pause"===e.icon?s("pause-icon",{class:e.iconClass}):e._e(),"edit"===e.icon?s("edit-icon",{class:e.iconClass}):e._e(),"image"===e.icon?s("image-icon",{class:e.iconClass}):e._e(),"maximize"===e.icon?s("maximize-icon",{class:e.iconClass}):e._e(),"delete"===e.icon?s("trash-icon",{class:e.iconClass}):e._e(),"restore"===e.icon?s("rotate-ccw-icon",{class:e.iconClass}):e._e(),"back"===e.icon?s("skip-back-icon",{class:e.iconClass}):e._e(),"forward"===e.icon?s("skip-forward-icon",{class:e.iconClass}):e._e(),"left"===e.icon?s("chevron-left-icon",{class:e.iconClass}):e._e(),"right"===e.icon?s("chevron-right-icon",{class:e.iconClass}):e._e(),"compare"===e.icon?s("copy-icon",{class:e.iconClass}):e._e(),"remove"===e.icon?s("x-icon",{class:e.iconClass}):e._e(),"pencil"===e.icon?s("edit2-icon",{class:e.iconClass}):e._e(),"layers"===e.icon?s("layers-icon",{class:e.iconClass}):e._e(),"type"===e.icon?s("type-icon",{class:e.iconClass}):e._e(),"list"===e.icon?s("list-icon",{class:e.iconClass}):e._e(),"funnel"===e.icon?s("filter-icon",{class:e.iconClass}):e._e(),"refresh"===e.icon?s("refresh-cw-icon",{class:e.iconClass}):e._e(),"repeat"===e.icon?s("repeat-icon",{class:e.iconClass}):e._e(),"soundoff"===e.icon?s("volume-x-icon",{class:e.iconClass}):e._e(),"soundon"===e.icon?s("volume-2-icon",{class:e.iconClass}):e._e(),e.isText?s("span",{class:{text:!0,"is-hidden-touch":e.isResponsive}},[e._v(" "+e._s(e.text)+" ")]):e._e()],1)},n=[],a=s("0a35"),o={name:"button-simple",components:{ChevronLeftIcon:a["g"],ChevronRightIcon:a["h"],CornerLeftDownIcon:a["k"],CornerRightDownIcon:a["l"],CopyIcon:a["j"],DownloadIcon:a["n"],EditIcon:a["p"],Edit2Icon:a["o"],FilmIcon:a["s"],FilterIcon:a["t"],ImageIcon:a["u"],LayersIcon:a["v"],ListIcon:a["w"],MaximizeIcon:a["z"],MessageSquareIcon:a["A"],MinusIcon:a["B"],PauseIcon:a["D"],PlayIcon:a["E"],PlusIcon:a["F"],RefreshCwIcon:a["G"],RepeatIcon:a["H"],RotateCcwIcon:a["I"],SaveIcon:a["J"],SkipBackIcon:a["L"],SkipForwardIcon:a["M"],TrashIcon:a["P"],TypeIcon:a["Q"],UploadIcon:a["R"],VolumeXIcon:a["V"],Volume2Icon:a["U"],XIcon:a["W"]},props:{active:{default:!1,type:Boolean},icon:{default:"",type:String},isOn:{default:!1,type:Boolean},isResponsive:{default:!1,type:Boolean},text:{default:"",type:String},title:{default:"",type:String}},computed:{isText:function(){return this.text&&this.text.length>0},iconClass:function(){return{icon:!0,"is-small":!0,"only-icon":!this.isText}}}},r=o,c=(s("3de0"),s("2877")),l=Object(c["a"])(r,i,n,!1,null,"02356bbe",null);t["a"]=l.exports},de95:function(e,t,s){"use strict";var i=s("c802"),n=s.n(i);n.a},df02:function(e,t,s){},df1b:function(e,t,s){},dfbe:function(e,t,s){},e007:function(e,t,s){"use strict";var i=s("16ce"),n=s.n(i);n.a},e07d:function(e,t,s){"use strict";s("4de4"),s("c740"),s("4160"),s("a434"),s("d3b7"),s("159b");var i,n=s("ade3"),a=s("5530"),o=(s("b0c0"),s("edbf")),r=function(e){return{name:e.name,short_name:e.short_name,is_reviewable:Boolean("true"===e.is_reviewable),is_done:Boolean("true"===e.is_done),is_retake:Boolean("true"===e.is_retake),is_artist_allowed:Boolean("true"===e.is_artist_allowed),is_client_allowed:Boolean("true"===e.is_client_allowed),color:e.color}},c={getTaskStatuses:function(e){o["a"].get("/api/data/task-status",e)},getTaskStatus:function(e,t){o["a"].get("/api/data/task-status/".concat(e),t)},newTaskStatus:function(e){var t=r(e);return o["a"].ppost("/api/data/task-status/",t)},updateTaskStatus:function(e){var t=r(e);return o["a"].pput("/api/data/task-status/".concat(e.id),t)},deleteTaskStatus:function(e){return o["a"].pdel("/api/data/task-status/".concat(e.id))}},l=s("2229"),d=s("9fb0"),u={taskStatus:[],taskStatusMap:{}},p=u,h={taskStatus:function(e){return e.taskStatus},taskStatusMap:function(e){return e.taskStatusMap},editTaskStatus:function(e){return e.editTaskStatus},deleteTaskStatus:function(e){return e.deleteTaskStatus},taskStatusForCurrentUser:function(e,t,s,i){var n=i.productionTaskStatuses;return i.isCurrentUserManager?n:i.isCurrentUserClient?n.filter((function(e){return e.is_client_allowed})):n.filter((function(e){return e.is_artist_allowed}))},getTaskStatusForCurrentUser:function(e,t,s,i){return function(e){var t=i.getProductionTaskStatuses(e);return i.isCurrentUserManager?t:i.isCurrentUserClient?t.filter((function(e){return e.is_client_allowed})):t.filter((function(e){return e.is_artist_allowed}))}}},m={loadTaskStatuses:function(e,t){var s=e.commit;e.state;s(d["Uc"]),c.getTaskStatuses((function(e,i){e?s(d["Tc"]):s(d["Sc"],i),t&&t(e)}))},loadTaskStatus:function(e,t){var s=e.commit;e.state;c.getTaskStatus(t,(function(e,t){e?console.error(e):s(d["Mb"],t)}))},newTaskStatus:function(e,t){var s=e.commit;e.state;return c.newTaskStatus(t).then((function(e){s(d["Mb"],e),Promise.resolve(e)}))},saveTaskStatus:function(e,t){var s=e.commit;e.state;return c.updateTaskStatus(t).then((function(e){s(d["Mb"],e),Promise.resolve(e)}))},deleteTaskStatus:function(e,t){var s=e.commit;e.state;c.deleteTaskStatus(t).then((function(){s(d["ob"],t),Promise.resolve(t)}))}},f=(i={},Object(n["a"])(i,d["Uc"],(function(e){e.taskStatus=[],e.taskStatusMap={}})),Object(n["a"])(i,d["Tc"],(function(e){e.taskStatus=[],e.taskStatusMap={}})),Object(n["a"])(i,d["Sc"],(function(e,t){e.taskStatus=Object(l["d"])(t),e.taskStatusMap={},t.forEach((function(t){null===t.is_artist_allowed&&(t.is_artist_allowed=!0),null===t.is_client_allowed&&(t.is_client_allowed=!1),e.taskStatusMap[t.id]=t}))})),Object(n["a"])(i,d["Mb"],(function(e,t){var s=e.taskStatusMap[t.id];s&&s.id?Object.assign(s,t):(e.taskStatus.push(t),e.taskStatus=Object(l["d"])(e.taskStatus)),e.taskStatusMap[t.id]=t})),Object(n["a"])(i,d["ob"],(function(e,t){var s=e.taskStatus.findIndex((function(e){return e.id===t.id}));s>=0&&e.taskStatus.splice(s,1),delete e.taskStatusMap[t.id]})),Object(n["a"])(i,d["Vd"],(function(e){Object.assign(e,Object(a["a"])({},u))})),i);t["a"]={state:p,getters:h,actions:m,mutations:f}},e1cf:function(e,t,s){},e30e:function(e,t,s){"use strict";var i=s("a4e2"),n=s.n(i);n.a},e4c2:function(e,t,s){},e4fd:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"field"},[e.label.length>0?s("label",{staticClass:"label"},[e._v(" "+e._s(e.label)+" ")]):e._e(),s("div",{staticClass:"task-type-combo"},[s("div",{staticClass:"flexrow",on:{click:e.toggleTaskTypeList}},[s("div",{staticClass:"selected-task-type-line flexrow-item"},[e.currentTaskType?s("task-type-name",{attrs:{"task-type":e.currentTaskType}}):e._e()],1),s("chevron-down-icon",{staticClass:"down-icon flexrow-item"})],1),e.showTaskTypeList?s("div",{ref:"select",staticClass:"select-input"},e._l(e.taskTypeList,(function(t){return s("div",{key:t.id,staticClass:"task-type-line",on:{click:function(s){return e.selectTaskType(t)}}},[s("task-type-name",{attrs:{"task-type":t}})],1)})),0):e._e()]),s("combobox-mask",{attrs:{displayed:e.showTaskTypeList},on:{click:e.toggleTaskTypeList}})],1)},n=[],a=s("5530"),o=s("2f62"),r=s("0a35"),c=s("dbde"),l=s("274f"),d={name:"combobox-task-type",components:{ChevronDownIcon:r["f"],ComboboxMask:c["a"],TaskTypeName:l["a"]},data:function(){return{showTaskTypeList:!1}},props:{label:{default:"",type:String},taskTypeList:{default:function(){return[]},type:Array},value:{default:"",type:String}},mounted:function(){},computed:Object(a["a"])(Object(a["a"])({},Object(o["c"])(["taskTypeMap"])),{},{currentTaskType:function(){return this.value?this.taskTypeMap[this.value]:this.taskTypeList[0]}}),methods:{selectTaskType:function(e){this.$emit("input",e.id),this.showTaskTypeList=!1},toggleTaskTypeList:function(){this.showTaskTypeList=!this.showTaskTypeList}}},u=d,p=(s("fe3f"),s("2877")),h=Object(p["a"])(u,i,n,!1,null,"545f2dde",null);t["a"]=h.exports},e4ff:function(e,t,s){},e577:function(e,t,s){},e5e6:function(e,t,s){"use strict";var i=s("09d9"),n=s.n(i);n.a},e60b:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e.isLoading?s("spinner",{staticClass:"table-info"}):e._e(),e.isError?s("div",{staticClass:"has-text-centered table-info"},[s("span",{staticClass:"tag is-danger"},[e._v(" "+e._s(e.$t("main.loading_error"))+" ")])]):e._e()],1)},n=[],a=s("be83"),o={name:"table-info",components:{Spinner:a["a"]},props:{isLoading:{type:Boolean,default:!1},isError:{type:Boolean,default:!1}}},r=o,c=s("2877"),l=Object(c["a"])(r,i,n,!1,null,"0a2e5274",null);t["a"]=l.exports},e739:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"data-list task-list"},[s("div",{directives:[{name:"scroll",rawName:"v-scroll",value:e.onBodyScroll,expression:"onBodyScroll"}],ref:"body",staticClass:"datatable-wrapper"},[s("table",{staticClass:"datatable"},[s("thead",{staticClass:"datatable-head"},[s("tr",[s("th",{ref:"th-prod",staticClass:"production datatable-row-header datatable-row-header--nobd",attrs:{scope:"col"}},[e._v(" "+e._s(e.$t("tasks.fields.production"))+" ")]),s("th",{ref:"th-type",staticClass:"type datatable-row-header datatable-row-header--nobd",style:{left:e.colTypePosX},attrs:{scope:"col"}},[e._v(" "+e._s(e.$t("tasks.fields.task_type"))+" ")]),s("th",{ref:"th-name",staticClass:"name datatable-row-header",style:{left:e.colNamePosX},attrs:{scope:"col"}},[e._v(" "+e._s(e.$t("tasks.fields.entity"))+" ")]),s("th",{staticClass:"description",attrs:{scope:"col"}},[e._v(" "+e._s(e.$t("assets.fields.description"))+" ")]),s("th",{staticClass:"estimation",attrs:{scope:"col"}},[e._v(" "+e._s(e.$t("tasks.fields.estimation").substring(0,3))+". ")]),s("th",{staticClass:"estimation",attrs:{scope:"col"}},[e._v(" "+e._s(e.$t("tasks.fields.duration").substring(0,3))+". ")]),s("th",{staticClass:"due-date",attrs:{scope:"col"}},[e._v(" "+e._s(e.$t("tasks.fields.due_date"))+" ")]),s("th",{staticClass:"status",attrs:{scope:"col"}},[e._v(" "+e._s(e.$t("tasks.fields.task_status"))+" ")]),e.done?s("th",{staticClass:"end-date",attrs:{scope:"col"}},[e._v(" "+e._s(e.$t("tasks.fields.end_date"))+" ")]):s("th",{staticClass:"last-comment",attrs:{scope:"col"}},[e._v(" "+e._s(e.$t("tasks.fields.last_comment"))+" ")])])]),e.tasks.length>0?s("tbody",{staticClass:"datatable-body"},e._l(e.displayedTasks,(function(t,i){return s("tr",{key:t+"-"+i,class:{"datatable-row":!0,"datatable-row--selectable":!0,selected:!(!e.selectionGrid||!e.selectionGrid[i])&&e.selectionGrid[i][0]},on:{click:function(t){return e.onLineClicked(i,t)}}},[s("td",{staticClass:"production datatable-row-header datatable-row-header--nobd",attrs:{scope:"row"}},[s("production-name-cell",{attrs:{"is-tooltip":!0,entry:e.productionMap[t.project_id],"only-avatar":!0}})],1),s("task-type-cell",{staticClass:"type datatable-row-header datatable-row-header--nobd",style:{left:e.colTypePosX},attrs:{"production-id":t.project_id,"task-type":e.getTaskType(t)}}),s("td",{staticClass:"name datatable-row-header",style:{left:e.colNamePosX}},[s("div",{staticClass:"flexrow"},[s("entity-thumbnail",{attrs:{"empty-width":60,"empty-height":40,entity:{preview_file_id:t.entity_preview_file_id}}}),s("router-link",{attrs:{to:e.entityPath(t)}},[e._v(" "+e._s(t.full_entity_name)+" ")])],1)]),s("description-cell",{staticClass:"description",attrs:{entry:{description:t.entity_description}}}),s("td",{staticClass:"estimation"},[e._v(" "+e._s(e.formatDuration(t.estimation))+" ")]),s("td",{staticClass:"estimation"},[e._v(" "+e._s(e.formatDuration(t.duration))+" ")]),s("td",{staticClass:"due-date"},[e._v(" "+e._s(e.formatDate(t.due_date))+" ")]),s("validation-cell",{ref:"validation-"+i+"-0",refInFor:!0,staticClass:"status unselectable",attrs:{"task-test":t,"is-border":!1,"is-assignees":!1,selectable:!e.done,clickable:!1,selected:!(!e.selectionGrid||!e.selectionGrid[i])&&e.selectionGrid[i][0],rowX:i,columnY:0,column:t.taskStatus},on:{select:e.onTaskSelected,unselect:e.onTaskUnselected}}),e.done?s("td",{staticClass:"end-date"},[e._v(" "+e._s(e.formatDate(t.end_date))+" ")]):s("last-comment-cell",{staticClass:"last-comment",attrs:{task:t}})],1)})),0):e._e()])]),s("table-info",{attrs:{"is-loading":e.isLoading,"is-error":e.isError}}),0!==e.tasks.length||e.isLoading?e._e():s("div",{staticClass:"has-text-centered empty-list"},[e._m(0),s("p",[e._v(" "+e._s(e.$t("people.no_task_assigned"))+" ")])]),e.tasks.length&&!e.isLoading?s("p",{staticClass:"has-text-centered footer-info"},[e._v(" "+e._s(e.tasks.length)+" "+e._s(e.$tc("tasks.tasks",e.tasks.length))+" ")]):e._e()],1)},n=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("p",[i("img",{attrs:{src:s("f64c")}})])}],a=(s("4160"),s("fb6a"),s("b0c0"),s("5530")),o=s("2f62"),r=s("bb21"),c=s("58f5"),l=s("e60b"),d=s("0fcb"),u=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("div",{staticClass:"flexrow"},[e.task.last_comment.person?s("people-avatar",{staticClass:"flexrow-item avatar-wrapper",attrs:{size:25,"font-size":14,person:e.task.last_comment.person}}):s("span",{staticClass:"no-avatar"}),e.commentText&&e.commentText.length>0?s("span",{staticClass:"flexrow-item last-comment pointer",domProps:{innerHTML:e._s(e.compileMarkdown(e.commentText))},on:{click:e.onClick}}):e.task.last_comment.person?s("span",{staticClass:"flexrow-item last-comment no-comment"},[e._v(" "+e._s(e.$t("main.empty_comment"))+" ")]):e._e()],1)])},p=[],h=s("0e54"),m=s.n(h),f=s("eb8c"),_={name:"last-comment-cell",components:{PeopleAvatar:f["a"]},data:function(){return{isOpen:!1,timeout:null}},props:["task"],computed:Object(a["a"])(Object(a["a"])({},Object(o["c"])([])),{},{commentText:function(){var e=this.task.last_comment.text,t=140,s=e||"";return void 0!==e&&e.length>t&&(s=e.slice(0,t)+"..."),s}}),methods:Object(a["a"])(Object(a["a"])({},Object(o["b"])([])),{},{compileMarkdown:function(e){return m()(e||"")},onClick:function(){this.isOpen=!this.isOpen}})},v=_,g=(s("8ab4"),s("2877")),y=Object(g["a"])(v,u,p,!1,null,"7c166565",null),b=y.exports,k=s("09a4"),w=s("cb0e"),C=s("1338"),S=s("4f18"),T=s("de26"),x=s("3657"),E={name:"todos-list",mixins:[S["a"],C["a"]],components:{EntityThumbnail:r["a"],DescriptionCell:d["a"],LastCommentCell:b,ProductionNameCell:k["a"],TableInfo:l["a"],TaskTypeCell:c["a"],ValidationCell:w["a"]},props:["done","tasks","isLoading","isError","selectionGrid"],data:function(){return{page:1,colTypePosX:"",colNamePosX:""}},mounted:function(){this.page=1,this.resizeHeaders(),window.addEventListener("keydown",this.onKeyDown,!1),this.colTypePosX=this.$refs["th-prod"].offsetWidth+"px",this.colNamePosX=this.$refs["th-prod"].offsetWidth+this.$refs["th-type"].offsetWidth+"px"},beforeDestroy:function(){window.removeEventListener("keydown",this.onKeyDown)},computed:Object(a["a"])(Object(a["a"])({},Object(o["c"])(["nbSelectedTasks","taskTypeMap","productionMap"])),{},{displayedTasks:function(){return this.tasks.slice(0,this.page*T["a"])}}),methods:Object(a["a"])(Object(a["a"])({},Object(o["b"])([])),{},{setScrollPosition:function(e){this.$refs.body&&(this.$refs.body.scrollTop=e)},formatDate:function(e){return e?Object(x["d"])(e):""},onBodyScroll:function(e,t){this.$emit("scroll",t.scrollTop);var s=this.$refs.body.scrollHeight-this.$refs.body.offsetHeight;s<t.scrollTop+100&&this.page++},onLineClicked:function(e,t){var s="validation-"+e+"-0",i=this.$refs[s][0];i.select(t)},onTaskSelected:function(e){var t=this;if(e.isShiftKey){if(this.lastSelection){var s=this.lastSelection.x,i=e.x;e.x<this.lastSelection.x&&(s=e.x,i=this.lastSelection.x);for(var n=s;n<=i;n++){var a="validation-"+n+"-0",o=this.$refs[a][0];this.selectionGrid[n][0]||o.select({ctrlKey:!0,isUserClick:!1})}}}else e.isCtrlKey||this.$store.commit("CLEAR_SELECTED_TASKS");if(this.$store.commit("ADD_SELECTED_TASK",e),!e.isShiftKey&&e.isUserClick){var r=e.x,c=0;this.lastSelection={x:r,y:c};var l="validation-"+r+"-"+c,d=this.$refs[l][0];this.$nextTick((function(){t.scrollToValidationCell(d)}))}},onTaskUnselected:function(e){e.isCtrlKey||1===this.nbSelectedTasks?this.$store.commit("REMOVE_SELECTED_TASK",e):(this.$store.commit("CLEAR_SELECTED_TASKS"),this.$store.commit("ADD_SELECTED_TASK",e))},getTaskType:function(e){var t=this.taskTypeMap[e.task_type_id],s=this.productionMap[e.project_id];return t.episode_id=e.episode_id,s&&"tvshow"===s.production_type&&!e.episode_id&&(t.episode_id=s.first_episode_id),t},entityPath:function(e){var t=e.sequence_name?"shot":"asset",s={name:t,params:{production_id:e.project_id}};"asset"===t?s.params.asset_id=e.entity_id:s.params.shot_id=e.entity_id;var i=this.productionMap[e.project_id],n=e.episode_id;return i&&"tvshow"===i.production_type&&!n&&(n="shot"===t?i.first_episode_id:"main"),n&&(s.name="episode-".concat(t),s.params.episode_id=n),s},onKeyDown:function(e){var t=this.lastSelection?this.lastSelection:{x:0,y:0},s=t.x,i=t.y,n=null;(e.ctrlKey||e.metaKey)&&(37===e.keyCode?n=this.select(s,i-1):38===e.keyCode?n=this.select(s-1,i):39===e.keyCode?n=this.select(s,i+1):40===e.keyCode&&(n=this.select(s+1,i)),this.scrollToValidationCell(n))},scrollToValidationCell:function(e){if(e){var t=20,s=e.$el.getBoundingClientRect(),i=this.$refs.body.getBoundingClientRect(),n=s.bottom>i.bottom-t,a=s.top<i.top+t,o=s.right>i.right-t,r=s.left<i.left+t;if(n){var c=s.bottom-i.bottom+t;this.setScrollPosition(this.$refs.body.scrollTop+c)}else if(a){var l=i.top-s.top+t;this.setScrollPosition(this.$refs.body.scrollTop-l)}if(o){var d=s.right-i.right+t;this.setScrollLeftPosition(this.$refs.body.scrollLeft+d)}else if(r){var u=i.left-s.left+t;this.setScrollLeftPosition(this.$refs.body.scrollLeft-u)}}},select:function(e,t){var s="validation-"+e+"-"+t,i=this.$refs[s];return i&&i[0].$el.click(),i?i[0]:0},resizeHeaders:function(){var e=this,t=this.$refs["body-tbody"],s=t&&t.children;if(s){var i=t.children[0],n=[{index:1,name:"type"},{index:3,name:"name"}];n.forEach((function(t){var s=Math.max(i.children[t.index].offsetWidth,100);e.$refs["th-"+t.name].style["min-width"]="".concat(s,"px")}))}}})},P=E,O=(s("1d9d"),Object(g["a"])(P,i,n,!1,null,"679ccdcf",null));t["a"]=O.exports},e92a:function(e,t,s){},e95c:function(e,t,s){"use strict";var i=s("95cb"),n=s.n(i);n.a},e9c6:function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));s("99af"),s("7db0"),s("4160"),s("b0c0"),s("159b");var i=s("7930"),n=s("ba4c"),a=s.n(n),o={created:function(){this.initHiddenColumns(this.validationColumns,this.hiddenColumns)},mounted:function(){this.resizeHeaders(),window.addEventListener("keydown",this.onKeyDown,!1)},beforeDestroy:function(){window.removeEventListener("keydown",this.onKeyDown)},computed:{},methods:{getBackground:function(e){return i["a"].hexToRGBa(e,.08)},buildHideKey:function(e){return"column-".concat(this.currentProduction.id,"-").concat(e)},initHiddenColumns:function(e,t){var s=this;e&&t&&e.forEach((function(e){var i=s.buildHideKey(e);a.a.set(t,e,"true"===localStorage.getItem(i))}))},hideColumn:function(e){var t=this.buildHideKey(e),s=!0;return"true"===localStorage.getItem(t)&&(s=!1),localStorage.setItem(t,s),a.a.set(this.hiddenColumns,e,s),this.hiddenColumns[e]=s,s},setScrollPosition:function(e){this.$refs.body&&(this.$refs.body.scrollTop=e)},setScrollLeftPosition:function(e){this.$refs.body&&(this.$refs.body.scrollLeft=e)},getValidationStyle:function(e){var t=this.taskTypeMap[e];return{"border-left":"1px solid ".concat(t.color),background:this.getBackground(t.color)}},onTaskSelected:function(e){var t=this,s=[];if(e.isShiftKey){if(this.lastSelection){var i=this.lastSelection.x,n=e.x,a=this.lastSelection.y,o=e.y,r=this.assetSelectionGrid;r||(r=this.shotSelectionGrid),e.x<this.lastSelection.x&&(i=e.x,n=this.lastSelection.x),e.y<this.lastSelection.y&&(a=e.y,o=this.lastSelection.y);for(var c=i;c<=n;c++)for(var l=a;l<=o;l++){var d="validation-"+c+"-"+l,u=this.$refs[d][0];r[c][l]||s.push({entity:u.entity,column:u.column,task:u.task,x:u.rowX,y:u.columnY})}this.$store.commit("ADD_SELECTED_TASK",e)}}else e.isCtrlKey||this.$store.commit("CLEAR_SELECTED_TASKS");if(0===s.length?this.$store.commit("ADD_SELECTED_TASK",e):this.$store.commit("ADD_SELECTED_TASKS",s),!e.isShiftKey&&e.isUserClick){var p=e.x,h=e.y;this.lastSelection={x:p,y:h};var m="validation-"+p+"-"+h,f=this.$refs[m][0];this.$nextTick((function(){t.scrollToValidationCell(f)}))}},onTaskUnselected:function(e){e.isCtrlKey||1===this.nbSelectedTasks?this.$store.commit("REMOVE_SELECTED_TASK",e):(this.$store.commit("CLEAR_SELECTED_TASKS"),this.$store.commit("ADD_SELECTED_TASK",e))},showHeaderMenu:function(e,t){var s=this.$refs.headerMenu.$el;if("header-menu"===s.className)s.className="header-menu hidden";else{s.className="header-menu";var i=t.srcElement.parentNode.parentNode;"TH"!==i.tagName&&(i=i.parentNode);var n=i.getBoundingClientRect(),a=n.left,o=n.bottom,r=Math.max(100,n.width-1);s.style.left=a+"px",s.style.top=o+"px",s.style.width=r+"px"}this.lastHeaderMenuDisplayed=e},showMetadataHeaderMenu:function(e,t){var s=this.$refs.headerMetadataMenu.$el;if("header-menu"===s.className)s.className="header-menu hidden";else{s.className="header-menu";var i=t.srcElement.parentNode.parentNode,n=i.getBoundingClientRect(),a=n.left,o=n.bottom,r=Math.max(100,n.width-1);s.style.left=a+"px",s.style.top=o+"px",s.style.width=r+"px"}this.lastMetadaDataHeaderMenuDisplayed=e},onMinimizeColumnToggled:function(){this.hideColumn(this.lastHeaderMenuDisplayed),this.showHeaderMenu()},onDeleteAllTasksClicked:function(){this.$emit("delete-all-tasks",this.lastHeaderMenuDisplayed),this.showHeaderMenu()},onAddMetadataClicked:function(){this.$emit("add-metadata")},onEditMetadataClicked:function(){this.$emit("edit-metadata",this.lastMetadaDataHeaderMenuDisplayed),this.showMetadataHeaderMenu()},onDeleteMetadataClicked:function(){this.$emit("delete-metadata",this.lastMetadaDataHeaderMenuDisplayed),this.showMetadataHeaderMenu()},resizeSplittedTableHeaders:function(e){var t=this;if(this.$refs["body-tbody"]&&this.$refs["body-tbody"].length>0&&this.$refs["body-tbody"][0].children.length>1){var s=this.$refs["body-tbody"][0].children[1];e.forEach((function(e){var i=s.children[e.index].offsetWidth;t.$refs["th-"+e.name]&&(t.$refs["th-"+e.name].style["min-width"]="".concat(i,"px"))}))}},onSortByTaskTypeClicked:function(){var e=this.lastHeaderMenuDisplayed;this.$emit("change-sort",{type:"status",column:e,name:this.taskTypeMap[e].name}),this.showHeaderMenu()},onSortByMetadataClicked:function(){var e=this.lastMetadaDataHeaderMenuDisplayed,t=this.currentProduction.descriptors.find((function(t){return t.id===e}));this.$emit("change-sort",{type:"metadata",column:t.field_name,name:t.name}),this.showMetadataHeaderMenu()},getGroupKey:function(e,t,s){var i=e[0]?e[0][s]+e[0].canceled:"";return"".concat(t,"-").concat(i)}}}},ea21:function(e,t,s){"use strict";var i=s("2575"),n=s.n(i);n.a},ea46:function(e,t,s){"use strict";var i=s("d8a5"),n=s.n(i);n.a},eaa7:function(e,t,s){},eb23:function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var i={created:function(){},mounted:function(){},beforeDestroy:function(){},computed:{},methods:{clearFocus:function(){document.activeElement.blur()},focusInput:function(e){e.focus(),e.setSelectionRange(0,e.value.length),e.className="input"},onInputBlur:function(e){e.target.className="input stylehidden"},onInputMouseOut:function(e){document.activeElement!==e.target&&(e.target.className="input stylehidden")},onInputMouseOver:function(e){e.target.className="input"},pauseEvent:function(e){return e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.cancelBubble=!0,e.returnValue=!1,!1}}}},eb8c:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.isLink?s("span",{staticClass:"avatar has-text-centered",style:{background:e.person.color,width:e.size+"px",height:e.size+"px","min-width":e.size+"px","min-height":e.size+"px","font-size":e.person.has_avatar?0:e.fontSize+"px"}},[s("router-link",{staticClass:"avatar-link",attrs:{to:{name:"person",params:{person_id:e.person.id}},title:e.person.full_name}},[e.person.has_avatar&&e.noCache?s("img",{attrs:{src:e.avatarPath}}):e.person.has_avatar?s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.avatarPath,expression:"avatarPath"}],key:e.avatarKey}):e._e(),e.person.has_avatar?e._e():s("span",[e._v(" "+e._s(e.initials)+" ")])])],1):s("span",{staticClass:"avatar has-text-centered",style:{background:e.person.color,width:e.size+"px",height:e.size+"px","font-size":e.fontSize+"px"},attrs:{title:e.person.full_name}},[e.person.has_avatar&&e.noCache?s("img",{attrs:{src:e.avatarPath}}):e.person.has_avatar?s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.avatarPath,expression:"avatarPath"}],key:e.avatarKey}):s("span",[e._v(" "+e._s(e.initials)+" ")])])},n=[],a=(s("a9e3"),{name:"person-avatar",data:function(){return{avatarPath:"",avatarKey:"",initials:""}},props:{person:{type:Object,default:function(){return{id:"empty",color:"#FFF"}}},size:{type:Number,default:40},"font-size":{type:Number,default:18},"is-link":{type:Boolean,default:!0},"no-cache":{type:Boolean,default:!1}},created:function(){this.reloadAvatar()},methods:{reloadAvatar:function(){this.avatarPath=this.person.avatarPath+"?unique="+this.person.uniqueHash,this.avatarKey=this.person.id+"-"+this.person.uniqueHash}},mounted:function(){this.initials=this.person.initials},watch:{person:function(){this.reloadAvatar()},"person.uniqueHash":function(){this.reloadAvatar()}}}),o=a,r=(s("8bc7"),s("2877")),c=Object(r["a"])(o,i,n,!1,null,"be351bf6",null);t["a"]=c.exports},ec12:function(e,t,s){},edbf:function(e,t,s){"use strict";s("99af"),s("d3b7");var i=s("db82"),n=s.n(i),a=(s("ac1f"),s("5319"),{backToLogin:function(){"/login"!==window.location&&window.location.replace("/login")}}),o=a,r={get:function(e,t){n.a.get(e).end((function(e,s){t(e,s.body)}))},post:function(e,t,s){n.a.post(e).send(t).end((function(e,t){if(401===t.statusCode)return o.backToLogin();s(e,t.body)}))},put:function(e,t,s){n.a.put(e).send(t).end((function(e,t){if(401===t.statusCode)return o.backToLogin();s(e,t.body)}))},del:function(e,t){n.a.del(e).end((function(e,s){if(401===s.statusCode)return o.backToLogin();t(e,s.body)}))},pget:function(e){return new Promise((function(t,s){r.get(e,(function(e,i){e?s(e):t(i)}))}))},ppost:function(e,t,s){return new Promise((function(s,i){n.a.post(e).send(t).end((function(e,t){401===t.statusCode?(o.backToLogin(),i(e)):e?i(e):s(t.body)}))}))},pput:function(e,t,s){return new Promise((function(s,i){n.a.put(e).send(t).end((function(e,t){401===t.statusCode?(o.backToLogin(),i(e)):e?i(e):s(t.body)}))}))},pdel:function(e,t){return new Promise((function(t,s){n.a.del(e).end((function(e,i){401===i.statusCode?(o.backToLogin(),s(e)):e?s(e):t(i.body)}))}))},getModel:function(e,t){var s="/api/data/".concat(e,"/").concat(t);return r.pget(s)},getEvents:function(e,t){var s="/api/data/events/last?after=".concat(e,"&before=").concat(t,"&page_size=100000");return r.pget(s)}};t["a"]=r},edda:function(e,t,s){"use strict";var i=s("4dac"),n=s.n(i);n.a},ee35:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{modal:!0,"is-active":e.active}},[s("div",{staticClass:"modal-background",on:{click:function(t){return e.$emit("cancel")}}}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"box content"},[e.isEditing?s("h1",{staticClass:"title"},[e._v(" "+e._s(e.$t("tasks.change_preview"))+" ")]):s("h1",{staticClass:"title"},[e._v(" "+e._s(e.$t("tasks.add_preview"))+" ")]),s("p",[e._v(" "+e._s(e.$t("tasks.select_preview_file"))+" ")]),s("file-upload",{ref:"preview-field",attrs:{label:e.$t("main.csv.upload_file"),accept:e.extensions,multiple:!0},on:{fileselected:e.onFileSelected}}),e.isError?s("p",{staticClass:"error"},[e._v(" "+e._s(e.$t("tasks.add_preview_error"))+" ")]):e._e(),s("p",{staticClass:"has-text-right"},[s("a",{class:{button:!0,"is-primary":!0,"is-loading":e.isLoading,"is-disabled":void 0==e.forms},on:{click:function(t){return e.$emit("confirm")}}},[e._v(" "+e._s(e.$t("main.confirmation"))+" ")]),s("button",{staticClass:"button is-link",on:{click:function(t){return e.$emit("cancel")}}},[e._v(" "+e._s(e.$t("main.cancel"))+" ")])])],1)])])},n=[],a=s("5530"),o=s("2f62"),r=s("d065"),c=s("4085"),l={name:"add-preview-modal",mixins:[r["a"]],components:{FileUpload:c["a"]},props:{active:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},isError:{type:Boolean,default:!1},isEditing:{type:Boolean,default:!1},extensions:{type:String,default:".png,.jpg,.mp4,.mov,.obj,.pdf,.ma,.mb,.zip,.rar,.jpeg,.blend,.wmv,.m4v,.mkv,.ai,.comp,.exr,.psd,.hip,.gif,.ae,.fla,.flv,.swf,.avi"}},data:function(){return{forms:null}},mounted:function(){this.forms=null},computed:Object(a["a"])({},Object(o["c"])([])),methods:Object(a["a"])(Object(a["a"])({},Object(o["b"])([])),{},{onFileSelected:function(e){this.forms=e,this.$emit("fileselected",e)},reset:function(){this.$refs["preview-field"].reset(),this.forms=null}}),watch:{active:function(){this.reset()}}},d=l,u=(s("ad12"),s("2877")),p=Object(u["a"])(d,i,n,!1,null,"3382e010",null);t["a"]=p.exports},ef8b:function(e,t,s){"use strict";s("4de4"),s("c740"),s("4160"),s("d81d"),s("a434"),s("b0c0"),s("b64b"),s("d3b7"),s("159b");var i,n=s("ade3"),a=s("5530"),o=s("ba4c"),r=s.n(o),c=(s("a9e3"),s("edbf")),l={getTaskTypes:function(){return c["a"].pget("/api/data/task-types")},newTaskType:function(e){var t={name:e.name,color:e.color,priority:Number(e.priority),for_shots:Boolean("true"===e.for_shots),allow_timelog:Boolean("true"===e.allow_timelog)};return c["a"].ppost("/api/data/task-types/",t)},updateTaskType:function(e){var t={name:e.name,color:e.color};return e.priority&&e.priority>0&&(t.priority=Number(e.priority)),void 0!==e.allow_timelog&&(t.allow_timelog=Boolean("true"===e.allow_timelog)),void 0!==e.for_shots&&(t.for_shots=Boolean("true"===e.for_shots)),c["a"].pput("/api/data/task-types/".concat(e.id),t)},deleteTaskType:function(e){return c["a"].pdel("/api/data/task-types/".concat(e.id))},getTaskType:function(e){return c["a"].pget("/api/data/task-types/".concat(e))}},d=s("2229"),u=s("9fb0"),p={taskTypes:[],taskTypeMap:{},sequenceSubscriptions:{},editTaskType:{isLoading:!1,isError:!1},deleteTaskType:{isLoading:!1,isError:!1}},h=Object(a["a"])({},p),m={taskTypes:function(e){return e.taskTypes},taskTypeMap:function(e){return e.taskTypeMap},sequenceSubscriptions:function(e){return e.sequenceSubscriptions},editTaskType:function(e){return e.editTaskType},deleteTaskType:function(e){return e.deleteTaskType},currentTaskType:function(e,t,s){return e.taskTypeMap[s.route.params.task_type_id]||{}},assetTaskTypes:function(e,t,s,i){return i.productionTaskTypes.filter((function(e){return!e.for_shots}))},shotTaskTypes:function(e,t,s,i){return i.productionTaskTypes.filter((function(e){return e.for_shots}))},getTaskTypeOptions:function(e){return e.taskTypes.map((function(e){return{label:e.name,value:e.id}}))},getAssetTaskTypeOptions:function(e,t){return t.assetTaskTypes.map((function(e){return{label:e.name,value:e.id}}))},getShotTaskTypeOptions:function(e,t){return t.shotTaskTypes.map((function(e){return{label:e.name,value:e.id}}))},getTaskType:function(e,t){return function(t){return e.taskTypeMap[t]}}},f={loadTaskTypes:function(e){var t=e.commit;e.state;return t(u["Yc"]),l.getTaskTypes().then((function(e){t(u["Wc"],e),Promise.resolve(e)})).catch((function(e){console.error(e),Promise.reject(e)}))},loadTaskType:function(e,t){var s=e.commit;e.state;return l.getTaskType(t).then((function(e){s(u["Nb"],e),Promise.resolve(e)})).catch((function(e){console.error(e),Promise.reject(e)}))},newTaskType:function(e,t){var s=e.commit;e.state;return s(u["Pb"],t),l.newTaskType(t).then((function(e){s(u["Nb"],e),Promise.resolve(e)}))},editTaskType:function(e,t){var s=e.commit;e.state;return s(u["Pb"]),l.updateTaskType(t).then((function(e){s(u["Nb"],e),Promise.resolve(e)}))},deleteTaskType:function(e,t){var s=e.commit;e.state;return s(u["rb"]),l.deleteTaskType(t).then((function(){s(u["pb"],t),Promise.resolve(t)}))},initTaskType:function(e,t){e.commit;var s=e.dispatch,i=(e.state,e.rootState,e.rootGetters);return new Promise((function(e,n){i.currentTaskType.for_shots?Object.keys(i.shotMap).length<2||t?0===i.episodes.length&&i.isTVShow?s("loadEpisodes").then((function(){return s("loadShots",(function(t){t?n(t):e()}))})).catch(n):s("loadShots",(function(t){t?n(t):e()})):e():Object.keys(i.assetMap).length<2||t?s("loadAssets").then(e).catch(n):e()}))}},_=(i={},Object(n["a"])(i,u["Yc"],(function(e){})),Object(n["a"])(i,u["Xc"],(function(e){e.taskTypes=[],e.taskTypeMap={}})),Object(n["a"])(i,u["Wc"],(function(e,t){e.taskTypes=Object(d["n"])(t),e.taskTypeMap={},t.forEach((function(t){e.taskTypeMap[t.id]=t}))})),Object(n["a"])(i,u["Pb"],(function(e,t){e.editTaskType.isLoading=!0,e.editTaskType.isError=!1})),Object(n["a"])(i,u["Ob"],(function(e){e.editTaskType.isLoading=!1,e.editTaskType.isError=!0})),Object(n["a"])(i,u["Nb"],(function(e,t){var s=e.taskTypeMap[t.id];s&&s.id?Object.assign(s,t):(e.taskTypes.push(t),e.taskTypeMap[t.id]=t),e.taskTypes=Object(d["n"])(e.taskTypes),e.editTaskType={isLoading:!1,isError:!1}})),Object(n["a"])(i,u["rb"],(function(e){e.deleteTaskType={isLoading:!0,isError:!1}})),Object(n["a"])(i,u["qb"],(function(e){e.deleteTaskType={isLoading:!1,isError:!0}})),Object(n["a"])(i,u["pb"],(function(e,t){var s=e.taskTypes.findIndex((function(e){return e.id===t.id}));s>=0&&e.taskTypes.splice(s,1),delete e.taskTypeMap[t.id],e.deleteTaskType={isLoading:!1,isError:!1}})),Object(n["a"])(i,u["Ic"],(function(e,t){var s=t.sequenceId,i=t.subscribed;r.a.set(e.sequenceSubscriptions,s,i)})),Object(n["a"])(i,u["Jc"],(function(e,t){e.sequenceSubscriptions={},t.forEach((function(t){e.sequenceSubscriptions[t]=!0}))})),Object(n["a"])(i,u["Vd"],(function(e){Object.assign(e,Object(a["a"])({},p))})),i);t["a"]={state:h,getters:m,actions:f,mutations:_}},f420:function(e,t,s){},f54c:function(e,t,s){"use strict";var i=s("b16f"),n=s.n(i);n.a},f64c:function(e,t,s){e.exports=s.p+"img/empty_todo.1f922c20.png"},f73f:function(e,t,s){},f83f:function(e,t,s){"use strict";s("4de4"),s("7db0"),s("c740"),s("4160"),s("d81d"),s("45fc"),s("a434"),s("b0c0"),s("d3b7"),s("159b");var i,n=s("ade3"),a=s("5530"),o=s("ba4c"),r=s.n(o),c=(s("99af"),s("ddb0"),s("edbf")),l={getProductions:function(e){c["a"].get("/api/data/projects/all",e)},getProduction:function(e){return c["a"].getModel("projects",e)},getOpenProductions:function(e){c["a"].get("/api/data/projects/open",e)},getProductionStatus:function(e){c["a"].get("/api/data/project-status",e)},newProduction:function(e){var t={name:e.name,project_status_id:e.project_status_id,production_type:e.production_type};return c["a"].ppost("/api/data/projects/",t)},updateProduction:function(e){var t={name:e.name,project_status_id:e.project_status_id,production_type:e.production_type,fps:e.fps,ratio:e.ratio,resolution:e.resolution,start_date:e.start_date,end_date:e.end_date,man_days:e.man_days};return c["a"].pput("/api/data/projects/".concat(e.id),t)},postAvatar:function(e,t,s){c["a"].post("/api/pictures/thumbnails/projects/".concat(e),t,s)},deleteProduction:function(e){return c["a"].pdel("/api/data/projects/".concat(e.id,"?force=true"))},addPersonToTeam:function(e,t){var s={person_id:t};return c["a"].ppost("/api/data/projects/".concat(e,"/team"),s)},removePersonFromTeam:function(e,t){return c["a"].pdel("/api/data/projects/".concat(e,"/team/").concat(t))},addAssetTypeToProduction:function(e,t){var s={asset_type_id:t},i="/api/data/projects/".concat(e,"/settings/asset-types");return c["a"].ppost(i,s)},removeAssetTypeFromProduction:function(e,t){var s="/api/data/projects/".concat(e,"/settings/asset-types/").concat(t);return c["a"].pdel(s)},addTaskTypeToProduction:function(e,t){var s={task_type_id:t},i="/api/data/projects/".concat(e,"/settings/task-types");return c["a"].ppost(i,s)},removeTaskTypeFromProduction:function(e,t){var s="/api/data/projects/".concat(e,"/settings/task-types/").concat(t);return c["a"].pdel(s)},addTaskStatusToProduction:function(e,t){var s={task_status_id:t},i="/api/data/projects/".concat(e,"/settings/task-status");return c["a"].ppost(i,s)},removeTaskStatusFromProduction:function(e,t){var s="/api/data/projects/".concat(e,"/settings/task-status/").concat(t);return c["a"].pdel(s)},addMetadataDescriptor:function(e,t){return new Promise((function(s,i){var n={name:t.name,choices:t.values,for_client:"true"===t.for_client,entity_type:t.entity_type};c["a"].post("/api/data/projects/".concat(e,"/metadata-descriptors"),n,(function(e,t){e?i(e):s(t)}))}))},getMetadataDescriptor:function(e,t){return new Promise((function(s,i){c["a"].get("/api/data/projects/".concat(e,"/metadata-descriptors/").concat(t),(function(e,t){e?i(e):s(t)}))}))},updateMetadataDescriptor:function(e,t){return new Promise((function(s,i){var n={id:t.id,name:t.name,choices:t.values,for_client:"true"===t.for_client,entity_type:t.entity_type};c["a"].put("/api/data/projects/".concat(e,"/metadata-descriptors/").concat(t.id),n,(function(e,t){e?i(e):s(t)}))}))},deleteMetadataDescriptor:function(e,t){return new Promise((function(s,i){c["a"].del("/api/data/projects/".concat(e,"/metadata-descriptors/").concat(t),(function(e){e?i(e):s()}))}))}},d=s("2229"),u=s("66e7"),p=s("9fb0"),h={productions:[],productionMap:{},openProductions:[],productionStatus:[],productionStatusMap:{},currentProduction:null,productionAvatarFormData:null,isProductionsLoading:!1,isProductionsLoadingError:!1,isOpenProductionsLoading:!1,assetsPath:{name:"open-productions"},assetTypesPath:{name:"open-productions"},shotsPath:{name:"open-productions"},sequencesPath:{name:"open-productions"},episodesPath:{name:"open-productions"},breakdownPath:{name:"open-productions"},playlistsPath:{name:"open-productions"},teamPath:{name:"open-productions"}},m=Object(a["a"])({},h),f={getProductionComponentPath:function(e,t,s){return s?{name:"episode-"+e,params:{episode_id:s,production_id:t}}:t?{name:e,params:{production_id:t}}:{name:"open-productions"}},isEmptyArray:function(e,t){return!e||!e[t]||0===e[t].length}},_={productions:function(e){return e.productions},productionMap:function(e){return e.productionMap},productionStatusMap:function(e){return e.productionStatusMap},openProductions:function(e){return e.openProductions},productionStatus:function(e){return e.productionStatus},productionAvatarFormData:function(e){return e.productionAvatarFormData},isProductionsLoading:function(e){return e.isProductionsLoading},isProductionsLoadingError:function(e){return e.isProductionsLoadingError},isOpenProductionsLoading:function(e){return e.isOpenProductionsLoading},assetsPath:function(e){return e.assetsPath},assetTypesPath:function(e){return e.assetTypesPath},shotsPath:function(e){return e.shotsPath},sequencesPath:function(e){return e.sequencesPath},episodesPath:function(e){return e.episodesPath},breakdownPath:function(e){return e.breakdownPath},playlistsPath:function(e){return e.playlistsPath},teamPath:function(e){return e.teamPath},productionAssetTypes:function(e,t,s){return f.isEmptyArray(e.currentProduction,"asset_types")?s.assetTypes.assetTypes:Object(d["d"])(e.currentProduction.asset_types.map((function(e){return s.assetTypes.assetTypeMap[e]})))},productionTaskStatuses:function(e,t,s){return f.isEmptyArray(e.currentProduction,"task_statuses")?s.taskStatus.taskStatus:Object(d["d"])(e.currentProduction.task_statuses.map((function(e){return s.taskStatus.taskStatusMap[e]})))},getProductionTaskStatuses:function(e,t,s){return function(t){var i=e.productionMap[t];return f.isEmptyArray(i,"task_statuses")?s.taskStatus.taskStatus:Object(d["d"])(i.task_statuses.map((function(e){return s.taskStatus.taskStatusMap[e]})))}},productionTaskTypes:function(e,t,s){return f.isEmptyArray(e.currentProduction,"task_types")?s.taskTypes.taskTypes:Object(d["d"])(e.currentProduction.task_types.map((function(e){return s.taskTypes.taskTypeMap[e]})))},currentProduction:function(e){return e.currentProduction?e.currentProduction:e.openProductions.length>0?e.openProductions[0]:null},isTVShow:function(e){var t=_.currentProduction(e);return t&&"tvshow"===t.production_type},assetMetadataDescriptors:function(e){return e.currentProduction&&e.currentProduction.descriptors?Object(d["d"])(e.currentProduction.descriptors.filter((function(e){return"Asset"===e.entity_type}))):[]},shotMetadataDescriptors:function(e){return e.currentProduction&&e.currentProduction.descriptors?Object(d["d"])(e.currentProduction.descriptors.filter((function(e){return"Shot"===e.entity_type}))):[]},productionAssetTypeOptions:function(e,t){return t.productionAssetTypes.map((function(e){return{label:e.name,value:e.id}}))},productionStatusOptions:function(e){return e.productionStatus.map((function(e){return{label:e.name,value:e.id}}))},openProductionOptions:function(e){return e.openProductions.map((function(e){return{label:e.name,value:e.id}}))}},v={loadProductionStatus:function(e,t){var s=e.commit;e.state;s(p["Gc"]),l.getProductionStatus((function(e,i){e?s(p["Fc"]):s(p["Ec"],i),t&&t(e)}))},loadOpenProductions:function(e,t){var s=e.commit;e.state;s(p["pc"]),l.getOpenProductions((function(e,i){e?s(p["oc"]):s(p["nc"],i),t&&t(e)}))},loadProductions:function(e,t){var s=e.commit;e.state;s(p["Dc"]),l.getProductions((function(e,i){e?s(p["Cc"]):s(p["Bc"],i),t&&t(e)}))},loadProduction:function(e,t){var s=e.commit,i=e.state;return l.getProduction(t).then((function(e){i.productionMap[e.id]?s(p["Se"],e):s(p["m"],e)})).catch((function(e){return console.error(e)}))},newProduction:function(e,t){var s=e.commit;e.state;return s(p["Hb"],t),l.newProduction(t).then((function(e){s(p["Fb"],e)}))},editProduction:function(e,t){var s=e.commit;e.state;return s(p["Hb"]),l.updateProduction(t).then((function(e){s(p["Fb"],e)}))},deleteProduction:function(e,t){var s=e.commit;e.state;return s(p["mb"]),l.deleteProduction(t).then((function(){s(p["Nd"],t),s(p["kb"])}))},setProduction:function(e,t){var s=e.commit,i=e.rootGetters;if(s(p["je"],t),s(p["P"]),s(p["U"]),i.isTVShow){var n=i.currentEpisode,a=n?n.id:null;t&&a&&s(p["Wd"],{productionId:t,episodeId:a})}else t&&s(p["Wd"],{productionId:t})},storeProductionPicture:function(e,t){var s=e.commit;s(p["Bd"],t)},uploadProductionAvatar:function(e,t){var s=e.commit,i=e.state;return new Promise((function(e,n){l.postAvatar(t,i.productionAvatarFormData,(function(i){s(p["Ad"],t),i?n(i):e()}))}))},addPersonToTeam:function(e,t){var s=e.commit,i=e.state;return s(p["He"],t.id),l.addPersonToTeam(i.currentProduction.id,t.id)},removePersonFromTeam:function(e,t){var s=e.commit,i=e.state;return s(p["Ie"],t.id),l.removePersonFromTeam(i.currentProduction.id,t.id)},addAssetTypeToProduction:function(e,t){var s=e.commit,i=e.state;return s(p["xd"],t),l.addAssetTypeToProduction(i.currentProduction.id,t)},removeAssetTypeFromProduction:function(e,t){var s=e.commit,i=e.state;return s(p["Cd"],t),l.removeAssetTypeFromProduction(i.currentProduction.id,t)},addTaskTypeToProduction:function(e,t){var s=e.commit,i=e.state;return s(p["zd"],t),l.addTaskTypeToProduction(i.currentProduction.id,t)},removeTaskTypeFromProduction:function(e,t){var s=e.commit,i=e.state;return s(p["Ed"],t),l.removeTaskTypeFromProduction(i.currentProduction.id,t)},addTaskStatusToProduction:function(e,t){var s=e.commit,i=e.state;return s(p["yd"],t),l.addTaskStatusToProduction(i.currentProduction.id,t)},removeTaskStatusFromProduction:function(e,t){var s=e.commit,i=e.state;return s(p["Dd"],t),l.removeTaskStatusFromProduction(i.currentProduction.id,t)},addMetadataDescriptor:function(e,t){var s=e.commit,i=e.state;if(t.id){var n=i.currentProduction.descriptors.find((function(e){return e.id===t.id})).field_name;return l.updateMetadataDescriptor(i.currentProduction.id,t).then((function(e){s(p["Qe"],{production:i.currentProduction,previousDescriptorFieldName:n,descriptor:e})}))}return l.addMetadataDescriptor(i.currentProduction.id,t)},deleteMetadataDescriptor:function(e,t){var s=e.commit,i=e.state;return new Promise((function(e,n){return l.deleteMetadataDescriptor(i.currentProduction.id,t).then((function(){s(p["eb"],{id:t}),e()})).catch(n)}))},refreshMetadataDescriptor:function(e,t){var s=e.commit,i=e.state;return new Promise((function(e,n){return l.getMetadataDescriptor(i.currentProduction.id,t).then((function(t){var n={};i.openProductions.forEach((function(e){e.descriptors||r.a.set(e,"descriptors",[]),e.descriptors.forEach((function(e){n[e.id]=e}))})),n[t.id]?s(p["Qe"],{production:i.productionMap[t.project_id],descriptor:t}):s(p["f"],{production:i.productionMap[t.project_id],descriptor:t}),e()})).catch(n)}))}},g=(i={},Object(n["a"])(i,p["Dc"],(function(e){e.productions=[],e.isProductionsLoading=!0,e.isProductionsLoadingError=!1})),Object(n["a"])(i,p["Cc"],(function(e){e.productions=[],e.isProductionsLoading=!1,e.isProductionsLoadingError=!0})),Object(n["a"])(i,p["Bc"],(function(e,t){e.isProductionsLoading=!1,e.isProductionsLoadingError=!1,e.productions=Object(d["h"])(t);var s={},i=function(e){s[e.id]||(s[e.id]=e)};e.openProductions.forEach(i),e.productions.forEach(i),e.productionMap=s})),Object(n["a"])(i,p["pc"],(function(e){e.isOpenProductionsLoading=!0,e.openProductions=[]})),Object(n["a"])(i,p["oc"],(function(e){e.isOpenProductionsLoading=!1})),Object(n["a"])(i,p["nc"],(function(e,t){e.isOpenProductionsLoading=!1,e.openProductions=Object(d["d"])(t);var s={};t.forEach((function(e){s[e.id]=e})),e.productionMap=s,!e.currentProduction&&e.openProductions.length>0&&(e.currentProduction=e.openProductions[0])})),Object(n["a"])(i,p["Gc"],(function(e){e.productionStatus=[]})),Object(n["a"])(i,p["Fc"],(function(e){})),Object(n["a"])(i,p["Ec"],(function(e,t){var s={};t.forEach((function(e){s[e.id]=e})),e.productionStatus=t,e.productionStatusMap=s})),Object(n["a"])(i,p["Hb"],(function(e,t){})),Object(n["a"])(i,p["Gb"],(function(e){})),Object(n["a"])(i,p["Fb"],(function(e,t){var s=e.productionStatusMap[t.project_status_id],i=e.productions.find((function(e){return e.id===t.id})),n=e.openProductions.find((function(e){return e.id===t.id}));if(t.project_status_name=s.name,i){var a=e.openProductions.findIndex((function(e){return e.id===t.id}));t.project_status_id&&(a>=0&&i.project_status_id!==t.project_status_id?e.openProductions.splice(a,1):a<0&&(e.openProductions=Object(d["d"])(e.openProductions))),t.production_type&&t.production_type!==i.production_type&&"short"===t.production_type&&(i.first_episode_id=void 0,n.first_episode_id=void 0),Object.assign(i,t),n&&Object.assign(n,t)}else t.team=[],t.task_statuses=[],t.asset_types=[],t.task_types=[],e.productions.push(t),e.productionMap[t.id]=t,n||(e.openProductions.push(t),e.openProductions=Object(d["d"])(e.openProductions)),e.productions=Object(d["h"])(e.productions)})),Object(n["a"])(i,p["m"],(function(e,t){e.productions.push(t),e.openProductions.push(t),e.productions=Object(d["h"])(e.productions),e.openProductions=Object(d["d"])(e.openProductions),e.productionMap[t.id]=t})),Object(n["a"])(i,p["Se"],(function(e,t){var s=e.productionMap[t.id],i=e.productionStatusMap[t.project_status_id],n=e.openProductions.find((function(e){return e.id===t.id})),a=s.project_status_id!==i.id;t.project_status_name=i.name,Object.assign(s,t),n&&Object.assign(n,t),a&&("Open"===t.project_status_name?e.openProductions.push(s):e.openProductions=Object(u["h"])(e.openProductions,s)),e.productions=Object(d["h"])(e.productions),e.openProductions=Object(d["d"])(e.openProductions)})),Object(n["a"])(i,p["mb"],(function(e){})),Object(n["a"])(i,p["lb"],(function(e){})),Object(n["a"])(i,p["Nd"],(function(e,t){e.productions=Object(u["h"])(e.productions,t),e.openProductions=Object(u["h"])(e.openProductions,t),delete e.productionMap[t.id]})),Object(n["a"])(i,p["kb"],(function(e,t){})),Object(n["a"])(i,p["Bd"],(function(e,t){e.productionAvatarFormData=t})),Object(n["a"])(i,p["Ad"],(function(e,t){var s=e.productionMap[t];s&&(s.has_avatar=!0)})),Object(n["a"])(i,p["je"],(function(e,t){var s=e.productionMap[t];e.currentProduction=s})),Object(n["a"])(i,p["Wd"],(function(e,t){var s=t.productionId,i=t.episodeId;e.assetsPath=f.getProductionComponentPath("assets",s,i),e.assetTypesPath=f.getProductionComponentPath("production-asset-types",s,i),e.shotsPath=f.getProductionComponentPath("shots",s,i),e.sequencesPath=f.getProductionComponentPath("sequences",s,i),e.episodesPath=f.getProductionComponentPath("episodes",s),e.breakdownPath=f.getProductionComponentPath("breakdown",s,i),e.playlistsPath=f.getProductionComponentPath("playlists",s,i),e.teamPath=f.getProductionComponentPath("team",s)})),Object(n["a"])(i,p["He"],(function(e,t){Object(u["a"])(e.currentProduction,"team",t)})),Object(n["a"])(i,p["Ie"],(function(e,t){Object(u["g"])(e.currentProduction,"team",t)})),Object(n["a"])(i,p["xd"],(function(e,t){Object(u["a"])(e.currentProduction,"asset_types",t)})),Object(n["a"])(i,p["Cd"],(function(e,t){Object(u["g"])(e.currentProduction,"asset_types",t)})),Object(n["a"])(i,p["yd"],(function(e,t){Object(u["a"])(e.currentProduction,"task_statuses",t)})),Object(n["a"])(i,p["Dd"],(function(e,t){Object(u["g"])(e.currentProduction,"task_statuses",t)})),Object(n["a"])(i,p["zd"],(function(e,t){Object(u["a"])(e.currentProduction,"task_types",t)})),Object(n["a"])(i,p["Ed"],(function(e,t){Object(u["g"])(e.currentProduction,"task_types",t)})),Object(n["a"])(i,p["f"],(function(e,t){var s=t.production,i=t.descriptor;s&&(s.descriptors?s.descriptors.push(i):r.a.set(s,"descriptors",[i]))})),Object(n["a"])(i,p["Qe"],(function(e,t){var s=t.production,i=t.descriptor;s&&(s.descriptors?Object(u["i"])(s.descriptors,i):r.a.set(s,"descriptors",[]))})),Object(n["a"])(i,p["eb"],(function(e,t){var s=e.openProductions.find((function(e){return e.descriptors.find((function(e){return e.id===t.id}))}));s&&(s.descriptors=Object(u["h"])(s.descriptors,t))})),Object(n["a"])(i,p["s"],(function(e,t){var s=t.personId,i=e.currentProduction&&e.currentProduction.team.some((function(e){return e===s}));!i&&e.currentProduction&&e.currentProduction.team.push(s)})),Object(n["a"])(i,p["Vd"],(function(e){Object.assign(e,Object(a["a"])({},h))})),i);t["a"]={state:m,getters:_,actions:v,mutations:g}},f883:function(e,t,s){"use strict";var i=s("c20f"),n=s.n(i);n.a},fa53:function(e,t,s){"use strict";s("99af"),s("4de4"),s("7db0"),s("c740"),s("4160"),s("caad"),s("d81d"),s("13d5"),s("a434"),s("b0c0"),s("b64b"),s("d3b7"),s("2532"),s("159b");var i,n=s("ade3"),a=s("2909"),o=s("5530"),r=s("2f24"),c=s("edbf"),l={getTask:function(e,t){return c["a"].pget("/api/data/tasks/".concat(e,"/full"))},updateTask:function(e,t,s){return c["a"].pput("/api/data/tasks/".concat(e),t,s)},getTaskStatuses:function(e){c["a"].get("/api/data/task-status",e)},getTaskSubscribed:function(e,t){return c["a"].pget("/api/data/user/tasks/".concat(e,"/subscribed"))},subscribeToTask:function(e,t){return c["a"].ppost("/api/actions/user/tasks/".concat(e,"/subscribe"),{})},unsubscribeFromTask:function(e,t){return c["a"].pdel("/api/actions/user/tasks/".concat(e,"/unsubscribe"))},getTaskComments:function(e,t){return c["a"].pget("/api/data/tasks/".concat(e,"/comments"))},getTaskPreviews:function(e,t){return c["a"].pget("/api/data/tasks/".concat(e,"/previews"))},commentTask:function(e){var t={task_status_id:e.taskStatusId,comment:e.comment,checklist:e.checklist||[]};if(e.attachment&&e.attachment.length>0){t=new FormData;var s=0;e.attachment.forEach((function(e){t.append("file-"+s,e.get("file")),s++})),t.set("task_status_id",e.taskStatusId),t.set("comment",e.comment),t.set("checklist",JSON.stringify(e.checklist||[]))}return c["a"].ppost("/api/actions/tasks/".concat(e.taskId,"/comment"),t)},commentTasks:function(e,t){return c["a"].ppost("/api/actions/projects/".concat(e,"/tasks/comment-many"),t)},getTaskComment:function(e,t){return c["a"].pget("/api/data/comments/".concat(e.id))},editTaskComment:function(e,t){var s={text:e.text,task_status_id:e.task_status_id,checklist:e.checklist};return c["a"].pput("/api/data/comments/".concat(e.id),s)},deleteTaskComment:function(e,t,s){return c["a"].pdel("/api/data/tasks/".concat(e,"/comments/").concat(t))},createTasks:function(e){var t=e.task_type_id,s=e.type,i=e.project_id,n=e.entityIds;return c["a"].ppost("/api/actions/projects/".concat(i,"/task-types/").concat(t,"/").concat(s,"/")+"create-tasks",n)},createTask:function(e,t){var s=e.entity_id,i=e.task_type_id,n=e.type,a=e.project_id;c["a"].post("/api/actions/projects/".concat(a,"/task-types/").concat(i,"/").concat(n,"/")+"create-tasks?id=".concat(s),{},t)},deleteTask:function(e,t){c["a"].del("/api/data/tasks/".concat(e.id,"?force=true"),t)},deleteAllTasks:function(e,t,s){return s.length>0?c["a"].ppost("/api/actions/projects/".concat(e,"/delete-tasks"),s):c["a"].pdel("/api/actions/projects/".concat(e,"/task-types/").concat(t,"/delete-tasks"))},addPreview:function(e){var t=e.taskId,s=e.commentId;return c["a"].ppost("/api/actions/tasks/".concat(t,"/comments/").concat(s,"/add-preview"),{})},addExtraPreview:function(e,t,s){return c["a"].ppost("/api/actions/tasks/".concat(t,"/comments/").concat(s,"/preview-files/")+"".concat(e),{})},deletePreview:function(e,t,s){return c["a"].pdel("/api/actions/tasks/".concat(e,"/comments/").concat(t,"/preview-files/")+"".concat(s))},setPreview:function(e,t,s){return c["a"].pput("/api/actions/entities/".concat(e,"/set-main-preview/").concat(t),{})},uploadPreview:function(e,t){return c["a"].ppost("/api/pictures/preview-files/".concat(e),t)},updatePreviewAnnotation:function(e,t){return c["a"].pput("/api/data/preview-files/".concat(e.id),{annotations:t})},getPreviewFile:function(e){return c["a"].pget("/api/data/preview-files/".concat(e))},assignTasks:function(e,t,s){c["a"].put("/api/actions/persons/".concat(e,"/assign"),{task_ids:t},s)},unassignTasks:function(e,t){c["a"].put("/api/actions/tasks/clear-assignation",{task_ids:e},t)},pinComment:function(e){var t={pinned:e.pinned};return c["a"].pput("/api/data/comments/".concat(e.id),t)},ackComment:function(e){var t="/api/data/tasks/".concat(e.object_id,"/comments/").concat(e.id,"/ack");return c["a"].ppost(t,{})},updateRevisionPreviewPosition:function(e,t){var s="/api/actions/preview-files/".concat(e,"/update-position");return console.log("request",t+1),c["a"].pput(s,{position:t+1})}},d=s("ce6b"),u=s("487c"),p=s("2229"),h=s("66e7"),m=s("52ad"),f=s("ef8b"),_=s("7d26"),v=s("0263"),g=s("9fb0"),y={taskMap:{},taskStatusMap:{},taskStatuses:[],taskComments:{},taskPreviews:{},taskEntityPreviews:{},selectedTasks:{},selectedValidations:{},taskSearchQueries:[],nbSelectedTasks:0,nbSelectedValidations:0,isShowAssignations:!0,isShowInfos:!0,isSavingCommentPreview:!1,previewForms:[],lastCommentDraft:""},b=Object(o["a"])({},y),k={getPerson:function(e){return m["a"].getters.getPerson(m["a"].state,m["a"].getters)(e)},getTaskType:function(e){return f["a"].state.taskTypeMap[e]}},w={taskMap:function(e){return e.taskMap},getTaskComments:function(e,t){return function(t){return e.taskComments[t]}},getTaskPreviews:function(e,t){return function(t){return e.taskPreviews[t]}},getTaskComment:function(e,t){return function(t,s){return e.taskComments[t]?e.taskComments[t].find((function(e){return e.id===s})):[]}},getTaskStatus:function(e,t){return function(t){return e.taskStatuses.find((function(e){return e.id===t}))}},taskStatusOptions:function(e){return e.taskStatuses.map((function(e){return{label:e.short_name,value:e.id,color:e.color,isArtistAllowed:e.is_artist_allowed}}))},selectedTasks:function(e){return e.selectedTasks},nbSelectedTasks:function(e){return e.nbSelectedTasks},nbSelectedValidations:function(e){return e.nbSelectedValidations},taskSearchQueries:function(e){return e.taskSearchQueries},isShowAssignations:function(e){return e.isShowAssignations},isShowInfos:function(e){return e.isShowInfos},taskEntityPreviews:function(e){return e.taskEntityPreviews},previewForms:function(e){return e.previewForms},isSavingCommentPreview:function(e){return e.isSavingCommentPreview},lastCommentDraft:function(e){return e.lastCommentDraft}},C={loadTask:function(e,t){var s=e.commit,i=(e.state,t.taskId);return l.getTask(i).then((function(e){return s(g["Qc"],e),Promise.resolve(e)}))},loadTaskSubscribed:function(e,t){var s=e.commit,i=(e.state,t.taskId);t.callback;return l.getTaskSubscribed(i).then((function(e){return s(g["Vc"],{taskId:i,subscribed:e}),Promise.resolve(e)}))},subscribeToTask:function(e,t){var s=e.commit;e.state;return l.subscribeToTask(t).then((function(){return s(g["Vc"],{taskId:t,subscribed:!0}),Promise.resolve(!0)}))},unsubscribeFromTask:function(e,t){var s=e.commit;e.state;return l.unsubscribeFromTask(t).then((function(){return s(g["Vc"],{taskId:t,subscribed:!1}),Promise.resolve(!1)}))},loadTaskComments:function(e,t){var s=e.commit,i=(e.state,e.dispatch),n=t.taskId,a=t.entityId;t.callback;return l.getTaskComments(n).then((function(e){return s(g["Pc"],{comments:e,taskId:n}),i("loadTaskEntityPreviewFiles",a)}))},loadTaskEntityPreviewFiles:function(e,t){var s=e.commit,i=(e.state,{id:t});return u["a"].getEntityPreviewFiles(i).then((function(e){return s(g["Rc"],e),Promise.resolve(e)}))},commentTask:function(e,t){var s=e.commit,i=(e.state,t.taskId),n=t.taskStatusId,a=t.comment,o=t.attachment,r=t.checklist;return l.commentTask({taskId:i,taskStatusId:n,comment:a,attachment:o,checklist:r}).then((function(e){s(g["od"],{comment:e,taskId:i})}))},loadComment:function(e,t){var s=e.commit,i=(e.state,t.commentId);t.callback;return l.getTaskComment({id:i}).then((function(e){return s(g["od"],{comment:e,taskId:e.object_id}),Promise.resolve(e)}))},createTasks:function(e,t){e.commit,e.state;var s=[];t.selectionOnly&&(s="shots"===t.type?v["a"].cache.result.map((function(e){return e.id})):_["a"].cache.result.map((function(e){return e.id})));var i={task_type_id:t.task_type_id,type:t.type,project_id:t.project_id,entityIds:s};return l.createTasks(i)},createSelectedTasks:function(e,t){var s=e.commit,i=e.state,n=t.type,a=t.projectId,o=t.callback;r["a"].eachSeries(Object.keys(i.selectedValidations),(function(e,t){var o=i.selectedValidations[e],r={entity_id:o.entity.id,task_type_id:o.column.id,type:n,project_id:a};l.createTask(r,(function(e,i){s(g["Y"],i),i.forEach((function(e){s(g["Od"],o),e.assigneesInfo=[],o.task=e,s(g["n"],o)})),t(e,i[0])}))}),o)},deleteSelectedTasks:function(e){var t=e.commit,s=e.state;return new Promise((function(e,i){var n=Object.keys(s.selectedTasks);r["a"].eachSeries(n,(function(e,i){var n=s.taskMap[e];n?l.deleteTask(n,(function(e){e||t(g["nb"],n),i(e)})):i()}),(function(t){t?i(t):e()}))}))},deleteAllTasks:function(e,t){e.commit,e.state;var s=t.projectId,i=t.taskTypeId,n=t.taskIds;return l.deleteAllTasks(s,i,n)},createTask:function(e,t){var s=e.commit,i=(e.state,e.rootGetters,t.entityId),n=t.projectId,a=t.taskTypeId,o=t.type;return new Promise((function(e,t){var r={entity_id:i,task_type_id:a,type:o,project_id:n};l.createTask(r,(function(i,n){i?t(i):(s(g["pd"],n[0]),e())}))}))},changeSelectedTaskStatus:function(e,t){var s=e.commit,i=e.state,n=e.rootGetters,a=t.taskStatusId,o=t.comment,r=[],c=n.currentProduction;return Object.keys(i.selectedTasks).forEach((function(e){var t=i.taskMap[e],s=t&&(t.task_status_id!==a||o&&o.length>0);s&&r.push({object_id:e,task_status_id:a,comment:o||"",checklist:[]})})),l.commentTasks(c.id,r).then((function(e){return e.forEach((function(e){s(g["od"],{comment:e,taskId:e.object_id})})),Promise.resolve(e)}))},changeSelectedPriorities:function(e,t){var s=e.commit,i=e.state,n=e.rootGetters,a=t.priority,o=t.callback;r["a"].eachSeries(Object.keys(i.selectedTasks),(function(e,t){var o=i.taskMap[e],r=n.taskTypeMap[o.task_type_id];o&&o.priority!==a?l.updateTask(e,{priority:a}).then((function(e){s(g["Lb"],{task:e,taskType:r}),t()})).catch(t):t()}),(function(e){o(e)}))},updateTask:function(e,t){var s=e.commit,i=t.taskId,n=t.data;return s(g["Kb"],{taskId:i,data:n}),l.updateTask(i,n).then((function(e){s(g["Kb"],{taskId:i,data:n})}))},getTask:function(e,t){var s=e.commit,i=e.rootGetters,n=t.taskId,a=t.callback;l.getTask(n,(function(e,t){if(!e){var n=i.taskTypeMap[t.task_type_id];s(g["Lb"],{task:t,taskType:n})}a&&a(e)}))},deleteTask:function(e,t){var s=e.commit,i=t.task,n=t.callback;l.deleteTask(i,(function(e){e||s(g["nb"],i),n&&n(e)}))},editTaskComment:function(e,t){var s=e.commit,i=t.taskId,n=t.comment,a=t.checklist;t.callback;return a&&s(g["Oe"],{comment:n,checklist:a}),l.editTaskComment(n).then((function(e){return s(g["yb"],{taskId:i,comment:e}),Promise.resolve(e)}))},deleteTaskComment:function(e,t){var s=e.commit,i=e.rootState,n=t.taskId,a=t.commentId,o=(t.callback,i.taskStatus.taskStatus.find((function(e){return"todo"===e.short_name})));return l.deleteTaskComment(n,a).then((function(){return s(g["cb"],{commentId:a,taskId:n,taskStatusMap:i.taskStatus.taskStatusMap,todoStatus:o}),Promise.resolve()}))},commentTaskWithPreview:function(e,t){var s,i=e.commit,n=(e.getters,e.state),a=e.dispatch,o=t.taskId,r=t.comment,c=t.taskStatusId,d=t.form,u=t.attachment,p=t.checklist,h={taskId:o,taskStatusId:c,comment:r,attachment:u,checklist:p};return i(g["k"]),l.commentTask(h).then((function(e){s=e;var t={taskId:o,commentId:s.id};return l.addPreview(t)})).then((function(e){return d||(d=n.previewForms[0]),l.uploadPreview(e.id,d)})).then((function(e){return i(g["od"],{comment:s,taskId:o}),i(g["j"],{preview:e,taskId:o,commentId:s.id,comment:s}),n.previewForms.length>1&&(i(g["Kd"]),a("addCommentExtraPreview",{taskId:o,commentId:s.id,previewId:e.id})),Promise.resolve({newComment:s,preview:e})}))},addCommentExtraPreview:function(e,t){var s=e.commit,i=e.getters,n=e.state,a=t.taskId,o=t.commentId,r=t.previewId,c=function(e){return l.addExtraPreview(r,a,o).then((function(t){return l.uploadPreview(t.id,e)})).then((function(e){var t=i.getTaskComment(a,o);return s(g["j"],{preview:e,taskId:a,commentId:o,comment:t}),Promise.resolve(e)}))};return n.previewForms.reduce((function(e,t){return e.then((function(){return c(t)}))}),Promise.resolve())},deleteTaskPreview:function(e,t){var s=e.commit,i=(e.state,t.taskId),n=t.commentId,a=t.previewId;return l.deletePreview(i,n,a).then((function(){return s(g["jb"],{taskId:i,previewId:a}),Promise.resolve(a)}))},setPreview:function(e,t){var s=e.commit,i=e.state,n=t.taskId,a=t.entityId,o=t.previewId,r=i.taskMap;return l.setPreview(a,o).then((function(e){return s(g["we"],{taskId:n,entityId:a,previewId:o,taskMap:r}),Promise.resolve()}))},updatePreviewAnnotation:function(e,t){var s=e.commit,i=(e.state,t.taskId),n=t.preview,a=t.annotations;return l.updatePreviewAnnotation(n,a).then((function(e){return s(g["Re"],{taskId:i,preview:n,annotations:a}),Promise.resolve()})).catch(console.error)},refreshPreview:function(e,t){var s=e.commit,i=(e.state,t.taskId),n=t.previewId;return l.getPreviewFile(n).then((function(e){return s(g["Re"],{taskId:i,preview:e,annotations:e.annotations}),Promise.resolve()}))},assignSelectedTasks:function(e,t){var s=e.commit,i=e.state,n=t.personId,a=t.callback,o=Object.keys(i.selectedTasks);l.assignTasks(n,o,(function(e){e||s(g["s"],{selectedTaskIds:o,personId:n}),a&&a(e)}))},unassignSelectedTasks:function(e,t){var s=e.commit,i=e.state,n=(t.personId,t.callback),a=Object.keys(i.selectedTasks);l.unassignTasks(a,(function(e){e||s(g["Me"],a),n&&n(e)}))},showAssignations:function(e){var t=e.commit;e.state;t(g["pe"],!0)},hideAssignations:function(e){var t=e.commit;e.state;t(g["pe"],!1)},showInfos:function(e){var t=e.commit;e.state;t(g["qe"],!0)},hideInfos:function(e){var t=e.commit;e.state;t(g["qe"],!1)},loadPreviewFileFormData:function(e,t){var s=e.commit;s(g["wd"],t)},addSelectedTask:function(e,t){var s=e.commit;s(g["n"],t)},addSelectedTasks:function(e,t){var s=e.commit;s(g["o"],t)},clearSelectedTasks:function(e,t){var s=e.commit;s(g["T"],t)},removeSelectedTask:function(e,t){var s=e.commit;s(g["Od"],t)},saveTaskSearch:function(e,t){var s=e.commit,i=e.rootGetters,n=t.searchQuery,a=t.entityType;return new Promise((function(e,t){var o=b.taskSearchQueries.find((function(e){return e.name===n})),r=i.currentProduction;o?e():d["a"].createFilter("task",n,n,r.id,a,(function(i,n){s(g["de"],{searchQuery:n,production:r}),i?t(i):e(n)}))}))},removeTaskSearch:function(e,t){var s=e.commit,i=e.rootGetters,n=i.currentProduction;d["a"].removeFilter(t).then((function(){return s(g["Td"],{searchQuery:t,production:n}),Promise.resolve(t)}))},ackComment:function(e,t){var s=e.commit,i=e.rootGetters,n=i.user;return s(g["a"],{comment:t,user:n}),l.ackComment(t)},pinComment:function(e,t){var s=e.commit;return s(g["vd"],t),l.pinComment(t)},updateRevisionPreviewPosition:function(e,t){var s=e.commit;return t.newIndex<t.previousIndex&&t.newIndex++,s(g["Te"],t),l.updateRevisionPreviewPosition(t.previewId,t.newIndex)}},S=(i={},Object(n["a"])(i,g["Yb"],(function(e,t){var s=t.production,i=t.userFilters;i.task&&i.task[s.id]?e.taskSearchQueries=i.task[s.id]:e.taskSearchQueries=[]})),Object(n["a"])(i,g["Kc"],(function(e,t){var s=t.production,i=t.userFilters;i.task&&i.task[s.id]?e.taskSearchQueries=i.task[s.id]:e.taskSearchQueries=[]})),Object(n["a"])(i,g["Qc"],(function(e,t){Object.assign(t,{project_name:t.project.name,entity_type_name:t.entity_type.name}),"Shot"===t.entity_type.name?t.episode?t.entity_name="".concat(t.episode.name," / ").concat(t.sequence.name," / ").concat(t.entity.name):t.entity_name="".concat(t.sequence.name," / ").concat(t.entity.name):t.entity_name="".concat(t.entity_type.name," / ").concat(t.entity.name),e.taskMap[t.id]?Object.assign(e.taskMap[t.id],t):e.taskMap[t.id]=t})),Object(n["a"])(i,g["Rc"],(function(e,t){e.taskEntityPreviews=t})),Object(n["a"])(i,g["Pc"],(function(e,t){var s=t.taskId,i=t.comments;i.forEach((function(e){e.person=m["a"].helpers.addAdditionalInformation(e.person)})),e.taskComments[s]=Object(p["e"])(i),e.taskPreviews[s]=i.reduce((function(e,t){if(t.previews&&t.previews.length>0){var s=t.previews[0];return s.previews=Object(p["i"])(t.previews.map((function(e){return{id:e.id,annotations:e.annotations,extension:e.extension,task_id:e.task_id,revision:e.revision,position:e.position,original_name:e.original_name}}))),e.push(s),e}return e}),[])})),Object(n["a"])(i,g["Sc"],(function(e,t){e.taskStatuses=Object(p["d"])(t),e.taskStatuses.forEach((function(t){e.taskStatusMap[t.id]=t}))})),Object(n["a"])(i,g["Vc"],(function(e,t){t.taskId,t.subscribed})),Object(n["a"])(i,g["od"],(function(e,t){var s=t.comment,i=t.taskId,n=e.taskMap[i];if(void 0===s.task_status){var a=w.getTaskStatus(e,w);s.task_status=a(s.task_status_id)}if(void 0===s.person){var o=m["a"].getters.getPerson(m["a"].state,m["a"].getters);s.person=o(s.person_id)}s.person=m["a"].helpers.addAdditionalInformation(s.person),e.taskComments[i]||(e.taskComments[i]=[]),e.taskComments[i].find((function(e){return e.id===s.id}))||e.taskComments[i].unshift(s),e.taskComments[i]=Object(p["e"])(e.taskComments[i]),n&&Object.assign(n,{task_status_id:s.task_status_id,last_comment:s})})),Object(n["a"])(i,g["nb"],(function(e,t){e.taskComments[t.id]=void 0,e.taskPreviews[t.id]=void 0,e.taskMap[t.id]=void 0;var s="".concat(t.entity_id,"-").concat(t.task_type_id);e.selectedValidations[s]={entity:{id:t.entity_id},column:{id:t.task_type_id}},delete e.selectedTasks[t.id]})),Object(n["a"])(i,g["cb"],(function(e,t){var s=t.taskId,i=t.commentId,n=t.taskStatusMap,o=t.todoStatus,r=e.taskMap[s],c=e.taskComments[s],l=c.findIndex((function(e){return e.id===i})),d=c.find((function(e){return e.id===i})),u=c.filter((function(e){return e.pinned})).length;if(c=c.filter((function(e){return e.id!==i})),e.taskComments[s]=c,e.taskPreviews[s]=Object(a["a"])(e.taskPreviews[s]).filter((function(e){return!(d.previews.length>0&&d.previews[0].id===e.id)})),l===u){var p=o;if(c.length>0){var h=c[0].task_status_id;u<c.length&&(h=c[u].task_status_id),p=n[h]}r&&Object.assign(r,{task_status_id:p.id,task_status_priority:p.priority})}})),Object(n["a"])(i,g["yb"],(function(e,t){var s=t.taskId,i=t.comment,n=e.taskComments[s].find((function(e){return e.id===i.id}));Object.assign(n,{text:i.text,task_status_id:i.task_status_id,task_status:e.taskStatusMap[i.task_status_id]})})),Object(n["a"])(i,g["wd"],(function(e,t){e.previewForms=t})),Object(n["a"])(i,g["k"],(function(e){e.isSavingCommentPreview=!0})),Object(n["a"])(i,g["j"],(function(e,t){var s=t.preview,i=t.taskId,n=(t.commentId,t.comment);e.isSavingCommentPreview=!1;var a={id:s.id,feedback:!1,revision:s.revision,position:s.position,original_name:s.original_name,extension:s.extension};if(e.taskPreviews[i]){var r=e.taskPreviews[i].find((function(e){return e.revision===s.revision}));if(r){var c=r.previews.find((function(e){return e.id===a.id}));c||r.previews.push(a)}else a.previews=[Object(o["a"])({},a)],e.taskPreviews[i]=[a].concat(e.taskPreviews[i]),n.preview=a,n.previews=[a]}})),Object(n["a"])(i,g["jb"],(function(e,t){var s=t.taskId,i=t.previewId;e.taskPreviews[s].forEach((function(e){var t=e.previews.findIndex((function(e){return e.id===i}));t>=0&&e.previews.splice(t,1)}))})),Object(n["a"])(i,g["Re"],(function(e,t){var s=t.taskId,i=t.preview,n=t.annotations,a=null;e.taskPreviews[s].forEach((function(e){e.previews.forEach((function(e){e.id===i.id&&(a=e)})),e.id===i.id&&(e.annotations=n)})),a&&(a.annotations=n)})),Object(n["a"])(i,g["N"],(function(e,t){var s=t.preview,i=t.comment,n=i.object_id,a={id:s.id,feedback:!1,revision:s.revision,position:s.position,original_name:s.original_name,extension:s.extension};e.taskPreviews[n].shift(),e.taskPreviews[n]=[a].concat(e.taskPreviews[n])})),Object(n["a"])(i,g["n"],(function(e,t){if(t.task)e.selectedTasks[t.task.id]=t.task,e.nbSelectedTasks=Object.keys(e.selectedTasks).length;else{var s=t.column.id,i=t.entity.id,n="".concat(i,"-").concat(s);e.selectedValidations[n]=t,e.nbSelectedValidations=Object.keys(e.selectedValidations).length}})),Object(n["a"])(i,g["o"],(function(e,t){var s=JSON.parse(JSON.stringify(e.selectedTasks)),i=JSON.parse(JSON.stringify(e.selectedValidations)),n=!1;t.forEach((function(e){if(e.task)s[e.task.id]=e.task;else{var t=e.column.id,a=e.entity.id,o="".concat(a,"-").concat(t);i[o]=e,n=!0}})),e.selectedTasks=s,e.nbSelectedTasks=Object.keys(e.selectedTasks).length,n&&(e.selectedValidations=i,e.nbSelectedValidations=Object.keys(e.selectedValidations).length)})),Object(n["a"])(i,g["Od"],(function(e,t){if(t.task)delete e.selectedTasks[t.task.id],e.nbSelectedTasks=Object.keys(e.selectedTasks).length;else{var s=t.column.id,i=t.entity.id,n="".concat(i,"-").concat(s);delete e.selectedValidations[n],e.nbSelectedValidations=Object.keys(e.selectedValidations).length}})),Object(n["a"])(i,g["T"],(function(e){e.selectedTasks={},e.nbSelectedTasks=0,e.selectedValidations={},e.nbSelectedValidations=0})),Object(n["a"])(i,g["Y"],(function(e,t){t.forEach((function(t){e.taskMap[t.id]=t}))})),Object(n["a"])(i,g["pd"],(function(e,t){e.taskMap[t.id]=t})),Object(n["a"])(i,g["Lb"],(function(e,t){var s=t.task,i=e.taskMap[s.id];i&&Object.assign(e.taskMap[s.id],{task_status_id:s.task_status_id,task_status_short_name:e.taskStatusMap[s.task_status_id].short_name,priority:s.priority,estimation:s.estimation,duration:s.duration,real_start_date:s.real_start_date,end_date:s.end_date,due_date:s.due_date,real_end_date:s.end_date,last_comment_date:s.last_comment_date,retake_count:s.retake_count})})),Object(n["a"])(i,g["Kb"],(function(e,t){var s=t.taskId,i=t.data,n=e.taskMap[s];Object.assign(n,i)})),Object(n["a"])(i,g["s"],(function(e,t){var s=t.selectedTaskIds,i=t.personId;s.forEach((function(t){var s=e.taskMap[t];s&&!s.assignees.find((function(e){return e===i}))&&(s.assignees.push(i),s.assignees=Object(a["a"])(s.assignees))}))})),Object(n["a"])(i,g["Me"],(function(e,t){t.forEach((function(t){var s=e.taskMap[t];s.assignees=[],s.assigneesInfo=[]}))})),Object(n["a"])(i,g["we"],(function(e,t){var s=t.taskId,i=t.previewId;e.taskMap[s]&&(e.taskMap[s].entity.preview_file_id=i)})),Object(n["a"])(i,g["pe"],(function(e,t){e.isShowAssignations=t})),Object(n["a"])(i,g["qe"],(function(e,t){e.isShowInfos=t})),Object(n["a"])(i,g["uc"],(function(e,t){var s=t.tasks;s.forEach((function(t){if(t.last_comment.person_id){var s=k.getPerson(t.last_comment.person_id);t.last_comment.person=s}e.taskMap[t.id]=t}))})),Object(n["a"])(i,g["ef"],(function(e,t){var s=t.tasks;s.forEach((function(t){if(t.last_comment.person_id){var s=k.getPerson(t.last_comment.person_id);t.last_comment.person=s}e.taskMap[t.id]=t}))})),Object(n["a"])(i,g["de"],(function(e,t){var s=t.searchQuery;e.taskSearchQueries.includes(s)||(e.taskSearchQueries.push(s),e.taskSearchQueries=Object(p["d"])(e.taskSearchQueries))})),Object(n["a"])(i,g["Td"],(function(e,t){var s=t.searchQuery,i=e.taskSearchQueries.findIndex((function(e){return e.name===s.name}));i>=0&&e.taskSearchQueries.splice(i,1)})),Object(n["a"])(i,g["vd"],(function(e,t){t.pinned=!t.pinned,e.taskComments[t.object_id]=Object(p["e"])(e.taskComments[t.object_id])})),Object(n["a"])(i,g["a"],(function(e,t){var s=t.comment,i=t.user;s.acknowledgements.includes(i.id)?s.acknowledgements=s.acknowledgements.filter((function(e){return e!==i.id})):s.acknowledgements.push(i.id),e.taskComments[s.object_id]=Object(p["e"])(e.taskComments[s.object_id])})),Object(n["a"])(i,g["Oe"],(function(e,t){var s=t.comment,i=t.checklist;s.checklist=i})),Object(n["a"])(i,g["P"],(function(e){e.taskMap={}})),Object(n["a"])(i,g["U"],(function(e){e.taskMap={}})),Object(n["a"])(i,g["re"],(function(e,t){e.lastCommentDraft=t})),Object(n["a"])(i,g["Te"],(function(e,t){var s=t.previousIndex,i=t.newIndex,n=t.revision,a=t.taskId,o=e.taskPreviews[a].find((function(e){return e.revision===n}));o.previews=Object(h["b"])(o.previews,s,i);var r=1;o.previews.forEach((function(e){e.position=r,r++}))})),Object(n["a"])(i,g["Kd"],(function(e){e.previewForms=e.previewForms.splice(1)})),Object(n["a"])(i,g["Vd"],(function(e,t){Object.assign(e,Object(o["a"])({},y))})),i);t["a"]={state:b,getters:w,actions:C,mutations:S}},fb36:function(e,t,s){"use strict";var i=s("a91d"),n=s.n(i);n.a},fbf3:function(e,t,s){"use strict";var i=s("186e"),n=s.n(i);n.a},fc42:function(e,t,s){"use strict";var i=s("e4ff"),n=s.n(i);n.a},fe13:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",[e.minimized?s("span",[e.isStatic||e.isCurrentUserClient?s("span",{staticClass:"tag",style:{background:e.backgroundColor,color:e.color,cursor:e.cursor}}):s("router-link",{staticClass:"tag dynamic",style:{background:e.backgroundColor,color:e.color},attrs:{to:e.taskPath(e.task)}})],1):s("span",[e.isStatic||e.isCurrentUserClient?s("span",{staticClass:"tag",style:{background:e.backgroundColor,color:e.color,cursor:e.cursor}},[e._v(" "+e._s(e.taskStatus.short_name)+" ")]):s("router-link",{staticClass:"tag dynamic",style:{background:e.backgroundColor,color:e.color},attrs:{to:e.taskPath(e.task)}},[e._v(" "+e._s(e.taskStatus.short_name)+" ")]),e.isPriority&&!e.isCurrentUserClient?s("span",{staticClass:"priority"},[e._v(" "+e._s(e.priority)+" ")]):e._e()],1)])},n=[],a=(s("b0c0"),s("5530")),o=s("2f62"),r=s("7930"),c={name:"validation-tag",props:{task:{default:function(){},type:Object},isStatic:{default:!1,type:Boolean},isPriority:{default:!0,type:Boolean},minimized:{default:!1,type:Boolean},pointer:{default:!1,type:Boolean}},computed:Object(a["a"])(Object(a["a"])({},Object(o["c"])(["currentEpisode","currentProduction","isDarkTheme","isTVShow","taskMap","taskStatusMap","taskTypeMap","isCurrentUserClient"])),{},{cursor:function(){return this.pointer?"pointer":"default"},taskStatus:function(){if(this.task){var e=this.task.task_status_id;return this.taskStatusMap?this.taskStatusMap[e]:{}}return{}},backgroundColor:function(){return"todo"!==this.taskStatus.short_name||this.isDarkTheme?"todo"===this.taskStatus.short_name&&this.isDarkTheme?"#5F626A":this.isDarkTheme?r["a"].darkenColor(this.taskStatus.color):this.taskStatus.color:"#ECECEC"},color:function(){return"todo"!==this.taskStatus.short_name||this.isDarkTheme?"white":"#333"},priority:function(){return this.task.priority&&!this.taskStatus.is_done?3===this.task.priority?"!!!":2===this.task.priority?"!!":1===this.task.priority?"!":"":""}}),methods:{taskPath:function(e){var t=this.task.project_id?this.task.project_id:this.currentProduction.id,s={name:"task",params:{production_id:t,task_id:e.id}};this.isTVShow&&this.currentEpisode&&(s.name="episode-task",s.params.episode_id=e.episode_id||this.currentEpisode.id);var i=this.taskTypeMap[e.task_type_id];return s.params.type=i.for_shots?"shots":"assets",s}}},l=c,d=(s("ea21"),s("2877")),u=Object(d["a"])(l,i,n,!1,null,"1052e432",null);t["a"]=u.exports},fe3f:function(e,t,s){"use strict";var i=s("0455"),n=s.n(i);n.a},ffaf:function(e,t,s){}});
//# sourceMappingURL=app.d3c8f578.js.map