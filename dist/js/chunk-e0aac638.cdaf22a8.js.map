{"version":3,"sources":["webpack:///./src/components/widgets/ComboboxDepartment.vue?6c69","webpack:///./src/components/widgets/ButtonHrefLink.vue?b8b4","webpack:///./src/components/widgets/DepartmentName.vue?897e","webpack:///src/components/widgets/DepartmentName.vue","webpack:///./src/components/widgets/DepartmentName.vue?ac90","webpack:///./src/components/widgets/DepartmentName.vue","webpack:///./src/components/widgets/ComboboxDepartment.vue?be58","webpack:///src/components/widgets/ComboboxDepartment.vue","webpack:///./src/components/widgets/ComboboxDepartment.vue?9d73","webpack:///./src/components/widgets/ComboboxDepartment.vue","webpack:///./src/components/pages/People.vue?b9a3","webpack:///./src/components/modals/EditPersonModal.vue?8d94","webpack:///src/components/modals/EditPersonModal.vue","webpack:///./src/components/modals/EditPersonModal.vue?eb2d","webpack:///./src/components/modals/EditPersonModal.vue","webpack:///./src/components/lists/PeopleList.vue?4ace","webpack:///src/components/lists/PeopleList.vue","webpack:///./src/components/lists/PeopleList.vue?8746","webpack:///./src/components/lists/PeopleList.vue","webpack:///./src/components/modals/BuildPeopleFilterModal.vue?2af0","webpack:///src/components/modals/BuildPeopleFilterModal.vue","webpack:///./src/components/modals/BuildPeopleFilterModal.vue?da96","webpack:///./src/components/modals/BuildPeopleFilterModal.vue","webpack:///src/components/pages/People.vue","webpack:///./src/components/pages/People.vue?da08","webpack:///./src/components/pages/People.vue","webpack:///./src/components/lists/PeopleList.vue?4810","webpack:///./src/components/cells/PeopleNameCell.vue?2a32","webpack:///src/components/cells/PeopleNameCell.vue","webpack:///./src/components/cells/PeopleNameCell.vue?f3e2","webpack:///./src/components/cells/PeopleNameCell.vue","webpack:///./src/components/widgets/ButtonHrefLink.vue?e721","webpack:///src/components/widgets/ButtonHrefLink.vue","webpack:///./src/components/widgets/ButtonHrefLink.vue?f6e0","webpack:///./src/components/widgets/ButtonHrefLink.vue","webpack:///./src/components/modals/BuildPeopleFilterModal.vue?2d20","webpack:///./src/components/modals/EditPersonModal.vue?bf00","webpack:///./src/components/pages/People.vue?709b","webpack:///./src/components/cells/PeopleNameCell.vue?b835","webpack:///./src/components/widgets/DepartmentName.vue?8714"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","style","color","_v","_s","department","name","staticRenderFns","components","props","type","Object","default","computed","toUpperCase","methods","component","label","length","_e","on","toggleDepartmentList","attrs","currentDepartment","ref","_l","key","id","$event","selectDepartment","showDepartmentList","ChevronDownIcon","ComboboxMask","DepartmentName","data","String","value","selectableDepartments","Array","required","mounted","departmentsToTakeAccount","departments","departmentList","departmentMap","get","$emit","$t","showImportModal","onNewClicked","onSearchChange","saveSearchQuery","modals","isBuildFilterDisplayed","isPeopleLoading","peopleSearchQueries","changeSearch","removeSearchQuery","displayedPeople","isPeopleLoadingError","onEditClicked","onDeleteClicked","isImportRenderDisplayed","isImportPeopleLoading","isImportPeopleLoadingError","parsedCSV","personCsvFormData","csvColumns","dataMatchers","filteredPeople","resetImport","hideImportRenderModal","uploadImportFile","importModal","hideImportModal","renderImport","edit","loading","invite","createAndInvite","errors","success","personToEdit","confirmEditPeople","confirmCreateAndInvite","confirmInvite","del","personToDelete","full_name","deleteText","confirmDeletePeople","confirmBuildFilter","class","active","undefined","personName","preventDefault","isLdap","confirmClicked","model","form","callback","$$v","$set","expression","departmentId","removeDepartment","selectedDepartment","addDepartment","roleOptions","activeOptions","isCreating","isCurrentUserAdmin","button","isCreateInviteLoading","isValidEmail","isInviteLoading","isLoading","mixins","first_name","last_name","email","phone","role","TextField","Combobox","ComboboxDepartment","filter","push","departmentIndex","splice","resetForm","checkEmailValidity","p","watch","setTimeout","directives","rawName","activePeople","entry","sortDepartments","unactivePeople","isError","entries","$tc","PeopleNameCell","RowActionsCell","TableInfo","taskColor","nbTasks","onBodyScroll","$refs","body","left","departmentFilters","departmentFilter","i","general","operatorOptions","onDepartmentOperatorChanged","_","index","departmentsOptions","values","operator","addInDepartmentFilter","applyFilter","ButtonSimple","ModalFooter","Boolean","unionOptions","union","reset","setFiltersFromCurrentQuery","map","query","buildFilter","applyDepartmentChoice","applyUnionChoice","trim","addDepartmentFilter","removeDepartmentFilter","forEach","peopleSearchText","entryIndex","persons","filters","setUnion","setFiltersFromDepartmentQuery","search","BuildPeopleFilterModal","ButtonHrefLink","EditPersonModal","HardDeleteModal","ImportModal","PageTitle","PeopleList","ImportRenderModal","SearchField","SearchQueryList","loadPeople","person","personKey","searchField","importing","formData","mode","csv","append","file","$store","commit","uploadPersonFile","toUpdate","action","newPersonAndInvite","invitePerson","deletePeople","searchQuery","setPeopleSearch","setSearchInUrl","showImportRenderModal","savePeopleSearch","removePeopleSearch","setValue","metaInfo","title","PeopleName","PeopleAvatar","path","target","icon","text","DownloadIcon","ListIcon","PlusIcon","UploadIcon","styleclass"],"mappings":"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","file":"js/chunk-e0aac638.cdaf22a8.js","sourcesContent":["export * from \"-!../../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./ComboboxDepartment.vue?vue&type=style&index=0&id=01d39316&lang=scss&scoped=true&\"","export * from \"-!../../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./ButtonHrefLink.vue?vue&type=style&index=0&id=ebbaf58c&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('span',{staticClass:\"dot\",style:({ 'border': '5px solid ' + _vm.color, color: _vm.color })}),_c('span',[_vm._v(\" \"+_vm._s(_vm.department.name)+\" \")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n<div\n>\n  <span\n    class=\"dot\"\n    :style=\"{ 'border': '5px solid ' + color, color }\"\n  >\n  </span>\n  <span>\n    {{ department.name }}\n  </span>\n</div>\n</template>\n\n<script>\nimport { mapGetters, mapActions } from 'vuex'\n\nexport default {\n  name: 'department-name',\n  components: {\n  },\n\n  props: {\n    department: {\n      type: Object,\n      default: null\n    }\n  },\n\n  computed: {\n    ...mapGetters([\n    ]),\n\n    color () {\n      if (this.department.color.toUpperCase() === '#000000') {\n        return '$grey-strong'\n      } else return this.department.color\n    }\n  },\n\n  methods: {\n    ...mapActions([\n    ])\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\ndiv {\n  border-radius: 5px;\n  display: inline-block;\n  padding: 0.4em 0.6em;\n}\n\nspan.dot {\n  border-radius: 20px;\n  font-weight: 500;\n  display: inline-block;\n  height: 8px;\n  margin-right: 0.3em;\n  padding: 0em;\n  width: 8px;\n}\n\nspan {\n  color: var(--text);\n}\n</style>\n","import mod from \"-!../../../node_modules/@vue/cli-plugin-babel/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/@vue/cli-plugin-babel/node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./DepartmentName.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/@vue/cli-plugin-babel/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/@vue/cli-plugin-babel/node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./DepartmentName.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DepartmentName.vue?vue&type=template&id=50e72f9e&scoped=true&\"\nimport script from \"./DepartmentName.vue?vue&type=script&lang=js&\"\nexport * from \"./DepartmentName.vue?vue&type=script&lang=js&\"\nimport style0 from \"./DepartmentName.vue?vue&type=style&index=0&id=50e72f9e&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"50e72f9e\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"field\"},[(_vm.label.length > 0)?_c('label',{staticClass:\"label\"},[_vm._v(\" \"+_vm._s(_vm.label)+\" \")]):_vm._e(),_c('div',{staticClass:\"department-combo\"},[_c('div',{staticClass:\"flexrow\",on:{\"click\":_vm.toggleDepartmentList}},[(_vm.currentDepartment)?_c('div',{staticClass:\"selected-department-line flexrow-item\"},[_c('department-name',{attrs:{\"department\":_vm.currentDepartment}})],1):_vm._e(),_c('chevron-down-icon',{staticClass:\"down-icon flexrow-item\"})],1),(_vm.showDepartmentList)?_c('div',{ref:\"select\",staticClass:\"select-input\"},_vm._l((_vm.departmentList),function(department){return _c('div',{key:department.id,staticClass:\"department-line\",on:{\"click\":function($event){return _vm.selectDepartment(department)}}},[_c('department-name',{attrs:{\"department\":department}})],1)}),0):_vm._e()]),_c('combobox-mask',{attrs:{\"displayed\":_vm.showDepartmentList},on:{\"click\":_vm.toggleDepartmentList}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n<div class=\"field\">\n  <label class=\"label\" v-if=\"label.length > 0\">\n    {{ label }}\n  </label>\n  <div\n    class=\"department-combo\"\n  >\n    <div\n      class=\"flexrow\"\n      @click=\"toggleDepartmentList\"\n    >\n      <div\n        class=\"selected-department-line flexrow-item\" v-if=\"currentDepartment\"\n      >\n        <department-name\n          :department=\"currentDepartment\"\n        />\n      </div>\n      <chevron-down-icon class=\"down-icon flexrow-item\"/>\n    </div>\n    <div\n      class=\"select-input\"\n      ref=\"select\"\n      v-if=\"showDepartmentList\"\n    >\n      <div\n        class=\"department-line\"\n        v-for=\"department in departmentList\"\n        @click=\"selectDepartment(department)\"\n        :key=\"department.id\"\n      >\n        <department-name\n          :department=\"department\"\n        />\n      </div>\n    </div>\n  </div>\n  <combobox-mask\n    :displayed=\"showDepartmentList\"\n    @click=\"toggleDepartmentList\"\n  />\n</div>\n\n</template>\n\n<script>\nimport { mapGetters } from 'vuex'\nimport { ChevronDownIcon } from 'vue-feather-icons'\n\nimport ComboboxMask from '@/components/widgets/ComboboxMask'\nimport DepartmentName from '@/components/widgets/DepartmentName'\n\nexport default {\n  name: 'combobox-department',\n  components: {\n    ChevronDownIcon,\n    ComboboxMask,\n    DepartmentName\n  },\n\n  data () {\n    return {\n      showDepartmentList: false\n    }\n  },\n\n  props: {\n    label: {\n      default: '',\n      type: String\n    },\n    value: {\n      default: '',\n      type: String\n    },\n    selectableDepartments: {\n      type: Array,\n      required: false\n    }\n  },\n\n  mounted () {\n  },\n\n  computed: {\n    ...mapGetters([\n      'departmentMap',\n      'departments'\n    ]),\n\n    departmentsToTakeAccount () {\n      if (this.selectableDepartments) return this.selectableDepartments\n      return this.departments\n    },\n\n    departmentList () {\n      return [{ name: '---', id: null, color: '#000000' }, ...this.departmentsToTakeAccount]\n    },\n\n    currentDepartment () {\n      if (this.value) {\n        return this.departmentMap.get(this.value)\n      } else {\n        return this.departmentList[0]\n      }\n    }\n  },\n\n  methods: {\n    selectDepartment (department) {\n      this.$emit('input', department.id)\n      this.showDepartmentList = false\n    },\n\n    toggleDepartmentList () {\n      this.showDepartmentList = !this.showDepartmentList\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.dark {\n  .select-input,\n  .selected-department-line,\n  .department-line,\n  .department-combo {\n    background: $dark-grey-light;\n    border-color: $dark-grey;\n  }\n\n  .department-line:hover {\n    background: $dark-purple;\n  }\n}\n\n.department-line {\n}\n\n.department-combo {\n  background: $white;\n  min-width: 200px;\n  width: 200px;\n  border: 1px solid $light-grey-light;\n  user-select: none;\n  cursor: pointer;\n  border-radius: 3px;\n  margin: 0;\n  padding: 0.15em;\n  position: relative;\n}\n\n.department-combo:hover {\n  border: 1px solid $green;\n}\n\n.selected-department-line {\n  background: $white;\n  padding: 0.4em;\n  flex: 1;\n}\n\n.department-line {\n  background: $white;\n  cursor: pointer;\n  padding: 0.4em;\n  margin: 0;\n\n  &:hover {\n    background: $purple;\n  }\n}\n\n.down-icon {\n  width: 15px;\n  min-width: 15px;\n  margin-right: 0.4em;\n  color: $green;\n  cursor: pointer;\n}\n\n.select-input {\n  background: $white;\n  width: 200px;\n  position: absolute;\n  border: 1px solid $light-grey-light;\n  z-index: 300;\n  margin-left: -1px;\n  max-height: 200px;\n  overflow-y: auto;\n}\n\n.field .label {\n  padding-top: 5px;\n}\n</style>\n","import mod from \"-!../../../node_modules/@vue/cli-plugin-babel/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/@vue/cli-plugin-babel/node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./ComboboxDepartment.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/@vue/cli-plugin-babel/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/@vue/cli-plugin-babel/node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./ComboboxDepartment.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ComboboxDepartment.vue?vue&type=template&id=01d39316&scoped=true&\"\nimport script from \"./ComboboxDepartment.vue?vue&type=script&lang=js&\"\nexport * from \"./ComboboxDepartment.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ComboboxDepartment.vue?vue&type=style&index=0&id=01d39316&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"01d39316\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"people page fixed-page\"},[_c('div',{staticClass:\"flexrow page-header\"},[_c('page-title',{staticClass:\"flexrow-item filler\",attrs:{\"text\":_vm.$t('people.title')}}),(_vm.isCurrentUserAdmin)?_c('button-simple',{staticClass:\"flexrow-item\",attrs:{\"title\":_vm.$t('main.csv.import_file'),\"is-responsive\":true,\"icon\":\"upload\"},on:{\"click\":_vm.showImportModal}}):_vm._e(),_c('button-href-link',{staticClass:\"flexrow-item\",attrs:{\"title\":_vm.$t('main.csv.export_file'),\"icon\":\"download\",\"path\":\"/api/export/csv/persons.csv\"}}),(_vm.isCurrentUserAdmin)?_c('button-simple',{staticClass:\"flexrow-item\",attrs:{\"text\":_vm.$t('people.new_person'),\"is-responsive\":true,\"icon\":\"plus\"},on:{\"click\":_vm.onNewClicked}}):_vm._e()],1),_c('div',{staticClass:\"flexrow search-options\"},[_c('search-field',{ref:\"people-search-field\",staticClass:\"search flexrow-item\",attrs:{\"can-save\":true,\"placeholder\":\"ex: John Doe\"},on:{\"change\":_vm.onSearchChange,\"enter\":_vm.saveSearchQuery,\"save\":_vm.saveSearchQuery}}),_c('button-simple',{staticClass:\"flexrow-item filter-button\",attrs:{\"title\":_vm.$t('entities.build_filter.title'),\"icon\":\"funnel\"},on:{\"click\":function () { return _vm.modals.isBuildFilterDisplayed = true; }}})],1),_c('div',{staticClass:\"query-list\"},[(!_vm.isPeopleLoading)?_c('search-query-list',{attrs:{\"queries\":_vm.peopleSearchQueries},on:{\"change-search\":_vm.changeSearch,\"remove-search\":_vm.removeSearchQuery}}):_vm._e()],1),_c('people-list',{attrs:{\"entries\":_vm.displayedPeople,\"is-loading\":_vm.isPeopleLoading,\"is-error\":_vm.isPeopleLoadingError},on:{\"edit-clicked\":_vm.onEditClicked,\"delete-clicked\":_vm.onDeleteClicked}}),_c('import-render-modal',{attrs:{\"active\":_vm.modals.isImportRenderDisplayed,\"is-loading\":_vm.isImportPeopleLoading,\"is-error\":_vm.isImportPeopleLoadingError,\"parsed-csv\":_vm.parsedCSV,\"form-data\":_vm.personCsvFormData,\"columns\":_vm.csvColumns,\"dataMatchers\":_vm.dataMatchers,\"database\":_vm.filteredPeople},on:{\"reupload\":_vm.resetImport,\"cancel\":_vm.hideImportRenderModal,\"confirm\":_vm.uploadImportFile}}),_c('import-modal',{ref:\"import-modal\",attrs:{\"active\":_vm.modals.importModal,\"is-loading\":_vm.isImportPeopleLoading,\"is-error\":_vm.isImportPeopleLoadingError,\"form-data\":_vm.personCsvFormData,\"columns\":_vm.csvColumns},on:{\"cancel\":_vm.hideImportModal,\"confirm\":_vm.renderImport}}),_c('edit-person-modal',{attrs:{\"active\":_vm.modals.edit,\"is-loading\":_vm.loading.edit,\"is-invite-loading\":_vm.loading.invite,\"is-create-invite-loading\":_vm.loading.createAndInvite,\"is-error\":_vm.errors.edit,\"is-invitation-success\":_vm.success.invite,\"is-invitation-error\":_vm.errors.invite,\"person-to-edit\":_vm.personToEdit},on:{\"cancel\":function($event){_vm.modals.edit = false},\"confirm\":_vm.confirmEditPeople,\"confirm-invite\":_vm.confirmCreateAndInvite,\"invite\":_vm.confirmInvite}}),_c('hard-delete-modal',{attrs:{\"active\":_vm.modals.del,\"error-text\":_vm.$t('people.delete_error'),\"is-loading\":_vm.loading.del,\"is-error\":_vm.errors.del,\"lock-text\":_vm.personToDelete ? _vm.personToDelete.full_name : '',\"text\":_vm.deleteText},on:{\"cancel\":function($event){_vm.modals.del = false},\"confirm\":_vm.confirmDeletePeople}}),_c('build-people-filter-modal',{ref:\"build-filter-modal\",attrs:{\"active\":_vm.modals.isBuildFilterDisplayed},on:{\"cancel\":function($event){_vm.modals.isBuildFilterDisplayed = false},\"confirm\":_vm.confirmBuildFilter}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:{\n  'modal': true,\n  'is-active': _vm.active\n}},[_c('div',{staticClass:\"modal-background\",on:{\"click\":function($event){return _vm.$emit('cancel')}}}),_c('div',{staticClass:\"modal-content\"},[_c('div',{staticClass:\"box\"},[(_vm.personToEdit.id !== undefined)?_c('h1',{staticClass:\"title\"},[_vm._v(\" \"+_vm._s(_vm.$t(\"people.edit_title\"))+\" \"+_vm._s(_vm.personName)+\" \")]):_c('h1',{staticClass:\"title\"},[_vm._v(\" \"+_vm._s(_vm.$t(\"people.new_person\"))+\" \")]),_c('form',{on:{\"submit\":function($event){$event.preventDefault();}}},[_c('text-field',{ref:\"name-field\",attrs:{\"label\":_vm.$t('people.fields.first_name'),\"disabled\":_vm.isLdap},on:{\"enter\":function($event){return _vm.confirmClicked()}},model:{value:(_vm.form.first_name),callback:function ($$v) {_vm.$set(_vm.form, \"first_name\", $$v)},expression:\"form.first_name\"}}),_c('text-field',{attrs:{\"label\":_vm.$t('people.fields.last_name'),\"disabled\":_vm.isLdap},on:{\"enter\":function($event){return _vm.confirmClicked()}},model:{value:(_vm.form.last_name),callback:function ($$v) {_vm.$set(_vm.form, \"last_name\", $$v)},expression:\"form.last_name\"}}),_c('text-field',{attrs:{\"label\":_vm.$t('people.fields.email'),\"disabled\":_vm.isLdap},on:{\"enter\":function($event){return _vm.confirmClicked()}},model:{value:(_vm.form.email),callback:function ($$v) {_vm.$set(_vm.form, \"email\", $$v)},expression:\"form.email\"}}),_c('text-field',{attrs:{\"label\":_vm.$t('people.fields.phone')},on:{\"enter\":function($event){return _vm.confirmClicked()}},model:{value:(_vm.form.phone),callback:function ($$v) {_vm.$set(_vm.form, \"phone\", $$v)},expression:\"form.phone\"}}),_c('div',{staticClass:\"departments\"},[_c('label',{staticClass:\"label\"},[_vm._v(_vm._s(_vm.$t('people.fields.departments')))]),_vm._l((_vm.form.departments),function(departmentId){return _c('div',{key:departmentId,staticClass:\"department-element mb1\",on:{\"click\":function($event){return _vm.removeDepartment(departmentId)}}},[(departmentId)?_c('department-name',{attrs:{\"department\":_vm.departmentMap.get(departmentId)}}):_vm._e()],1)}),_c('div',{staticClass:\"flexrow\"},[(_vm.selectableDepartments.length > 0)?_c('combobox-department',{staticClass:\"flexrow-item\",attrs:{\"selectable-departments\":_vm.selectableDepartments},on:{\"enter\":_vm.confirmClicked},model:{value:(_vm.selectedDepartment),callback:function ($$v) {_vm.selectedDepartment=$$v},expression:\"selectedDepartment\"}}):_vm._e(),(_vm.selectableDepartments.length > 0)?_c('button',{staticClass:\"button is-success flexrow-item mb2\",class:{\n                'is-disabled': _vm.selectedDepartment === null\n              },on:{\"click\":_vm.addDepartment}},[_vm._v(\" \"+_vm._s(_vm.$t('main.add'))+\" \")]):_vm._e()],1)],2),_c('combobox',{attrs:{\"label\":_vm.$t('people.fields.role'),\"options\":_vm.roleOptions,\"localeKeyPrefix\":\"people.role.\"},on:{\"enter\":function($event){return _vm.confirmClicked()}},model:{value:(_vm.form.role),callback:function ($$v) {_vm.$set(_vm.form, \"role\", $$v)},expression:\"form.role\"}}),_c('combobox',{attrs:{\"label\":_vm.$t('people.fields.active'),\"options\":_vm.activeOptions},on:{\"enter\":function($event){return _vm.confirmClicked()}},model:{value:(_vm.form.active),callback:function ($$v) {_vm.$set(_vm.form, \"active\", $$v)},expression:\"form.active\"}})],1),_c('p',{staticClass:\"has-text-right\"},[(_vm.isCreating && _vm.isCurrentUserAdmin)?_c('button',{class:{\n            button: true,\n            'is-primary': true,\n            'is-loading': _vm.isCreateInviteLoading\n          },attrs:{\"disabled\":!_vm.isValidEmail},on:{\"click\":_vm.createAndInvite}},[_vm._v(\" \"+_vm._s(_vm.$t('people.create_invite'))+\" \")]):(_vm.isCurrentUserAdmin)?_c('button',{class:{\n            button: true,\n            'is-primary': true,\n            'is-loading': _vm.isInviteLoading\n          },attrs:{\"disabled\":!_vm.isValidEmail},on:{\"click\":_vm.invite}},[_vm._v(\" \"+_vm._s(_vm.$t('people.invite'))+\" \")]):_vm._e(),_c('a',{class:{\n            button: true,\n            'is-primary': true,\n            'is-loading': _vm.isLoading\n          },attrs:{\"disabled\":!_vm.isValidEmail},on:{\"click\":_vm.confirmClicked}},[_vm._v(\" \"+_vm._s(_vm.$t('main.confirmation'))+\" \")]),_c('button',{staticClass:\"button is-link\",on:{\"click\":function($event){return _vm.$emit('cancel')}}},[_vm._v(\" \"+_vm._s(_vm.$t(\"main.cancel\"))+\" \")])]),(_vm.isInvitationSuccess)?_c('div',{staticClass:\"success has-text-right mt1\"},[_vm._v(\" \"+_vm._s(_vm.$t('people.invite_success'))+\" \")]):_vm._e(),(_vm.isInvitationError)?_c('div',{staticClass:\"error has-text-right mt1\"},[_vm._v(\" \"+_vm._s(_vm.$t('people.invite_error'))+\" \")]):_vm._e(),(_vm.isError)?_c('div',{staticClass:\"error has-text-right mt1\"},[_vm._v(\" \"+_vm._s(_vm.$t('people.create_error'))+\" \")]):_vm._e()])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\n<div :class=\"{\n  'modal': true,\n  'is-active': active\n}\">\n  <div class=\"modal-background\" @click=\"$emit('cancel')\" ></div>\n\n  <div class=\"modal-content\">\n    <div class=\"box\">\n\n      <h1 class=\"title\" v-if=\"personToEdit.id !== undefined\">\n        {{ $t(\"people.edit_title\") }} {{ personName }}\n      </h1>\n      <h1 class=\"title\" v-else>\n        {{ $t(\"people.new_person\") }}\n      </h1>\n\n      <form v-on:submit.prevent>\n        <text-field\n          :label=\"$t('people.fields.first_name')\"\n          :disabled=\"isLdap\"\n          ref=\"name-field\"\n          @enter=\"confirmClicked()\"\n          v-model=\"form.first_name\"\n        />\n        <text-field\n          :label=\"$t('people.fields.last_name')\"\n          :disabled=\"isLdap\"\n          @enter=\"confirmClicked()\"\n          v-model=\"form.last_name\"\n        />\n        <text-field\n          :label=\"$t('people.fields.email')\"\n          :disabled=\"isLdap\"\n          @enter=\"confirmClicked()\"\n          v-model=\"form.email\"\n        />\n        <text-field\n          :label=\"$t('people.fields.phone')\"\n          @enter=\"confirmClicked()\"\n          v-model=\"form.phone\"\n        />\n\n        <div\n          class=\"departments\"\n        >\n          <label class=\"label\">{{ $t('people.fields.departments') }}</label>\n          <div\n            class=\"department-element mb1\"\n            :key=\"departmentId\"\n            @click=\"removeDepartment(departmentId)\"\n            v-for=\"departmentId in form.departments\"\n          >\n            <department-name\n              :department=\"departmentMap.get(departmentId)\"\n              v-if=\"departmentId\"\n            />\n          </div>\n          <div class=\"flexrow\">\n            <combobox-department\n              class=\"flexrow-item\"\n              :selectable-departments=\"selectableDepartments\"\n              @enter=\"confirmClicked\"\n              v-model=\"selectedDepartment\"\n              v-if=\"selectableDepartments.length > 0\"\n            />\n            <button\n              class=\"button is-success flexrow-item mb2\"\n              :class=\"{\n                'is-disabled': selectedDepartment === null\n              }\"\n              @click=\"addDepartment\"\n              v-if=\"selectableDepartments.length > 0\"\n            >\n              {{ $t('main.add')}}\n            </button>\n          </div>\n        </div>\n\n        <combobox\n          :label=\"$t('people.fields.role')\"\n          :options=\"roleOptions\"\n          localeKeyPrefix=\"people.role.\"\n          @enter=\"confirmClicked()\"\n          v-model=\"form.role\"\n        />\n        <combobox\n          :label=\"$t('people.fields.active')\"\n          :options=\"activeOptions\"\n          @enter=\"confirmClicked()\"\n          v-model=\"form.active\"\n        />\n      </form>\n\n      <p class=\"has-text-right\">\n        <button\n          :class=\"{\n            button: true,\n            'is-primary': true,\n            'is-loading': isCreateInviteLoading\n          }\"\n          :disabled=\"!isValidEmail\"\n          @click=\"createAndInvite\"\n          v-if=\"isCreating && isCurrentUserAdmin\"\n        >\n          {{ $t('people.create_invite') }}\n        </button>\n        <button\n          :class=\"{\n            button: true,\n            'is-primary': true,\n            'is-loading': isInviteLoading\n          }\"\n          :disabled=\"!isValidEmail\"\n          @click=\"invite\"\n          v-else-if=\"isCurrentUserAdmin\"\n        >\n          {{ $t('people.invite') }}\n        </button>\n        <a\n          :class=\"{\n            button: true,\n            'is-primary': true,\n            'is-loading': isLoading\n          }\"\n          :disabled=\"!isValidEmail\"\n          @click=\"confirmClicked\">\n          {{ $t('main.confirmation') }}\n        </a>\n         <button\n            @click=\"$emit('cancel')\"\n            class=\"button is-link\"\n          >\n            {{ $t(\"main.cancel\") }}\n          </button>\n      </p>\n\n      <div\n        class=\"success has-text-right mt1\"\n        v-if=\"isInvitationSuccess\"\n      >\n        {{ $t('people.invite_success') }}\n      </div>\n      <div\n        class=\"error has-text-right mt1\"\n        v-if=\"isInvitationError\"\n      >\n        {{ $t('people.invite_error') }}\n      </div>\n      <div\n        class=\"error has-text-right mt1\"\n        v-if=\"isError\"\n      >\n        {{ $t('people.create_error') }}\n      </div>\n    </div>\n  </div>\n</div>\n</template>\n\n<script>\nimport { mapGetters, mapActions } from 'vuex'\nimport { modalMixin } from './base_modal'\n\nimport TextField from '../widgets/TextField'\nimport Combobox from '../widgets/Combobox'\nimport ComboboxDepartment from '../widgets/ComboboxDepartment'\nimport DepartmentName from '../widgets/DepartmentName'\n\nexport default {\n  name: 'edit-modal',\n  mixins: [modalMixin],\n  props: [\n    'active',\n    'cancelRoute',\n    'errorText',\n    'isLoading',\n    'isCreateInviteLoading',\n    'isInvitationSuccess',\n    'isInvitationError',\n    'isInviteLoading',\n    'isError',\n    'onConfirmClicked',\n    'personToEdit',\n    'text'\n  ],\n\n  data () {\n    return {\n      isValidEmail: false,\n      form: {\n        first_name: '',\n        last_name: '',\n        email: '',\n        phone: '',\n        role: 'user',\n        active: 'true',\n        departments: []\n      },\n\n      roleOptions: [\n        { label: 'user', value: 'user' },\n        { label: 'manager', value: 'manager' },\n        { label: 'admin', value: 'admin' },\n        { label: 'client', value: 'client' },\n        { label: 'vendor', value: 'vendor' }\n      ],\n      activeOptions: [\n        { label: this.$t('main.yes'), value: 'true' },\n        { label: this.$t('main.no'), value: 'false' }\n      ],\n      selectedDepartment: null\n    }\n  },\n\n  components: {\n    TextField,\n    Combobox,\n    ComboboxDepartment,\n    DepartmentName\n  },\n\n  computed: {\n    ...mapGetters([\n      'departments',\n      'departmentMap',\n      'isLdap',\n      'isCurrentUserAdmin',\n      'people'\n    ]),\n\n    selectableDepartments () {\n      return this.departments.filter(department => {\n        return this.form.departments.findIndex(\n          selectedDepartment => selectedDepartment === department.id\n        ) === -1\n      })\n    },\n\n    isCreating () {\n      return this.personToEdit.id === undefined\n    },\n\n    personName () {\n      if (this.personToEdit !== undefined) {\n        return this.personToEdit.first_name + ' ' + this.personToEdit.last_name\n      } else {\n        return ''\n      }\n    }\n  },\n\n  methods: {\n    ...mapActions([]),\n\n    createAndInvite () {\n      this.$emit('confirm-invite', this.form)\n    },\n\n    invite () {\n      this.$emit('invite', this.form)\n    },\n\n    confirmClicked () {\n      const form = { ...this.form }\n      form.active =\n        this.form.active === 'true' || this.form.active === true\n      if (this.form.email) {\n        this.$emit('confirm', form)\n      }\n    },\n\n    addDepartment () {\n      this.form.departments.push(this.selectedDepartment)\n      this.selectedDepartment = null\n    },\n\n    removeDepartment (idToRemove) {\n      const departmentIndex = this.form.departments.indexOf(idToRemove)\n      if (departmentIndex >= 0) {\n        this.form.departments.splice(departmentIndex, 1)\n      }\n    },\n\n    resetForm () {\n      if (this.personToEdit) {\n        this.form = {\n          first_name: this.personToEdit.first_name,\n          last_name: this.personToEdit.last_name,\n          phone: this.personToEdit.phone,\n          email: this.personToEdit.email,\n          role: this.personToEdit.role,\n          active: !this.personToEdit.id || this.personToEdit.active\n            ? 'true'\n            : 'false',\n          departments: this.personToEdit.departments || []\n        }\n      } else {\n        this.form = {\n          first_name: '',\n          last_name: '',\n          email: '',\n          phone: '',\n          role: 'user',\n          active: 'true',\n          departments: []\n        }\n      }\n      this.checkEmailValidity()\n    },\n\n    checkEmailValidity () {\n      const regex = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/\n      const isExist = this.people.some((p) => {\n        return p.email === this.form.email && (\n          !this.personToEdit || this.personToEdit.email !== p.email\n        )\n      })\n      this.isValidEmail =\n        this.form.email &&\n        regex.test(this.form.email) &&\n        !isExist\n    }\n  },\n\n  watch: {\n    personToEdit () {\n      this.resetForm()\n    },\n\n    active () {\n      if (this.active) {\n        this.resetForm()\n        setTimeout(() => {\n          this.$refs['name-field'].focus()\n        }, 100)\n      }\n    },\n\n    'form.email' () {\n      this.checkEmailValidity()\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.department-element {\n  display: inline-block;\n  margin-right: 0.2em;\n  cursor: pointer;\n}\n\n.modal-content .box p.text {\n  margin-bottom: 1em;\n}\n.is-danger {\n  color: #ff3860;\n  font-style: italic;\n}\n</style>\n","import mod from \"-!../../../node_modules/@vue/cli-plugin-babel/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/@vue/cli-plugin-babel/node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./EditPersonModal.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/@vue/cli-plugin-babel/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/@vue/cli-plugin-babel/node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./EditPersonModal.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./EditPersonModal.vue?vue&type=template&id=895f47da&scoped=true&\"\nimport script from \"./EditPersonModal.vue?vue&type=script&lang=js&\"\nexport * from \"./EditPersonModal.vue?vue&type=script&lang=js&\"\nimport style0 from \"./EditPersonModal.vue?vue&type=style&index=0&id=895f47da&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"895f47da\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"data-list\"},[_c('div',{directives:[{name:\"scroll\",rawName:\"v-scroll\",value:(_vm.onBodyScroll),expression:\"onBodyScroll\"}],ref:\"body\",staticClass:\"datatable-wrapper\"},[_c('table',{staticClass:\"datatable\"},[_c('thead',{staticClass:\"datatable-head\"},[_c('tr',[_c('th',{staticClass:\"name datatable-row-header\",attrs:{\"scope\":\"col\"}},[_vm._v(\" \"+_vm._s(_vm.$t(\"people.list.name\"))+\" \")]),_c('th',{staticClass:\"email\",attrs:{\"scope\":\"col\"}},[_vm._v(\" \"+_vm._s(_vm.$t(\"people.list.email\"))+\" \")]),_c('th',{staticClass:\"phone\",attrs:{\"scope\":\"col\"}},[_vm._v(\" \"+_vm._s(_vm.$t(\"people.list.phone\"))+\" \")]),_c('th',{staticClass:\"role\",attrs:{\"scope\":\"col\"}},[_vm._v(\" \"+_vm._s(_vm.$t(\"people.list.role\"))+\" \")]),_c('th',{staticClass:\"departments\",attrs:{\"scope\":\"col\"}},[_vm._v(\" \"+_vm._s(_vm.$t(\"people.list.departments\"))+\" \")]),_c('th',{staticClass:\"actions\",attrs:{\"scope\":\"col\"}})])]),(_vm.activePeople.length > 0)?_c('tbody',{staticClass:\"datatable-body\"},[_c('tr',{staticClass:\"datatable-type-header\"},[_c('th',{attrs:{\"scope\":\"rowgroup\",\"colspan\":\"5\"}},[_c('span',{staticClass:\"datatable-row-header\"},[_vm._v(_vm._s(_vm.$t('people.active')))])])]),_vm._l((_vm.activePeople),function(entry){return _c('tr',{key:entry.id,staticClass:\"datatable-row\"},[_c('people-name-cell',{staticClass:\"name\",attrs:{\"person\":entry}}),_c('td',{staticClass:\"email\"},[_vm._v(_vm._s(entry.email))]),_c('td',{staticClass:\"phone\"},[_vm._v(_vm._s(entry.phone))]),_c('td',{staticClass:\"role\"},[_vm._v(_vm._s(_vm.$t('people.role.' + entry.role)))]),_c('td',{staticClass:\"departments\"},_vm._l((_vm.sortDepartments(entry.departments)),function(department){return _c('span',{key:entry.id + '-' + department.id,staticClass:\"departments-element\"},[(department)?_c('department-name',{attrs:{\"department\":department}}):_vm._e()],1)}),0),(_vm.isCurrentUserAdmin)?_c('row-actions-cell',{attrs:{\"entry-id\":entry.id,\"hide-delete\":true},on:{\"edit-clicked\":function($event){return _vm.$emit('edit-clicked', entry)}}}):_c('td',{staticClass:\"actions\"})],1)})],2):_vm._e(),(_vm.unactivePeople.length > 0)?_c('tbody',{staticClass:\"datatable-body\"},[_c('tr',{staticClass:\"datatable-type-header\"},[_c('th',{attrs:{\"scope\":\"rowgroup\",\"colspan\":\"5\"}},[_c('span',{staticClass:\"datatable-row-header\"},[_vm._v(\" \"+_vm._s(_vm.$t('people.unactive'))+\" \")])])]),_vm._l((_vm.unactivePeople),function(entry){return _c('tr',{key:entry.id,staticClass:\"datatable-row\"},[_c('people-name-cell',{staticClass:\"name\",attrs:{\"person\":entry}}),_c('td',{staticClass:\"email\"},[_vm._v(_vm._s(entry.email))]),_c('td',{staticClass:\"phone\"},[_vm._v(_vm._s(entry.phone))]),_c('td',{staticClass:\"role\"},[_vm._v(_vm._s(_vm.$t('people.role.' + entry.role)))]),_c('td',{staticClass:\"departments\"},_vm._l((_vm.sortDepartments(entry.departments)),function(department){return _c('span',{key:entry.id + '-' + department.id,staticClass:\"departments-element\"},[(department)?_c('department-name',{attrs:{\"department\":department}}):_vm._e()],1)}),0),(_vm.isCurrentUserAdmin)?_c('row-actions-cell',{attrs:{\"entry-id\":entry.id},on:{\"edit-clicked\":function($event){return _vm.$emit('edit-clicked', entry)},\"delete-clicked\":function($event){return _vm.$emit('delete-clicked', entry)}}}):_c('td',{staticClass:\"actions\"})],1)})],2):_vm._e()])]),_c('table-info',{attrs:{\"is-loading\":_vm.isLoading,\"is-error\":_vm.isError}}),(!_vm.isLoading)?_c('p',{staticClass:\"has-text-centered footer-info\"},[_vm._v(\" \"+_vm._s(_vm.entries.length)+\" \"+_vm._s(_vm.$tc('people.persons', _vm.entries.length))+\" (\"+_vm._s(_vm.activePeople.length)+\" \"+_vm._s(_vm.$tc('people.active_persons', _vm.activePeople.length))+\") \")]):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n<div class=\"data-list\">\n  <div\n    class=\"datatable-wrapper\"\n    ref=\"body\"\n    v-scroll=\"onBodyScroll\"\n  >\n    <table class=\"datatable\">\n      <thead class=\"datatable-head\">\n        <tr>\n          <th scope=\"col\" class=\"name datatable-row-header\">\n            {{ $t(\"people.list.name\") }}\n          </th>\n          <th scope=\"col\" class=\"email\">\n            {{ $t(\"people.list.email\") }}\n          </th>\n          <th scope=\"col\" class=\"phone\">\n            {{ $t(\"people.list.phone\") }}\n          </th>\n          <th scope=\"col\" class=\"role\">\n            {{ $t(\"people.list.role\") }}\n          </th>\n          <th scope=\"col\" class=\"departments\">\n            {{ $t(\"people.list.departments\") }}\n          </th>\n          <th scope=\"col\" class=\"actions\"></th>\n        </tr>\n      </thead>\n      <tbody class=\"datatable-body\" v-if=\"activePeople.length > 0\">\n        <tr class=\"datatable-type-header\">\n          <th scope=\"rowgroup\" colspan=\"5\">\n            <span class=\"datatable-row-header\">{{ $t('people.active') }}</span>\n          </th>\n        </tr>\n        <tr\n          class=\"datatable-row\"\n          v-for=\"entry in activePeople\"\n          :key=\"entry.id\"\n        >\n          <people-name-cell class=\"name\" :person=\"entry\" />\n          <td class=\"email\">{{ entry.email }}</td>\n          <td class=\"phone\">{{ entry.phone }}</td>\n          <td class=\"role\">{{ $t('people.role.' + entry.role) }}</td>\n          <td class=\"departments\">\n            <span\n              class=\"departments-element\"\n              v-for=\"department in sortDepartments(entry.departments)\"\n              :key=\"entry.id + '-' + department.id\"\n            >\n              <department-name\n                :department=\"department\"\n                v-if=\"department\"\n              />\n            </span>\n          </td>\n          <row-actions-cell\n            v-if=\"isCurrentUserAdmin\"\n            :entry-id=\"entry.id\"\n            :hide-delete=\"true\"\n            @edit-clicked=\"$emit('edit-clicked', entry)\"\n          />\n          <td class=\"actions\" v-else>\n          </td>\n        </tr>\n      </tbody>\n      <tbody class=\"datatable-body\" v-if=\"unactivePeople.length > 0\">\n        <tr class=\"datatable-type-header\">\n          <th scope=\"rowgroup\" colspan=\"5\">\n            <span class=\"datatable-row-header\">\n              {{ $t('people.unactive') }}\n            </span>\n          </th>\n        </tr>\n        <tr\n          class=\"datatable-row\"\n          v-for=\"entry in unactivePeople\"\n          :key=\"entry.id\"\n        >\n          <people-name-cell class=\"name\" :person=\"entry\" />\n          <td class=\"email\">{{ entry.email }}</td>\n          <td class=\"phone\">{{ entry.phone }}</td>\n          <td class=\"role\">{{ $t('people.role.' + entry.role) }}</td>\n          <td class=\"departments\">\n            <span\n              class=\"departments-element\"\n              v-for=\"department in sortDepartments(entry.departments)\"\n              :key=\"entry.id + '-' + department.id\"\n            >\n              <department-name\n                :department=\"department\"\n                v-if=\"department\"\n              />\n            </span>\n          </td>\n          <row-actions-cell\n            v-if=\"isCurrentUserAdmin\"\n            :entry-id=\"entry.id\"\n            @edit-clicked=\"$emit('edit-clicked', entry)\"\n            @delete-clicked=\"$emit('delete-clicked', entry)\"\n          />\n          <td class=\"actions\" v-else>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n\n  <table-info\n    :is-loading=\"isLoading\"\n    :is-error=\"isError\"\n  />\n\n  <p class=\"has-text-centered footer-info\" v-if=\"!isLoading\">\n    {{ entries.length }} {{ $tc('people.persons', entries.length) }}\n    ({{ activePeople.length }} {{ $tc('people.active_persons', activePeople.length) }})\n  </p>\n</div>\n</template>\n\n<script>\nimport { mapGetters, mapActions } from 'vuex'\n\nimport { sortByName } from '@/lib/sorting'\n\nimport PeopleNameCell from '@/components/cells/PeopleNameCell'\nimport RowActionsCell from '@/components/cells/RowActionsCell'\nimport TableInfo from '@/components/widgets/TableInfo'\nimport DepartmentName from '../widgets/DepartmentName.vue'\n\nexport default {\n  name: 'people-list',\n  components: {\n    PeopleNameCell,\n    RowActionsCell,\n    TableInfo,\n    DepartmentName\n  },\n\n  props: [\n    'entries',\n    'isLoading',\n    'isError',\n    'onEditClicked',\n    'onDeleteClicked'\n  ],\n\n  computed: {\n    ...mapGetters([\n      'departmentMap',\n      'isCurrentUserAdmin'\n    ]),\n\n    activePeople () {\n      return this.entries.filter(person => person.active)\n    },\n\n    unactivePeople () {\n      return this.entries.filter(person => !person.active)\n    }\n  },\n\n  methods: {\n    ...mapActions([\n    ]),\n\n    taskColor (nbTasks) {\n      if (nbTasks < 1 || nbTasks > 4) {\n        return 'red'\n      } else {\n        return ''\n      }\n    },\n\n    onBodyScroll (event, position) {\n      this.$refs.body.style.left = `-${position.scrollLeft}px`\n    },\n\n    sortDepartments (departmentIds = []) {\n      return sortByName(departmentIds\n        .map(departmentId => this.departmentMap.get(departmentId)))\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.name {\n  width: 230px;\n  min-width: 230px;\n  user-select: text;\n}\n.email {\n  width: 300px;\n  min-width: 300px;\n  user-select: text;\n}\n.phone {\n  width: 200px;\n  min-width: 200px;\n  user-select: text;\n}\n.role {\n  width: 150px;\n  min-width: 150px;\n}\n.actions {\n  min-width: 100px;\n}\n\n.data-list {\n  margin-top: 2em;\n}\n\n.departments-element {\n  padding: 5px;\n}\n</style>\n","import mod from \"-!../../../node_modules/@vue/cli-plugin-babel/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/@vue/cli-plugin-babel/node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./PeopleList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/@vue/cli-plugin-babel/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/@vue/cli-plugin-babel/node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./PeopleList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PeopleList.vue?vue&type=template&id=59790e12&scoped=true&\"\nimport script from \"./PeopleList.vue?vue&type=script&lang=js&\"\nexport * from \"./PeopleList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PeopleList.vue?vue&type=style&index=0&id=59790e12&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"59790e12\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:{\n  'modal': true,\n  'is-active': _vm.active\n}},[_c('div',{staticClass:\"modal-background\",on:{\"click\":function($event){return _vm.$emit('cancel')}}}),_c('div',{staticClass:\"modal-content\"},[_c('div',{staticClass:\"box content\"},[_c('h1',{staticClass:\"title\"},[_vm._v(\" \"+_vm._s(_vm.$t('entities.build_filter.title'))+\" \")]),_c('h3',{staticClass:\"subtitle\"},[_vm._v(\" \"+_vm._s(_vm.$t('entities.build_filter.department'))+\" \")]),_vm._l((_vm.departmentFilters.values),function(departmentFilter,i){return _c('div',{key:'task-type-' + i,staticClass:\"flexrow department-filter\"},[_c('combobox',{staticClass:\"flexrow-item\",attrs:{\"options\":_vm.general.operatorOptions,\"locale-key-prefix\":\"entities.build_filter.\"},on:{\"input\":function($event){return _vm.onDepartmentOperatorChanged(departmentFilter)}},model:{value:(departmentFilter.operator),callback:function ($$v) {_vm.$set(departmentFilter, \"operator\", $$v)},expression:\"departmentFilter.operator\"}}),_c('div',{staticClass:\"flexrow-item flexrow value-column\"},[_vm._l((departmentFilter.values),function(_,index){return _c('div',{key:(\"department-\" + index)},[_c('combobox',{staticClass:\"flexrow-item\",attrs:{\"options\":_vm.departmentsOptions},model:{value:(departmentFilter.values[index]),callback:function ($$v) {_vm.$set(departmentFilter.values, index, $$v)},expression:\"departmentFilter.values[index]\"}})],1)}),(departmentFilter.operator === 'in')?_c('button-simple',{staticClass:\"mt05\",attrs:{\"icon\":\"plus\"},on:{\"click\":function($event){return _vm.addInDepartmentFilter(departmentFilter)}}}):_vm._e()],2)],1)}),_c('modal-footer',{attrs:{\"error-text\":_vm.$t('entities.thumbnails.error')},on:{\"confirm\":_vm.applyFilter,\"cancel\":function($event){return _vm.$emit('cancel')}}})],2)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n<div :class=\"{\n  'modal': true,\n  'is-active': active\n}\">\n  <div @click=\"$emit('cancel')\" class=\"modal-background\"></div>\n\n  <div class=\"modal-content\">\n    <div class=\"box content\">\n      <h1 class=\"title\">\n        {{ $t('entities.build_filter.title') }}\n      </h1>\n\n      <!--combobox\n        class=\"flexrow-item\"\n        :options=\"general.unionOptions\"\n        locale-key-prefix=\"entities.build_filter.\"\n        v-model=\"union\"\n      /-->\n\n      <h3 class=\"subtitle\">\n        {{ $t('entities.build_filter.department') }}\n      </h3>\n\n      <div\n        class=\"flexrow department-filter\"\n        :key=\"'task-type-' + i\"\n        v-for=\"(departmentFilter, i) in departmentFilters.values\"\n      >\n        <combobox\n          class=\"flexrow-item\"\n          :options=\"general.operatorOptions\"\n          @input=\"onDepartmentOperatorChanged(departmentFilter)\"\n          locale-key-prefix=\"entities.build_filter.\"\n          v-model=\"departmentFilter.operator\"\n        />\n        <div class=\"flexrow-item flexrow value-column\">\n          <div\n            :key=\"`department-${index}`\"\n            v-for=\"(_, index) in departmentFilter.values\"\n          >\n            <combobox\n              class=\"flexrow-item\"\n              :options=\"departmentsOptions\"\n              v-model=\"departmentFilter.values[index]\"\n            />\n          </div>\n          <button-simple\n            class=\"mt05\"\n            icon=\"plus\"\n            @click=\"addInDepartmentFilter(departmentFilter)\"\n            v-if=\"departmentFilter.operator === 'in'\"\n          />\n        </div>\n      </div>\n\n      <modal-footer\n        :error-text=\"$t('entities.thumbnails.error')\"\n        @confirm=\"applyFilter\"\n        @cancel=\"$emit('cancel')\"\n      />\n    </div>\n  </div>\n</div>\n</template>\n\n<script>\nimport { mapGetters, mapActions } from 'vuex'\nimport { modalMixin } from './base_modal'\nimport { getFilters } from '../../lib/filtering'\n\nimport ButtonSimple from '../widgets/ButtonSimple'\nimport Combobox from '../widgets/Combobox'\nimport ModalFooter from './ModalFooter'\n\nexport default {\n  name: 'build-people-filter-modal',\n  mixins: [modalMixin],\n\n  components: {\n    ButtonSimple,\n    Combobox,\n    ModalFooter\n  },\n\n  props: {\n    active: {\n      type: Boolean,\n      default: false\n    }\n  },\n\n  data () {\n    return {\n      general: {\n        operatorOptions: [\n          { label: 'equal', value: '=' },\n          { label: 'not_equal', value: '=-' },\n          { label: 'in', value: 'in' }\n        ],\n        unionOptions: [\n          { label: 'union_and', value: 'and' },\n          { label: 'union_or', value: 'or' }\n        ]\n      },\n      departmentFilters: {\n        values: []\n      },\n      union: 'and'\n    }\n  },\n\n  mounted () {\n    this.reset()\n    this.setFiltersFromCurrentQuery()\n  },\n\n  computed: {\n    ...mapGetters([\n      'peopleSearchText',\n      'peopleSearchText',\n      'departmentMap',\n      'departments'\n    ]),\n\n    departmentsOptions () {\n      return this.departments.map(department => {\n        return {\n          label: department.name,\n          value: department.id\n        }\n      })\n    }\n  },\n\n  methods: {\n    ...mapActions([\n    ]),\n\n    // Build filter\n\n    applyFilter () {\n      const query = this.buildFilter()\n      this.$emit('confirm', query)\n    },\n\n    buildFilter () {\n      let query = ''\n      query = this.applyDepartmentChoice(query)\n      query = this.applyUnionChoice(query)\n      return query.trim()\n    },\n\n    addDepartmentFilter () {\n      const filter = {\n        operator: '=',\n        values: [this.departments[0].id]\n      }\n      this.departmentFilters.values.push(filter)\n      return filter\n    },\n\n    addInDepartmentFilter (departmentFilter) {\n      departmentFilter.values.push(this.departments[0].name)\n    },\n\n    removeDepartmentFilter (departmentFilter) {\n      this.departmentFilters.values =\n        this.departmentFilters.values.filter(f => f !== departmentFilter)\n    },\n\n    applyDepartmentChoice (query) {\n      this.departmentFilters.values.forEach(departmentFilter => {\n        let operator = '=['\n        if (departmentFilter.operator === '=-') operator = '=[-'\n        const value = departmentFilter\n          .values\n          .map(dId => {\n            return this.departmentMap.get(dId)\n              ? this.departmentMap.get(dId).name\n              : this.departments[0].name\n          })\n          .join(',')\n        query += ` department${operator}${value}]`\n      })\n      return query\n    },\n\n    applyUnionChoice (query) {\n      if (this.union === 'or') {\n        query = ` +(${query.trim()})`\n      }\n      return query\n    },\n\n    // Helpers to set filters from search query\n\n    setFiltersFromCurrentQuery () {\n      if (!this.peopleSearchText) {\n        return\n      }\n      this.departmentFilters.values = []\n\n      const filters = getFilters({\n        entryIndex: [],\n        departments: this.departments,\n        persons: [],\n        query: this.peopleSearchText\n      })\n      filters.forEach((filter) => {\n        this.setFiltersFromDepartmentQuery(filter)\n      })\n      if (filters.union) {\n        this.setUnion()\n      }\n    },\n\n    setFiltersFromDepartmentQuery (filter) {\n      let operator = '='\n      if (filter.values.length > 1) {\n        operator = 'in'\n      } else if (filter.excluding) {\n        operator = '=-'\n      }\n      this.departmentFilters.values.push({\n        operator,\n        values: filter.values.map(d => d.id)\n      })\n    },\n\n    setUnion () {\n      this.union = 'or'\n    },\n\n    // General\n\n    onDepartmentOperatorChanged (departmentFilter) {\n      if (departmentFilter.operator !== 'in') {\n        departmentFilter.values = [departmentFilter.values[0]]\n      }\n    },\n\n    reset () {\n      this.departmentFilters.values = [{\n        operator: '=',\n        values: this.departments.length > 0\n          ? [this.departments[0].id]\n          : []\n      }]\n    }\n  },\n\n  watch: {\n    active () {\n      if (this.active) {\n        this.reset()\n        this.setFiltersFromCurrentQuery()\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.modal-content {\n  max-height: calc(100vh - 7rem);\n  margin-top: 3rem;\n}\n\n.add-button button {\n  margin-left: 0;\n}\n\n.subtitle {\n  color: $grey;\n  font-size: 1em;\n  margin-top: 1.1em;\n  text-transform: uppercase;\n  margin-bottom: 0.5em;\n  margin-left: 0.1em;\n}\n\n.field {\n  margin-top: 0;\n  margin-bottom: 0;\n}\n\n.department-filter {\n  margin-bottom: 0.3em;\n  align-items: flex-start;\n\n  .descriptor-text-value {\n    padding: 0;\n  }\n}\n\n.value-column {\n  flex-direction: column;\n  align-items: flex-start;\n}\n</style>\n","import mod from \"-!../../../node_modules/@vue/cli-plugin-babel/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/@vue/cli-plugin-babel/node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./BuildPeopleFilterModal.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/@vue/cli-plugin-babel/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/@vue/cli-plugin-babel/node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./BuildPeopleFilterModal.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BuildPeopleFilterModal.vue?vue&type=template&id=edae312a&scoped=true&\"\nimport script from \"./BuildPeopleFilterModal.vue?vue&type=script&lang=js&\"\nexport * from \"./BuildPeopleFilterModal.vue?vue&type=script&lang=js&\"\nimport style0 from \"./BuildPeopleFilterModal.vue?vue&type=style&index=0&id=edae312a&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"edae312a\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"people page fixed-page\">\n    <div class=\"flexrow page-header\">\n      <page-title class=\"flexrow-item filler\" :text=\"$t('people.title')\" />\n\n      <button-simple\n        class=\"flexrow-item\"\n        :title=\"$t('main.csv.import_file')\"\n        :is-responsive=\"true\"\n        icon=\"upload\"\n        @click=\"showImportModal\"\n        v-if=\"isCurrentUserAdmin\"\n      />\n      <button-href-link\n        class=\"flexrow-item\"\n        :title=\"$t('main.csv.export_file')\"\n        icon=\"download\"\n        path=\"/api/export/csv/persons.csv\"\n      />\n      <button-simple\n        class=\"flexrow-item\"\n        :text=\"$t('people.new_person')\"\n        :is-responsive=\"true\"\n        icon=\"plus\"\n        @click=\"onNewClicked\"\n        v-if=\"isCurrentUserAdmin\"\n      />\n    </div>\n\n    <div class=\"flexrow search-options\">\n      <search-field\n        ref=\"people-search-field\"\n        class=\"search flexrow-item\"\n        :can-save=\"true\"\n        @change=\"onSearchChange\"\n        @enter=\"saveSearchQuery\"\n        @save=\"saveSearchQuery\"\n        placeholder=\"ex: John Doe\"\n      />\n      <button-simple\n        class=\"flexrow-item filter-button\"\n        :title=\"$t('entities.build_filter.title')\"\n        icon=\"funnel\"\n        @click=\"() => modals.isBuildFilterDisplayed = true\"\n      />\n    </div>\n\n    <div class=\"query-list\">\n      <search-query-list\n        :queries=\"peopleSearchQueries\"\n        @change-search=\"changeSearch\"\n        @remove-search=\"removeSearchQuery\"\n        v-if=\"!isPeopleLoading\"\n      />\n    </div>\n\n    <people-list\n      :entries=\"displayedPeople\"\n      :is-loading=\"isPeopleLoading\"\n      :is-error=\"isPeopleLoadingError\"\n      @edit-clicked=\"onEditClicked\"\n      @delete-clicked=\"onDeleteClicked\"\n    />\n\n    <import-render-modal\n      :active=\"modals.isImportRenderDisplayed\"\n      :is-loading=\"isImportPeopleLoading\"\n      :is-error=\"isImportPeopleLoadingError\"\n      :parsed-csv=\"parsedCSV\"\n      :form-data=\"personCsvFormData\"\n      :columns=\"csvColumns\"\n      :dataMatchers=\"dataMatchers\"\n      :database=\"filteredPeople\"\n      @reupload=\"resetImport\"\n      @cancel=\"hideImportRenderModal\"\n      @confirm=\"uploadImportFile\"\n    />\n\n    <import-modal\n      ref=\"import-modal\"\n      :active=\"modals.importModal\"\n      :is-loading=\"isImportPeopleLoading\"\n      :is-error=\"isImportPeopleLoadingError\"\n      :form-data=\"personCsvFormData\"\n      :columns=\"csvColumns\"\n      @cancel=\"hideImportModal\"\n      @confirm=\"renderImport\"\n    />\n\n    <edit-person-modal\n      :active=\"modals.edit\"\n      :is-loading=\"loading.edit\"\n      :is-invite-loading=\"loading.invite\"\n      :is-create-invite-loading=\"loading.createAndInvite\"\n      :is-error=\"errors.edit\"\n      :is-invitation-success=\"success.invite\"\n      :is-invitation-error=\"errors.invite\"\n      :person-to-edit=\"personToEdit\"\n      @cancel=\"modals.edit = false\"\n      @confirm=\"confirmEditPeople\"\n      @confirm-invite=\"confirmCreateAndInvite\"\n      @invite=\"confirmInvite\"\n    />\n\n    <hard-delete-modal\n      :active=\"modals.del\"\n      :error-text=\"$t('people.delete_error')\"\n      :is-loading=\"loading.del\"\n      :is-error=\"errors.del\"\n      :lock-text=\"personToDelete ? personToDelete.full_name : ''\"\n      :text=\"deleteText\"\n      @cancel=\"modals.del = false\"\n      @confirm=\"confirmDeletePeople\"\n    />\n\n    <build-people-filter-modal\n      ref=\"build-filter-modal\"\n      :active=\"modals.isBuildFilterDisplayed\"\n      @cancel=\"modals.isBuildFilterDisplayed = false\"\n      @confirm=\"confirmBuildFilter\"\n    />\n  </div>\n</template>\n\n<script>\n\nimport { mapGetters, mapActions } from 'vuex'\n\nimport csv from '../../lib/csv'\nimport ButtonHrefLink from '../widgets/ButtonHrefLink'\nimport ButtonSimple from '../widgets/ButtonSimple'\nimport EditPersonModal from '../modals/EditPersonModal'\nimport HardDeleteModal from '../modals/HardDeleteModal'\nimport ImportModal from '../modals/ImportModal'\nimport ImportRenderModal from '../modals/ImportRenderModal'\nimport PeopleList from '../lists/PeopleList'\nimport PageTitle from '../widgets/PageTitle'\nimport SearchField from '../widgets/SearchField'\nimport SearchQueryList from '../widgets/SearchQueryList'\nimport { searchMixin } from '@/components/mixins/search'\nimport BuildPeopleFilterModal from '@/components/modals/BuildPeopleFilterModal'\n\nexport default {\n  name: 'people',\n  mixins: [searchMixin],\n  components: {\n    BuildPeopleFilterModal,\n    ButtonHrefLink,\n    ButtonSimple,\n    EditPersonModal,\n    HardDeleteModal,\n    ImportModal,\n    PageTitle,\n    PeopleList,\n    ImportRenderModal,\n    SearchField,\n    SearchQueryList\n  },\n\n  data () {\n    return {\n      csvColumns: [\n        'First Name',\n        'Last Name',\n        'Email',\n        'Phone',\n        'Role'\n      ],\n      dataMatchers: [\n        'Email'\n      ],\n      errors: {\n        del: false,\n        edit: false,\n        invite: false\n      },\n      loading: {\n        createAndInvite: false,\n        edit: false,\n        del: false,\n        invite: false\n      },\n      modals: {\n        edit: false,\n        del: false,\n        importModal: false,\n        isImportRenderDisplayed: false,\n        isBuildFilterDisplayed: false\n      },\n      parsedCSV: [],\n      personToDelete: {},\n      personToEdit: { role: 'user' },\n      success: {\n        invite: false\n      }\n    }\n  },\n\n  mounted () {\n    this.loadPeople(() => {\n      this.setSearchFromUrl()\n      this.onSearchChange()\n    }) // Needed to show department informations\n  },\n\n  watch: {\n  },\n\n  computed: {\n    ...mapGetters([\n      'displayedPeople',\n      'isCurrentUserAdmin',\n\n      'isPeopleLoading',\n      'isPeopleLoadingError',\n\n      'isImportPeopleModalShown',\n      'isImportPeopleLoading',\n      'isImportPeopleLoadingError',\n\n      'peopleSearchQueries',\n      'personCsvFormData'\n    ]),\n\n    deleteText () {\n      const person = this.personToDelete\n      if (person !== undefined) {\n        const personName = `${person.first_name} ${person.last_name}`\n        return this.$t('people.delete_text', { personName })\n      } else {\n        return ''\n      }\n    },\n\n    filteredPeople () {\n      const persons = {}\n      this.displayedPeople.forEach(person => {\n        const personKey = person.email\n        persons[personKey] = true\n      })\n      return persons\n    },\n\n    searchField () {\n      return this.$refs['people-search-field']\n    }\n  },\n\n  methods: {\n    ...mapActions([\n      'editPerson',\n      'deletePeople',\n      'invitePerson',\n      'loadPeople',\n      'loadDepartments',\n      'newPerson',\n      'newPersonAndInvite',\n      'removePeopleSearch',\n      'savePeopleSearch',\n      'setPeopleSearch',\n      'uploadPersonFile'\n    ]),\n\n    renderImport (data, mode) {\n      this.loading.importing = true\n      this.errors.importing = false\n      this.formData = data\n      if (mode === 'file') {\n        data = data.get('file')\n      }\n      csv.processCSV(data)\n        .then((results) => {\n          this.parsedCSV = results\n          this.hideImportModal()\n          this.loading.importing = false\n          this.showImportRenderModal()\n        })\n    },\n\n    uploadImportFile (data, toUpdate) {\n      const formData = new FormData()\n      const filename = 'import.csv'\n      const file = new File([data.join('\\n')], filename, { type: 'text/csv' })\n\n      formData.append('file', file)\n\n      this.loading.importing = true\n      this.errors.importing = false\n      this.$store.commit('PERSON_CSV_FILE_SELECTED', formData)\n\n      this.uploadPersonFile(toUpdate)\n        .then(() => {\n          this.$store.dispatch('loadPeople')\n          this.hideImportRenderModal()\n        })\n        .catch((err) => {\n          console.error(err)\n          this.loading.importing = false\n          this.errors.importing = true\n        })\n    },\n\n    resetImport () {\n      this.errors.importing = false\n      this.hideImportRenderModal()\n      this.$store.commit('PERSON_CSV_FILE_SELECTED', null)\n      this.$refs['import-modal'].reset()\n      this.showImportModal()\n    },\n\n    confirmEditPeople (form) {\n      let action = 'editPerson'\n      if (this.personToEdit.id === undefined) action = 'newPerson'\n      else form.id = this.personToEdit.id\n      this.loading.edit = true\n      this.errors.edit = false\n      this[action](form)\n        .then(() => {\n          this.loading.edit = false\n          this.modals.edit = false\n        })\n        .catch((err) => {\n          console.error(err)\n          this.errors.edit = true\n          this.loading.edit = false\n        })\n    },\n\n    confirmCreateAndInvite (form) {\n      this.loading.createAndInvite = true\n      this.errors.edit = false\n      this.newPersonAndInvite(form)\n        .then(() => {\n          this.loading.createAndInvite = false\n          this.modals.edit = false\n        })\n        .catch((err) => {\n          console.error(err)\n          this.errors.edit = true\n          this.loading.createAndInvite = false\n        })\n    },\n\n    confirmInvite (form) {\n      form.id = this.personToEdit.id\n      this.loading.invite = true\n      this.errors.invite = false\n      this.invitePerson(form)\n        .then(() => {\n          this.loading.invite = false\n          this.success.invite = true\n        })\n        .catch((err) => {\n          console.error(err)\n          this.loading.invite = false\n          this.success.invite = false\n          this.errors.invite = true\n        })\n    },\n\n    confirmDeletePeople () {\n      this.loading.del = true\n      this.errors.del = false\n      this.deletePeople(this.personToDelete)\n        .then(() => {\n          this.loading.del = false\n          this.modals.del = false\n        })\n        .catch((err) => {\n          console.error(err)\n          this.loading.del = false\n          this.errors.del = true\n        })\n    },\n\n    onSearchChange () {\n      if (!this.searchField) return\n      const searchQuery = this.searchField.getValue()\n      if (searchQuery.length !== 1) {\n        this.setPeopleSearch(searchQuery)\n        this.setSearchInUrl()\n      }\n    },\n\n    onDeleteClicked (person) {\n      this.personToDelete = person\n      this.modals.del = true\n    },\n\n    onEditClicked (person) {\n      this.errors.invite = false\n      this.success.invite = false\n      this.personToEdit = person\n      this.modals.edit = true\n    },\n\n    onNewClicked () {\n      this.errors.invite = false\n      this.success.invite = false\n      this.personToEdit = { role: 'user' }\n      this.modals.edit = true\n    },\n\n    showImportModal () {\n      this.modals.importModal = true\n    },\n\n    hideImportModal () {\n      this.modals.importModal = false\n    },\n\n    showImportRenderModal () {\n      this.modals.isImportRenderDisplayed = true\n    },\n\n    hideImportRenderModal () {\n      this.modals.isImportRenderDisplayed = false\n    },\n\n    saveSearchQuery (searchQuery) {\n      this.savePeopleSearch(searchQuery)\n        .catch(console.error)\n    },\n\n    removeSearchQuery (searchQuery) {\n      this.removePeopleSearch(searchQuery)\n        .catch(console.error)\n    },\n\n    confirmBuildFilter (query) {\n      this.modals.isBuildFilterDisplayed = false\n      this.searchField.setValue(query)\n      this.onSearchChange()\n    }\n  },\n\n  metaInfo () {\n    return {\n      title: `${this.$t('people.title')} - Kitsu`\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.search {\n  margin-top: 2em;\n}\n.query-list {\n  margin-top: 1.5rem;\n}\n.search-options {\n  align-items: flex-start;\n}\n.filter-button {\n  margin-top: 0.3em;\n}\n</style>\n","import mod from \"-!../../../node_modules/@vue/cli-plugin-babel/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/@vue/cli-plugin-babel/node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./People.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/@vue/cli-plugin-babel/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/@vue/cli-plugin-babel/node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./People.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./People.vue?vue&type=template&id=305e4f64&scoped=true&\"\nimport script from \"./People.vue?vue&type=script&lang=js&\"\nexport * from \"./People.vue?vue&type=script&lang=js&\"\nimport style0 from \"./People.vue?vue&type=style&index=0&id=305e4f64&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"305e4f64\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./PeopleList.vue?vue&type=style&index=0&id=59790e12&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('th',{staticClass:\"name datatable-row-header\",attrs:{\"scope\":\"row\"}},[_c('div',{staticClass:\"people-name\"},[_c('people-avatar',{staticClass:\"avatar\",attrs:{\"person\":_vm.person}}),_c('people-name',{staticClass:\"people-name\",attrs:{\"person\":_vm.person}})],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n<th scope=\"row\" class=\"name datatable-row-header\">\n  <div class=\"people-name\">\n    <people-avatar class=\"avatar\" :person=\"person\" />\n    <people-name class=\"people-name\" :person=\"person\" />\n  </div>\n</th>\n</template>\n\n<script>\nimport { mapGetters, mapActions } from 'vuex'\nimport PeopleAvatar from '../widgets/PeopleAvatar'\nimport PeopleName from '../widgets/PeopleName'\n\nexport default {\n  name: 'people-name-cell',\n  components: {\n    PeopleName,\n    PeopleAvatar\n  },\n\n  props: {\n    person: {\n      type: Object,\n      required: true\n    }\n  },\n\n  computed: {\n    ...mapGetters([\n    ])\n  },\n  methods: {\n    ...mapActions([\n    ])\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.people-name {\n  display: flex;\n  align-items: center;\n  flex-direction: row;\n}\n\n.people-name {\n  margin-left: 0.6em;\n}\n</style>\n","import mod from \"-!../../../node_modules/@vue/cli-plugin-babel/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/@vue/cli-plugin-babel/node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./PeopleNameCell.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/@vue/cli-plugin-babel/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/@vue/cli-plugin-babel/node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./PeopleNameCell.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PeopleNameCell.vue?vue&type=template&id=564d8b18&scoped=true&\"\nimport script from \"./PeopleNameCell.vue?vue&type=script&lang=js&\"\nexport * from \"./PeopleNameCell.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PeopleNameCell.vue?vue&type=style&index=0&id=564d8b18&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"564d8b18\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a',{staticClass:\"button\",attrs:{\"title\":_vm.title,\"href\":_vm.path,\"target\":_vm.target}},[(_vm.icon === 'plus')?_c('plus-icon',{staticClass:\"icon is-small\"}):_vm._e(),(_vm.icon === 'download')?_c('download-icon',{staticClass:\"icon is-small\"}):_vm._e(),(_vm.icon === 'upload')?_c('upload-icon',{staticClass:\"icon is-small\"}):_vm._e(),(_vm.icon === 'list')?_c('list-icon',{staticClass:\"icon is-small\"}):_vm._e(),(_vm.text)?_c('span',{staticClass:\"text is-hidden-touch\"},[_vm._v(\" \"+_vm._s(_vm.text)+\" \")]):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n<a\n  class=\"button\"\n  :title=\"title\"\n  :href=\"path\"\n  :target=\"target\"\n>\n  <plus-icon class=\"icon is-small\" v-if=\"icon === 'plus'\" />\n  <download-icon class=\"icon is-small\" v-if=\"icon === 'download'\" />\n  <upload-icon class=\"icon is-small\" v-if=\"icon === 'upload'\" />\n  <list-icon class=\"icon is-small\" v-if=\"icon === 'list'\" />\n  <span class=\"text is-hidden-touch\" v-if=\"text\">\n    {{ text }}\n  </span>\n</a>\n</template>\n\n<script>\nimport {\n  DownloadIcon,\n  ListIcon,\n  PlusIcon,\n  UploadIcon\n} from 'vue-feather-icons'\n\nexport default {\n  name: 'button-href-link',\n  components: {\n    DownloadIcon,\n    ListIcon,\n    PlusIcon,\n    UploadIcon\n  },\n  props: {\n    text: {\n      default: '',\n      type: String\n    },\n    path: {\n      default: '',\n      type: String\n    },\n    icon: {\n      default: '',\n      type: String\n    },\n    title: {\n      default: '',\n      type: String\n    },\n    styleclass: {\n      default: '',\n      type: String\n    },\n    target: {\n      default: '_self',\n      type: String\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.button .icon.is-small {\n  margin: 0;\n}\n</style>\n","import mod from \"-!../../../node_modules/@vue/cli-plugin-babel/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/@vue/cli-plugin-babel/node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./ButtonHrefLink.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/@vue/cli-plugin-babel/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/@vue/cli-plugin-babel/node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./ButtonHrefLink.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ButtonHrefLink.vue?vue&type=template&id=ebbaf58c&scoped=true&\"\nimport script from \"./ButtonHrefLink.vue?vue&type=script&lang=js&\"\nexport * from \"./ButtonHrefLink.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ButtonHrefLink.vue?vue&type=style&index=0&id=ebbaf58c&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"ebbaf58c\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./BuildPeopleFilterModal.vue?vue&type=style&index=0&id=edae312a&lang=scss&scoped=true&\"","export * from \"-!../../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./EditPersonModal.vue?vue&type=style&index=0&id=895f47da&lang=scss&scoped=true&\"","export * from \"-!../../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./People.vue?vue&type=style&index=0&id=305e4f64&lang=scss&scoped=true&\"","export * from \"-!../../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./PeopleNameCell.vue?vue&type=style&index=0&id=564d8b18&lang=scss&scoped=true&\"","export * from \"-!../../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./DepartmentName.vue?vue&type=style&index=0&id=50e72f9e&lang=scss&scoped=true&\""],"sourceRoot":""}