(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9b8f0e9c"],{"099d":function(t,e,a){"use strict";a("4661")},"459c":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"level page-header"},[a("div",{staticClass:"level-left"},[a("page-title",{attrs:{text:t.title}})],1),a("div",{staticClass:"level-right"},[a("button-simple",{staticClass:"level-item",attrs:{icon:"plus",text:t.newEntryLabel},on:{click:function(e){return t.$emit("new-clicked")}}})],1)])},r=[],i=a("5530"),s=a("2f62"),o=a("de40"),l=a("8d07"),d={name:"list-page-header",components:{ButtonSimple:o["a"],PageTitle:l["a"]},props:{title:{type:String,default:""},newEntryLabel:{type:String,default:""}},computed:Object(i["a"])({},Object(s["c"])([])),methods:Object(i["a"])({},Object(s["b"])([])),watch:{}},c=d,m=a("2877"),p=Object(m["a"])(c,n,r,!1,null,"bf4864ae",null);e["a"]=p.exports},4661:function(t,e,a){},"700e":function(t,e,a){"use strict";a("eb2e")},"8a8a":function(t,e,a){"use strict";a("bf27")},bf27:function(t,e,a){},c488:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"departments page fixed-page"},[a("list-page-header",{attrs:{title:t.$t("departments.title"),"new-entry-label":t.$t("departments.new_departments")},on:{"new-clicked":t.onNewClicked}}),a("department-list",{attrs:{entries:t.departments,"is-loading":t.loading.departments,"is-error":t.errors.departments},on:{"edit-clicked":t.onEditClicked,"delete-clicked":t.onDeleteClicked}}),a("edit-departments-modal",{attrs:{active:t.modals.edit,"is-loading":t.loading.edit,"is-error":t.errors.edit,"department-to-edit":t.departmentToEdit},on:{cancel:function(e){t.modals.edit=!1},confirm:t.confirmEditDepartment}}),a("delete-modal",{attrs:{active:t.modals.del,"is-loading":t.loading.del,"is-error":t.errors.del,text:t.deleteText,"error-text":t.$t("departments.delete_error")},on:{cancel:function(e){t.modals.del=!1},confirm:t.confirmDeleteDepartment}})],1)},r=[],i=a("1da1"),s=a("5530"),o=(a("96cf"),a("b0c0"),a("2f62")),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"data-list"},[a("div",{staticClass:"datatable-wrapper"},[a("table",{staticClass:"datatable"},[a("thead",{staticClass:"datatable-head"},[a("tr",[a("th",{staticClass:"name",attrs:{scope:"col"}},[t._v(" "+t._s(t.$t("departments.fields.name"))+" ")]),a("th",{attrs:{scope:"col"}},[t._v(t._s(t.$t("departments.fields.color")))]),a("th",{staticClass:"actions",attrs:{scope:"col"}})])]),t.entries.length>0?a("tbody",{staticClass:"datatable-body"},t._l(t.entries,(function(e){return a("tr",{key:e.id,staticClass:"datatable-row"},[a("td",{staticClass:"name"},[t._v(" "+t._s(e.name)+" ")]),a("td",{staticClass:"color"},[a("div",[a("span",{style:{background:e.color}})])]),a("row-actions-cell",{attrs:{"entry-id":e.id},on:{"edit-clicked":function(a){return t.$emit("edit-clicked",e)},"delete-clicked":function(a){return t.$emit("delete-clicked",e)}}})],1)})),0):t._e()])]),a("table-info",{attrs:{"is-loading":t.isLoading,"is-error":t.isError}}),a("p",{staticClass:"has-text-centered nb-asset-types"},[t._v(" "+t._s(t.entries.length)+" "+t._s(t.$tc("departments.number",t.entries.length))+" ")])],1)},d=[],c=a("14b2"),m=a("e60b"),p={name:"departments-list",props:["entries","isLoading","isError"],data:function(){return{}},components:{RowActionsCell:c["a"],TableInfo:m["a"]},computed:Object(s["a"])({},Object(o["c"])([])),methods:Object(s["a"])({},Object(o["b"])([]))},u=p,f=(a("700e"),a("2877")),b=Object(f["a"])(u,l,d,!1,null,"662b59cb",null),h=b.exports,v=a("459c"),g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:{modal:!0,"is-active":t.active}},[a("div",{staticClass:"modal-background",on:{click:function(e){return t.$emit("cancel")}}}),a("div",{staticClass:"modal-content"},[a("div",{staticClass:"box"},[t.departmentToEdit&&t.departmentToEdit.id?a("h1",{staticClass:"title"},[t._v(" "+t._s(t.$t("departments.edit_title"))+" "+t._s(t.departmentToEdit.name)+" ")]):a("h1",{staticClass:"title"},[t._v(" "+t._s(t.$t("departments.new_departments"))+" ")]),a("form",{on:{submit:function(t){t.preventDefault()}}},[a("text-field",{directives:[{name:"focus",rawName:"v-focus"}],ref:"nameField",attrs:{label:t.$t("departments.fields.name"),maxlength:30},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),a("color-field",{ref:"colorField",attrs:{label:t.$t("departments.fields.color")},model:{value:t.form.color,callback:function(e){t.$set(t.form,"color",e)},expression:"form.color"}})],1),a("modal-footer",{attrs:{"error-text":t.$t("departments.create_error"),"is-error":t.isError,"is-loading":t.isLoading},on:{confirm:t.runConfirmation,cancel:function(e){return t.$emit("cancel")}}})],1)])])},C=[],E=a("d065"),_=a("d5c9"),O=a("7bf8"),j=a("f865"),k={name:"edit-departments-modal",mixins:[E["a"]],components:{ColorField:j["a"],ModalFooter:_["a"],TextField:O["a"]},props:["onConfirmClicked","text","active","cancelRoute","isLoading","isError","departmentToEdit"],data:function(){return{form:{name:"",color:"",id:null}}},computed:Object(s["a"])({},Object(o["c"])(["assetTypes","assetTypeStatusOptions"])),methods:Object(s["a"])(Object(s["a"])({},Object(o["b"])([])),{},{runConfirmation:function(){this.$emit("confirm",this.form)}}),watch:{active:function(){var t=this;this.active&&setTimeout((function(){t.$refs.nameField.focus()}),100)},departmentToEdit:function(){this.departmentToEdit&&(this.form.name=this.departmentToEdit.name,this.form.color=this.departmentToEdit.color,this.form.id=this.departmentToEdit.id)}}},$=k,T=(a("8a8a"),Object(f["a"])($,g,C,!1,null,"d1ace3da",null)),x=T.exports,D=a("5f48"),w={name:"production-departments",components:{DeleteModal:D["a"],DepartmentList:h,EditDepartmentsModal:x,ListPageHeader:v["a"]},props:{},data:function(){return{errors:{departments:!1,edit:!1,del:!1},loading:{departments:!1,edit:!1,del:!1},modals:{del:!1,edit:!1},departmentToEdit:null,departmentToDelete:null}},computed:Object(s["a"])(Object(s["a"])({},Object(o["c"])(["departments"])),{},{deleteText:function(){return this.departmentToDelete?this.$t("departments.delete_text",{name:this.departmentToDelete.name}):""}}),mounted:function(){var t=this;this.loading.departments=!0,this.errors.departments=!1,this.loadDepartments().then((function(){t.loading.departments=!1,t.errors.departments=!1})).catch((function(){t.loading.departments=!1,t.errors.departments=!0}))},methods:Object(s["a"])(Object(s["a"])({},Object(o["b"])(["deleteDepartment","loadDepartments","newDepartement"])),{},{onNewClicked:function(){this.departmentToEdit={name:"",color:"#999999"},this.modals.edit=!0},onEditClicked:function(t){this.departmentToEdit=t,this.modals.edit=!0},confirmEditDepartment:function(t){var e=this,a="newDepartement";this.departmentToEdit&&this.departmentToEdit.id&&(a="editDepartement",t.id=this.departmentToEdit.id),this.loading.edit=!0,this.errors.edit=!1,this.$store.dispatch(a,t).then((function(){e.loading.edit=!1,e.modals.edit=!1})).catch((function(){e.loading.edit=!1,e.errors.edit=!0}))},onDeleteClicked:function(t){this.departmentToDelete=t,this.modals.del=!0},confirmDeleteDepartment:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading.del=!0,t.errors.del=!1,e.prev=2,e.next=5,t.deleteDepartment(t.departmentToDelete);case 5:t.loading.del=!1,t.modals.del=!1,e.next=13;break;case 9:e.prev=9,e.t0=e["catch"](2),t.loading.del=!1,t.errors.del=!0;case 13:case"end":return e.stop()}}),e,null,[[2,9]])})))()}})},y=w,F=Object(f["a"])(y,n,r,!1,null,"6abcfe96",null);e["default"]=F.exports},eb2e:function(t,e,a){},f865:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[t._v(t._s(t.label))]),a("div",{staticClass:"control colors"},t._l(t.colors,(function(e,n){return a("div",{key:"color-"+n,ref:"color-"+n,refInFor:!0,class:{color:!0,selected:t.value===e},on:{click:function(a){return t.colorChanged(e)}}},[a("span",{style:{background:e}})])})),0)])},r=[],i=a("5530"),s=a("2f62"),o={name:"text-field",props:{label:{default:"",type:String},value:{default:"$grey999",type:String},placeholder:{default:"",type:String},type:{default:"text",type:String},colors:{default:function(){return["#999999","#8D6E63","#43A047","#7CB342","#009688","#9CCC65","#AFB42B","#DCE775","#FFF176","#FFEB3B","#F9A825","#F57C00","#ff5252","#F06292","#AB47BC","#5C6BC0","#1976D2","#039BE5","#42A5F5","#64B5F6","#26C6DA","#78909C"]}}},data:function(){return{selectedColor:"$grey999"}},computed:Object(i["a"])({},Object(s["c"])([])),methods:Object(i["a"])(Object(i["a"])({},Object(s["b"])([])),{},{colorChanged:function(t,e){this.$emit("input",t)}})},l=o,d=(a("099d"),a("2877")),c=Object(d["a"])(l,n,r,!1,null,"562b3c5e",null);e["a"]=c.exports}}]);
//# sourceMappingURL=chunk-9b8f0e9c.a8a85942.js.map