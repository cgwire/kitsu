{"version":3,"sources":["webpack:///./src/components/pages/Timesheets.vue?43ef","webpack:///./src/components/lists/PeopleTimesheetList.vue?9e51","webpack:///src/components/lists/PeopleTimesheetList.vue","webpack:///./src/components/lists/PeopleTimesheetList.vue?bdff","webpack:///./src/components/lists/PeopleTimesheetList.vue?c563","webpack:///./src/components/sides/PeopleTimesheetInfo.vue?5a59","webpack:///./src/components/lists/TimeSpentTaskList.vue?9e74","webpack:///src/components/lists/TimeSpentTaskList.vue","webpack:///./src/components/lists/TimeSpentTaskList.vue?36c0","webpack:///./src/components/lists/TimeSpentTaskList.vue?f333","webpack:///src/components/sides/PeopleTimesheetInfo.vue","webpack:///./src/components/sides/PeopleTimesheetInfo.vue?9bc0","webpack:///./src/components/sides/PeopleTimesheetInfo.vue?bd2a","webpack:///src/components/pages/Timesheets.vue","webpack:///./src/components/pages/Timesheets.vue?ed02","webpack:///./src/components/pages/Timesheets.vue?6b94","webpack:///./src/components/lists/PeopleTimesheetList.vue?ad54","webpack:///./src/components/lists/TimeSpentTaskList.vue?82eb","webpack:///./src/components/pages/Timesheets.vue?d2e4","webpack:///./src/components/cells/PeopleNameCell.vue?583b","webpack:///src/components/cells/PeopleNameCell.vue","webpack:///./src/components/cells/PeopleNameCell.vue?fc78","webpack:///./src/components/cells/PeopleNameCell.vue?d06b","webpack:///./src/components/sides/PeopleTimesheetInfo.vue?3cdd","webpack:///./src/components/cells/PeopleNameCell.vue?531e"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","$t","detailOptions","model","value","callback","$$v","detailLevelString","expression","yearOptions","yearString","_e","monthOptions","monthString","on","exportTimesheet","filteredPeople","timesheet","detailLevel","currentMonth","currentYear","isLoading","isLoadingError","currentPerson","currentWeek","currentDay","isInfoLoading","isInfoLoadingError","tasks","hideSideInfo","staticRenderFns","ref","_v","_s","_l","year","key","month","monthToString","week","getWeekTitle","day","person","id","class","time","selected","isYearSelected","yearDuration","name","params","person_id","isMonthSelected","monthDuration","daytime","isWeekSelected","weekDuration","duration","organisation","hours_by_day","weekend","isWeekend","isDaySelected","dayDuration","isError","people","length","$tc","components","PeopleNameCell","TableInfo","data","props","type","Object","default","Array","String","Number","Boolean","computed","yearRange","monthRange","dayRange","weekRange","methods","getDuration","personId","index","date","includes","beginning","format","end","watch","route","els","$refs","body","scrollLeft","component","closeRoute","full_name","startDay","endDay","weekMonth","keys","projects","projectId","projectNames","taskTypeId","taskTypeMap","task","ProductionName","TaskTypeName","forEach","project_id","task_type_id","entity_type_name","episode_name","push","onBodyScroll","headerWrapper","style","left","reduce","project_name","XIcon","PageTitle","PeopleAvatar","TimeSpentTaskList","isMonthInfo","$route","path","indexOf","isWeekInfo","isDayInfo","onCloseClicked","$emit","ButtonSimple","Combobox","PeopleTimesheetList","PeopleTimesheetInfo","getCurrentPerson","showInfo","created","loadPeople","loadRoute","filter","isThere","i","active","label","map","reloadTimesheet","loadTimesheets","showSideInfo","weekString","loadAggregate","loadAggregatedPersonTimeSpents","console","error","err","personMap","nameData","csv","$router","Math","min","metaInfo","title","PeopleName","required"],"mappings":"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","file":"js/chunk-60d2ceb2.b8c06cc8.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"columns fixed-page\"},[_c('div',{staticClass:\"column main-column\"},[_c('div',{staticClass:\"timesheets page\"},[_c('div',{staticClass:\"page-header flexrow\"},[_c('page-title',{staticClass:\"flexrow-item\",attrs:{\"text\":_vm.$t('timesheets.title')}}),_c('combobox',{staticClass:\"flexrow-item\",attrs:{\"label\":_vm.$t('timesheets.detail_level'),\"options\":_vm.detailOptions},model:{value:(_vm.detailLevelString),callback:function ($$v) {_vm.detailLevelString=$$v},expression:\"detailLevelString\"}}),(_vm.detailLevelString !== 'year')?_c('combobox',{staticClass:\"flexrow-item\",attrs:{\"label\":_vm.$t('timesheets.year'),\"options\":_vm.yearOptions},model:{value:(_vm.yearString),callback:function ($$v) {_vm.yearString=$$v},expression:\"yearString\"}}):_vm._e(),(_vm.detailLevelString === 'day')?_c('combobox',{staticClass:\"flexrow-item\",attrs:{\"label\":_vm.$t('timesheets.month'),\"options\":_vm.monthOptions},model:{value:(_vm.monthString),callback:function ($$v) {_vm.monthString=$$v},expression:\"monthString\"}}):_vm._e(),_c('div',{staticClass:\"filler\"}),_c('button-simple',{staticClass:\"flexrow-item\",attrs:{\"title\":_vm.$t('timesheets.export_timesheet'),\"icon\":\"download\"},on:{\"click\":_vm.exportTimesheet}})],1),_c('people-timesheet-list',{staticClass:\"data-list\",attrs:{\"people\":_vm.filteredPeople,\"timesheet\":_vm.timesheet,\"detail-level\":_vm.detailLevel,\"month\":_vm.currentMonth,\"year\":_vm.currentYear,\"is-loading\":_vm.isLoading,\"is-error\":_vm.isLoadingError}})],1)]),(_vm.showInfo)?_c('div',{staticClass:\"column side-column\"},[_c('people-timesheet-info',{attrs:{\"person\":_vm.currentPerson,\"year\":_vm.currentYear,\"month\":_vm.currentMonth,\"week\":_vm.currentWeek,\"day\":_vm.currentDay,\"is-loading\":_vm.isInfoLoading,\"is-loading-error\":_vm.isInfoLoadingError,\"tasks\":_vm.tasks},on:{\"close\":_vm.hideSideInfo}})],1):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"data-list\"},[_c('div',{ref:\"body\",staticClass:\"datatable-wrapper\"},[_c('table',{staticClass:\"datatable\"},[_c('thead',{staticClass:\"datatable-head\"},[_c('tr',[_c('th',{staticClass:\"name datatable-row-header\",attrs:{\"scope\":\"col\"}},[_vm._v(\" \"+_vm._s(_vm.$t(\"people.list.name\"))+\" \")]),_vm._l((_vm.yearRange),function(year){return (_vm.detailLevel === 'year')?_c('th',{key:'year-' + year,staticClass:\"time year\",attrs:{\"scope\":\"col\"}},[_vm._v(\" \"+_vm._s(year)+\" \")]):_vm._e()}),_vm._l((_vm.monthRange),function(month){return (_vm.detailLevel === 'month')?_c('th',{key:'month-' + month,staticClass:\"time month\",attrs:{\"scope\":\"col\"}},[_vm._v(\" \"+_vm._s(_vm.monthToString(month))+\" \")]):_vm._e()}),_vm._l((_vm.weekRange),function(week){return (_vm.detailLevel === 'week')?_c('th',{key:'week-' + week,staticClass:\"daytime\",attrs:{\"scope\":\"col\",\"title\":_vm.getWeekTitle(week)}},[_vm._v(\" \"+_vm._s(week)+\" \")]):_vm._e()}),_vm._l((_vm.dayRange),function(day){return (_vm.detailLevel === 'day')?_c('th',{key:'day-' + day,staticClass:\"daytime\",attrs:{\"scope\":\"col\"}},[_vm._v(\" \"+_vm._s(day)+\" \")]):_vm._e()}),_c('th',{staticClass:\"actions\",attrs:{\"scope\":\"col\"}})],2)]),(!_vm.isLoading)?_c('tbody',{staticClass:\"datatable-body\"},_vm._l((_vm.people),function(person){return _c('tr',{key:person.id,staticClass:\"datatable-row\"},[_c('people-name-cell',{staticClass:\"name\",attrs:{\"person\":person}}),_vm._l((_vm.yearRange),function(year){return (_vm.detailLevel === 'year')?_c('td',{key:'year-' + year + '-' + person.id,class:{\n              time: true,\n              year: true,\n              selected: _vm.isYearSelected(person.id, year)\n            }},[(_vm.yearDuration(year, person.id) > 0)?_c('router-link',{staticClass:\"duration\",attrs:{\"to\":{\n                name: 'timesheets-year-person',\n                params: {\n                  person_id: person.id,\n                  year: year\n                }\n              }}},[_vm._v(\" \"+_vm._s(_vm.yearDuration(year, person.id))+\" \")]):_c('span',[_vm._v(\" - \")])],1):_vm._e()}),_vm._l((_vm.monthRange),function(month){return (_vm.detailLevel === 'month')?_c('td',{key:'month-' + month + '-' + person.id,class:{\n              time: true,\n              month: true,\n              selected: _vm.isMonthSelected(person.id, _vm.year, month)\n            }},[(_vm.monthDuration(month, person.id) > 0)?_c('router-link',{staticClass:\"duration\",attrs:{\"to\":{\n                name: 'timesheets-month-person',\n                params: {\n                  person_id: person.id,\n                  year: _vm.year,\n                  month: month\n                }\n              }}},[_vm._v(\" \"+_vm._s(_vm.monthDuration(month, person.id))+\" \")]):_c('span',[_vm._v(\" - \")])],1):_vm._e()}),_vm._l((_vm.weekRange),function(week){return (_vm.detailLevel === 'week')?_c('td',{key:'week-' + week + '-' + person.id,class:{\n              daytime: true,\n              selected: _vm.isWeekSelected(person.id, _vm.year, week)\n            }},[(_vm.weekDuration(week, person.id) > 0)?_c('router-link',{class:{\n                duration: true,\n                'warning': _vm.weekDuration(week, person.id) > 5 * _vm.organisation.hours_by_day\n              },attrs:{\"to\":{\n                name: 'timesheets-week-person',\n                params: {\n                  person_id: person.id,\n                  year: _vm.year,\n                  week: week\n                }\n              }}},[_vm._v(\" \"+_vm._s(_vm.weekDuration(week, person.id))+\" \")]):_c('span',[_vm._v(\" - \")])],1):_vm._e()}),_vm._l((_vm.dayRange),function(day){return (_vm.detailLevel === 'day')?_c('td',{key:'day-' + day + '-' + person.id,staticClass:\"daytime\",class:{\n              daytime: true,\n              weekend: _vm.isWeekend(_vm.year, _vm.month, day),\n              selected: _vm.isDaySelected(person.id, _vm.year, _vm.month, day)\n            }},[(_vm.dayDuration(day, person.id) > 0)?_c('router-link',{staticClass:\"duration\",attrs:{\"to\":{\n                name: 'timesheets-day-person',\n                params: {\n                  person_id: person.id,\n                  year: _vm.year,\n                  month: _vm.month,\n                  day: day\n                }\n              }}},[_vm._v(\" \"+_vm._s(_vm.dayDuration(day, person.id))+\" \")]):_c('span',[_vm._v(\" - \")])],1):_vm._e()}),_c('td',{staticClass:\"actions\"})],2)}),0):_vm._e()])]),_c('table-info',{attrs:{\"is-loading\":_vm.isLoading,\"is-error\":_vm.isError}}),(!_vm.isLoading)?_c('p',{staticClass:\"has-text-centered footer-info\"},[_vm._v(\" \"+_vm._s(_vm.people.length)+\" \"+_vm._s(_vm.$tc('people.persons', _vm.people.length))+\" \")]):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n<div class=\"data-list\">\n  <div\n    class=\"datatable-wrapper\"\n    ref=\"body\"\n  >\n    <table class=\"datatable\">\n      <thead class=\"datatable-head\">\n        <tr>\n          <th scope=\"col\" class=\"name datatable-row-header\">\n            {{ $t(\"people.list.name\") }}\n          </th>\n\n          <th\n            scope=\"col\"\n            class=\"time year\"\n            :key=\"'year-' + year\"\n            v-for=\"year in yearRange\"\n            v-if=\"detailLevel === 'year'\"\n          >\n            {{ year }}\n          </th>\n\n          <th\n            scope=\"col\"\n            class=\"time month\"\n            :key=\"'month-' + month\"\n            v-for=\"month in monthRange\"\n            v-if=\"detailLevel === 'month'\"\n          >\n            {{ monthToString(month) }}\n          </th>\n\n          <th\n            scope=\"col\"\n            class=\"daytime\"\n            :title=\"getWeekTitle(week)\"\n            :key=\"'week-' + week\"\n            v-for=\"week in weekRange\"\n            v-if=\"detailLevel === 'week'\"\n          >\n            {{ week }}\n          </th>\n\n          <th\n            scope=\"col\"\n            class=\"daytime\"\n            :key=\"'day-' + day\"\n            v-for=\"day in dayRange\"\n            v-if=\"detailLevel === 'day'\"\n          >\n            {{ day }}\n          </th>\n          <th scope=\"col\" class=\"actions\"></th>\n        </tr>\n      </thead>\n      <tbody\n        class=\"datatable-body\"\n        v-if=\"!isLoading\"\n      >\n        <tr\n          class=\"datatable-row\"\n          v-for=\"person in people\"\n          :key=\"person.id\"\n        >\n          <people-name-cell class=\"name\" :person=\"person\" />\n\n          <td\n            :class=\"{\n              time: true,\n              year: true,\n              selected: isYearSelected(person.id, year)\n            }\"\n            :key=\"'year-' + year + '-' + person.id\"\n            v-for=\"year in yearRange\"\n            v-if=\"detailLevel === 'year'\"\n          >\n            <router-link\n              class=\"duration\"\n              :to=\"{\n                name: 'timesheets-year-person',\n                params: {\n                  person_id: person.id,\n                  year: year\n                }\n              }\"\n              v-if=\"yearDuration(year, person.id) > 0\"\n            >\n              {{ yearDuration(year, person.id) }}\n            </router-link>\n            <span v-else>\n            -\n            </span>\n          </td>\n\n          <td\n            :class=\"{\n              time: true,\n              month: true,\n              selected: isMonthSelected(person.id, year, month)\n            }\"\n            :key=\"'month-' + month + '-' + person.id\"\n            v-for=\"month in monthRange\"\n            v-if=\"detailLevel === 'month'\"\n          >\n            <router-link\n              class=\"duration\"\n              :to=\"{\n                name: 'timesheets-month-person',\n                params: {\n                  person_id: person.id,\n                  year: year,\n                  month: month\n                }\n              }\"\n              v-if=\"monthDuration(month, person.id) > 0\"\n            >\n              {{ monthDuration(month, person.id) }}\n            </router-link>\n            <span v-else>\n            -\n            </span>\n          </td>\n\n          <td\n            :class=\"{\n              daytime: true,\n              selected: isWeekSelected(person.id, year, week)\n            }\"\n            :key=\"'week-' + week + '-' + person.id\"\n            v-for=\"week in weekRange\"\n            v-if=\"detailLevel === 'week'\"\n          >\n            <router-link\n              :class=\"{\n                duration: true,\n                'warning': weekDuration(week, person.id) > 5 * organisation.hours_by_day\n              }\"\n              :to=\"{\n                name: 'timesheets-week-person',\n                params: {\n                  person_id: person.id,\n                  year: year,\n                  week: week\n                }\n              }\"\n              v-if=\"weekDuration(week, person.id) > 0\"\n            >\n              {{ weekDuration(week, person.id) }}\n            </router-link>\n            <span v-else>\n            -\n            </span>\n          </td>\n\n          <td\n            class=\"daytime\"\n            :class=\"{\n              daytime: true,\n              weekend: isWeekend(year, month, day),\n              selected: isDaySelected(person.id, year, month, day)\n            }\"\n            :key=\"'day-' + day + '-' + person.id\"\n            v-for=\"day in dayRange\"\n            v-if=\"detailLevel === 'day'\"\n          >\n            <router-link\n              class=\"duration\"\n              :to=\"{\n                name: 'timesheets-day-person',\n                params: {\n                  person_id: person.id,\n                  year: year,\n                  month: month,\n                  day: day\n                }\n              }\"\n              v-if=\"dayDuration(day, person.id) > 0\"\n            >\n              {{ dayDuration(day, person.id) }}\n            </router-link>\n            <span v-else>\n            -\n            </span>\n          </td>\n\n          <td class=\"actions\"></td>\n         </tr>\n      </tbody>\n    </table>\n  </div>\n\n  <table-info\n    :is-loading=\"isLoading\"\n    :is-error=\"isError\"\n  />\n\n  <p\n    class=\"has-text-centered footer-info\"\n    v-if=\"!isLoading\"\n  >\n    {{ people.length }} {{ $tc('people.persons', people.length) }}\n  </p>\n</div>\n</template>\n\n<script>\nimport moment from 'moment-timezone'\nimport { mapGetters, mapActions } from 'vuex'\n\nimport {\n  monthToString,\n  getMonthRange,\n  getWeekRange,\n  getDayRange,\n  range\n} from '../../lib/time'\nimport PeopleNameCell from '@/components/cells/PeopleNameCell'\nimport TableInfo from '@/components/widgets/TableInfo'\n\nexport default {\n  name: 'people-timesheet-list',\n\n  components: {\n    PeopleNameCell,\n    TableInfo\n  },\n\n  data () {\n    return {\n      currentMonth: moment().month() + 1,\n      currentYear: moment().year(),\n      currentWeek: moment().week()\n    }\n  },\n\n  props: {\n    timesheet: {\n      type: Object,\n      default: () => {}\n    },\n\n    people: {\n      type: Array,\n      default: () => []\n    },\n\n    detailLevel: {\n      type: String,\n      default: 'day'\n    },\n\n    year: {\n      type: Number,\n      default: 0\n    },\n\n    month: {\n      type: Number,\n      default: 0\n    },\n\n    isLoading: {\n      type: Boolean,\n      default: false\n    },\n\n    isError: {\n      type: Boolean,\n      default: false\n    }\n  },\n\n  computed: {\n    ...mapGetters([\n      'isCurrentUserManager',\n      'organisation',\n      'route'\n    ]),\n\n    yearRange () {\n      return range(2018, moment().year())\n    },\n\n    monthRange () {\n      return getMonthRange(this.year, this.currentYear, this.currentMonth)\n    },\n\n    dayRange () {\n      return getDayRange(\n        this.year,\n        this.month,\n        this.currentYear,\n        this.currentMonth\n      )\n    },\n\n    weekRange () {\n      return getWeekRange(this.year, this.currentYear, this.currentWeek)\n    }\n  },\n\n  methods: {\n    ...mapActions([\n    ]),\n\n    monthToString,\n\n    yearDuration (year, personId) {\n      const yearString = `${year}`\n      return this.getDuration(yearString, personId)\n    },\n\n    monthDuration (month, personId) {\n      const monthString = `${month}`\n      return this.getDuration(monthString, personId)\n    },\n\n    weekDuration (week, personId) {\n      return this.getDuration(week, personId)\n    },\n\n    dayDuration (day, personId) {\n      return this.getDuration(day, personId)\n    },\n\n    getDuration (index, personId) {\n      if (this.timesheet &&\n          this.timesheet[index] &&\n          this.timesheet[index][personId]) {\n        return this.timesheet[index][personId] / 60\n      } else {\n        return '-'\n      }\n    },\n\n    isWeekend (year, month, day) {\n      let date = moment(`${year}-${month}-${day}`)\n      if (day < 10) date = moment(`${year}-${month}-0${day}`)\n      return [0, 6].includes(date.day())\n    },\n\n    isDaySelected (personId, year, month, day) {\n      return (\n        this.$route.params.person_id &&\n        this.$route.params.person_id === personId &&\n        this.$route.params.year === year &&\n        this.$route.params.month === month &&\n        this.$route.params.day === day\n      )\n    },\n\n    isWeekSelected (personId, year, week) {\n      return (\n        this.$route.params.person_id &&\n        this.$route.params.person_id === personId &&\n        this.$route.params.year === year &&\n        this.$route.params.week === week\n      )\n    },\n\n    isMonthSelected (personId, year, month) {\n      return (\n        this.$route.params.person_id &&\n        this.$route.params.person_id === personId &&\n        this.$route.params.year === year &&\n        this.$route.params.month === month\n      )\n    },\n\n    isYearSelected (personId, year) {\n      return (\n        this.$route.params.person_id &&\n        this.$route.params.person_id === personId &&\n        this.$route.params.year === year\n      )\n    },\n\n    getWeekTitle (week) {\n      const beginning = moment(this.currentYear + '-' + week, 'YYYY-W')\n      const end = beginning.clone().add(6, 'days')\n      return beginning.format('YYYY-MM-DD') + ' - ' + end.format('YYYY-MM-DD')\n    }\n  },\n\n  watch: {\n    route () {\n      const els = document.getElementsByClassName('selected')\n      if (els.length === 0) { // selected element is not visible\n        this.$refs.body.scrollLeft += 350\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.datatable-body tr:first-child th,\n.datatable-body tr:first-child td {\n  border-top: 0;\n}\n.dark .weekend {\n  background-color: $dark-grey;\n}\n\n.dark .duration:hover {\n  color: #333;\n}\n\n.selected .duration {\n  color: #333;\n}\n\n.name {\n  width: 230px;\n  min-width: 230px;\n}\n\n.time {\n  width: 70px;\n  min-width: 70px;\n\n  &.month {\n    width: 80px;\n    min-width: 80px;\n  }\n\n  &.year {\n    width: 90px;\n    min-width: 90px;\n  }\n}\n\n.daytime {\n  width: 60px;\n  min-width: 60px;\n}\n\n.time,\n.daytime {\n  text-align: center;\n  vertical-align: middle;\n}\n\nth.actions {\n  padding: 0;\n  width: 100%;\n  min-width: auto;\n}\n\na,\na:hover {\n  color: inherit;\n}\n\n.warning {\n  color: #ff3860;\n}\n\n.warning:hover {\n  color: red;\n}\n\n.weekend {\n  background-color: $white-grey;\n}\n\n.selected .duration {\n  background: $purple;\n}\n\n.duration {\n  border-radius: 0.3em;\n  padding: 0.5em;\n}\n\n.selected .duration.warning {\n  background: #ff9890;\n  color: black;\n}\n\n.duration:hover {\n  background: var(--background-selectable-selectable);\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PeopleTimesheetList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PeopleTimesheetList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PeopleTimesheetList.vue?vue&type=template&id=a22ab614&scoped=true&\"\nimport script from \"./PeopleTimesheetList.vue?vue&type=script&lang=js&\"\nexport * from \"./PeopleTimesheetList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PeopleTimesheetList.vue?vue&type=style&index=0&id=a22ab614&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a22ab614\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"people-timesheet-info\"},[_c('div',{staticClass:\"close\"},[_c('router-link',{staticClass:\"close-button\",attrs:{\"to\":_vm.closeRoute}},[_c('x-icon')],1)],1),_c('div',{staticClass:\"flexrow\"},[_c('people-avatar',{staticClass:\"flexrow-item\",attrs:{\"person\":_vm.person,\"no-cache\":true}}),_c('page-title',{staticClass:\"flexrow-item\",attrs:{\"text\":_vm.person.full_name}})],1),(_vm.isMonthInfo)?_c('div',{staticClass:\"info-date\"},[_vm._v(\" \"+_vm._s(_vm.monthString)+\" \"+_vm._s(_vm.year)+\" \")]):(_vm.isWeekInfo)?_c('div',{staticClass:\"info-date\"},[_vm._v(\" week \"+_vm._s(_vm.week)+\", \"+_vm._s(_vm.startDay)+\" - \"+_vm._s(_vm.endDay)+\" \"+_vm._s(_vm.weekMonth)+\" \"+_vm._s(_vm.year)+\" \")]):(_vm.isDayInfo)?_c('div',{staticClass:\"info-date\"},[_vm._v(\" \"+_vm._s(_vm.day)+\" \"+_vm._s(_vm.monthString)+\" \"+_vm._s(_vm.year)+\" \")]):_vm._e(),_c('time-spent-task-list',{staticClass:\"time-spent-list\",attrs:{\"tasks\":_vm.tasks,\"is-loading\":_vm.isLoading,\"is-error\":_vm.isLoadingError}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"data-list\"},[_c('table-info',{attrs:{\"is-loading\":_vm.isLoading,\"is-error\":_vm.isLoadingError}}),_c('div',{staticClass:\"aggregated-time-spents\"},_vm._l((Object.keys(_vm.projects)),function(projectId){return _c('div',{key:projectId,staticClass:\"by-project\"},[(_vm.projectNames[projectId])?_c('production-name',{attrs:{\"project\":{\n          id: projectId,\n          name: _vm.projectNames[projectId]\n        }}}):_vm._e(),_vm._l((Object.keys(_vm.projects[projectId])),function(taskTypeId){return _c('div',{key:taskTypeId,staticClass:\"by-task-type-id\"},[_c('task-type-name',{attrs:{\"task-type\":_vm.taskTypeMap[taskTypeId]}}),_c('div',{staticClass:\"table-body\"},[_c('table',{staticClass:\"datatable\"},[_c('tbody',{staticClass:\"datatable-body\"},_vm._l((_vm.projects[projectId][taskTypeId]),function(task){return _c('tr',{key:task.id,staticClass:\"by-task-type-id datatable-row\"},[_c('td',{staticClass:\"name\"},[_vm._v(_vm._s(task.name))]),_c('td',{staticClass:\"duration\"},[_vm._v(_vm._s(task.duration / 60))])])}),0)])])],1)})],2)}),0)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n<div class=\"data-list\">\n  <table-info\n    :is-loading=\"isLoading\"\n    :is-error=\"isLoadingError\"\n  />\n\n  <div class=\"aggregated-time-spents\">\n    <div\n      :key=\"projectId\"\n      class=\"by-project\"\n      v-for=\"projectId in Object.keys(projects)\"\n    >\n      <production-name\n        :project=\"{\n          id: projectId,\n          name: projectNames[projectId]\n        }\"\n        v-if=\"projectNames[projectId]\"\n      />\n\n      <div\n        :key=\"taskTypeId\"\n        class=\"by-task-type-id\"\n        v-for=\"taskTypeId in Object.keys(projects[projectId])\"\n      >\n        <task-type-name :task-type=\"taskTypeMap[taskTypeId]\" />\n\n        <div class=\"table-body\">\n          <table class=\"datatable\">\n            <tbody class=\"datatable-body\">\n              <tr\n                :key=\"task.id\"\n                class=\"by-task-type-id datatable-row\"\n                v-for=\"task in projects[projectId][taskTypeId]\"\n              >\n                <td class=\"name\">{{ task.name }}</td>\n                <td class=\"duration\">{{ task.duration / 60 }}</td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n</template>\n\n<script>\nimport { mapGetters, mapActions } from 'vuex'\n\nimport TableInfo from '@/components/widgets/TableInfo'\nimport ProductionName from '@/components/widgets/ProductionName'\nimport TaskTypeName from '@/components/widgets/TaskTypeName'\nimport { sortByName } from '@/lib/sorting'\n\nexport default {\n  name: 'timespent-task-list',\n\n  components: {\n    TableInfo,\n    ProductionName,\n    TaskTypeName\n  },\n\n  data () {\n    return {\n      projectNames: {}\n    }\n  },\n\n  props: {\n    tasks: {\n      type: Array,\n      default: () => []\n    },\n    isLoading: {\n      type: Boolean,\n      default: false\n    },\n    isLoadingError: {\n      type: Boolean,\n      default: false\n    }\n  },\n\n  computed: {\n    ...mapGetters([\n      'currentProduction',\n      'lastProductionScreen',\n      'taskTypeMap'\n    ]),\n\n    projects () {\n      const projects = {}\n      this.tasks.forEach((task) => {\n        if (!projects[task.project_id]) projects[task.project_id] = {}\n        if (!projects[task.project_id][task.task_type_id]) {\n          projects[task.project_id][task.task_type_id] = []\n        }\n\n        let name = task.entity_name\n        if (['Shot', 'Sequence'].includes(task.entity_type_name)) {\n          name = `${task.sequence_name} / ${name}`\n          if (task.episode_name) name = `${task.episode_name} / ${name}`\n        } else {\n          name = `${task.entity_type_name} / ${name}`\n        }\n\n        projects[task.project_id][task.task_type_id].push({\n          id: task.id,\n          name: name,\n          duration: task.duration\n        })\n      })\n\n      Object.keys(projects).forEach((projectId) => {\n        Object.keys(projects[projectId]).forEach((taskTypeId) => {\n          projects[projectId][taskTypeId] = sortByName(\n            projects[projectId][taskTypeId]\n          )\n        })\n      })\n\n      return projects\n    }\n  },\n\n  methods: {\n    ...mapActions([\n    ]),\n\n    onBodyScroll (event, position) {\n      this.$refs.headerWrapper.style.left = `-${position.scrollLeft}px`\n    }\n  },\n\n  watch: {\n    tasks () {\n      this.projectNames = this.tasks.reduce((projectNames, task) => {\n        projectNames[task.project_id] = task.project_name\n        return projectNames\n      }, {})\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.dark .table {\n  border-color: $dark-grey;\n}\n\n.name {\n  width: 300px;\n}\n\n.duration {\n  text-align: right;\n}\n\n.data-list {\n  padding-right: 1em;\n}\n\n.table {\n  border-top: 1px solid $light-grey;\n  border-bottom: 1px solid $light-grey;\n  margin-bottom: 1em;\n  margin-top: 0.5em;\n}\n\n.by-task-type-id {\n  margin-top: 1em;\n  padding-left: 1em;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TimeSpentTaskList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TimeSpentTaskList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TimeSpentTaskList.vue?vue&type=template&id=bb733394&scoped=true&\"\nimport script from \"./TimeSpentTaskList.vue?vue&type=script&lang=js&\"\nexport * from \"./TimeSpentTaskList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TimeSpentTaskList.vue?vue&type=style&index=0&id=bb733394&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"bb733394\",\n  null\n  \n)\n\nexport default component.exports","<template>\n<div class=\"people-timesheet-info\">\n  <div class=\"close\">\n    <router-link class=\"close-button\" :to=\"closeRoute\">\n      <x-icon />\n    </router-link>\n  </div>\n\n  <div class=\"flexrow\">\n    <people-avatar class=\"flexrow-item\" :person=\"person\" :no-cache=true />\n    <page-title class=\"flexrow-item\" :text=\"person.full_name\" />\n  </div>\n  <div\n    class=\"info-date\"\n    v-if=\"isMonthInfo\"\n  >\n    {{ monthString }} {{ year }}\n  </div>\n\n  <div\n    class=\"info-date\"\n    v-else-if=\"isWeekInfo\"\n  >\n    week {{ week }}, {{ startDay }} - {{ endDay }} {{ weekMonth }} {{ year }}\n  </div>\n\n  <div\n    class=\"info-date\"\n    v-else-if=\"isDayInfo\"\n  >\n    {{ day }} {{ monthString }} {{ year }}\n  </div>\n\n  <time-spent-task-list\n    class=\"time-spent-list\"\n    :tasks=\"tasks\"\n    :is-loading=\"isLoading\"\n    :is-error=\"isLoadingError\"\n  />\n</div>\n</template>\n\n<script>\nimport moment from 'moment-timezone'\n\nimport { mapGetters, mapActions } from 'vuex'\nimport { XIcon } from 'vue-feather-icons'\nimport PageTitle from '../widgets/PageTitle'\nimport PeopleAvatar from '../widgets/PeopleAvatar'\nimport TimeSpentTaskList from '../lists/TimeSpentTaskList'\nimport { monthToString } from '../../lib/time'\n\nexport default {\n  name: 'people-timesheet-info',\n\n  components: {\n    XIcon,\n    PageTitle,\n    PeopleAvatar,\n    TimeSpentTaskList\n  },\n\n  props: {\n    person: {\n      type: Object,\n      default: () => {}\n    },\n    year: {\n      type: Number,\n      default: 0\n    },\n    month: {\n      type: Number,\n      default: 0\n    },\n    week: {\n      type: Number,\n      default: 0\n    },\n    day: {\n      type: Number,\n      default: 0\n    },\n    isLoading: {\n      type: Boolean,\n      default: false\n    },\n    isLoadingError: {\n      type: Boolean,\n      default: false\n    },\n    tasks: {\n      type: Array,\n      default: () => []\n    }\n  },\n\n  computed: {\n    ...mapGetters([\n    ]),\n\n    startDay () {\n      return moment()\n        .day('Monday')\n        .year(this.year)\n        .week(this.week)\n        .date()\n    },\n\n    endDay () {\n      return moment()\n        .day('Monday')\n        .year(this.year)\n        .week(this.week)\n        .add('days', 6)\n        .date()\n    },\n\n    weekMonth () {\n      return moment()\n        .day('Monday')\n        .year(this.year)\n        .week(this.week)\n        .format('MMM')\n    },\n\n    monthString () {\n      return monthToString(this.month)\n    },\n\n    isMonthInfo () {\n      return this.$route.path.indexOf('month') > 0\n    },\n\n    isWeekInfo () {\n      return this.$route.path.indexOf('week') > 0\n    },\n\n    isDayInfo () {\n      return this.$route.path.indexOf('day') > 0\n    },\n\n    closeRoute () {\n      if (this.isMonthInfo) {\n        return {\n          name: 'timesheets-month',\n          params: {\n            year: this.year\n          }\n        }\n      } else if (this.isWeekInfo) {\n        return {\n          name: 'timesheets-week',\n          params: {\n            year: this.year\n          }\n        }\n      } else if (this.isDayInfo) {\n        return {\n          name: 'timesheets-day',\n          params: {\n            year: this.year,\n            month: this.month\n          }\n        }\n      } else {\n        return { name: 'timesheets' }\n      }\n    }\n  },\n\n  methods: {\n    ...mapActions([\n    ]),\n\n    onCloseClicked () {\n      this.$emit('close')\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.data-list {\n  padding-bottom: 5em;\n}\n\n.people-timesheet-info {\n  padding: 1em;\n}\n\n.info-date {\n  font-size: 1.5em;\n  margin-top: 1em;\n  text-transform: capitalize;\n}\n\n.close {\n  text-align: right;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PeopleTimesheetInfo.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PeopleTimesheetInfo.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PeopleTimesheetInfo.vue?vue&type=template&id=1827c700&scoped=true&\"\nimport script from \"./PeopleTimesheetInfo.vue?vue&type=script&lang=js&\"\nexport * from \"./PeopleTimesheetInfo.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PeopleTimesheetInfo.vue?vue&type=style&index=0&id=1827c700&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1827c700\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"columns fixed-page\">\n    <div class=\"column main-column\">\n      <div class=\"timesheets page\">\n        <div class=\"page-header flexrow\">\n          <page-title class=\"flexrow-item\" :text=\"$t('timesheets.title')\"/>\n          <combobox\n            class=\"flexrow-item\"\n            :label=\"$t('timesheets.detail_level')\"\n            :options=\"detailOptions\"\n            v-model=\"detailLevelString\"\n          />\n\n          <combobox\n            class=\"flexrow-item\"\n            :label=\"$t('timesheets.year')\"\n            :options=\"yearOptions\"\n            v-model=\"yearString\"\n            v-if=\"detailLevelString !== 'year'\"\n          />\n\n          <combobox\n            class=\"flexrow-item\"\n            :label=\"$t('timesheets.month')\"\n            :options=\"monthOptions\"\n            v-model=\"monthString\"\n            v-if=\"detailLevelString === 'day'\"\n          />\n          <div class=\"filler\"></div>\n          <button-simple\n            class=\"flexrow-item\"\n            :title=\"$t('timesheets.export_timesheet')\"\n            icon=\"download\"\n            @click=\"exportTimesheet\"\n          />\n        </div>\n\n        <people-timesheet-list\n          class=\"data-list\"\n          :people=\"filteredPeople\"\n          :timesheet=\"timesheet\"\n          :detail-level=\"detailLevel\"\n          :month=\"currentMonth\"\n          :year=\"currentYear\"\n          :is-loading=\"isLoading\"\n          :is-error=\"isLoadingError\"\n        />\n      </div>\n    </div>\n    <div\n      class=\"column side-column\"\n      v-if=\"showInfo\"\n    >\n      <people-timesheet-info\n        :person=\"currentPerson\"\n        :year=\"currentYear\"\n        :month=\"currentMonth\"\n        :week=\"currentWeek\"\n        :day=\"currentDay\"\n        :is-loading=\"isInfoLoading\"\n        :is-loading-error=\"isInfoLoadingError\"\n        :tasks=\"tasks\"\n        @close=\"hideSideInfo\"\n      />\n    </div>\n  </div>\n</template>\n\n<script>\nimport moment from 'moment-timezone'\nimport { mapGetters, mapActions } from 'vuex'\n\nimport ButtonSimple from '../widgets/ButtonSimple'\nimport Combobox from '../widgets/Combobox'\nimport PeopleTimesheetList from '../lists/PeopleTimesheetList'\nimport PeopleTimesheetInfo from '../sides/PeopleTimesheetInfo'\nimport PageTitle from '../widgets/PageTitle'\nimport csv from '../../lib/csv'\nimport { monthToString, range } from '../../lib/time'\nimport stringHelpers from '../../lib/string'\n\nexport default {\n  name: 'people',\n  components: {\n    ButtonSimple,\n    Combobox,\n    PageTitle,\n    PeopleTimesheetList,\n    PeopleTimesheetInfo\n  },\n\n  data () {\n    return {\n      detailOptions: [\n        {\n          label: 'Day',\n          value: 'day'\n        },\n        {\n          label: 'Week',\n          value: 'week'\n        },\n        {\n          label: 'Month',\n          value: 'month'\n        },\n        {\n          label: 'Year',\n          value: 'year'\n        }\n      ],\n\n      detailLevelString: 'day',\n      detailLevel: 'day',\n\n      yearString: `${moment().year()}`,\n      monthString: `${moment().month() + 1}`,\n\n      currentYear: moment().year(),\n      currentMonth: moment().month() + 1,\n      currentWeek: moment().week(),\n      currentDay: moment().date(),\n      currentPerson: this.getCurrentPerson(),\n\n      isLoading: false,\n      isLoadingError: false,\n\n      showInfo: true,\n      isInfoLoading: false,\n      isInfoLoadingError: false,\n      tasks: []\n    }\n  },\n\n  created () {\n    this.isLoading = true\n    if (this.people.length === 0) {\n      this.loadPeople(() => {\n        this.loadRoute()\n      })\n    } else {\n      this.loadRoute()\n    }\n  },\n\n  computed: {\n    ...mapGetters([\n      'isCurrentUserManager',\n      'people',\n      'personMap',\n      'timesheet'\n    ]),\n\n    filteredPeople () {\n      return this.people.filter((person) => {\n        const keys = Object.keys(this.timesheet)\n        let isThere = false\n        let i = 0\n        do {\n          if (this.timesheet[keys[i]]) {\n            isThere = this.timesheet[keys[i]][person.id] !== undefined\n          }\n          i++\n        } while (!isThere && i < keys.length)\n\n        return person.active && isThere\n      })\n    },\n\n    yearOptions () {\n      const year = 2018\n      const currentYear = moment().year()\n      return range(year, currentYear)\n        .map(year => ({\n          label: year,\n          value: `${year}`\n        }))\n    },\n\n    monthOptions () {\n      const currentYear = `${moment().year()}`\n      const month = 1\n      const currentMonth = moment().month() + 1\n      let monthRange = range(month, 12)\n      if (currentYear === this.yearString) {\n        monthRange = range(month, currentMonth)\n      }\n\n      return monthRange.map(month => ({\n        label: monthToString(month),\n        value: `${month}`\n      }))\n    }\n  },\n\n  methods: {\n    ...mapActions([\n      'loadPeople',\n      'loadAggregatedPersonTimeSpents',\n      'loadTimesheets'\n    ]),\n\n    reloadTimesheet () {\n      this.isLoading = true\n      this.loadTimesheets({\n        detailLevel: this.detailLevel,\n        year: this.currentYear,\n        month: this.currentMonth\n      })\n        .then((table) => {\n          this.isLoading = false\n        })\n        .catch(() => {\n          this.isLoading = false\n          this.isLoadingError = true\n        })\n    },\n\n    showSideInfo () {\n      this.showInfo = true\n    },\n\n    hideSideInfo () {\n      this.showInfo = false\n    },\n\n    loadRoute () {\n      const { month, year, week, day } = this.$route.params\n\n      const previousDetailLevel = `${this.detailLevel}`\n      const previousMonth = `${this.currentMonth}`\n      const previousYear = `${this.currentYear}`\n      if (this.$route.path.indexOf('week') > 0) this.detailLevel = 'week'\n      if (this.$route.path.indexOf('month') > 0) this.detailLevel = 'month'\n      if (this.$route.path.indexOf('day') > 0) this.detailLevel = 'day'\n      if (this.$route.path.indexOf('year') > 0) this.detailLevel = 'year'\n\n      this.currentPerson = this.getCurrentPerson()\n      this.detailLevelString = this.detailLevel\n      if (month) {\n        this.currentMonth = Number(month)\n        this.monthString = `${month}`\n      }\n      if (year) {\n        this.currentYear = Number(year)\n        this.yearString = `${year}`\n      }\n      if (week) {\n        this.currentWeek = Number(week)\n        this.weekString = `${week}`\n      }\n      if (day) {\n        this.currentDay = Number(day)\n      }\n\n      const detailLevelHasChanged = previousDetailLevel !== this.detailLevel\n      const monthHasChanged =\n        previousMonth.localeCompare(`${this.currentMonth}`) !== 0\n      const yearHasChanged =\n        previousYear.localeCompare(`${this.currentYear}`) !== 0\n\n      if (this.$route.path.indexOf('person') > 0) {\n        this.showSideInfo()\n        this.loadAggregate()\n        if (this.isLoading) {\n          this.reloadTimesheet()\n        }\n      } else {\n        this.hideSideInfo()\n        if (\n          this.isLoading ||\n          monthHasChanged ||\n          yearHasChanged ||\n          detailLevelHasChanged\n        ) {\n          this.reloadTimesheet()\n        }\n      }\n    },\n\n    loadAggregate () {\n      this.isInfoLoading = true\n      this.isInfoLoadingError = false\n      this.tasks = []\n      this.loadAggregatedPersonTimeSpents({\n        personId: this.$route.params.person_id,\n        detailLevel: this.detailLevel,\n        year: this.$route.params.year,\n        month: this.$route.params.month,\n        week: this.$route.params.week,\n        day: this.$route.params.day\n      }).then((tasks) => {\n        this.isInfoLoading = false\n        this.tasks = tasks.filter((task) => task.duration > 0)\n      }).catch((err) => {\n        console.error(err)\n        this.isInfoLoadingError = true\n      })\n    },\n\n    getCurrentPerson () {\n      const personId = this.$route.params.person_id\n      if (personId && this.personMap) {\n        return this.personMap[personId]\n      } else {\n        return {}\n      }\n    },\n\n    exportTimesheet () {\n      const nameData = [\n        'timesheet',\n        this.detailLevel,\n        this.currentYear\n      ]\n      if (this.detailLevel === 'day') nameData.push(this.currentMonth)\n      const name = stringHelpers.slugify(nameData.join('_'))\n      csv.generateTimesheet(\n        name,\n        this.timesheet,\n        this.filteredPeople,\n        this.detailLevel,\n        this.currentYear,\n        this.currentMonth,\n        moment().month() + 1,\n        moment().year(),\n        moment().week()\n      )\n    }\n  },\n\n  watch: {\n    detailLevelString () {\n      if (this.detailLevel !== this.detailLevelString) {\n        if (this.detailLevelString === 'month') {\n          this.$router.push({\n            name: 'timesheets-month',\n            params: {\n              year: this.currentYear\n            }\n          })\n        } else if (this.detailLevelString === 'week') {\n          this.$router.push({\n            name: 'timesheets-week',\n            params: {\n              year: this.currentYear\n            }\n          })\n        } else if (this.detailLevelString === 'day') {\n          this.$router.push({\n            name: 'timesheets-day',\n            params: {\n              year: this.currentYear,\n              month: this.currentMonth\n            }\n          })\n        } else if (this.detailLevelString === 'year') {\n          this.$router.push({\n            name: 'timesheets-year',\n            params: {\n              year: this.currentYear\n            }\n          })\n        }\n      }\n    },\n\n    yearString () {\n      const year = Number(this.yearString)\n      const currentMonth = moment().month()\n      if (this.currentYear !== year) {\n        if (this.detailLevel === 'month') {\n          this.$router.push({\n            name: 'timesheets-month',\n            params: { year }\n          })\n        } else if (this.detailLevel === 'week') {\n          this.$router.push({\n            name: 'timesheets-week',\n            params: { year }\n          })\n        } else {\n          this.$router.push({\n            name: 'timesheets-day',\n            params: {\n              year: year,\n              month: Math.min(Number(this.monthString), currentMonth)\n            }\n          })\n        }\n      }\n    },\n\n    monthString () {\n      if (this.currentMonth !== Number(this.monthString)) {\n        this.$router.push({\n          name: 'timesheets-day',\n          params: {\n            year: this.currentYear,\n            month: Number(this.monthString)\n          }\n        })\n      }\n    },\n\n    $route () {\n      this.loadRoute()\n    }\n  },\n\n  metaInfo () {\n    return {\n      title: `${this.$t('timesheets.title')} - Kitsu`\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.dark .main-column {\n  border-color: $dark-grey-lightest;\n}\n\n.data-list {\n  margin-top: 0;\n}\n\n.timesheets {\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  padding-bottom: 1em;\n}\n\n.columns {\n  display: flex;\n  flex-direction: row;\n  padding: 0;\n}\n\n.column {\n  overflow-y: auto;\n  padding: 0;\n}\n\n.main-column {\n  border-right: 3px solid $light-grey;\n  margin: 0;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Timesheets.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Timesheets.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Timesheets.vue?vue&type=template&id=7170a309&scoped=true&\"\nimport script from \"./Timesheets.vue?vue&type=script&lang=js&\"\nexport * from \"./Timesheets.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Timesheets.vue?vue&type=style&index=0&id=7170a309&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7170a309\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PeopleTimesheetList.vue?vue&type=style&index=0&id=a22ab614&lang=scss&scoped=true&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TimeSpentTaskList.vue?vue&type=style&index=0&id=bb733394&lang=scss&scoped=true&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Timesheets.vue?vue&type=style&index=0&id=7170a309&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('th',{staticClass:\"name datatable-row-header\",attrs:{\"scope\":\"row\"}},[_c('div',{staticClass:\"people-name\"},[_c('people-avatar',{staticClass:\"avatar\",attrs:{\"person\":_vm.person}}),_c('people-name',{staticClass:\"people-name\",attrs:{\"person\":_vm.person}})],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n<th scope=\"row\" class=\"name datatable-row-header\">\n  <div class=\"people-name\">\n    <people-avatar class=\"avatar\" :person=\"person\" />\n    <people-name class=\"people-name\" :person=\"person\" />\n  </div>\n</th>\n</template>\n\n<script>\nimport { mapGetters, mapActions } from 'vuex'\nimport PeopleAvatar from '../widgets/PeopleAvatar'\nimport PeopleName from '../widgets/PeopleName'\n\nexport default {\n  name: 'people-name-cell',\n  components: {\n    PeopleName,\n    PeopleAvatar\n  },\n\n  props: {\n    person: {\n      type: Object,\n      required: true\n    }\n  },\n\n  computed: {\n    ...mapGetters([\n    ])\n  },\n  methods: {\n    ...mapActions([\n    ])\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.people-name {\n  display: flex;\n  align-items: center;\n  flex-direction: row;\n}\n\n.people-name {\n  margin-left: 0.6em;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PeopleNameCell.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PeopleNameCell.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PeopleNameCell.vue?vue&type=template&id=564d8b18&scoped=true&\"\nimport script from \"./PeopleNameCell.vue?vue&type=script&lang=js&\"\nexport * from \"./PeopleNameCell.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PeopleNameCell.vue?vue&type=style&index=0&id=564d8b18&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"564d8b18\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PeopleTimesheetInfo.vue?vue&type=style&index=0&id=1827c700&lang=scss&scoped=true&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PeopleNameCell.vue?vue&type=style&index=0&id=564d8b18&lang=scss&scoped=true&\""],"sourceRoot":""}